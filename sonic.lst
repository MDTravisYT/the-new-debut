00000000 =00000000                  EnableSRAM:	equ 0	; change to 1 to enable SRAM
00000000 =00000001                  BackupSRAM:	equ 1
00000000 =00000003                  AddressSRAM:	equ 3	; 0 = odd+even; 2 = even only; 3 = odd only
00000000                            
00000000                            ; Change to 0 to build the original version of the game, dubbed REV00
00000000                            ; Change to 1 to build the later vesion, dubbed REV01, which includes various bugfixes and enhancements
00000000                            ; Change to 2 to build the version from Sonic Mega Collection, dubbed REVXB, which fixes the infamous "spike bug"
00000000 =00000000                  Revision:	equ 0
00000000                            
00000000 =00000006                  ZoneCount:	equ 6	; discrete zones are: GHZ, MZ, SYZ, LZ, SLZ, and SBZ
00000000                            
00000000 =00000000                  OptimiseSound:	equ 0	; change to 1 to optimise sound queuing
00000000                            
00000000                            ; 0 is full game
00000000                            ; 1 is demo mode
00000000 =00000000                  IsDemo:	equ 0
00000000                            
00000000                                include "sonic.asm"
00000000                            ;  =========================================================================
00000000                            ; |           Sonic Debut for Sega Mega Drive                              |
00000000                            ;  =========================================================================
00000000                            ;
00000000                            ; Disassembly created by Hivebrain
00000000                            ; thanks to drx, Stealth and Esrael L.G. Neto
00000000                            
00000000                            ; ===========================================================================
00000000                            
00000000                                include "Debugger.asm"
00000000                            
00000000                            ; ===============================================================
00000000                            ; ---------------------------------------------------------------
00000000                            ; Error handling and debugging modules
00000000                            ; 2016-2017, Vladikcomper
00000000                            ; ---------------------------------------------------------------
00000000                            ; Debugging macros definitions file
00000000                            ; ---------------------------------------------------------------
00000000                            
00000000                            
00000000                            ; ===============================================================
00000000                            ; ---------------------------------------------------------------
00000000                            ; Constants
00000000                            ; ---------------------------------------------------------------
00000000                            
00000000                            ; ----------------------------
00000000                            ; Arguments formatting flags
00000000                            ; ----------------------------
00000000                            
00000000                            ; General arguments format flags
00000000 =00000080                  hex		equ		$80				; flag to display as hexadecimal number
00000000 =00000090                  dec		equ		$90				; flag to display as decimal number
00000000 =000000A0                  bin		equ		$A0				; flag to display as binary number
00000000 =000000B0                  sym		equ		$B0				; flag to display as symbol (treat as offset, decode into symbol +displacement, if present)
00000000 =000000C0                  symdisp	equ		$C0				; flag to display as symbol's displacement alone (DO NOT USE, unless complex formatting is required, see notes below)
00000000 =000000D0                  str		equ		$D0				; flag to display as string (treat as offset, insert string from that offset)
00000000                            
00000000                            ; NOTES:
00000000                            ;	* By default, the "sym" flag displays both symbol and displacement (e.g.: "Map_Sonic+$2E")
00000000                            ;		In case, you need a different formatting for the displacement part (different text color and such),
00000000                            ;		use "sym|split", so the displacement won't be displayed until symdisp is met
00000000                            ;	* The "symdisp" can only be used after the "sym|split" instance, which decodes offset, otherwise, it'll
00000000                            ;		display a garbage offset.
00000000                            ;	* No other argument format flags (hex, dec, bin, str) are allowed between "sym|split" and "symdisp",
00000000                            ;		otherwise, the "symdisp" results are undefined.
00000000                            ;	* When using "str" flag, the argument should point to string offset that will be inserted.
00000000                            ;		Arguments format flags CAN NOT be used in the string (as no arguments are meant to be here),
00000000                            ;		only console control flags (see below).
00000000                            
00000000                            
00000000                            ; Additional flags ...
00000000                            ; ... for number formatters (hex, dec, bin)
00000000 =00000008                  signed	equ		8				; treat number as signed (display + or - before the number depending on sign)
00000000                            
00000000                            ; ... for symbol formatter (sym)
00000000 =00000008                  split	equ		8				; DO NOT write displacement (if present), skip and wait for "symdisp" flag to write it later (optional)
00000000 =00000004                  forced	equ		4				; display "<unknown>" if symbol was not found, otherwise, plain offset is displayed by the displacement formatter
00000000                            
00000000                            ; ... for symbol displacement formatter (symdisp)
00000000 =00000008                  weak	equ		8				; DO NOT write plain offset if symbol is displayed as "<unknown>"
00000000                            
00000000                            ; Argument type flags:
00000000                            ; - DO NOT USE in formatted strings processed by macros, as these are included automatically
00000000                            ; - ONLY USE when writting down strings manually with DC.B
00000000 =00000000                  byte	equ		0
00000000 =00000001                  word	equ		1
00000000 =00000003                  long	equ		3
00000000                            
00000000                            ; -----------------------
00000000                            ; Console control flags
00000000                            ; -----------------------
00000000                            
00000000                            ; Plain control flags: no arguments following
00000000 =000000E0                  endl	equ		$E0				; "End of line": flag for line break
00000000 =000000E6                  cr		equ		$E6				; "Carriage return": jump to the beginning of the line
00000000 =000000E8                  pal0	equ		$E8				; use palette line #0
00000000 =000000EA                  pal1	equ		$EA				; use palette line #1
00000000 =000000EC                  pal2	equ		$EC				; use palette line #2
00000000 =000000EE                  pal3	equ		$EE				; use palette line #3
00000000                            
00000000                            ; Parametrized control flags: followed by 1-byte argument
00000000 =000000F0                  setw	equ		$F0				; set line width: number of characters before automatic line break
00000000 =000000F4                  setoff	equ		$F4				; set tile offset: lower byte of base pattern, which points to tile index of ASCII character 00
00000000 =000000F8                  setpat	equ		$F8				; set tile pattern: high byte of base pattern, which determines palette flags and $100-tile section id
00000000 =000000FA                  setx	equ		$FA				; set x-position
00000000                            
00000000                            
00000000                            
00000000                            ; ---------------------------------------------------------------
00000000                            ; Macros
00000000                            ; ---------------------------------------------------------------
00000000                            
00000000                            RaiseError &
00000000                            
00000000                            	pea		*(pc)
00000000                            	move.w	sr, -(sp)
00000000                            	__FSTRING_GenerateArgumentsCode \string
00000000                            	jsr		ErrorHandler
00000000                            	__FSTRING_GenerateDecodedString \string
00000000                            	if strlen("\console_program")			; if console program offset is specified ...
00000000                            		dc.b	\opts+_eh_enter_console|(((*&1)^1)*_eh_align_offset)	; add flag "_eh_align_offset" if the next byte is at odd offset ...
00000000                            		even															; ... to tell Error handler to skip this byte, so it'll jump to ...
00000000                            		jmp		\console_program										; ... an aligned "jmp" instruction that calls console program itself
00000000                            	else
00000000                            		dc.b	\opts+0						; otherwise, just specify \opts for error handler, +0 will generate dc.b 0 ...
00000000                            		even								; ... in case \opts argument is empty or skipped
00000000                            	endc
00000000                            	even
00000000                            
00000000                            	endm
00000000                            
00000000                            ; ---------------------------------------------------------------
00000000                            Console &
00000000                            
00000000                            	if strcmp("\0","write")|strcmp("\0","writeline")
00000000                            		move.w	sr, -(sp)
00000000                            		__FSTRING_GenerateArgumentsCode \1
00000000                            		movem.l	a0-a2/d7, -(sp)
00000000                            		if (__sp>0)
00000000                            			lea		4*4(sp), a2
00000000                            		endc
00000000                            		lea		@str\@(pc), a1
00000000                            		jsr		ErrorHandler.__global__console_\0\_formatted
00000000                            		movem.l	(sp)+, a0-a2/d7
00000000                            		if (__sp>8)
00000000                            			lea		__sp(sp), sp
00000000                            		elseif (__sp>0)
00000000                            			addq.w	#__sp, sp
00000000                            		endc
00000000                            		move.w	(sp)+, sr
00000000                            		bra.w	@instr_end\@
00000000                            	@str\@:
00000000                            		__FSTRING_GenerateDecodedString \1
00000000                            		even
00000000                            	@instr_end\@:
00000000                            
00000000                            	elseif strcmp("\0","run")
00000000                            		jsr		ErrorHandler.__extern__console_only
00000000                            		jsr		\1
00000000                            		bra.s	*
00000000                            
00000000                            	elseif strcmp("\0","setxy")
00000000                            		move.w	sr, -(sp)
00000000                            		movem.l	d0-d1, -(sp)
00000000                            		move.w	\2, -(sp)
00000000                            		move.w	\1, -(sp)
00000000                            		jsr		ErrorHandler.__global__console_setposasxy_stack
00000000                            		addq.w	#4, sp
00000000                            		movem.l	(sp)+, d0-d1
00000000                            		move.w	(sp)+, sr
00000000                            
00000000                            	elseif strcmp("\0","breakline")
00000000                            		move.w	sr, -(sp)
00000000                            		jsr		ErrorHandler.__global__console_startnewline
00000000                            		move.w	(sp)+, sr
00000000                            
00000000                            	else
00000000                            		inform	2,"""\0"" isn't a member of ""Console"""
00000000                            
00000000                            	endc
00000000                            	endm
00000000                            
00000000                            ; ---------------------------------------------------------------
00000000                            __ErrorMessage &
00000000                            		__FSTRING_GenerateArgumentsCode \string
00000000                            		jsr		ErrorHandler
00000000                            		__FSTRING_GenerateDecodedString \string
00000000                            		dc.b	\opts+0
00000000                            		even
00000000                            
00000000                            	endm
00000000                            
00000000                            ; ---------------------------------------------------------------
00000000                            __FSTRING_GenerateArgumentsCode &
00000000                            
00000000                            	__pos:	set 	instr(\string,'%<')		; token position
00000000                            	__stack:set		0						; size of actual stack
00000000                            	__sp:	set		0						; stack displacement
00000000                            
00000000                            	; Parse string itself
00000000                            	while (__pos)
00000000                            
00000000                            		; Retrive expression in brackets following % char
00000000                                	__endpos:	set		instr(__pos+1,\string,'>')
00000000                                	__midpos:	set		instr(__pos+5,\string,' ')
00000000                                	if (__midpos<1)|(__midpos>__endpos)
00000000                            			__midpos: = __endpos
00000000                                	endc
00000000                            		__substr:	substr	__pos+1+1,__endpos-1,\string			; .type ea param
00000000                            		__type:		substr	__pos+1+1,__pos+1+1+1,\string			; .type
00000000                            
00000000                            		; Expression is an effective address (e.g. %(.w d0 hex) )
00000000                            		if "\__type">>8="."
00000000                            			__operand:	substr	__pos+1+1,__midpos-1,\string			; .type ea
00000000                            			__param:	substr	__midpos+1,__endpos-1,\string			; param
00000000                            
00000000                            			if "\__type"=".b"
00000000                            				pushp	"move\__operand\,1(sp)"
00000000                            				pushp	"subq.w	#2, sp"
00000000                            				__stack: = __stack+2
00000000                            				__sp: = __sp+2
00000000                            
00000000                            			elseif "\__type"=".w"
00000000                            				pushp	"move\__operand\,-(sp)"
00000000                            				__stack: = __stack+1
00000000                            				__sp: = __sp+2
00000000                            
00000000                            			elseif "\__type"=".l"
00000000                            				pushp	"move\__operand\,-(sp)"
00000000                            				__stack: = __stack+1
00000000                            				__sp: = __sp+4
00000000                            
00000000                            			else
00000000                            				fatal 'Unrecognized type in string operand: %<\__substr>'
00000000                            			endc
00000000                            		endc
00000000                            
00000000                            		__pos:	set		instr(__pos+1,\string,'%<')
00000000                            	endw
00000000                            
00000000                            	; Generate stack code
00000000                            	rept __stack
00000000                            		popp	__command
00000000                            		\__command
00000000                            	endr
00000000                            
00000000                            	endm
00000000                            
00000000                            ; ---------------------------------------------------------------
00000000                            __FSTRING_GenerateDecodedString &
00000000                            
00000000                            	__lpos:	set		1						; start position
00000000                            	__pos:	set 	instr(\string,'%<')		; token position
00000000                            
00000000                            	while (__pos)
00000000                            
00000000                            		; Write part of string before % token
00000000                            		__substr:	substr	__lpos,__pos-1,\string
00000000                            		dc.b	"\__substr"
00000000                            
00000000                            		; Retrive expression in brakets following % char
00000000                                	__endpos:	set		instr(__pos+1,\string,'>')
00000000                                	__midpos:	set		instr(__pos+5,\string,' ')
00000000                                	if (__midpos<1)|(__midpos>__endpos)
00000000                            			__midpos: = __endpos
00000000                                	endc
00000000                            		__type:		substr	__pos+1+1,__pos+1+1+1,\string			; .type
00000000                            
00000000                            		; Expression is an effective address (e.g. %<.w d0 hex> )
00000000                            		if "\__type">>8="."    
00000000                            			__param:	substr	__midpos+1,__endpos-1,\string			; param
00000000                            			if strlen("\__param")<1
00000000                            				__param: substr ,,"hex"			; if param is ommited, set it to "hex"
00000000                            			endc
00000000                            			if "\__type"=".b"
00000000                            				dc.b	\__param
00000000                            			elseif "\__type"=".w"
00000000                            				dc.b	\__param|1
00000000                            			else
00000000                            				dc.b	\__param|3
00000000                            			endc
00000000                            
00000000                            		; Expression is an inline constant (e.g. %<endl> )
00000000                            		else
00000000                            			__substr:	substr	__pos+1+1,__endpos-1,\string
00000000                            			dc.b	\__substr
00000000                            		endc
00000000                            
00000000                            		__lpos:	set		__endpos+1
00000000                            		__pos:	set		instr(__pos+1,\string,'%<')
00000000                            	endw
00000000                            
00000000                            	; Write part of string before the end
00000000                            	__substr:	substr	__lpos,,\string
00000000                            	dc.b	"\__substr"
00000000                            	dc.b	0
00000000                            
00000000                            	endm
00000000                            	endm
00000000                            	include	"Constants.asm"
00000000                            ; ---------------------------------------------------------------------------
00000000                            ; Constants
00000000                            ; ---------------------------------------------------------------------------
00000000                            
00000000 =00006978                  Size_of_SegaPCM:		equ $6978
00000000                            
00000000                            ; VDP addressses
00000000 =00C00000                  vdp_data_port:		equ $C00000
00000000 =00C00004                  vdp_control_port:	equ $C00004
00000000 =00C00008                  vdp_counter:		equ $C00008
00000000                            
00000000 =00C00011                  psg_input:		equ $C00011
00000000                            
00000000                            ; Z80 addresses
00000000 =00A00000                  z80_ram:		equ $A00000	; start of Z80 RAM
00000000 =00A000EA                  z80_dac3_pitch:		equ $A000EA
00000000 =00A01FFD                  z80_dac_status:		equ $A01FFD
00000000 =00A01FFF                  z80_dac_sample:		equ $A01FFF
00000000 =00A02000                  z80_ram_end:		equ $A02000	; end of non-reserved Z80 RAM
00000000 =00A10001                  z80_version:		equ $A10001
00000000 =00A10002                  z80_port_1_data:	equ $A10002
00000000 =00A10008                  z80_port_1_control:	equ $A10008
00000000 =00A1000A                  z80_port_2_control:	equ $A1000A
00000000 =00A1000C                  z80_expansion_control:	equ $A1000C
00000000 =00A11100                  z80_bus_request:	equ $A11100
00000000 =00A11200                  z80_reset:		equ $A11200
00000000 =00A04000                  ym2612_a0:		equ $A04000
00000000 =00A04001                  ym2612_d0:		equ $A04001
00000000 =00A04002                  ym2612_a1:		equ $A04002
00000000 =00A04003                  ym2612_d1:		equ $A04003
00000000                            
00000000 =00A14000                  security_addr:		equ $A14000
00000000                            
00000000                            ; Sound driver constants
00000000 =00000000                  TrackPlaybackControl:	equ 0		; All tracks
00000000 =00000001                  TrackVoiceControl:	equ 1		; All tracks
00000000 =00000002                  TrackTempoDivider:	equ 2		; All tracks
00000000 =00000004                  TrackDataPointer:	equ 4		; All tracks (4 bytes)
00000000 =00000008                  TrackTranspose:		equ 8		; FM/PSG only (sometimes written to as a word, to include TrackVolume)
00000000 =00000009                  TrackVolume:		equ 9		; FM/PSG only
00000000 =0000000A                  TrackAMSFMSPan:		equ $A		; FM/DAC only
00000000 =0000000B                  TrackVoiceIndex:	equ $B		; FM/PSG only
00000000 =0000000C                  TrackVolEnvIndex:	equ $C		; PSG only
00000000 =0000000D                  TrackStackPointer:	equ $D		; All tracks
00000000 =0000000E                  TrackDurationTimeout:	equ $E		; All tracks
00000000 =0000000F                  TrackSavedDuration:	equ $F		; All tracks
00000000 =00000010                  TrackSavedDAC:		equ $10		; DAC only
00000000 =00000010                  TrackFreq:		equ $10		; FM/PSG only (2 bytes)
00000000 =00000012                  TrackNoteTimeout:	equ $12		; FM/PSG only
00000000 =00000013                  TrackNoteTimeoutMaster:equ $13		; FM/PSG only
00000000 =00000014                  TrackModulationPtr:	equ $14		; FM/PSG only (4 bytes)
00000000 =00000018                  TrackModulationWait:	equ $18		; FM/PSG only
00000000 =00000019                  TrackModulationSpeed:	equ $19		; FM/PSG only
00000000 =0000001A                  TrackModulationDelta:	equ $1A		; FM/PSG only
00000000 =0000001B                  TrackModulationSteps:	equ $1B		; FM/PSG only
00000000 =0000001C                  TrackModulationVal:	equ $1C		; FM/PSG only (2 bytes)
00000000 =0000001E                  TrackDetune:		equ $1E		; FM/PSG only
00000000 =0000001F                  TrackPSGNoise:		equ $1F		; PSG only
00000000 =0000001F                  TrackFeedbackAlgo:	equ $1F		; FM only
00000000 =00000020                  TrackVoicePtr:		equ $20		; FM SFX only (4 bytes)
00000000 =00000024                  TrackLoopCounters:	equ $24		; All tracks (multiple bytes)
00000000                            TrackGoSubStack:	equ TrackSz	; All tracks (multiple bytes. This constant won't get to be used because of an optimisation that just uses zTrackSz)
00000000                            
00000000 =00000030                  TrackSz:	equ $30
00000000                            
00000000                            ; VRAM data
00000000 =0000C000                  vram_fg:	equ $C000	; foreground namespace
00000000 =0000E000                  vram_bg:	equ $E000	; background namespace
00000000 =0000F000                  vram_sonic:	equ $F000	; Sonic graphics
00000000 =0000F800                  vram_sprites:	equ $F800	; sprite table
00000000 =0000FC00                  vram_hscroll:	equ $FC00	; horizontal scroll table
00000000                            
00000000                            ; Game modes
00000000                            id_Sega:	equ ptr_GM_Sega-GameModeArray	; $00
00000000                            id_Title:	equ ptr_GM_Title-GameModeArray	; $04
00000000                            id_Demo:	equ ptr_GM_Demo-GameModeArray	; $08
00000000                            id_Level:	equ ptr_GM_Level-GameModeArray	; $0C
00000000                            id_Special:	equ ptr_GM_Special-GameModeArray; $10
00000000                            id_Continue:	equ ptr_GM_Cont-GameModeArray	; $14
00000000                            id_Ending:	equ ptr_GM_Ending-GameModeArray	; $18
00000000                            id_Credits:	equ ptr_GM_Credits-GameModeArray; $1C
00000000                            
00000000                            ; Levels
00000000 =00000000                  id_GHZ:		equ 0
00000000 =00000001                  id_LZ:		equ 1
00000000 =00000002                  id_MZ:		equ 2
00000000 =00000003                  id_SLZ:		equ 3
00000000 =00000004                  id_SYZ:		equ 4
00000000 =00000005                  id_SBZ:		equ 5
00000000 =00000006                  id_EndZ:	equ 6
00000000 =00000007                  id_IMZ:		equ 7
00000000 =00000008                  id_CSZ:		equ 8
00000000                            
00000000                            ; Colours
00000000 =00000000                  cBlack:		equ $000		; colour black
00000000 =00000EEE                  cWhite:		equ $EEE		; colour white
00000000 =00000E00                  cBlue:		equ $E00		; colour blue
00000000 =000000E0                  cGreen:		equ $0E0		; colour green
00000000 =0000000E                  cRed:		equ $00E		; colour red
00000000 =000000EE                  cYellow:	equ cGreen+cRed		; colour yellow
00000000 =00000EE0                  cAqua:		equ cGreen+cBlue	; colour aqua
00000000 =00000E0E                  cMagenta:	equ cBlue+cRed		; colour magenta
00000000                            
00000000                            ; Joypad input
00000000 =00000080                  btnStart:	equ %10000000 ; Start button	($80)
00000000 =00000040                  btnA:		equ %01000000 ; A		($40)
00000000 =00000020                  btnC:		equ %00100000 ; C		($20)
00000000 =00000010                  btnB:		equ %00010000 ; B		($10)
00000000 =00000008                  btnR:		equ %00001000 ; Right		($08)
00000000 =00000004                  btnL:		equ %00000100 ; Left		($04)
00000000 =00000002                  btnDn:		equ %00000010 ; Down		($02)
00000000 =00000001                  btnUp:		equ %00000001 ; Up		($01)
00000000 =0000000F                  btnDir:		equ %00001111 ; Any direction	($0F)
00000000 =00000070                  btnABC:		equ %01110000 ; A, B or C	($70)
00000000 =00000007                  bitStart:	equ 7
00000000 =00000006                  bitA:		equ 6
00000000 =00000005                  bitC:		equ 5
00000000 =00000004                  bitB:		equ 4
00000000 =00000003                  bitR:		equ 3
00000000 =00000002                  bitL:		equ 2
00000000 =00000001                  bitDn:		equ 1
00000000 =00000000                  bitUp:		equ 0
00000000                            
00000000                            ; Object variables
00000000 =00000001                  obRender:	equ 1	; bitfield for x/y flip, display mode
00000000 =00000002                  obGfx:		equ 2	; palette line & VRAM setting (2 bytes)
00000000 =00000004                  obMap:		equ 4	; mappings address (4 bytes)
00000000 =00000008                  obX:		equ 8	; x-axis position (2-4 bytes)
00000000 =0000000A                  obScreenY:	equ $A	; y-axis position for screen-fixed items (2 bytes)
00000000 =0000000C                  obY:		equ $C	; y-axis position (2-4 bytes)
00000000 =00000010                  obVelX:		equ $10	; x-axis velocity (2 bytes)
00000000 =00000012                  obVelY:		equ $12	; y-axis velocity (2 bytes)
00000000 =00000014                  obInertia:	equ $14	; potential speed (2 bytes)
00000000 =00000016                  obHeight:	equ $16	; height/2
00000000 =00000017                  obWidth:	equ $17	; width/2
00000000 =00000018                  obPriority:	equ $18	; sprite stack priority -- 0 is front
00000000 =00000019                  obActWid:	equ $19	; action width
00000000 =0000001A                  obFrame:	equ $1A	; current frame displayed
00000000 =0000001B                  obAniFrame:	equ $1B	; current frame in animation script
00000000 =0000001C                  obAnim:		equ $1C	; current animation
00000000 =0000001D                  obNextAni:	equ $1D	; next animation
00000000 =0000001E                  obTimeFrame:	equ $1E	; time to next frame
00000000 =0000001F                  obDelayAni:	equ $1F	; time to delay animation
00000000 =00000020                  obColType:	equ $20	; collision response type
00000000 =00000021                  obColProp:	equ $21	; collision extra property
00000000 =00000022                  obStatus:	equ $22	; orientation or mode
00000000 =00000023                  obRespawnNo:	equ $23	; respawn list index number
00000000 =00000024                  obRoutine:	equ $24	; routine number
00000000 =00000025                  ob2ndRout:	equ $25	; secondary routine number
00000000 =00000026                  obAngle:	equ $26	; angle
00000000 =00000028                  obSubtype:	equ $28	; object subtype
00000000 =00000025                  obSolid:	equ ob2ndRout ; solid status flag
00000000                            
00000000                            ; Object variables used by Sonic
00000000 =00000030                  flashtime:	equ $30	; time between flashes after getting hit
00000000 =00000032                  invtime:	equ $32	; time left for invincibility
00000000 =00000034                  shoetime:	equ $34	; time left for speed shoes
00000000                            
00000000                            ; Object variables (Sonic 2 disassembly nomenclature)
00000000 =00000001                  render_flags:	equ 1	; bitfield for x/y flip, display mode
00000000 =00000002                  art_tile:	equ 2	; palette line & VRAM setting (2 bytes)
00000000 =00000004                  mappings:	equ 4	; mappings address (4 bytes)
00000000 =00000008                  x_pos:		equ 8	; x-axis position (2-4 bytes)
00000000 =0000000C                  y_pos:		equ $C	; y-axis position (2-4 bytes)
00000000 =00000010                  x_vel:		equ $10	; x-axis velocity (2 bytes)
00000000 =00000012                  y_vel:		equ $12	; y-axis velocity (2 bytes)
00000000 =00000016                  y_radius:	equ $16	; height/2
00000000 =00000017                  x_radius:	equ $17	; width/2
00000000 =00000018                  priority:	equ $18	; sprite stack priority -- 0 is front
00000000 =00000019                  width_pixels:	equ $19	; action width
00000000 =0000001A                  mapping_frame:	equ $1A	; current frame displayed
00000000 =0000001B                  anim_frame:	equ $1B	; current frame in animation script
00000000 =0000001C                  anim:		equ $1C	; current animation
00000000 =0000001D                  next_anim:	equ $1D	; next animation
00000000 =0000001E                  anim_frame_duration: equ $1E ; time to next frame
00000000 =00000020                  collision_flags: equ $20 ; collision response type
00000000 =00000021                  collision_property: equ $21 ; collision extra property
00000000 =00000022                  status:		equ $22	; orientation or mode
00000000 =00000023                  respawn_index:	equ $23	; respawn list index number
00000000 =00000024                  routine:	equ $24	; routine number
00000000 =00000025                  routine_secondary: equ $25 ; secondary routine number
00000000 =00000026                  angle:		equ $26	; angle
00000000 =00000028                  subtype:	equ $28	; object subtype
00000000                            
00000000                            ; Animation flags
00000000 =000000FF                  afEnd:		equ $FF	; return to beginning of animation
00000000 =000000FE                  afBack:		equ $FE	; go back (specified number) bytes
00000000 =000000FD                  afChange:	equ $FD	; run specified animation
00000000 =000000FC                  afRoutine:	equ $FC	; increment routine counter
00000000 =000000FB                  afReset:	equ $FB	; reset animation and 2nd object routine counter
00000000 =000000FA                  af2ndRoutine:	equ $FA	; increment 2nd routine counter
00000000                            
00000000                            ; Background music
00000000 =00000081                  bgm__First:	equ $81
00000000                            bgm_GHZ:	equ ((ptr_mus81-MusicIndex)/4)+bgm__First
00000000                            bgm_LZ:		equ ((ptr_mus82-MusicIndex)/4)+bgm__First
00000000                            bgm_MZ:		equ ((ptr_mus83-MusicIndex)/4)+bgm__First
00000000                            bgm_SLZ:	equ ((ptr_mus84-MusicIndex)/4)+bgm__First
00000000                            bgm_SYZ:	equ ((ptr_mus85-MusicIndex)/4)+bgm__First
00000000                            bgm_SBZ:	equ ((ptr_mus86-MusicIndex)/4)+bgm__First
00000000                            bgm_Invincible:	equ ((ptr_mus87-MusicIndex)/4)+bgm__First
00000000                            bgm_ExtraLife:	equ ((ptr_mus88-MusicIndex)/4)+bgm__First
00000000                            bgm_SS:		equ ((ptr_mus89-MusicIndex)/4)+bgm__First
00000000                            bgm_Title:	equ ((ptr_mus8A-MusicIndex)/4)+bgm__First
00000000                            bgm_Ending:	equ ((ptr_mus8B-MusicIndex)/4)+bgm__First
00000000                            bgm_Boss:	equ ((ptr_mus8C-MusicIndex)/4)+bgm__First
00000000                            bgm_FZ:		equ ((ptr_mus8D-MusicIndex)/4)+bgm__First
00000000                            bgm_GotThrough:	equ ((ptr_mus8E-MusicIndex)/4)+bgm__First
00000000                            bgm_GameOver:	equ ((ptr_mus8F-MusicIndex)/4)+bgm__First
00000000                            bgm_Continue:	equ ((ptr_mus90-MusicIndex)/4)+bgm__First
00000000                            bgm_Credits:	equ ((ptr_mus91-MusicIndex)/4)+bgm__First
00000000                            bgm_IMZ:	equ ((ptr_mus92-MusicIndex)/4)+bgm__First
00000000                            bgm_CSZ:	equ ((ptr_mus93-MusicIndex)/4)+bgm__First
00000000                            bgm__Last:	equ ((ptr_musend-MusicIndex-4)/4)+bgm__First
00000000                            
00000000                            ; Sound effects
00000000 =000000A0                  sfx__First:	equ $A0
00000000                            sfx_Jump:	equ ((ptr_sndA0-SoundIndex)/4)+sfx__First
00000000                            sfx_Lamppost:	equ ((ptr_sndA1-SoundIndex)/4)+sfx__First
00000000                            sfx_A2:		equ ((ptr_sndA2-SoundIndex)/4)+sfx__First
00000000                            sfx_Death:	equ ((ptr_sndA3-SoundIndex)/4)+sfx__First
00000000                            sfx_Skid:	equ ((ptr_sndA4-SoundIndex)/4)+sfx__First
00000000                            sfx_A5:		equ ((ptr_sndA5-SoundIndex)/4)+sfx__First
00000000                            sfx_HitSpikes:	equ ((ptr_sndA6-SoundIndex)/4)+sfx__First
00000000                            sfx_Push:	equ ((ptr_sndA7-SoundIndex)/4)+sfx__First
00000000                            sfx_SSGoal:	equ ((ptr_sndA8-SoundIndex)/4)+sfx__First
00000000                            sfx_SSItem:	equ ((ptr_sndA9-SoundIndex)/4)+sfx__First
00000000                            sfx_Splash:	equ ((ptr_sndAA-SoundIndex)/4)+sfx__First
00000000                            sfx_AB:		equ ((ptr_sndAB-SoundIndex)/4)+sfx__First
00000000                            sfx_HitBoss:	equ ((ptr_sndAC-SoundIndex)/4)+sfx__First
00000000                            sfx_Bubble:	equ ((ptr_sndAD-SoundIndex)/4)+sfx__First
00000000                            sfx_Fireball:	equ ((ptr_sndAE-SoundIndex)/4)+sfx__First
00000000                            sfx_Shield:	equ ((ptr_sndAF-SoundIndex)/4)+sfx__First
00000000                            sfx_Saw:	equ ((ptr_sndB0-SoundIndex)/4)+sfx__First
00000000                            sfx_Electric:	equ ((ptr_sndB1-SoundIndex)/4)+sfx__First
00000000                            sfx_Drown:	equ ((ptr_sndB2-SoundIndex)/4)+sfx__First
00000000                            sfx_Flamethrower:equ ((ptr_sndB3-SoundIndex)/4)+sfx__First
00000000                            sfx_Bumper:	equ ((ptr_sndB4-SoundIndex)/4)+sfx__First
00000000                            sfx_Ring:	equ ((ptr_sndB5-SoundIndex)/4)+sfx__First
00000000                            sfx_SpikesMove:	equ ((ptr_sndB6-SoundIndex)/4)+sfx__First
00000000                            sfx_Rumbling:	equ ((ptr_sndB7-SoundIndex)/4)+sfx__First
00000000                            sfx_B8:		equ ((ptr_sndB8-SoundIndex)/4)+sfx__First
00000000                            sfx_Collapse:	equ ((ptr_sndB9-SoundIndex)/4)+sfx__First
00000000                            sfx_SSGlass:	equ ((ptr_sndBA-SoundIndex)/4)+sfx__First
00000000                            sfx_Door:	equ ((ptr_sndBB-SoundIndex)/4)+sfx__First
00000000                            sfx_Teleport:	equ ((ptr_sndBC-SoundIndex)/4)+sfx__First
00000000                            sfx_ChainStomp:	equ ((ptr_sndBD-SoundIndex)/4)+sfx__First
00000000                            sfx_Roll:	equ ((ptr_sndBE-SoundIndex)/4)+sfx__First
00000000                            sfx_Continue:	equ ((ptr_sndBF-SoundIndex)/4)+sfx__First
00000000                            sfx_Basaran:	equ ((ptr_sndC0-SoundIndex)/4)+sfx__First
00000000                            sfx_BreakItem:	equ ((ptr_sndC1-SoundIndex)/4)+sfx__First
00000000                            sfx_Warning:	equ ((ptr_sndC2-SoundIndex)/4)+sfx__First
00000000                            sfx_GiantRing:	equ ((ptr_sndC3-SoundIndex)/4)+sfx__First
00000000                            sfx_Bomb:	equ ((ptr_sndC4-SoundIndex)/4)+sfx__First
00000000                            sfx_Cash:	equ ((ptr_sndC5-SoundIndex)/4)+sfx__First
00000000                            sfx_RingLoss:	equ ((ptr_sndC6-SoundIndex)/4)+sfx__First
00000000                            sfx_ChainRise:	equ ((ptr_sndC7-SoundIndex)/4)+sfx__First
00000000                            sfx_Burning:	equ ((ptr_sndC8-SoundIndex)/4)+sfx__First
00000000                            sfx_Bonus:	equ ((ptr_sndC9-SoundIndex)/4)+sfx__First
00000000                            sfx_EnterSS:	equ ((ptr_sndCA-SoundIndex)/4)+sfx__First
00000000                            sfx_WallSmash:	equ ((ptr_sndCB-SoundIndex)/4)+sfx__First
00000000                            sfx_Spring:	equ ((ptr_sndCC-SoundIndex)/4)+sfx__First
00000000                            sfx_Switch:	equ ((ptr_sndCD-SoundIndex)/4)+sfx__First
00000000                            sfx_RingLeft:	equ ((ptr_sndCE-SoundIndex)/4)+sfx__First
00000000                            sfx_Signpost:	equ ((ptr_sndCF-SoundIndex)/4)+sfx__First
00000000                            sfx__Last:	equ ((ptr_sndend-SoundIndex-4)/4)+sfx__First
00000000                            
00000000                            ; Special sound effects
00000000 =000000D0                  spec__First:	equ $D0
00000000                            sfx_Waterfall:	equ ((ptr_sndD0-SpecSoundIndex)/4)+spec__First
00000000                            spec__Last:	equ ((ptr_specend-SpecSoundIndex-4)/4)+spec__First
00000000                            
00000000 =000000E0                  flg__First:	equ $E0
00000000                            bgm_Fade:	equ ((ptr_flgE0-Sound_ExIndex)/4)+flg__First
00000000                            sfx_Sega:	equ ((ptr_flgE1-Sound_ExIndex)/4)+flg__First
00000000                            bgm_Speedup:	equ ((ptr_flgE2-Sound_ExIndex)/4)+flg__First
00000000                            bgm_Slowdown:	equ ((ptr_flgE3-Sound_ExIndex)/4)+flg__First
00000000                            bgm_Stop:	equ ((ptr_flgE4-Sound_ExIndex)/4)+flg__First
00000000                            flg__Last:	equ ((ptr_flgend-Sound_ExIndex-4)/4)+flg__First
00000000                            
00000000                            ; Sonic frame IDs
00000000 =00000000                  fr_Null:	equ 0
00000000 =00000001                  fr_Stand:	equ 1
00000000 =00000002                  fr_Wait1:	equ 2
00000000 =00000003                  fr_Wait2:	equ 3
00000000 =00000004                  fr_Wait3:	equ 4
00000000 =00000005                  fr_LookUp:	equ 5
00000000 =00000006                  fr_Walk11:	equ 6
00000000 =00000007                  fr_Walk12:	equ 7
00000000 =00000008                  fr_Walk13:	equ 8
00000000 =00000009                  fr_Walk14:	equ 9
00000000 =0000000A                  fr_Walk15:	equ $A
00000000 =0000000B                  fr_Walk16:	equ $B
00000000 =0000000C                  fr_Walk21:	equ $C
00000000 =0000000D                  fr_Walk22:	equ $D
00000000 =0000000E                  fr_Walk23:	equ $E
00000000 =0000000F                  fr_Walk24:	equ $F
00000000 =00000010                  fr_Walk25:	equ $10
00000000 =00000011                  fr_Walk26:	equ $11
00000000 =00000012                  fr_Walk31:	equ $12
00000000 =00000013                  fr_Walk32:	equ $13
00000000 =00000014                  fr_Walk33:	equ $14
00000000 =00000015                  fr_Walk34:	equ $15
00000000 =00000016                  fr_Walk35:	equ $16
00000000 =00000017                  fr_Walk36:	equ $17
00000000 =00000018                  fr_Walk41:	equ $18
00000000 =00000019                  fr_Walk42:	equ $19
00000000 =0000001A                  fr_Walk43:	equ $1A
00000000 =0000001B                  fr_Walk44:	equ $1B
00000000 =0000001C                  fr_Walk45:	equ $1C
00000000 =0000001D                  fr_Walk46:	equ $1D
00000000 =0000001E                  fr_Run11:	equ $1E
00000000 =0000001F                  fr_Run12:	equ $1F
00000000 =00000020                  fr_Run13:	equ $20
00000000 =00000021                  fr_Run14:	equ $21
00000000 =00000022                  fr_Run21:	equ $22
00000000 =00000023                  fr_Run22:	equ $23
00000000 =00000024                  fr_Run23:	equ $24
00000000 =00000025                  fr_Run24:	equ $25
00000000 =00000026                  fr_Run31:	equ $26
00000000 =00000027                  fr_Run32:	equ $27
00000000 =00000028                  fr_Run33:	equ $28
00000000 =00000029                  fr_Run34:	equ $29
00000000 =0000002A                  fr_Run41:	equ $2A
00000000 =0000002B                  fr_Run42:	equ $2B
00000000 =0000002C                  fr_Run43:	equ $2C
00000000 =0000002D                  fr_Run44:	equ $2D
00000000 =0000002E                  fr_Roll1:	equ $2E
00000000 =0000002F                  fr_Roll2:	equ $2F
00000000 =00000030                  fr_Roll3:	equ $30
00000000 =00000031                  fr_Roll4:	equ $31
00000000 =00000032                  fr_Roll5:	equ $32
00000000 =00000033                  fr_Warp1:	equ $33
00000000 =00000034                  fr_Warp2:	equ $34
00000000 =00000035                  fr_Warp3:	equ $35
00000000 =00000036                  fr_Warp4:	equ $36
00000000 =00000037                  fr_Stop1:	equ $37
00000000 =00000038                  fr_Stop2:	equ $38
00000000 =00000039                  fr_Duck:	equ $39
00000000 =0000003A                  fr_Balance1:	equ $3A
00000000 =0000003B                  fr_Balance2:	equ $3B
00000000 =0000003C                  fr_Float1:	equ $3C
00000000 =0000003D                  fr_Float2:	equ $3D
00000000 =0000003E                  fr_Float3:	equ $3E
00000000 =0000003F                  fr_Float4:	equ $3F
00000000 =00000040                  fr_Spring:	equ $40
00000000 =00000041                  fr_Hang1:	equ $41
00000000 =00000042                  fr_Hang2:	equ $42
00000000 =00000043                  fr_Leap1:	equ $43
00000000 =00000044                  fr_Leap2:	equ $44
00000000 =00000045                  fr_Push1:	equ $45
00000000 =00000046                  fr_Push2:	equ $46
00000000 =00000047                  fr_Push3:	equ $47
00000000 =00000048                  fr_Push4:	equ $48
00000000 =00000049                  fr_Surf:	equ $49
00000000 =0000004A                  fr_BubStand:	equ $4A
00000000 =0000004B                  fr_Burnt:	equ $4B
00000000 =0000004C                  fr_Drown:	equ $4C
00000000 =0000004D                  fr_Death:	equ $4D
00000000 =0000004E                  fr_Shrink1:	equ $4E
00000000 =0000004F                  fr_Shrink2:	equ $4F
00000000 =00000050                  fr_Shrink3:	equ $50
00000000 =00000051                  fr_Shrink4:	equ $51
00000000 =00000052                  fr_Shrink5:	equ $52
00000000 =00000053                  fr_Float5:	equ $53
00000000 =00000054                  fr_Float6:	equ $54
00000000 =00000055                  fr_Injury:	equ $55
00000000 =00000056                  fr_GetAir:	equ $56
00000000 =00000057                  fr_WaterSlide:	equ $57
00000000 =00000057                  fr_WaterSlide:	equ $57
00000000                            	include	"Variables.asm"
00000000                            ; Variables (v) and Flags (f)
00000000                            
00000000 =FFFFFC00                  v_regbuffer:	equ $FFFFFC00	; stores registers d0-a7 during an error event ($40 bytes)
00000000 =FFFFFC40                  v_spbuffer:	equ $FFFFFC40	; stores most recent sp address (4 bytes)
00000000 =FFFFFC44                  v_errortype:	equ $FFFFFC44	; error type
00000000                            
00000000 =00FF0000                  v_256x256:	equ   $FF0000	; 256x256 tile mappings ($A400 bytes)
00000000 =FFFFA400                  v_lvllayout:	equ $FFFFA400	; level and background layouts ($400 bytes)
00000000 =FFFFA800                  v_bgscroll_buffer:	equ	$FFFFA800	; background scroll buffer ($200 bytes)
00000000 =FFFFAA00                  v_ngfx_buffer:	equ $FFFFAA00	; Nemesis graphics decompression buffer ($200 bytes)
00000000 =FFFFAC00                  v_spritequeue:	equ $FFFFAC00	; sprite display queue, in order of priority ($400 bytes)
00000000 =FFFFB000                  v_16x16:		equ $FFFFB000	; 16x16 tile mappings
00000000                            
00000000 =FFFFC800                  v_sgfx_buffer:	equ $FFFFC800	; buffered Sonic graphics ($17 cells) ($2E0 bytes)
00000000 =FFFFCB00                  v_tracksonic:	equ $FFFFCB00	; position tracking data for Sonic ($100 bytes)
00000000 =FFFFCC00                  v_hscrolltablebuffer:	equ $FFFFCC00 ; scrolling table data (actually $380 bytes, but $400 is reserved for it)
00000000 =FFFFD000                  v_objspace:	equ $FFFFD000	; object variable space ($40 bytes per object) ($2000 bytes)
00000000 =FFFFD000                  v_player:	equ v_objspace	; object variable space for Sonic ($40 bytes)
00000000 =FFFFD800                  v_lvlobjspace:	equ $FFFFD800	; level object variable space ($1800 bytes)
00000000                            
00000000 =FFFFF000                  v_snddriver_ram:	equ $FFFFF000 ; start of RAM for the sound driver data ($5C0 bytes)
00000000                            
00000000                            ; =================================================================================
00000000                            ; From here on, until otherwise stated, all offsets are relative to v_snddriver_ram
00000000                            ; =================================================================================
00000000 =00000000                  v_startofvariables:	equ $000
00000000 =00000000                  v_sndprio:		equ $000	; sound priority (priority of new music/SFX must be higher or equal to this value or it won't play; bit 7 of priority being set prevents this value from changing)
00000000 =00000001                  v_main_tempo_timeout:	equ $001	; Counts down to zero; when zero, resets to next value and delays song by 1 frame
00000000 =00000002                  v_main_tempo:		equ $002	; Used for music only
00000000 =00000003                  f_pausemusic:		equ $003	; flag set to stop music when paused
00000000 =00000004                  v_fadeout_counter:	equ $004
00000000                            
00000000 =00000006                  v_fadeout_delay:	equ $006
00000000 =00000007                  v_communication_byte:	equ $007	; used in Ristar to sync with a boss' attacks; unused here
00000000 =00000008                  f_updating_dac:		equ $008	; $80 if updating DAC, $00 otherwise
00000000 =00000009                  v_sound_id:		equ $009	; sound or music copied from below
00000000 =0000000A                  v_soundqueue0:		equ $00A	; sound or music to play
00000000 =0000000B                  v_soundqueue1:		equ $00B	; special sound to play
00000000 =0000000C                  v_soundqueue2:		equ $00C	; unused sound to play
00000000                            
00000000 =0000000E                  f_voice_selector:	equ $00E	; $00 = use music voice pointer; $40 = use special voice pointer; $80 = use track voice pointer
00000000                            
00000000 =00000018                  v_voice_ptr:		equ $018	; voice data pointer (4 bytes)
00000000                            
00000000 =00000020                  v_special_voice_ptr:	equ $020	; voice data pointer for special SFX ($D0-$DF) (4 bytes)
00000000                            
00000000 =00000024                  f_fadein_flag:		equ $024	; Flag for fade in
00000000 =00000025                  v_fadein_delay:		equ $025
00000000 =00000026                  v_fadein_counter:	equ $026	; Timer for fade in/out
00000000 =00000027                  f_1up_playing:		equ $027	; flag indicating 1-up song is playing
00000000 =00000028                  v_tempo_mod:		equ $028	; music - tempo modifier
00000000 =00000029                  v_speeduptempo:		equ $029	; music - tempo modifier with speed shoes
00000000 =0000002A                  f_speedup:		equ $02A	; flag indicating whether speed shoes tempo is on ($80) or off ($00)
00000000 =0000002B                  v_ring_speaker:		equ $02B	; which speaker the "ring" sound is played in (00 = right; 01 = left)
00000000 =0000002C                  f_push_playing:		equ $02C	; if set, prevents further push sounds from playing
00000000                            
00000000 =00000040                  v_music_track_ram:	equ $040	; Start of music RAM
00000000                            
00000000 =00000040                  v_music_fmdac_tracks:	equ v_music_track_ram+TrackSz*0
00000000 =00000040                  v_music_dac_track:	equ v_music_fmdac_tracks+TrackSz*0
00000000 =00000070                  v_music_fm_tracks:	equ v_music_fmdac_tracks+TrackSz*1
00000000 =00000070                  v_music_fm1_track:	equ v_music_fm_tracks+TrackSz*0
00000000 =000000A0                  v_music_fm2_track:	equ v_music_fm_tracks+TrackSz*1
00000000 =000000D0                  v_music_fm3_track:	equ v_music_fm_tracks+TrackSz*2
00000000 =00000100                  v_music_fm4_track:	equ v_music_fm_tracks+TrackSz*3
00000000 =00000130                  v_music_fm5_track:	equ v_music_fm_tracks+TrackSz*4
00000000 =00000160                  v_music_fm6_track:	equ v_music_fm_tracks+TrackSz*5
00000000 =00000190                  v_music_fm_tracks_end:	equ v_music_fm_tracks+TrackSz*6
00000000 =00000190                  v_music_fmdac_tracks_end:	equ v_music_fm_tracks_end
00000000 =00000190                  v_music_psg_tracks:	equ v_music_fmdac_tracks_end
00000000 =00000190                  v_music_psg1_track:	equ v_music_psg_tracks+TrackSz*0
00000000 =000001C0                  v_music_psg2_track:	equ v_music_psg_tracks+TrackSz*1
00000000 =000001F0                  v_music_psg3_track:	equ v_music_psg_tracks+TrackSz*2
00000000 =00000220                  v_music_psg_tracks_end:	equ v_music_psg_tracks+TrackSz*3
00000000 =00000220                  v_music_track_ram_end:	equ v_music_psg_tracks_end
00000000                            
00000000 =00000220                  v_sfx_track_ram:	equ v_music_track_ram_end	; Start of SFX RAM, straight after the end of music RAM
00000000                            
00000000 =00000220                  v_sfx_fm_tracks:	equ v_sfx_track_ram+TrackSz*0
00000000 =00000220                  v_sfx_fm3_track:	equ v_sfx_fm_tracks+TrackSz*0
00000000 =00000250                  v_sfx_fm4_track:	equ v_sfx_fm_tracks+TrackSz*1
00000000 =00000280                  v_sfx_fm5_track:	equ v_sfx_fm_tracks+TrackSz*2
00000000 =000002B0                  v_sfx_fm_tracks_end:	equ v_sfx_fm_tracks+TrackSz*3
00000000 =000002B0                  v_sfx_psg_tracks:	equ v_sfx_fm_tracks_end
00000000 =000002B0                  v_sfx_psg1_track:	equ v_sfx_psg_tracks+TrackSz*0
00000000 =000002E0                  v_sfx_psg2_track:	equ v_sfx_psg_tracks+TrackSz*1
00000000 =00000310                  v_sfx_psg3_track:	equ v_sfx_psg_tracks+TrackSz*2
00000000 =00000340                  v_sfx_psg_tracks_end:	equ v_sfx_psg_tracks+TrackSz*3
00000000 =00000340                  v_sfx_track_ram_end:	equ v_sfx_psg_tracks_end
00000000                            
00000000 =00000340                  v_spcsfx_track_ram:	equ v_sfx_track_ram_end	; Start of special SFX RAM, straight after the end of SFX RAM
00000000                            
00000000 =00000340                  v_spcsfx_fm4_track:	equ v_spcsfx_track_ram+TrackSz*0
00000000 =00000370                  v_spcsfx_psg3_track:	equ v_spcsfx_track_ram+TrackSz*1
00000000 =000003A0                  v_spcsfx_track_ram_end:	equ v_spcsfx_track_ram+TrackSz*2
00000000                            
00000000 =000003A0                  v_1up_ram_copy:		equ v_spcsfx_track_ram_end
00000000                            
00000000                            ; =================================================================================
00000000                            ; From here on, no longer relative to sound driver RAM
00000000                            ; =================================================================================
00000000                            
00000000 =FFFFF600                  v_gamemode:	equ $FFFFF600	; game mode (00=Sega; 04=Title; 08=Demo; 0C=Level; 10=SS; 14=Cont; 18=End; 1C=Credit; +8C=PreLevel)
00000000 =FFFFF602                  v_jpadhold2:	equ $FFFFF602	; joypad input - held, duplicate
00000000 =FFFFF603                  v_jpadpress2:	equ $FFFFF603	; joypad input - pressed, duplicate
00000000 =FFFFF604                  v_jpadhold1:	equ $FFFFF604	; joypad input - held
00000000 =FFFFF605                  v_jpadpress1:	equ $FFFFF605	; joypad input - pressed
00000000                            
00000000 =FFFFF60C                  v_vdp_buffer1:	equ $FFFFF60C	; VDP instruction buffer (2 bytes)
00000000                            
00000000 =FFFFF614                  v_demolength:	equ $FFFFF614	; the length of a demo in frames (2 bytes)
00000000 =FFFFF616                  v_scrposy_dup:	equ $FFFFF616	; screen position y (duplicate) (2 bytes)
00000000 =FFFFF618                  v_bgscrposy_dup:	equ $FFFFF618	; background screen position y (duplicate) (2 bytes)
00000000 =FFFFF61A                  v_scrposx_dup:	equ $FFFFF61A	; screen position x (duplicate) (2 bytes)
00000000 =FFFFF61C                  v_bgscreenposx_dup_unused:	equ $FFFFF61C	; background screen position x (duplicate) (2 bytes)
00000000 =FFFFF61E                  v_bg3screenposy_dup_unused:	equ $FFFFF61E	; (2 bytes)
00000000 =FFFFF620                  v_bg3screenposx_dup_unused:	equ $FFFFF620	; (2 bytes)
00000000                            
00000000 =FFFFF624                  v_hbla_hreg:	equ $FFFFF624	; VDP H.interrupt register buffer (8Axx) (2 bytes)
00000000 =FFFFF625                  v_hbla_line:	equ $FFFFF625	; screen line where water starts and palette is changed by HBlank
00000000 =FFFFF626                  v_pfade_start:	equ $FFFFF626	; palette fading - start position in bytes
00000000 =FFFFF627                  v_pfade_size:	equ $FFFFF627	; palette fading - number of colours
00000000 =FFFFF62A                  v_vbla_routine:	equ $FFFFF62A	; VBlank - routine counter
00000000 =FFFFF62C                  v_spritecount:	equ $FFFFF62C	; number of sprites on-screen
00000000 =FFFFF632                  v_pcyc_num:	equ $FFFFF632	; palette cycling - current reference number (2 bytes)
00000000 =FFFFF634                  v_pcyc_time:	equ $FFFFF634	; palette cycling - time until the next change (2 bytes)
00000000 =FFFFF636                  v_random:	equ $FFFFF636	; pseudo random number buffer (4 bytes)
00000000 =FFFFF63A                  f_pause:		equ $FFFFF63A	; flag set to pause the game (2 bytes)
00000000 =FFFFF640                  v_vdp_buffer2:	equ $FFFFF640	; VDP instruction buffer (2 bytes)
00000000 =FFFFF644                  f_hbla_pal:	equ $FFFFF644	; flag set to change palette during HBlank (0000 = no; 0001 = change) (2 bytes)
00000000 =FFFFF646                  v_waterpos1:	equ $FFFFF646	; water height, actual (2 bytes)
00000000 =FFFFF648                  v_waterpos2:	equ $FFFFF648	; water height, ignoring sway (2 bytes)
00000000 =FFFFF64A                  v_waterpos3:	equ $FFFFF64A	; water height, next target (2 bytes)
00000000 =FFFFF64C                  f_water:		equ $FFFFF64C	; flag set for water
00000000 =FFFFF64D                  v_wtr_routine:	equ $FFFFF64D	; water event - routine counter
00000000 =FFFFF64E                  f_wtr_state:	equ $FFFFF64E	; water palette state when water is above/below the screen (00 = partly/all dry; 01 = all underwater)
00000000                            
00000000 =FFFFF650                  v_pal_buffer:	equ $FFFFF650	; palette data buffer (used for palette cycling) ($30 bytes)
00000000 =FFFFF680                  v_plc_buffer:	equ $FFFFF680	; pattern load cues buffer (maximum $10 PLCs) ($60 bytes)
00000000 =FFFFF6E0                  v_ptrnemcode:	equ $FFFFF6E0	; pointer for nemesis decompression code ($1502 or $150C) (4 bytes)
00000000                            
00000000 =FFFFF6F8                  f_plc_execute:	equ $FFFFF6F8	; flag set for pattern load cue execution (2 bytes)
00000000                            
00000000 =FFFFF700                  v_screenposx:	equ $FFFFF700	; screen position x (2 bytes)
00000000 =FFFFF704                  v_screenposy:	equ $FFFFF704	; screen position y (2 bytes)
00000000 =FFFFF708                  v_bgscreenposx:	equ $FFFFF708	; background screen position x (2 bytes)
00000000 =FFFFF70C                  v_bgscreenposy:	equ $FFFFF70C	; background screen position y (2 bytes)
00000000 =FFFFF710                  v_bg2screenposx:	equ $FFFFF710	; 2 bytes
00000000 =FFFFF714                  v_bg2screenposy:	equ $FFFFF714	; 2 bytes
00000000 =FFFFF718                  v_bg3screenposx:	equ $FFFFF718	; 2 bytes
00000000 =FFFFF71C                  v_bg3screenposy:	equ $FFFFF71C	; 2 bytes
00000000                            
00000000 =FFFFF720                  v_limitleft1:	equ $FFFFF720	; left level boundary (2 bytes)
00000000 =FFFFF722                  v_limitright1:	equ $FFFFF722	; right level boundary (2 bytes)
00000000 =FFFFF724                  v_limittop1:	equ $FFFFF724	; top level boundary (2 bytes)
00000000 =FFFFF726                  v_limitbtm1:	equ $FFFFF726	; bottom level boundary (2 bytes)
00000000 =FFFFF728                  v_limitleft2:	equ $FFFFF728	; left level boundary (2 bytes)
00000000 =FFFFF72A                  v_limitright2:	equ $FFFFF72A	; right level boundary (2 bytes)
00000000 =FFFFF72C                  v_limittop2:	equ $FFFFF72C	; top level boundary (2 bytes)
00000000 =FFFFF72E                  v_limitbtm2:	equ $FFFFF72E	; bottom level boundary (2 bytes)
00000000                            
00000000 =FFFFF732                  v_limitleft3:	equ $FFFFF732	; left level boundary, at the end of an act (2 bytes)
00000000                            
00000000 =FFFFF73A                  v_scrshiftx:	equ $FFFFF73A	; x-screen shift (new - last) * $100
00000000 =FFFFF73C                  v_scrshifty:	equ $FFFFF73C	; y-screen shift (new - last) * $100
00000000                            
00000000 =FFFFF73E                  v_lookshift:	equ $FFFFF73E	; screen shift when Sonic looks up/down (2 bytes)
00000000 =FFFFF742                  v_dle_routine:	equ $FFFFF742	; dynamic level event - routine counter
00000000 =FFFFF744                  f_nobgscroll:	equ $FFFFF744	; flag set to cancel background scrolling
00000000                            
00000000 =FFFFF74A                  v_fg_xblock:	equ	$FFFFF74A	; foreground x-block parity (for redraw)
00000000 =FFFFF74B                  v_fg_yblock:	equ	$FFFFF74B	; foreground y-block parity (for redraw)
00000000 =FFFFF74C                  v_bg1_xblock:	equ	$FFFFF74C	; background x-block parity (for redraw)
00000000 =FFFFF74D                  v_bg1_yblock:	equ	$FFFFF74D	; background y-block parity (for redraw)
00000000 =FFFFF74E                  v_bg2_xblock:	equ	$FFFFF74E	; secondary background x-block parity (for redraw)
00000000 =FFFFF74F                  v_bg2_yblock:	equ	$FFFFF74F	; secondary background y-block parity (unused)
00000000 =FFFFF750                  v_bg3_xblock:	equ	$FFFFF750	; teritary background x-block parity (for redraw)
00000000 =FFFFF751                  v_bg3_yblock:	equ	$FFFFF751	; teritary background y-block parity (unused)
00000000                            
00000000 =FFFFF754                  v_fg_scroll_flags:	equ $FFFFF754	; screen redraw flags for foreground
00000000 =FFFFF756                  v_bg1_scroll_flags:	equ $FFFFF756	; screen redraw flags for background 1
00000000 =FFFFF758                  v_bg2_scroll_flags:	equ $FFFFF758	; screen redraw flags for background 2
00000000 =FFFFF75A                  v_bg3_scroll_flags:	equ $FFFFF75A	; screen redraw flags for background 3
00000000 =FFFFF75C                  f_bgscrollvert:	equ $FFFFF75C	; flag for vertical background scrolling
00000000 =FFFFF760                  v_sonspeedmax:	equ $FFFFF760	; Sonic's maximum speed (2 bytes)
00000000 =FFFFF762                  v_sonspeedacc:	equ $FFFFF762	; Sonic's acceleration (2 bytes)
00000000 =FFFFF764                  v_sonspeeddec:	equ $FFFFF764	; Sonic's deceleration (2 bytes)
00000000 =FFFFF766                  v_sonframenum:	equ $FFFFF766	; frame to display for Sonic
00000000 =FFFFF767                  f_sonframechg:	equ $FFFFF767	; flag set to update Sonic's sprite frame
00000000 =FFFFF768                  v_anglebuffer:	equ $FFFFF768	; angle of collision block that Sonic or object is standing on
00000000                            
00000000 =FFFFF76C                  v_opl_routine:	equ $FFFFF76C	; ObjPosLoad - routine counter
00000000 =FFFFF76E                  v_opl_screen:	equ $FFFFF76E	; ObjPosLoad - screen variable
00000000 =FFFFF770                  v_opl_data:	equ $FFFFF770	; ObjPosLoad - data buffer ($10 bytes)
00000000                            
00000000 =FFFFF780                  v_ssangle:	equ $FFFFF780	; Special Stage angle (2 bytes)
00000000 =FFFFF782                  v_ssrotate:	equ $FFFFF782	; Special Stage rotation speed (2 bytes)
00000000 =FFFFF790                  v_btnpushtime1:	equ $FFFFF790	; button push duration - in level (2 bytes)
00000000 =FFFFF792                  v_btnpushtime2:	equ $FFFFF792	; button push duration - in demo (2 bytes)
00000000 =FFFFF794                  v_palchgspeed:	equ $FFFFF794	; palette fade/transition speed (0 is fastest) (2 bytes)
00000000 =FFFFF796                  v_collindex:	equ $FFFFF796	; ROM address for collision index of current level (4 bytes)
00000000 =FFFFF79A                  v_palss_num:	equ $FFFFF79A	; palette cycling in Special Stage - reference number (2 bytes)
00000000 =FFFFF79C                  v_palss_time:	equ $FFFFF79C	; palette cycling in Special Stage - time until next change (2 bytes)
00000000                            
00000000 =FFFFF7A4                  v_obj31ypos:	equ $FFFFF7A4	; y-position of object 31 (MZ stomper) (2 bytes)
00000000 =FFFFF7A7                  v_bossstatus:	equ $FFFFF7A7	; status of boss and prison capsule (01 = boss defeated; 02 = prison opened)
00000000 =FFFFF7A8                  v_trackpos:	equ $FFFFF7A8	; position tracking reference number (2 bytes)
00000000 =FFFFF7A9                  v_trackbyte:	equ $FFFFF7A9	; low byte for position tracking
00000000 =FFFFF7AA                  f_lockscreen:	equ $FFFFF7AA	; flag set to lock screen during bosses
00000000 =FFFFF7AC                  v_256loop1:	equ $FFFFF7AC	; 256x256 level tile which contains a loop (GHZ/SLZ)
00000000 =FFFFF7AD                  v_256loop2:	equ $FFFFF7AD	; 256x256 level tile which contains a loop (GHZ/SLZ)
00000000 =FFFFF7AE                  v_256roll1:	equ $FFFFF7AE	; 256x256 level tile which contains a roll tunnel (GHZ)
00000000 =FFFFF7AF                  v_256roll2:	equ $FFFFF7AF	; 256x256 level tile which contains a roll tunnel (GHZ)
00000000 =FFFFF7B0                  v_lani0_frame:	equ $FFFFF7B0	; level graphics animation 0 - current frame
00000000 =FFFFF7B1                  v_lani0_time:	equ $FFFFF7B1	; level graphics animation 0 - time until next frame
00000000 =FFFFF7B2                  v_lani1_frame:	equ $FFFFF7B2	; level graphics animation 1 - current frame
00000000 =FFFFF7B3                  v_lani1_time:	equ $FFFFF7B3	; level graphics animation 1 - time until next frame
00000000 =FFFFF7B4                  v_lani2_frame:	equ $FFFFF7B4	; level graphics animation 2 - current frame
00000000 =FFFFF7B5                  v_lani2_time:	equ $FFFFF7B5	; level graphics animation 2 - time until next frame
00000000 =FFFFF7B6                  v_lani3_frame:	equ $FFFFF7B6	; level graphics animation 3 - current frame
00000000 =FFFFF7B7                  v_lani3_time:	equ $FFFFF7B7	; level graphics animation 3 - time until next frame
00000000 =FFFFF7B8                  v_lani4_frame:	equ $FFFFF7B8	; level graphics animation 4 - current frame
00000000 =FFFFF7B9                  v_lani4_time:	equ $FFFFF7B9	; level graphics animation 4 - time until next frame
00000000 =FFFFF7BA                  v_lani5_frame:	equ $FFFFF7BA	; level graphics animation 5 - current frame
00000000 =FFFFF7BB                  v_lani5_time:	equ $FFFFF7BB	; level graphics animation 5 - time until next frame
00000000 =FFFFF7BE                  v_gfxbigring:	equ $FFFFF7BE	; settings for giant ring graphics loading (2 bytes)
00000000 =FFFFF7C0                  f_conveyrev:	equ $FFFFF7C0	; flag set to reverse conveyor belts in LZ/SBZ
00000000 =FFFFF7C1                  v_obj63:		equ $FFFFF7C1	; object 63 (LZ/SBZ platforms) variables (6 bytes)
00000000 =FFFFF7C7                  f_wtunnelmode:	equ $FFFFF7C7	; LZ water tunnel mode
00000000 =FFFFF7C8                  f_lockmulti:	equ $FFFFF7C8	; flag set to lock controls, lock Sonic's position & animation
00000000 =FFFFF7C9                  f_wtunnelallow:	equ $FFFFF7C9	; LZ water tunnels (00 = enabled; 01 = disabled)
00000000 =FFFFF7CA                  f_jumponly:	equ $FFFFF7CA	; flag set to lock controls apart from jumping
00000000 =FFFFF7CB                  v_obj6B:		equ $FFFFF7CB	; object 6B (SBZ stomper) variable
00000000 =FFFFF7CC                  f_lockctrl:	equ $FFFFF7CC	; flag set to lock controls during ending sequence
00000000 =FFFFF7CD                  f_bigring:	equ $FFFFF7CD	; flag set when Sonic collects the giant ring
00000000 =FFFFF7D0                  v_itembonus:	equ $FFFFF7D0	; item bonus from broken enemies, blocks etc. (2 bytes)
00000000 =FFFFF7D2                  v_timebonus:	equ $FFFFF7D2	; time bonus at the end of an act (2 bytes)
00000000 =FFFFF7D4                  v_ringbonus:	equ $FFFFF7D4	; ring bonus at the end of an act (2 bytes)
00000000 =FFFFF7D6                  f_endactbonus:	equ $FFFFF7D6	; time/ring bonus update flag at the end of an act
00000000 =FFFFF7D7                  v_sonicend:	equ $FFFFF7D7	; routine counter for Sonic in the ending sequence
00000000 =FFFFF7D8                  v_lz_deform:	equ	$FFFFF7D8	; LZ deformtaion offset, in units of $80 (2 bytes)
00000000 =FFFFF7E0                  f_switch:	equ $FFFFF7E0	; flags set when Sonic stands on a switch ($10 bytes)
00000000 =FFFFF7F0                  v_scroll_block_1_size:	equ $FFFFF7F0	; (2 bytes)
00000000 =FFFFF7F2                  v_scroll_block_2_size:	equ $FFFFF7F2	; unused (2 bytes)
00000000 =FFFFF7F4                  v_scroll_block_3_size:	equ $FFFFF7F4	; unused (2 bytes)
00000000 =FFFFF7F6                  v_scroll_block_4_size:	equ $FFFFF7F6	; unused (2 bytes)
00000000                            
00000000 =FFFFF800                  v_spritetablebuffer:	equ $FFFFF800 ; sprite table ($280 bytes, last $80 bytes are overwritten by v_pal_water_dup)
00000000 =FFFFFA00                  v_pal_water_dup:	equ $FFFFFA00 ; duplicate underwater palette, used for transitions ($80 bytes)
00000000 =FFFFFA80                  v_pal_water:	equ $FFFFFA80	; main underwater palette ($80 bytes)
00000000 =FFFFFB00                  v_pal_dry:	equ $FFFFFB00	; main palette ($80 bytes)
00000000 =FFFFFB80                  v_pal_dry_dup:	equ $FFFFFB80	; duplicate palette, used for transitions ($80 bytes)
00000000 =FFFFFC00                  v_objstate:	equ $FFFFFC00	; object state list ($200 bytes)
00000000                            
00000000                            
00000000 =FFFFFE00                  v_systemstack:	equ $FFFFFE00
00000000 =FFFFFE02                  f_restart:	equ $FFFFFE02	; restart level flag (2 bytes)
00000000 =FFFFFE04                  v_framecount:	equ $FFFFFE04	; frame counter (adds 1 every frame) (2 bytes)
00000000 =FFFFFE05                  v_framebyte:	equ v_framecount+1; low byte for frame counter
00000000 =FFFFFE06                  v_debugitem:	equ $FFFFFE06	; debug item currently selected (NOT the object number of the item)
00000000 =FFFFFE08                  v_debuguse:	equ $FFFFFE08	; debug mode use & routine counter (when Sonic is a ring/item) (2 bytes)
00000000 =FFFFFE0A                  v_debugxspeed:	equ $FFFFFE0A	; debug mode - horizontal speed
00000000 =FFFFFE0B                  v_debugyspeed:	equ $FFFFFE0B	; debug mode - vertical speed
00000000 =FFFFFE0C                  v_vbla_count:	equ $FFFFFE0C	; vertical interrupt counter (adds 1 every VBlank) (4 bytes)
00000000 =FFFFFE0E                  v_vbla_word:	equ v_vbla_count+2 ; low word for vertical interrupt counter (2 bytes)
00000000 =FFFFFE0F                  v_vbla_byte:	equ v_vbla_word+1	; low byte for vertical interrupt counter
00000000 =FFFFFE10                  v_zone:		equ $FFFFFE10	; current zone number
00000000 =FFFFFE11                  v_act:		equ $FFFFFE11	; current act number
00000000 =FFFFFE12                  v_lives:		equ $FFFFFE12	; number of lives
00000000 =FFFFFE14                  v_air:		equ $FFFFFE14	; air remaining while underwater (2 bytes)
00000000 =FFFFFE15                  v_airbyte:	equ v_air+1	; low byte for air
00000000 =FFFFFE16                  v_lastspecial:	equ $FFFFFE16	; last special stage number
00000000 =FFFFFE18                  v_continues:	equ $FFFFFE18	; number of continues
00000000 =FFFFFE1A                  f_timeover:	equ $FFFFFE1A	; time over flag
00000000 =FFFFFE1B                  v_lifecount:	equ $FFFFFE1B	; lives counter value (for actual number, see "v_lives")
00000000 =FFFFFE1C                  f_lifecount:	equ $FFFFFE1C	; lives counter update flag
00000000 =FFFFFE1D                  f_ringcount:	equ $FFFFFE1D	; ring counter update flag
00000000 =FFFFFE1E                  f_timecount:	equ $FFFFFE1E	; time counter update flag
00000000 =FFFFFE1F                  f_scorecount:	equ $FFFFFE1F	; score counter update flag
00000000 =FFFFFE20                  v_rings:		equ $FFFFFE20	; rings (2 bytes)
00000000 =FFFFFE21                  v_ringbyte:	equ v_rings+1	; low byte for rings
00000000 =FFFFFE22                  v_time:		equ $FFFFFE22	; time (4 bytes)
00000000 =FFFFFE23                  v_timemin:	equ $FFFFFE23	; time - minutes
00000000 =FFFFFE24                  v_timesec:	equ $FFFFFE24	; time - seconds
00000000 =FFFFFE25                  v_timecent:	equ $FFFFFE25	; time - centiseconds
00000000 =FFFFFE26                  v_score:		equ $FFFFFE26	; score (4 bytes)
00000000 =FFFFFE2C                  v_shield:	equ $FFFFFE2C	; shield status (00 = no; 01 = yes)
00000000 =FFFFFE2D                  v_invinc:	equ $FFFFFE2D	; invinciblity status (00 = no; 01 = yes)
00000000 =FFFFFE2E                  v_shoes:		equ $FFFFFE2E	; speed shoes status (00 = no; 01 = yes)
00000000 =FFFFFE30                  v_lastlamp:	equ $FFFFFE30	; number of the last lamppost you hit
00000000 =FFFFFE32                  v_lamp_xpos:	equ v_lastlamp+2	; x-axis for Sonic to respawn at lamppost (2 bytes)
00000000 =FFFFFE34                  v_lamp_ypos:	equ v_lastlamp+4	; y-axis for Sonic to respawn at lamppost (2 bytes)
00000000 =FFFFFE36                  v_lamp_rings:	equ v_lastlamp+6	; rings stored at lamppost (2 bytes)
00000000 =FFFFFE38                  v_lamp_time:	equ v_lastlamp+8	; time stored at lamppost (2 bytes)
00000000 =FFFFFE3C                  v_lamp_dle:	equ v_lastlamp+$C	; dynamic level event routine counter at lamppost
00000000 =FFFFFE3E                  v_lamp_limitbtm:	equ v_lastlamp+$E	; level bottom boundary at lamppost (2 bytes)
00000000 =FFFFFE40                  v_lamp_scrx:	equ v_lastlamp+$10 ; x-axis screen at lamppost (2 bytes)
00000000 =FFFFFE42                  v_lamp_scry:	equ v_lastlamp+$12 ; y-axis screen at lamppost (2 bytes)
00000000                            
00000000 =FFFFFE50                  v_lamp_wtrpos:	equ v_lastlamp+$20 ; water position at lamppost (2 bytes)
00000000 =FFFFFE52                  v_lamp_wtrrout:	equ v_lastlamp+$22 ; water routine at lamppost
00000000 =FFFFFE53                  v_lamp_wtrstat:	equ v_lastlamp+$23 ; water state at lamppost
00000000 =FFFFFE54                  v_lamp_lives:	equ v_lastlamp+$24 ; lives counter at lamppost
00000000 =FFFFFE57                  v_emeralds:	equ $FFFFFE57	; number of chaos emeralds
00000000 =FFFFFE58                  v_emldlist:	equ $FFFFFE58	; which individual emeralds you have (00 = no; 01 = yes) (6 bytes)
00000000 =FFFFFE5E                  v_oscillate:	equ $FFFFFE5E	; values which oscillate - for swinging platforms, et al ($42 bytes)
00000000 =FFFFFEC0                  v_ani0_time:	equ $FFFFFEC0	; synchronised sprite animation 0 - time until next frame (used for synchronised animations)
00000000 =FFFFFEC1                  v_ani0_frame:	equ $FFFFFEC1	; synchronised sprite animation 0 - current frame
00000000 =FFFFFEC2                  v_ani1_time:	equ $FFFFFEC2	; synchronised sprite animation 1 - time until next frame
00000000 =FFFFFEC3                  v_ani1_frame:	equ $FFFFFEC3	; synchronised sprite animation 1 - current frame
00000000 =FFFFFEC4                  v_ani2_time:	equ $FFFFFEC4	; synchronised sprite animation 2 - time until next frame
00000000 =FFFFFEC5                  v_ani2_frame:	equ $FFFFFEC5	; synchronised sprite animation 2 - current frame
00000000 =FFFFFEC6                  v_ani3_time:	equ $FFFFFEC6	; synchronised sprite animation 3 - time until next frame
00000000 =FFFFFEC7                  v_ani3_frame:	equ $FFFFFEC7	; synchronised sprite animation 3 - current frame
00000000 =FFFFFEC8                  v_ani3_buf:	equ $FFFFFEC8	; synchronised sprite animation 3 - info buffer (2 bytes)
00000000 =FFFFFEF0                  v_limittopdb:	equ $FFFFFEF0	; level upper boundary, buffered for debug mode (2 bytes)
00000000 =FFFFFEF2                  v_limitbtmdb:	equ $FFFFFEF2	; level bottom boundary, buffered for debug mode (2 bytes)
00000000                            
00000000 =FFFFFF10                  v_screenposx_dup:	equ $FFFFFF10	; screen position x (duplicate) (2 bytes)
00000000 =FFFFFF14                  v_screenposy_dup:	equ $FFFFFF14	; screen position y (duplicate) (2 bytes)
00000000 =FFFFFF18                  v_bgscreenposx_dup:	equ $FFFFFF18	; background screen position x (duplicate) (2 bytes)
00000000 =FFFFFF1C                  v_bgscreenposy_dup:	equ $FFFFFF1C	; background screen position y (duplicate) (2 bytes)
00000000 =FFFFFF20                  v_bg2screenposx_dup:	equ $FFFFFF20	; 2 bytes
00000000 =FFFFFF24                  v_bg2screenposy_dup:	equ $FFFFFF24	; 2 bytes
00000000 =FFFFFF28                  v_bg3screenposx_dup:	equ $FFFFFF28	; 2 bytes
00000000 =FFFFFF2C                  v_bg3screenposy_dup:	equ $FFFFFF2C	; 2 bytes
00000000 =FFFFFF30                  v_fg_scroll_flags_dup:	equ $FFFFFF30
00000000 =FFFFFF32                  v_bg1_scroll_flags_dup:	equ $FFFFFF32
00000000 =FFFFFF34                  v_bg2_scroll_flags_dup:	equ $FFFFFF34
00000000 =FFFFFF36                  v_bg3_scroll_flags_dup:	equ $FFFFFF36
00000000                            
00000000 =FFFFFF80                  v_levseldelay:	equ $FFFFFF80	; level select - time until change when up/down is held (2 bytes)
00000000 =FFFFFF82                  v_levselitem:	equ $FFFFFF82	; level select - item selected (2 bytes)
00000000 =FFFFFF84                  v_levselsound:	equ $FFFFFF84	; level select - sound selected (2 bytes)
00000000 =FFFFFFC0                  v_scorecopy:	equ $FFFFFFC0	; score, duplicate (4 bytes)
00000000 =FFFFFFC0                  v_scorelife:	equ $FFFFFFC0	; points required for an extra life (4 bytes) (JP1 only)
00000000 =FFFFF608                  f_levselcheat:	equ $FFFFF608	; level select cheat flag
00000000 =FFFFFFE1                  f_slomocheat:	equ $FFFFFFE1	; slow motion & frame advance cheat flag
00000000 =FFFFFFE2                  f_debugcheat:	equ $FFFFFFE2	; debug mode cheat flag
00000000 =FFFFFFE3                  f_creditscheat:	equ $FFFFFFE3	; hidden credits & press start cheat flag
00000000 =FFFFFFE4                  v_title_dcount:	equ $FFFFFFE4	; number of times the d-pad is pressed on title screen (2 bytes)
00000000 =FFFFFFE6                  v_title_ccount:	equ $FFFFFFE6	; number of times C is pressed on title screen (2 bytes)
00000000                            
00000000 =FFFFFFF0                  f_demo:		equ $FFFFFFF0	; demo mode flag (0 = no; 1 = yes; $8001 = ending) (2 bytes)
00000000 =FFFFFFF2                  v_demonum:	equ $FFFFFFF2	; demo level number (not the same as the level number) (2 bytes)
00000000 =FFFFFFF4                  v_creditsnum:	equ $FFFFFFF4	; credits index number (2 bytes)
00000000 =FFFFFFF8                  v_megadrive:	equ $FFFFFFF8	; Megadrive machine type
00000000 =FFFFFFFA                  f_debugmode:	equ $FFFFFFFA	; debug mode flag (sometimes 2 bytes)
00000000 =FFFFFFFC                  v_init:		equ $FFFFFFFC	; 'init' text string (4 bytes)
00000000 =FFFFFF39                  f_dash:		equ $FFFFFF39
00000000 =FFFFFF39                  f_dash:		equ $FFFFFF39
00000000                            	include	"Macros.asm"
00000000                            ; ---------------------------------------------------------------------------
00000000                            ; Align and pad
00000000                            ; input: length to align to, value to use as padding (default is 0)
00000000                            ; ---------------------------------------------------------------------------
00000000                            
00000000                            align:	macro
00000000                            	if (narg=1)
00000000                            	dcb.b \1-(*%\1),0
00000000                            	else
00000000                            	dcb.b \1-(*%\1),\2
00000000                            	endc
00000000                            	endm
00000000                            
00000000                            ; ---------------------------------------------------------------------------
00000000                            ; Set a VRAM address via the VDP control port.
00000000                            ; input: 16-bit VRAM address, control port (default is ($C00004).l)
00000000                            ; ---------------------------------------------------------------------------
00000000                            
00000000                            locVRAM:	macro loc,controlport
00000000                            		if (narg=1)
00000000                            		move.l	#($40000000+((loc&$3FFF)<<16)+((loc&$C000)>>14)),(vdp_control_port).l
00000000                            		else
00000000                            		move.l	#($40000000+((loc&$3FFF)<<16)+((loc&$C000)>>14)),controlport
00000000                            		endc
00000000                            		endm
00000000                            
00000000                            ; ---------------------------------------------------------------------------
00000000                            ; DMA copy data from 68K (ROM/RAM) to the VRAM
00000000                            ; input: source, length, destination
00000000                            ; ---------------------------------------------------------------------------
00000000                            
00000000                            writeVRAM:	macro
00000000                            		lea	(vdp_control_port).l,a5
00000000                            		move.l	#$94000000+(((\2>>1)&$FF00)<<8)+$9300+((\2>>1)&$FF),(a5)
00000000                            		move.l	#$96000000+(((\1>>1)&$FF00)<<8)+$9500+((\1>>1)&$FF),(a5)
00000000                            		move.w	#$9700+((((\1>>1)&$FF0000)>>16)&$7F),(a5)
00000000                            		move.w	#$4000+(\3&$3FFF),(a5)
00000000                            		move.w	#$80+((\3&$C000)>>14),(v_vdp_buffer2).w
00000000                            		move.w	(v_vdp_buffer2).w,(a5)
00000000                            		endm
00000000                            
00000000                            ; ---------------------------------------------------------------------------
00000000                            ; DMA copy data from 68K (ROM/RAM) to the CRAM
00000000                            ; input: source, length, destination
00000000                            ; ---------------------------------------------------------------------------
00000000                            
00000000                            writeCRAM:	macro
00000000                            		lea	(vdp_control_port).l,a5
00000000                            		move.l	#$94000000+(((\2>>1)&$FF00)<<8)+$9300+((\2>>1)&$FF),(a5)
00000000                            		move.l	#$96000000+(((\1>>1)&$FF00)<<8)+$9500+((\1>>1)&$FF),(a5)
00000000                            		move.w	#$9700+((((\1>>1)&$FF0000)>>16)&$7F),(a5)
00000000                            		move.w	#$C000+(\3&$3FFF),(a5)
00000000                            		move.w	#$80+((\3&$C000)>>14),(v_vdp_buffer2).w
00000000                            		move.w	(v_vdp_buffer2).w,(a5)
00000000                            		endm
00000000                            
00000000                            ; ---------------------------------------------------------------------------
00000000                            ; DMA fill VRAM with a value
00000000                            ; input: value, length, destination
00000000                            ; ---------------------------------------------------------------------------
00000000                            
00000000                            fillVRAM:	macro value,length,loc
00000000                            		lea	(vdp_control_port).l,a5
00000000                            		move.w	#$8F01,(a5)
00000000                            		move.l	#$94000000+((length&$FF00)<<8)+$9300+(length&$FF),(a5)
00000000                            		move.w	#$9780,(a5)
00000000                            		move.l	#$40000080+((loc&$3FFF)<<16)+((loc&$C000)>>14),(a5)
00000000                            		move.w	#value,(vdp_data_port).l
00000000                            		endm
00000000                            
00000000                            ; ---------------------------------------------------------------------------
00000000                            ; Copy a tilemap from 68K (ROM/RAM) to the VRAM without using DMA
00000000                            ; input: source, destination, width [cells], height [cells]
00000000                            ; ---------------------------------------------------------------------------
00000000                            
00000000                            copyTilemap:	macro source,loc,width,height
00000000                            		lea	(source).l,a1
00000000                            		move.l	#$40000000+((loc&$3FFF)<<16)+((loc&$C000)>>14),d0
00000000                            		moveq	#width,d1
00000000                            		moveq	#height,d2
00000000                            		bsr.w	TilemapToVRAM
00000000                            		endm
00000000                            
00000000                            ; ---------------------------------------------------------------------------
00000000                            ; stop the Z80
00000000                            ; ---------------------------------------------------------------------------
00000000                            
00000000                            stopZ80:	macro
00000000                            		move.w	#$100,(z80_bus_request).l
00000000                            		endm
00000000                            
00000000                            ; ---------------------------------------------------------------------------
00000000                            ; wait for Z80 to stop
00000000                            ; ---------------------------------------------------------------------------
00000000                            
00000000                            waitZ80:	macro
00000000                            	@wait:	btst	#0,(z80_bus_request).l
00000000                            		bne.s	@wait
00000000                            		endm
00000000                            
00000000                            ; ---------------------------------------------------------------------------
00000000                            ; reset the Z80
00000000                            ; ---------------------------------------------------------------------------
00000000                            
00000000                            resetZ80:	macro
00000000                            		move.w	#$100,(z80_reset).l
00000000                            		endm
00000000                            
00000000                            resetZ80a:	macro
00000000                            		move.w	#0,(z80_reset).l
00000000                            		endm
00000000                            
00000000                            ; ---------------------------------------------------------------------------
00000000                            ; start the Z80
00000000                            ; ---------------------------------------------------------------------------
00000000                            
00000000                            startZ80:	macro
00000000                            		move.w	#0,(z80_bus_request).l
00000000                            		endm
00000000                            
00000000                            ; ---------------------------------------------------------------------------
00000000                            ; disable interrupts
00000000                            ; ---------------------------------------------------------------------------
00000000                            
00000000                            disable_ints:	macro
00000000                            		move	#$2700,sr
00000000                            		endm
00000000                            
00000000                            ; ---------------------------------------------------------------------------
00000000                            ; enable interrupts
00000000                            ; ---------------------------------------------------------------------------
00000000                            
00000000                            enable_ints:	macro
00000000                            		move	#$2300,sr
00000000                            		endm
00000000                            
00000000                            ; ---------------------------------------------------------------------------
00000000                            ; long conditional jumps
00000000                            ; ---------------------------------------------------------------------------
00000000                            
00000000                            jhi:		macro loc
00000000                            		bls.s	@nojump
00000000                            		jmp	loc
00000000                            	@nojump:
00000000                            		endm
00000000                            
00000000                            jcc:		macro loc
00000000                            		bcs.s	@nojump
00000000                            		jmp	loc
00000000                            	@nojump:
00000000                            		endm
00000000                            
00000000                            jhs:		macro loc
00000000                            		jcc	loc
00000000                            		endm
00000000                            
00000000                            jls:		macro loc
00000000                            		bhi.s	@nojump
00000000                            		jmp	loc
00000000                            	@nojump:
00000000                            		endm
00000000                            
00000000                            jcs:		macro loc
00000000                            		bcc.s	@nojump
00000000                            		jmp	loc
00000000                            	@nojump:
00000000                            		endm
00000000                            
00000000                            jlo:		macro loc
00000000                            		jcs	loc
00000000                            		endm
00000000                            
00000000                            jeq:		macro loc
00000000                            		bne.s	@nojump
00000000                            		jmp	loc
00000000                            	@nojump:
00000000                            		endm
00000000                            
00000000                            jne:		macro loc
00000000                            		beq.s	@nojump
00000000                            		jmp	loc
00000000                            	@nojump:
00000000                            		endm
00000000                            
00000000                            jgt:		macro loc
00000000                            		ble.s	@nojump
00000000                            		jmp	loc
00000000                            	@nojump:
00000000                            		endm
00000000                            
00000000                            jge:		macro loc
00000000                            		blt.s	@nojump
00000000                            		jmp	loc
00000000                            	@nojump:
00000000                            		endm
00000000                            
00000000                            jle:		macro loc
00000000                            		bgt.s	@nojump
00000000                            		jmp	loc
00000000                            	@nojump:
00000000                            		endm
00000000                            
00000000                            jlt:		macro loc
00000000                            		bge.s	@nojump
00000000                            		jmp	loc
00000000                            	@nojump:
00000000                            		endm
00000000                            
00000000                            jpl:		macro loc
00000000                            		bmi.s	@nojump
00000000                            		jmp	loc
00000000                            	@nojump:
00000000                            		endm
00000000                            
00000000                            jmi:		macro loc
00000000                            		bpl.s	@nojump
00000000                            		jmp	loc
00000000                            	@nojump:
00000000                            		endm
00000000                            
00000000                            ; ---------------------------------------------------------------------------
00000000                            ; check if object moves out of range
00000000                            ; input: location to jump to if out of range, x-axis pos (obX(a0) by default)
00000000                            ; ---------------------------------------------------------------------------
00000000                            
00000000                            out_of_range:	macro exit,pos
00000000                            		if (narg=2)
00000000                            		move.w	pos,d0		; get object position (if specified as not obX)
00000000                            		else
00000000                            		move.w	obX(a0),d0	; get object position
00000000                            		endc
00000000                            		andi.w	#$FF80,d0	; round down to nearest $80
00000000                            		move.w	(v_screenposx).w,d1 ; get screen position
00000000                            		subi.w	#128,d1
00000000                            		andi.w	#$FF80,d1
00000000                            		sub.w	d1,d0		; approx distance between object and screen
00000000                            		cmpi.w	#128+320+192,d0
00000000                            		bhi.\0	exit
00000000                            		endm
00000000                            
00000000                            ; ---------------------------------------------------------------------------
00000000                            ; play a sound effect or music
00000000                            ; input: track, terminate routine, branch or jump, move operand size
00000000                            ; ---------------------------------------------------------------------------
00000000                            
00000000                            music:		macro track,terminate,branch,byte
00000000                            		  if OptimiseSound=1
00000000                            			move.b	#track,(v_snddriver_ram+v_playsnd1).l
00000000                            		    if terminate=1
00000000                            			rts
00000000                            		    endc
00000000                            		  else
00000000                            	 	    if byte=1
00000000                            			move.b	#track,d0
00000000                            		    else
00000000                            			move.w	#track,d0
00000000                            		    endc
00000000                            		    if branch=1
00000000                            		      if terminate=0
00000000                            			bsr.w	PlaySound
00000000                            		      else
00000000                            			bra.w	PlaySound
00000000                            		      endc
00000000                            		    else
00000000                            		      if terminate=0
00000000                            			jsr	(PlaySound).l
00000000                            		      else
00000000                            			jmp	(PlaySound).l
00000000                            		      endc
00000000                            		    endc
00000000                            		  endc
00000000                            		endm
00000000                            
00000000                            sfx:		macro track,terminate,branch,byte
00000000                            		  if OptimiseSound=1
00000000                            			move.b	#track,(v_snddriver_ram+v_playsnd2).l
00000000                            		    if terminate=1
00000000                            			rts
00000000                            		    endc
00000000                            		  else
00000000                            	 	    if byte=1
00000000                            			move.b	#track,d0
00000000                            		    else
00000000                            			move.w	#track,d0
00000000                            		    endc
00000000                            		    if branch=1
00000000                            		      if terminate=0
00000000                            			bsr.w	PlaySound_Special
00000000                            		      else
00000000                            			bra.w	PlaySound_Special
00000000                            		      endc
00000000                            		    else
00000000                            		      if terminate=0
00000000                            			jsr	(PlaySound_Special).l
00000000                            		      else
00000000                            			jmp	(PlaySound_Special).l
00000000                            		      endc
00000000                            		    endc
00000000                            		  endc
00000000                            		endm
00000000                            
00000000                            ; ---------------------------------------------------------------------------
00000000                            ; bankswitch between SRAM and ROM
00000000                            ; (remember to enable SRAM in the header first!)
00000000                            ; ---------------------------------------------------------------------------
00000000                            
00000000                            gotoSRAM:	macro
00000000                            		move.b  #1,($A130F1).l
00000000                            		endm
00000000                            
00000000                            gotoROM:	macro
00000000                            		move.b  #0,($A130F1).l
00000000                            		endm
00000000                            
00000000                            ; ---------------------------------------------------------------------------
00000000                            ; compare the size of an index with ZoneCount constant
00000000                            ; (should be used immediately after the index)
00000000                            ; input: index address, element size
00000000                            ; ---------------------------------------------------------------------------
00000000                            
00000000                            zonewarning:	macro loc,elementsize
00000000                            	@end:
00000000                            		if (@end-loc)-(ZoneCount*elementsize)<>0
00000000                            		inform 1,"Size of \loc ($%h) does not match ZoneCount ($\#ZoneCount).",(@end-loc)/elementsize
00000000                            		endc
00000000                            		endm
00000000                            		endm
00000000                            	include "_smps2asm_inc.asm"
00000000                            ; =============================================================================================
00000000                            ; Created by Flamewing, based on S1SMPS2ASM version 1.1 by Marc Gordon (AKA Cinossu)
00000000                            ; =============================================================================================
00000000 =00000005                  SonicDriverVer:	equ	5
00000000                            align0	macro	val
00000000                            	cnop	0,\val
00000000                                endm
00000000                            	
00000000                            smpsWeirdD1LRR macro
00000000                            		dc.b	$F9
00000000                            	endm
00000000                            ; ---------------------------------------------------------------------------------------------
00000000                            ; Standard Octave Pitch Equates
00000000 =FFFFFF88                  smpsPitch10lo:	EQU -120	; $88
00000000 =FFFFFF94                  smpsPitch09lo:	EQU -108	; $94
00000000 =FFFFFFA0                  smpsPitch08lo:	EQU  -96	; $A0
00000000 =FFFFFFAC                  smpsPitch07lo:	EQU  -84	; $AC
00000000 =FFFFFFB8                  smpsPitch06lo:	EQU  -72	; $B8
00000000 =FFFFFFC4                  smpsPitch05lo:	EQU  -60	; $C4
00000000 =FFFFFFD0                  smpsPitch04lo:	EQU  -48	; $D0
00000000 =FFFFFFDC                  smpsPitch03lo:	EQU  -36	; $DC
00000000 =FFFFFFE8                  smpsPitch02lo:	EQU  -24	; $E8
00000000 =FFFFFFF4                  smpsPitch01lo:	EQU  -12	; $F4
00000000 =00000000                  smpsPitch00:	EQU    0	; $00
00000000 =0000000C                  smpsPitch01hi:	EQU  +12	; $0C
00000000 =00000018                  smpsPitch02hi:	EQU  +24	; $18
00000000 =00000024                  smpsPitch03hi:	EQU  +36	; $24
00000000 =00000030                  smpsPitch04hi:	EQU  +48	; $30
00000000 =0000003C                  smpsPitch05hi:	EQU  +60	; $3C
00000000 =00000048                  smpsPitch06hi:	EQU  +72	; $48
00000000 =00000054                  smpsPitch07hi:	EQU  +84	; $54
00000000 =00000060                  smpsPitch08hi:	EQU  +96	; $60
00000000 =0000006C                  smpsPitch09hi:	EQU +108	; $6C
00000000 =00000078                  smpsPitch10hi:	EQU +120	; $78
00000000                            
00000000                            ; ---------------------------------------------------------------------------------------------
00000000                            ; Note Equates
00000000 =00000080                  nRst:	EQU $80		; $80
00000000 =00000081                  nC0:	EQU $81		; $81
00000000 =00000082                  nCs0:	EQU nC0+1	; $82
00000000 =00000083                  nD0:	EQU nCs0+1	; $83
00000000 =00000084                  nEb0:	EQU nD0+1	; $84
00000000 =00000085                  nE0:	EQU nEb0+1	; $85
00000000 =00000086                  nF0:	EQU nE0+1	; $86
00000000 =00000087                  nFs0:	EQU nF0+1	; $87
00000000 =00000088                  nG0:	EQU nFs0+1	; $88
00000000 =00000089                  nAb0:	EQU nG0+1	; $89
00000000 =0000008A                  nA0:	EQU nAb0+1	; $8A
00000000 =0000008B                  nBb0:	EQU nA0+1	; $8B
00000000 =0000008C                  nB0:	EQU nBb0+1	; $8C
00000000 =0000008D                  nC1:	EQU nB0+1	; $8D
00000000 =0000008E                  nCs1:	EQU nC1+1	; $8E
00000000 =0000008F                  nD1:	EQU nCs1+1	; $8F
00000000 =00000090                  nEb1:	EQU nD1+1	; $90
00000000 =00000091                  nE1:	EQU nEb1+1	; $91
00000000 =00000092                  nF1:	EQU nE1+1	; $92
00000000 =00000093                  nFs1:	EQU nF1+1	; $93
00000000 =00000094                  nG1:	EQU nFs1+1	; $94
00000000 =00000095                  nAb1:	EQU nG1+1	; $95
00000000 =00000096                  nA1:	EQU nAb1+1	; $96
00000000 =00000097                  nBb1:	EQU nA1+1	; $97
00000000 =00000098                  nB1:	EQU nBb1+1	; $98
00000000 =00000099                  nC2:	EQU nB1+1	; $99
00000000 =0000009A                  nCs2:	EQU nC2+1	; $9A
00000000 =0000009B                  nD2:	EQU nCs2+1	; $9B
00000000 =0000009C                  nEb2:	EQU nD2+1	; $9C
00000000 =0000009D                  nE2:	EQU nEb2+1	; $9D
00000000 =0000009E                  nF2:	EQU nE2+1	; $9E
00000000 =0000009F                  nFs2:	EQU nF2+1	; $9F
00000000 =000000A0                  nG2:	EQU nFs2+1	; $A0
00000000 =000000A1                  nAb2:	EQU nG2+1	; $A1
00000000 =000000A2                  nA2:	EQU nAb2+1	; $A2
00000000 =000000A3                  nBb2:	EQU nA2+1	; $A3
00000000 =000000A4                  nB2:	EQU nBb2+1	; $A4
00000000 =000000A5                  nC3:	EQU nB2+1	; $A5
00000000 =000000A6                  nCs3:	EQU nC3+1	; $A6
00000000 =000000A7                  nD3:	EQU nCs3+1	; $A7
00000000 =000000A8                  nEb3:	EQU nD3+1	; $A8
00000000 =000000A9                  nE3:	EQU nEb3+1	; $A9
00000000 =000000AA                  nF3:	EQU nE3+1	; $AA
00000000 =000000AB                  nFs3:	EQU nF3+1	; $AB
00000000 =000000AC                  nG3:	EQU nFs3+1	; $AC
00000000 =000000AD                  nAb3:	EQU nG3+1	; $AD
00000000 =000000AE                  nA3:	EQU nAb3+1	; $AE
00000000 =000000AF                  nBb3:	EQU nA3+1	; $AF
00000000 =000000B0                  nB3:	EQU nBb3+1	; $B0
00000000 =000000B1                  nC4:	EQU nB3+1	; $B1
00000000 =000000B2                  nCs4:	EQU nC4+1	; $B2
00000000 =000000B3                  nD4:	EQU nCs4+1	; $B3
00000000 =000000B4                  nEb4:	EQU nD4+1	; $B4
00000000 =000000B5                  nE4:	EQU nEb4+1	; $B5
00000000 =000000B6                  nF4:	EQU nE4+1	; $B6
00000000 =000000B7                  nFs4:	EQU nF4+1	; $B7
00000000 =000000B8                  nG4:	EQU nFs4+1	; $B8
00000000 =000000B9                  nAb4:	EQU nG4+1	; $B9
00000000 =000000BA                  nA4:	EQU nAb4+1	; $BA
00000000 =000000BB                  nBb4:	EQU nA4+1	; $BB
00000000 =000000BC                  nB4:	EQU nBb4+1	; $BC
00000000 =000000BD                  nC5:	EQU nB4+1	; $BD
00000000 =000000BE                  nCs5:	EQU nC5+1	; $BE
00000000 =000000BF                  nD5:	EQU nCs5+1	; $BF
00000000 =000000C0                  nEb5:	EQU nD5+1	; $C0
00000000 =000000C1                  nE5:	EQU nEb5+1	; $C1
00000000 =000000C2                  nF5:	EQU nE5+1	; $C2
00000000 =000000C3                  nFs5:	EQU nF5+1	; $C3
00000000 =000000C4                  nG5:	EQU nFs5+1	; $C4
00000000 =000000C5                  nAb5:	EQU nG5+1	; $C5
00000000 =000000C6                  nA5:	EQU nAb5+1	; $C6
00000000 =000000C7                  nBb5:	EQU nA5+1	; $C7
00000000 =000000C8                  nB5:	EQU nBb5+1	; $C8
00000000 =000000C9                  nC6:	EQU nB5+1	; $C9
00000000 =000000CA                  nCs6:	EQU nC6+1	; $CA
00000000 =000000CB                  nD6:	EQU nCs6+1	; $CB
00000000 =000000CC                  nEb6:	EQU nD6+1	; $CC
00000000 =000000CD                  nE6:	EQU nEb6+1	; $CD
00000000 =000000CE                  nF6:	EQU nE6+1	; $CE
00000000 =000000CF                  nFs6:	EQU nF6+1	; $CF
00000000 =000000D0                  nG6:	EQU nFs6+1	; $D0
00000000 =000000D1                  nAb6:	EQU nG6+1	; $D1
00000000 =000000D2                  nA6:	EQU nAb6+1	; $D2
00000000 =000000D3                  nBb6:	EQU nA6+1	; $D3
00000000 =000000D4                  nB6:	EQU nBb6+1	; $D4
00000000 =000000D5                  nC7:	EQU nB6+1	; $D5
00000000 =000000D6                  nCs7:	EQU nC7+1	; $D6
00000000 =000000D7                  nD7:	EQU nCs7+1	; $D7
00000000 =000000D8                  nEb7:	EQU nD7+1	; $D8
00000000 =000000D9                  nE7:	EQU nEb7+1	; $D9
00000000 =000000DA                  nF7:	EQU nE7+1	; $DA
00000000 =000000DB                  nFs7:	EQU nF7+1	; $DB
00000000 =000000DC                  nG7:	EQU nFs7+1	; $DC
00000000 =000000DD                  nAb7:	EQU nG7+1	; $DD
00000000 =000000DE                  nA7:	EQU nAb7+1	; $DE
00000000 =000000DF                  nBb7:	EQU nA7+1	; $DF
00000000                            
00000000                            ; ---------------------------------------------------------------------------------------------
00000000                            ; PSG envelope equates
00000000 =00000000                  fTone_00:	EQU $00
00000000 =00000001                  fTone_01:	EQU fTone_00+1
00000000 =00000002                  fTone_02:	EQU fTone_01+1
00000000 =00000003                  fTone_03:	EQU fTone_02+1
00000000 =00000004                  fTone_04:	EQU fTone_03+1
00000000 =00000005                  fTone_05:	EQU fTone_04+1
00000000 =00000006                  fTone_06:	EQU fTone_05+1
00000000 =00000007                  fTone_07:	EQU fTone_06+1
00000000 =00000008                  fTone_08:	EQU fTone_07+1
00000000 =00000009                  fTone_09:	EQU fTone_08+1
00000000 =0000000A                  fTone_0A:	EQU fTone_09+1
00000000 =0000000B                  fTone_0B:	EQU fTone_0A+1
00000000 =0000000C                  fTone_0C:	EQU fTone_0B+1
00000000                            ; ---------------------------------------------------------------------------------------------
00000000                            ; DAC Equates
00000000 =00000081                  dKick			EQU	$81
00000000 =00000082                  dSnare			EQU	$82
00000000 =00000083                  dTimpani		EQU	$83
00000000 =00000088                  dHiTimpani		EQU	$88
00000000 =00000089                  dMidTimpani		EQU	$89
00000000 =0000008A                  dLowTimpani		EQU	$8A
00000000 =0000008B                  dVLowTimpani		EQU	$8B
00000000                            
00000000                            ; ---------------------------------------------------------------------------------------------
00000000                            ; Channel IDs for SFX
00000000 =00000080                  cPSG1				EQU $80
00000000 =000000A0                  cPSG2				EQU $A0
00000000 =000000C0                  cPSG3				EQU $C0
00000000 =000000E0                  cNoise				EQU $E0	; Not for use in S3/S&K/S3D
00000000 =00000002                  cFM3				EQU $02
00000000 =00000004                  cFM4				EQU $04
00000000 =00000005                  cFM5				EQU $05
00000000 =00000006                  cFM6				EQU $06	; Only in S3/S&K/S3D, overrides DAC
00000000                            
00000000                            ; ---------------------------------------------------------------------------------------------
00000000                            ;---------------------------------------------
00000000                            ; SMPS F_Tone Equates 
00000000                            ;---------------------------------------------	
00000000 =00000000                  fTone_00:	EQU $00
00000000 =00000001                  fTone_01:	EQU fTone_00+1
00000000 =00000002                  fTone_02:	EQU fTone_01+1
00000000 =00000003                  fTone_03:	EQU fTone_02+1
00000000 =00000004                  fTone_04:	EQU fTone_03+1
00000000 =00000005                  fTone_05:	EQU fTone_04+1
00000000 =00000006                  fTone_06:	EQU fTone_05+1
00000000 =00000007                  fTone_07:	EQU fTone_06+1
00000000 =00000008                  fTone_08:	EQU fTone_07+1
00000000 =00000009                  fTone_09:	EQU fTone_08+1
00000000 =0000000A                  fTone_0A:	EQU fTone_09+1
00000000 =0000000B                  fTone_0B:	EQU fTone_0A+1
00000000 =0000000C                  fTone_0C:	EQU fTone_0B+1
00000000 =0000000D                  fTone_0D:	EQU fTone_0C+1
00000000 =0000000E                  fTone_0E:	EQU fTone_0D+1
00000000 =0000000F                  fTone_0F:	EQU fTone_0E+1
00000000 =00000010                  fTone_10:	EQU fTone_0F+1
00000000 =00000011                  fTone_11:	EQU fTone_10+1
00000000 =00000012                  fTone_12:	EQU fTone_11+1
00000000 =00000013                  fTone_13:	EQU fTone_12+1
00000000 =00000014                  fTone_14:	EQU fTone_13+1
00000000 =00000015                  fTone_15:	EQU fTone_14+1
00000000 =00000016                  fTone_16:	EQU fTone_15+1
00000000 =00000017                  fTone_17:	EQU fTone_16+1
00000000 =00000018                  fTone_18:	EQU fTone_17+1
00000000 =00000019                  fTone_19:	EQU fTone_18+1
00000000 =0000001A                  fTone_1A:	EQU fTone_19+1
00000000 =0000001B                  fTone_1B:	EQU fTone_1A+1
00000000 =0000001C                  fTone_1C:	EQU fTone_1B+1
00000000 =0000001D                  fTone_1D:	EQU fTone_1C+1
00000000 =0000001E                  fTone_1E:	EQU fTone_1D+1
00000000 =0000001F                  fTone_1F:	EQU fTone_1E+1
00000000 =00000020                  fTone_20:	EQU fTone_1F+1
00000000 =00000021                  fTone_21:	EQU fTone_20+1
00000000 =00000022                  fTone_22:	EQU fTone_21+1
00000000 =00000023                  fTone_23:	EQU fTone_22+1
00000000 =00000024                  fTone_24:	EQU fTone_23+1
00000000 =00000025                  fTone_25:	EQU fTone_24+1
00000000 =00000026                  fTone_26:	EQU fTone_25+1
00000000                            
00000000                            ; ---------------------------------------------------------------------------------------------
00000000                            ; PSG conversion to S3/S&K/S3D drivers require a tone shift of 12 semi-tones.
00000000                            conv0To256  macro val 
00000000                            	if val<$01
00000000                            		dc.b (256-val+$FF)&$FF
00000000                            	else	
00000000                            		dc.b (256-val)&$FF	
00000000                            	endc
00000000                            	endm
00000000                            SMPSModFix:	macro steps
00000000                            	dc.b (steps/(speed-1))
00000000                            	endm	
00000000 =0000000C                  psgdelta	EQU $0C
00000000                            PSGPitch macro pitch
00000000                            		dc.b	(pitch+psgdelta)&$FF
00000000                            	endm
00000000                            
00000000                            s1TempotoS2 macro tmod
00000000                            	if tmod<$01
00000000                            		dc.b ((($FF+tmod-1)*256+($FF+tmod/2))/$FF+tmod)&$FF 	
00000000                            	else
00000000                            		dc.b (((tmod-1)*256+(tmod/2))/tmod)&$FF
00000000                            	endc
00000000                            	endm
00000000                            	
00000000                            s3TempotoS2 macro tmod
00000000                            	if tmod<$01
00000000                            		dc.b (256-tmod+$FF)&$FF
00000000                            	else	
00000000                            		dc.b (256-tmod)&$FF	
00000000                            	endc
00000000                            	endm
00000000                            	
00000000                            convertMainTempoMod	macro tmod
00000000                            	if 		smpsHeaderStartSong=2
00000000                            		dc.b tmod
00000000                            	elseif 		smpsHeaderStartSong<2
00000000                            		s1TempotoS2 	\tmod
00000000                            	elseif	smpsHeaderStartSong>2
00000000                            		s3TempotoS2  	\tmod
00000000                            	endc
00000000                            	endm	
00000000                            ; ---------------------------------------------------------------------------------------------
00000000                            ; Header Macros
00000000 =00000000                  smpsHeaderStartSong = 0
00000000                            
00000000                            smpsHeaderVoiceNull macro
00000000                            	dc.w	$0000
00000000                            	endm
00000000                            
00000000                            ; Header - Set up Voice Location
00000000                            ; Common to music and SFX
00000000                            smpsHeaderVoice macro loc
00000000                            songStart set *
00000000                            	dc.w	loc-songStart
00000000                            	endm
00000000                            
00000000                            ; Header - Set up Voice Location as S3's Universal Voice Bank
00000000                            ; Common to music and SFX
00000000                            smpsHeaderVoiceUVB macro
00000000                            	if songStart<>*
00000000                            		fail "Missing smpsHeaderStartSong or smpsHeaderStartSongConvert"
00000000                            	endc
00000000                            	;dc.w	little_endian(z80_UniVoiceBank)
00000000                            	z80_ptr	z80_UniVoiceBank
00000000                            	endm
00000000                            
00000000                            ; Header macros for music (not for SFX)
00000000                            ; Header - Set up Channel Usage
00000000                            smpsHeaderChan macro fm,psg
00000000                            	dc.b	fm,psg
00000000                            	endm
00000000                            
00000000                            ; Header - Set up Tempo
00000000                            smpsHeaderTempo macro tdiv,tmod
00000000                            	dc.b	tdiv,tmod
00000000                            	endm
00000000                            
00000000                            ; Header - Set up DAC Channel
00000000                            smpsHeaderDAC macro loc,pitch,vol
00000000                            	dc.w	loc-songStart
00000000                            	if narg>=2
00000000                            		dc.b	\pitch
00000000                            	else
00000000                            		dc.b	$00
00000000                            	endc
00000000                            	if narg>=3
00000000                            		dc.b	\vol
00000000                            	else
00000000                            		dc.b	$00
00000000                            	endc
00000000                            	endm
00000000                            
00000000                            ; Header - Set up FM Channel
00000000                            smpsHeaderFM macro loc,pitch,vol
00000000                            	dc.w	loc-songStart
00000000                            	dc.b	pitch,vol
00000000                            	endm
00000000                            
00000000                            ; Header - Set up PSG Channel
00000000                            smpsHeaderPSG macro loc,pitch,vol,mod,voice
00000000                            	dc.w	loc-songStart
00000000                            	dc.b	pitch,vol,mod,voice
00000000                            	endm
00000000                            
00000000                            ; Header macros for SFX (not for music)
00000000                            ; Header - Set up Tempo
00000000                            smpsHeaderTempoSFX macro div
00000000                            	dc.b	div
00000000                            	endm
00000000                            
00000000                            ; Header - Set up Channel Usage
00000000                            smpsHeaderChanSFX macro chan
00000000                            	dc.b	chan
00000000                            	endm
00000000                            
00000000                            ; Header - Set up FM Channel
00000000                            smpsHeaderSFXChannel macro chanid,loc,pitch,vol
00000000                            	if (chanid=cNoise)
00000000                            		fail "Using channel ID of cNoise ($E0) in Sonic 3 driver is dangerous. Fix the song so that it turns into a noise channel instead."
00000000                            	endc
00000000                            	dc.b	$80,chanid
00000000                            	dc.w	loc-songStart
00000000                            	dc.b	pitch, vol
00000000                            	endm
00000000                            
00000000                            ; ---------------------------------------------------------------------------------------------
00000000                            ; Co-ord Flag Macros and Equates
00000000                            ; E0xx - Panning, AMS, FMS
00000000                            smpsPan macro direction,amsfms
00000000                            panNone set $00
00000000                            panRight set $40
00000000                            panLeft set $80
00000000                            panCentre set $C0
00000000                            panCenter set $C0 ; silly Americans :U
00000000                            	dc.b $E0,direction+amsfms
00000000                            	endm
00000000                            
00000000                            ; E1xx - Set channel frequency displacement to xx
00000000                            smpsAlterNote macro val
00000000                            	dc.b	$E1,val
00000000                            	endm
00000000                            
00000000                            ; E2xx - Useless
00000000                            smpsNop macro val
00000000                            	dc.b	$E2,val
00000000                            	endm
00000000                            ; Return (used after smpsCall)
00000000                            smpsReturn macro val
00000000                            	dc.b	$E3
00000000                            	endm
00000000                            
00000000                            ; Fade in previous song (ie. 1-Up)
00000000                            smpsFade macro val
00000000                            	dc.b	$E4
00000000                            	endm
00000000                            
00000000                            ; E5xx - Set channel tempo divider to xx
00000000                            smpsChanTempoDiv macro val
00000000                            	dc.b	$E5,val
00000000                            ;	endc
00000000                            	endm
00000000                            
00000000                            ; E6xx - Alter Volume by xx
00000000                            smpsAlterVol macro val
00000000                            	dc.b	$E6,val
00000000                            	endm
00000000                            
00000000                            sVol  macro val
00000000                            	$E6,val
00000000                            	endm
00000000                            ; E7 - Prevent attack of next note
00000000 =000000E7                  smpsNoAttack	EQU $E7
00000000                            
00000000                            ; E8xx - Set note fill to xx
00000000                            smpsNoteFill macro val
00000000                            		dc.b	$E8,val
00000000                            ;	endc
00000000                            	endm
00000000                            smpsAlterPitch 	macro	value
00000000                            	dc.b $E9,value
00000000                            	endm
00000000                            
00000000                            
00000000                            ; Set music tempo modifier to xx
00000000                            smpsSetTempoMod macro mod
00000000                            	dc.b	$EA,mod
00000000                            	endm
00000000                            
00000000                            ; Set music tempo divider to xx
00000000                            smpsSetTempoDiv macro val
00000000                            	dc.b	$EB,val
00000000                            	endm
00000000                            
00000000                            ; ECxx - Set Volume to xx
00000000                            smpsSetVol macro val
00000000                            	dc.b	$EC,val
00000000                            	endm
00000000                            
00000000                            ; Works on all drivers
00000000                            smpsPSGAlterVol macro vol
00000000                            	dc.b	$EC,vol
00000000                            	endm
00000000                            
00000000                            ; Clears pushing sound flag in S1
00000000                            smpsClearPush macro	
00000000                            	dc.b	$ED
00000000                            	endm
00000000                            
00000000                            ; Stops special SFX (S1 only) and restarts overridden music track
00000000                            smpsStopSpecial macro
00000000                            		dc.b	$EE
00000000                            	endm
00000000                            
00000000                            ; EFxx[yy] - Set Voice of FM channel to xx; xx < 0 means yy present
00000000                            smpsSetvoice macro voice,songID
00000000                            	if narg<=1
00000000                            		dc.b	$EF,voice
00000000                            	else
00000000                            		dc.b	$EF,voice|$80,songID+$81
00000000                            	endc
00000000                            	endm
00000000                            
00000000                            ; F0wwxxyyzz - Modulation - ww: wait time - xx: modulation speed - yy: change per step - zz: number of steps
00000000                            smpsModSet macro wait,speed,change,step
00000000                            	dc.b	$F0
00000000                            	dc.b	wait,speed,change,step
00000000                            	endm
00000000                            
00000000                            ; Turn on Modulation
00000000                            smpsModOn macro
00000000                            	dc.b	$F1
00000000                            	endm
00000000                            
00000000                            ; F2 - End of channel
00000000                            smpsStop macro
00000000                            	dc.b	$F2
00000000                            	endm
00000000                            
00000000                            ; F3xx - PSG waveform to xx
00000000                            smpsPSGform macro form
00000000                            	dc.b	$F3,form
00000000                            	endm
00000000                            
00000000                            ; Turn off Modulation
00000000                            smpsModOff macro
00000000                            	dc.b	$F4
00000000                            	endm
00000000                            
00000000                            ; F5xx - PSG voice to xx
00000000                            smpsPSGvoice macro voice
00000000                            	dc.b	$F5,voice
00000000                            	endm
00000000                            
00000000                            ; F6xxxx - Jump to xxxx
00000000                            smpsJump macro loc
00000000                            	dc.b	$F6
00000000                            	dc.w	loc-*-1
00000000                            	endm
00000000                            
00000000                            ; F7xxyyzzzz - Loop back to zzzz yy times, xx being the loop index for loop recursion fixing
00000000                            smpsLoop macro index,loops,loc
00000000                            	dc.b	$F7
00000000                            	dc.b	index,loops
00000000                            	dc.w	loc-*-1
00000000                            	endm
00000000                            
00000000                            ; F8xxxx - Call pattern at xxxx, saving return point
00000000                            smpsCall macro loc
00000000                            	dc.b	$F8
00000000                            	dc.w	loc-*-1
00000000                            	endm
00000000                            
00000000                            ; ---------------------------------------------------------------------------------------------
00000000                            ; Alter Volume
00000000                            smpsFMAlterVol macro val1,val2
00000000                            	if narg<=1
00000000                            		dc.b	$E6,val1
00000000                            	else
00000000                            		dc.b	$E5,val1,val2
00000000                            	endc
00000000                            	endm
00000000                            
00000000                            ; S3/S&K/S3D-only coordination flags
00000000                            ; Silences FM channel then stops as per smpsStop
00000000                            smpsStopFM macro
00000000                            	dc.b	$E3
00000000                            	endm
00000000                            
00000000                            ; Spindash Rev
00000000                            smpsSpindashRev macro
00000000                            	dc.b	$E9
00000000                            	endm
00000000                            	
00000000                            smpsPlayDACSample macro sample
00000000                            	dc.b	$EA,sample
00000000                            	endm
00000000                            	
00000000                            smpsConditionalJump macro index,loc
00000000                            	dc.b	$EB
00000000                            	dc.b	index
00000000                            	dc.w	loc-songStart
00000000                            	endm
00000000                            
00000000                            ; Set note values to xx-$40
00000000                            smpsSetNote macro val
00000000                            	dc.b	$ED,val
00000000                            	endm
00000000                            
00000000                            smpsFMICommand macro reg,val
00000000                            	dc.b	$EE,reg,val
00000000                            	endm
00000000                            
00000000                            ; Set Modulation
00000000                            smpsModChange2 macro fmmod,psgmod
00000000                            	dc.b	$F1,fmmod,psgmod
00000000                            	endm
00000000                            
00000000                            ; Set Modulation
00000000                            smpsModChange macro val
00000000                            	dc.b	$F4,val
00000000                            	endm
00000000                            
00000000                            ; FCxxxx - Jump to xxxx
00000000                            smpsContinuousLoop macro loc
00000000                            	dc.b	$FC
00000000                            	dc.w	loc-songStart
00000000                            	endm
00000000                            
00000000                            smpsAlternateSMPS macro flag
00000000                            	dc.b	$FD,flag
00000000                            	endm
00000000                            
00000000                            smpsFM3SpecialMode macro ind1,ind2,ind3,ind4
00000000                            	dc.b	$FE,ind1,ind2,ind3,ind4
00000000                            	endm
00000000                            
00000000                            smpsPlaySound macro index
00000000                            	dc.b	$FF,$01,index
00000000                            	endm
00000000                            
00000000                            smpsHaltMusic macro flag
00000000                            	dc.b	$FF,$02,flag
00000000                            	endm
00000000                            
00000000                            smpsCopyData macro data,len
00000000                            	fail "Coord. Flag to copy data should not be used. Complain to Flamewing if any music uses it."
00000000                            	dc.b	$FF,$03
00000000                            	;dc.w	little_endian(data)
00000000                            	z80_ptr	data
00000000                            	dc.b	len
00000000                            	endm
00000000                            
00000000                            smpsSSGEG macro op1,op2,op3,op4
00000000                            	dc.b	$FF,$05,op1,op2,op3,op4
00000000                            	endm
00000000                            
00000000                            smpsFMFlutter macro tone,mask
00000000                            	dc.b	$FF,$06,tone,mask
00000000                            	endm
00000000                            
00000000                            smpsResetSpindashRev macro val
00000000                            	dc.b	$FF,$07
00000000                            	endm
00000000                            
00000000                            ; ---------------------------------------------------------------------------------------------
00000000                            ; Macros for FM instruments
00000000                            ; Voices - Feedback
00000000                            smpsVcFeedback macro val
00000000                            vcFeedback set \val
00000000                            	endm
00000000                            
00000000                            ; Voices - Algorithm
00000000                            smpsVcAlgorithm macro val
00000000                            vcAlgorithm set \val
00000000                            	endm
00000000                            
00000000                            smpsVcUnusedBits macro val
00000000                            vcUnusedBits set \val
00000000                            	endm
00000000                            
00000000                            ; Voices - Detune
00000000                            smpsVcDetune macro op1,op2,op3,op4
00000000                            vcDT1 set \op1
00000000                            vcDT2 set \op2
00000000                            vcDT3 set \op3
00000000                            vcDT4 set \op4
00000000                            	endm
00000000                            
00000000                            ; Voices - Coarse-Frequency
00000000                            smpsVcCoarseFreq macro op1,op2,op3,op4
00000000                            vcCF1 set \op1
00000000                            vcCF2 set \op2
00000000                            vcCF3 set \op3
00000000                            vcCF4 set \op4
00000000                            	endm
00000000                            
00000000                            ; Voices - Rate Scale
00000000                            smpsVcRateScale macro op1,op2,op3,op4
00000000                            vcRS1 set \op1
00000000                            vcRS2 set \op2
00000000                            vcRS3 set \op3
00000000                            vcRS4 set \op4
00000000                            	endm
00000000                            
00000000                            ; Voices - Attack Rate
00000000                            smpsVcAttackRate macro op1,op2,op3,op4
00000000                            vcAR1 set \op1
00000000                            vcAR2 set \op2
00000000                            vcAR3 set \op3
00000000                            vcAR4 set \op4
00000000                            	endm
00000000                            
00000000                            ; Voices - Amplitude Modulation
00000000                            smpsVcAmpMod macro op1,op2,op3,op4
00000000                            vcAM1 set \op1
00000000                            vcAM2 set \op2
00000000                            vcAM3 set \op3
00000000                            vcAM4 set \op4
00000000                            	endm
00000000                            
00000000                            ; Voices - First Decay Rate
00000000                            smpsVcDecayRate1 macro op1,op2,op3,op4
00000000                            vcD1R1 set \op1
00000000                            vcD1R2 set \op2
00000000                            vcD1R3 set \op3
00000000                            vcD1R4 set \op4
00000000                            	endm
00000000                            
00000000                            ; Voices - Second Decay Rate
00000000                            smpsVcDecayRate2 macro op1,op2,op3,op4
00000000                            vcD2R1 set \op1
00000000                            vcD2R2 set \op2
00000000                            vcD2R3 set \op3
00000000                            vcD2R4 set \op4
00000000                            	endm
00000000                            
00000000                            ; Voices - Decay Level
00000000                            smpsVcDecayLevel macro op1,op2,op3,op4
00000000                            vcDL1 set \op1
00000000                            vcDL2 set \op2
00000000                            vcDL3 set \op3
00000000                            vcDL4 set \op4
00000000                            	endm
00000000                            
00000000                            ; Voices - Release Rate
00000000                            smpsVcReleaseRate macro op1,op2,op3,op4
00000000                            vcRR1 set \op1
00000000                            vcRR2 set \op2
00000000                            vcRR3 set \op3
00000000                            vcRR4 set \op4
00000000                            	endm
00000000                            
00000000                            ; Voices - Total Level
00000000                            smpsVcTotalLevel macro op1,op2,op3,op4
00000000                            vcTL1 set \op1
00000000                            vcTL2 set \op2
00000000                            vcTL3 set \op3
00000000                            vcTL4 set \op4
00000000                            	dc.b	(vcUnusedBits<<6)+(vcFeedback<<3)+vcAlgorithm
00000000                            ;   0     1     2     3     4     5     6     7
00000000                            ;%1000,%1000,%1000,%1000,%1010,%1110,%1110,%1111
00000000                            vcTLMask4 set ((vcAlgorithm=7)<<7)
00000000                            vcTLMask3 set ((vcAlgorithm>=4)<<7)
00000000                            vcTLMask2 set ((vcAlgorithm>=5)<<7)
00000000                            vcTLMask1 set $80
00000000                            ;	dc.b	(vcDT4<<4)+vcCF4 ,(vcDT3<<4)+vcCF3 ,(vcDT2<<4)+vcCF2 ,(vcDT1<<4)+vcCF1
00000000                            ;	dc.b	(vcRS4<<6)+vcAR4 ,(vcRS3<<6)+vcAR3 ,(vcRS2<<6)+vcAR2 ,(vcRS1<<6)+vcAR1
00000000                            ;	dc.b	(vcAM4<<5)+vcD1R4,(vcAM3<<5)+vcD1R3,(vcAM2<<5)+vcD1R2,(vcAM1<<5)+vcD1R1
00000000                            ;	dc.b	vcD2R4           ,vcD2R3           ,vcD2R2           ,vcD2R1
00000000                            ;	dc.b	(vcDL4<<4)+vcRR4 ,(vcDL3<<4)+vcRR3 ,(vcDL2<<4)+vcRR2 ,(vcDL1<<4)+vcRR1
00000000                            ;	dc.b	vcTL4|vcTLMask4  ,vcTL3|vcTLMask3  ,vcTL2|vcTLMask2  ,vcTL1|vcTLMask1
00000000                            	dc.b	(vcDT4<<4)+vcCF4,(vcDT3<<4)+vcCF3,(vcDT2<<4)+vcCF2,(vcDT1<<4)+vcCF1
00000000                            	dc.b	(vcRS4<<6)+vcAR4,(vcRS3<<6)+vcAR3,(vcRS2<<6)+vcAR2,(vcRS1<<6)+vcAR1
00000000                            	dc.b	(vcAM4<<5)+vcD1R4,(vcAM3<<5)+vcD1R3,(vcAM2<<5)+vcD1R2,(vcAM1<<5)+vcD1R1
00000000                            	dc.b	vcD2R4,vcD2R3,vcD2R2,vcD2R1
00000000                            	dc.b	(vcDL4<<4)+vcRR4,(vcDL3<<4)+vcRR3,(vcDL2<<4)+vcRR2,(vcDL1<<4)+vcRR1
00000000                            	dc.b	vcTL4|vcTLMask4,vcTL3|vcTLMask3,vcTL2|vcTLMask2,vcTL1|vcTLMask1
00000000                            	endm
00000000                            
00000000                            
00000000                            
00000000                            ; ===========================================================================
00000000                            
00000000                            StartOfRom:
00000000 00FF FE00                  Vectors:	dc.l v_systemstack&$FFFFFF	; Initial stack pointer value
00000004 0000 0000                  		dc.l EntryPoint			; Start of program
00000008 0000 0000                  		dc.l BusError			; Bus error
0000000C 0000 0000                  		dc.l AddressError		; Address error (4)
00000010 0000 0000                  		dc.l IllegalInstr		; Illegal instruction
00000014 0000 0000                  		dc.l ZeroDivide			; Division by zero
00000018 0000 0000                  		dc.l ChkInstr			; CHK exception
0000001C 0000 0000                  		dc.l TrapvInstr			; TRAPV exception (8)
00000020 0000 0000                  		dc.l PrivilegeViol		; Privilege violation
00000024 0000 0000                  		dc.l Trace				; TRACE exception
00000028 0000 0000                  		dc.l Line1010Emu		; Line-A emulator
0000002C 0000 0000                  		dc.l Line1111Emu		; Line-F emulator (12)
00000030 0000 0000                  		dc.l ErrorExcept		; Unused (reserved)
00000034 0000 0000                  		dc.l ErrorExcept		; Unused (reserved)
00000038 0000 0000                  		dc.l ErrorExcept		; Unused (reserved)
0000003C 0000 0000                  		dc.l ErrorExcept		; Unused (reserved) (16)
00000040 0000 0000                  		dc.l ErrorExcept		; Unused (reserved)
00000044 0000 0000                  		dc.l ErrorExcept		; Unused (reserved)
00000048 0000 0000                  		dc.l ErrorExcept		; Unused (reserved)
0000004C 0000 0000                  		dc.l ErrorExcept		; Unused (reserved) (20)
00000050 0000 0000                  		dc.l ErrorExcept		; Unused (reserved)
00000054 0000 0000                  		dc.l ErrorExcept		; Unused (reserved)
00000058 0000 0000                  		dc.l ErrorExcept		; Unused (reserved)
0000005C 0000 0000                  		dc.l ErrorExcept		; Unused (reserved) (24)
00000060 0000 0000                  		dc.l ErrorExcept		; Spurious exception
00000064 0000 0000                  		dc.l ErrorTrap			; IRQ level 1
00000068 0000 0000                  		dc.l ErrorTrap			; IRQ level 2
0000006C 0000 0000                  		dc.l ErrorTrap			; IRQ level 3 (28)
00000070 0000 0000                  		dc.l HBlank				; IRQ level 4 (horizontal retrace interrupt)
00000074 0000 0000                  		dc.l ErrorTrap			; IRQ level 5
00000078 0000 0000                  		dc.l VBlank				; IRQ level 6 (vertical retrace interrupt)
0000007C 0000 0000                  		dc.l ErrorTrap			; IRQ level 7 (32)
00000080 0000 0000                  		dc.l ErrorTrap			; TRAP #00 exception
00000084 0000 0000                  		dc.l ErrorTrap			; TRAP #01 exception
00000088 0000 0000                  		dc.l ErrorTrap			; TRAP #02 exception
0000008C 0000 0000                  		dc.l ErrorTrap			; TRAP #03 exception (36)
00000090 0000 0000                  		dc.l ErrorTrap			; TRAP #04 exception
00000094 0000 0000                  		dc.l ErrorTrap			; TRAP #05 exception
00000098 0000 0000                  		dc.l ErrorTrap			; TRAP #06 exception
0000009C 0000 0000                  		dc.l ErrorTrap			; TRAP #07 exception (40)
000000A0 0000 0000                  		dc.l ErrorTrap			; TRAP #08 exception
000000A4 0000 0000                  		dc.l ErrorTrap			; TRAP #09 exception
000000A8 0000 0000                  		dc.l ErrorTrap			; TRAP #10 exception
000000AC 0000 0000                  		dc.l ErrorTrap			; TRAP #11 exception (44)
000000B0 0000 0000                  		dc.l ErrorTrap			; TRAP #12 exception
000000B4 0000 0000                  		dc.l ErrorTrap			; TRAP #13 exception
000000B8 0000 0000                  		dc.l ErrorTrap			; TRAP #14 exception
000000BC 0000 0000                  		dc.l ErrorTrap			; TRAP #15 exception (48)
000000C0 0000 0000                  		dc.l ErrorTrap			; Unused (reserved)
000000C4 0000 0000                  		dc.l ErrorTrap			; Unused (reserved)
000000C8 0000 0000                  		dc.l ErrorTrap			; Unused (reserved)
000000CC 0000 0000                  		dc.l ErrorTrap			; Unused (reserved)
000000D0 0000 0000                  		dc.l ErrorTrap			; Unused (reserved)
000000D4 0000 0000                  		dc.l ErrorTrap			; Unused (reserved)
000000D8 0000 0000                  		dc.l ErrorTrap			; Unused (reserved)
000000DC 0000 0000                  		dc.l ErrorTrap			; Unused (reserved)
000000E0 0000 0000                  		dc.l ErrorTrap			; Unused (reserved)
000000E4 0000 0000                  		dc.l ErrorTrap			; Unused (reserved)
000000E8 0000 0000                  		dc.l ErrorTrap			; Unused (reserved)
000000EC 0000 0000                  		dc.l ErrorTrap			; Unused (reserved)
000000F0 0000 0000                  		dc.l ErrorTrap			; Unused (reserved)
000000F4 0000 0000                  		dc.l ErrorTrap			; Unused (reserved)
000000F8 0000 0000                  		dc.l ErrorTrap			; Unused (reserved)
000000FC 0000 0000                  		dc.l ErrorTrap			; Unused (reserved)
00000100 5345 4741 204D 4547 4120+  ConsoleName:	dc.b "SEGA MEGA DRIVE " ; Hardware system ID (Console name)
00000110 4D43 5420 3230 3231 2020+  Date:		dc.b "MCT 2021        " ; Copyright holder and release date (generally year)
00000120 534F 4E49 4320 4445 4255+  Title_Local:	dc.b "SONIC DEBUT BY MCTRAVISYT                       " ; Domestic name
00000150 534F 4E49 4320 4445 4255+  Title_Int:	dc.b "SONIC DEBUT BY MCTRAVISYT                       " ; International name
00000180 474D 2058 5858 5858 5858+  		dc.b "GM XXXXXXXX-XX"   ; Serial/version number (Rev 0)
0000018E 0000                       Checksum: dc.w $0
00000190 4A20 2020 2020 2020 2020+  		dc.b "J               " ; I/O support
000001A0 0000 0000                  RomStartLoc:	dc.l StartOfRom		; Start address of ROM
000001A4 0000 0000                  RomEndLoc:	dc.l EndOfRom-1		; End address of ROM
000001A8 00FF 0000                  RamStartLoc:	dc.l $FF0000		; Start address of RAM
000001AC 00FF FFFF                  RamEndLoc:	dc.l $FFFFFF		; End address of RAM
000001B0 2020 2020                  		dc.l $20202020
000001B4 2020 2020                  		dc.l $20202020		; SRAM start ($200001)
000001B8 2020 2020                  		dc.l $20202020		; SRAM end ($20xxxx)
000001BC 436F 6D70 696C 6564 206F+  Notes:		dc.b 'Compiled on YY/MM/DD at HH:MM:SS                    ' ; Notes (unused, anything can be put in this space, but it has to be 52 bytes.)
000001F0 4A55 4520 2020 2020 2020+  Region:		dc.b "JUE             " ; Region (Country code)
00000200                            EndOfHeader:
00000200                            
00000200                            ; ===========================================================================
00000200                            ; Crash/Freeze the 68000. Unlike Sonic 2, Sonic 1 uses the 68000 for playing music, so it stops too
00000200                            
00000200                            ErrorTrap:
00000200 4E71                       		nop	
00000202 4E71                       		nop	
00000204 60FA                       		bra.s	ErrorTrap
00000206                            ; ===========================================================================
00000206                            
00000206                            EntryPoint:
00000206 4AB9 00A1 0008             		tst.l	(z80_port_1_control).l ; test port A & B control registers
0000020C 6600                       		bne.s	PortA_Ok
0000020E 4A79 00A1 000C             		tst.w	(z80_expansion_control).l ; test port C control register
00000214                            
00000214                            PortA_Ok:
00000214 6600                       		bne.s	SkipSetup ; Skip the VDP and Z80 setup code if port A, B or C is ok...?
00000216 4BFA 0000                  		lea	SetupValues(pc),a5	; Load setup values array address.
0000021A 4C9D 00E0                  		movem.w	(a5)+,d5-d7
0000021E 4CDD 1F00                  		movem.l	(a5)+,a0-a4
00000222 1029 EF01                  		move.b	-$10FF(a1),d0	; get hardware version (from $A10001)
00000226 0200 000F                  		andi.b	#$F,d0
0000022A 6700                       		beq.s	SkipSecurity	; If the console has no TMSS, skip the security stuff.
0000022C 237C 5345 4741 2F00        		move.l	#'SEGA',$2F00(a1) ; move "SEGA" to TMSS register ($A14000)
00000234                            
00000234                            SkipSecurity:
00000234 3014                       		move.w	(a4),d0	; clear write-pending flag in VDP to prevent issues if the 68k has been reset in the middle of writing a command long word to the VDP.
00000236 7000                       		moveq	#0,d0	; clear d0
00000238 2C40                       		movea.l	d0,a6	; clear a6
0000023A 4E66                       		move.l	a6,usp	; set usp to $0
0000023C                            
0000023C 7217                       		moveq	#$17,d1
0000023E                            VDPInitLoop:
0000023E 1A1D                       		move.b	(a5)+,d5	; add $8000 to value
00000240 3885                       		move.w	d5,(a4)		; move value to	VDP register
00000242 DA47                       		add.w	d7,d5		; next register
00000244 51C9 FFF8                  		dbf	d1,VDPInitLoop
00000248                            		
00000248 289D                       		move.l	(a5)+,(a4)
0000024A 3680                       		move.w	d0,(a3)		; clear	the VRAM
0000024C 3287                       		move.w	d7,(a1)		; stop the Z80
0000024E 3487                       		move.w	d7,(a2)		; reset	the Z80
00000250                            
00000250                            WaitForZ80:
00000250 0111                       		btst	d0,(a1)		; has the Z80 stopped?
00000252 66FC                       		bne.s	WaitForZ80	; if not, branch
00000254                            
00000254 7425                       		moveq	#$25,d2
00000256                            Z80InitLoop:
00000256 10DD                       		move.b	(a5)+,(a0)+
00000258 51CA FFFC                  		dbf	d2,Z80InitLoop
0000025C                            		
0000025C 3480                       		move.w	d0,(a2)
0000025E 3280                       		move.w	d0,(a1)		; start	the Z80
00000260 3487                       		move.w	d7,(a2)		; reset	the Z80
00000262                            
00000262                            ClrRAMLoop:
00000262 2D00                       		move.l	d0,-(a6)	; clear 4 bytes of RAM
00000264 51CE FFFC                  		dbf	d6,ClrRAMLoop	; repeat until the entire RAM is clear
00000268 289D                       		move.l	(a5)+,(a4)	; set VDP display mode and increment mode
0000026A 289D                       		move.l	(a5)+,(a4)	; set VDP to CRAM write
0000026C                            
0000026C 761F                       		moveq	#$1F,d3	; set repeat times
0000026E                            ClrCRAMLoop:
0000026E 2680                       		move.l	d0,(a3)	; clear 2 palettes
00000270 51CB FFFC                  		dbf	d3,ClrCRAMLoop	; repeat until the entire CRAM is clear
00000274 289D                       		move.l	(a5)+,(a4)	; set VDP to VSRAM write
00000276                            
00000276 7813                       		moveq	#$13,d4
00000278                            ClrVSRAMLoop:
00000278 2680                       		move.l	d0,(a3)	; clear 4 bytes of VSRAM.
0000027A 51CC FFFC                  		dbf	d4,ClrVSRAMLoop	; repeat until the entire VSRAM is clear
0000027E 7A03                       		moveq	#3,d5
00000280                            
00000280                            PSGInitLoop:
00000280 175D 0011                  		move.b	(a5)+,$11(a3)	; reset	the PSG
00000284 51CD FFFA                  		dbf	d5,PSGInitLoop	; repeat for other channels
00000288 3480                       		move.w	d0,(a2)
0000028A 4CD6 7FFF                  		movem.l	(a6),d0-a6	; clear all registers
0000028E 46FC 2700                  		disable_ints
00000292                            
00000292                            SkipSetup:
00000292 6000                       		bra.s	GameProgram	; begin game
00000294                            
00000294                            ; ===========================================================================
00000294 8000                       SetupValues:	dc.w $8000		; VDP register start number
00000296 3FFF                       		dc.w $3FFF		; size of RAM/4
00000298 0100                       		dc.w $100		; VDP register diff
0000029A                            
0000029A 00A0 0000                  		dc.l z80_ram		; start	of Z80 RAM
0000029E 00A1 1100                  		dc.l z80_bus_request	; Z80 bus request
000002A2 00A1 1200                  		dc.l z80_reset		; Z80 reset
000002A6 00C0 0000                  		dc.l vdp_data_port	; VDP data
000002AA 00C0 0004                  		dc.l vdp_control_port	; VDP control
000002AE                            
000002AE 04                         		dc.b 4			; VDP $80 - 8-colour mode
000002AF 14                         		dc.b $14		; VDP $81 - Megadrive mode, DMA enable
000002B0 30                         		dc.b ($C000>>10)	; VDP $82 - foreground nametable address
000002B1 3C                         		dc.b ($F000>>10)	; VDP $83 - window nametable address
000002B2 07                         		dc.b ($E000>>13)	; VDP $84 - background nametable address
000002B3 6C                         		dc.b ($D800>>9)		; VDP $85 - sprite table address
000002B4 00                         		dc.b 0			; VDP $86 - unused
000002B5 00                         		dc.b 0			; VDP $87 - background colour
000002B6 00                         		dc.b 0			; VDP $88 - unused
000002B7 00                         		dc.b 0			; VDP $89 - unused
000002B8 FF                         		dc.b 255		; VDP $8A - HBlank register
000002B9 00                         		dc.b 0			; VDP $8B - full screen scroll
000002BA 81                         		dc.b $81		; VDP $8C - 40 cell display
000002BB 37                         		dc.b ($DC00>>10)	; VDP $8D - hscroll table address
000002BC 00                         		dc.b 0			; VDP $8E - unused
000002BD 01                         		dc.b 1			; VDP $8F - VDP increment
000002BE 01                         		dc.b 1			; VDP $90 - 64 cell hscroll size
000002BF 00                         		dc.b 0			; VDP $91 - window h position
000002C0 00                         		dc.b 0			; VDP $92 - window v position
000002C1 FFFF                       		dc.w $FFFF		; VDP $93/94 - DMA length
000002C3 0000                       		dc.w 0			; VDP $95/96 - DMA source
000002C5 80                         		dc.b $80		; VDP $97 - DMA fill VRAM
000002C6 4000 0080                  		dc.l $40000080		; VRAM address 0
000002CA                            
000002CA AF                         		dc.b $AF		; xor	a
000002CB 01D9 1F                    		dc.b $01, $D9, $1F	; ld	bc,1fd9h
000002CE 1127 00                    		dc.b $11, $27, $00	; ld	de,0027h
000002D1 2126 00                    		dc.b $21, $26, $00	; ld	hl,0026h
000002D4 F9                         		dc.b $F9		; ld	sp,hl
000002D5 77                         		dc.b $77		; ld	(hl),a
000002D6 EDB0                       		dc.b $ED, $B0		; ldir
000002D8 DDE1                       		dc.b $DD, $E1		; pop	ix
000002DA FDE1                       		dc.b $FD, $E1		; pop	iy
000002DC ED47                       		dc.b $ED, $47		; ld	i,a
000002DE ED4F                       		dc.b $ED, $4F		; ld	r,a
000002E0 D1                         		dc.b $D1		; pop	de
000002E1 E1                         		dc.b $E1		; pop	hl
000002E2 F1                         		dc.b $F1		; pop	af
000002E3 08                         		dc.b $08		; ex	af,af'
000002E4 D9                         		dc.b $D9		; exx
000002E5 C1                         		dc.b $C1		; pop	bc
000002E6 D1                         		dc.b $D1		; pop	de
000002E7 E1                         		dc.b $E1		; pop	hl
000002E8 F1                         		dc.b $F1		; pop	af
000002E9 F9                         		dc.b $F9		; ld	sp,hl
000002EA F3                         		dc.b $F3		; di
000002EB ED56                       		dc.b $ED, $56		; im1
000002ED 36E9                       		dc.b $36, $E9		; ld	(hl),e9h
000002EF E9                         		dc.b $E9		; jp	(hl)
000002F0                            
000002F0 8104                       		dc.w $8104		; VDP display mode
000002F2 8F02                       		dc.w $8F02		; VDP increment
000002F4 C000 0000                  		dc.l $C0000000		; CRAM write mode
000002F8 4000 0010                  		dc.l $40000010		; VSRAM address 0
000002FC                            
000002FC 9FBF DFFF                  		dc.b $9F, $BF, $DF, $FF	; values for PSG channel volumes
00000300                            ; ===========================================================================
00000300                            
00000300                            GameProgram:
00000300 4A79 00C0 0004             		tst.w	(vdp_control_port).l
00000306 0839 0006 00A1 000D        		btst	#6,($A1000D).l
0000030E 6700                       		beq.s	CheckSumCheck
00000310 0CB8 696E 6974 FFFC        		cmpi.l	#'init',(v_init).w ; has checksum routine already run?
00000318 6700 0000                  		beq.w	GameInit	; if yes, branch
0000031C                            
0000031C                            CheckSumCheck:
0000031C 207C 0000 0200             		movea.l	#EndOfHeader,a0	; start	checking bytes after the header	($200)
00000322 227C 0000 01A4             		movea.l	#RomEndLoc,a1	; stop at end of ROM
00000328 2011                       		move.l	(a1),d0
0000032A 7200                       		moveq	#0,d1
0000032C                            
0000032C                            	@loop:
0000032C D258                       		add.w	(a0)+,d1
0000032E B088                       		cmp.l	a0,d0
00000330 64FA                       		bhs.s	@loop
00000332 227C 0000 018E             		movea.l	#Checksum,a1	; read the checksum
00000338 B251                       		cmp.w	(a1),d1		; compare checksum in header to ROM
0000033A 6600 0000                  		bne.w	CheckSumError	; if they don't match, branch
0000033E                            
0000033E                            	CheckSumOk:
0000033E 4DF8 FE00                  		lea	($FFFFFE00).w,a6
00000342 7E00                       		moveq	#0,d7
00000344 3C3C 007F                  		move.w	#$7F,d6
00000348                            	@clearRAM:
00000348 2CC7                       		move.l	d7,(a6)+
0000034A 51CE FFFC                  		dbf	d6,@clearRAM	; clear RAM ($FE00-$FFFF)
0000034E                            
0000034E 1039 00A1 0001             		move.b	(z80_version).l,d0
00000354 0200 00C0                  		andi.b	#$C0,d0
00000358 11C0 FFF8                  		move.b	d0,(v_megadrive).w ; get region setting
0000035C 21FC 696E 6974 FFFC        		move.l	#'init',(v_init).w ; set flag so checksum won't run again
00000364                            
00000364                            GameInit:
00000364 4DF9 00FF 0000             		lea	($FF0000).l,a6
0000036A 7E00                       		moveq	#0,d7
0000036C 3C3C 3F7F                  		move.w	#$3F7F,d6
00000370                            	@clearRAM:
00000370 2CC7                       		move.l	d7,(a6)+
00000372 51CE FFFC                  		dbf	d6,@clearRAM	; clear RAM ($0000-$FDFF)
00000376                            
00000376 6100 0000                  		bsr.w	VDPSetupGame
0000037A 6100 0000                  		bsr.w	SoundDriverLoad
0000037E 6100 0000                  		bsr.w	JoypadInit
00000382 11FC 0000 F600             		move.b	#id_Sega,(v_gamemode).w ; set Game Mode to Sega Screen
00000388                            
00000388                            MainGameLoop:
00000388 1038 F600                  		move.b	(v_gamemode).w,d0 ; load Game Mode
0000038C 0240 007C                  		andi.w	#$7C,d0	; limit Game Mode value to $1C max (change to a maximum of 7C to add more game modes)
00000390 4EBB 0000                  		jsr	GameModeArray(pc,d0.w) ; jump to apt location in ROM
00000394 60F2                       		bra.s	MainGameLoop	; loop indefinitely
00000396                            ; ===========================================================================
00000396                            ; ---------------------------------------------------------------------------
00000396                            ; Main game mode array
00000396                            ; ---------------------------------------------------------------------------
00000396                            
00000396                            GameModeArray:
00000396                            
00000396 6000 0000                  ptr_GM_Sega:	bra.w	GM_Sega		; Sega Screen ($00)
0000039A                            
0000039A 6000 0000                  ptr_GM_Title:	bra.w	GM_Title	; Title	Screen ($04)
0000039E                            
0000039E 6000 0000                  ptr_GM_Demo:	bra.w	GM_Level	; Demo Mode ($08)
000003A2                            
000003A2 6000 0000                  ptr_GM_Level:	bra.w	GM_Level	; Normal Level ($0C)
000003A6                            
000003A6 6000 0000                  ptr_GM_Special:	bra.w	GM_Special	; Special Stage	($10)
000003AA                            
000003AA 6000 0000                  ptr_GM_Cont:	bra.w	GM_Continue	; Continue Screen ($14)
000003AE                            
000003AE 6000 0000                  ptr_GM_Ending:	bra.w	GM_Ending	; End of game sequence ($18)
000003B2                            
000003B2 6000 0000                  ptr_GM_Credits:	bra.w	GM_Credits	; Credits ($1C)
000003B6                            
000003B6 6000 0000                  ptr_GM_OtherSega:	bra.w	GM_RadNexAff		; Sega Screen ($20)
000003BA                            
000003BA 6000 0000                  ptr_GM_Hacker:	bra.w	GM_SimpleCreds		; Credits ($24)
000003BE                            
000003BE 4E75                       		rts	
000003C0                            ; ===========================================================================
000003C0                            
000003C0                            CheckSumError:
000003C0 6100 0000                  		bsr.w	VDPSetupGame
000003C4 23FC C000 0000 00C0 0004   		move.l	#$C0000000,(vdp_control_port).l ; set VDP to CRAM write
000003CE 7E3F                       		moveq	#$3F,d7
000003D0                            
000003D0                            	@fillred:
000003D0 33FC 000E 00C0 0000        		move.w	#cRed,(vdp_data_port).l ; fill palette with red
000003D8 51CF FFF6                  		dbf	d7,@fillred	; repeat $3F more times
000003DC                            
000003DC                            	@endlessloop:
000003DC 60FE                       		bra.s	@endlessloop
000003DE                            
000003DE                            ; ===========================================================================
000003DE                            
000003DE                            Art_Text:	incbin	"artunc\menutext.bin" ; text used in level select and debug mode
000008FE                            		even
000008FE                            
000008FE                            ; ===========================================================================
000008FE                            ; ---------------------------------------------------------------------------
000008FE                            ; Vertical interrupt
000008FE                            ; ---------------------------------------------------------------------------
000008FE                            
000008FE                            VBlank:
000008FE 48E7 FFFE                  		movem.l	d0-a6,-(sp)
00000902 4A38 F62A                  		tst.b	(v_vbla_routine).w
00000906 6700                       		beq.s	VBla_00
00000908 3039 00C0 0004             		move.w	(vdp_control_port).l,d0
0000090E 23FC 4000 0010 00C0 0004   		move.l	#$40000010,(vdp_control_port).l
00000918 23F8 F616 00C0 0000        		move.l	(v_scrposy_dup).w,(vdp_data_port).l ; send screen y-axis pos. to VSRAM
00000920 0838 0006 FFF8             		btst	#6,(v_megadrive).w ; is Megadrive PAL?
00000926 6700                       		beq.s	@notPAL		; if not, branch
00000928                            
00000928 303C 0700                  		move.w	#$700,d0
0000092C                            	@waitPAL:
0000092C 51C8 FFFE                  		dbf	d0,@waitPAL ; wait here in a loop doing nothing for a while...
00000930                            
00000930                            	@notPAL:
00000930 1038 F62A                  		move.b	(v_vbla_routine).w,d0
00000934 11FC 0000 F62A             		move.b	#0,(v_vbla_routine).w
0000093A 31FC 0001 F644             		move.w	#1,(f_hbla_pal).w
00000940 0240 003E                  		andi.w	#$3E,d0
00000944 303B 0000                  		move.w	VBla_Index(pc,d0.w),d0
00000948 4EBB 0000                  		jsr	VBla_Index(pc,d0.w)
0000094C                            
0000094C                            VBla_Music:
0000094C 4EB9 0000 0000             		jsr	(UpdateMusic).l
00000952                            
00000952                            VBla_Exit:
00000952 52B8 FE0C                  		addq.l	#1,(v_vbla_count).w
00000956 4CDF 7FFF                  		movem.l	(sp)+,d0-a6
0000095A 4E73                       		rte	
0000095C                            ; ===========================================================================
0000095C 0000 0000                  VBla_Index:	dc.w VBla_00-VBla_Index, VBla_02-VBla_Index
00000960 0000 0000                  		dc.w VBla_04-VBla_Index, VBla_06-VBla_Index
00000964 0000 0000                  		dc.w VBla_08-VBla_Index, VBla_0A-VBla_Index
00000968 0000 0000                  		dc.w VBla_0C-VBla_Index, VBla_0E-VBla_Index
0000096C 0000 0000                  		dc.w VBla_10-VBla_Index, VBla_12-VBla_Index
00000970 0000 0000                  		dc.w VBla_14-VBla_Index, VBla_16-VBla_Index
00000974 0000                       		dc.w VBla_0C-VBla_Index
00000976                            ; ===========================================================================
00000976                            
00000976                            VBla_00:
00000976 0C38 0000 F600             		cmpi.b	#$80+id_Level,(v_gamemode).w
0000097C 6700                       		beq.s	@islevel
0000097E 0C38 0000 F600             		cmpi.b	#id_Level,(v_gamemode).w ; is game on a level?
00000984 6600 FFC6                  		bne.w	VBla_Music	; if not, branch
00000988                            
00000988                            	@islevel:
00000988 0C38 0001 FE10             		cmpi.b	#id_LZ,(v_zone).w ; is level LZ ?
0000098E 6600 FFBC                  		bne.w	VBla_Music	; if not, branch
00000992                            
00000992 3039 00C0 0004             		move.w	(vdp_control_port).l,d0
00000998 0838 0006 FFF8             		btst	#6,(v_megadrive).w ; is Megadrive PAL?
0000099E 6700                       		beq.s	@notPAL		; if not, branch
000009A0                            
000009A0 303C 0700                  		move.w	#$700,d0
000009A4                            	@waitPAL:
000009A4 51C8 FFFE                  		dbf	d0,@waitPAL
000009A8                            
000009A8                            	@notPAL:
000009A8 31FC 0001 F644             		move.w	#1,(f_hbla_pal).w ; set HBlank flag
000009AE 33FC 0100 00A1 1100        		stopZ80
000009B6 0839 0000 00A1 1100 66F6   		waitZ80
000009C0 4A38 F64E                  		tst.b	(f_wtr_state).w	; is water above top of screen?
000009C4 6600                       		bne.s	@waterabove 	; if yes, branch
000009C6                            
000009C6 4BF9 00C0 0004 2ABC 9400+  		writeCRAM	v_pal_dry,$80,0
000009EA 6000                       		bra.s	@waterbelow
000009EC                            
000009EC                            @waterabove:
000009EC 4BF9 00C0 0004 2ABC 9400+  		writeCRAM	v_pal_water,$80,0
00000A10                            
00000A10                            	@waterbelow:
00000A10 3AB8 F624                  		move.w	(v_hbla_hreg).w,(a5)
00000A14 33FC 0000 00A1 1100        		startZ80
00000A1C 6000 FF2E                  		bra.w	VBla_Music
00000A20                            ; ===========================================================================
00000A20                            
00000A20                            VBla_02:
00000A20 6100 0000                  		bsr.w	sub_106E
00000A24                            
00000A24                            VBla_14:
00000A24 4A78 F614                  		tst.w	(v_demolength).w
00000A28 6700 0000                  		beq.w	@end
00000A2C 5378 F614                  		subq.w	#1,(v_demolength).w
00000A30                            
00000A30                            	@end:
00000A30 4E75                       		rts	
00000A32                            ; ===========================================================================
00000A32                            
00000A32                            VBla_04:
00000A32 6100 0000                  		bsr.w	sub_106E
00000A36 6100 0000                  		bsr.w	LoadTilesAsYouMove_BGOnly
00000A3A 6100 0000                  		bsr.w	sub_1642
00000A3E 4A78 F614                  		tst.w	(v_demolength).w
00000A42 6700 0000                  		beq.w	@end
00000A46 5378 F614                  		subq.w	#1,(v_demolength).w
00000A4A                            
00000A4A                            	@end:
00000A4A 4E75                       		rts	
00000A4C                            ; ===========================================================================
00000A4C                            
00000A4C                            VBla_06:
00000A4C 6100 0000                  		bsr.w	sub_106E
00000A50 4E75                       		rts	
00000A52                            ; ===========================================================================
00000A52                            
00000A52                            VBla_10:
00000A52 0C38 0000 F600             		cmpi.b	#id_Special,(v_gamemode).w ; is game on special stage?
00000A58 6700 0000                  		beq.w	VBla_0A		; if yes, branch
00000A5C                            
00000A5C                            VBla_08:
00000A5C 33FC 0100 00A1 1100        		stopZ80
00000A64 0839 0000 00A1 1100 66F6   		waitZ80
00000A6E 6100 0000                  		bsr.w	ReadJoypads
00000A72 4A38 F64E                  		tst.b	(f_wtr_state).w
00000A76 6600                       		bne.s	@waterabove
00000A78                            
00000A78 4BF9 00C0 0004 2ABC 9400+  		writeCRAM	v_pal_dry,$80,0
00000A9C 6000                       		bra.s	@waterbelow
00000A9E                            
00000A9E                            @waterabove:
00000A9E 4BF9 00C0 0004 2ABC 9400+  		writeCRAM	v_pal_water,$80,0
00000AC2                            
00000AC2                            	@waterbelow:
00000AC2 3AB8 F624                  		move.w	(v_hbla_hreg).w,(a5)
00000AC6                            
00000AC6 4BF9 00C0 0004 2ABC 9401+  		writeVRAM	v_hscrolltablebuffer,$380,vram_hscroll
00000AEA 4BF9 00C0 0004 2ABC 9401+  		writeVRAM	v_spritetablebuffer,$280,vram_sprites
00000B0E 4A38 F767                  		tst.b	(f_sonframechg).w ; has Sonic's sprite changed?
00000B12 6700                       		beq.s	@nochg		; if not, branch
00000B14                            
00000B14 4BF9 00C0 0004 2ABC 9401+  		writeVRAM	v_sgfx_buffer,$2E0,vram_sonic ; load new Sonic gfx
00000B38 11FC 0000 F767             		move.b	#0,(f_sonframechg).w
00000B3E                            
00000B3E                            	@nochg:
00000B3E 33FC 0000 00A1 1100        		startZ80
00000B46 4CF8 00FF F700             		movem.l	(v_screenposx).w,d0-d7
00000B4C 48F8 00FF FF10             		movem.l	d0-d7,(v_screenposx_dup).w
00000B52 4CF8 0003 F754             		movem.l	(v_fg_scroll_flags).w,d0-d1
00000B58 48F8 0003 FF30             		movem.l	d0-d1,(v_fg_scroll_flags_dup).w
00000B5E 0C38 0060 F625             		cmpi.b	#96,(v_hbla_line).w
00000B64 6400                       		bhs.s	Demo_Time
00000B66 11FC 0001 F64F             		move.b	#1,($FFFFF64F).w
00000B6C 588F                       		addq.l	#4,sp
00000B6E 6000 FDE2                  		bra.w	VBla_Exit
00000B72                            
00000B72                            ; ---------------------------------------------------------------------------
00000B72                            ; Subroutine to	run a demo for an amount of time
00000B72                            ; ---------------------------------------------------------------------------
00000B72                            
00000B72                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00000B72                            
00000B72                            
00000B72                            Demo_Time:
00000B72 6100 0000                  		bsr.w	LoadTilesAsYouMove
00000B76 4EB9 0000 0000             		jsr	(AnimateLevelGfx).l
00000B7C 4EB9 0000 0000             		jsr	(HUD_Update).l
00000B82 6100 0000                  		bsr.w	ProcessDPLC2
00000B86 4A78 F614                  		tst.w	(v_demolength).w ; is there time left on the demo?
00000B8A 6700 0000                  		beq.w	@end		; if not, branch
00000B8E 5378 F614                  		subq.w	#1,(v_demolength).w ; subtract 1 from time left
00000B92                            
00000B92                            	@end:
00000B92 4E75                       		rts	
00000B94                            ; End of function Demo_Time
00000B94                            
00000B94                            ; ===========================================================================
00000B94                            
00000B94                            VBla_0A:
00000B94 33FC 0100 00A1 1100        		stopZ80
00000B9C 0839 0000 00A1 1100 66F6   		waitZ80
00000BA6 6100 0000                  		bsr.w	ReadJoypads
00000BAA 4BF9 00C0 0004 2ABC 9400+  		writeCRAM	v_pal_dry,$80,0
00000BCE 4BF9 00C0 0004 2ABC 9401+  		writeVRAM	v_spritetablebuffer,$280,vram_sprites
00000BF2 4BF9 00C0 0004 2ABC 9401+  		writeVRAM	v_hscrolltablebuffer,$380,vram_hscroll
00000C16 33FC 0000 00A1 1100        		startZ80
00000C1E 6100 0000                  		bsr.w	PalCycle_SS
00000C22 4A38 F767                  		tst.b	(f_sonframechg).w ; has Sonic's sprite changed?
00000C26 6700                       		beq.s	@nochg		; if not, branch
00000C28                            
00000C28 4BF9 00C0 0004 2ABC 9401+  		writeVRAM	v_sgfx_buffer,$2E0,vram_sonic ; load new Sonic gfx
00000C4C 11FC 0000 F767             		move.b	#0,(f_sonframechg).w
00000C52                            
00000C52                            	@nochg:
00000C52 4A78 F614                  		tst.w	(v_demolength).w	; is there time left on the demo?
00000C56 6700 0000                  		beq.w	@end	; if not, return
00000C5A 5378 F614                  		subq.w	#1,(v_demolength).w	; subtract 1 from time left in demo
00000C5E                            
00000C5E                            	@end:
00000C5E 4E75                       		rts	
00000C60                            ; ===========================================================================
00000C60                            
00000C60                            VBla_0C:
00000C60 33FC 0100 00A1 1100        		stopZ80
00000C68 0839 0000 00A1 1100 66F6   		waitZ80
00000C72 6100 0000                  		bsr.w	ReadJoypads
00000C76 4A38 F64E                  		tst.b	(f_wtr_state).w
00000C7A 6600                       		bne.s	@waterabove
00000C7C                            
00000C7C 4BF9 00C0 0004 2ABC 9400+  		writeCRAM	v_pal_dry,$80,0
00000CA0 6000                       		bra.s	@waterbelow
00000CA2                            
00000CA2                            @waterabove:
00000CA2 4BF9 00C0 0004 2ABC 9400+  		writeCRAM	v_pal_water,$80,0
00000CC6                            
00000CC6                            	@waterbelow:
00000CC6 3AB8 F624                  		move.w	(v_hbla_hreg).w,(a5)
00000CCA 4BF9 00C0 0004 2ABC 9401+  		writeVRAM	v_hscrolltablebuffer,$380,vram_hscroll
00000CEE 4BF9 00C0 0004 2ABC 9401+  		writeVRAM	v_spritetablebuffer,$280,vram_sprites
00000D12 4A38 F767                  		tst.b	(f_sonframechg).w
00000D16 6700                       		beq.s	@nochg
00000D18 4BF9 00C0 0004 2ABC 9401+  		writeVRAM	v_sgfx_buffer,$2E0,vram_sonic
00000D3C 11FC 0000 F767             		move.b	#0,(f_sonframechg).w
00000D42                            
00000D42                            	@nochg:
00000D42 33FC 0000 00A1 1100        		startZ80
00000D4A 4CF8 00FF F700             		movem.l	(v_screenposx).w,d0-d7
00000D50 48F8 00FF FF10             		movem.l	d0-d7,(v_screenposx_dup).w
00000D56 4CF8 0003 F754             		movem.l	(v_fg_scroll_flags).w,d0-d1
00000D5C 48F8 0003 FF30             		movem.l	d0-d1,(v_fg_scroll_flags_dup).w
00000D62 6100 0000                  		bsr.w	LoadTilesAsYouMove
00000D66 4EB9 0000 0000             		jsr	(AnimateLevelGfx).l
00000D6C 4EB9 0000 0000             		jsr	(HUD_Update).l
00000D72 6100 0000                  		bsr.w	sub_1642
00000D76 4E75                       		rts	
00000D78                            ; ===========================================================================
00000D78                            
00000D78                            VBla_0E:
00000D78 6100 0000                  		bsr.w	sub_106E
00000D7C 5238 F628                  		addq.b	#1,($FFFFF628).w
00000D80 11FC 000E F62A             		move.b	#$E,(v_vbla_routine).w
00000D86 4E75                       		rts	
00000D88                            ; ===========================================================================
00000D88                            
00000D88                            VBla_12:
00000D88 6100 0000                  		bsr.w	sub_106E
00000D8C 3AB8 F624                  		move.w	(v_hbla_hreg).w,(a5)
00000D90 6000 0000                  		bra.w	sub_1642
00000D94                            ; ===========================================================================
00000D94                            
00000D94                            VBla_16:
00000D94 33FC 0100 00A1 1100        		stopZ80
00000D9C 0839 0000 00A1 1100 66F6   		waitZ80
00000DA6 6100 0000                  		bsr.w	ReadJoypads
00000DAA 4BF9 00C0 0004 2ABC 9400+  		writeCRAM	v_pal_dry,$80,0
00000DCE 4BF9 00C0 0004 2ABC 9401+  		writeVRAM	v_spritetablebuffer,$280,vram_sprites
00000DF2 4BF9 00C0 0004 2ABC 9401+  		writeVRAM	v_hscrolltablebuffer,$380,vram_hscroll
00000E16 33FC 0000 00A1 1100        		startZ80
00000E1E 4A38 F767                  		tst.b	(f_sonframechg).w
00000E22 6700                       		beq.s	@nochg
00000E24 4BF9 00C0 0004 2ABC 9401+  		writeVRAM	v_sgfx_buffer,$2E0,vram_sonic
00000E48 11FC 0000 F767             		move.b	#0,(f_sonframechg).w
00000E4E                            
00000E4E                            	@nochg:
00000E4E 4A78 F614                  		tst.w	(v_demolength).w
00000E52 6700 0000                  		beq.w	@end
00000E56 5378 F614                  		subq.w	#1,(v_demolength).w
00000E5A                            
00000E5A                            	@end:
00000E5A 4E75                       		rts	
00000E5C                            
00000E5C                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00000E5C                            
00000E5C                            
00000E5C                            sub_106E:
00000E5C 33FC 0100 00A1 1100        		stopZ80
00000E64 0839 0000 00A1 1100 66F6   		waitZ80
00000E6E 6100 0000                  		bsr.w	ReadJoypads
00000E72 4A38 F64E                  		tst.b	(f_wtr_state).w ; is water above top of screen?
00000E76 6600                       		bne.s	@waterabove	; if yes, branch
00000E78 4BF9 00C0 0004 2ABC 9400+  		writeCRAM	v_pal_dry,$80,0
00000E9C 6000                       		bra.s	@waterbelow
00000E9E                            
00000E9E                            	@waterabove:
00000E9E 4BF9 00C0 0004 2ABC 9400+  		writeCRAM	v_pal_water,$80,0
00000EC2                            
00000EC2                            	@waterbelow:
00000EC2 4BF9 00C0 0004 2ABC 9401+  		writeVRAM	v_spritetablebuffer,$280,vram_sprites
00000EE6 4BF9 00C0 0004 2ABC 9401+  		writeVRAM	v_hscrolltablebuffer,$380,vram_hscroll
00000F0A 33FC 0000 00A1 1100        		startZ80
00000F12 4E75                       		rts	
00000F14                            ; End of function sub_106E
00000F14                            
00000F14                            ; ---------------------------------------------------------------------------
00000F14                            ; Horizontal interrupt
00000F14                            ; ---------------------------------------------------------------------------
00000F14                            
00000F14                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00000F14                            
00000F14                            
00000F14                            HBlank:
00000F14 46FC 2700                  		disable_ints
00000F18 4A78 F644                  		tst.w	(f_hbla_pal).w	; is palette set to change?
00000F1C 6700                       		beq.s	@nochg		; if not, branch
00000F1E 31FC 0000 F644             		move.w	#0,(f_hbla_pal).w
00000F24 48E7 00C0                  		movem.l	a0-a1,-(sp)
00000F28 43F9 00C0 0000             		lea	(vdp_data_port).l,a1
00000F2E 41F8 FA80                  		lea	(v_pal_water).w,a0 ; get palette from RAM
00000F32 237C C000 0000 0004        		move.l	#$C0000000,4(a1) ; set VDP to CRAM write
00000F3A 2298                       		move.l	(a0)+,(a1)	; move palette to CRAM
00000F3C 2298                       		move.l	(a0)+,(a1)
00000F3E 2298                       		move.l	(a0)+,(a1)
00000F40 2298                       		move.l	(a0)+,(a1)
00000F42 2298                       		move.l	(a0)+,(a1)
00000F44 2298                       		move.l	(a0)+,(a1)
00000F46 2298                       		move.l	(a0)+,(a1)
00000F48 2298                       		move.l	(a0)+,(a1)
00000F4A 2298                       		move.l	(a0)+,(a1)
00000F4C 2298                       		move.l	(a0)+,(a1)
00000F4E 2298                       		move.l	(a0)+,(a1)
00000F50 2298                       		move.l	(a0)+,(a1)
00000F52 2298                       		move.l	(a0)+,(a1)
00000F54 2298                       		move.l	(a0)+,(a1)
00000F56 2298                       		move.l	(a0)+,(a1)
00000F58 2298                       		move.l	(a0)+,(a1)
00000F5A 2298                       		move.l	(a0)+,(a1)
00000F5C 2298                       		move.l	(a0)+,(a1)
00000F5E 2298                       		move.l	(a0)+,(a1)
00000F60 2298                       		move.l	(a0)+,(a1)
00000F62 2298                       		move.l	(a0)+,(a1)
00000F64 2298                       		move.l	(a0)+,(a1)
00000F66 2298                       		move.l	(a0)+,(a1)
00000F68 2298                       		move.l	(a0)+,(a1)
00000F6A 2298                       		move.l	(a0)+,(a1)
00000F6C 2298                       		move.l	(a0)+,(a1)
00000F6E 2298                       		move.l	(a0)+,(a1)
00000F70 2298                       		move.l	(a0)+,(a1)
00000F72 2298                       		move.l	(a0)+,(a1)
00000F74 2298                       		move.l	(a0)+,(a1)
00000F76 2298                       		move.l	(a0)+,(a1)
00000F78 2298                       		move.l	(a0)+,(a1)
00000F7A 337C 8ADF 0004             		move.w	#$8A00+223,4(a1) ; reset HBlank register
00000F80 4CDF 0300                  		movem.l	(sp)+,a0-a1
00000F84 4A38 F64F                  		tst.b	($FFFFF64F).w
00000F88 6600                       		bne.s	loc_119E
00000F8A                            
00000F8A                            	@nochg:
00000F8A 4E73                       		rte	
00000F8C                            ; ===========================================================================
00000F8C                            
00000F8C                            loc_119E:
00000F8C 4238 F64F                  		clr.b	($FFFFF64F).w
00000F90 48E7 FFFE                  		movem.l	d0-a6,-(sp)
00000F94 6100 FBDC                  		bsr.w	Demo_Time
00000F98 4EB9 0000 0000             		jsr	(UpdateMusic).l
00000F9E 4CDF 7FFF                  		movem.l	(sp)+,d0-a6
00000FA2 4E73                       		rte	
00000FA4                            ; End of function HBlank
00000FA4                            
00000FA4                            ; ---------------------------------------------------------------------------
00000FA4                            ; Subroutine to	initialise joypads
00000FA4                            ; ---------------------------------------------------------------------------
00000FA4                            
00000FA4                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00000FA4                            
00000FA4                            
00000FA4                            JoypadInit:
00000FA4 33FC 0100 00A1 1100        		stopZ80
00000FAC 0839 0000 00A1 1100 66F6   		waitZ80
00000FB6 7040                       		moveq	#$40,d0
00000FB8 13C0 00A1 0009             		move.b	d0,($A10009).l	; init port 1 (joypad 1)
00000FBE 13C0 00A1 000B             		move.b	d0,($A1000B).l	; init port 2 (joypad 2)
00000FC4 13C0 00A1 000D             		move.b	d0,($A1000D).l	; init port 3 (expansion/extra)
00000FCA 33FC 0000 00A1 1100        		startZ80
00000FD2 4E75                       		rts	
00000FD4                            ; End of function JoypadInit
00000FD4                            
00000FD4                            ; ---------------------------------------------------------------------------
00000FD4                            ; Subroutine to	read joypad input, and send it to the RAM
00000FD4                            ; ---------------------------------------------------------------------------
00000FD4                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00000FD4                            
00000FD4                            
00000FD4                            ReadJoypads:
00000FD4 41F8 F604                  		lea	(v_jpadhold1).w,a0 ; address where joypad states are written
00000FD8 43F9 00A1 0003             		lea	($A10003).l,a1	; first	joypad port
00000FDE 6100                       		bsr.s	@read		; do the first joypad
00000FE0 5449                       		addq.w	#2,a1		; do the second	joypad
00000FE2                            
00000FE2                            	@read:
00000FE2 12BC 0000                  		move.b	#0,(a1)
00000FE6 4E71                       		nop	
00000FE8 4E71                       		nop	
00000FEA 1011                       		move.b	(a1),d0
00000FEC E508                       		lsl.b	#2,d0
00000FEE 0200 00C0                  		andi.b	#$C0,d0
00000FF2 12BC 0040                  		move.b	#$40,(a1)
00000FF6 4E71                       		nop	
00000FF8 4E71                       		nop	
00000FFA 1211                       		move.b	(a1),d1
00000FFC 0201 003F                  		andi.b	#$3F,d1
00001000 8001                       		or.b	d1,d0
00001002 4600                       		not.b	d0
00001004 1210                       		move.b	(a0),d1
00001006 B101                       		eor.b	d0,d1
00001008 10C0                       		move.b	d0,(a0)+
0000100A C200                       		and.b	d0,d1
0000100C 10C1                       		move.b	d1,(a0)+
0000100E 4E75                       		rts	
00001010                            ; End of function ReadJoypads
00001010                            
00001010                            
00001010                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001010                            
00001010                            
00001010                            VDPSetupGame:
00001010 41F9 00C0 0004             		lea	(vdp_control_port).l,a0
00001016 43F9 00C0 0000             		lea	(vdp_data_port).l,a1
0000101C 45F9 0000 0000             		lea	(VDPSetupArray).l,a2
00001022 7E12                       		moveq	#$12,d7
00001024                            
00001024                            	@setreg:
00001024 309A                       		move.w	(a2)+,(a0)
00001026 51CF FFFC                  		dbf	d7,@setreg	; set the VDP registers
0000102A                            
0000102A 3039 0000 0000             		move.w	(VDPSetupArray+2).l,d0
00001030 31C0 F60C                  		move.w	d0,(v_vdp_buffer1).w
00001034 31FC 8ADF F624             		move.w	#$8A00+223,(v_hbla_hreg).w	; H-INT every 224th scanline
0000103A 7000                       		moveq	#0,d0
0000103C 23FC C000 0000 00C0 0004   		move.l	#$C0000000,(vdp_control_port).l ; set VDP to CRAM write
00001046 3E3C 003F                  		move.w	#$3F,d7
0000104A                            
0000104A                            	@clrCRAM:
0000104A 3280                       		move.w	d0,(a1)
0000104C 51CF FFFC                  		dbf	d7,@clrCRAM	; clear	the CRAM
00001050                            
00001050 42B8 F616                  		clr.l	(v_scrposy_dup).w
00001054 42B8 F61A                  		clr.l	(v_scrposx_dup).w
00001058 2F01                       		move.l	d1,-(sp)
0000105A 4BF9 00C0 0004 3ABC 8F01+  		fillVRAM	0,$FFFF,0
0000107C                            
0000107C                            	@waitforDMA:
0000107C 3215                       		move.w	(a5),d1
0000107E 0801 0001                  		btst	#1,d1		; is DMA (fillVRAM) still running?
00001082 66F8                       		bne.s	@waitforDMA	; if yes, branch
00001084                            
00001084 3ABC 8F02                  		move.w	#$8F02,(a5)	; set VDP increment size
00001088 221F                       		move.l	(sp)+,d1
0000108A 4E75                       		rts	
0000108C                            ; End of function VDPSetupGame
0000108C                            
0000108C                            ; ===========================================================================
0000108C 8004                       VDPSetupArray:	dc.w $8004		; 8-colour mode
0000108E 8134                       		dc.w $8134		; enable V.interrupts, enable DMA
00001090 8230                       		dc.w $8200+(vram_fg>>10) ; set foreground nametable address
00001092 8328                       		dc.w $8300+($A000>>10)	; set window nametable address
00001094 8407                       		dc.w $8400+(vram_bg>>13) ; set background nametable address
00001096 857C                       		dc.w $8500+(vram_sprites>>9) ; set sprite table address
00001098 8600                       		dc.w $8600		; unused
0000109A 8700                       		dc.w $8700		; set background colour (palette entry 0)
0000109C 8800                       		dc.w $8800		; unused
0000109E 8900                       		dc.w $8900		; unused
000010A0 8A00                       		dc.w $8A00		; default H.interrupt register
000010A2 8B00                       		dc.w $8B00		; full-screen vertical scrolling
000010A4 8C81                       		dc.w $8C81		; 40-cell display mode
000010A6 8D3F                       		dc.w $8D00+(vram_hscroll>>10) ; set background hscroll address
000010A8 8E00                       		dc.w $8E00		; unused
000010AA 8F02                       		dc.w $8F02		; set VDP increment size
000010AC 9001                       		dc.w $9001		; 64-cell hscroll size
000010AE 9100                       		dc.w $9100		; window horizontal position
000010B0 9200                       		dc.w $9200		; window vertical position
000010B2                            
000010B2                            ; ---------------------------------------------------------------------------
000010B2                            ; Subroutine to	clear the screen
000010B2                            ; ---------------------------------------------------------------------------
000010B2                            
000010B2                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000010B2                            
000010B2                            
000010B2                            ClearScreen:
000010B2 4BF9 00C0 0004 3ABC 8F01+  		fillVRAM	0,$FFF,vram_fg ; clear foreground namespace
000010D4                            
000010D4                            	@wait1:
000010D4 3215                       		move.w	(a5),d1
000010D6 0801 0001                  		btst	#1,d1
000010DA 66F8                       		bne.s	@wait1
000010DC                            
000010DC 3ABC 8F02                  		move.w	#$8F02,(a5)
000010E0 4BF9 00C0 0004 3ABC 8F01+  		fillVRAM	0,$FFF,vram_bg ; clear background namespace
00001102                            
00001102                            	@wait2:
00001102 3215                       		move.w	(a5),d1
00001104 0801 0001                  		btst	#1,d1
00001108 66F8                       		bne.s	@wait2
0000110A                            
0000110A 3ABC 8F02                  		move.w	#$8F02,(a5)
0000110E 21FC 0000 0000 F616        		move.l	#0,(v_scrposy_dup).w
00001116 21FC 0000 0000 F61A        		move.l	#0,(v_scrposx_dup).w
0000111E                            
0000111E 43F8 F800                  		lea	(v_spritetablebuffer).w,a1
00001122 7000                       		moveq	#0,d0
00001124 323C 00A0                  		move.w	#($280/4),d1	; This should be ($280/4)-1, leading to a slight bug (first bit of v_pal_water is cleared)
00001128                            
00001128                            	@clearsprites:
00001128 22C0                       		move.l	d0,(a1)+
0000112A 51C9 FFFC                  		dbf	d1,@clearsprites ; clear sprite table (in RAM)
0000112E                            
0000112E 43F8 CC00                  		lea	(v_hscrolltablebuffer).w,a1
00001132 7000                       		moveq	#0,d0
00001134 323C 0100                  		move.w	#($400/4),d1	; This should be ($400/4)-1, leading to a slight bug (first bit of the Sonic object's RAM is cleared)
00001138                            
00001138                            	@clearhscroll:
00001138 22C0                       		move.l	d0,(a1)+
0000113A 51C9 FFFC                  		dbf	d1,@clearhscroll ; clear hscroll table (in RAM)
0000113E 4E75                       		rts	
00001140                            ; End of function ClearScreen
00001140                            
00001140                            ; ---------------------------------------------------------------------------
00001140                            ; Subroutine to	load the sound driver
00001140                            ; ---------------------------------------------------------------------------
00001140                            
00001140                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001140                            
00001140                            
00001140                            SoundDriverLoad:
00001140 4E71                       		nop	
00001142 33FC 0100 00A1 1100        		stopZ80
0000114A 33FC 0100 00A1 1200        		resetZ80
00001152 41F9 0000 0000             		lea	(Kos_Z80).l,a0	; load sound driver
00001158 43F9 00A0 0000             		lea	(z80_ram).l,a1	; target Z80 RAM
0000115E 6100 0000                  		bsr.w	KosDec		; decompress
00001162 33FC 0000 00A1 1200        		resetZ80a
0000116A 4E71                       		nop	
0000116C 4E71                       		nop	
0000116E 4E71                       		nop	
00001170 4E71                       		nop	
00001172 33FC 0100 00A1 1200        		resetZ80
0000117A 33FC 0000 00A1 1100        		startZ80
00001182 4E75                       		rts	
00001184                            ; End of function SoundDriverLoad
00001184                            
00001184                            		include	"_incObj\sub PlaySound.asm"
00001184                            ; ---------------------------------------------------------------------------
00001184                            ; Subroutine to	play a music track
00001184                            
00001184                            ; input:
00001184                            ;	d0 = track to play
00001184                            ; ---------------------------------------------------------------------------
00001184                            
00001184                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001184                            
00001184                            
00001184                            PlaySound:
00001184 11C0 F00A                  		move.b	d0,(v_snddriver_ram+v_soundqueue0).w
00001188 4E75                       		rts	
0000118A                            ; End of function PlaySound
0000118A                            
0000118A                            ; ---------------------------------------------------------------------------
0000118A                            ; Subroutine to	play a sound effect
0000118A                            ; ---------------------------------------------------------------------------
0000118A                            
0000118A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000118A                            
0000118A                            
0000118A                            PlaySound_Special:
0000118A 11C0 F00B                  		move.b	d0,(v_snddriver_ram+v_soundqueue1).w
0000118E 4E75                       		rts	
00001190                            ; End of function PlaySound_Special
00001190                            
00001190                            ; ===========================================================================
00001190                            ; ---------------------------------------------------------------------------
00001190                            ; Unused sound/music subroutine
00001190                            ; ---------------------------------------------------------------------------
00001190                            
00001190                            PlaySound_Unused:
00001190 11C0 F00C                  		move.b	d0,(v_snddriver_ram+v_soundqueue2).w
00001194 4E75                       		rts	
00001194 4E75                       		rts	
00001196                            		include	"_inc\PauseGame.asm"
00001196                            ; ---------------------------------------------------------------------------
00001196                            ; Subroutine to	pause the game
00001196                            ; ---------------------------------------------------------------------------
00001196                            
00001196                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001196                            
00001196                            
00001196                            PauseGame:
00001196 4E71                       		nop	
00001198 4A38 FE12                  		tst.b	(v_lives).w	; do you have any lives	left?
0000119C 6700                       		beq.s	Unpause		; if not, branch
0000119E 4A78 F63A                  		tst.w	(f_pause).w	; is game already paused?
000011A2 6600                       		bne.s	Pause_StopGame	; if yes, branch
000011A4 0838 0007 F605             		btst	#bitStart,(v_jpadpress1).w ; is Start button pressed?
000011AA 6700                       		beq.s	Pause_DoNothing	; if not, branch
000011AC                            
000011AC                            Pause_StopGame:
000011AC 31FC 0001 F63A             		move.w	#1,(f_pause).w	; freeze time
000011B2 11FC 0001 F003             		move.b	#1,(v_snddriver_ram+f_pausemusic).w ; pause music
000011B8                            
000011B8                            Pause_Loop:
000011B8 11FC 0010 F62A             		move.b	#$10,(v_vbla_routine).w
000011BE 6100 0000                  		bsr.w	WaitForVBla
000011C2 4A38 FFE1                  		tst.b	(f_slomocheat).w ; is slow-motion cheat on?
000011C6 6700                       		beq.s	Pause_ChkStart	; if not, branch
000011C8 0838 0006 F605             		btst	#bitA,(v_jpadpress1).w ; is button A pressed?
000011CE 6700                       		beq.s	Pause_ChkBC	; if not, branch
000011D0 11FC 0000 F600             		move.b	#id_Title,(v_gamemode).w ; set game mode to 4 (title screen)
000011D6 4E71                       		nop	
000011D8 6000                       		bra.s	Pause_EndMusic
000011DA                            ; ===========================================================================
000011DA                            
000011DA                            Pause_ChkBC:
000011DA 0838 0004 F604             		btst	#bitB,(v_jpadhold1).w ; is button B pressed?
000011E0 6600                       		bne.s	Pause_SlowMo	; if yes, branch
000011E2 0838 0005 F605             		btst	#bitC,(v_jpadpress1).w ; is button C pressed?
000011E8 6600                       		bne.s	Pause_SlowMo	; if yes, branch
000011EA                            
000011EA                            Pause_ChkStart:
000011EA 0838 0007 F605             		btst	#bitStart,(v_jpadpress1).w ; is Start button pressed?
000011F0 67C6                       		beq.s	Pause_Loop	; if not, branch
000011F2                            
000011F2                            Pause_EndMusic:
000011F2 11FC 0080 F003             		move.b	#$80,(v_snddriver_ram+f_pausemusic).w	; unpause the music
000011F8                            
000011F8                            Unpause:
000011F8 31FC 0000 F63A             		move.w	#0,(f_pause).w	; unpause the game
000011FE                            
000011FE                            Pause_DoNothing:
000011FE 4E75                       		rts	
00001200                            ; ===========================================================================
00001200                            
00001200                            Pause_SlowMo:
00001200 31FC 0001 F63A             		move.w	#1,(f_pause).w
00001206 11FC 0080 F003             		move.b	#$80,(v_snddriver_ram+f_pausemusic).w	; Unpause the music
0000120C 4E75                       		rts	
0000120E                            ; End of function PauseGame
0000120E                            ; End of function PauseGame
0000120E                            
0000120E                            ; ---------------------------------------------------------------------------
0000120E                            ; Subroutine to	copy a tile map from RAM to VRAM namespace
0000120E                            
0000120E                            ; input:
0000120E                            ;	a1 = tile map address
0000120E                            ;	d0 = VRAM address
0000120E                            ;	d1 = width (cells)
0000120E                            ;	d2 = height (cells)
0000120E                            ; ---------------------------------------------------------------------------
0000120E                            
0000120E                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000120E                            
0000120E                            
0000120E                            TilemapToVRAM:
0000120E 4DF9 00C0 0000             		lea	(vdp_data_port).l,a6
00001214 283C 0080 0000             		move.l	#$800000,d4
0000121A                            
0000121A                            	Tilemap_Line:
0000121A 2D40 0004                  		move.l	d0,4(a6)	; move d0 to VDP_control_port
0000121E 3601                       		move.w	d1,d3
00001220                            
00001220                            	Tilemap_Cell:
00001220 3C99                       		move.w	(a1)+,(a6)	; write value to namespace
00001222 51CB FFFC                  		dbf	d3,Tilemap_Cell	; next tile
00001226 D084                       		add.l	d4,d0		; goto next line
00001228 51CA FFF0                  		dbf	d2,Tilemap_Line	; next line
0000122C 4E75                       		rts	
0000122E                            ; End of function TilemapToVRAM
0000122E                            
0000122E                            		include	"_inc\Nemesis Decompression.asm"
0000122E                            ; ---------------------------------------------------------------------------
0000122E                            ; Nemesis decompression	subroutine, decompresses art directly to VRAM
0000122E                            ; Inputs:
0000122E                            ; a0 = art address
0000122E                            
0000122E                            ; For format explanation see http://info.sonicretro.org/Nemesis_compression
0000122E                            ; ---------------------------------------------------------------------------
0000122E                            
0000122E                            ; ||||||||||||||| S U B R O U T I N E |||||||||||||||||||||||||||||||||||||||
0000122E                            
0000122E                            ; Nemesis decompression to VRAM
0000122E                            NemDec:
0000122E 48E7 FFDC                  		movem.l	d0-a1/a3-a5,-(sp)
00001232 47F9 0000 0000             		lea	(NemPCD_WriteRowToVDP).l,a3	; write all data to the same location
00001238 49F9 00C0 0000             		lea	(vdp_data_port).l,a4	; specifically, to the VDP data port
0000123E 6000                       		bra.s	NemDecMain
00001240                            
00001240                            ; ||||||||||||||| S U B R O U T I N E |||||||||||||||||||||||||||||||||||||||
00001240                            
00001240                            ; Nemesis decompression subroutine, decompresses art to RAM
00001240                            ; Inputs:
00001240                            ; a0 = art address
00001240                            ; a4 = destination RAM address
00001240                            NemDecToRAM:
00001240 48E7 FFDC                  		movem.l	d0-a1/a3-a5,-(sp)
00001244 47F9 0000 0000             		lea	(NemPCD_WriteRowToRAM).l,a3 ; advance to the next location after each write
0000124A                            
0000124A                            NemDecMain:
0000124A 43F8 AA00                  		lea	(v_ngfx_buffer).w,a1
0000124E 3418                       		move.w	(a0)+,d2	; get number of patterns
00001250 E34A                       		lsl.w	#1,d2
00001252 6400                       		bcc.s	loc_146A	; branch if the sign bit isn't set
00001254 D6FC 0000                  		adda.w	#NemPCD_WriteRowToVDP_XOR-NemPCD_WriteRowToVDP,a3	; otherwise the file uses XOR mode
00001258                            
00001258                            loc_146A:
00001258 E54A                       		lsl.w	#2,d2	; get number of 8-pixel rows in the uncompressed data
0000125A 3A42                       		movea.w	d2,a5	; and store it in a5 because there aren't any spare data registers
0000125C 7608                       		moveq	#8,d3	; 8 pixels in a pattern row
0000125E 7400                       		moveq	#0,d2
00001260 7800                       		moveq	#0,d4
00001262 6100 0000                  		bsr.w	NemDec_BuildCodeTable
00001266 1A18                       		move.b	(a0)+,d5	; get first byte of compressed data
00001268 E145                       		asl.w	#8,d5	; shift up by a byte
0000126A 1A18                       		move.b	(a0)+,d5	; get second byte of compressed data
0000126C 3C3C 0010                  		move.w	#$10,d6	; set initial shift value
00001270 6100                       		bsr.s	NemDec_ProcessCompressedData
00001272 4CDF 3BFF                  		movem.l	(sp)+,d0-a1/a3-a5
00001276 4E75                       		rts	
00001278                            ; End of function NemDec
00001278                            
00001278                            ; ---------------------------------------------------------------------------
00001278                            ; Part of the Nemesis decompressor, processes the actual compressed data
00001278                            ; ---------------------------------------------------------------------------
00001278                            
00001278                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001278                            
00001278                            
00001278                            NemDec_ProcessCompressedData:
00001278 3E06                       		move.w	d6,d7
0000127A 5147                       		subq.w	#8,d7	; get shift value
0000127C 3205                       		move.w	d5,d1
0000127E EE69                       		lsr.w	d7,d1	; shift so that high bit of the code is in bit position 7
00001280 0C01 00FC                  		cmpi.b	#%11111100,d1	; are the high 6 bits set?
00001284 6400                       		bcc.s	NemPCD_InlineData	; if they are, it signifies inline data
00001286 0241 00FF                  		andi.w	#$FF,d1
0000128A D241                       		add.w	d1,d1
0000128C 1031 1000                  		move.b	(a1,d1.w),d0	; get the length of the code in bits
00001290 4880                       		ext.w	d0
00001292 9C40                       		sub.w	d0,d6	; subtract from shift value so that the next code is read next time around
00001294 0C46 0009                  		cmpi.w	#9,d6	; does a new byte need to be read?
00001298 6400                       		bcc.s	loc_14B2	; if not, branch
0000129A 5046                       		addq.w	#8,d6
0000129C E145                       		asl.w	#8,d5
0000129E 1A18                       		move.b	(a0)+,d5	; read next byte
000012A0                            
000012A0                            loc_14B2:
000012A0 1231 1001                  		move.b	1(a1,d1.w),d1
000012A4 3001                       		move.w	d1,d0
000012A6 0241 000F                  		andi.w	#$F,d1	; get palette index for pixel
000012AA 0240 00F0                  		andi.w	#$F0,d0
000012AE                            
000012AE                            NemPCD_ProcessCompressedData:
000012AE E848                       		lsr.w	#4,d0	; get repeat count
000012B0                            
000012B0                            NemPCD_WritePixel:
000012B0 E98C                       		lsl.l	#4,d4	; shift up by a nybble
000012B2 8801                       		or.b	d1,d4	; write pixel
000012B4 5343                       		subq.w	#1,d3	; has an entire 8-pixel row been written?
000012B6 6600                       		bne.s	NemPCD_WritePixel_Loop	; if not, loop
000012B8 4ED3                       		jmp	(a3)	; otherwise, write the row to its destination, by doing a dynamic jump to NemPCD_WriteRowToVDP, NemDec_WriteAndAdvance, NemPCD_WriteRowToVDP_XOR, or NemDec_WriteAndAdvance_XOR
000012BA                            ; End of function NemDec_ProcessCompressedData
000012BA                            
000012BA                            
000012BA                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000012BA                            
000012BA                            
000012BA                            NemPCD_NewRow:
000012BA 7800                       		moveq	#0,d4	; reset row
000012BC 7608                       		moveq	#8,d3	; reset nybble counter
000012BE                            
000012BE                            NemPCD_WritePixel_Loop:
000012BE 51C8 FFF0                  		dbf	d0,NemPCD_WritePixel
000012C2 60B4                       		bra.s	NemDec_ProcessCompressedData
000012C4                            ; ===========================================================================
000012C4                            
000012C4                            NemPCD_InlineData:
000012C4 5D46                       		subq.w	#6,d6	; 6 bits needed to signal inline data
000012C6 0C46 0009                  		cmpi.w	#9,d6
000012CA 6400                       		bcc.s	loc_14E4
000012CC 5046                       		addq.w	#8,d6
000012CE E145                       		asl.w	#8,d5
000012D0 1A18                       		move.b	(a0)+,d5
000012D2                            
000012D2                            loc_14E4:
000012D2 5F46                       		subq.w	#7,d6	; and 7 bits needed for the inline data itself
000012D4 3205                       		move.w	d5,d1
000012D6 EC69                       		lsr.w	d6,d1	; shift so that low bit of the code is in bit position 0
000012D8 3001                       		move.w	d1,d0
000012DA 0241 000F                  		andi.w	#$F,d1	; get palette index for pixel
000012DE 0240 0070                  		andi.w	#$70,d0	; high nybble is repeat count for pixel
000012E2 0C46 0009                  		cmpi.w	#9,d6
000012E6 64C6                       		bcc.s	NemPCD_ProcessCompressedData
000012E8 5046                       		addq.w	#8,d6
000012EA E145                       		asl.w	#8,d5
000012EC 1A18                       		move.b	(a0)+,d5
000012EE 60BE                       		bra.s	NemPCD_ProcessCompressedData
000012F0                            ; End of function NemPCD_NewRow
000012F0                            
000012F0                            ; ===========================================================================
000012F0                            
000012F0                            NemPCD_WriteRowToVDP:
000012F0 2884                       		move.l	d4,(a4)	; write 8-pixel row
000012F2 534D                       		subq.w	#1,a5
000012F4 380D                       		move.w	a5,d4	; have all the 8-pixel rows been written?
000012F6 66C2                       		bne.s	NemPCD_NewRow	; if not, branch
000012F8 4E75                       		rts		; otherwise the decompression is finished
000012FA                            ; ===========================================================================
000012FA                            NemPCD_WriteRowToVDP_XOR:
000012FA B982                       		eor.l	d4,d2	; XOR the previous row by the current row
000012FC 2882                       		move.l	d2,(a4)	; and write the result
000012FE 534D                       		subq.w	#1,a5
00001300 380D                       		move.w	a5,d4
00001302 66B6                       		bne.s	NemPCD_NewRow
00001304 4E75                       		rts	
00001306                            ; ===========================================================================
00001306                            
00001306                            NemPCD_WriteRowToRAM:
00001306 28C4                       		move.l	d4,(a4)+
00001308 534D                       		subq.w	#1,a5
0000130A 380D                       		move.w	a5,d4
0000130C 66AC                       		bne.s	NemPCD_NewRow
0000130E 4E75                       		rts	
00001310                            ; ===========================================================================
00001310                            NemPCD_WriteRowToRAM_XOR:
00001310 B982                       		eor.l	d4,d2
00001312 28C2                       		move.l	d2,(a4)+
00001314 534D                       		subq.w	#1,a5
00001316 380D                       		move.w	a5,d4
00001318 66A0                       		bne.s	NemPCD_NewRow
0000131A 4E75                       		rts	
0000131C                            
0000131C                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000131C                            ; ---------------------------------------------------------------------------
0000131C                            ; Part of the Nemesis decompressor, builds the code table (in RAM)
0000131C                            ; ---------------------------------------------------------------------------
0000131C                            
0000131C                            
0000131C                            NemDec_BuildCodeTable:
0000131C 1018                       		move.b	(a0)+,d0	; read first byte
0000131E                            
0000131E                            NemBCT_ChkEnd:
0000131E 0C00 00FF                  		cmpi.b	#$FF,d0	; has the end of the code table description been reached?
00001322 6600                       		bne.s	NemBCT_NewPALIndex	; if not, branch
00001324 4E75                       		rts	; otherwise, this subroutine's work is done
00001326                            ; ===========================================================================
00001326                            
00001326                            NemBCT_NewPALIndex:
00001326 3E00                       		move.w	d0,d7
00001328                            
00001328                            NemBCT_Loop:
00001328 1018                       		move.b	(a0)+,d0	; read next byte
0000132A 0C00 0080                  		cmpi.b	#$80,d0	; sign bit being set signifies a new palette index
0000132E 64EE                       		bcc.s	NemBCT_ChkEnd	; a bmi could have been used instead of a compare and bcc
00001330                            		
00001330 1200                       		move.b	d0,d1
00001332 0247 000F                  		andi.w	#$F,d7	; get palette index
00001336 0241 0070                  		andi.w	#$70,d1	; get repeat count for palette index
0000133A 8E41                       		or.w	d1,d7	; combine the two
0000133C 0240 000F                  		andi.w	#$F,d0	; get the length of the code in bits
00001340 1200                       		move.b	d0,d1
00001342 E149                       		lsl.w	#8,d1
00001344 8E41                       		or.w	d1,d7	; combine with palette index and repeat count to form code table entry
00001346 7208                       		moveq	#8,d1
00001348 9240                       		sub.w	d0,d1	; is the code 8 bits long?
0000134A 6600                       		bne.s	NemBCT_ShortCode	; if not, a bit of extra processing is needed
0000134C 1018                       		move.b	(a0)+,d0	; get code
0000134E D040                       		add.w	d0,d0	; each code gets a word-sized entry in the table
00001350 3387 0000                  		move.w	d7,(a1,d0.w)	; store the entry for the code
00001354 60D2                       		bra.s	NemBCT_Loop	; repeat
00001356                            ; ===========================================================================
00001356                            
00001356                            ; the Nemesis decompressor uses prefix-free codes (no valid code is a prefix of a longer code)
00001356                            ; e.g. if 10 is a valid 2-bit code, 110 is a valid 3-bit code but 100 isn't
00001356                            ; also, when the actual compressed data is processed the high bit of each code is in bit position 7
00001356                            ; so the code needs to be bit-shifted appropriately over here before being used as a code table index
00001356                            ; additionally, the code needs multiple entries in the table because no masking is done during compressed data processing
00001356                            ; so if 11000 is a valid code then all indices of the form 11000XXX need to have the same entry
00001356                            NemBCT_ShortCode:
00001356 1018                       		move.b	(a0)+,d0	; get code
00001358 E368                       		lsl.w	d1,d0	; get index into code table
0000135A D040                       		add.w	d0,d0	; shift so that high bit is in bit position 7
0000135C 7A01                       		moveq	#1,d5
0000135E E36D                       		lsl.w	d1,d5
00001360 5345                       		subq.w	#1,d5	; d5 = 2^d1 - 1
00001362                            
00001362                            NemBCT_ShortCode_Loop:
00001362 3387 0000                  		move.w	d7,(a1,d0.w)	; store entry
00001366 5440                       		addq.w	#2,d0	; increment index
00001368 51CD FFF8                  		dbf	d5,NemBCT_ShortCode_Loop	; repeat for required number of entries
0000136C 60BA                       		bra.s	NemBCT_Loop
0000136E                            ; End of function NemDec_BuildCodeTable
0000136E                            ; End of function NemDec_BuildCodeTable
0000136E                            
0000136E                            
0000136E                            ; ---------------------------------------------------------------------------
0000136E                            ; Subroutine to load pattern load cues (aka to queue pattern load requests)
0000136E                            ; ---------------------------------------------------------------------------
0000136E                            
0000136E                            ; ARGUMENTS
0000136E                            ; d0 = index of PLC list
0000136E                            ; ---------------------------------------------------------------------------
0000136E                            
0000136E                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000136E                            
0000136E                            ; LoadPLC:
0000136E                            AddPLC:
0000136E 48E7 0060                  		movem.l	a1-a2,-(sp)
00001372 43F9 0000 0000             		lea	(ArtLoadCues).l,a1
00001378 D040                       		add.w	d0,d0
0000137A 3031 0000                  		move.w	(a1,d0.w),d0
0000137E 43F1 0000                  		lea	(a1,d0.w),a1		; jump to relevant PLC
00001382 45F8 F680                  		lea	(v_plc_buffer).w,a2 ; PLC buffer space
00001386                            
00001386                            	@findspace:
00001386 4A92                       		tst.l	(a2)		; is space available in RAM?
00001388 6700                       		beq.s	@copytoRAM	; if yes, branch
0000138A 5C4A                       		addq.w	#6,a2		; if not, try next space
0000138C 60F8                       		bra.s	@findspace
0000138E                            ; ===========================================================================
0000138E                            
0000138E                            @copytoRAM:
0000138E 3019                       		move.w	(a1)+,d0	; get length of PLC
00001390 6B00                       		bmi.s	@skip
00001392                            
00001392                            	@loop:
00001392 24D9                       		move.l	(a1)+,(a2)+
00001394 34D9                       		move.w	(a1)+,(a2)+	; copy PLC to RAM
00001396 51C8 FFFA                  		dbf	d0,@loop	; repeat for length of PLC
0000139A                            
0000139A                            	@skip:
0000139A 4CDF 0600                  		movem.l	(sp)+,a1-a2 ; a1=object
0000139E 4E75                       		rts	
000013A0                            ; End of function AddPLC
000013A0                            
000013A0                            
000013A0                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000013A0                            ; Queue pattern load requests, but clear the PLQ first
000013A0                            
000013A0                            ; ARGUMENTS
000013A0                            ; d0 = index of PLC list (see ArtLoadCues)
000013A0                            
000013A0                            ; NOTICE: This subroutine does not check for buffer overruns. The programmer
000013A0                            ;	  (or hacker) is responsible for making sure that no more than
000013A0                            ;	  16 load requests are copied into the buffer.
000013A0                            ;	  _________DO NOT PUT MORE THAN 16 LOAD REQUESTS IN A LIST!__________
000013A0                            ;         (or if you change the size of Plc_Buffer, the limit becomes (Plc_Buffer_Only_End-Plc_Buffer)/6)
000013A0                            
000013A0                            ; LoadPLC2:
000013A0                            NewPLC:
000013A0 48E7 0060                  		movem.l	a1-a2,-(sp)
000013A4 43F9 0000 0000             		lea	(ArtLoadCues).l,a1
000013AA D040                       		add.w	d0,d0
000013AC 3031 0000                  		move.w	(a1,d0.w),d0
000013B0 43F1 0000                  		lea	(a1,d0.w),a1	; jump to relevant PLC
000013B4 6100                       		bsr.s	ClearPLC	; erase any data in PLC buffer space
000013B6 45F8 F680                  		lea	(v_plc_buffer).w,a2
000013BA 3019                       		move.w	(a1)+,d0	; get length of PLC
000013BC 6B00                       		bmi.s	@skip		; if it's negative, skip the next loop
000013BE                            
000013BE                            	@loop:
000013BE 24D9                       		move.l	(a1)+,(a2)+
000013C0 34D9                       		move.w	(a1)+,(a2)+	; copy PLC to RAM
000013C2 51C8 FFFA                  		dbf	d0,@loop		; repeat for length of PLC
000013C6                            
000013C6                            	@skip:
000013C6 4CDF 0600                  		movem.l	(sp)+,a1-a2
000013CA 4E75                       		rts	
000013CC                            ; End of function NewPLC
000013CC                            
000013CC                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000013CC                            
000013CC                            ; ---------------------------------------------------------------------------
000013CC                            ; Subroutine to	clear the pattern load cues
000013CC                            ; ---------------------------------------------------------------------------
000013CC                            
000013CC                            ; Clear the pattern load queue ($FFF680 - $FFF700)
000013CC                            
000013CC                            
000013CC                            ClearPLC:
000013CC 45F8 F680                  		lea	(v_plc_buffer).w,a2 ; PLC buffer space in RAM
000013D0 701F                       		moveq	#$1F,d0	; bytesToLcnt(v_plc_buffer_end-v_plc_buffer)
000013D2                            
000013D2                            	@loop:
000013D2 429A                       		clr.l	(a2)+
000013D4 51C8 FFFC                  		dbf	d0,@loop
000013D8 4E75                       		rts	
000013DA                            ; End of function ClearPLC
000013DA                            
000013DA                            ; ---------------------------------------------------------------------------
000013DA                            ; Subroutine to	use graphics listed in a pattern load cue
000013DA                            ; ---------------------------------------------------------------------------
000013DA                            
000013DA                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000013DA                            
000013DA                            
000013DA                            RunPLC:
000013DA 4AB8 F680                  		tst.l	(v_plc_buffer).w
000013DE 6700                       		beq.s	Rplc_Exit
000013E0 4A78 F6F8                  		tst.w	(f_plc_execute).w
000013E4 6600                       		bne.s	Rplc_Exit
000013E6 2078 F680                  		movea.l	(v_plc_buffer).w,a0
000013EA 47F9 0000 12F0             		lea	(NemPCD_WriteRowToVDP).l,a3
000013F0 43F8 AA00                  		lea	(v_ngfx_buffer).w,a1
000013F4 3418                       		move.w	(a0)+,d2
000013F6 6A00                       		bpl.s	loc_160E
000013F8 D6FC 000A                  		adda.w	#$A,a3
000013FC                            
000013FC                            loc_160E:
000013FC 0242 7FFF                  		andi.w	#$7FFF,d2
00001400 31C2 F6F8                  		move.w	d2,(f_plc_execute).w
00001404 6100 FF16                  		bsr.w	NemDec_BuildCodeTable
00001408 1A18                       		move.b	(a0)+,d5
0000140A E145                       		asl.w	#8,d5
0000140C 1A18                       		move.b	(a0)+,d5
0000140E 7C10                       		moveq	#$10,d6
00001410 7000                       		moveq	#0,d0
00001412 21C8 F680                  		move.l	a0,(v_plc_buffer).w
00001416 21CB F6E0                  		move.l	a3,(v_ptrnemcode).w
0000141A 21C0 F6E4                  		move.l	d0,($FFFFF6E4).w
0000141E 21C0 F6E8                  		move.l	d0,($FFFFF6E8).w
00001422 21C0 F6EC                  		move.l	d0,($FFFFF6EC).w
00001426 21C5 F6F0                  		move.l	d5,($FFFFF6F0).w
0000142A 21C6 F6F4                  		move.l	d6,($FFFFF6F4).w
0000142E                            
0000142E                            Rplc_Exit:
0000142E 4E75                       		rts	
00001430                            ; End of function RunPLC
00001430                            
00001430                            
00001430                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001430                            
00001430                            
00001430                            sub_1642:
00001430 4A78 F6F8                  		tst.w	(f_plc_execute).w
00001434 6700 0000                  		beq.w	locret_16DA
00001438 31FC 0009 F6FA             		move.w	#9,($FFFFF6FA).w
0000143E 7000                       		moveq	#0,d0
00001440 3038 F684                  		move.w	($FFFFF684).w,d0
00001444 0678 0120 F684             		addi.w	#$120,($FFFFF684).w
0000144A 6000                       		bra.s	loc_1676
0000144C                            ; End of function sub_1642
0000144C                            
0000144C                            
0000144C                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000144C                            
0000144C                            
0000144C                            ; sub_165E:
0000144C                            ProcessDPLC2:
0000144C 4A78 F6F8                  		tst.w	(f_plc_execute).w
00001450 6700                       		beq.s	locret_16DA
00001452 31FC 0003 F6FA             		move.w	#3,($FFFFF6FA).w
00001458 7000                       		moveq	#0,d0
0000145A 3038 F684                  		move.w	($FFFFF684).w,d0
0000145E 0678 0060 F684             		addi.w	#$60,($FFFFF684).w
00001464                            
00001464                            loc_1676:
00001464 49F9 00C0 0004             		lea	(vdp_control_port).l,a4
0000146A E588                       		lsl.l	#2,d0
0000146C E448                       		lsr.w	#2,d0
0000146E 0040 4000                  		ori.w	#$4000,d0
00001472 4840                       		swap	d0
00001474 2880                       		move.l	d0,(a4)
00001476 594C                       		subq.w	#4,a4
00001478 2078 F680                  		movea.l	(v_plc_buffer).w,a0
0000147C 2678 F6E0                  		movea.l	(v_ptrnemcode).w,a3
00001480 2038 F6E4                  		move.l	($FFFFF6E4).w,d0
00001484 2238 F6E8                  		move.l	($FFFFF6E8).w,d1
00001488 2438 F6EC                  		move.l	($FFFFF6EC).w,d2
0000148C 2A38 F6F0                  		move.l	($FFFFF6F0).w,d5
00001490 2C38 F6F4                  		move.l	($FFFFF6F4).w,d6
00001494 43F8 AA00                  		lea	(v_ngfx_buffer).w,a1
00001498                            
00001498                            loc_16AA:
00001498 3A7C 0008                  		movea.w	#8,a5
0000149C 6100 FE1C                  		bsr.w	NemPCD_NewRow
000014A0 5378 F6F8                  		subq.w	#1,(f_plc_execute).w
000014A4 6700                       		beq.s	loc_16DC
000014A6 5378 F6FA                  		subq.w	#1,($FFFFF6FA).w
000014AA 66EC                       		bne.s	loc_16AA
000014AC 21C8 F680                  		move.l	a0,(v_plc_buffer).w
000014B0 21CB F6E0                  		move.l	a3,(v_ptrnemcode).w
000014B4 21C0 F6E4                  		move.l	d0,($FFFFF6E4).w
000014B8 21C1 F6E8                  		move.l	d1,($FFFFF6E8).w
000014BC 21C2 F6EC                  		move.l	d2,($FFFFF6EC).w
000014C0 21C5 F6F0                  		move.l	d5,($FFFFF6F0).w
000014C4 21C6 F6F4                  		move.l	d6,($FFFFF6F4).w
000014C8                            
000014C8                            locret_16DA:
000014C8 4E75                       		rts	
000014CA                            ; ===========================================================================
000014CA                            
000014CA                            loc_16DC:
000014CA 41F8 F680                  		lea	(v_plc_buffer).w,a0
000014CE 7015                       		moveq	#$15,d0
000014D0                            
000014D0                            loc_16E2:
000014D0 20E8 0006                  		move.l	6(a0),(a0)+
000014D4 51C8 FFFA                  		dbf	d0,loc_16E2
000014D8 4E75                       		rts	
000014DA                            ; End of function ProcessDPLC2
000014DA                            
000014DA                            ; ---------------------------------------------------------------------------
000014DA                            ; Subroutine to	execute	the pattern load cue
000014DA                            ; ---------------------------------------------------------------------------
000014DA                            
000014DA                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000014DA                            
000014DA                            
000014DA                            QuickPLC:
000014DA 43F9 0000 0000             		lea	(ArtLoadCues).l,a1 ; load the PLC index
000014E0 D040                       		add.w	d0,d0
000014E2 3031 0000                  		move.w	(a1,d0.w),d0
000014E6 43F1 0000                  		lea	(a1,d0.w),a1
000014EA 3219                       		move.w	(a1)+,d1	; get length of PLC
000014EC                            
000014EC                            	Qplc_Loop:
000014EC 2059                       		movea.l	(a1)+,a0	; get art pointer
000014EE 7000                       		moveq	#0,d0
000014F0 3019                       		move.w	(a1)+,d0	; get VRAM address
000014F2 E588                       		lsl.l	#2,d0
000014F4 E448                       		lsr.w	#2,d0
000014F6 0040 4000                  		ori.w	#$4000,d0
000014FA 4840                       		swap	d0
000014FC 23C0 00C0 0004             		move.l	d0,(vdp_control_port).l ; converted VRAM address to VDP format
00001502 6100 FD2A                  		bsr.w	NemDec		; decompress
00001506 51C9 FFE4                  		dbf	d1,Qplc_Loop	; repeat for length of PLC
0000150A 4E75                       		rts	
0000150C                            ; End of function QuickPLC
0000150C                            
0000150C                            		include	"_inc\Enigma Decompression.asm"
0000150C                            ; ---------------------------------------------------------------------------
0000150C                            ; Enigma decompression algorithm
0000150C                            
0000150C                            ; input:
0000150C                            ;	d0 = starting art tile (added to each 8x8 before writing to destination)
0000150C                            ;	a0 = source address
0000150C                            ;	a1 = destination address
0000150C                            
0000150C                            ; usage:
0000150C                            ;	lea	(source).l,a0
0000150C                            ;	lea	(destination).l,a1
0000150C                            ;	move.w	#arttile,d0
0000150C                            ;	bsr.w	EniDec
0000150C                            
0000150C                            ; See http://www.segaretro.org/Enigma_compression for format description
0000150C                            ; ---------------------------------------------------------------------------
0000150C                            
0000150C                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000150C                            
0000150C                            
0000150C                            EniDec:
0000150C 48E7 FF7C                  		movem.l	d0-d7/a1-a5,-(sp)
00001510 3640                       		movea.w	d0,a3		; store starting art tile
00001512 1018                       		move.b	(a0)+,d0
00001514 4880                       		ext.w	d0
00001516 3A40                       		movea.w	d0,a5		; store number of bits in inline copy value
00001518 1818                       		move.b	(a0)+,d4
0000151A E70C                       		lsl.b	#3,d4		; store PCCVH flags bitfield
0000151C 3458                       		movea.w	(a0)+,a2
0000151E D4CB                       		adda.w	a3,a2		; store incremental copy word
00001520 3858                       		movea.w	(a0)+,a4
00001522 D8CB                       		adda.w	a3,a4		; store literal copy word
00001524 1A18                       		move.b	(a0)+,d5
00001526 E145                       		asl.w	#8,d5
00001528 1A18                       		move.b	(a0)+,d5	; get first word in format list
0000152A 7C10                       		moveq	#16,d6		; initial shift value
0000152C                            ; loc_173E:
0000152C                            Eni_Loop:
0000152C 7007                       		moveq	#7,d0		; assume a format list entry is 7 bits
0000152E 3E06                       		move.w	d6,d7
00001530 9E40                       		sub.w	d0,d7
00001532 3205                       		move.w	d5,d1
00001534 EE69                       		lsr.w	d7,d1
00001536 0241 007F                  		andi.w	#$7F,d1		; get format list entry
0000153A 3401                       		move.w	d1,d2		; and copy it
0000153C 0C41 0040                  		cmpi.w	#$40,d1		; is the high bit of the entry set?
00001540 6400                       		bhs.s	@sevenbitentry
00001542 7006                       		moveq	#6,d0		; if it isn't, the entry is actually 6 bits
00001544 E24A                       		lsr.w	#1,d2
00001546                            ; loc_1758:
00001546                            @sevenbitentry:
00001546 6100 0000                  		bsr.w	EniDec_FetchByte
0000154A 0242 000F                  		andi.w	#$F,d2		; get repeat count
0000154E E849                       		lsr.w	#4,d1
00001550 D241                       		add.w	d1,d1
00001552 4EFB 1000                  		jmp	EniDec_Index(pc,d1.w)
00001556                            ; End of function EniDec
00001556                            
00001556                            ; ===========================================================================
00001556                            ; loc_1768:
00001556                            EniDec_00:
00001556 32CA                       @loop:		move.w	a2,(a1)+	; copy incremental copy word
00001558 524A                       		addq.w	#1,a2		; increment it
0000155A 51CA FFFA                  		dbf	d2,@loop	; repeat
0000155E 60CC                       		bra.s	Eni_Loop
00001560                            ; ===========================================================================
00001560                            ; loc_1772:
00001560                            EniDec_01:
00001560 32CC                       @loop:		move.w	a4,(a1)+	; copy literal copy word
00001562 51CA FFFC                  		dbf	d2,@loop	; repeat
00001566 60C4                       		bra.s	Eni_Loop
00001568                            ; ===========================================================================
00001568                            ; loc_177A:
00001568                            EniDec_100:
00001568 6100 0000                  		bsr.w	EniDec_FetchInlineValue
0000156C                            ; loc_177E:
0000156C 32C1                       @loop:		move.w	d1,(a1)+	; copy inline value
0000156E 51CA FFFC                  		dbf	d2,@loop	; repeat
00001572                            
00001572 60B8                       		bra.s	Eni_Loop
00001574                            ; ===========================================================================
00001574                            ; loc_1786:
00001574                            EniDec_101:
00001574 6100 0000                  		bsr.w	EniDec_FetchInlineValue
00001578                            ; loc_178A:
00001578 32C1                       @loop:		move.w	d1,(a1)+	; copy inline value
0000157A 5241                       		addq.w	#1,d1		; increment
0000157C 51CA FFFA                  		dbf	d2,@loop	; repeat
00001580                            
00001580 60AA                       		bra.s	Eni_Loop
00001582                            ; ===========================================================================
00001582                            ; loc_1794:
00001582                            EniDec_110:
00001582 6100 0000                  		bsr.w	EniDec_FetchInlineValue
00001586                            ; loc_1798:
00001586 32C1                       @loop:		move.w	d1,(a1)+	; copy inline value
00001588 5341                       		subq.w	#1,d1		; decrement
0000158A 51CA FFFA                  		dbf	d2,@loop	; repeat
0000158E                            
0000158E 609C                       		bra.s	Eni_Loop
00001590                            ; ===========================================================================
00001590                            ; loc_17A2:
00001590                            EniDec_111:
00001590 0C42 000F                  		cmpi.w	#$F,d2
00001594 6700                       		beq.s	EniDec_Done
00001596                            ; loc_17A8:
00001596 6100 0000                  @loop:		bsr.w	EniDec_FetchInlineValue	; fetch new inline value
0000159A 32C1                       		move.w	d1,(a1)+	; copy it
0000159C 51CA FFF8                  		dbf	d2,@loop	; and repeat
000015A0                            
000015A0 608A                       		bra.s	Eni_Loop
000015A2                            ; ===========================================================================
000015A2                            ; loc_17B4:
000015A2                            EniDec_Index:
000015A2 60B2                       		bra.s	EniDec_00
000015A4 60B0                       		bra.s	EniDec_00
000015A6 60B8                       		bra.s	EniDec_01
000015A8 60B6                       		bra.s	EniDec_01
000015AA 60BC                       		bra.s	EniDec_100
000015AC 60C6                       		bra.s	EniDec_101
000015AE 60D2                       		bra.s	EniDec_110
000015B0 60DE                       		bra.s	EniDec_111
000015B2                            ; ===========================================================================
000015B2                            ; loc_17C4:
000015B2                            EniDec_Done:
000015B2 5348                       		subq.w	#1,a0		; go back by one byte
000015B4 0C46 0010                  		cmpi.w	#16,d6		; were we going to start on a completely new byte?
000015B8 6600                       		bne.s	@notnewbyte	; if not, branch
000015BA 5348                       		subq.w	#1,a0		; and another one if needed
000015BC                            ; loc_17CE:
000015BC                            @notnewbyte:
000015BC 3008                       		move.w	a0,d0
000015BE E248                       		lsr.w	#1,d0		; are we on an odd byte?
000015C0 6400                       		bcc.s	@evenbyte	; if not, branch
000015C2 5248                       		addq.w	#1,a0		; ensure we're on an even byte
000015C4                            ; loc_17D6:
000015C4                            @evenbyte:
000015C4 4CDF 3EFF                  		movem.l	(sp)+,d0-d7/a1-a5
000015C8 4E75                       		rts	
000015CA                            
000015CA                            ; ---------------------------------------------------------------------------
000015CA                            ; Part of the Enigma decompressor
000015CA                            ; Fetches an inline copy value and stores it in d1
000015CA                            ; ---------------------------------------------------------------------------
000015CA                            
000015CA                            ; =============== S U B R O U T I N E =======================================
000015CA                            
000015CA                            ; loc_17DC:
000015CA                            EniDec_FetchInlineValue:
000015CA 360B                       		move.w	a3,d3		; copy starting art tile
000015CC 1204                       		move.b	d4,d1		; copy PCCVH bitfield
000015CE D201                       		add.b	d1,d1		; is the priority bit set?
000015D0 6400                       		bcc.s	@skippriority	; if not, branch
000015D2 5346                       		subq.w	#1,d6
000015D4 0D05                       		btst	d6,d5		; is the priority bit set in the inline render flags?
000015D6 6700                       		beq.s	@skippriority	; if not, branch
000015D8 0043 8000                  		ori.w	#$8000,d3	; otherwise set priority bit in art tile
000015DC                            ; loc_17EE:
000015DC                            @skippriority:
000015DC D201                       		add.b	d1,d1		; is the high palette line bit set?
000015DE 6400                       		bcc.s	@skiphighpal	; if not, branch
000015E0 5346                       		subq.w	#1,d6
000015E2 0D05                       		btst	d6,d5
000015E4 6700                       		beq.s	@skiphighpal
000015E6 0643 4000                  		addi.w	#$4000,d3	; set second palette line bit
000015EA                            ; loc_17FC:
000015EA                            @skiphighpal:
000015EA D201                       		add.b	d1,d1		; is the low palette line bit set?
000015EC 6400                       		bcc.s	@skiplowpal	; if not, branch
000015EE 5346                       		subq.w	#1,d6
000015F0 0D05                       		btst	d6,d5
000015F2 6700                       		beq.s	@skiplowpal
000015F4 0643 2000                  		addi.w	#$2000,d3	; set first palette line bit
000015F8                            ; loc_180A:
000015F8                            @skiplowpal:
000015F8 D201                       		add.b	d1,d1		; is the vertical flip flag set?
000015FA 6400                       		bcc.s	@skipyflip	; if not, branch
000015FC 5346                       		subq.w	#1,d6
000015FE 0D05                       		btst	d6,d5
00001600 6700                       		beq.s	@skipyflip
00001602 0043 1000                  		ori.w	#$1000,d3	; set Y-flip bit
00001606                            ; loc_1818:
00001606                            @skipyflip:
00001606 D201                       		add.b	d1,d1		; is the horizontal flip flag set?
00001608 6400                       		bcc.s	@skipxflip	; if not, branch
0000160A 5346                       		subq.w	#1,d6
0000160C 0D05                       		btst	d6,d5
0000160E 6700                       		beq.s	@skipxflip
00001610 0043 0800                  		ori.w	#$800,d3	; set X-flip bit
00001614                            ; loc_1826:
00001614                            @skipxflip:
00001614 3205                       		move.w	d5,d1
00001616 3E06                       		move.w	d6,d7
00001618 9E4D                       		sub.w	a5,d7		; subtract length in bits of inline copy value
0000161A 6400                       		bcc.s	@enoughbits	; branch if a new word doesn't need to be read
0000161C 3C07                       		move.w	d7,d6
0000161E 0646 0010                  		addi.w	#16,d6
00001622 4447                       		neg.w	d7		; calculate bit deficit
00001624 EF69                       		lsl.w	d7,d1		; and make space for that many bits
00001626 1A10                       		move.b	(a0),d5		; get next byte
00001628 EF3D                       		rol.b	d7,d5		; and rotate the required bits into the lowest positions
0000162A DE47                       		add.w	d7,d7
0000162C CA7B 7000                  		and.w	EniDec_Masks-2(pc,d7.w),d5
00001630 D245                       		add.w	d5,d1		; combine upper bits with lower bits
00001632                            ; loc_1844:
00001632                            @maskvalue:
00001632 300D                       		move.w	a5,d0		; get length in bits of inline copy value
00001634 D040                       		add.w	d0,d0
00001636 C27B 0000                  		and.w	EniDec_Masks-2(pc,d0.w),d1	; mask value appropriately
0000163A D243                       		add.w	d3,d1		; add starting art tile
0000163C 1A18                       		move.b	(a0)+,d5
0000163E E14D                       		lsl.w	#8,d5
00001640 1A18                       		move.b	(a0)+,d5	; get next word
00001642 4E75                       		rts	
00001644                            ; ===========================================================================
00001644                            ; loc_1856:
00001644                            @enoughbits:
00001644 6700                       		beq.s	@justenough	; if the word has been exactly exhausted, branch
00001646 EE69                       		lsr.w	d7,d1	; get inline copy value
00001648 300D                       		move.w	a5,d0
0000164A D040                       		add.w	d0,d0
0000164C C27B 0000                  		and.w	EniDec_Masks-2(pc,d0.w),d1	; and mask it appropriately
00001650 D243                       		add.w	d3,d1	; add starting art tile
00001652 300D                       		move.w	a5,d0
00001654 6000                       		bra.s	EniDec_FetchByte
00001656                            ; ===========================================================================
00001656                            ; loc_1868:
00001656                            @justenough:
00001656 7C10                       		moveq	#16,d6	; reset shift value
00001658 60D8                       		bra.s	@maskvalue
0000165A                            ; ===========================================================================
0000165A                            ; word_186C:
0000165A                            EniDec_Masks:
0000165A 0001 0003 0007 000F        		dc.w	 1,    3,    7,   $F
00001662 001F 003F 007F 00FF        		dc.w   $1F,  $3F,  $7F,  $FF
0000166A 01FF 03FF 07FF 0FFF        		dc.w  $1FF, $3FF, $7FF, $FFF
00001672 1FFF 3FFF 7FFF FFFF        		dc.w $1FFF,$3FFF,$7FFF,$FFFF
0000167A                            
0000167A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000167A                            
0000167A                            ; sub_188C:
0000167A                            EniDec_FetchByte:
0000167A 9C40                       		sub.w	d0,d6	; subtract length of current entry from shift value so that next entry is read next time around
0000167C 0C46 0009                  		cmpi.w	#9,d6	; does a new byte need to be read?
00001680 6400                       		bhs.s	@locret	; if not, branch
00001682 5046                       		addq.w	#8,d6
00001684 E145                       		asl.w	#8,d5
00001686 1A18                       		move.b	(a0)+,d5
00001688                            @locret:
00001688 4E75                       		rts	
0000168A                            ; End of function EniDec_FetchByte
0000168A                            ; End of function EniDec_FetchByte
0000168A                            		include	"_inc\Kosinski Decompression.asm"
0000168A                            ; ---------------------------------------------------------------------------
0000168A                            ; Kosinski decompression algorithm
0000168A                            
0000168A                            ; input:
0000168A                            ;	a0 = source address
0000168A                            ;	a1 = destination address
0000168A                            
0000168A                            ; usage:
0000168A                            ;	lea	(source).l,a0
0000168A                            ;	lea	(destination).l,a1
0000168A                            ;	bsr.w	KosDec
0000168A                            ; ---------------------------------------------------------------------------
0000168A                            
0000168A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000168A                            
0000168A                            
0000168A                            KosDec:
0000168A                            
0000168A 558F                       		subq.l	#2,sp	; make space for 2 bytes on the stack
0000168C 1F58 0001                  		move.b	(a0)+,1(sp)
00001690 1E98                       		move.b	(a0)+,(sp)
00001692 3A17                       		move.w	(sp),d5	; get first description field
00001694 780F                       		moveq	#$F,d4	; set to loop for 16 bits
00001696                            
00001696                            Kos_Loop:
00001696 E24D                       		lsr.w	#1,d5	; shift bit into the c flag
00001698 40C6                       		move	sr,d6
0000169A 51CC 0000                  		dbf	d4,@chkbit
0000169E 1F58 0001                  		move.b	(a0)+,1(sp)
000016A2 1E98                       		move.b	(a0)+,(sp)
000016A4 3A17                       		move.w	(sp),d5
000016A6 780F                       		moveq	#$F,d4
000016A8                            
000016A8                            	@chkbit:
000016A8 44C6                       		move	d6,ccr	; was the bit set?
000016AA 6400                       		bcc.s	Kos_RLE	; if not, branch
000016AC                            
000016AC 12D8                       		move.b	(a0)+,(a1)+ ; copy byte as-is
000016AE 60E6                       		bra.s	Kos_Loop
000016B0                            ; ===========================================================================
000016B0                            
000016B0                            Kos_RLE:
000016B0 7600                       		moveq	#0,d3
000016B2 E24D                       		lsr.w	#1,d5	; get next bit
000016B4 40C6                       		move	sr,d6
000016B6 51CC 0000                  		dbf	d4,@chkbit
000016BA 1F58 0001                  		move.b	(a0)+,1(sp)
000016BE 1E98                       		move.b	(a0)+,(sp)
000016C0 3A17                       		move.w	(sp),d5
000016C2 780F                       		moveq	#$F,d4
000016C4                            
000016C4                            	@chkbit:
000016C4 44C6                       		move	d6,ccr	; was the bit set?
000016C6 6500                       		bcs.s	Kos_SeparateRLE ; if yes, branch
000016C8                            
000016C8 E24D                       		lsr.w	#1,d5	; shift bit into the x flag
000016CA 51CC 0000                  		dbf	d4,@loop1
000016CE 1F58 0001                  		move.b	(a0)+,1(sp)
000016D2 1E98                       		move.b	(a0)+,(sp)
000016D4 3A17                       		move.w	(sp),d5
000016D6 780F                       		moveq	#$F,d4
000016D8                            
000016D8                            	@loop1:
000016D8 E353                       		roxl.w	#1,d3	; get high repeat count bit
000016DA E24D                       		lsr.w	#1,d5
000016DC 51CC 0000                  		dbf	d4,@loop2
000016E0 1F58 0001                  		move.b	(a0)+,1(sp)
000016E4 1E98                       		move.b	(a0)+,(sp)
000016E6 3A17                       		move.w	(sp),d5
000016E8 780F                       		moveq	#$F,d4
000016EA                            
000016EA                            	@loop2:
000016EA E353                       		roxl.w	#1,d3	; get low repeat count bit
000016EC 5243                       		addq.w	#1,d3	; increment repeat count
000016EE 74FF                       		moveq	#-1,d2
000016F0 1418                       		move.b	(a0)+,d2 ; calculate offset
000016F2 6000                       		bra.s	Kos_RLELoop
000016F4                            ; ===========================================================================
000016F4                            
000016F4                            Kos_SeparateRLE:
000016F4 1018                       		move.b	(a0)+,d0 ; get first byte
000016F6 1218                       		move.b	(a0)+,d1 ; get second byte
000016F8 74FF                       		moveq	#-1,d2
000016FA 1401                       		move.b	d1,d2
000016FC EB4A                       		lsl.w	#5,d2
000016FE 1400                       		move.b	d0,d2	; calculate offset
00001700 0241 0007                  		andi.w	#7,d1	; does a third byte need to be read?
00001704 6700                       		beq.s	Kos_SeparateRLE2 ; if yes, branch
00001706 1601                       		move.b	d1,d3	; copy repeat count
00001708 5243                       		addq.w	#1,d3	; increment
0000170A                            
0000170A                            Kos_RLELoop:
0000170A 1031 2000                  		move.b	(a1,d2.w),d0 ; copy appropriate byte
0000170E 12C0                       		move.b	d0,(a1)+ ; repeat
00001710 51CB FFF8                  		dbf	d3,Kos_RLELoop
00001714 6080                       		bra.s	Kos_Loop
00001716                            ; ===========================================================================
00001716                            
00001716                            Kos_SeparateRLE2:
00001716 1218                       		move.b	(a0)+,d1
00001718 6700                       		beq.s	Kos_Done ; 0 indicates end of compressed data
0000171A 0C01 0001                  		cmpi.b	#1,d1
0000171E 6700 FF76                  		beq.w	Kos_Loop ; 1 indicates new description to be read
00001722 1601                       		move.b	d1,d3	; otherwise, copy repeat count
00001724 60E4                       		bra.s	Kos_RLELoop
00001726                            ; ===========================================================================
00001726                            
00001726                            Kos_Done:
00001726 548F                       		addq.l	#2,sp	; restore stack pointer
00001728 4E75                       		rts	
0000172A                            ; End of function KosDec
0000172A                            ; End of function KosDec
0000172A                            
0000172A                            		include	"_inc\PaletteCycle.asm"
0000172A                            ; ---------------------------------------------------------------------------
0000172A                            ; Palette cycling routine loading subroutine
0000172A                            ; ---------------------------------------------------------------------------
0000172A                            
0000172A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000172A                            
0000172A                            
0000172A                            PaletteCycle:
0000172A 7400                       		moveq	#0,d2
0000172C 7000                       		moveq	#0,d0
0000172E 1038 FE10                  		move.b	(v_zone).w,d0	; get level number
00001732 D040                       		add.w	d0,d0
00001734 303B 0000                  		move.w	PCycle_Index(pc,d0.w),d0
00001738 4EFB 0000                  		jmp	PCycle_Index(pc,d0.w) ; jump to relevant palette routine
0000173C                            ; End of function PaletteCycle
0000173C                            
0000173C                            ; ===========================================================================
0000173C                            ; ---------------------------------------------------------------------------
0000173C                            ; Palette cycling routines
0000173C                            ; ---------------------------------------------------------------------------
0000173C 0000                       PCycle_Index:	dc.w PCycle_GHZ-PCycle_Index
0000173E 0000                       		dc.w PCycle_LZ-PCycle_Index
00001740 0000                       		dc.w PCycle_MZ-PCycle_Index
00001742 0000                       		dc.w PalCycle_SLZ-PCycle_Index
00001744 0000                       		dc.w PalCycle_SYZ-PCycle_Index
00001746 0000                       		dc.w PalCycle_SBZ-PCycle_Index
00001748 0000                       		dc.w PCycle_GHZ-PCycle_Index	; Ending
0000174A 0000                       		dc.w PCycle_MZ-PCycle_Index
0000174C 0000                       		dc.w PCycle_MZ-PCycle_Index
0000174E                            
0000174E                            
0000174E                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000174E                            
0000174E                            
0000174E                            PCycle_Title:
0000174E 41F9 0000 0000             		lea	(Pal_TitleCyc).l,a0
00001754 6000                       		bra.s	PCycGHZ_Go
00001756                            ; ===========================================================================
00001756                            
00001756                            PCycle_GHZ:
00001756 41F9 0000 0000             		lea	(Pal_GHZCyc).l,a0
0000175C                            
0000175C                            PCycGHZ_Go:
0000175C 5378 F634                  		subq.w	#1,(v_pcyc_time).w ; decrement timer
00001760 6A00                       		bpl.s	PCycGHZ_Skip	; if time remains, branch
00001762                            
00001762 31FC 0005 F634             		move.w	#5,(v_pcyc_time).w ; reset timer to 5 frames
00001768 3038 F632                  		move.w	(v_pcyc_num).w,d0 ; get cycle number
0000176C 5278 F632                  		addq.w	#1,(v_pcyc_num).w ; increment cycle number
00001770 0240 0003                  		andi.w	#3,d0		; if cycle > 3, reset to 0
00001774 E748                       		lsl.w	#3,d0
00001776 43F8 FB50                  		lea	(v_pal_dry+$50).w,a1
0000177A 22F0 0000                  		move.l	(a0,d0.w),(a1)+
0000177E 22B0 0004                  		move.l	4(a0,d0.w),(a1)	; copy palette data to RAM
00001782                            
00001782                            PCycGHZ_Skip:
00001782 4E75                       		rts	
00001784                            ; End of function PCycle_GHZ
00001784                            
00001784                            
00001784                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001784                            
00001784                            
00001784                            PCycle_LZ:
00001784                            ; Waterfalls
00001784 5378 F634                  		subq.w	#1,(v_pcyc_time).w ; decrement timer
00001788 6A00                       		bpl.s	PCycLZ_Skip1	; if time remains, branch
0000178A                            
0000178A 31FC 0002 F634             		move.w	#2,(v_pcyc_time).w ; reset timer to 2 frames
00001790 3038 F632                  		move.w	(v_pcyc_num).w,d0
00001794 5278 F632                  		addq.w	#1,(v_pcyc_num).w ; increment cycle number
00001798 0240 0003                  		andi.w	#3,d0		; if cycle > 3, reset to 0
0000179C E748                       		lsl.w	#3,d0
0000179E 41F9 0000 0000             		lea	(Pal_LZCyc1).l,a0
000017A4 0C38 0003 FE11             		cmpi.b	#3,(v_act).w	; check if level is SBZ3
000017AA 6600                       		bne.s	PCycLZ_NotSBZ3
000017AC 41F9 0000 0000             		lea	(Pal_SBZ3Cyc1).l,a0 ; load SBZ3	palette instead
000017B2                            
000017B2                            	PCycLZ_NotSBZ3:
000017B2 43F8 FB56                  		lea	(v_pal_dry+$56).w,a1
000017B6 22F0 0000                  		move.l	(a0,d0.w),(a1)+
000017BA 22B0 0004                  		move.l	4(a0,d0.w),(a1)
000017BE 43F8 FAD6                  		lea	(v_pal_water+$56).w,a1
000017C2 22F0 0000                  		move.l	(a0,d0.w),(a1)+
000017C6 22B0 0004                  		move.l	4(a0,d0.w),(a1)
000017CA                            
000017CA                            PCycLZ_Skip1:
000017CA                            ; Conveyor belts
000017CA 4E75                       		rts
000017CC 3038 FE04                  		move.w	(v_framecount).w,d0
000017D0 0240 0007                  		andi.w	#7,d0
000017D4 103B 0000                  		move.b	PCycLZ_Seq(pc,d0.w),d0 ; get byte from palette sequence
000017D8 6700                       		beq.s	PCycLZ_Skip2	; if byte is 0, branch
000017DA 7201                       		moveq	#1,d1
000017DC 4A38 F7C0                  		tst.b	(f_conveyrev).w	; have conveyor belts been reversed?
000017E0 6700                       		beq.s	PCycLZ_NoRev	; if not, branch
000017E2 4441                       		neg.w	d1
000017E4                            
000017E4                            	PCycLZ_NoRev:
000017E4 3038 F650                  		move.w	(v_pal_buffer).w,d0
000017E8 0240 0003                  		andi.w	#3,d0
000017EC D041                       		add.w	d1,d0
000017EE 0C40 0003                  		cmpi.w	#3,d0
000017F2 6500                       		bcs.s	loc_1A0A
000017F4 3200                       		move.w	d0,d1
000017F6 7000                       		moveq	#0,d0
000017F8 4A41                       		tst.w	d1
000017FA 6A00                       		bpl.s	loc_1A0A
000017FC 7002                       		moveq	#2,d0
000017FE                            
000017FE                            loc_1A0A:
000017FE 31C0 F650                  		move.w	d0,(v_pal_buffer).w
00001802 D040                       		add.w	d0,d0
00001804 3200                       		move.w	d0,d1
00001806 D040                       		add.w	d0,d0
00001808 D041                       		add.w	d1,d0
0000180A 41F9 0000 0000             		lea	(Pal_LZCyc2).l,a0
00001810 43F8 FB76                  		lea	(v_pal_dry+$76).w,a1
00001814 22F0 0000                  		move.l	(a0,d0.w),(a1)+
00001818 32B0 0004                  		move.w	4(a0,d0.w),(a1)
0000181C 41F9 0000 0000             		lea	(Pal_LZCyc3).l,a0
00001822 43F8 FAF6                  		lea	(v_pal_water+$76).w,a1
00001826 22F0 0000                  		move.l	(a0,d0.w),(a1)+
0000182A 32B0 0004                  		move.w	4(a0,d0.w),(a1)
0000182E                            
0000182E                            PCycLZ_Skip2:
0000182E 4E75                       		rts	
00001830                            ; End of function PCycle_LZ
00001830                            
00001830                            ; ===========================================================================
00001830 0100 0001 0000 0100        PCycLZ_Seq:	dc.b 1,	0, 0, 1, 0, 0, 1, 0
00001838                            ; ===========================================================================
00001838                            
00001838                            PCycle_MZ:
00001838 4E75                       		rts	
0000183A                            
0000183A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000183A                            
0000183A                            
0000183A                            PalCycle_SLZ:
0000183A 5378 F634                  		subq.w	#1,(v_pcyc_time).w
0000183E 6A00                       		bpl.s	locret_1A80
00001840 31FC 0007 F634             		move.w	#7,(v_pcyc_time).w
00001846 3038 F632                  		move.w	(v_pcyc_num).w,d0
0000184A 5240                       		addq.w	#1,d0
0000184C 0C40 0006                  		cmpi.w	#6,d0
00001850 6500                       		bcs.s	loc_1A60
00001852 7000                       		moveq	#0,d0
00001854                            
00001854                            loc_1A60:
00001854 31C0 F632                  		move.w	d0,(v_pcyc_num).w
00001858 3200                       		move.w	d0,d1
0000185A D241                       		add.w	d1,d1
0000185C D041                       		add.w	d1,d0
0000185E D040                       		add.w	d0,d0
00001860 41F9 0000 0000             		lea	(Pal_SLZCyc).l,a0
00001866 43F8 FB56                  		lea	(v_pal_dry+$56).w,a1
0000186A 32B0 0000                  		move.w	(a0,d0.w),(a1)
0000186E 2370 0002 0004             		move.l	2(a0,d0.w),4(a1)
00001874                            
00001874                            locret_1A80:
00001874 4E75                       		rts	
00001876                            ; End of function PalCycle_SLZ
00001876                            
00001876                            
00001876                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001876                            
00001876                            
00001876                            PalCycle_SYZ:
00001876 5378 F634                  		subq.w	#1,(v_pcyc_time).w
0000187A 6A00                       		bpl.s	locret_1AC6
0000187C 31FC 0005 F634             		move.w	#5,(v_pcyc_time).w
00001882 3038 F632                  		move.w	(v_pcyc_num).w,d0
00001886 5278 F632                  		addq.w	#1,(v_pcyc_num).w
0000188A 0240 0003                  		andi.w	#3,d0
0000188E E548                       		lsl.w	#2,d0
00001890 3200                       		move.w	d0,d1
00001892 D040                       		add.w	d0,d0
00001894 41F9 0000 0000             		lea	(Pal_SYZCyc1).l,a0
0000189A 43F8 FB6E                  		lea	(v_pal_dry+$6E).w,a1
0000189E 22F0 0000                  		move.l	(a0,d0.w),(a1)+
000018A2 22B0 0004                  		move.l	4(a0,d0.w),(a1)
000018A6 41F9 0000 0000             		lea	(Pal_SYZCyc2).l,a0
000018AC 43F8 FB76                  		lea	(v_pal_dry+$76).w,a1
000018B0 32B0 1000                  		move.w	(a0,d1.w),(a1)
000018B4 3370 1002 0004             		move.w	2(a0,d1.w),4(a1)
000018BA                            
000018BA                            locret_1AC6:
000018BA 4E75                       		rts	
000018BC                            ; End of function PalCycle_SYZ
000018BC                            
000018BC                            
000018BC                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000018BC                            
000018BC                            
000018BC                            PalCycle_SBZ:
000018BC 45F9 0000 0000             		lea	(Pal_SBZCycList1).l,a2
000018C2 4A38 FE11                  		tst.b	(v_act).w
000018C6 6700                       		beq.s	loc_1ADA
000018C8 45F9 0000 0000             		lea	(Pal_SBZCycList2).l,a2
000018CE                            
000018CE                            loc_1ADA:
000018CE 43F8 F650                  		lea	(v_pal_buffer).w,a1
000018D2 321A                       		move.w	(a2)+,d1
000018D4                            
000018D4                            loc_1AE0:
000018D4 5311                       		subq.b	#1,(a1)
000018D6 6B00                       		bmi.s	loc_1AEA
000018D8 5489                       		addq.l	#2,a1
000018DA 5C8A                       		addq.l	#6,a2
000018DC 6000                       		bra.s	loc_1B06
000018DE                            ; ===========================================================================
000018DE                            
000018DE                            loc_1AEA:
000018DE 12DA                       		move.b	(a2)+,(a1)+
000018E0 1011                       		move.b	(a1),d0
000018E2 5200                       		addq.b	#1,d0
000018E4 B01A                       		cmp.b	(a2)+,d0
000018E6 6500                       		bcs.s	loc_1AF6
000018E8 7000                       		moveq	#0,d0
000018EA                            
000018EA                            loc_1AF6:
000018EA 12C0                       		move.b	d0,(a1)+
000018EC 0240 000F                  		andi.w	#$F,d0
000018F0 D040                       		add.w	d0,d0
000018F2 305A                       		movea.w	(a2)+,a0
000018F4 365A                       		movea.w	(a2)+,a3
000018F6 36B0 0000                  		move.w	(a0,d0.w),(a3)
000018FA                            
000018FA                            loc_1B06:
000018FA 51C9 FFD8                  		dbf	d1,loc_1AE0
000018FE 5378 F634                  		subq.w	#1,(v_pcyc_time).w
00001902 6A00                       		bpl.s	locret_1B64
00001904 41F9 0000 0000             		lea	(Pal_SBZCyc4).l,a0
0000190A 31FC 0001 F634             		move.w	#1,(v_pcyc_time).w
00001910 4A38 FE11                  		tst.b	(v_act).w
00001914 6700                       		beq.s	loc_1B2E
00001916 41F9 0000 0000             		lea	(Pal_SBZCyc10).l,a0
0000191C 31FC 0000 F634             		move.w	#0,(v_pcyc_time).w
00001922                            
00001922                            loc_1B2E:
00001922 72FF                       		moveq	#-1,d1
00001924 4A38 F7C0                  		tst.b	(f_conveyrev).w
00001928 6700                       		beq.s	loc_1B38
0000192A 4441                       		neg.w	d1
0000192C                            
0000192C                            loc_1B38:
0000192C 3038 F632                  		move.w	(v_pcyc_num).w,d0
00001930 0240 0003                  		andi.w	#3,d0
00001934 D041                       		add.w	d1,d0
00001936 0C40 0003                  		cmpi.w	#3,d0
0000193A 6500                       		bcs.s	loc_1B52
0000193C 3200                       		move.w	d0,d1
0000193E 7000                       		moveq	#0,d0
00001940 4A41                       		tst.w	d1
00001942 6A00                       		bpl.s	loc_1B52
00001944 7002                       		moveq	#2,d0
00001946                            
00001946                            loc_1B52:
00001946 31C0 F632                  		move.w	d0,(v_pcyc_num).w
0000194A D040                       		add.w	d0,d0
0000194C 43F8 FB58                  		lea	(v_pal_dry+$58).w,a1
00001950 22F0 0000                  		move.l	(a0,d0.w),(a1)+
00001954 32B0 0004                  		move.w	4(a0,d0.w),(a1)
00001958                            
00001958                            locret_1B64:
00001958 4E75                       		rts	
0000195A                            ; End of function PalCycle_SBZ
0000195A                            ; End of function PalCycle_SBZ
0000195A                            
0000195A                            Pal_TitleCyc:	incbin	"palette\Cycle - Title Screen Water.bin"
0000197A                            Pal_GHZCyc:	incbin	"palette\Cycle - GHZ.bin"
0000199A                            Pal_LZCyc1:	incbin	"palette\Cycle - LZ Waterfall.bin"
000019BA                            Pal_LZCyc2:	incbin	"palette\Cycle - LZ Conveyor Belt.bin"
000019CC                            Pal_LZCyc3:	incbin	"palette\Cycle - LZ Conveyor Belt Underwater.bin"
000019DE                            Pal_SBZ3Cyc1:	incbin	"palette\Cycle - SBZ3 Waterfall.bin"
00001A46                            Pal_SLZCyc:	incbin	"palette\Cycle - SLZ.bin"
00001A6A                            Pal_SYZCyc1:	incbin	"palette\Cycle - SYZ1.bin"
00001A8A                            Pal_SYZCyc2:	incbin	"palette\Cycle - SYZ2.bin"
00001A9A                            
00001A9A                            		include	"_inc\SBZ Palette Scripts.asm"
00001A9A                            ; ---------------------------------------------------------------------------
00001A9A                            ; Scrap Brain Zone palette cycling script
00001A9A                            ; ---------------------------------------------------------------------------
00001A9A                            
00001A9A                            mSBZp:	macro duration,colours,paladdress,ramaddress
00001A9A                            	dc.b duration, colours
00001A9A                            	dc.w paladdress, ramaddress
00001A9A                            	endm
00001A9A                            
00001A9A                            ; duration in frames, number of colours, palette address, RAM address
00001A9A                            
00001A9A                            Pal_SBZCycList1:
00001A9A 0000                       	dc.w ((end_SBZCycList1-Pal_SBZCycList1-2)/6)-1
00001A9C 0708 0000 FB50             	mSBZp	7,8,Pal_SBZCyc1,v_pal_dry+$50
00001AA2 0D08 0000 FB52             	mSBZp	$D,8,Pal_SBZCyc2,v_pal_dry+$52
00001AA8 0E08 0000 FB6E             	mSBZp	$E,8,Pal_SBZCyc3,v_pal_dry+$6E
00001AAE 0B08 0000 FB70             	mSBZp	$B,8,Pal_SBZCyc5,v_pal_dry+$70
00001AB4 0708 0000 FB72             	mSBZp	7,8,Pal_SBZCyc6,v_pal_dry+$72
00001ABA 1C10 0000 FB7E             	mSBZp	$1C,$10,Pal_SBZCyc7,v_pal_dry+$7E
00001AC0 0303 0000 FB78             	mSBZp	3,3,Pal_SBZCyc8,v_pal_dry+$78
00001AC6 0303 0000 FB7A             	mSBZp	3,3,Pal_SBZCyc8+2,v_pal_dry+$7A
00001ACC 0303 0000 FB7C             	mSBZp	3,3,Pal_SBZCyc8+4,v_pal_dry+$7C
00001AD2                            end_SBZCycList1:
00001AD2                            	even
00001AD2                            
00001AD2                            Pal_SBZCycList2:
00001AD2 0000                       	dc.w ((end_SBZCycList2-Pal_SBZCycList2-2)/6)-1
00001AD4 0708 0000 FB50             	mSBZp	7,8,Pal_SBZCyc1,v_pal_dry+$50
00001ADA 0D08 0000 FB52             	mSBZp	$D,8,Pal_SBZCyc2,v_pal_dry+$52
00001AE0 0908 0000 FB70             	mSBZp	9,8,Pal_SBZCyc9,v_pal_dry+$70
00001AE6 0708 0000 FB72             	mSBZp	7,8,Pal_SBZCyc6,v_pal_dry+$72
00001AEC 0303 0000 FB78             	mSBZp	3,3,Pal_SBZCyc8,v_pal_dry+$78
00001AF2 0303 0000 FB7A             	mSBZp	3,3,Pal_SBZCyc8+2,v_pal_dry+$7A
00001AF8 0303 0000 FB7C             	mSBZp	3,3,Pal_SBZCyc8+4,v_pal_dry+$7C
00001AFE                            end_SBZCycList2:
00001AFE                            	even
00001AFE                            	even
00001AFE                            
00001AFE                            Pal_SBZCyc1:	incbin	"palette\Cycle - SBZ 1.bin"
00001B0E                            Pal_SBZCyc2:	incbin	"palette\Cycle - SBZ 2.bin"
00001B1E                            Pal_SBZCyc3:	incbin	"palette\Cycle - SBZ 3.bin"
00001B2E                            Pal_SBZCyc4:	incbin	"palette\Cycle - SBZ 4.bin"
00001B3A                            Pal_SBZCyc5:	incbin	"palette\Cycle - SBZ 5.bin"
00001B4A                            Pal_SBZCyc6:	incbin	"palette\Cycle - SBZ 6.bin"
00001B5A                            Pal_SBZCyc7:	incbin	"palette\Cycle - SBZ 7.bin"
00001B7A                            Pal_SBZCyc8:	incbin	"palette\Cycle - SBZ 8.bin"
00001B84                            Pal_SBZCyc9:	incbin	"palette\Cycle - SBZ 9.bin"
00001B94                            Pal_SBZCyc10:	incbin	"palette\Cycle - SBZ 10.bin"
00001BA0                            ; ---------------------------------------------------------------------------
00001BA0                            ; Subroutine to	fade in from black
00001BA0                            ; ---------------------------------------------------------------------------
00001BA0                            
00001BA0                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001BA0                            
00001BA0                            
00001BA0                            PaletteFadeIn:
00001BA0 31FC 003F F626             		move.w	#$003F,(v_pfade_start).w ; set start position = 0; size = $40
00001BA6                            
00001BA6                            PalFadeIn_Alt:				; start position and size are already set
00001BA6 7000                       		moveq	#0,d0
00001BA8 41F8 FB00                  		lea	(v_pal_dry).w,a0
00001BAC 1038 F626                  		move.b	(v_pfade_start).w,d0
00001BB0 D0C0                       		adda.w	d0,a0
00001BB2 7200                       		moveq	#cBlack,d1
00001BB4 1038 F627                  		move.b	(v_pfade_size).w,d0
00001BB8                            
00001BB8                            	@fill:
00001BB8 30C1                       		move.w	d1,(a0)+
00001BBA 51C8 FFFC                  		dbf	d0,@fill 	; fill palette with black
00001BBE                            
00001BBE 383C 0015                  		move.w	#$15,d4
00001BC2                            
00001BC2                            	@mainloop:
00001BC2 11FC 0012 F62A             		move.b	#$12,(v_vbla_routine).w
00001BC8 6100 0000                  		bsr.w	WaitForVBla
00001BCC 6100                       		bsr.s	FadeIn_FromBlack
00001BCE 6100 F80A                  		bsr.w	RunPLC
00001BD2 51CC FFEE                  		dbf	d4,@mainloop
00001BD6 4E75                       		rts	
00001BD8                            ; End of function PaletteFadeIn
00001BD8                            
00001BD8                            
00001BD8                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001BD8                            
00001BD8                            
00001BD8                            FadeIn_FromBlack:
00001BD8 7000                       		moveq	#0,d0
00001BDA 41F8 FB00                  		lea	(v_pal_dry).w,a0
00001BDE 43F8 FB80                  		lea	(v_pal_dry_dup).w,a1
00001BE2 1038 F626                  		move.b	(v_pfade_start).w,d0
00001BE6 D0C0                       		adda.w	d0,a0
00001BE8 D2C0                       		adda.w	d0,a1
00001BEA 1038 F627                  		move.b	(v_pfade_size).w,d0
00001BEE                            
00001BEE                            	@addcolour:
00001BEE 6100                       		bsr.s	FadeIn_AddColour ; increase colour
00001BF0 51C8 FFFC                  		dbf	d0,@addcolour	; repeat for size of palette
00001BF4                            
00001BF4 0C38 0001 FE10             		cmpi.b	#id_LZ,(v_zone).w	; is level Labyrinth?
00001BFA 6600                       		bne.s	@exit		; if not, branch
00001BFC                            
00001BFC 7000                       		moveq	#0,d0
00001BFE 41F8 FA80                  		lea	(v_pal_water).w,a0
00001C02 43F8 FA00                  		lea	(v_pal_water_dup).w,a1
00001C06 1038 F626                  		move.b	(v_pfade_start).w,d0
00001C0A D0C0                       		adda.w	d0,a0
00001C0C D2C0                       		adda.w	d0,a1
00001C0E 1038 F627                  		move.b	(v_pfade_size).w,d0
00001C12                            
00001C12                            	@addcolour2:
00001C12 6100                       		bsr.s	FadeIn_AddColour ; increase colour again
00001C14 51C8 FFFC                  		dbf	d0,@addcolour2 ; repeat
00001C18                            
00001C18                            @exit:
00001C18 4E75                       		rts	
00001C1A                            ; End of function FadeIn_FromBlack
00001C1A                            
00001C1A                            
00001C1A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001C1A                            
00001C1A                            
00001C1A                            FadeIn_AddColour:
00001C1A                            @addblue:
00001C1A 3419                       		move.w	(a1)+,d2
00001C1C 3610                       		move.w	(a0),d3
00001C1E B642                       		cmp.w	d2,d3		; is colour already at threshold level?
00001C20 6700                       		beq.s	@next		; if yes, branch
00001C22 3203                       		move.w	d3,d1
00001C24 0641 0200                  		addi.w	#$200,d1	; increase blue	value
00001C28 B242                       		cmp.w	d2,d1		; has blue reached threshold level?
00001C2A 6200                       		bhi.s	@addgreen	; if yes, branch
00001C2C 30C1                       		move.w	d1,(a0)+	; update palette
00001C2E 4E75                       		rts	
00001C30                            ; ===========================================================================
00001C30                            
00001C30                            @addgreen:
00001C30 3203                       		move.w	d3,d1
00001C32 0641 0020                  		addi.w	#$20,d1		; increase green value
00001C36 B242                       		cmp.w	d2,d1
00001C38 6200                       		bhi.s	@addred
00001C3A 30C1                       		move.w	d1,(a0)+	; update palette
00001C3C 4E75                       		rts	
00001C3E                            ; ===========================================================================
00001C3E                            
00001C3E                            @addred:
00001C3E 5458                       		addq.w	#2,(a0)+	; increase red value
00001C40 4E75                       		rts	
00001C42                            ; ===========================================================================
00001C42                            
00001C42                            @next:
00001C42 5448                       		addq.w	#2,a0		; next colour
00001C44 4E75                       		rts	
00001C46                            ; End of function FadeIn_AddColour
00001C46                            
00001C46                            
00001C46                            ; ---------------------------------------------------------------------------
00001C46                            ; Subroutine to fade out to black
00001C46                            ; ---------------------------------------------------------------------------
00001C46                            
00001C46                            
00001C46                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001C46                            
00001C46                            
00001C46                            PaletteFadeOut:
00001C46 31FC 003F F626             		move.w	#$003F,(v_pfade_start).w ; start position = 0; size = $40
00001C4C 383C 0015                  		move.w	#$15,d4
00001C50                            
00001C50                            	@mainloop:
00001C50 11FC 0012 F62A             		move.b	#$12,(v_vbla_routine).w
00001C56 6100 0000                  		bsr.w	WaitForVBla
00001C5A 6100                       		bsr.s	FadeOut_ToBlack
00001C5C 6100 F77C                  		bsr.w	RunPLC
00001C60 51CC FFEE                  		dbf	d4,@mainloop
00001C64 4E75                       		rts	
00001C66                            ; End of function PaletteFadeOut
00001C66                            
00001C66                            
00001C66                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001C66                            
00001C66                            
00001C66                            FadeOut_ToBlack:
00001C66 7000                       		moveq	#0,d0
00001C68 41F8 FB00                  		lea	(v_pal_dry).w,a0
00001C6C 1038 F626                  		move.b	(v_pfade_start).w,d0
00001C70 D0C0                       		adda.w	d0,a0
00001C72 1038 F627                  		move.b	(v_pfade_size).w,d0
00001C76                            
00001C76                            	@decolour:
00001C76 6100                       		bsr.s	FadeOut_DecColour ; decrease colour
00001C78 51C8 FFFC                  		dbf	d0,@decolour	; repeat for size of palette
00001C7C                            
00001C7C 7000                       		moveq	#0,d0
00001C7E 41F8 FA80                  		lea	(v_pal_water).w,a0
00001C82 1038 F626                  		move.b	(v_pfade_start).w,d0
00001C86 D0C0                       		adda.w	d0,a0
00001C88 1038 F627                  		move.b	(v_pfade_size).w,d0
00001C8C                            
00001C8C                            	@decolour2:
00001C8C 6100                       		bsr.s	FadeOut_DecColour
00001C8E 51C8 FFFC                  		dbf	d0,@decolour2
00001C92 4E75                       		rts	
00001C94                            ; End of function FadeOut_ToBlack
00001C94                            
00001C94                            
00001C94                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001C94                            
00001C94                            
00001C94                            FadeOut_DecColour:
00001C94                            @dered:
00001C94 3410                       		move.w	(a0),d2
00001C96 6700                       		beq.s	@next
00001C98 3202                       		move.w	d2,d1
00001C9A 0241 000E                  		andi.w	#$E,d1
00001C9E 6700                       		beq.s	@degreen
00001CA0 5558                       		subq.w	#2,(a0)+	; decrease red value
00001CA2 4E75                       		rts	
00001CA4                            ; ===========================================================================
00001CA4                            
00001CA4                            @degreen:
00001CA4 3202                       		move.w	d2,d1
00001CA6 0241 00E0                  		andi.w	#$E0,d1
00001CAA 6700                       		beq.s	@deblue
00001CAC 0458 0020                  		subi.w	#$20,(a0)+	; decrease green value
00001CB0 4E75                       		rts	
00001CB2                            ; ===========================================================================
00001CB2                            
00001CB2                            @deblue:
00001CB2 3202                       		move.w	d2,d1
00001CB4 0241 0E00                  		andi.w	#$E00,d1
00001CB8 6700                       		beq.s	@next
00001CBA 0458 0200                  		subi.w	#$200,(a0)+	; decrease blue	value
00001CBE 4E75                       		rts	
00001CC0                            ; ===========================================================================
00001CC0                            
00001CC0                            @next:
00001CC0 5448                       		addq.w	#2,a0
00001CC2 4E75                       		rts	
00001CC4                            ; End of function FadeOut_DecColour
00001CC4                            
00001CC4                            ; ---------------------------------------------------------------------------
00001CC4                            ; Subroutine to	fade in from white (Special Stage)
00001CC4                            ; ---------------------------------------------------------------------------
00001CC4                            
00001CC4                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001CC4                            
00001CC4                            
00001CC4                            PaletteWhiteIn:
00001CC4 31FC 003F F626             		move.w	#$003F,(v_pfade_start).w ; start position = 0; size = $40
00001CCA                            		
00001CCA                            PaletteWhiteIn_Alt:
00001CCA 7000                       		moveq	#0,d0
00001CCC 41F8 FB00                  		lea	(v_pal_dry).w,a0
00001CD0 1038 F626                  		move.b	(v_pfade_start).w,d0
00001CD4 D0C0                       		adda.w	d0,a0
00001CD6 323C 0EEE                  		move.w	#cWhite,d1
00001CDA 1038 F627                  		move.b	(v_pfade_size).w,d0
00001CDE                            
00001CDE                            	@fill:
00001CDE 30C1                       		move.w	d1,(a0)+
00001CE0 51C8 FFFC                  		dbf	d0,@fill 	; fill palette with white
00001CE4                            
00001CE4 383C 0015                  		move.w	#$15,d4
00001CE8                            
00001CE8                            	@mainloop:
00001CE8 11FC 0012 F62A             		move.b	#$12,(v_vbla_routine).w
00001CEE 6100 0000                  		bsr.w	WaitForVBla
00001CF2 6100                       		bsr.s	WhiteIn_FromWhite
00001CF4 6100 F6E4                  		bsr.w	RunPLC
00001CF8 51CC FFEE                  		dbf	d4,@mainloop
00001CFC 4E75                       		rts	
00001CFE                            ; End of function PaletteWhiteIn
00001CFE                            
00001CFE                            
00001CFE                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001CFE                            
00001CFE                            
00001CFE                            WhiteIn_FromWhite:
00001CFE 7000                       		moveq	#0,d0
00001D00 41F8 FB00                  		lea	(v_pal_dry).w,a0
00001D04 43F8 FB80                  		lea	(v_pal_dry_dup).w,a1
00001D08 1038 F626                  		move.b	(v_pfade_start).w,d0
00001D0C D0C0                       		adda.w	d0,a0
00001D0E D2C0                       		adda.w	d0,a1
00001D10 1038 F627                  		move.b	(v_pfade_size).w,d0
00001D14                            
00001D14                            	@decolour:
00001D14 6100                       		bsr.s	WhiteIn_DecColour ; decrease colour
00001D16 51C8 FFFC                  		dbf	d0,@decolour	; repeat for size of palette
00001D1A                            
00001D1A 0C38 0001 FE10             		cmpi.b	#id_LZ,(v_zone).w	; is level Labyrinth?
00001D20 6600                       		bne.s	@exit		; if not, branch
00001D22 7000                       		moveq	#0,d0
00001D24 41F8 FA80                  		lea	(v_pal_water).w,a0
00001D28 43F8 FA00                  		lea	(v_pal_water_dup).w,a1
00001D2C 1038 F626                  		move.b	(v_pfade_start).w,d0
00001D30 D0C0                       		adda.w	d0,a0
00001D32 D2C0                       		adda.w	d0,a1
00001D34 1038 F627                  		move.b	(v_pfade_size).w,d0
00001D38                            
00001D38                            	@decolour2:
00001D38 6100                       		bsr.s	WhiteIn_DecColour
00001D3A 51C8 FFFC                  		dbf	d0,@decolour2
00001D3E                            
00001D3E                            	@exit:
00001D3E 4E75                       		rts	
00001D40                            ; End of function WhiteIn_FromWhite
00001D40                            
00001D40                            
00001D40                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001D40                            
00001D40                            
00001D40                            WhiteIn_DecColour:
00001D40                            @deblue:
00001D40 3419                       		move.w	(a1)+,d2
00001D42 3610                       		move.w	(a0),d3
00001D44 B642                       		cmp.w	d2,d3
00001D46 6700                       		beq.s	@next
00001D48 3203                       		move.w	d3,d1
00001D4A 0441 0200                  		subi.w	#$200,d1	; decrease blue	value
00001D4E 6500                       		blo.s	@degreen
00001D50 B242                       		cmp.w	d2,d1
00001D52 6500                       		blo.s	@degreen
00001D54 30C1                       		move.w	d1,(a0)+
00001D56 4E75                       		rts	
00001D58                            ; ===========================================================================
00001D58                            
00001D58                            @degreen:
00001D58 3203                       		move.w	d3,d1
00001D5A 0441 0020                  		subi.w	#$20,d1		; decrease green value
00001D5E 6500                       		blo.s	@dered
00001D60 B242                       		cmp.w	d2,d1
00001D62 6500                       		blo.s	@dered
00001D64 30C1                       		move.w	d1,(a0)+
00001D66 4E75                       		rts	
00001D68                            ; ===========================================================================
00001D68                            
00001D68                            @dered:
00001D68 5558                       		subq.w	#2,(a0)+	; decrease red value
00001D6A 4E75                       		rts	
00001D6C                            ; ===========================================================================
00001D6C                            
00001D6C                            @next:
00001D6C 5448                       		addq.w	#2,a0
00001D6E 4E75                       		rts	
00001D70                            ; End of function WhiteIn_DecColour
00001D70                            
00001D70                            ; ---------------------------------------------------------------------------
00001D70                            ; Subroutine to fade to white (Special Stage)
00001D70                            ; ---------------------------------------------------------------------------
00001D70                            
00001D70                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001D70                            
00001D70                            
00001D70                            PaletteWhiteOut:
00001D70 31FC 003F F626             		move.w	#$003F,(v_pfade_start).w ; start position = 0; size = $40
00001D76 383C 0015                  		move.w	#$15,d4
00001D7A                            
00001D7A                            	@mainloop:
00001D7A 11FC 0012 F62A             		move.b	#$12,(v_vbla_routine).w
00001D80 6100 0000                  		bsr.w	WaitForVBla
00001D84 6100                       		bsr.s	WhiteOut_ToWhite
00001D86 6100 F652                  		bsr.w	RunPLC
00001D8A 51CC FFEE                  		dbf	d4,@mainloop
00001D8E 4E75                       		rts	
00001D90                            ; End of function PaletteWhiteOut
00001D90                            
00001D90                            
00001D90                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001D90                            
00001D90                            
00001D90                            WhiteOut_ToWhite:
00001D90 7000                       		moveq	#0,d0
00001D92 41F8 FB00                  		lea	(v_pal_dry).w,a0
00001D96 1038 F626                  		move.b	(v_pfade_start).w,d0
00001D9A D0C0                       		adda.w	d0,a0
00001D9C 1038 F627                  		move.b	(v_pfade_size).w,d0
00001DA0                            
00001DA0                            	@addcolour:
00001DA0 6100                       		bsr.s	WhiteOut_AddColour
00001DA2 51C8 FFFC                  		dbf	d0,@addcolour
00001DA6                            
00001DA6 7000                       		moveq	#0,d0
00001DA8 41F8 FA80                  		lea	(v_pal_water).w,a0
00001DAC 1038 F626                  		move.b	(v_pfade_start).w,d0
00001DB0 D0C0                       		adda.w	d0,a0
00001DB2 1038 F627                  		move.b	(v_pfade_size).w,d0
00001DB6                            
00001DB6                            	@addcolour2:
00001DB6 6100                       		bsr.s	WhiteOut_AddColour
00001DB8 51C8 FFFC                  		dbf	d0,@addcolour2
00001DBC 4E75                       		rts	
00001DBE                            ; End of function WhiteOut_ToWhite
00001DBE                            
00001DBE                            
00001DBE                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001DBE                            
00001DBE                            
00001DBE                            WhiteOut_AddColour:
00001DBE                            @addred:
00001DBE 3410                       		move.w	(a0),d2
00001DC0 0C42 0EEE                  		cmpi.w	#cWhite,d2
00001DC4 6700                       		beq.s	@next
00001DC6 3202                       		move.w	d2,d1
00001DC8 0241 000E                  		andi.w	#$E,d1
00001DCC 0C41 000E                  		cmpi.w	#cRed,d1
00001DD0 6700                       		beq.s	@addgreen
00001DD2 5458                       		addq.w	#2,(a0)+	; increase red value
00001DD4 4E75                       		rts	
00001DD6                            ; ===========================================================================
00001DD6                            
00001DD6                            @addgreen:
00001DD6 3202                       		move.w	d2,d1
00001DD8 0241 00E0                  		andi.w	#$E0,d1
00001DDC 0C41 00E0                  		cmpi.w	#cGreen,d1
00001DE0 6700                       		beq.s	@addblue
00001DE2 0658 0020                  		addi.w	#$20,(a0)+	; increase green value
00001DE6 4E75                       		rts	
00001DE8                            ; ===========================================================================
00001DE8                            
00001DE8                            @addblue:
00001DE8 3202                       		move.w	d2,d1
00001DEA 0241 0E00                  		andi.w	#$E00,d1
00001DEE 0C41 0E00                  		cmpi.w	#cBlue,d1
00001DF2 6700                       		beq.s	@next
00001DF4 0658 0200                  		addi.w	#$200,(a0)+	; increase blue	value
00001DF8 4E75                       		rts	
00001DFA                            ; ===========================================================================
00001DFA                            
00001DFA                            @next:
00001DFA 5448                       		addq.w	#2,a0
00001DFC 4E75                       		rts	
00001DFE                            ; End of function WhiteOut_AddColour
00001DFE                            
00001DFE                            ; ---------------------------------------------------------------------------
00001DFE                            ; Palette cycling routine - Sega logo
00001DFE                            ; ---------------------------------------------------------------------------
00001DFE                            
00001DFE                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001DFE                            
00001DFE                            
00001DFE                            
00001DFE                            Pal_Sega1:	incbin	"palette\Sega1.bin"
00001E1E                            Pal_Sega2:	incbin	"palette\Sega2.bin"
00001E3E                            
00001E3E                            ; ---------------------------------------------------------------------------
00001E3E                            ; Subroutines to load palettes
00001E3E                            
00001E3E                            ; input:
00001E3E                            ;	d0 = index number for palette
00001E3E                            ; ---------------------------------------------------------------------------
00001E3E                            
00001E3E                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001E3E                            
00001E3E                            
00001E3E                            PalLoad1:
00001E3E 43F9 0000 0000             		lea	(PalPointers).l,a1
00001E44 E748                       		lsl.w	#3,d0
00001E46 D2C0                       		adda.w	d0,a1
00001E48 2459                       		movea.l	(a1)+,a2	; get palette data address
00001E4A 3659                       		movea.w	(a1)+,a3	; get target RAM address
00001E4C D6FC 0080                  		adda.w	#v_pal_dry_dup-v_pal_dry,a3		; skip to "main" RAM address
00001E50 3E19                       		move.w	(a1)+,d7	; get length of palette data
00001E52                            
00001E52                            	@loop:
00001E52 26DA                       		move.l	(a2)+,(a3)+	; move data to RAM
00001E54 51CF FFFC                  		dbf	d7,@loop
00001E58 4E75                       		rts	
00001E5A                            ; End of function PalLoad1
00001E5A                            
00001E5A                            
00001E5A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001E5A                            
00001E5A                            
00001E5A                            PalLoad2:
00001E5A 43F9 0000 0000             		lea	(PalPointers).l,a1
00001E60 E748                       		lsl.w	#3,d0
00001E62 D2C0                       		adda.w	d0,a1
00001E64 2459                       		movea.l	(a1)+,a2	; get palette data address
00001E66 3659                       		movea.w	(a1)+,a3	; get target RAM address
00001E68 3E19                       		move.w	(a1)+,d7	; get length of palette
00001E6A                            
00001E6A                            	@loop:
00001E6A 26DA                       		move.l	(a2)+,(a3)+	; move data to RAM
00001E6C 51CF FFFC                  		dbf	d7,@loop
00001E70 4E75                       		rts	
00001E72                            ; End of function PalLoad2
00001E72                            
00001E72                            ; ---------------------------------------------------------------------------
00001E72                            ; Underwater palette loading subroutine
00001E72                            ; ---------------------------------------------------------------------------
00001E72                            
00001E72                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001E72                            
00001E72                            
00001E72                            PalLoad3_Water:
00001E72 43F9 0000 0000             		lea	(PalPointers).l,a1
00001E78 E748                       		lsl.w	#3,d0
00001E7A D2C0                       		adda.w	d0,a1
00001E7C 2459                       		movea.l	(a1)+,a2	; get palette data address
00001E7E 3659                       		movea.w	(a1)+,a3	; get target RAM address
00001E80 96FC 0080                  		suba.w	#v_pal_dry-v_pal_water,a3		; skip to "main" RAM address
00001E84 3E19                       		move.w	(a1)+,d7	; get length of palette data
00001E86                            
00001E86                            	@loop:
00001E86 26DA                       		move.l	(a2)+,(a3)+	; move data to RAM
00001E88 51CF FFFC                  		dbf	d7,@loop
00001E8C 4E75                       		rts	
00001E8E                            ; End of function PalLoad3_Water
00001E8E                            
00001E8E                            
00001E8E                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00001E8E                            
00001E8E                            
00001E8E                            PalLoad4_Water:
00001E8E 43F9 0000 0000             		lea	(PalPointers).l,a1
00001E94 E748                       		lsl.w	#3,d0
00001E96 D2C0                       		adda.w	d0,a1
00001E98 2459                       		movea.l	(a1)+,a2	; get palette data address
00001E9A 3659                       		movea.w	(a1)+,a3	; get target RAM address
00001E9C 96FC 0100                  		suba.w	#v_pal_dry-v_pal_water_dup,a3
00001EA0 3E19                       		move.w	(a1)+,d7	; get length of palette data
00001EA2                            
00001EA2                            	@loop:
00001EA2 26DA                       		move.l	(a2)+,(a3)+	; move data to RAM
00001EA4 51CF FFFC                  		dbf	d7,@loop
00001EA8 4E75                       		rts	
00001EAA                            ; End of function PalLoad4_Water
00001EAA                            
00001EAA                            ; ===========================================================================
00001EAA                            
00001EAA                            		include	"_inc\Palette Pointers.asm"
00001EAA                            ; ---------------------------------------------------------------------------
00001EAA                            ; Palette pointers
00001EAA                            ; ---------------------------------------------------------------------------
00001EAA                            
00001EAA                            palp:	macro paladdress,ramaddress,colours
00001EAA                            	dc.l paladdress
00001EAA                            	dc.w ramaddress, (colours>>1)-1
00001EAA                            	endm
00001EAA                            
00001EAA                            PalPointers:
00001EAA                            
00001EAA                            ; palette address, RAM address, colours
00001EAA                            
00001EAA 0000 0000 FB00 001F        ptr_Pal_SegaBG:		palp	Pal_SegaBG,v_pal_dry,$40		; 0 - Sega logo
00001EB2 0000 0000 FB00 001F        ptr_Pal_Title:		palp	Pal_Title,v_pal_dry,$40		; 1 - title screen
00001EBA 0000 0000 FB00 001F        ptr_Pal_LevelSel:	palp	Pal_LevelSel,v_pal_dry,$40		; 2 - level select
00001EC2 0000 0000 FB00 0007        ptr_Pal_Sonic:		palp	Pal_Sonic,v_pal_dry,$10		; 3 - Sonic
00001ECA                            Pal_Levels:
00001ECA 0000 0000 FB20 0017        ptr_Pal_GHZ:		palp	Pal_GHZ,v_pal_dry+$20, $30		; 4 - GHZ
00001ED2 0000 0000 FB20 0017        ptr_Pal_LZ:		palp	Pal_LZ,v_pal_dry+$20,$30		; 5 - LZ
00001EDA 0000 0000 FB20 0017        ptr_Pal_MZ:		palp	Pal_MZ,v_pal_dry+$20,$30		; 6 - MZ
00001EE2 0000 0000 FB20 0017        ptr_Pal_IMZ:		palp	Pal_IMZ,v_pal_dry+$20,$30		
00001EEA 0000 0000 FB20 0017        ptr_Pal_SLZ:		palp	Pal_SLZ,v_pal_dry+$20,$30		; 7 - SLZ
00001EF2 0000 0000 FB20 0017        ptr_Pal_SYZ:		palp	Pal_SYZ,v_pal_dry+$20,$30		; 8 - SYZ
00001EFA 0000 0000 FB20 0017        ptr_Pal_SBZ1:		palp	Pal_SBZ1,v_pal_dry+$20,$30		; 9 - SBZ1
00001F02 0000 0000 FB00 001F        ptr_Pal_Special:	palp	Pal_Special,v_pal_dry,$40		; $A (10) - special stage
00001F0A 0000 0000 FB00 001F        ptr_Pal_LZWater:	palp	Pal_LZWater,v_pal_dry,$40		; $B (11) - LZ underwater
00001F12 0000 0000 FB20 0017        ptr_Pal_SBZ3:		palp	Pal_SBZ3,v_pal_dry+$20,$30		; $C (12) - SBZ3
00001F1A 0000 0000 FB00 001F        ptr_Pal_SBZ3Water:	palp	Pal_SBZ3Water,v_pal_dry,$40		; $D (13) - SBZ3 underwater
00001F22 0000 0000 FB20 0017        ptr_Pal_SBZ2:		palp	Pal_SBZ2,v_pal_dry+$20,$30		; $E (14) - SBZ2
00001F2A 0000 0000 FB00 0007        ptr_Pal_LZSonWater:	palp	Pal_LZSonWater,v_pal_dry,$10	; $F (15) - LZ Sonic underwater
00001F32 0000 0000 FB00 0007        ptr_Pal_SBZ3SonWat:	palp	Pal_SBZ3SonWat,v_pal_dry,$10	; $10 (16) - SBZ3 Sonic underwater
00001F3A 0000 0000 FB00 001F        ptr_Pal_SSResult:	palp	Pal_SSResult,v_pal_dry,$40		; $11 (17) - special stage results
00001F42 0000 0000 FB00 000F        ptr_Pal_Continue:	palp	Pal_Continue,v_pal_dry,$20		; $12 (18) - special stage results continue
00001F4A 0000 1E1E FB00 001F        ptr_Pal_Ending:		palp	Pal_Sega2,v_pal_dry,$40		; $13 (19) - ending sequence
00001F52 0000 0000 FB20 0017        ptr_Pal_CSZ:		palp	Pal_CSZ,v_pal_dry+$20,$30		; 8 - SYZ
00001F5A                            			even
00001F5A                            
00001F5A                            
00001F5A =00000000                  palid_SegaBG:		equ (ptr_Pal_SegaBG-PalPointers)/8
00001F5A =00000001                  palid_Title:		equ (ptr_Pal_Title-PalPointers)/8
00001F5A =00000002                  palid_LevelSel:		equ (ptr_Pal_LevelSel-PalPointers)/8
00001F5A =00000003                  palid_Sonic:		equ (ptr_Pal_Sonic-PalPointers)/8
00001F5A =00000004                  palid_GHZ:		equ (ptr_Pal_GHZ-PalPointers)/8
00001F5A =00000005                  palid_LZ:		equ (ptr_Pal_LZ-PalPointers)/8
00001F5A =00000006                  palid_MZ:		equ (ptr_Pal_MZ-PalPointers)/8
00001F5A =00000007                  palid_IMZ:		equ (ptr_Pal_IMZ-PalPointers)/8
00001F5A =00000008                  palid_SLZ:		equ (ptr_Pal_SLZ-PalPointers)/8
00001F5A =00000009                  palid_SYZ:		equ (ptr_Pal_SYZ-PalPointers)/8
00001F5A =0000000A                  palid_SBZ1:		equ (ptr_Pal_SBZ1-PalPointers)/8
00001F5A =0000000B                  palid_Special:		equ (ptr_Pal_Special-PalPointers)/8
00001F5A =0000000C                  palid_LZWater:		equ (ptr_Pal_LZWater-PalPointers)/8
00001F5A =0000000D                  palid_SBZ3:		equ (ptr_Pal_SBZ3-PalPointers)/8
00001F5A =0000000E                  palid_SBZ3Water:	equ (ptr_Pal_SBZ3Water-PalPointers)/8
00001F5A =0000000F                  palid_SBZ2:		equ (ptr_Pal_SBZ2-PalPointers)/8
00001F5A =00000010                  palid_LZSonWater:	equ (ptr_Pal_LZSonWater-PalPointers)/8
00001F5A =00000011                  palid_SBZ3SonWat:	equ (ptr_Pal_SBZ3SonWat-PalPointers)/8
00001F5A =00000012                  palid_SSResult:		equ (ptr_Pal_SSResult-PalPointers)/8
00001F5A =00000013                  palid_Continue:		equ (ptr_Pal_Continue-PalPointers)/8
00001F5A =00000014                  palid_Ending:		equ (ptr_Pal_Ending-PalPointers)/8
00001F5A =00000015                  palid_CSZ:		equ (ptr_Pal_CSZ-PalPointers)/8
00001F5A =00000015                  palid_CSZ:		equ (ptr_Pal_CSZ-PalPointers)/8
00001F5A                            
00001F5A                            ; ---------------------------------------------------------------------------
00001F5A                            ; Palette data
00001F5A                            ; ---------------------------------------------------------------------------
00001F5A                            Pal_SegaBG:	incbin	"palette\Sega Background.bin"
00001FDA                            Pal_Title:	incbin	"palette\Title Screen.bin"
0000205A                            Pal_LevelSel:	incbin	"palette\Level Select.bin"
000020DA                            Pal_Sonic:	incbin	"palette\Sonic.bin"
000020FA                            Pal_GHZ:	incbin	"palette\Green Hill Zone.bin"
0000215A                            Pal_LZ:		incbin	"palette\Labyrinth Zone.bin"
000021BA                            Pal_LZWater:	incbin	"palette\Labyrinth Zone Underwater.bin"
0000223A                            Pal_MZ:		incbin	"palette\Marble Zone.bin"
0000229A                            Pal_IMZ:	incbin	"palette\Ice Mountain Zone.bin"
000022FA                            Pal_SLZ:	incbin	"palette\Star Light Zone.bin"
0000235A                            Pal_SYZ:	incbin	"palette\Spring Yard Zone.bin"
000023BA                            Pal_SBZ1:	incbin	"palette\Clock Work Zone.bin"
0000241A                            Pal_SBZ2:	incbin	"palette\Clock Work Zone.bin"
0000247A                            Pal_Special:	incbin	"palette\Special Stage.bin"
000024FA                            Pal_SBZ3:	incbin	"palette\SBZ Act 3.bin"
0000255A                            Pal_SBZ3Water:	incbin	"palette\SBZ Act 3 Underwater.bin"
000025DA                            Pal_LZSonWater:	incbin	"palette\Sonic - LZ Underwater.bin"
000025FA                            Pal_SBZ3SonWat:	incbin	"palette\Sonic - SBZ3 Underwater.bin"
0000261A                            Pal_SSResult:	incbin	"palette\Special Stage Results.bin"
0000269A                            Pal_Continue:	incbin	"palette\Special Stage Continue Bonus.bin"
000026DA                            Pal_Ending:	incbin	"palette\Ending.bin"
0000275A                            Pal_CSZ:	incbin	"palette\Cosmic Space Zone.bin"
000027BA                            
000027BA                            ; ---------------------------------------------------------------------------
000027BA                            ; Subroutine to	wait for VBlank routines to complete
000027BA                            ; ---------------------------------------------------------------------------
000027BA                            
000027BA                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000027BA                            
000027BA                            WaitForVBla:
000027BA 46FC 2300                  		enable_ints
000027BE                            
000027BE                            	@wait:
000027BE 4A38 F62A                  		tst.b	(v_vbla_routine).w ; has VBlank routine finished?
000027C2 66FA                       		bne.s	@wait		; if not, branch
000027C4 4E75                       		rts	
000027C6                            ; End of function WaitForVBla
000027C6                            
000027C6                            		include	"_incObj\sub RandomNumber.asm"
000027C6                            ; ---------------------------------------------------------------------------
000027C6                            ; Subroutine to	generate a pseudo-random number	in d0
000027C6                            ; ---------------------------------------------------------------------------
000027C6                            
000027C6                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000027C6                            
000027C6                            
000027C6                            RandomNumber:
000027C6 2238 F636                  		move.l	(v_random).w,d1
000027CA 6600                       		bne.s	@scramble	; if d1 is not 0, branch
000027CC 223C 2A6D 365A             		move.l	#$2A6D365A,d1	; if d1 is 0, use seed number
000027D2                            
000027D2                            	@scramble:
000027D2 2001                       		move.l	d1,d0
000027D4 E581                       		asl.l	#2,d1
000027D6 D280                       		add.l	d0,d1
000027D8 E781                       		asl.l	#3,d1
000027DA D280                       		add.l	d0,d1
000027DC 3001                       		move.w	d1,d0
000027DE 4841                       		swap	d1
000027E0 D041                       		add.w	d1,d0
000027E2 3200                       		move.w	d0,d1
000027E4 4841                       		swap	d1
000027E6 21C1 F636                  		move.l	d1,(v_random).w
000027EA 4E75                       		rts	
000027EA 4E75                       		rts	
000027EC                            		include	"_incObj\sub CalcSine.asm"
000027EC                            ; ---------------------------------------------------------------------------
000027EC                            ; Subroutine calculate a sine
000027EC                            
000027EC                            ; input:
000027EC                            ;	d0 = angle
000027EC                            
000027EC                            ; output:
000027EC                            ;	d0 = sine
000027EC                            ;	d1 = cosine
000027EC                            ; ---------------------------------------------------------------------------
000027EC                            
000027EC                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000027EC                            
000027EC                            
000027EC                            CalcSine:
000027EC 0240 00FF                  		andi.w	#$FF,d0
000027F0 D040                       		add.w	d0,d0
000027F2 0640 0080                  		addi.w	#$80,d0
000027F6 323B 0000                  		move.w	Sine_Data(pc,d0.w),d1
000027FA 0440 0080                  		subi.w	#$80,d0
000027FE 303B 0000                  		move.w	Sine_Data(pc,d0.w),d0
00002802 4E75                       		rts	
00002804                            ; End of function CalcSine
00002804                            
00002804                            ; ===========================================================================
00002804                            
00002804                            Sine_Data:	incbin	"misc\sinewave.bin"	; values for a 360 sine wave
00002A84                            
00002A84                            ; ===========================================================================
00002A84                            
00002A84                            ; The following code is unused garbage.
00002A84                            
00002A84 48E7 6000                  		movem.l	d1-d2,-(sp)
00002A88 3200                       		move.w	d0,d1
00002A8A 4841                       		swap	d1
00002A8C 7000                       		moveq	#0,d0
00002A8E 3200                       		move.w	d0,d1
00002A90 7407                       		moveq	#7,d2
00002A92                            
00002A92                            	loc_2C80:
00002A92 E599                       		rol.l	#2,d1
00002A94 D040                       		add.w	d0,d0
00002A96 5240                       		addq.w	#1,d0
00002A98 9240                       		sub.w	d0,d1
00002A9A 6400                       		bcc.s	loc_2C9A
00002A9C D240                       		add.w	d0,d1
00002A9E 5340                       		subq.w	#1,d0
00002AA0 51CA FFF0                  		dbf	d2,loc_2C80
00002AA4 E248                       		lsr.w	#1,d0
00002AA6 4CDF 0006                  		movem.l	(sp)+,d1-d2
00002AAA 4E75                       		rts	
00002AAC                            ; ===========================================================================
00002AAC                            
00002AAC                            	loc_2C9A:
00002AAC 5240                       		addq.w	#1,d0
00002AAE 51CA FFE2                  		dbf	d2,loc_2C80
00002AB2 E248                       		lsr.w	#1,d0
00002AB4 4CDF 0006                  		movem.l	(sp)+,d1-d2
00002AB8 4E75                       		rts	
00002ABA                            		include	"_incObj\sub CalcAngle.asm"
00002ABA                            ; ---------------------------------------------------------------------------
00002ABA                            ; Subroutine calculate an angle
00002ABA                            
00002ABA                            ; input:
00002ABA                            ;	d1 = x-axis distance
00002ABA                            ;	d2 = y-axis distance
00002ABA                            
00002ABA                            ; output:
00002ABA                            ;	d0 = angle
00002ABA                            ; ---------------------------------------------------------------------------
00002ABA                            
00002ABA                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00002ABA                            
00002ABA                            
00002ABA                            CalcAngle:
00002ABA 48E7 1800                  		movem.l	d3-d4,-(sp)
00002ABE 7600                       		moveq	#0,d3
00002AC0 7800                       		moveq	#0,d4
00002AC2 3601                       		move.w	d1,d3
00002AC4 3802                       		move.w	d2,d4
00002AC6 8843                       		or.w	d3,d4
00002AC8 6700                       		beq.s	loc_2D04
00002ACA 3802                       		move.w	d2,d4
00002ACC 4A43                       		tst.w	d3
00002ACE 6A00 0000                  		bpl.w	loc_2CC2
00002AD2 4443                       		neg.w	d3
00002AD4                            
00002AD4                            loc_2CC2:
00002AD4 4A44                       		tst.w	d4
00002AD6 6A00 0000                  		bpl.w	loc_2CCA
00002ADA 4444                       		neg.w	d4
00002ADC                            
00002ADC                            loc_2CCA:
00002ADC B843                       		cmp.w	d3,d4
00002ADE 6400 0000                  		bcc.w	loc_2CDC
00002AE2 E18C                       		lsl.l	#8,d4
00002AE4 88C3                       		divu.w	d3,d4
00002AE6 7000                       		moveq	#0,d0
00002AE8 103B 4000                  		move.b	Angle_Data(pc,d4.w),d0
00002AEC 6000                       		bra.s	loc_2CE6
00002AEE                            ; ===========================================================================
00002AEE                            
00002AEE                            loc_2CDC:
00002AEE E18B                       		lsl.l	#8,d3
00002AF0 86C4                       		divu.w	d4,d3
00002AF2 7040                       		moveq	#$40,d0
00002AF4 903B 3000                  		sub.b	Angle_Data(pc,d3.w),d0
00002AF8                            
00002AF8                            loc_2CE6:
00002AF8 4A41                       		tst.w	d1
00002AFA 6A00 0000                  		bpl.w	loc_2CF2
00002AFE 4440                       		neg.w	d0
00002B00 0640 0080                  		addi.w	#$80,d0
00002B04                            
00002B04                            loc_2CF2:
00002B04 4A42                       		tst.w	d2
00002B06 6A00 0000                  		bpl.w	loc_2CFE
00002B0A 4440                       		neg.w	d0
00002B0C 0640 0100                  		addi.w	#$100,d0
00002B10                            
00002B10                            loc_2CFE:
00002B10 4CDF 0018                  		movem.l	(sp)+,d3-d4
00002B14 4E75                       		rts	
00002B16                            ; ===========================================================================
00002B16                            
00002B16                            loc_2D04:
00002B16 303C 0040                  		move.w	#$40,d0
00002B1A 4CDF 0018                  		movem.l	(sp)+,d3-d4
00002B1E 4E75                       		rts	
00002B20                            ; End of function CalcAngle
00002B20                            
00002B20                            ; ===========================================================================
00002B20                            
00002B20                            Angle_Data:	incbin	"misc\angles.bin"
00002C22                            
00002C22                            ; ===========================================================================
00002C22                            ; ===========================================================================
00002C22                            
00002C22                            GM_Sega:
00002C22 6100 E7A8                          bsr.w   ClearPLC
00002C26 6100 F01E                          bsr.w   PaletteFadeOut
00002C2A 4DF9 00C0 0004                     lea ($C00004).l,a6
00002C30 3CBC 8004                          move.w  #$8004,(a6)
00002C34 3CBC 8230                          move.w  #$8200+(vram_fg>>10),(a6)   ; set foreground nametable address
00002C38 3CBC 8407                          move.w  #$8400+(vram_bg>>13),(a6)   ; set background nametable address
00002C3C                             ;       move.w  #$8700,(a6)         ; set background colour (palette entry 0)
00002C3C 3CBC 8B00                          move.w  #$8B00,(a6)         ; full-screen vertical scrolling
00002C40 3CBC 8134                          move.w  #$8134,(a6)         ; disable display
00002C44 4238 F64E                          clr.b   (f_wtr_state).w
00002C48 46FC 2700                          move    #$2700,sr
00002C4C 6100 E464                          bsr.w   ClearScreen
00002C5A 41F9 0000 0000                     lea (Nem_OtherSegaLogo).l,a0     ; load OtherSega logo patterns on tile #1
00002C60 6100 E5CC                          bsr.w   NemDec
00002C64 43F9 00FF 0000                     lea ($FF0000).l,a1
00002C6A 41F9 0000 0000                     lea (Eni_OtherSegaLogo).l,a0     ; load OtherSega logo mappings
00002C70 7001                               moveq   #1,d0               ; start from tile #1
00002C72 6100 E898                          bsr.w   EniDec
00002C76 43F9 00FF 0000 203C 6404+          copyTilemap $FF0000,(vram_bg+$404),((320/8)-1),((320/8)-1) ;not found
00002C92                             
00002C92                            ;        tst.b   (v_megadrive).w         ; is console Japanese?
00002C92                            ;        bpl.s   @jmp0               ; if yes, branch
00002C9A                            ;        move.l  #$00310032,(a6)         ; and write "TM"
00002C9A 33FC 0EEE FFFF FB02        @jmp0:      move.w  #$EEE,v_pal_dry+$02
00002CA2 33FC FFFE FFFF F632                move.w  #-2,v_pcyc_num          ; minus size of an entry
00002CAA 31FC 0001 F634                     move.w  #1,(v_pcyc_time).w
00002CB0                             
00002CB0 43F9 FFFF FB04                     lea v_pal_dry+$04,a1
00002CB6 6100 0000                          bsr Palcycle_OtherSega
00002CBA 33FC 8174 00C0 0004                move.w  #$8174,$C00004          ; enable display
00002CC2                            ;        bsr.w   PaletteFadeIn
00002CC2                                ;    sfx $90,0,1,1          ; play "OtherSega" sound
00002CC2 31FC 012C F614                     move.w  #10*30,(v_demolength).w      ; stay for 3 seconds
00002CC8                             
00002CC8                            OtherSega_WaitEnd:
00002CC8 11FC 0002 F62A                     move.b  #2,(v_vbla_routine).w
00002CCE 6100 FAEA                          bsr.w   WaitForVBla
00002CD2 43F9 FFFF FB04                     lea v_pal_dry+$04,a1
00002CD8 6100 0000                          bsr Palcycle_OtherSega
00002CDC 4A78 F614                          tst.w   (v_demolength).w
00002CE0 6700                               beq.s   OtherSega_GotoTitle
00002CE2 0238 0080 F605                     andi.b  #btnStart,(v_jpadpress1).w  ; is Start button pressed?
00002CE8 67DE                               beq.s   OtherSega_WaitEnd            ; if not, branch
00002CEA                             
00002CEA                            OtherSega_GotoTitle:
00002CEA                            	;	sfx	$C3,0,1,1	; play warp sound
00002CEA                            	;	bsr.w	PaletteWhiteOut
00002CEA 11FC 0004 F600                     move.b  #$04,(v_gamemode).w
00002CF0 4E75                               rts
00002CF2                             
00002CF2                            Palcycle_OtherSega:
00002CF2 5379 FFFF F634                     subq.w  #1,v_pcyc_time
00002CF8 6600                               bne.s   @return
00002CFA 33FC 0003 FFFF F634                move.w  #3,v_pcyc_time
00002D02 5479 FFFF F632                     addq.w  #2,v_pcyc_num
00002D08 0C79 0000 FFFF F632                cmpi.w  #@cycle_size,v_pcyc_num     ; past cycle's size?
00002D10 6600                               bne.s   @jmp0               ; if not, branch
00002D12 33FC 0000 FFFF F632                move.w  #0,v_pcyc_num           ; if yes, reset
00002D1A 3039 FFFF F632             @jmp0:      move.w  v_pcyc_num,d0
00002D20 41FB 0000                          lea @cycle(pc,d0.w),a0
00002D24                                    rept    4               ; repeat next line 4 times      ; --> transfer 9 colors in total
00002D24                                        move.l  (a0)+,(a1)+     ; copy 2 colors and increment pointers
00002D24 22D8 22D8 22D8 22D8                endr
00002D2C 3290                               move.w  (a0),(a1)           ; copy last color
00002D2E 4E75                       @return:    rts
00002D30                             
00002D30 0EC0                       @cycle:     dc.w    $EC0
00002D32 0EA0 0E80 0E60 0E40 0E20+          dc.w    $EA0, $E80, $E60, $E40, $E20, $E00
00002D3E 0C00                               dc.w    $C00
00002D40 0E00 0E20 0E40 0E60 0E80+          dc.w    $E00, $E20, $E40, $E60, $E80, $EA0
00002D4C                            @cycle_end: ; remaining half copy before loop. Making it CPU-friendly
00002D4C 0EC0                               dc.w    $EC0
00002D4E 0EA0 0E80 0E60 0E40 0E20+          dc.w    $EA0, $E80, $E60, $E40, $E20, $E00
00002D5A 0C00                               dc.w    $C00
00002D5C =0000001C                  @cycle_size:=   @cycle_end-@cycle
00002D5C                            ; ===========================================================================
00002D5C                            
00002D5C                            GM_RadNexAff:
00002D5C 103C 0096                      move.b  #$96,d0             ; set music ID 
00002D60 4EB8 118A                      jsr     Playsound_Special.w     ; play ID
00002D64 4EB9 0000 1C46                 jsr     PaletteFadeOut          ; fade palettes out
00002D6A 4EB8 10B2                      jsr     ClearScreen.w           ; clear the plane mappings
00002D6E                                ; load art, mappings and the palette
00002D6E 43F9 00FF 0000                 lea     ($FF0000).l,a1          ; load dump location
00002D74 41F9 0000 0000                 lea     MAPS_RAD.l,a0          ; load compressed mappings address
00002D7A 303C 0140                      move.w #320,d0                  ; prepare pattern index value to patch to mappings
00002D7E 4EB8 150C                      jsr    EniDec.w                 ; decompress and dump
00002D82 203C 6000 0003                 move.l #$60000003,d0            ; prepare VRAM write mode address (Plane B E000)
00002D88 7227                           moveq  #$28-$01,d1              ; set map box draw width
00002D8A 741D                           moveq  #$1E-$01,d2              ; set map box draw height
00002D8C 6100 E480                      bsr.w   TilemapToVRAM         ; flush mappings to VRAM
00002D90 4DF9 FFC0 0004                 lea    ($FFC00004).l,a6         ; load VDP control port
00002D96 2CBC 6800 0000                 move.l #$68000000,(a6)          ; set VDP to VRAM write mode (Address 2800)
00002D9C 41F9 0000 0000                 lea     ART_RAD.l,a0           ; load background art
00002DA2 4EB9 0000 122E                 jsr     NemDec              ; run NemDec to decompress art for display
00002DA8 41F9 0000 0000                 lea Pal_RAD.l,a0        ; load this palette
00002DAE 43F9 FFFF FB80                 lea ($FFFFFB80).l,a1        ; set as line 2
00002DB4 303C 000F                      move.w  #$F,d0
00002DB8                             
00002DB8                            RadNexAff_PalLoop:
00002DB8 22D8                           move.l  (a0)+,(a1)+         ; copy colours to buffer
00002DBA 22D8                           move.l  (a0)+,(a1)+         ; ''
00002DBC 51C8 FFFA                      dbf d0,RadNexAff_PalLoop      ; repeat until done
00002DC0 4EB9 0000 1BA0                 jsr PaletteFadeIn          ; fade palette in
00002DC6 31FC 00B4 F614                 move.w  #3*60,($FFFFF614).w     ; set delay time (3 seconds on a 60hz system)
00002DCC                             
00002DCC                            Rad_MainLoop:
00002DCC 11FC 0002 F62A                 move.b  #2,($FFFFF62A).w        ; set V-blank routine to run
00002DD2 4EB9 0000 27BA                 jsr WaitForVBla          ; wait for V-blank (decreases "Demo_Time_left")
00002DD8 4A38 F605                      tst.b   ($FFFFF605).w           ; has player 1 pressed start button?
00002DDC 6B00                           bmi.s   Rad_GotoTitle         ; if so, branch
00002DDE 4A78 F614                      tst.w   ($FFFFF614).w           ; has the delay time finished?
00002DE2 66E8                           bne.s   Rad_MainLoop          ; if not, branch
00002DE4                             
00002DE4                            Rad_GotoTitle:
00002DE4 11FC 0004 F600                 move.b  #$04,($FFFFF600).w      ; set the screen mode to Title Screen
00002DEA 4E75                           rts                     ; return
00002DEC                            	
00002DEC                            GM_SimpleCreds:
00002DEC 103C 0090                      move.b  #$90,d0             ; set music ID 
00002DF0 4EB8 118A                      jsr     Playsound_Special.w     ; play ID
00002DF4 4EB9 0000 1C46                 jsr     PaletteFadeOut          ; fade palettes out
00002DFA 4EB8 10B2                      jsr     ClearScreen.w           ; clear the plane mappings
00002DFE                                ; load art, mappings and the palette
00002DFE 43F9 00FF 0000                 lea     ($FF0000).l,a1          ; load dump location
00002E04 41F9 0000 0000                 lea     MAPS_CRED.l,a0          ; load compressed mappings address
00002E0A 303C 0140                      move.w #320,d0                  ; prepare pattern index value to patch to mappings
00002E0E 4EB8 150C                      jsr    EniDec.w                 ; decompress and dump
00002E12 203C 6000 0003                 move.l #$60000003,d0            ; prepare VRAM write mode address (Plane B E000)
00002E18 7227                           moveq  #$28-$01,d1              ; set map box draw width
00002E1A 741D                           moveq  #$1E-$01,d2              ; set map box draw height
00002E1C 6100 E3F0                      bsr.w   TilemapToVRAM         ; flush mappings to VRAM
00002E20 4DF9 FFC0 0004                 lea    ($FFC00004).l,a6         ; load VDP control port
00002E26 2CBC 6800 0000                 move.l #$68000000,(a6)          ; set VDP to VRAM write mode (Address 2800)
00002E2C 41F9 0000 0000                 lea     ART_CRED.l,a0           ; load background art
00002E32 4EB9 0000 122E                 jsr     NemDec              ; run NemDec to decompress art for display
00002E38 41F9 0000 0000                 lea Pal_CRED.l,a0        ; load this palette
00002E3E 43F9 FFFF FB80                 lea ($FFFFFB80).l,a1        ; set as line 2
00002E44 303C 000F                      move.w  #$F,d0
00002E48                             
00002E48                            Creds_PalLoop:
00002E48 22D8                           move.l  (a0)+,(a1)+         ; copy colours to buffer
00002E4A 22D8                           move.l  (a0)+,(a1)+         ; ''
00002E4C 51C8 FFFA                      dbf d0,Creds_PalLoop      ; repeat until done
00002E50 4EB9 0000 1BA0                 jsr PaletteFadeIn          ; fade palette in
00002E56 31FC 2274 F614                 move.w  #147*60,($FFFFF614).w     ; set delay time (3 seconds on a 60hz system)
00002E5C                             
00002E5C                            Creds_MainLoop:
00002E5C 11FC 0002 F62A                 move.b  #2,($FFFFF62A).w        ; set V-blank routine to run
00002E62 4EB9 0000 27BA                 jsr WaitForVBla          ; wait for V-blank (decreases "Demo_Time_left")
00002E68 4A38 F605                      tst.b   ($FFFFF605).w           ; has player 1 pressed start button?
00002E6C 6B00                           bmi.s   Creds_GotoTitle         ; if so, branch
00002E6E 4A78 F614                      tst.w   ($FFFFF614).w           ; has the delay time finished?
00002E72 66E8                           bne.s   Creds_MainLoop          ; if not, branch
00002E74                             
00002E74                            Creds_GotoTitle:
00002E74 11FC 0004 F600                 move.b  #$04,($FFFFF600).w      ; set the screen mode to Title Screen
00002E7A 4E75                           rts                     ; return
00002E7C                            
00002E7C                            ; ===========================================================================
00002E7C                            
00002E7C                            ; ---------------------------------------------------------------------------
00002E7C                            ; Title	screen
00002E7C                            ; ---------------------------------------------------------------------------
00002E7C                            
00002E7C                            GM_Title:
00002E84 6100 E546                  		bsr.w	ClearPLC
00002E88 6100 EDBC                  		bsr.w	PaletteFadeOut
00002E8C 46FC 2700                  		disable_ints
00002E90 6100 E2AE                  		bsr.w	SoundDriverLoad
00002E94 4DF9 00C0 0004             		lea	(vdp_control_port).l,a6
00002E9A 3CBC 8004                  		move.w	#$8004,(a6)	; 8-colour mode
00002E9E 3CBC 8230                  		move.w	#$8200+(vram_fg>>10),(a6) ; set foreground nametable address
00002EA2 3CBC 8407                  		move.w	#$8400+(vram_bg>>13),(a6) ; set background nametable address
00002EA6 3CBC 9001                  		move.w	#$9001,(a6)	; 64-cell hscroll size
00002EAA 3CBC 9200                  		move.w	#$9200,(a6)	; window vertical position
00002EAE 3CBC 8B03                  		move.w	#$8B03,(a6)
00002EB2 3CBC 8720                  		move.w	#$8720,(a6)	; set background colour (palette line 2, entry 0)
00002EB6 4238 F64E                  		clr.b	(f_wtr_state).w
00002EBA 6100 E1F6                  		bsr.w	ClearScreen
00002EBE                            
00002EBE 43F8 D000                  		lea	(v_objspace).w,a1
00002EC2 7000                       		moveq	#0,d0
00002EC4 323C 07FF                  		move.w	#$7FF,d1
00002EC8                            
00002EC8                            	Tit_ClrObj1:
00002EC8 22C0                       		move.l	d0,(a1)+
00002ECA 51C9 FFFC                  		dbf	d1,Tit_ClrObj1	; fill object space ($D000-$EFFF) with 0
00002ECE                            
00002ED8 41F9 0000 0000             		lea	(Nem_JapNames).l,a0 ; load Japanese credits
00002EDE 6100 E34E                  		bsr.w	NemDec
00002EEC 41F9 0000 0000             		lea	(Nem_CreditText).l,a0 ;	load alphabet
00002EF2 6100 E33A                  		bsr.w	NemDec
00002EF6 43F9 00FF 0000             		lea	($FF0000).l,a1
00002EFC 41F9 0000 0000             		lea	(Eni_JapNames).l,a0 ; load mappings for	Japanese credits
00002F02 303C 0000                  		move.w	#0,d0
00002F06 6100 E604                  		bsr.w	EniDec
00002F0A                            
00002F0A 43F9 00FF 0000 203C 4000+  		copyTilemap	$FF0000,$C000,$27,$1B
00002F1E                            
00002F1E 43F8 FB80                  		lea	(v_pal_dry_dup).w,a1
00002F22 7000                       		moveq	#cBlack,d0
00002F24 323C 001F                  		move.w	#$1F,d1
00002F28                            
00002F28                            	Tit_ClrPal:
00002F28 22C0                       		move.l	d0,(a1)+
00002F2A 51C9 FFFC                  		dbf	d1,Tit_ClrPal	; fill palette with 0 (black)
00002F2E                            
00002F2E 7003                       		moveq	#palid_Sonic,d0	; load Sonic's palette
00002F30 6100 EF0C                  		bsr.w	PalLoad1
00002F34                            	;	move.b	#id_CreditsText,(v_objspace+$80).w ; load "SONIC TEAM PRESENTS" object
00002F34 4EB9 0000 0000             		jsr	(ExecuteObjects).l
00002F3A 4EB9 0000 0000             		jsr	(BuildSprites).l
00002F40 6100 EC5E                  		bsr.w	PaletteFadeIn
00002F44 46FC 2700                  		disable_ints
00002F52 41F9 0000 0000             		lea	(Nem_TitleSonic).l,a0 ;	load Sonic title screen	patterns
00002F58 6100 E2D4                  		bsr.w	NemDec
00002F66 41F9 0000 0000             		lea	(Nem_TitleFg).l,a0 ; load title	screen patterns
00002F6C 6100 E2C0                  		bsr.w	NemDec
00002F70                            	;	locVRAM	$A200
00002F70                            	;	lea	(Nem_TitleTM).l,a0 ; load "TM" patterns
00002F70                            	;	bsr.w	NemDec
00002F70 4DF9 00C0 0000             		lea	(vdp_data_port).l,a6
00002F7E 4BF9 0000 03DE             		lea	(Art_Text).l,a5	; load level select font
00002F84 323C 028F                  		move.w	#$28F,d1
00002F88                            
00002F88                            	Tit_LoadText:
00002F88 3C9D                       		move.w	(a5)+,(a6)
00002F8A 51C9 FFFC                  		dbf	d1,Tit_LoadText	; load level select font
00002F8E                            
00002F8E 11FC 0000 FE30             		move.b	#0,(v_lastlamp).w ; clear lamppost counter
00002F94 31FC 0000 FE08             		move.w	#0,(v_debuguse).w ; disable debug item placement mode
00002F9A 31FC 0000 FFF0             		move.w	#0,(f_demo).w	; disable debug mode
00002FA0 31FC 0000 FFEA             		move.w	#0,($FFFFFFEA).w ; unused variable
00002FA6 31FC 0600 FE10             		move.w	#(6<<8),(v_zone).w	; set level to GHZ (00)
00002FAC 31FC 0000 F634             		move.w	#0,(v_pcyc_time).w ; disable palette cycling
00002FB2 6100 0000                  		bsr.w	LevelSizeLoad
00002FB6 6100 0000                  		bsr.w	DeformLayers
00002FBA 43F8 B000                  		lea	(v_16x16).w,a1
00002FBE 41F9 0000 0000             		lea	(Blk16_GHZ).l,a0 ; load	GHZ 16x16 mappings
00002FC4 303C 0000                  		move.w	#0,d0
00002FC8 6100 E542                  		bsr.w	EniDec
00002FCC 41F9 0000 0000             		lea	(Blk256_GHZ).l,a0 ; load GHZ 256x256 mappings
00002FD2 43F9 00FF 0000             		lea	(v_256x256).l,a1
00002FD8 6100 E6B0                  		bsr.w	KosDec
00002FDC 6100 0000                  		bsr.w	LevelLayoutLoad
00002FE0 6100 EC64                  		bsr.w	PaletteFadeOut
00002FE4 46FC 2700                  		disable_ints
00002FE8 6100 E0C8                  		bsr.w	ClearScreen
00002FEC 4BF9 00C0 0004             		lea	(vdp_control_port).l,a5
00002FF2 4DF9 00C0 0000             		lea	(vdp_data_port).l,a6
00002FF8 47F8 F708                  		lea	(v_bgscreenposx).w,a3
00002FFC 49F8 A440                  		lea	(v_lvllayout+$40).w,a4
00003000 343C 6000                  		move.w	#$6000,d2
00003004 6100 0000                  		bsr.w	DrawChunks
00003008 43F9 00FF 0000             		lea	($FF0000).l,a1
0000300E 41F9 0000 0000             		lea	(Eni_Title).l,a0 ; load	title screen mappings
00003014 303C 0000                  		move.w	#0,d0
00003018 6100 E4F2                  		bsr.w	EniDec
0000301C                            
0000301C 43F9 00FF 0000 203C 4208+  		copyTilemap	$FF0000,$C208,$21,$15
00003030                            
0000303A 41F9 0000 0000             		lea	(Nem_GHZ).l,a0 ; load GHZ patterns
00003040 6100 E1EC                  		bsr.w	NemDec
0000304E 41F9 0000 0000             		lea	(Nem_TitleBlank).l,a0 ;	load vram blanker
00003054 6100 E1D8                  		bsr.w	NemDec
00003058 7001                       		moveq	#palid_Title,d0	; load title screen palette
0000305A 6100 EDE2                  		bsr.w	PalLoad1
00003068 41F9 0000 0000             		lea	(Nem_TitleFg).l,a0 ; load title	screen patterns
0000306E 6100 E1BE                  		bsr.w	NemDec
0000307A 11FC 0000 FFFA             		move.b	#0,(f_debugmode).w ; disable debug mode
00003080 31FC 04B9 F614             		move.w	#$4B9,(v_demolength).w ; run title screen for $4B9 frames
00003086 43F8 D080                  		lea	(v_objspace+$80).w,a1
0000308A 7000                       		moveq	#0,d0
0000308C 323C 0007                  		move.w	#7,d1
00003090                            
00003090                            	Tit_ClrObj2:
00003090 22C0                       		move.l	d0,(a1)+
00003092 51C9 FFFC                  		dbf	d1,Tit_ClrObj2
00003096                            
00003096 11FC 0000 D040             		move.b	#id_TitleSonic,(v_objspace+$40).w ; load big Sonic object
0000309C 11FC 0000 D080             		move.b	#id_PSBTM,(v_objspace+$80).w ; load "PRESS START BUTTON" object
000030A2                            
000030A2                            
000030A2 11FC 0000 D0C0             		move.b	#id_PSBTM,(v_objspace+$C0).w ; load "TM" object
000030A8 11FC 0003 D0DA             		move.b	#3,(v_objspace+$C0+obFrame).w
000030AE                            	@isjap:
000030AE 11FC 0000 D100             		move.b	#id_PSBTM,(v_objspace+$100).w ; load object which hides part of Sonic
000030B4 11FC 0002 D11A             		move.b	#2,(v_objspace+$100+obFrame).w
000030BA 4EB9 0000 0000             		jsr	(ExecuteObjects).l
000030C0 6100 0000                  		bsr.w	DeformLayers
000030C4 4EB9 0000 0000             		jsr	(BuildSprites).l
000030CA 7000                       		moveq	#plcid_Main,d0
000030CC 6100 E2D2                  		bsr.w	NewPLC
000030D0 31FC 0000 FFE4             		move.w	#0,(v_title_dcount).w
000030D6 31FC 0000 FFE6             		move.w	#0,(v_title_ccount).w
000030DC 3038 F60C                  		move.w	(v_vdp_buffer1).w,d0
000030E0 0000 0040                  		ori.b	#$40,d0
000030E4 33C0 00C0 0004             		move.w	d0,(vdp_control_port).l
000030EA 6100 EAB4                  		bsr.w	PaletteFadeIn
000030EE                            
000030EE                            Tit_MainLoop:
000030EE 11FC 0004 F62A             		move.b	#4,(v_vbla_routine).w
000030F4 6100 F6C4                  		bsr.w	WaitForVBla
000030F8 4EB9 0000 0000             		jsr	(ExecuteObjects).l
000030FE 6100 0000                  		bsr.w	DeformLayers
00003102 4EB9 0000 0000             		jsr	(BuildSprites).l
00003108                            	;	bsr.w	PCycle_Title
00003108 6100 E2D0                  		bsr.w	RunPLC
0000310C 3038 D008                  		move.w	(v_objspace+obX).w,d0
00003110 5240                       		addq.w	#1,d0
00003112 31C0 D00C                  		move.w	d0,(v_objspace+obY).w ; move Sonic to the right
00003116 0C40 1C00                  		cmpi.w	#$1C00,d0	; has Sonic object passed $1C00 on x-axis?
0000311A 6500                       		blo.s	Tit_ChkRegion	; if not, branch
0000311C                            
0000311C 11FC 0000 F600             		move.b	#id_Sega,(v_gamemode).w ; go to Sega screen
00003122 4E75                       		rts	
00003124                            ; ===========================================================================
00003124                            
00003124                            Tit_ChkRegion:
00003124 4A38 FFF8                  		tst.b	(v_megadrive).w	; check	if the machine is US or	Japanese
00003128 6A00                       		bpl.s	Tit_RegionJap	; if Japanese, branch
0000312A                            
0000312A 41F9 0000 0000             		lea	(LevSelCode_US).l,a0 ; load US code
00003130 6000                       		bra.s	Tit_EnterCheat
00003132                            
00003132                            	Tit_RegionJap:
00003132 41F9 0000 0000             		lea	(LevSelCode_J).l,a0 ; load J code
00003138                            
00003138                            Tit_EnterCheat:
00003138 3038 FFE4                  		move.w	(v_title_dcount).w,d0
0000313C D0C0                       		adda.w	d0,a0
0000313E 1038 F605                  		move.b	(v_jpadpress1).w,d0 ; get button press
00003142 0200 000F                  		andi.b	#btnDir,d0	; read only UDLR buttons
00003146 B010                       		cmp.b	(a0),d0		; does button press match the cheat code?
00003148 6600                       		bne.s	Tit_ResetCheat	; if not, branch
0000314A 5278 FFE4                  		addq.w	#1,(v_title_dcount).w ; next button press
0000314E 4A00                       		tst.b	d0
00003150 6600                       		bne.s	Tit_CountC
00003152 41F8 F608                  		lea	(f_levselcheat).w,a0
00003156 3238 FFE6                  		move.w	(v_title_ccount).w,d1
0000315A E249                       		lsr.w	#1,d1
0000315C 0241 0003                  		andi.w	#3,d1
00003160 6700                       		beq.s	Tit_PlayRing
00003162 4A38 FFF8                  		tst.b	(v_megadrive).w
00003166 6A00                       		bpl.s	Tit_PlayRing
00003168 7201                       		moveq	#1,d1
0000316A 1181 1001                  		move.b	d1,1(a0,d1.w)	; cheat depends on how many times C is pressed
0000316E                            
0000316E                            	Tit_PlayRing:
0000316E 11BC 0001 1000             		move.b	#1,(a0,d1.w)	; activate cheat
0000317C 6000                       		bra.s	Tit_CountC
0000317E                            ; ===========================================================================
0000317E                            
0000317E                            Tit_ResetCheat:
0000317E 4A00                       		tst.b	d0
00003180 6700                       		beq.s	Tit_CountC
00003182 0C78 0009 FFE4             		cmpi.w	#9,(v_title_dcount).w
00003188 6700                       		beq.s	Tit_CountC
0000318A 31FC 0000 FFE4             		move.w	#0,(v_title_dcount).w ; reset UDLR counter
00003190                            
00003190                            Tit_CountC:
00003190 1038 F605                  		move.b	(v_jpadpress1).w,d0
00003194 0200 0020                  		andi.b	#btnC,d0	; is C button pressed?
00003198 6700                       		beq.s	loc_3230	; if not, branch
0000319A 5278 FFE6                  		addq.w	#1,(v_title_ccount).w ; increment C counter
0000319E                            
0000319E                            loc_3230:
0000319E 4A78 F614                  		tst.w	(v_demolength).w
000031A2 6700 0000                  		beq.w	GotoDemo
000031A6 0238 0080 F605             		andi.b	#btnStart,(v_jpadpress1).w ; check if Start is pressed
000031AC 6700 FF40                  		beq.w	Tit_MainLoop	; if not, branch
000031B0                            
000031B0                            Tit_ChkLevSel:
000031B0 4A38 F608                  		tst.b	(f_levselcheat).w ; check if level select code is on
000031B4 6700 0000                  		beq.w	PlayLevelC	; if not, play level
000031B8 0838 0006 F604             		btst	#bitA,(v_jpadhold1).w ; check if A is pressed
000031BE 6700 0000                  		beq.w	PlayLevelC	; if not, play level
000031C2                            
000031C2 7002                       		moveq	#palid_LevelSel,d0
000031C4 6100 EC94                  		bsr.w	PalLoad2	; load level select palette
000031C8 43F8 CC00                  		lea	(v_hscrolltablebuffer).w,a1
000031CC 7000                       		moveq	#0,d0
000031CE 323C 00DF                  		move.w	#$DF,d1
000031D2                            
000031D2                            	Tit_ClrScroll1:
000031D2 22C0                       		move.l	d0,(a1)+
000031D4 51C9 FFFC                  		dbf	d1,Tit_ClrScroll1 ; clear scroll data (in RAM)
000031D8                            
000031D8 21C0 F616                  		move.l	d0,(v_scrposy_dup).w
000031DC 46FC 2700                  		disable_ints
000031E0 4DF9 00C0 0000             		lea	(vdp_data_port).l,a6
000031F0 323C 03FF                  		move.w	#$3FF,d1
000031F4                            
000031F4                            	Tit_ClrScroll2:
000031F4 2C80                       		move.l	d0,(a6)
000031F6 51C9 FFFC                  		dbf	d1,Tit_ClrScroll2 ; clear scroll data (in VRAM)
000031FA                            
000031FA 6100 0000                  		bsr.w	LevSelTextLoad
000031FE                            
000031FE                            ; ---------------------------------------------------------------------------
000031FE                            ; Level	Select
000031FE                            ; ---------------------------------------------------------------------------
000031FE                            
000031FE                            LevelSelect:
000031FE 11FC 0004 F62A             		move.b	#4,(v_vbla_routine).w
00003204 6100 F5B4                  		bsr.w	WaitForVBla
00003208 6100 0000                  		bsr.w	LevSelControls
0000320C 6100 E1CC                  		bsr.w	RunPLC
00003210 4AB8 F680                  		tst.l	(v_plc_buffer).w
00003214 66E8                       		bne.s	LevelSelect
00003216 0238 00F0 F605             		andi.b	#btnABC+btnStart,(v_jpadpress1).w ; is A, B, C, or Start pressed?
0000321C 67E0                       		beq.s	LevelSelect	; if not, branch
0000321E 3038 FF82                  		move.w	(v_levselitem).w,d0
00003222 0C40 001A                  		cmpi.w	#$1A,d0		; have you selected item $1A (sound test)?
00003226 6600                       		bne.s	LevSel_Level_SS	; if not, go to	Level/SS subroutine
00003228 3038 FF84                  		move.w	(v_levselsound).w,d0
0000322C 0640 0080                  		addi.w	#$80,d0
00003230                            	;	tst.b	(f_creditscheat).w ; is Japanese Credits cheat on?
00003230                            	;	beq.s	LevSel_NoCheat	; if not, branch
00003230 0C40 009F                  		cmpi.w	#$9F,d0		; is sound $9F being played?
00003234 6700                       		beq.s	LevSel_Ending	; if yes, branch
00003236 0C40 009E                  		cmpi.w	#$9E,d0		; is sound $9E being played?
0000323A 6700                       		beq.s	LevSel_Credits	; if yes, branch
0000323C                            
0000323C                            LevSel_NoCheat:
0000323C                            		; This is a workaround for a bug, see Sound_ChkValue for more.
0000323C                            		; Once you've fixed the bugs there, comment these four instructions out
0000323C                            	;	cmpi.w	#bgm__Last+1,d0	; is sound $80-$93 being played?
0000323C                            	;	blo.s	LevSel_PlaySnd	; if yes, branch
0000323C                            	;	cmpi.w	#sfx__First,d0	; is sound $94-$9F being played?
0000323C                            	;	blo.s	LevelSelect	; if yes, branch
0000323C                            
0000323C                            LevSel_PlaySnd:
0000323C 6100 DF4C                  		bsr.w	PlaySound_Special
00003240 60BC                       		bra.s	LevelSelect
00003242                            ; ===========================================================================
00003242                            
00003242                            LevSel_Ending:
00003242 11FC 0000 F600             		move.b	#id_Ending,(v_gamemode).w ; set screen mode to $18 (Ending)
00003248 31FC 0600 FE10             		move.w	#(id_EndZ<<8),(v_zone).w ; set level to 0600 (Ending)
0000324E 4E75                       		rts	
00003250                            ; ===========================================================================
00003250                            
00003250                            LevSel_Credits:
00003250 11FC 0000 F600             		move.b	#id_Credits,(v_gamemode).w ; set screen mode to $1C (Credits)
0000325E 31FC 0000 FFF4             		move.w	#0,(v_creditsnum).w
00003264 4E75                       		rts	
00003266                            ; ===========================================================================
00003266                            
00003266                            LevSel_Level_SS:
00003266 D040                       		add.w	d0,d0
00003268 303B 0000                  		move.w	LevSel_Ptrs(pc,d0.w),d0 ; load level number
0000326C 6B00 FF90                  		bmi.w	LevelSelect
00003270 0C40 0900                  		cmpi.w	#$09*$100,d0	; check	if level is 0700 (Special Stage)
00003274 6600                       		bne.s	LevSel_Level	; if not, branch
00003276 11FC 0000 F600             		move.b	#id_Special,(v_gamemode).w ; set screen mode to $10 (Special Stage)
0000327C 4278 FE10                  		clr.w	(v_zone).w	; clear	level
00003280 11FC 0003 FE12             		move.b	#3,(v_lives).w	; set lives to 3
00003286 7000                       		moveq	#0,d0
00003288 31C0 FE20                  		move.w	d0,(v_rings).w	; clear rings
0000328C 21C0 FE22                  		move.l	d0,(v_time).w	; clear time
00003290 21C0 FE26                  		move.l	d0,(v_score).w	; clear score
00003294 4E75                       		rts	
00003296                            ; ===========================================================================
00003296                            
00003296                            DemoStart:
00003296 31FC 0000 FE10             		move.w	#0,(v_zone).w	; set level to GHZ
0000329C 6000                       		bra.s	PlayLevel
0000329E                            
0000329E                            LevSel_Level:
0000329E 0240 3FFF                  		andi.w	#$3FFF,d0
000032A2 31C0 FE10                  		move.w	d0,(v_zone).w	; set level number
000032A6                            
000032A6                            PlayLevel:
000032A6 11FC 0000 F600             		move.b	#id_Level,(v_gamemode).w ; set screen mode to $0C (level)
000032AC 11FC 0003 FE12             		move.b	#3,(v_lives).w	; set lives to 3
000032B2 7000                       		moveq	#0,d0
000032B4 31C0 FE20                  		move.w	d0,(v_rings).w	; clear rings
000032B8 21C0 FE22                  		move.l	d0,(v_time).w	; clear time
000032BC 21C0 FE26                  		move.l	d0,(v_score).w	; clear score
000032C0 11C0 FE16                  		move.b	d0,(v_lastspecial).w ; clear special stage number
000032C4 11C0 FE57                  		move.b	d0,(v_emeralds).w ; clear emeralds
000032C8 21C0 FE58                  		move.l	d0,(v_emldlist).w ; clear emeralds
000032CC 21C0 FE5C                  		move.l	d0,(v_emldlist+4).w ; clear emeralds
000032D0 11C0 FE18                  		move.b	d0,(v_continues).w ; clear continues
000032DC 4E75                       		rts	
000032DE                            
000032DE                            ; ===========================================================================
000032DE                            ; ---------------------------------------------------------------------------
000032DE                            ; Level	select - level pointers
000032DE                            ; ---------------------------------------------------------------------------
000032DE                            LevSel_Ptrs:	
000032DE 0000                       		dc.b id_GHZ, 0
000032E0 0001                       		dc.b id_GHZ, 1
000032E2 0002                       		dc.b id_GHZ, 2
000032E4 0100                       		dc.b id_LZ, 0
000032E6 0101                       		dc.b id_LZ, 1
000032E8 0102                       		dc.b id_LZ, 2
000032EA 0200                       		dc.b id_MZ, 0
000032EC 0201                       		dc.b id_MZ, 1
000032EE 0202                       		dc.b id_MZ, 2
000032F0 0700                       		dc.b $07, 0
000032F2 0701                       		dc.b $07, 1
000032F4 0702                       		dc.b $07, 2
000032F6 0300                       		dc.b id_SLZ, 0
000032F8 0301                       		dc.b id_SLZ, 1
000032FA 0302                       		dc.b id_SLZ, 2
000032FC 0400                       		dc.b id_SYZ, 0
000032FE 0401                       		dc.b id_SYZ, 1
00003300 0402                       		dc.b id_SYZ, 2
00003302 0500                       		dc.b id_SBZ, 0
00003304 0501                       		dc.b id_SBZ, 1
00003306 0502                       		dc.b id_SBZ, 2
00003308 0800                       		dc.b $08, 0
0000330A 0801                       		dc.b $08, 1
0000330C 0802                       		dc.b $08, 2
0000330E 0600                       		dc.b $06, 0
00003310 0900                       		dc.b $09, 0
00003312 8000                       		dc.w $8000
00003314                            		even
00003314                            ; ---------------------------------------------------------------------------
00003314                            ; Level	select codes
00003314                            ; ---------------------------------------------------------------------------
00003314 0102 0202 0402 0802 00FF   		dc.b btnUp,btnDn,btnDn,btnDn,btnL,btnDn,btnR,btnDn,0,$FF
0000331E                            		even
0000331E                            
0000331E 0102 0202 0402 0802 00FF   LevSelCode_US:	dc.b btnUp,btnDn,btnDn,btnDn,btnL,btnDn,btnR,btnDn,0,$FF
00003328                            		even
00003328                            ; ===========================================================================
00003328                            
00003328                            PlayLevelC:
000033F8 4E75                       		rts
000033FA                            
000033FA                            ; ---------------------------------------------------------------------------
000033FA                            ; Demo mode
000033FA                            ; ---------------------------------------------------------------------------
000033FA                            
000033FA                            GotoDemo:
000033FA 31FC 001E F614             		move.w	#$1E,(v_demolength).w
00003400                            
00003400                            loc_33B6:
00003400 11FC 0004 F62A             		move.b	#4,(v_vbla_routine).w
00003406 6100 F3B2                  		bsr.w	WaitForVBla
0000340A 6100 0000                  		bsr.w	DeformLayers
0000340E 6100 E31A                  		bsr.w	PaletteCycle
00003412 6100 DFC6                  		bsr.w	RunPLC
00003416 3038 D008                  		move.w	(v_objspace+obX).w,d0
0000341A 5440                       		addq.w	#2,d0
0000341C 31C0 D008                  		move.w	d0,(v_objspace+obX).w
00003420 0C40 1C00                  		cmpi.w	#$1C00,d0
00003424 6500                       		blo.s	loc_33E4
00003426 11FC 0000 F600             		move.b	#id_Sega,(v_gamemode).w
0000342C 4E75                       		rts	
0000342E                            ; ===========================================================================
0000342E                            
0000342E                            loc_33E4:
0000342E 0238 0080 F605             		andi.b	#btnStart,(v_jpadpress1).w ; is Start button pressed?
00003434 6600 FD7A                  		bne.w	Tit_ChkLevSel	; if yes, branch
00003438 4A78 F614                  		tst.w	(v_demolength).w
0000343C 6600 FFC2                  		bne.w	loc_33B6
00003448 3038 FFF2                  		move.w	(v_demonum).w,d0 ; load	demo number
0000344C 0240 0007                  		andi.w	#7,d0
00003450 D040                       		add.w	d0,d0
00003452 303B 0000                  		move.w	Demo_Levels(pc,d0.w),d0	; load level number for	demo
00003456 31C0 FE10                  		move.w	d0,(v_zone).w
0000345A 5278 FFF2                  		addq.w	#1,(v_demonum).w ; add 1 to demo number
0000345E 0C78 0004 FFF2             		cmpi.w	#4,(v_demonum).w ; is demo number less than 4?
00003464 6500                       		blo.s	loc_3422	; if yes, branch
00003466 31FC 0000 FFF2             		move.w	#0,(v_demonum).w ; reset demo number to	0
0000346C                            
0000346C                            loc_3422:
0000346C 0C39 0000 FFFF F608        		cmp.b	#0, (f_levselcheat)
00003474 6700 FEB2                  		beq	PlayLevelC
00003478                            
00003478 31FC 0001 FFF0             		move.w	#1,(f_demo).w	; turn demo mode on
0000347E 11FC 0000 F600             		move.b	#id_Demo,(v_gamemode).w ; set screen mode to 08 (demo)
00003484 0C40 0600                  		cmpi.w	#$600,d0	; is level number 0600 (special	stage)?
00003488 6600                       		bne.s	Demo_Level	; if not, branch
0000348A 11FC 0000 F600             		move.b	#id_Special,(v_gamemode).w ; set screen mode to $10 (Special Stage)
00003490 4278 FE10                  		clr.w	(v_zone).w	; clear	level number
00003494 4238 FE16                  		clr.b	(v_lastspecial).w ; clear special stage number
00003498                            
00003498                            Demo_Level:
00003498 11FC 0003 FE12             		move.b	#3,(v_lives).w	; set lives to 3
0000349E 7000                       		moveq	#0,d0
000034A0 31C0 FE20                  		move.w	d0,(v_rings).w	; clear rings
000034A4 21C0 FE22                  		move.l	d0,(v_time).w	; clear time
000034A8 21C0 FE26                  		move.l	d0,(v_score).w	; clear score
000034AC 4E75                       		rts	
000034AE                            ; ===========================================================================
000034AE                            ; ---------------------------------------------------------------------------
000034AE                            ; Levels used in demos
000034AE                            ; ---------------------------------------------------------------------------
000034AE                            Demo_Levels:	incbin	"misc\Demo Level Order - Intro.bin"
000034B6                            		even
000034B6                            
000034B6                            ; ---------------------------------------------------------------------------
000034B6                            ; Subroutine to	change what you're selecting in the level select
000034B6                            ; ---------------------------------------------------------------------------
000034B6                            
000034B6                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000034B6                            
000034B6                            
000034B6                            LevSelControls:
000034B6 1238 F605                  		move.b	(v_jpadpress1).w,d1
000034BA 0201 0003                  		andi.b	#btnUp+btnDn,d1	; is up/down pressed and held?
000034BE 6600                       		bne.s	LevSel_UpDown	; if yes, branch
000034C0 5378 FF80                  		subq.w	#1,(v_levseldelay).w ; subtract 1 from time to next move
000034C4 6A00                       		bpl.s	LevSel_SndTest	; if time remains, branch
000034C6                            
000034C6                            LevSel_UpDown:
000034C6 31FC 000B FF80             		move.w	#$B,(v_levseldelay).w ; reset time delay
000034CC 1238 F604                  		move.b	(v_jpadhold1).w,d1
000034D0 0201 0003                  		andi.b	#btnUp+btnDn,d1	; is up/down pressed?
000034D4 6700                       		beq.s	LevSel_SndTest	; if not, branch
000034D6 3038 FF82                  		move.w	(v_levselitem).w,d0
000034DA 0801 0000                  		btst	#bitUp,d1	; is up	pressed?
000034DE 6700                       		beq.s	LevSel_Down	; if not, branch
000034E0 5340                       		subq.w	#1,d0		; move up 1 selection
000034E2 6400                       		bhs.s	LevSel_Down
000034E4 701A                       		moveq	#$1A,d0		; if selection moves below 0, jump to selection	$14
000034E6                            
000034E6                            LevSel_Down:
000034E6 0801 0001                  		btst	#bitDn,d1	; is down pressed?
000034EA 6700                       		beq.s	LevSel_Refresh	; if not, branch
000034EC 5240                       		addq.w	#1,d0		; move down 1 selection
000034EE 0C40 001B                  		cmpi.w	#$1B,d0
000034F2 6500                       		blo.s	LevSel_Refresh
000034F4 7000                       		moveq	#0,d0		; if selection moves above $1A,	jump to	selection 0
000034F6                            
000034F6                            LevSel_Refresh:
000034F6 31C0 FF82                  		move.w	d0,(v_levselitem).w ; set new selection
000034FA 6100 0000                  		bsr.w	LevSelTextLoad	; refresh text
000034FE 4E75                       		rts	
00003500                            ; ===========================================================================
00003500                            
00003500                            LevSel_SndTest:
00003500 0C78 001A FF82                     cmpi.w  #$1A,($FFFFFF82).w
00003506 6600                               bne.s   loc_3CC2
00003508 3038 FF84                          move.w  ($FFFFFF84).w,d0
0000350C 1238 F605                          move.b  ($FFFFF605).w,d1
00003510 0201 000C                          andi.b  #$C,d1
00003514 6700                               beq.s   loc_3CAA
00003516 0801 0002                          btst    #$2,d1
0000351A 6700                               beq.s   loc_3C9A
0000351C 5300                               subq.b  #$1,d0
0000351E 6400                               bcc.s   loc_3C9A
00003520 707F                               moveq   #$7F,d0
00003522                            loc_3C9A:
00003522 0801 0003                          btst    #$3,d1
00003526 6700                               beq.s   loc_3CAA
00003528 5200                               addq.b  #$1,d0
0000352A 0C40 0080                          cmpi.w  #$80,d0
0000352E 6500                               bcs.s   loc_3CAA
00003530 7000                               moveq	#0,d0
00003532                            loc_3CAA:
00003532 0838 0006 F605                     btst    #$6,($FFFFF605).w
00003538 6700                               beq.s   loc_3CBA
0000353A 0600 0010                          addi.b  #$10,d0
0000353E 0200 007F                          andi.b  #$7F,d0
00003542                            loc_3CBA:
00003542 31C0 FF84                          move.w  d0,($FFFFFF84).w
00003546 6100 0000                          bsr     LevSelTextLoad    ; loc_3CC4
0000354A                            loc_3CC2:        
0000354A 4E75                               rts
0000354C                            ; End of function LevSelControls
0000354C                            
0000354C                            ; ---------------------------------------------------------------------------
0000354C                            ; Subroutine to load level select text
0000354C                            ; ---------------------------------------------------------------------------
0000354C                            
0000354C                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000354C                            
0000354C                            
0000354C                            LevSelTextLoad:
0000354C                            
0000354C =62100003                  	textpos:	= ($40000000+(($E210&$3FFF)<<16)+(($E210&$C000)>>14))
0000354C                            					; $E210 is a VRAM address
0000354C                            
0000354C 43F9 0000 0000             		lea	(LevelMenuText).l,a1
00003552 4DF9 00C0 0000             		lea	(vdp_data_port).l,a6
00003558 283C 608C 0003             		move.l	#$608C0003,d4	; text position on screen
0000355E 363C E680                  		move.w	#$E680,d3	; VRAM setting (4th palette, $680th tile)
00003562 721A                       		moveq	#$1A,d1		; number of lines of text
00003564                            
00003564                            	LevSel_DrawAll:
00003564 2D44 0004                  		move.l	d4,4(a6)
00003568 6100 0000                  		bsr.w	LevSel_ChgLine	; draw line of text
0000356C 0684 0080 0000             		addi.l	#$800000,d4	; jump to next line
00003572 51C9 FFF0                  		dbf	d1,LevSel_DrawAll
00003576                            
00003576 7000                       		moveq	#0,d0
00003578 3038 FF82                  		move.w	(v_levselitem).w,d0
0000357C 3200                       		move.w	d0,d1
0000357E 283C 608C 0003             		move.l	#$608C0003,d4
00003584 EF48                       		lsl.w	#7,d0
00003586 4840                       		swap	d0
00003588 D880                       		add.l	d0,d4
0000358A 43F9 0000 0000             		lea	(LevelMenuText).l,a1
00003590 E749                       		lsl.w	#3,d1
00003592 3001                       		move.w	d1,d0
00003594 D241                       		add.w	d1,d1
00003596 D240                       		add.w	d0,d1
00003598 D2C1                       		adda.w	d1,a1
0000359A 363C C680                  		move.w	#$C680,d3	; VRAM setting (3rd palette, $680th tile)
0000359E 2D44 0004                  		move.l	d4,4(a6)
000035A2 6100 0000                  		bsr.w	LevSel_ChgLine	; recolour selected line
000035A6 363C E680                  		move.w	#$E680,d3
000035AA 0C78 001A FF82             		cmpi.w	#$1A,(v_levselitem).w
000035B0 6600                       		bne.s	LevSel_DrawSnd
000035B2 363C C680                  		move.w	#$C680,d3
000035B6                            
000035B6                            LevSel_DrawSnd:
000035B6 23FC 6DB0 0003 00C0 0004           move.l  #$6DB00003, ($C00004)		; sound test position on screen
000035C0 3038 FF84                  		move.w	(v_levselsound).w,d0
000035C4 0640 0080                  		addi.w	#$80,d0
000035C8 1400                       		move.b	d0,d2
000035CA E808                       		lsr.b	#4,d0
000035CC 6100 0000                  		bsr.w	LevSel_ChgSnd	; draw 1st digit
000035D0 1002                       		move.b	d2,d0
000035D2 6100 0000                  		bsr.w	LevSel_ChgSnd	; draw 2nd digit
000035D6 4E75                       		rts	
000035D8                            ; End of function LevSelTextLoad
000035D8                            
000035D8                            
000035D8                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000035D8                            
000035D8                            
000035D8                            LevSel_ChgSnd:
000035D8 0240 000F                  		andi.w	#$F,d0
000035DC 0C00 000A                  		cmpi.b	#$A,d0		; is digit $A-$F?
000035E0 6500                       		blo.s	LevSel_Numb	; if not, branch
000035E2 0600 0007                  		addi.b	#7,d0		; use alpha characters
000035E6                            
000035E6                            	LevSel_Numb:
000035E6 D043                       		add.w	d3,d0
000035E8 3C80                       		move.w	d0,(a6)
000035EA 4E75                       		rts	
000035EC                            ; End of function LevSel_ChgSnd
000035EC                            
000035EC                            
000035EC                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000035EC                            
000035EC                            
000035EC                            LevSel_ChgLine:
000035EC 7417                       		moveq	#$17,d2		; number of characters per line
000035EE                            
000035EE                            	LevSel_LineLoop:
000035EE 7000                       		moveq	#0,d0
000035F0 1019                       		move.b	(a1)+,d0	; get character
000035F2 6A00                       		bpl.s	LevSel_CharOk	; branch if valid
000035F4 3CBC 0000                  		move.w	#0,(a6)		; use blank character
000035F8 51CA FFF4                  		dbf	d2,LevSel_LineLoop
000035FC 4E75                       		rts	
000035FE                            
000035FE                            
000035FE                            	LevSel_CharOk:
000035FE D043                       		add.w	d3,d0		; combine char with VRAM setting
00003600 3C80                       		move.w	d0,(a6)		; send to VRAM
00003602 51CA FFEA                  		dbf	d2,LevSel_LineLoop
00003606 4E75                       		rts	
00003608                            ; End of function LevSel_ChgLine
00003608                            
00003608                            ; ===========================================================================
00003608                            ; ---------------------------------------------------------------------------
00003608                            ; Level	select menu text
00003608                            ; ---------------------------------------------------------------------------
00003608                            		incbin	"misc\Level Select Text.bin"
00003890                            		even
00003890                            ; ---------------------------------------------------------------------------
00003890                            ; Music	playlist
00003890                            ; ---------------------------------------------------------------------------
00003890                            MusicList:
00003890 00                         		dc.b bgm_GHZ	; GHZ
00003891 00                         		dc.b bgm_LZ	; LZ
00003892 00                         		dc.b bgm_MZ	; MZ
00003893 00                         		dc.b bgm_SLZ	; SLZ
00003894 00                         		dc.b bgm_SYZ	; SYZ
00003895 00                         		dc.b bgm_SBZ	; SBZ
00003896 00                         		dc.b bgm_FZ	; Ending
00003897 00                         		dc.b bgm_IMZ	; IMZ
00003898 00                         		dc.b bgm_CSZ	; CSZ
00003899 8D                         		dc.b $8D	; CWZ3
0000389A                            		even
0000389A                            ; ===========================================================================
0000389A                            
0000389A                            ; ---------------------------------------------------------------------------
0000389A                            ; Level
0000389A                            ; ---------------------------------------------------------------------------
0000389A                            
0000389A                            GM_Level:
0000389A 11FC 0000 F5C0             		move.b  #0,($FFFFF5C0).w ; Unset victory animation flag
000038A0 08F8 0007 F600             		bset	#7,(v_gamemode).w ; add $80 to screen mode (for pre level sequence)
000038A6 4A78 FFF0                  		tst.w	(f_demo).w
000038AA 6B00                       		bmi.s	Level_NoMusicFade
000038B4                            
000038B4                            	Level_NoMusicFade:
000038B4 6100 DB16                  		bsr.w	ClearPLC
000038B8 5378 F794                  		subq.w	#1,(v_palchgspeed).w
000038BC 31FC 0002 F794             		move.w	#2,(v_palchgspeed).w
000038C2 6100 E382                  		bsr.w	PaletteFadeOut
000038C6 4A78 FFF0                  		tst.w	(f_demo).w	; is an ending sequence demo running?
000038CA 6B00                       		bmi.s	Level_ClrRam	; if yes, branch
000038CC 46FC 2700                  		disable_ints
000038DA 41F9 0000 0000             		lea	(Nem_TitleCard).l,a0 ; load title card patterns
000038E0 6100 D94C                  		bsr.w	NemDec
000038E4 46FC 2300                  		enable_ints
000038E8 7000                       		moveq	#0,d0
000038EA 1038 FE10                  		move.b	(v_zone).w,d0
000038EE E948                       		lsl.w	#4,d0
000038F0 45F9 0000 0000             		lea	(LevelHeaders).l,a2
000038F6 45F2 0000                  		lea	(a2,d0.w),a2
000038FA 7000                       		moveq	#0,d0
000038FC 1012                       		move.b	(a2),d0
000038FE 6700                       		beq.s	loc_37FC
00003900 6100 DA6C                  		bsr.w	AddPLC		; load level patterns
00003904                            
00003904                            loc_37FC:
00003904 7000                       		moveq	#plcid_Main2,d0
00003906 6100 DA66                  		bsr.w	AddPLC		; load standard	patterns
0000390A                            
0000390A                            Level_ClrRam:
0000390A 43F8 D000                  		lea	(v_objspace).w,a1
0000390E 7000                       		moveq	#0,d0
00003910 323C 07FF                  		move.w	#$7FF,d1
00003914                            
00003914                            	Level_ClrObjRam:
00003914 22C0                       		move.l	d0,(a1)+
00003916 51C9 FFFC                  		dbf	d1,Level_ClrObjRam ; clear object RAM
0000391A                            
0000391A 43F8 F628                  		lea	($FFFFF628).w,a1
0000391E 7000                       		moveq	#0,d0
00003920 323C 0015                  		move.w	#$15,d1
00003924                            
00003924                            	Level_ClrVars1:
00003924 22C0                       		move.l	d0,(a1)+
00003926 51C9 FFFC                  		dbf	d1,Level_ClrVars1 ; clear misc variables
0000392A                            
0000392A 43F8 F700                  		lea	(v_screenposx).w,a1
0000392E 7000                       		moveq	#0,d0
00003930 323C 003F                  		move.w	#$3F,d1
00003934                            
00003934                            	Level_ClrVars2:
00003934 22C0                       		move.l	d0,(a1)+
00003936 51C9 FFFC                  		dbf	d1,Level_ClrVars2 ; clear misc variables
0000393A                            
0000393A 43F8 FE60                  		lea	(v_oscillate+2).w,a1
0000393E 7000                       		moveq	#0,d0
00003940 323C 0047                  		move.w	#$47,d1
00003944                            
00003944                            	Level_ClrVars3:
00003944 22C0                       		move.l	d0,(a1)+
00003946 51C9 FFFC                  		dbf	d1,Level_ClrVars3 ; clear object variables
0000394A                            
0000394A 46FC 2700                  		disable_ints
0000394E 6100 D762                  		bsr.w	ClearScreen
00003952 4DF9 00C0 0004             		lea	(vdp_control_port).l,a6
00003958 3CBC 8B03                  		move.w	#$8B03,(a6)	; line scroll mode
0000395C 3CBC 8230                  		move.w	#$8200+(vram_fg>>10),(a6) ; set foreground nametable address
00003960 3CBC 8407                  		move.w	#$8400+(vram_bg>>13),(a6) ; set background nametable address
00003964 3CBC 857C                  		move.w	#$8500+(vram_sprites>>9),(a6) ; set sprite table address
00003968 3CBC 9001                  		move.w	#$9001,(a6)		; 64-cell hscroll size
0000396C 3CBC 8004                  		move.w	#$8004,(a6)		; 8-colour mode
00003970 3CBC 8720                  		move.w	#$8720,(a6)		; set background colour (line 3; colour 0)
00003974 31FC 8ADF F624             		move.w	#$8A00+223,(v_hbla_hreg).w ; set palette change position (for water)
0000397A 3CB8 F624                  		move.w	(v_hbla_hreg).w,(a6)
0000397E 0C38 0001 FE10             		cmpi.b	#id_LZ,(v_zone).w ; is level LZ?
00003984 6600                       		bne.s	Level_LoadPal	; if not, branch
00003986                            
00003986 3CBC 8014                  		move.w	#$8014,(a6)	; enable H-interrupts
0000398A 7000                       		moveq	#0,d0
0000398C 1038 FE11                  		move.b	(v_act).w,d0
00003990 D040                       		add.w	d0,d0
00003992 43F9 0000 0000             		lea	(WaterHeight).l,a1 ; load water	height array
00003998 3031 0000                  		move.w	(a1,d0.w),d0
0000399C 31C0 F646                  		move.w	d0,(v_waterpos1).w ; set water heights
000039A0 31C0 F648                  		move.w	d0,(v_waterpos2).w
000039A4 31C0 F64A                  		move.w	d0,(v_waterpos3).w
000039A8 4238 F64D                  		clr.b	(v_wtr_routine).w ; clear water routine counter
000039AC 4238 F64E                  		clr.b	(f_wtr_state).w	; clear	water state
000039B0 11FC 0001 F64C             		move.b	#1,(f_water).w	; enable water
000039B6                            
000039B6                            Level_LoadPal:
000039B6 31FC 001E FE14             		move.w	#30,(v_air).w
000039BC 46FC 2300                  		enable_ints
000039C0 7003                       		moveq	#palid_Sonic,d0
000039C2 6100 E496                  		bsr.w	PalLoad2	; load Sonic's palette
000039C6 0C38 0001 FE10             		cmpi.b	#id_LZ,(v_zone).w ; is level LZ?
000039CC 6600                       		bne.s	Level_GetBgm	; if not, branch
000039CE                            
000039CE 7010                       		moveq	#palid_LZSonWater,d0 ; palette number $F (LZ)
000039D0 0C38 0003 FE11             		cmpi.b	#3,(v_act).w	; is act number 3?
000039D6 6600                       		bne.s	Level_WaterPal	; if not, branch
000039D8 7011                       		moveq	#palid_SBZ3SonWat,d0 ; palette number $10 (SBZ3)
000039DA                            
000039DA                            	Level_WaterPal:
000039DA 6100 E496                  		bsr.w	PalLoad3_Water	; load underwater palette
000039DE 4A38 FE30                  		tst.b	(v_lastlamp).w
000039E2 6700                       		beq.s	Level_GetBgm
000039E4 11F8 FE53 F64E             		move.b	($FFFFFE53).w,(f_wtr_state).w
000039EA                            
000039EA                            Level_GetBgm:
000039EA 4A78 FFF0                  		tst.w	(f_demo).w
000039EE 6B00                       		bmi.s	Level_SkipTtlCard
000039F0 7000                       		moveq	#0,d0
000039F2 1038 FE10                  		move.b	(v_zone).w,d0
000039F6 0C78 0103 FE10             		cmpi.w	#(id_LZ<<8)+3,(v_zone).w ; is level SBZ3?
000039FC 6600                       		bne.s	Level_BgmNotLZ4	; if not, branch
000039FE 7005                       		moveq	#5,d0		; use 5th music (SBZ)
00003A00                            
00003A00                            	Level_BgmNotLZ4:
00003A00 0C78 0502 FE10             		cmpi.w	#(id_SBZ<<8)+2,(v_zone).w ; is level FZ?
00003A06 6600                       		bne.s	Level_PlayBgm	; if not, branch
00003A08 7009                       		moveq	#9,d0		; use 6th music (FZ)
00003A0A                            
00003A0A                            	Level_PlayBgm:
00003A0A 43F9 0000 3890             		lea	(MusicList).l,a1 ; load	music playlist
00003A10 1031 0000                  		move.b	(a1,d0.w),d0
00003A14 6100 D76E                  		bsr.w	PlaySound	; play music
00003A18 11FC 0000 D080             		move.b	#id_TitleCard,(v_objspace+$80).w ; load title card object
00003A1E 303C 00D0                          move.w    #$D0,d0
00003A22 4EB9 0000 118A                     jsr    (PlaySound_Special).l ;    thingy to disable sound glitching
00003A28                            
00003A28                            Level_TtlCardLoop:
00003A28 11FC 000C F62A             		move.b	#$C,(v_vbla_routine).w
00003A2E 6100 ED8A                  		bsr.w	WaitForVBla
00003A32 4EB9 0000 0000             		jsr	(ExecuteObjects).l
00003A38 4EB9 0000 0000             		jsr	(BuildSprites).l
00003A3E 6100 D99A                  		bsr.w	RunPLC
00003A42 3038 D108                  		move.w	(v_objspace+$108).w,d0
00003A46 B078 D130                  		cmp.w	(v_objspace+$130).w,d0 ; has title card sequence finished?
00003A4A 66DC                       		bne.s	Level_TtlCardLoop ; if not, branch
00003A4C 4AB8 F680                  		tst.l	(v_plc_buffer).w ; are there any items in the pattern load cue?
00003A50 66D6                       		bne.s	Level_TtlCardLoop ; if yes, branch
00003A52 4EB9 0000 0000             		jsr	(Hud_Base).l	; load basic HUD gfx
00003A58                            
00003A58                            	Level_SkipTtlCard:
00003A58 7003                       		moveq	#palid_Sonic,d0
00003A5A 6100 E3E2                  		bsr.w	PalLoad1	; load Sonic's palette
00003A5E 6100 0000                  		bsr.w	LevelSizeLoad
00003A62 6100 0000                  		bsr.w	DeformLayers
00003A66 08F8 0002 F754             		bset	#2,(v_fg_scroll_flags).w
00003A6C 6100 0000                  		bsr.w	LevelDataLoad ; load block mappings and palettes
00003A70 6100 0000                  		bsr.w	LoadTilesFromStart
00003A74 4EB9 0000 0000             		jsr	(FloorLog_Unk).l
00003A7A 6100 0000                  		bsr.w	ColIndexLoad
00003A7E 6100 0000                  		bsr.w	LZWaterFeatures
00003A82 11FC 0000 D000             		move.b	#id_SonicPlayer,(v_player).w ; load Sonic object
00003A88 4A78 FFF0                  		tst.w	(f_demo).w
00003A8C 6B00                       		bmi.s	Level_ChkDebug
00003A8E 11FC 0000 D040             		move.b	#id_HUD,(v_objspace+$40).w ; load HUD object
00003A94                            
00003A94                            Level_ChkDebug:
00003A94 4A38 FFE2                  		tst.b	(f_debugcheat).w ; has debug cheat been entered?
00003A98 6700                       		beq.s	Level_ChkWater	; if not, branch
00003A9A 0838 0006 F604             		btst	#bitA,(v_jpadhold1).w ; is A button held?
00003AA0 6700                       		beq.s	Level_ChkWater	; if not, branch
00003AA2 11FC 0001 FFFA             		move.b	#1,(f_debugmode).w ; enable debug mode
00003AA8                            
00003AA8                            Level_ChkWater:
00003AA8 31FC 0000 F602             		move.w	#0,(v_jpadhold2).w
00003AAE 31FC 0000 F604             		move.w	#0,(v_jpadhold1).w
00003AB4 0C38 0001 FE10             		cmpi.b	#id_LZ,(v_zone).w ; is level LZ?
00003ABA 6600                       		bne.s	Level_LoadObj	; if not, branch
00003ABC 11FC 0000 D780             		move.b	#id_WaterSurface,(v_objspace+$780).w ; load water surface object
00003AC2 31FC 0060 D788             		move.w	#$60,(v_objspace+$780+obX).w
00003AC8 11FC 0000 D7C0             		move.b	#id_WaterSurface,(v_objspace+$7C0).w
00003ACE 31FC 0120 D7C8             		move.w	#$120,(v_objspace+$7C0+obX).w
00003AD4                            
00003AD4                            Level_LoadObj:
00003AD4 4EB9 0000 0000             		jsr	(ObjPosLoad).l
00003ADA 4EB9 0000 0000             		jsr	(ExecuteObjects).l
00003AE0 4EB9 0000 0000             		jsr	(BuildSprites).l
00003AE6 7000                       		moveq	#0,d0
00003AE8 4A38 FE30                  		tst.b	(v_lastlamp).w	; are you starting from	a lamppost?
00003AEC 6600                       		bne.s	Level_SkipClr	; if yes, branch
00003AEE 31C0 FE20                  		move.w	d0,(v_rings).w	; clear rings
00003AF2 21C0 FE22                  		move.l	d0,(v_time).w	; clear time
00003AF6 11C0 FE1B                  		move.b	d0,(v_lifecount).w ; clear lives counter
00003AFA                            
00003AFA                            	Level_SkipClr:
00003AFA 11C0 FE1A                  		move.b	d0,(f_timeover).w
00003AFE 11C0 FE2C                  		move.b	d0,(v_shield).w	; clear shield
00003B02 11C0 FE2D                  		move.b	d0,(v_invinc).w	; clear invincibility
00003B06 11C0 FE2E                  		move.b	d0,(v_shoes).w	; clear speed shoes
00003B0A 11C0 FE2F                  		move.b	d0,($FFFFFE2F).w
00003B0E 31C0 FE08                  		move.w	d0,(v_debuguse).w
00003B12 31C0 FE02                  		move.w	d0,(f_restart).w
00003B16 31C0 FE04                  		move.w	d0,(v_framecount).w
00003B1A 6100 0000                  		bsr.w	OscillateNumInit
00003B1E 11FC 0001 FE1F             		move.b	#1,(f_scorecount).w ; update score counter
00003B24 11FC 0001 FE1D             		move.b	#1,(f_ringcount).w ; update rings counter
00003B2A 11FC 0001 FE1E             		move.b	#1,(f_timecount).w ; update time counter
00003B30 31FC 0000 F790             		move.w	#0,(v_btnpushtime1).w
00003B36 43F9 0000 0000             		lea	(DemoDataPtr).l,a1 ; load demo data
00003B3C 7000                       		moveq	#0,d0
00003B3E 1038 FE10                  		move.b	(v_zone).w,d0
00003B42 E548                       		lsl.w	#2,d0
00003B44 2271 0000                  		movea.l	(a1,d0.w),a1
00003B48 4A78 FFF0                  		tst.w	(f_demo).w	; is demo mode on?
00003B4C 6A00                       		bpl.s	Level_Demo	; if yes, branch
00003B4E 43F9 0000 0000             		lea	(DemoEndDataPtr).l,a1 ; load ending demo data
00003B54 3038 FFF4                  		move.w	(v_creditsnum).w,d0
00003B58 5340                       		subq.w	#1,d0
00003B5A E548                       		lsl.w	#2,d0
00003B5C 2271 0000                  		movea.l	(a1,d0.w),a1
00003B60                            
00003B60                            Level_Demo:
00003B60 11E9 0001 F792             		move.b	1(a1),(v_btnpushtime2).w ; load key press duration
00003B66 5338 F792                  		subq.b	#1,(v_btnpushtime2).w ; subtract 1 from duration
00003B6A 31FC 0708 F614             		move.w	#1800,(v_demolength).w
00003B70 4A78 FFF0                  		tst.w	(f_demo).w
00003B74 6A00                       		bpl.s	Level_ChkWaterPal
00003B76 31FC 021C F614             		move.w	#540,(v_demolength).w
00003B7C 0C78 0004 FFF4             		cmpi.w	#4,(v_creditsnum).w
00003B82 6600                       		bne.s	Level_ChkWaterPal
00003B84 31FC 01FE F614             		move.w	#510,(v_demolength).w
00003B8A                            
00003B8A                            Level_ChkWaterPal:
00003B8A 0C38 0001 FE10             		cmpi.b	#id_LZ,(v_zone).w ; is level LZ/SBZ3?
00003B90 6600                       		bne.s	Level_Delay	; if not, branch
00003B92 700C                       		moveq	#palid_LZWater,d0 ; palette $B (LZ underwater)
00003B94 0C38 0003 FE11             		cmpi.b	#3,(v_act).w	; is level SBZ3?
00003B9A 6600                       		bne.s	Level_WtrNotSbz	; if not, branch
00003B9C 700E                       		moveq	#palid_SBZ3Water,d0 ; palette $D (SBZ3 underwater)
00003B9E                            
00003B9E                            	Level_WtrNotSbz:
00003B9E 6100 E2EE                  		bsr.w	PalLoad4_Water
00003BA2                            
00003BA2                            Level_Delay:
00003BA2 323C 0003                  		move.w	#3,d1
00003BA6                            
00003BA6                            	Level_DelayLoop:
00003BA6 11FC 0008 F62A             		move.b	#8,(v_vbla_routine).w
00003BAC 6100 EC0C                  		bsr.w	WaitForVBla
00003BB0 51C9 FFF4                  		dbf	d1,Level_DelayLoop
00003BB4                            		
00003BB4 0C39 0008 FFFF FE10        		cmp.b	#8, (v_zone)
00003BBC 6700 0000                  		beq		@CSZTitle
00003BC0                            
00003BC0 31FC 202F F626             		move.w	#$202F,(v_pfade_start).w ; fade in 2nd, 3rd & 4th palette lines
00003BC6 6100 DFDE                  		bsr.w	PalFadeIn_Alt
00003BCA                            	@cont:
00003BCA 4A78 FFF0                  		tst.w	(f_demo).w	; is an ending sequence demo running?
00003BCE 6B00                       		bmi.s	Level_ClrCardArt ; if yes, branch
00003BD0 5438 D0A4                  		addq.b	#2,(v_objspace+$80+obRoutine).w ; make title card move
00003BD4 5838 D0E4                  		addq.b	#4,(v_objspace+$C0+obRoutine).w
00003BD8 5838 D124                  		addq.b	#4,(v_objspace+$100+obRoutine).w
00003BDC 5838 D164                  		addq.b	#4,(v_objspace+$140+obRoutine).w
00003BE0 6000                       		bra.s	Level_StartGame
00003BE2 4E75                       		rts
00003BE4                            		
00003BE4                            	@CSZTitle:
00003BE4 31FC 202F F626             		move.w	#$202F,(v_pfade_start).w ; fade in 2nd, 3rd & 4th palette lines
00003BEA 6100 E0DE                  		bsr.w	PaletteWhiteIn_Alt
00003BEE 4EB9 0000 3BCA             		jsr @cont
00003BF4 4E75                       		rts
00003BF6                            ; ===========================================================================
00003BF6                            
00003BF6                            Level_ClrCardArt:
00003BF6 7000                       		moveq	#plcid_Explode,d0
00003BF8 4EB9 0000 136E             		jsr	(AddPLC).l	; load explosion gfx
00003BFE 7000                       		moveq	#0,d0
00003C00 1038 FE10                  		move.b	(v_zone).w,d0
00003C04 0640 0000                  		addi.w	#plcid_GHZAnimals,d0
00003C08 4EB9 0000 136E             		jsr	(AddPLC).l	; load animal gfx (level no. + $15)
00003C0E                            
00003C0E                            Level_StartGame:
00003C0E 08B8 0007 F600             		bclr	#7,(v_gamemode).w ; subtract $80 from mode to end pre-level stuff
00003C14                            
00003C14                            ; ---------------------------------------------------------------------------
00003C14                            ; Main level loop (when	all title card and loading sequences are finished)
00003C14                            ; ---------------------------------------------------------------------------
00003C14                            
00003C14                            Level_MainLoop:
00003C14 6100 D580                  		bsr.w	PauseGame
00003C18 11FC 0008 F62A             		move.b	#8,(v_vbla_routine).w
00003C1E 6100 EB9A                  		bsr.w	WaitForVBla
00003C22 5278 FE04                  		addq.w	#1,(v_framecount).w ; add 1 to level timer
00003C26 6100 0000                  		bsr.w	MoveSonicInDemo
00003C2A 6100 0000                  		bsr.w	LZWaterFeatures
00003C2E 4EB9 0000 0000             		jsr	(ExecuteObjects).l
00003C34 4A78 FE08                  		tst.w	(v_debuguse).w	; is debug mode being used?
00003C38 6600                       		bne.s	Level_DoScroll	; if yes, branch
00003C3A 0C38 0006 D024             		cmpi.b	#6,(v_player+obRoutine).w ; has Sonic just died?
00003C40 6400                       		bhs.s	Level_SkipScroll ; if yes, branch
00003C42                            
00003C42                            	Level_DoScroll:
00003C42 6100 0000                  		bsr.w	DeformLayers
00003C46                            
00003C46                            	Level_SkipScroll:
00003C46 4EB9 0000 0000             		jsr	(BuildSprites).l
00003C4C 4EB9 0000 0000             		jsr	(ObjPosLoad).l
00003C52 6100 DAD6                  		bsr.w	PaletteCycle
00003C56 6100 D782                  		bsr.w	RunPLC
00003C5A 6100 0000                  		bsr.w	OscillateNumDo
00003C5E 6100 0000                  		bsr.w	SynchroAnimate
00003C62 6100 0000                  		bsr.w	SignpostArtLoad
00003C66                            
00003C66 0C38 0000 F600             		cmpi.b	#id_Demo,(v_gamemode).w
00003C6C 6700                       		beq.s	Level_ChkDemo	; if mode is 8 (demo), branch
00003C6E 4A78 FE02                  		tst.w	(f_restart).w	; is the level set to restart?
00003C72 6600 FC26                  		bne.w	GM_Level	; if yes, branch
00003C76 0C38 0000 F600             		cmpi.b	#id_Level,(v_gamemode).w
00003C7C 6700 FF96                  		beq.w	Level_MainLoop	; if mode is $C (level), branch
00003C80 4E75                       		rts	
00003C82                            ; ===========================================================================
00003C82                            
00003C82                            Level_ChkDemo:
00003C82 4A78 FE02                  		tst.w	(f_restart).w	; is level set to restart?
00003C86 6600                       		bne.s	Level_EndDemo	; if yes, branch
00003C88 4A78 F614                  		tst.w	(v_demolength).w ; is there time left on the demo?
00003C8C 6700                       		beq.s	Level_EndDemo	; if not, branch
00003C8E 0C38 0000 F600             		cmpi.b	#id_Demo,(v_gamemode).w
00003C94 6700 FF7E                  		beq.w	Level_MainLoop	; if mode is 8 (demo), branch
00003C98 11FC 0000 F600             		move.b	#id_Sega,(v_gamemode).w ; go to Sega screen
00003C9E 4E75                       		rts	
00003CA0                            ; ===========================================================================
00003CA0                            
00003CA0                            Level_EndDemo:
00003CA0 0C38 0000 F600             		cmpi.b	#id_Demo,(v_gamemode).w
00003CA6 6600                       		bne.s	Level_FadeDemo	; if mode is 8 (demo), branch
00003CA8 11FC 0000 F600             		move.b	#id_Sega,(v_gamemode).w ; go to Sega screen
00003CAE 4A78 FFF0                  		tst.w	(f_demo).w	; is demo mode on & not ending sequence?
00003CB2 6A00                       		bpl.s	Level_FadeDemo	; if yes, branch
00003CB4 11FC 0000 F600             		move.b	#id_Credits,(v_gamemode).w ; go to credits
00003CBA                            
00003CBA                            Level_FadeDemo:
00003CBA 31FC 003C F614             		move.w	#$3C,(v_demolength).w
00003CC0 31FC 003F F626             		move.w	#$3F,(v_pfade_start).w
00003CC6 4278 F794                  		clr.w	(v_palchgspeed).w
00003CCA                            
00003CCA                            	Level_FDLoop:
00003CCA 11FC 0008 F62A             		move.b	#8,(v_vbla_routine).w
00003CD0 6100 EAE8                  		bsr.w	WaitForVBla
00003CD4 6100 0000                  		bsr.w	MoveSonicInDemo
00003CD8 4EB9 0000 0000             		jsr	(ExecuteObjects).l
00003CDE 4EB9 0000 0000             		jsr	(BuildSprites).l
00003CE4 4EB9 0000 0000             		jsr	(ObjPosLoad).l
00003CEA 5378 F794                  		subq.w	#1,(v_palchgspeed).w
00003CEE 6A00                       		bpl.s	loc_3BC8
00003CF0 31FC 0002 F794             		move.w	#2,(v_palchgspeed).w
00003CF6 6100 DF6E                  		bsr.w	FadeOut_ToBlack
00003CFA                            
00003CFA                            loc_3BC8:
00003CFA 4A78 F614                  		tst.w	(v_demolength).w
00003CFE 66CA                       		bne.s	Level_FDLoop
00003D00 4E75                       		rts	
00003D02                            ; ===========================================================================
00003D02                            
00003D02                            		include	"_inc\LZWaterFeatures.asm"
00003D02                            ; ---------------------------------------------------------------------------
00003D02                            ; Subroutine to	do special water effects in Labyrinth Zone
00003D02                            ; ---------------------------------------------------------------------------
00003D02                            
00003D02                            LZWaterFeatures:
00003D02 0C38 0001 FE10             		cmpi.b	#id_LZ,(v_zone).w ; check if level is LZ
00003D08 6600                       		bne.s	@notlabyrinth	; if not, branch
00003D0A 0C38 0006 D024             		cmpi.b	#6,(v_player+obRoutine).w ; has Sonic just died?
00003D10 6400                       		bcc.s	@setheight	; if yes, skip other effects
00003D12                            
00003D12 6100 0000                  		bsr.w	LZWindTunnels
00003D16 6100 0000                  		bsr.w	LZWaterSlides
00003D1A 6100 0000                  		bsr.w	LZDynamicWater
00003D1E                            
00003D1E                            @setheight:
00003D1E 4238 F64E                  		clr.b	(f_wtr_state).w
00003D22 7000                       		moveq	#0,d0
00003D24 1038 FE60                  		move.b	(v_oscillate+2).w,d0
00003D28 E248                       		lsr.w	#1,d0
00003D2A D078 F648                  		add.w	(v_waterpos2).w,d0
00003D2E 31C0 F646                  		move.w	d0,(v_waterpos1).w
00003D32 3038 F646                  		move.w	(v_waterpos1).w,d0
00003D36 9078 F704                  		sub.w	(v_screenposy).w,d0
00003D3A 6400                       		bcc.s	@isbelow
00003D3C 4A40                       		tst.w	d0
00003D3E 6A00                       		bpl.s	@isbelow	; if water is below top of screen, branch
00003D40                            
00003D40 11FC 00DF F625             		move.b	#223,(v_hbla_line).w
00003D46 11FC 0001 F64E             		move.b	#1,(f_wtr_state).w ; screen is all underwater
00003D4C                            
00003D4C                            	@isbelow:
00003D4C 0C40 00DF                  		cmpi.w	#223,d0		; is water within 223 pixels of top of screen?
00003D50 6500                       		bcs.s	@isvisible	; if yes, branch
00003D52 303C 00DF                  		move.w	#223,d0
00003D56                            
00003D56                            	@isvisible:
00003D56 11C0 F625                  		move.b	d0,(v_hbla_line).w ; set water surface as on-screen
00003D5A                            
00003D5A                            @notlabyrinth:
00003D5A 4E75                       		rts	
00003D5C                            ; ===========================================================================
00003D5C                            ; ---------------------------------------------------------------------------
00003D5C                            ; Initial water heights
00003D5C                            ; ---------------------------------------------------------------------------
00003D5C 00B8                       WaterHeight:	dc.w $B8	; Labyrinth 1
00003D5E 0328                       		dc.w $328	; Labyrinth 2
00003D60 0900                       		dc.w $900	; Labyrinth 3
00003D62 0228                       		dc.w $228	; Scrap Brain 3
00003D64                            		even
00003D64                            ; ===========================================================================
00003D64                            
00003D64                            ; ---------------------------------------------------------------------------
00003D64                            ; Labyrinth dynamic water routines
00003D64                            ; ---------------------------------------------------------------------------
00003D64                            
00003D64                            LZDynamicWater:
00003D64 7000                       		moveq	#0,d0
00003D66 1038 FE11                  		move.b	(v_act).w,d0
00003D6A D040                       		add.w	d0,d0
00003D6C 303B 0000                  		move.w	DynWater_Index(pc,d0.w),d0
00003D70 4EBB 0000                  		jsr	DynWater_Index(pc,d0.w)
00003D74 7200                       		moveq	#0,d1
00003D76 1238 F64C                  		move.b	(f_water).w,d1
00003D7A 3038 F64A                  		move.w	(v_waterpos3).w,d0
00003D7E 9078 F648                  		sub.w	(v_waterpos2).w,d0
00003D82 6700                       		beq.s	@exit		; if water level is correct, branch
00003D84 6400                       		bcc.s	@movewater	; if water level is too high, branch
00003D86 4441                       		neg.w	d1		; set water to move up instead
00003D88                            
00003D88                            	@movewater:
00003D88 D378 F648                  		add.w	d1,(v_waterpos2).w ; move water up/down
00003D8C                            
00003D8C                            	@exit:
00003D8C 4E75                       		rts	
00003D8E                            ; ===========================================================================
00003D8E 0000                       DynWater_Index:	dc.w DynWater_LZ1-DynWater_Index
00003D90 0000                       		dc.w DynWater_LZ2-DynWater_Index
00003D92 0000                       		dc.w DynWater_LZ3-DynWater_Index
00003D94 0000                       		dc.w DynWater_SBZ3-DynWater_Index
00003D96                            ; ===========================================================================
00003D96                            
00003D96                            DynWater_LZ1:
00003D96 3038 F700                  		move.w	(v_screenposx).w,d0
00003D9A 1438 F64D                  		move.b	(v_wtr_routine).w,d2
00003D9E 6600                       		bne.s	@routine2
00003DA0 323C 00B8                  		move.w	#$B8,d1		; water height
00003DA4 0C40 0600                  		cmpi.w	#$600,d0	; has screen reached next position?
00003DA8 6500                       		bcs.s	@setwater	; if not, branch
00003DAA 323C 0108                  		move.w	#$108,d1
00003DAE 0C78 0200 D00C             		cmpi.w	#$200,(v_player+obY).w ; is Sonic above $200 y-axis?
00003DB4 6500                       		bcs.s	@sonicishigh	; if yes, branch
00003DB6 0C40 0C00                  		cmpi.w	#$C00,d0
00003DBA 6500                       		bcs.s	@setwater
00003DBC 323C 0318                  		move.w	#$318,d1
00003DC0 0C40 1080                  		cmpi.w	#$1080,d0
00003DC4 6500                       		bcs.s	@setwater
00003DC6 11FC 0080 F7E5             		move.b	#$80,(f_switch+5).w
00003DCC 323C 05C8                  		move.w	#$5C8,d1
00003DD0 0C40 1380                  		cmpi.w	#$1380,d0
00003DD4 6500                       		bcs.s	@setwater
00003DD6 323C 03A8                  		move.w	#$3A8,d1
00003DDA B278 F648                  		cmp.w	(v_waterpos2).w,d1 ; has water reached last height?
00003DDE 6600                       		bne.s	@setwater	; if not, branch
00003DE0 11FC 0001 F64D             		move.b	#1,(v_wtr_routine).w ; use second routine next
00003DE6                            
00003DE6                            	@setwater:
00003DE6 31C1 F64A                  		move.w	d1,(v_waterpos3).w
00003DEA 4E75                       		rts	
00003DEC                            ; ===========================================================================
00003DEC                            
00003DEC                            @sonicishigh:
00003DEC 0C40 0C80                  		cmpi.w	#$C80,d0
00003DF0 65F4                       		bcs.s	@setwater
00003DF2 323C 00E8                  		move.w	#$E8,d1
00003DF6 0C40 1500                  		cmpi.w	#$1500,d0
00003DFA 65EA                       		bcs.s	@setwater
00003DFC 323C 0108                  		move.w	#$108,d1
00003E00 60E4                       		bra.s	@setwater
00003E02                            ; ===========================================================================
00003E02                            
00003E02                            @routine2:
00003E02 5302                       		subq.b	#1,d2
00003E04 6600                       		bne.s	@skip
00003E06 0C78 02E0 D00C             		cmpi.w	#$2E0,(v_player+obY).w ; is Sonic above $2E0 y-axis?
00003E0C 6400                       		bcc.s	@skip		; if not, branch
00003E0E 323C 03A8                  		move.w	#$3A8,d1
00003E12 0C40 1300                  		cmpi.w	#$1300,d0
00003E16 6500                       		bcs.s	@setwater2
00003E18 323C 0108                  		move.w	#$108,d1
00003E1C 11FC 0002 F64D             		move.b	#2,(v_wtr_routine).w
00003E22                            
00003E22                            	@setwater2:
00003E22 31C1 F64A                  		move.w	d1,(v_waterpos3).w
00003E26                            
00003E26                            	@skip:
00003E26 4E75                       		rts	
00003E28                            ; ===========================================================================
00003E28                            
00003E28                            DynWater_LZ2:
00003E28 3038 F700                  		move.w	(v_screenposx).w,d0
00003E2C 323C 0328                  		move.w	#$328,d1
00003E30 0C40 0500                  		cmpi.w	#$500,d0
00003E34 6500                       		bcs.s	@setwater
00003E36 323C 03C8                  		move.w	#$3C8,d1
00003E3A 0C40 0B00                  		cmpi.w	#$B00,d0
00003E3E 6500                       		bcs.s	@setwater
00003E40 323C 0428                  		move.w	#$428,d1
00003E44                            
00003E44                            	@setwater:
00003E44 31C1 F64A                  		move.w	d1,(v_waterpos3).w
00003E48 4E75                       		rts	
00003E4A                            ; ===========================================================================
00003E4A                            
00003E4A                            DynWater_LZ3:
00003E4A 3038 F700                  		move.w	(v_screenposx).w,d0
00003E4E 1438 F64D                  		move.b	(v_wtr_routine).w,d2
00003E52 6600                       		bne.s	@routine2
00003E54                            
00003E54 323C 0900                  		move.w	#$900,d1
00003E58 0C40 0600                  		cmpi.w	#$600,d0	; has screen reached position?
00003E5C 6500                       		bcs.s	@setwaterlz3	; if not, branch
00003E5E 0C78 03C0 D00C             		cmpi.w	#$3C0,(v_player+obY).w
00003E64 6500                       		bcs.s	@setwaterlz3
00003E66 0C78 0600 D00C             		cmpi.w	#$600,(v_player+obY).w ; is Sonic in a y-axis range?
00003E6C 6400                       		bcc.s	@setwaterlz3	; if not, branch
00003E6E                            
00003E6E 323C 04C8                  		move.w	#$4C8,d1	; set new water height
00003E72 11FC 004B A506             		move.b	#$4B,(v_lvllayout+$106).w ; update level layout
00003E78 11FC 0001 F64D             		move.b	#1,(v_wtr_routine).w ; use second routine next
00003E86                            
00003E86                            	@setwaterlz3:
00003E86 31C1 F64A                  		move.w	d1,(v_waterpos3).w
00003E8A 31C1 F648                  		move.w	d1,(v_waterpos2).w ; change water height instantly
00003E8E 4E75                       		rts	
00003E90                            ; ===========================================================================
00003E90                            
00003E90                            @routine2:
00003E90 5302                       		subq.b	#1,d2
00003E92 6600                       		bne.s	@routine3
00003E94 323C 04C8                  		move.w	#$4C8,d1
00003E98 0C40 0770                  		cmpi.w	#$770,d0
00003E9C 6500                       		bcs.s	@setwater2
00003E9E 323C 0308                  		move.w	#$308,d1
00003EA2 0C40 1400                  		cmpi.w	#$1400,d0
00003EA6 6500                       		bcs.s	@setwater2
00003EA8 0C78 0508 F64A             		cmpi.w	#$508,(v_waterpos3).w
00003EAE 6700                       		beq.s	@sonicislow
00003EB0 0C78 0600 D00C             		cmpi.w	#$600,(v_player+obY).w ; is Sonic below $600 y-axis?
00003EB6 6400                       		bcc.s	@sonicislow	; if yes, branch
00003EB8 0C78 0280 D00C             		cmpi.w	#$280,(v_player+obY).w
00003EBE 6400                       		bcc.s	@setwater2
00003EC0                            
00003EC0                            @sonicislow:
00003EC0 323C 0508                  		move.w	#$508,d1
00003EC4 31C1 F648                  		move.w	d1,(v_waterpos2).w
00003EC8 0C40 1770                  		cmpi.w	#$1770,d0
00003ECC 6500                       		bcs.s	@setwater2
00003ECE 11FC 0002 F64D             		move.b	#2,(v_wtr_routine).w
00003ED4                            
00003ED4                            	@setwater2:
00003ED4 31C1 F64A                  		move.w	d1,(v_waterpos3).w
00003ED8 4E75                       		rts	
00003EDA                            ; ===========================================================================
00003EDA                            
00003EDA                            @routine3:
00003EDA 5302                       		subq.b	#1,d2
00003EDC 6600                       		bne.s	@routine4
00003EDE 323C 0508                  		move.w	#$508,d1
00003EE2 0C40 1860                  		cmpi.w	#$1860,d0
00003EE6 6500                       		bcs.s	@setwater3
00003EE8 323C 0188                  		move.w	#$188,d1
00003EEC 0C40 1AF0                  		cmpi.w	#$1AF0,d0
00003EF0 6400                       		bcc.s	@loc_3DC6
00003EF2 B278 F648                  		cmp.w	(v_waterpos2).w,d1
00003EF6 6600                       		bne.s	@setwater3
00003EF8                            
00003EF8                            	@loc_3DC6:
00003EF8 11FC 0003 F64D             		move.b	#3,(v_wtr_routine).w
00003EFE                            
00003EFE                            	@setwater3:
00003EFE 31C1 F64A                  		move.w	d1,(v_waterpos3).w
00003F02 4E75                       		rts	
00003F04                            ; ===========================================================================
00003F04                            
00003F04                            @routine4:
00003F04 5302                       		subq.b	#1,d2
00003F06 6600                       		bne.s	@routine5
00003F08 323C 0188                  		move.w	#$188,d1
00003F0C 0C40 1AF0                  		cmpi.w	#$1AF0,d0
00003F10 6500                       		bcs.s	@setwater4
00003F12 323C 0900                  		move.w	#$900,d1
00003F16 0C40 1BC0                  		cmpi.w	#$1BC0,d0
00003F1A 6500                       		bcs.s	@setwater4
00003F1C 11FC 0004 F64D             		move.b	#4,(v_wtr_routine).w
00003F22 31FC 0608 F64A             		move.w	#$608,(v_waterpos3).w
00003F28 31FC 07C0 F648             		move.w	#$7C0,(v_waterpos2).w
00003F2E 11FC 0001 F7E8             		move.b	#1,(f_switch+8).w
00003F34 4E75                       		rts	
00003F36                            ; ===========================================================================
00003F36                            
00003F36                            @setwater4:
00003F36 31C1 F64A                  		move.w	d1,(v_waterpos3).w
00003F3A 31C1 F648                  		move.w	d1,(v_waterpos2).w
00003F3E 4E75                       		rts	
00003F40                            ; ===========================================================================
00003F40                            
00003F40                            @routine5:
00003F40 0C40 1E00                  		cmpi.w	#$1E00,d0	; has screen passed final position?
00003F44 6500                       		bcs.s	@dontset	; if not, branch
00003F46 31FC 0128 F64A             		move.w	#$128,(v_waterpos3).w
00003F4C                            
00003F4C                            	@dontset:
00003F4C 4E75                       		rts	
00003F4E                            ; ===========================================================================
00003F4E                            
00003F4E                            DynWater_SBZ3:
00003F4E 323C 0228                  		move.w	#$228,d1
00003F52 0C78 0F00 F700             		cmpi.w	#$F00,(v_screenposx).w
00003F58 6500                       		bcs.s	@setwater
00003F5A 323C 04C8                  		move.w	#$4C8,d1
00003F5E                            
00003F5E                            	@setwater:
00003F5E 31C1 F64A                  		move.w	d1,(v_waterpos3).w
00003F62 4E75                       		rts
00003F64                            
00003F64                            ; ---------------------------------------------------------------------------
00003F64                            ; Labyrinth Zone "wind tunnels"	subroutine
00003F64                            ; ---------------------------------------------------------------------------
00003F64                            
00003F64                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00003F64                            
00003F64                            
00003F64                            LZWindTunnels:
00003F64 4A78 FE08                  		tst.w	(v_debuguse).w	; is debug mode	being used?
00003F68 6600 0000                  		bne.w	@quit	; if yes, branch
00003F6C 45F9 0000 0000             		lea	(LZWind_Data+8).l,a2
00003F72 7000                       		moveq	#0,d0
00003F74 1038 FE11                  		move.b	(v_act).w,d0	; get act number
00003F78 E748                       		lsl.w	#3,d0		; multiply by 8
00003F7A D4C0                       		adda.w	d0,a2		; add to address for data
00003F7C 7200                       		moveq	#0,d1
00003F7E 4A38 FE11                  		tst.b	(v_act).w	; is act number 1?
00003F82 6600                       		bne.s	@notact1	; if not, branch
00003F84 7201                       		moveq	#1,d1
00003F86 514A                       		subq.w	#8,a2		; use different data for act 1
00003F88                            
00003F88                            	@notact1:
00003F88 43F8 D000                  		lea	(v_player).w,a1
00003F8C                            
00003F8C                            @chksonic:
00003F8C 3029 0008                  		move.w	obX(a1),d0
00003F90 B052                       		cmp.w	(a2),d0
00003F92 6500 0000                  		bcs.w	@chknext
00003F96 B06A 0004                  		cmp.w	4(a2),d0
00003F9A 6400 0000                  		bcc.w	@chknext
00003F9E 3429 000C                  		move.w	obY(a1),d2
00003FA2 B46A 0002                  		cmp.w	2(a2),d2
00003FA6 6500                       		bcs.s	@chknext
00003FA8 B46A 0006                  		cmp.w	6(a2),d2
00003FAC 6400                       		bcc.s	@chknext	; branch if Sonic is outside a range
00003FAE 1038 FE0F                  		move.b	(v_vbla_byte).w,d0
00003FB2 0200 003F                  		andi.b	#$3F,d0		; does VInt counter fall on 0, $40, $80 or $C0?
00003FB6 6600                       		bne.s	@skipsound	; if not, branch
00003FC2                            
00003FC2                            	@skipsound:
00003FC2 4A38 F7C9                  		tst.b	(f_wtunnelallow).w ; are wind tunnels disabled?
00003FC6 6600 0000                  		bne.w	@quit	; if yes, branch
00003FCA 0C29 0004 0024             		cmpi.b	#4,obRoutine(a1) ; is Sonic hurt/dying?
00003FD0 6400                       		bcc.s	@clrquit	; if yes, branch
00003FD2 11FC 0001 F7C7             		move.b	#1,(f_wtunnelmode).w
00003FD8 0440 0080                  		subi.w	#$80,d0
00003FDC B052                       		cmp.w	(a2),d0
00003FDE 6400                       		bcc.s	@movesonic
00003FE0 7002                       		moveq	#2,d0
00003FE2 0C38 0001 FE11             		cmpi.b	#1,(v_act).w	; is act number 2?
00003FE8 6600                       		bne.s	@notact2	; if not, branch
00003FEA 4440                       		neg.w	d0
00003FEC                            
00003FEC                            	@notact2:
00003FEC D169 000C                  		add.w	d0,obY(a1)	; adjust Sonic's y-axis for curve of tunnel
00003FF0                            
00003FF0                            @movesonic:
00003FF0 5869 0008                  		addq.w	#4,obX(a1)
00003FF4 337C 0400 0010             		move.w	#$400,obVelX(a1) ; move Sonic horizontally
00003FFA 337C 0000 0012             		move.w	#0,obVelY(a1)
00004000 137C 0000 001C             		move.b	#id_Float2,obAnim(a1)	; use floating animation
00004006 08E9 0001 0022             		bset	#1,obStatus(a1)
0000400C 0838 0000 F602             		btst	#0,(v_jpadhold2).w ; is up pressed?
00004012 6700                       		beq.s	@down		; if not, branch
00004014 5369 000C                  		subq.w	#1,obY(a1)	; move Sonic up on pole
00004018                            
00004018                            	@down:
00004018 0838 0001 F602             		btst	#1,(v_jpadhold2).w ; is down being pressed?
0000401E 6700                       		beq.s	@end		; if not, branch
00004020 5269 000C                  		addq.w	#1,obY(a1)	; move Sonic down on pole
00004024                            
00004024                            	@end:
00004024 4E75                       		rts	
00004026                            ; ===========================================================================
00004026                            
00004026                            @chknext:
00004026 504A                       		addq.w	#8,a2		; use second set of values (act 1 only)
00004028 51C9 FF62                  		dbf	d1,@chksonic	; on act 1, repeat for a second tunnel
0000402C 4A38 F7C7                  		tst.b	(f_wtunnelmode).w ; is Sonic still in a tunnel?
00004030 6700                       		beq.s	@quit		; if yes, branch
00004032 137C 0000 001C             		move.b	#id_Walk,obAnim(a1)	; use walking animation
00004038                            
00004038                            @clrquit:
00004038 4238 F7C7                  		clr.b	(f_wtunnelmode).w ; finish tunnel
0000403C                            
0000403C                            @quit:
0000403C 4E75                       		rts	
0000403E                            ; End of function LZWindTunnels
0000403E                            
0000403E                            ; ===========================================================================
0000403E                            
0000403E                            		;    left, top,  right, bottom boundaries
0000403E 0A80 0300 0C10 0380        LZWind_Data:	dc.w $A80, $300, $C10,  $380 ; act 1 values (set 1)
00004046 0F80 0100 1410 0180        		dc.w $F80, $100, $1410,	$180 ; act 1 values (set 2)
0000404E 0460 0400 0710 0480        		dc.w $460, $400, $710,  $480 ; act 2 values
00004056 0A20 0600 1610 06E0        		dc.w $A20, $600, $1610, $6E0 ; act 3 values
0000405E 0C80 0600 13D0 0680        		dc.w $C80, $600, $13D0, $680 ; SBZ act 3 values
00004066                            		even
00004066                            
00004066                            ; ---------------------------------------------------------------------------
00004066                            ; Labyrinth Zone water slide subroutine
00004066                            ; ---------------------------------------------------------------------------
00004066                            
00004066                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00004066                            
00004066                            
00004066                            LZWaterSlides:
00004066 43F8 D000                  		lea	(v_player).w,a1
0000406A 0829 0001 0022             		btst	#1,obStatus(a1)	; is Sonic jumping?
00004070 6600                       		bne.s	loc_3F6A	; if not, branch
00004072 3029 000C                  		move.w	obY(a1),d0
00004076 E248                       		lsr.w	#1,d0
00004078 0240 0380                  		andi.w	#$380,d0
0000407C 1229 0008                  		move.b	obX(a1),d1
00004080 0241 007F                  		andi.w	#$7F,d1
00004084 D041                       		add.w	d1,d0
00004086 45F8 A400                  		lea	(v_lvllayout).w,a2
0000408A 1032 0000                  		move.b	(a2,d0.w),d0
0000408E 45FA 0000                  		lea	Slide_Chunks_End(pc),a2
00004092 7200                       		moveq	#Slide_Chunks_End-Slide_Chunks-1,d1
00004094                            
00004094                            loc_3F62:
00004094 B022                       		cmp.b	-(a2),d0
00004096 57C9 FFFC                  		dbeq	d1,loc_3F62
0000409A 6700                       		beq.s	LZSlide_Move
0000409C                            
0000409C                            loc_3F6A:
0000409C 4A38 F7CA                  		tst.b	(f_jumponly).w
000040A0 6700                       		beq.s	locret_3F7A
000040A2 337C 0005 003E             		move.w	#5,$3E(a1)
000040A8 4238 F7CA                  		clr.b	(f_jumponly).w
000040AC                            
000040AC                            locret_3F7A:
000040AC 4E75                       		rts	
000040AE                            ; ===========================================================================
000040AE                            
000040AE                            LZSlide_Move:
000040AE 0C41 0003                  		cmpi.w	#3,d1
000040B2 6400                       		bcc.s	loc_3F84
000040B4 4E71                       		nop	
000040B6                            
000040B6                            loc_3F84:
000040B6 08A9 0000 0022             		bclr	#0,obStatus(a1)
000040BC 103B 1000                  		move.b	Slide_Speeds(pc,d1.w),d0
000040C0 1340 0014                  		move.b	d0,obInertia(a1)
000040C4 6A00                       		bpl.s	loc_3F9A
000040C6 08E9 0000 0022             		bset	#0,obStatus(a1)
000040CC                            
000040CC                            loc_3F9A:
000040CC 4229 0015                  		clr.b	obInertia+1(a1)
000040D0 137C 0000 001C             		move.b	#id_WaterSlide,obAnim(a1) ; use Sonic's "sliding" animation
000040D6 11FC 0001 F7CA             		move.b	#1,(f_jumponly).w ; lock controls (except jumping)
000040DC 1038 FE0F                  		move.b	(v_vbla_byte).w,d0
000040E0 0200 001F                  		andi.b	#$1F,d0
000040E4 6600                       		bne.s	locret_3FBE
000040F0                            
000040F0                            locret_3FBE:
000040F0 4E75                       		rts	
000040F2                            ; End of function LZWaterSlides
000040F2                            
000040F2                            ; ===========================================================================
000040F2                            ; byte_3FC0:
000040F2                            Slide_Speeds:
000040F2 0AF5 0AF6 F5F4 0B          		dc.b $A, $F5, $A, $F6, $F5, $F4, $B
000040FA 00                         		even
000040FA                            
000040FA                            Slide_Chunks:
000040FA 0207 034C 4B08 04          		dc.b 2, 7, 3, $4C, $4B, 8, 4
00004101                            ; byte_3FCF
00004101                            Slide_Chunks_End
00004102 00                         		even
00004102 00                         		even
00004102                            		include	"_inc\MoveSonicInDemo.asm"
00004102                            ; ---------------------------------------------------------------------------
00004102                            ; Subroutine to	move Sonic in demo mode
00004102                            ; ---------------------------------------------------------------------------
00004102                            
00004102                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00004102                            
00004102                            
00004102                            MoveSonicInDemo:
00004102 4A78 FFF0                  		tst.w	(f_demo).w	; is demo mode on?
00004106 6600                       		bne.s	MDemo_On	; if yes, branch
00004108 4E75                       		rts	
0000410A                            ; ===========================================================================
0000410A                            
0000410A                            ; This is an unused subroutine for recording a demo
0000410A                            
0000410A                            DemoRecorder:
0000410A 43F9 0008 0000             		lea	($80000).l,a1
00004110 3038 F790                  		move.w	(v_btnpushtime1).w,d0
00004114 D2C0                       		adda.w	d0,a1
00004116 1038 F604                  		move.b	(v_jpadhold1).w,d0
0000411A B011                       		cmp.b	(a1),d0
0000411C 6600                       		bne.s	@next
0000411E 5229 0001                  		addq.b	#1,1(a1)
00004122 0C29 00FF 0001             		cmpi.b	#$FF,1(a1)
00004128 6700                       		beq.s	@next
0000412A 4E75                       		rts	
0000412C                            
0000412C                            	@next:
0000412C 1340 0002                  		move.b	d0,2(a1)
00004130 137C 0000 0003             		move.b	#0,3(a1)
00004136 5478 F790                  		addq.w	#2,(v_btnpushtime1).w
0000413A 0278 03FF F790             		andi.w	#$3FF,(v_btnpushtime1).w
00004140 4E75                       		rts	
00004142                            ; ===========================================================================
00004142                            
00004142                            MDemo_On:
00004142 4A38 F604                  		tst.b	(v_jpadhold1).w	; is start button pressed?
00004146 6A00                       		bpl.s	@dontquit	; if not, branch
00004148 4A78 FFF0                  		tst.w	(f_demo).w	; is this an ending sequence demo?
0000414C 6B00                       		bmi.s	@dontquit	; if yes, branch
0000414E 11FC 0000 F600             		move.b	#id_Title,(v_gamemode).w ; go to title screen
00004154                            
00004154                            	@dontquit:
00004154 43F9 0000 0000             		lea	(DemoDataPtr).l,a1
0000415A 7000                       		moveq	#0,d0
0000415C 1038 FE10                  		move.b	(v_zone).w,d0
00004160 0C38 0000 F600             		cmpi.b	#id_Special,(v_gamemode).w ; is this a special stage?
00004166 6600                       		bne.s	@notspecial	; if not, branch
00004168 7006                       		moveq	#6,d0		; use demo #6
0000416A                            
0000416A                            	@notspecial:
0000416A E548                       		lsl.w	#2,d0
0000416C 2271 0000                  		movea.l	(a1,d0.w),a1	; fetch address for demo data
00004170 4A78 FFF0                  		tst.w	(f_demo).w	; is this an ending sequence demo?
00004174 6A00                       		bpl.s	@notcredits	; if not, branch
00004176 43F9 0000 0000             		lea	(DemoEndDataPtr).l,a1
0000417C 3038 FFF4                  		move.w	(v_creditsnum).w,d0
00004180 5340                       		subq.w	#1,d0
00004182 E548                       		lsl.w	#2,d0
00004184 2271 0000                  		movea.l	(a1,d0.w),a1	; fetch address for credits demo
00004188                            
00004188                            	@notcredits:
00004188 3038 F790                  		move.w	(v_btnpushtime1).w,d0
0000418C D2C0                       		adda.w	d0,a1
0000418E 1011                       		move.b	(a1),d0
00004190 41F8 F604                  		lea	(v_jpadhold1).w,a0
00004194 1200                       		move.b	d0,d1
00004196 1428 FFFE                  		move.b -2(a0),d2
0000419A B500                       		eor.b	d2,d0
0000419C 10C1                       		move.b	d1,(a0)+
0000419E C001                       		and.b	d1,d0
000041A0 10C0                       		move.b	d0,(a0)+
000041A2 5338 F792                  		subq.b	#1,(v_btnpushtime2).w
000041A6 6400                       		bcc.s	@end
000041A8 11E9 0003 F792             		move.b	3(a1),(v_btnpushtime2).w
000041AE 5478 F790                  		addq.w	#2,(v_btnpushtime1).w
000041B2                            
000041B2                            	@end:
000041B2 4E75                       		rts	
000041B4                            ; End of function MoveSonicInDemo
000041B4                            
000041B4                            ; ===========================================================================
000041B4                            ; ---------------------------------------------------------------------------
000041B4                            ; Demo sequence	pointers
000041B4                            ; ---------------------------------------------------------------------------
000041B4 0000 0000                  DemoDataPtr:	dc.l Demo_GHZ		; demos run after the title screen
000041B8 0000 0000                  		dc.l Demo_GHZ
000041BC 0000 0000                  		dc.l Demo_LZ
000041C0 0000 0000                  		dc.l Demo_LZ
000041C4 0000 0000                  		dc.l Demo_MZ
000041C8 0000 0000                  		dc.l Demo_MZ
000041CC 0000 0000                  		dc.l Demo_SS
000041D0 0000 0000                  		dc.l Demo_SS
000041D4                            
000041D4 0000 0000                  DemoEndDataPtr:	dc.l Demo_EndGHZ1	; demos run during the credits
000041D8 0000 0000                  		dc.l Demo_EndMZ
000041DC 0000 0000                  		dc.l Demo_EndSYZ
000041E0 0000 0000                  		dc.l Demo_EndLZ
000041E4 0000 0000                  		dc.l Demo_EndSLZ
000041E8 0000 0000                  		dc.l Demo_EndSBZ1
000041EC 0000 0000                  		dc.l Demo_EndSBZ2
000041F0 0000 0000                  		dc.l Demo_EndGHZ2
000041F4                            
000041F4 008B 0837 0042 085C 006A+  		dc.b 0,	$8B, 8,	$37, 0,	$42, 8,	$5C, 0,	$6A, 8,	$5F, 0,	$2F, 8,	$2C
00004204 0021 0803 2830 0808 002E+  		dc.b 0,	$21, 8,	3, $28,	$30, 8,	8, 0, $2E, 8, $15, 0, $F, 8, $46
00004214 001A 08FF 08CA 0000 0000+  		dc.b 0,	$1A, 8,	$FF, 8,	$CA, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0
00004224                            		even
00004224                            		even
00004224                            
00004224                            ; ---------------------------------------------------------------------------
00004224                            ; Collision index pointer loading subroutine
00004224                            ; ---------------------------------------------------------------------------
00004224                            
00004224                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00004224                            
00004224                            
00004224                            ColIndexLoad:
00004224 7000                       		moveq	#0,d0
00004226 1038 FE10                  		move.b	(v_zone).w,d0
0000422A E548                       		lsl.w	#2,d0
0000422C 21FB 0000 F796             		move.l	ColPointers(pc,d0.w),(v_collindex).w
00004232 4E75                       		rts	
00004234                            ; End of function ColIndexLoad
00004234                            
00004234                            ; ===========================================================================
00004234                            ; ---------------------------------------------------------------------------
00004234                            ; Collision index pointers
00004234                            ; ---------------------------------------------------------------------------
00004234 0000 0000                  ColPointers:	dc.l Col_GHZ
00004238 0000 0000                  		dc.l Col_LZ
0000423C 0000 0000                  		dc.l Col_MZ
00004240 0000 0000                  		dc.l Col_SLZ
00004244 0000 0000                  		dc.l Col_SYZ
00004248 0000 0000                  		dc.l Col_SBZ
0000424C 0000 0000                  		dc.l Col_GHZ ; Pointer for Ending is missing by default.
00004250 0000 0000                  		dc.l Col_IMZ
00004254 0000 0000                  		dc.l Col_CSZ
00004258                            
00004258                            		include	"_inc\Oscillatory Routines.asm"
00004258                            ; ---------------------------------------------------------------------------
00004258                            ; Oscillating number subroutines
00004258                            ; ---------------------------------------------------------------------------
00004258                            
00004258                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00004258                            
00004258                            ; Initialise the values
00004258                            
00004258                            OscillateNumInit:
00004258 43F8 FE5E                  		lea	(v_oscillate).w,a1
0000425C 45F9 0000 0000             		lea	(@baselines).l,a2
00004262 7220                       		moveq	#$20,d1
00004264                            
00004264                            	@loop:
00004264 32DA                       		move.w	(a2)+,(a1)+	; copy baseline values to RAM
00004266 51C9 FFFC                  		dbf	d1,@loop
0000426A 4E75                       		rts	
0000426C                            
0000426C                            
0000426C                            ; ===========================================================================
0000426C 007C                       @baselines:	dc.w %0000000001111100	; oscillation direction bitfield
0000426E 0080 0000                  		dc.w $80, 0
00004272 0080 0000                  		dc.w $80, 0
00004276 0080 0000                  		dc.w $80, 0
0000427A 0080 0000                  		dc.w $80, 0
0000427E 0080 0000                  		dc.w $80, 0
00004282 0080 0000                  		dc.w $80, 0
00004286 0080 0000                  		dc.w $80, 0
0000428A 0080 0000                  		dc.w $80, 0
0000428E 0080 0000                  		dc.w $80, 0
00004292 50F0 011E                  		dc.w $50F0, $11E
00004296 2080 00B4                  		dc.w $2080, $B4
0000429A 3080 010E                  		dc.w $3080, $10E
0000429E 5080 01C2                  		dc.w $5080, $1C2
000042A2 7080 0276                  		dc.w $7080, $276
000042A6 0080 0000                  		dc.w $80, 0
000042AA 0080 0000                  		dc.w $80, 0
000042AE                            		even
000042AE                            
000042AE                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000042AE                            
000042AE                            ; Oscillate values
000042AE                            
000042AE                            OscillateNumDo:
000042AE 0C38 0006 D024             		cmpi.b	#6,(v_player+obRoutine).w ; has Sonic just died?
000042B4 6400                       		bcc.s	@end		; if yes, branch
000042B6 43F8 FE5E                  		lea	(v_oscillate).w,a1
000042BA 45F9 0000 0000             		lea	(@settings).l,a2
000042C0 3619                       		move.w	(a1)+,d3	; get oscillation direction bitfield
000042C2 720F                       		moveq	#$F,d1
000042C4                            
000042C4                            @loop:
000042C4 341A                       		move.w	(a2)+,d2	; get frequency
000042C6 381A                       		move.w	(a2)+,d4	; get amplitude
000042C8 0303                       		btst	d1,d3		; check oscillation direction
000042CA 6600                       		bne.s	@down		; branch if 1
000042CC                            
000042CC                            	@up:
000042CC 3029 0002                  		move.w	2(a1),d0	; get current rate
000042D0 D042                       		add.w	d2,d0		; add frequency
000042D2 3340 0002                  		move.w	d0,2(a1)
000042D6 D169 0000                  		add.w	d0,0(a1)	; add rate to value
000042DA B829 0000                  		cmp.b	0(a1),d4
000042DE 6200                       		bhi.s	@next
000042E0 03C3                       		bset	d1,d3
000042E2 6000                       		bra.s	@next
000042E4                            
000042E4                            	@down:
000042E4 3029 0002                  		move.w	2(a1),d0
000042E8 9042                       		sub.w	d2,d0
000042EA 3340 0002                  		move.w	d0,2(a1)
000042EE D169 0000                  		add.w	d0,0(a1)
000042F2 B829 0000                  		cmp.b	0(a1),d4
000042F6 6300                       		bls.s	@next
000042F8 0383                       		bclr	d1,d3
000042FA                            
000042FA                            	@next:
000042FA 5849                       		addq.w	#4,a1
000042FC 51C9 FFC6                  		dbf	d1,@loop
00004300 31C3 FE5E                  		move.w	d3,(v_oscillate).w
00004304                            
00004304                            @end:
00004304 4E75                       		rts	
00004306                            ; End of function OscillateNumDo
00004306                            
00004306                            ; ===========================================================================
00004306 0002 0010                  @settings:	dc.w 2,	$10	; frequency, amplitude
0000430A 0002 0018                  		dc.w 2,	$18
0000430E 0002 0020                  		dc.w 2,	$20
00004312 0002 0030                  		dc.w 2,	$30
00004316 0004 0020                  		dc.w 4,	$20
0000431A 0008 0008                  		dc.w 8,	8
0000431E 0008 0040                  		dc.w 8,	$40
00004322 0004 0040                  		dc.w 4,	$40
00004326 0002 0050                  		dc.w 2,	$50
0000432A 0002 0050                  		dc.w 2,	$50
0000432E 0002 0020                  		dc.w 2,	$20
00004332 0003 0030                  		dc.w 3,	$30
00004336 0005 0050                  		dc.w 5,	$50
0000433A 0007 0070                  		dc.w 7,	$70
0000433E 0002 0010                  		dc.w 2,	$10
00004342 0002 0010                  		dc.w 2,	$10
00004346                            		even
00004346                            		even
00004346                            
00004346                            ; ---------------------------------------------------------------------------
00004346                            ; Subroutine to	change synchronised animation variables (rings, giant rings)
00004346                            ; ---------------------------------------------------------------------------
00004346                            
00004346                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00004346                            
00004346                            
00004346                            SynchroAnimate:
00004346                            
00004346                            ; Used for GHZ spiked log
00004346                            Sync1:
00004346 5338 FEC0                  		subq.b	#1,(v_ani0_time).w ; has timer reached 0?
0000434A 6A00                       		bpl.s	Sync2		; if not, branch
0000434C 11FC 000B FEC0             		move.b	#$B,(v_ani0_time).w ; reset timer
00004352 5338 FEC1                  		subq.b	#1,(v_ani0_frame).w ; next frame
00004356 0238 0007 FEC1             		andi.b	#7,(v_ani0_frame).w ; max frame is 7
0000435C                            
0000435C                            ; Used for rings and giant rings
0000435C                            Sync2:
0000435C 5338 FEC2                  		subq.b	#1,(v_ani1_time).w
00004360 6A00                       		bpl.s	Sync3
00004362 11FC 0007 FEC2             		move.b	#7,(v_ani1_time).w
00004368 5238 FEC3                  		addq.b	#1,(v_ani1_frame).w
0000436C 0238 0003 FEC3             		andi.b	#3,(v_ani1_frame).w
00004372                            
00004372                            ; Used for nothing
00004372                            Sync3:
00004372 5338 FEC4                  		subq.b	#1,(v_ani2_time).w
00004376 6A00                       		bpl.s	Sync4
00004378 11FC 0007 FEC4             		move.b	#7,(v_ani2_time).w
0000437E 5238 FEC5                  		addq.b	#1,(v_ani2_frame).w
00004382 0C38 0006 FEC5             		cmpi.b	#6,(v_ani2_frame).w
00004388 6500                       		blo.s	Sync4
0000438A 11FC 0000 FEC5             		move.b	#0,(v_ani2_frame).w
00004390                            
00004390                            ; Used for bouncing rings
00004390                            Sync4:
00004390 4A38 FEC6                  		tst.b	(v_ani3_time).w
00004394 6700                       		beq.s	SyncEnd
00004396 7000                       		moveq	#0,d0
00004398 1038 FEC6                  		move.b	(v_ani3_time).w,d0
0000439C D078 FEC8                  		add.w	(v_ani3_buf).w,d0
000043A0 31C0 FEC8                  		move.w	d0,(v_ani3_buf).w
000043A4 EF58                       		rol.w	#7,d0
000043A6 0240 0003                  		andi.w	#3,d0
000043AA 11C0 FEC7                  		move.b	d0,(v_ani3_frame).w
000043AE 5338 FEC6                  		subq.b	#1,(v_ani3_time).w
000043B2                            
000043B2                            SyncEnd:
000043B2 4E75                       		rts	
000043B4                            ; End of function SynchroAnimate
000043B4                            
000043B4                            ; ---------------------------------------------------------------------------
000043B4                            ; End-of-act signpost pattern loading subroutine
000043B4                            ; ---------------------------------------------------------------------------
000043B4                            
000043B4                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000043B4                            
000043B4                            
000043B4                            SignpostArtLoad:
000043B4 4A78 FE08                  		tst.w	(v_debuguse).w	; is debug mode	being used?
000043B8 6600 0000                  		bne.w	@exit		; if yes, branch
000043BC 0C38 0002 FE11             		cmpi.b	#2,(v_act).w	; is act number 02 (act 3)?
000043C2 6700                       		beq.s	@exit		; if yes, branch
000043C4                            
000043C4 3038 F700                  		move.w	(v_screenposx).w,d0
000043C8 3238 F72A                  		move.w	(v_limitright2).w,d1
000043CC 0441 0100                  		subi.w	#$100,d1
000043D0 B041                       		cmp.w	d1,d0		; has Sonic reached the	edge of	the level?
000043D2 6D00                       		blt.s	@exit		; if not, branch
000043D4 4A38 FE1E                  		tst.b	(f_timecount).w
000043D8 6700                       		beq.s	@exit
000043DA B278 F728                  		cmp.w	(v_limitleft2).w,d1
000043DE 6700                       		beq.s	@exit
000043E0 31C1 F728                  		move.w	d1,(v_limitleft2).w ; move left boundary to current screen position
000043E4 7000                       		moveq	#plcid_Signpost,d0
000043E6 6000 CFB8                  		bra.w	NewPLC		; load signpost	patterns
000043EA                            
000043EA                            	@exit:
000043EA 4E75                       		rts	
000043EC                            ; End of function SignpostArtLoad
000043EC                            
000043EC                            ; ===========================================================================
000043EC                            Demo_GHZ:	incbin	"demodata\Intro - GHZ.bin"
0000444C                            Demo_LZ:	incbin	"demodata\Intro - LZ.bin"
0000450C                            Demo_MZ:	incbin	"demodata\Intro - MZ.bin"
000045CC                            Demo_SS:	incbin	"demodata\Intro - Special Stage.bin"
0000463C                            ; ===========================================================================
0000463C                            
0000463C                            ; ---------------------------------------------------------------------------
0000463C                            ; Special Stage
0000463C                            ; ---------------------------------------------------------------------------
0000463C                            
0000463C                            GM_Special:
00004644 6100 D72A                  		bsr.w	PaletteWhiteOut
00004648 46FC 2700                  		disable_ints
0000464C 4DF9 00C0 0004             		lea	(vdp_control_port).l,a6
00004652 3CBC 8B03                  		move.w	#$8B03,(a6)	; line scroll mode
00004656 3CBC 8004                  		move.w	#$8004,(a6)	; 8-colour mode
0000465A 31FC 8AAF F624             		move.w	#$8A00+175,(v_hbla_hreg).w
00004660 3CBC 9011                  		move.w	#$9011,(a6)	; 128-cell hscroll size
00004664 3038 F60C                  		move.w	(v_vdp_buffer1).w,d0
00004668 0200 00BF                  		andi.b	#$BF,d0
0000466C 33C0 00C0 0004             		move.w	d0,(vdp_control_port).l
00004672 6100 CA3E                  		bsr.w	ClearScreen
00004676 46FC 2300                  		enable_ints
0000467A 4BF9 00C0 0004 3ABC 8F01+  		fillVRAM	0,$6FFF,$5000
0000469C                            
0000469C                            	SS_WaitForDMA:
0000469C 3215                       		move.w	(a5),d1		; read control port ($C00004)
0000469E 0801 0001                  		btst	#1,d1		; is DMA running?
000046A2 66F8                       		bne.s	SS_WaitForDMA	; if yes, branch
000046A4 3ABC 8F02                  		move.w	#$8F02,(a5)	; set VDP increment to 2 bytes
000046A8 6100 0000                  		bsr.w	SS_BGLoad
000046AC 7000                       		moveq	#plcid_SpecialStage,d0
000046AE 6100 CE2A                  		bsr.w	QuickPLC	; load special stage patterns
000046B2                            
000046B2 43F8 D000                  		lea	(v_objspace).w,a1
000046B6 7000                       		moveq	#0,d0
000046B8 323C 07FF                  		move.w	#$7FF,d1
000046BC                            	SS_ClrObjRam:
000046BC 22C0                       		move.l	d0,(a1)+
000046BE 51C9 FFFC                  		dbf	d1,SS_ClrObjRam	; clear	the object RAM
000046C2                            
000046C2 43F8 F700                  		lea	(v_screenposx).w,a1
000046C6 7000                       		moveq	#0,d0
000046C8 323C 003F                  		move.w	#$3F,d1
000046CC                            	SS_ClrRam1:
000046CC 22C0                       		move.l	d0,(a1)+
000046CE 51C9 FFFC                  		dbf	d1,SS_ClrRam1	; clear	variables
000046D2                            
000046D2 43F8 FE60                  		lea	(v_oscillate+2).w,a1
000046D6 7000                       		moveq	#0,d0
000046D8 323C 0027                  		move.w	#$27,d1
000046DC                            	SS_ClrRam2:
000046DC 22C0                       		move.l	d0,(a1)+
000046DE 51C9 FFFC                  		dbf	d1,SS_ClrRam2	; clear	variables
000046E2                            
000046E2 43F8 AA00                  		lea	(v_ngfx_buffer).w,a1
000046E6 7000                       		moveq	#0,d0
000046E8 323C 007F                  		move.w	#$7F,d1
000046EC                            	SS_ClrNemRam:
000046EC 22C0                       		move.l	d0,(a1)+
000046EE 51C9 FFFC                  		dbf	d1,SS_ClrNemRam	; clear	Nemesis	buffer
000046F2                            
000046F2 4238 F64E                  		clr.b	(f_wtr_state).w
000046F6 4278 FE02                  		clr.w	(f_restart).w
000046FA 700B                       		moveq	#palid_Special,d0
000046FC 6100 D740                  		bsr.w	PalLoad1	; load special stage palette
00004700 4EB9 0000 0000             		jsr	(SS_Load).l		; load SS layout data
00004706 21FC 0000 0000 F700        		move.l	#0,(v_screenposx).w
0000470E 21FC 0000 0000 F704        		move.l	#0,(v_screenposy).w
00004716 11FC 0000 D000             		move.b	#id_SonicSpecial,(v_player).w ; load special stage Sonic object
0000471C 6100 0000                  		bsr.w	PalCycle_SS
00004720 4278 F780                  		clr.w	(v_ssangle).w	; set stage angle to "upright"
00004724 31FC 0040 F782             		move.w	#$40,(v_ssrotate).w ; set stage rotation speed
00004732 31FC 0000 F790             		move.w	#0,(v_btnpushtime1).w
00004738 43F9 0000 41B4             		lea	(DemoDataPtr).l,a1
0000473E 7006                       		moveq	#6,d0
00004740 E548                       		lsl.w	#2,d0
00004742 2271 0000                  		movea.l	(a1,d0.w),a1
00004746 11E9 0001 F792             		move.b	1(a1),(v_btnpushtime2).w
0000474C 5338 F792                  		subq.b	#1,(v_btnpushtime2).w
00004750 4278 FE20                  		clr.w	(v_rings).w
00004754 4238 FE1B                  		clr.b	(v_lifecount).w
00004758 31FC 0000 FE08             		move.w	#0,(v_debuguse).w
0000475E 31FC 0708 F614             		move.w	#1800,(v_demolength).w
00004764 4A38 FFE2                  		tst.b	(f_debugcheat).w ; has debug cheat been entered?
00004768 6700                       		beq.s	SS_NoDebug	; if not, branch
0000476A 0838 0006 F604             		btst	#bitA,(v_jpadhold1).w ; is A button pressed?
00004770 6700                       		beq.s	SS_NoDebug	; if not, branch
00004772 11FC 0001 FFFA             		move.b	#1,(f_debugmode).w ; enable debug mode
00004778                            
00004778                            	SS_NoDebug:
00004778 3038 F60C                  		move.w	(v_vdp_buffer1).w,d0
0000477C 0000 0040                  		ori.b	#$40,d0
00004780 33C0 00C0 0004             		move.w	d0,(vdp_control_port).l
00004786 6100 D53C                  		bsr.w	PaletteWhiteIn
0000478A                            
0000478A                            ; ---------------------------------------------------------------------------
0000478A                            ; Main Special Stage loop
0000478A                            ; ---------------------------------------------------------------------------
0000478A                            
0000478A                            SS_MainLoop:
0000478A 6100 CA0A                  		bsr.w	PauseGame
0000478E 11FC 000A F62A             		move.b	#$A,(v_vbla_routine).w
00004794 6100 E024                  		bsr.w	WaitForVBla
00004798 6100 F968                  		bsr.w	MoveSonicInDemo
0000479C 31F8 F604 F602             		move.w	(v_jpadhold1).w,(v_jpadhold2).w
000047A2 4EB9 0000 0000             		jsr	(ExecuteObjects).l
000047A8 4EB9 0000 0000             		jsr	(BuildSprites).l
000047AE 4EB9 0000 0000             		jsr	(SS_ShowLayout).l
000047B4 6100 0000                  		bsr.w	SS_BGAnimate
000047B8 4A78 FFF0                  		tst.w	(f_demo).w	; is demo mode on?
000047BC 6700                       		beq.s	SS_ChkEnd	; if not, branch
000047BE 4A78 F614                  		tst.w	(v_demolength).w ; is there time left on the demo?
000047C2 6700 0000                  		beq.w	SS_ToSegaScreen	; if not, branch
000047C6                            
000047C6                            	SS_ChkEnd:
000047C6 0C38 0000 F600             		cmpi.b	#id_Special,(v_gamemode).w ; is game mode $10 (special stage)?
000047CC 6700 FFBC                  		beq.w	SS_MainLoop	; if yes, branch
000047D0                            
000047D0 4A78 FFF0                  		tst.w	(f_demo).w	; is demo mode on?
000047D4 6600 0000                  		bne.w	SS_ToSegaScreen	; if yes, branch
000047D8 11FC 0000 F600             		move.b	#id_Level,(v_gamemode).w ; set screen mode to $0C (level)
000047DE 0C78 0503 FE10             		cmpi.w	#(id_SBZ<<8)+3,(v_zone).w ; is level number higher than FZ?
000047E4 6500                       		blo.s	SS_Finish	; if not, branch
000047E6 4278 FE10                  		clr.w	(v_zone).w	; set to GHZ1
000047EA                            
000047EA                            SS_Finish:
000047EA 31FC 003C F614             		move.w	#60,(v_demolength).w ; set delay time to 1 second
000047F0 31FC 003F F626             		move.w	#$3F,(v_pfade_start).w
000047F6 4278 F794                  		clr.w	(v_palchgspeed).w
000047FA                            
000047FA                            	SS_FinLoop:
000047FA 11FC 0016 F62A             		move.b	#$16,(v_vbla_routine).w
00004800 6100 DFB8                  		bsr.w	WaitForVBla
00004804 6100 F8FC                  		bsr.w	MoveSonicInDemo
00004808 31F8 F604 F602             		move.w	(v_jpadhold1).w,(v_jpadhold2).w
0000480E 4EB9 0000 0000             		jsr	(ExecuteObjects).l
00004814 4EB9 0000 0000             		jsr	(BuildSprites).l
0000481A 4EB9 0000 0000             		jsr	(SS_ShowLayout).l
00004820 6100 0000                  		bsr.w	SS_BGAnimate
00004824 5378 F794                  		subq.w	#1,(v_palchgspeed).w
00004828 6A00                       		bpl.s	loc_47D4
0000482A 31FC 0002 F794             		move.w	#2,(v_palchgspeed).w
00004830 6100 D55E                  		bsr.w	WhiteOut_ToWhite
00004834                            
00004834                            loc_47D4:
00004834 4A78 F614                  		tst.w	(v_demolength).w
00004838 66C0                       		bne.s	SS_FinLoop
0000483A                            
0000483A 46FC 2700                  		disable_ints
0000483E 4DF9 00C0 0004             		lea	(vdp_control_port).l,a6
00004844 3CBC 8230                  		move.w	#$8200+(vram_fg>>10),(a6) ; set foreground nametable address
00004848 3CBC 8407                  		move.w	#$8400+(vram_bg>>13),(a6) ; set background nametable address
0000484C 3CBC 9001                  		move.w	#$9001,(a6)		; 64-cell hscroll size
00004850 6100 C860                  		bsr.w	ClearScreen
0000485E 41F9 0000 0000             		lea	(Nem_TitleCard).l,a0 ; load title card patterns
00004864 6100 C9C8                  		bsr.w	NemDec
00004868 4EB9 0000 0000             		jsr	(Hud_Base).l
0000486E 46FC 2300                  		enable_ints
00004872 7012                       		moveq	#palid_SSResult,d0
00004874 6100 D5E4                  		bsr.w	PalLoad2	; load results screen palette
00004878 7000                       		moveq	#plcid_Main,d0
0000487A 6100 CB24                  		bsr.w	NewPLC
0000487E 7000                       		moveq	#plcid_SSResult,d0
00004880 6100 CAEC                  		bsr.w	AddPLC		; load results screen patterns
00004884 11FC 0001 FE1F             		move.b	#1,(f_scorecount).w ; update score counter
0000488A 11FC 0001 F7D6             		move.b	#1,(f_endactbonus).w ; update ring bonus counter
00004890 3038 FE20                  		move.w	(v_rings).w,d0
00004894 C0FC 000A                  		mulu.w	#10,d0		; multiply rings by 10
00004898 31C0 F7D4                  		move.w	d0,(v_ringbonus).w ; set rings bonus
000048A6                            
000048A6 43F8 D000                  		lea	(v_objspace).w,a1
000048AA 7000                       		moveq	#0,d0
000048AC 323C 07FF                  		move.w	#$7FF,d1
000048B0                            	SS_EndClrObjRam:
000048B0 22C0                       		move.l	d0,(a1)+
000048B2 51C9 FFFC                  		dbf	d1,SS_EndClrObjRam ; clear object RAM
000048B6                            
000048B6 11FC 0000 D5C0             		move.b	#id_SSResult,(v_objspace+$5C0).w ; load results screen object
000048BC                            
000048BC                            SS_NormalExit:
000048BC 6100 C8D8                  		bsr.w	PauseGame
000048C0 11FC 000C F62A             		move.b	#$C,(v_vbla_routine).w
000048C6 6100 DEF2                  		bsr.w	WaitForVBla
000048CA 4EB9 0000 0000             		jsr	(ExecuteObjects).l
000048D0 4EB9 0000 0000             		jsr	(BuildSprites).l
000048D6 6100 CB02                  		bsr.w	RunPLC
000048DA 4A78 FE02                  		tst.w	(f_restart).w
000048DE 67DC                       		beq.s	SS_NormalExit
000048E0 4AB8 F680                  		tst.l	(v_plc_buffer).w
000048E4 66D6                       		bne.s	SS_NormalExit
000048EE 6100 D480                  		bsr.w	PaletteWhiteOut
000048F2 4E75                       		rts	
000048F4                            ; ===========================================================================
000048F4                            
000048F4                            SS_ToSegaScreen:
000048F4 11FC 0000 F600             		move.b	#id_Sega,(v_gamemode).w ; goto Sega screen
000048FA 4E75                       		rts
000048FC                            
000048FC                            
000048FC                            ; ---------------------------------------------------------------------------
000048FC                            ; Special stage	background loading subroutine
000048FC                            ; ---------------------------------------------------------------------------
000048FC                            
000048FC                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000048FC                            
000048FC                            
000048FC                            SS_BGLoad:
000048FC 43F9 00FF 0000             		lea	($FF0000).l,a1
00004902 41F9 0000 0000             		lea	(Eni_SSBg1).l,a0 ; load	mappings for the birds and fish
00004908 303C 4051                  		move.w	#$4051,d0
0000490C 6100 CBFE                  		bsr.w	EniDec
00004910 263C 5000 0001             		move.l	#$50000001,d3
00004916 45F9 00FF 0080             		lea	($FF0080).l,a2
0000491C 7E06                       		moveq	#6,d7
0000491E                            
0000491E                            loc_48BE:
0000491E 2003                       		move.l	d3,d0
00004920 7C03                       		moveq	#3,d6
00004922 7800                       		moveq	#0,d4
00004924 0C47 0003                  		cmpi.w	#3,d7
00004928 6400                       		bhs.s	loc_48CC
0000492A 7801                       		moveq	#1,d4
0000492C                            
0000492C                            loc_48CC:
0000492C 7A07                       		moveq	#7,d5
0000492E                            
0000492E                            loc_48CE:
0000492E 224A                       		movea.l	a2,a1
00004930 0A04 0001                  		eori.b	#1,d4
00004934 6600                       		bne.s	loc_48E2
00004936 0C47 0006                  		cmpi.w	#6,d7
0000493A 6600                       		bne.s	loc_48F2
0000493C 43F9 00FF 0000             		lea	($FF0000).l,a1
00004942                            
00004942                            loc_48E2:
00004942 48E7 F800                  		movem.l	d0-d4,-(sp)
00004946 7207                       		moveq	#7,d1
00004948 7407                       		moveq	#7,d2
0000494A 6100 C8C2                  		bsr.w	TilemapToVRAM
0000494E 4CDF 001F                  		movem.l	(sp)+,d0-d4
00004952                            
00004952                            loc_48F2:
00004952 0680 0010 0000             		addi.l	#$100000,d0
00004958 51CD FFD4                  		dbf	d5,loc_48CE
0000495C 0680 0380 0000             		addi.l	#$3800000,d0
00004962 0A04 0001                  		eori.b	#1,d4
00004966 51CE FFC4                  		dbf	d6,loc_48CC
0000496A 0683 1000 0000             		addi.l	#$10000000,d3
00004970 6A00                       		bpl.s	loc_491C
00004972 4843                       		swap	d3
00004974 0683 0000 C000             		addi.l	#$C000,d3
0000497A 4843                       		swap	d3
0000497C                            
0000497C                            loc_491C:
0000497C D4FC 0080                  		adda.w	#$80,a2
00004980 51CF FF9C                  		dbf	d7,loc_48BE
00004984 43F9 00FF 0000             		lea	($FF0000).l,a1
0000498A 41F9 0000 0000             		lea	(Eni_SSBg2).l,a0 ; load	mappings for the clouds
00004990 303C 4000                  		move.w	#$4000,d0
00004994 6100 CB76                  		bsr.w	EniDec
00004998 43F9 00FF 0000             		lea	($FF0000).l,a1
0000499E 203C 4000 0003             		move.l	#$40000003,d0
000049A4 723F                       		moveq	#$3F,d1
000049A6 741F                       		moveq	#$1F,d2
000049A8 6100 C864                  		bsr.w	TilemapToVRAM
000049AC 43F9 00FF 0000             		lea	($FF0000).l,a1
000049B2 203C 5000 0003             		move.l	#$50000003,d0
000049B8 723F                       		moveq	#$3F,d1
000049BA 743F                       		moveq	#$3F,d2
000049BC 6100 C850                  		bsr.w	TilemapToVRAM
000049C0 4E75                       		rts	
000049C2                            ; End of function SS_BGLoad
000049C2                            
000049C2                            ; ---------------------------------------------------------------------------
000049C2                            ; Palette cycling routine - special stage
000049C2                            ; ---------------------------------------------------------------------------
000049C2                            
000049C2                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000049C2                            
000049C2                            
000049C2                            PalCycle_SS:
000049C2 4A78 F63A                  		tst.w	(f_pause).w
000049C6 6600                       		bne.s	locret_49E6
000049C8 5378 F79C                  		subq.w	#1,(v_palss_time).w
000049CC 6A00                       		bpl.s	locret_49E6
000049CE 4DF9 00C0 0004             		lea	(vdp_control_port).l,a6
000049D4 3038 F79A                  		move.w	(v_palss_num).w,d0
000049D8 5278 F79A                  		addq.w	#1,(v_palss_num).w
000049DC 0240 001F                  		andi.w	#$1F,d0
000049E0 E548                       		lsl.w	#2,d0
000049E2 41F9 0000 0000             		lea	(byte_4A3C).l,a0
000049E8 D0C0                       		adda.w	d0,a0
000049EA 1018                       		move.b	(a0)+,d0
000049EC 6A00                       		bpl.s	loc_4992
000049EE 303C 01FF                  		move.w	#$1FF,d0
000049F2                            
000049F2                            loc_4992:
000049F2 31C0 F79C                  		move.w	d0,(v_palss_time).w
000049F6 7000                       		moveq	#0,d0
000049F8 1018                       		move.b	(a0)+,d0
000049FA 31C0 F7A0                  		move.w	d0,($FFFFF7A0).w
000049FE 43F9 0000 0000             		lea	(byte_4ABC).l,a1
00004A04 43F1 0000                  		lea	(a1,d0.w),a1
00004A08 303C 8200                  		move.w	#-$7E00,d0
00004A0C 1019                       		move.b	(a1)+,d0
00004A0E 3C80                       		move.w	d0,(a6)
00004A10 11D1 F616                  		move.b	(a1),(v_scrposy_dup).w
00004A14 303C 8400                  		move.w	#-$7C00,d0
00004A18 1018                       		move.b	(a0)+,d0
00004A1A 3C80                       		move.w	d0,(a6)
00004A1C 23FC 4000 0010 00C0 0004   		move.l	#$40000010,(vdp_control_port).l
00004A26 23F8 F616 00C0 0000        		move.l	(v_scrposy_dup).w,(vdp_data_port).l
00004A2E 7000                       		moveq	#0,d0
00004A30 1018                       		move.b	(a0)+,d0
00004A32 6B00                       		bmi.s	loc_49E8
00004A34 43F9 0000 0000             		lea	(Pal_SSCyc1).l,a1
00004A3A D2C0                       		adda.w	d0,a1
00004A3C 45F8 FB4E                  		lea	(v_pal_dry+$4E).w,a2
00004A40 24D9                       		move.l	(a1)+,(a2)+
00004A42 24D9                       		move.l	(a1)+,(a2)+
00004A44 24D9                       		move.l	(a1)+,(a2)+
00004A46                            
00004A46                            locret_49E6:
00004A46 4E75                       		rts	
00004A48                            ; ===========================================================================
00004A48                            
00004A48                            loc_49E8:
00004A48 3238 F79E                  		move.w	($FFFFF79E).w,d1
00004A4C 0C40 008A                  		cmpi.w	#$8A,d0
00004A50 6500                       		blo.s	loc_49F4
00004A52 5241                       		addq.w	#1,d1
00004A54                            
00004A54                            loc_49F4:
00004A54 C2FC 002A                  		mulu.w	#$2A,d1
00004A58 43F9 0000 0000             		lea	(Pal_SSCyc2).l,a1
00004A5E D2C1                       		adda.w	d1,a1
00004A60 0240 007F                  		andi.w	#$7F,d0
00004A64 0880 0000                  		bclr	#0,d0
00004A68 6700                       		beq.s	loc_4A18
00004A6A 45F8 FB6E                  		lea	(v_pal_dry+$6E).w,a2
00004A6E 24D1                       		move.l	(a1),(a2)+
00004A70 24E9 0004                  		move.l	4(a1),(a2)+
00004A74 24E9 0008                  		move.l	8(a1),(a2)+
00004A78                            
00004A78                            loc_4A18:
00004A78 D2FC 000C                  		adda.w	#$C,a1
00004A7C 45F8 FB5A                  		lea	(v_pal_dry+$5A).w,a2
00004A80 0C40 000A                  		cmpi.w	#$A,d0
00004A84 6500                       		blo.s	loc_4A2E
00004A86 0440 000A                  		subi.w	#$A,d0
00004A8A 45F8 FB7A                  		lea	(v_pal_dry+$7A).w,a2
00004A8E                            
00004A8E                            loc_4A2E:
00004A8E 3200                       		move.w	d0,d1
00004A90 D040                       		add.w	d0,d0
00004A92 D041                       		add.w	d1,d0
00004A94 D2C0                       		adda.w	d0,a1
00004A96 24D9                       		move.l	(a1)+,(a2)+
00004A98 34D9                       		move.w	(a1)+,(a2)+
00004A9A 4E75                       		rts	
00004A9C                            ; End of function PalCycle_SS
00004A9C                            
00004A9C                            ; ===========================================================================
00004A9C 0300 0792 0300 0790 0300+  byte_4A3C:	dc.b 3,	0, 7, $92, 3, 0, 7, $90, 3, 0, 7, $8E, 3, 0, 7,	$8C
00004AAC                            
00004AAC 0300 078B 0300 0780 0300+  		dc.b 3,	0, 7, $8B, 3, 0, 7, $80, 3, 0, 7, $82, 3, 0, 7,	$84
00004ABC 0300 0786 0300 0788 0708+  		dc.b 3,	0, 7, $86, 3, 0, 7, $88, 7, 8, 7, 0, 7,	$A, 7, $C
00004ACC FF0C 0718 FF0C 0718 070A+  		dc.b $FF, $C, 7, $18, $FF, $C, 7, $18, 7, $A, 7, $C, 7,	8, 7, 0
00004ADC 0300 0688 0300 0686 0300+  		dc.b 3,	0, 6, $88, 3, 0, 6, $86, 3, 0, 6, $84, 3, 0, 6,	$82
00004AEC 0300 0681 0300 068A 0300+  		dc.b 3,	0, 6, $81, 3, 0, 6, $8A, 3, 0, 6, $8C, 3, 0, 6,	$8E
00004AFC 0300 0690 0300 0692 0702+  		dc.b 3,	0, 6, $90, 3, 0, 6, $92, 7, 2, 6, $24, 7, 4, 6,	$30
00004B0C FF06 063C FF06 063C 0704+  		dc.b $FF, 6, 6,	$3C, $FF, 6, 6,	$3C, 7,	4, 6, $30, 7, 2, 6, $24
00004B1C                            		even
00004B1C 1001 1800 1801 2000 2001+  byte_4ABC:	dc.b $10, 1, $18, 0, $18, 1, $20, 0, $20, 1, $28, 0, $28, 1
00004B2A                            		even
00004B2A                            
00004B2A                            Pal_SSCyc1:	incbin	"palette\Cycle - Special Stage 1.bin"
00004B72                            		even
00004B72                            Pal_SSCyc2:	incbin	"palette\Cycle - Special Stage 2.bin"
00004C44                            		even
00004C44                            
00004C44                            ; ---------------------------------------------------------------------------
00004C44                            ; Subroutine to	make the special stage background animated
00004C44                            ; ---------------------------------------------------------------------------
00004C44                            
00004C44                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00004C44                            
00004C44                            
00004C44                            SS_BGAnimate:
00004C44 3038 F7A0                  		move.w	($FFFFF7A0).w,d0
00004C48 6600                       		bne.s	loc_4BF6
00004C4A 31FC 0000 F70C             		move.w	#0,(v_bgscreenposy).w
00004C50 31F8 F70C F618             		move.w	(v_bgscreenposy).w,(v_bgscrposy_dup).w
00004C56                            
00004C56                            loc_4BF6:
00004C56 0C40 0008                  		cmpi.w	#8,d0
00004C5A 6400                       		bhs.s	loc_4C4E
00004C5C 0C40 0006                  		cmpi.w	#6,d0
00004C60 6600                       		bne.s	loc_4C10
00004C62 5278 F718                  		addq.w	#1,(v_bg3screenposx).w
00004C66 5278 F70C                  		addq.w	#1,(v_bgscreenposy).w
00004C6A 31F8 F70C F618             		move.w	(v_bgscreenposy).w,(v_bgscrposy_dup).w
00004C70                            
00004C70                            loc_4C10:
00004C70 7000                       		moveq	#0,d0
00004C72 3038 F708                  		move.w	(v_bgscreenposx).w,d0
00004C76 4440                       		neg.w	d0
00004C78 4840                       		swap	d0
00004C7A 43F9 0000 0000             		lea	(byte_4CCC).l,a1
00004C80 47F8 AA00                  		lea	(v_ngfx_buffer).w,a3
00004C84 7609                       		moveq	#9,d3
00004C86                            
00004C86                            loc_4C26:
00004C86 302B 0002                  		move.w	2(a3),d0
00004C8A 6100 DB60                  		bsr.w	CalcSine
00004C8E 7400                       		moveq	#0,d2
00004C90 1419                       		move.b	(a1)+,d2
00004C92 C1C2                       		muls.w	d2,d0
00004C94 E080                       		asr.l	#8,d0
00004C96 36C0                       		move.w	d0,(a3)+
00004C98 1419                       		move.b	(a1)+,d2
00004C9A 4882                       		ext.w	d2
00004C9C D55B                       		add.w	d2,(a3)+
00004C9E 51CB FFE6                  		dbf	d3,loc_4C26
00004CA2 47F8 AA00                  		lea	(v_ngfx_buffer).w,a3
00004CA6 45F9 0000 0000             		lea	(byte_4CB8).l,a2
00004CAC 6000                       		bra.s	loc_4C7E
00004CAE                            ; ===========================================================================
00004CAE                            
00004CAE                            loc_4C4E:
00004CAE 0C40 000C                  		cmpi.w	#$C,d0
00004CB2 6600                       		bne.s	loc_4C74
00004CB4 5378 F718                  		subq.w	#1,(v_bg3screenposx).w
00004CB8 47F8 AB00                  		lea	($FFFFAB00).w,a3
00004CBC 243C 0001 8000             		move.l	#$18000,d2
00004CC2 7206                       		moveq	#6,d1
00004CC4                            
00004CC4                            loc_4C64:
00004CC4 2013                       		move.l	(a3),d0
00004CC6 9082                       		sub.l	d2,d0
00004CC8 26C0                       		move.l	d0,(a3)+
00004CCA 0482 0000 2000             		subi.l	#$2000,d2
00004CD0 51C9 FFF2                  		dbf	d1,loc_4C64
00004CD4                            
00004CD4                            loc_4C74:
00004CD4 47F8 AB00                  		lea	($FFFFAB00).w,a3
00004CD8 45F9 0000 0000             		lea	(byte_4CC4).l,a2
00004CDE                            
00004CDE                            loc_4C7E:
00004CDE 43F8 CC00                  		lea	(v_hscrolltablebuffer).w,a1
00004CE2 3038 F718                  		move.w	(v_bg3screenposx).w,d0
00004CE6 4440                       		neg.w	d0
00004CE8 4840                       		swap	d0
00004CEA 7600                       		moveq	#0,d3
00004CEC 161A                       		move.b	(a2)+,d3
00004CEE 3438 F70C                  		move.w	(v_bgscreenposy).w,d2
00004CF2 4442                       		neg.w	d2
00004CF4 0242 00FF                  		andi.w	#$FF,d2
00004CF8 E54A                       		lsl.w	#2,d2
00004CFA                            
00004CFA                            loc_4C9A:
00004CFA 301B                       		move.w	(a3)+,d0
00004CFC 544B                       		addq.w	#2,a3
00004CFE 7200                       		moveq	#0,d1
00004D00 121A                       		move.b	(a2)+,d1
00004D02 5341                       		subq.w	#1,d1
00004D04                            
00004D04                            loc_4CA4:
00004D04 2380 2000                  		move.l	d0,(a1,d2.w)
00004D08 5842                       		addq.w	#4,d2
00004D0A 0242 03FC                  		andi.w	#$3FC,d2
00004D0E 51C9 FFF4                  		dbf	d1,loc_4CA4
00004D12 51CB FFE6                  		dbf	d3,loc_4C9A
00004D16 4E75                       		rts	
00004D18                            ; End of function SS_BGAnimate
00004D18                            
00004D18                            ; ===========================================================================
00004D18 0928 1810 2818 1030 1808+  byte_4CB8:	dc.b 9,	$28, $18, $10, $28, $18, $10, $30, $18,	8, $10,	0
00004D24                            		even
00004D24 0630 3030 2818 1818        byte_4CC4:	dc.b 6,	$30, $30, $30, $28, $18, $18, $18
00004D2C                            		even
00004D2C 0802 04FF 0203 08FF 0402+  byte_4CCC:	dc.b 8,	2, 4, $FF, 2, 3, 8, $FF, 4, 2, 2, 3, 8,	$FD, 4,	2, 2, 3, 2, $FF
00004D40                            		even
00004D40                            
00004D40                            ; ===========================================================================
00004D40                            
00004D40                            ; ---------------------------------------------------------------------------
00004D40                            ; Continue screen
00004D40                            ; ---------------------------------------------------------------------------
00004D40                            
00004D40                            GM_Continue:
00004D40 6100 CF04                  		bsr.w	PaletteFadeOut
00004D44 46FC 2700                  		disable_ints
00004D48 3038 F60C                  		move.w	(v_vdp_buffer1).w,d0
00004D4C 0200 00BF                  		andi.b	#$BF,d0
00004D50 33C0 00C0 0004             		move.w	d0,(vdp_control_port).l
00004D56 4DF9 00C0 0004             		lea	(vdp_control_port).l,a6
00004D5C 3CBC 8004                  		move.w	#$8004,(a6)	; 8 colour mode
00004D60 3CBC 8700                  		move.w	#$8700,(a6)	; background colour
00004D64 6100 C34C                  		bsr.w	ClearScreen
00004D68                            
00004D68 43F8 D000                  		lea	(v_objspace).w,a1
00004D6C 7000                       		moveq	#0,d0
00004D6E 323C 07FF                  		move.w	#$7FF,d1
00004D72                            	Cont_ClrObjRam:
00004D72 22C0                       		move.l	d0,(a1)+
00004D74 51C9 FFFC                  		dbf	d1,Cont_ClrObjRam ; clear object RAM
00004D78                            
00004D82 41F9 0000 0000             		lea	(Nem_TitleCard).l,a0 ; load title card patterns
00004D88 6100 C4A4                  		bsr.w	NemDec
00004D96 41F9 0000 0000             		lea	(Nem_ContSonic).l,a0 ; load Sonic patterns
00004D9C 6100 C490                  		bsr.w	NemDec
00004DAA 41F9 0000 0000             		lea	(Nem_MiniSonic).l,a0 ; load continue screen patterns
00004DB0 6100 C47C                  		bsr.w	NemDec
00004DB4 720A                       		moveq	#10,d1
00004DB6 4EB9 0000 0000             		jsr	(ContScrCounter).l	; run countdown	(start from 10)
00004DBC 7013                       		moveq	#palid_Continue,d0
00004DBE 6100 D07E                  		bsr.w	PalLoad1	; load continue	screen palette
00004DCA 31FC 0293 F614             		move.w	#659,(v_demolength).w ; set time delay to 11 seconds
00004DD0 42B8 F700                  		clr.l	(v_screenposx).w
00004DD4 21FC 0100 0000 F704        		move.l	#$1000000,(v_screenposy).w
00004DDC 11FC 0000 D000             		move.b	#id_ContSonic,(v_player).w ; load Sonic object
00004DE2 11FC 0000 D040             		move.b	#id_ContScrItem,(v_objspace+$40).w ; load continue screen objects
00004DE8 11FC 0000 D080             		move.b	#id_ContScrItem,(v_objspace+$80).w
00004DEE 11FC 0003 D098             		move.b	#3,(v_objspace+$80+obPriority).w
00004DF4 11FC 0004 D09A             		move.b	#4,(v_objspace+$80+obFrame).w
00004DFA 11FC 0000 D0C0             		move.b	#id_ContScrItem,(v_objspace+$C0).w
00004E00 11FC 0004 D0E4             		move.b	#4,(v_objspace+$C0+obRoutine).w
00004E06 4EB9 0000 0000             		jsr	(ExecuteObjects).l
00004E0C 4EB9 0000 0000             		jsr	(BuildSprites).l
00004E12 3038 F60C                  		move.w	(v_vdp_buffer1).w,d0
00004E16 0000 0040                  		ori.b	#$40,d0
00004E1A 33C0 00C0 0004             		move.w	d0,(vdp_control_port).l
00004E20 6100 CD7E                  		bsr.w	PaletteFadeIn
00004E24                            
00004E24                            ; ---------------------------------------------------------------------------
00004E24                            ; Continue screen main loop
00004E24                            ; ---------------------------------------------------------------------------
00004E24                            
00004E24                            Cont_MainLoop:
00004E24 11FC 0016 F62A             		move.b	#$16,(v_vbla_routine).w
00004E2A 6100 D98E                  		bsr.w	WaitForVBla
00004E2E 0C38 0006 D024             		cmpi.b	#6,(v_player+obRoutine).w
00004E34 6400                       		bhs.s	loc_4DF2
00004E36 46FC 2700                  		disable_ints
00004E3A 3238 F614                  		move.w	(v_demolength).w,d1
00004E3E 82FC 003C                  		divu.w	#$3C,d1
00004E42 0281 0000 000F             		andi.l	#$F,d1
00004E48 4EB9 0000 0000             		jsr	(ContScrCounter).l
00004E4E 46FC 2300                  		enable_ints
00004E52                            
00004E52                            loc_4DF2:
00004E52 4EB9 0000 0000             		jsr	(ExecuteObjects).l
00004E58 4EB9 0000 0000             		jsr	(BuildSprites).l
00004E5E 0C78 0180 D008             		cmpi.w	#$180,(v_player+obX).w ; has Sonic run off screen?
00004E64 6400                       		bhs.s	Cont_GotoLevel	; if yes, branch
00004E66 0C38 0006 D024             		cmpi.b	#6,(v_player+obRoutine).w
00004E6C 64B6                       		bhs.s	Cont_MainLoop
00004E6E 4A78 F614                  		tst.w	(v_demolength).w
00004E72 6600 FFB0                  		bne.w	Cont_MainLoop
00004E76 11FC 0000 F600             		move.b	#id_Sega,(v_gamemode).w ; go to Sega screen
00004E7C 4E75                       		rts	
00004E7E                            ; ===========================================================================
00004E7E                            
00004E7E                            Cont_GotoLevel:
00004E7E 11FC 0000 F600             		move.b	#id_Level,(v_gamemode).w ; set screen mode to $0C (level)
00004E84 11FC 0003 FE12             		move.b	#3,(v_lives).w	; set lives to 3
00004E8A 7000                       		moveq	#0,d0
00004E8C 31C0 FE20                  		move.w	d0,(v_rings).w	; clear rings
00004E90 21C0 FE22                  		move.l	d0,(v_time).w	; clear time
00004E94 21C0 FE26                  		move.l	d0,(v_score).w	; clear score
00004E98 11C0 FE30                  		move.b	d0,(v_lastlamp).w ; clear lamppost count
00004E9C 5338 FE18                  		subq.b	#1,(v_continues).w ; subtract 1 from continues
00004EA0 4E75                       		rts	
00004EA2                            ; ===========================================================================
00004EA2                            
00004EA2                            		include	"_incObj\80 Continue Screen Elements.asm"
00004EA2                            ; ---------------------------------------------------------------------------
00004EA2                            ; Object 80 - Continue screen elements
00004EA2                            ; ---------------------------------------------------------------------------
00004EA2                            
00004EA2                            ContScrItem:
00004EA2 7000                       		moveq	#0,d0
00004EA4 1028 0024                  		move.b	$24(a0),d0
00004EA8 323B 0000                  		move.w	CSI_Index(pc,d0.w),d1
00004EAC 4EFB 1000                  		jmp	CSI_Index(pc,d1.w)
00004EB0                            ; ===========================================================================
00004EB0 0000                       CSI_Index:	dc.w CSI_Main-CSI_Index
00004EB2 0000                       		dc.w CSI_Display-CSI_Index
00004EB4 0000                       		dc.w CSI_MakeMiniSonic-CSI_Index
00004EB6 0000                       		dc.w CSI_ChkDel-CSI_Index
00004EB8                            ; ===========================================================================
00004EB8                            
00004EB8                            CSI_Main:	; Routine 0
00004EB8 5428 0024                  		addq.b	#2,obRoutine(a0)
00004EBC 217C 0000 0000 0004        		move.l	#Map_ContScr,obMap(a0)
00004EC4 317C 8500 0002             		move.w	#$8500,obGfx(a0)
00004ECA 117C 0000 0001             		move.b	#0,obRender(a0)
00004ED0 117C 003C 0019             		move.b	#$3C,obActWid(a0)
00004ED6 317C 0120 0008             		move.w	#$120,obX(a0)
00004EDC 317C 00C0 000A             		move.w	#$C0,obScreenY(a0)
00004EE2 31FC 0000 FE20             		move.w	#0,(v_rings).w	; clear rings
00004EE8                            
00004EE8                            CSI_Display:	; Routine 2
00004EE8 4EF9 0000 0000             		jmp	(DisplaySprite).l
00004EEE                            ; ===========================================================================
00004EEE                            
00004EEE                            	CSI_MiniSonicPos:
00004EEE 0116 012A 0102 013E 00EE+  		dc.w $116, $12A, $102, $13E, $EE, $152, $DA, $166, $C6
00004F00 017A 00B2 018E 009E 01A2+  		dc.w $17A, $B2,	$18E, $9E, $1A2, $8A
00004F0C                            
00004F0C                            CSI_MakeMiniSonic:
00004F0C                            		; Routine 4
00004F0C 2248                       		movea.l	a0,a1
00004F0E 45F9 0000 4EEE             		lea	(CSI_MiniSonicPos).l,a2
00004F14 7200                       		moveq	#0,d1
00004F16 1238 FE18                  		move.b	(v_continues).w,d1
00004F1A 5501                       		subq.b	#2,d1
00004F1C 6400                       		bcc.s	CSI_MoreThan1
00004F1E 4EF9 0000 0000             		jmp	(DeleteObject).l	; cancel if you have 0-1 continues
00004F24                            
00004F24                            	CSI_MoreThan1:
00004F24 7601                       		moveq	#1,d3
00004F26 0C01 000E                  		cmpi.b	#14,d1		; do you have fewer than 16 continues
00004F2A 6500                       		bcs.s	CSI_FewerThan16	; if yes, branch
00004F2C                            
00004F2C 7600                       		moveq	#0,d3
00004F2E 720E                       		moveq	#14,d1		; cap at 15 mini-Sonics
00004F30                            
00004F30                            	CSI_FewerThan16:
00004F30 1401                       		move.b	d1,d2
00004F32 0202 0001                  		andi.b	#1,d2
00004F36                            
00004F36                            CSI_MiniSonicLoop:
00004F36 137C 0000 0000             		move.b	#id_ContScrItem,0(a1) ; load mini-Sonic object
00004F3C 335A 0008                  		move.w	(a2)+,obX(a1)	; use above data for x-axis position
00004F40 4A02                       		tst.b	d2		; do you have an even number of continues?
00004F42 6700                       		beq.s	CSI_Even	; if yes, branch
00004F44 0469 000A 0008             		subi.w	#$A,obX(a1)	; shift mini-Sonics slightly to the right
00004F4A                            
00004F4A                            	CSI_Even:
00004F4A 337C 00D0 000A             		move.w	#$D0,obScreenY(a1)
00004F50 137C 0006 001A             		move.b	#6,obFrame(a1)
00004F56 137C 0006 0024             		move.b	#6,obRoutine(a1)
00004F5C 237C 0000 0000 0004        		move.l	#Map_ContScr,obMap(a1)
00004F64 337C 8551 0002             		move.w	#$8551,obGfx(a1)
00004F6A 137C 0000 0001             		move.b	#0,obRender(a1)
00004F70 43E9 0040                  		lea	$40(a1),a1
00004F74 51C9 FFC0                  		dbf	d1,CSI_MiniSonicLoop ; repeat for number of continues
00004F78                            
00004F78 43E9 FFC0                  		lea	-$40(a1),a1
00004F7C 1343 0028                  		move.b	d3,obSubtype(a1)
00004F80                            
00004F80                            CSI_ChkDel:	; Routine 6
00004F80 4A28 0028                  		tst.b	obSubtype(a0)	; do you have 16 or more continues?
00004F84 6700                       		beq.s	CSI_Animate	; if yes, branch
00004F86 0C38 0006 D024             		cmpi.b	#6,(v_player+obRoutine).w ; is Sonic running?
00004F8C 6500                       		bcs.s	CSI_Animate	; if not, branch
00004F8E 1038 FE0F                  		move.b	(v_vbla_byte).w,d0
00004F92 0200 0001                  		andi.b	#1,d0
00004F96 6600                       		bne.s	CSI_Animate
00004F98 4A78 D010                  		tst.w	(v_player+obVelX).w ; is Sonic running?
00004F9C 6600                       		bne.s	CSI_Delete	; if yes, goto delete
00004F9E 4E75                       		rts	
00004FA0                            
00004FA0                            CSI_Animate:
00004FA0 1038 FE0F                  		move.b	(v_vbla_byte).w,d0
00004FA4 0200 000F                  		andi.b	#$F,d0
00004FA8 6600                       		bne.s	CSI_Display2
00004FAA 0868 0000 001A             		bchg	#0,obFrame(a0)
00004FB0                            
00004FB0                            	CSI_Display2:
00004FB0 4EF9 0000 0000             		jmp	(DisplaySprite).l
00004FB6                            ; ===========================================================================
00004FB6                            
00004FB6                            CSI_Delete:
00004FB6 4EF9 0000 0000             		jmp	(DeleteObject).l
00004FB6 4EF9 0000 0000             		jmp	(DeleteObject).l
00004FBC                            		include	"_incObj\81 Continue Screen Sonic.asm"
00004FBC                            ; ---------------------------------------------------------------------------
00004FBC                            ; Object 81 - Sonic on the continue screen
00004FBC                            ; ---------------------------------------------------------------------------
00004FBC                            
00004FBC                            ContSonic:
00004FBC 7000                       		moveq	#0,d0
00004FBE 1028 0024                  		move.b	obRoutine(a0),d0
00004FC2 323B 0000                  		move.w	CSon_Index(pc,d0.w),d1
00004FC6 4EBB 1000                  		jsr	CSon_Index(pc,d1.w)
00004FCA 4EF9 0000 0000             		jmp	(DisplaySprite).l
00004FD0                            ; ===========================================================================
00004FD0 0000                       CSon_Index:	dc.w CSon_Main-CSon_Index
00004FD2 0000                       		dc.w CSon_ChkLand-CSon_Index
00004FD4 0000                       		dc.w CSon_Animate-CSon_Index
00004FD6 0000                       		dc.w CSon_Run-CSon_Index
00004FD8                            ; ===========================================================================
00004FD8                            
00004FD8                            CSon_Main:	; Routine 0
00004FD8 5428 0024                  		addq.b	#2,obRoutine(a0)
00004FDC 317C 00A0 0008             		move.w	#$A0,obX(a0)
00004FE2 317C 00C0 000C             		move.w	#$C0,obY(a0)
00004FE8 217C 0000 0000 0004        		move.l	#Map_Sonic,obMap(a0)
00004FF0 317C 0780 0002             		move.w	#$780,obGfx(a0)
00004FF6 117C 0004 0001             		move.b	#4,obRender(a0)
00004FFC 117C 0002 0018             		move.b	#2,obPriority(a0)
00005002 117C 0000 001C             		move.b	#id_Float3,obAnim(a0) ; use "floating" animation
00005008 317C 0400 0012             		move.w	#$400,obVelY(a0) ; make Sonic fall from above
0000500E                            
0000500E                            CSon_ChkLand:	; Routine 2
0000500E 0C68 01A0 000C             		cmpi.w	#$1A0,obY(a0)	; has Sonic landed yet?
00005014 6600                       		bne.s	CSon_ShowFall	; if not, branch
00005016                            
00005016 5428 0024                  		addq.b	#2,obRoutine(a0)
0000501A 4268 0012                  		clr.w	obVelY(a0)	; stop Sonic falling
0000501E 217C 0000 0000 0004        		move.l	#Map_ContScr,obMap(a0)
00005026 317C 8500 0002             		move.w	#$8500,obGfx(a0)
0000502C 117C 0000 001C             		move.b	#id_Walk,obAnim(a0)
00005032 6000                       		bra.s	CSon_Animate
00005034                            
00005034                            CSon_ShowFall:
00005034 4EB9 0000 0000             		jsr	(SpeedToPos).l
0000503A 4EB9 0000 0000             		jsr	(Sonic_Animate).l
00005040 4EF9 0000 0000             		jmp	(Sonic_LoadGfx).l
00005046                            ; ===========================================================================
00005046                            
00005046                            CSon_Animate:	; Routine 4
00005046 4A38 F605                  		tst.b	(v_jpadpress1).w ; is Start button pressed?
0000504A 6B00                       		bmi.s	CSon_GetUp	; if yes, branch
0000504C 43F9 0000 0000             		lea	(AniScript_CSon).l,a1
00005052 4EF9 0000 0000             		jmp	(AnimateSprite).l
00005058                            
00005058                            CSon_GetUp:
00005058 5428 0024                  		addq.b	#2,obRoutine(a0)
0000505C 217C 0000 0000 0004        		move.l	#Map_Sonic,obMap(a0)
00005064 317C 0780 0002             		move.w	#$780,obGfx(a0)
0000506A 117C 0000 001C             		move.b	#id_Float4,obAnim(a0) ; use "getting up" animation
00005070 4268 0014                  		clr.w	obInertia(a0)
00005074 5168 000C                  		subq.w	#8,obY(a0)
00005080                            
00005080                            CSon_Run:	; Routine 6
00005080 0C68 0800 0014             		cmpi.w	#$800,obInertia(a0) ; check Sonic's inertia
00005086 6600                       		bne.s	CSon_AddInertia	; if too low, branch
00005088 317C 1000 0010             		move.w	#$1000,obVelX(a0) ; move Sonic to the right
0000508E 6000                       		bra.s	CSon_ShowRun
00005090                            
00005090                            CSon_AddInertia:
00005090 0668 0020 0014             		addi.w	#$20,obInertia(a0) ; increase inertia
00005096                            
00005096                            CSon_ShowRun:
00005096 4EB9 0000 0000             		jsr	(SpeedToPos).l
0000509C 4EB9 0000 0000             		jsr	(Sonic_Animate).l
000050A2 4EF9 0000 0000             		jmp	(Sonic_LoadGfx).l
000050A2 4EF9 0000 0000             		jmp	(Sonic_LoadGfx).l
000050A8                            		include	"_anim\Continue Screen Sonic.asm"
000050A8                            ; ---------------------------------------------------------------------------
000050A8                            ; Animation script - Sonic on the continue screen
000050A8                            ; ---------------------------------------------------------------------------
000050A8 0000                       AniScript_CSon:	dc.w A_CSon_1-AniScript_CSon
000050AA 0401 0101 0102 0202 0303+  A_CSon_1:	dc.b 4,	1, 1, 1, 1, 2, 2, 2, 3,	3, afEnd
000050B6 00                         		even
000050B6 00                         		even
000050B6                            Map_ContScr:	include	"_maps\Continue Screen.asm"
000050B6                            ; ---------------------------------------------------------------------------
000050B6                            ; Sprite mappings - Continue screen
000050B6                            ; ---------------------------------------------------------------------------
000050B6                            Map_ContScr_internal:
000050B6 0000                       		dc.w M_Cont_text-Map_ContScr_internal
000050B8 0000                       		dc.w M_Cont_Sonic1-Map_ContScr_internal
000050BA 0000                       		dc.w M_Cont_Sonic2-Map_ContScr_internal
000050BC 0000                       		dc.w M_Cont_Sonic3-Map_ContScr_internal
000050BE 0000                       		dc.w M_Cont_oval-Map_ContScr_internal
000050C0 0000                       		dc.w M_Cont_Mini1-Map_ContScr_internal
000050C2 0000                       		dc.w M_Cont_Mini1-Map_ContScr_internal
000050C4 0000                       		dc.w M_Cont_Mini2-Map_ContScr_internal
000050C6 0B                         M_Cont_text:	dc.b $B
000050C7 F805 0088 C4               		dc.b $F8, 5, 0,	$88, $C4 ; "CONTINUE", stars and countdown
000050CC F805 00B2 D4               		dc.b $F8, 5, 0,	$B2, $D4
000050D1 F805 00AE E4               		dc.b $F8, 5, 0,	$AE, $E4
000050D6 F805 00C2 F4               		dc.b $F8, 5, 0,	$C2, $F4
000050DB F801 00A0 04               		dc.b $F8, 1, 0,	$A0, 4
000050E0 F805 00AE 0C               		dc.b $F8, 5, 0,	$AE, $C
000050E5 F805 00C6 1C               		dc.b $F8, 5, 0,	$C6, $1C
000050EA F805 0090 2C               		dc.b $F8, 5, 0,	$90, $2C
000050EF 3805 2021 E8               		dc.b $38, 5, $20, $21, $E8
000050F4 3805 2021 08               		dc.b $38, 5, $20, $21, 8
000050F9 3605 01FC F8               		dc.b $36, 5, 1,	$FC, $F8
000050FE 03                         M_Cont_Sonic1:	dc.b 3
000050FF 0405 0015 FC               		dc.b 4,	5, 0, $15, $FC	; Sonic	on floor
00005104 F40A 0006 EC               		dc.b $F4, $A, 0, 6, $EC
00005109 F406 000F 04               		dc.b $F4, 6, 0,	$F, 4
0000510E 03                         M_Cont_Sonic2:	dc.b 3
0000510F 0405 0019 FC               		dc.b 4,	5, 0, $19, $FC	; Sonic	on floor #2
00005114 F40A 0006 EC               		dc.b $F4, $A, 0, 6, $EC
00005119 F406 000F 04               		dc.b $F4, 6, 0,	$F, 4
0000511E 03                         M_Cont_Sonic3:	dc.b 3
0000511F 0405 001D FC               		dc.b 4,	5, 0, $1D, $FC	; Sonic	on floor #3
00005124 F40A 0006 EC               		dc.b $F4, $A, 0, 6, $EC
00005129 F406 000F 04               		dc.b $F4, 6, 0,	$F, 4
0000512E 02                         M_Cont_oval:	dc.b 2
0000512F 6009 2000 E8               		dc.b $60, 9, $20, 0, $E8 ; circle on the floor
00005134 6009 2800 00               		dc.b $60, 9, $28, 0, 0
00005139 01                         M_Cont_Mini1:	dc.b 1
0000513A 0006 0012 00               		dc.b 0,	6, 0, $12, 0	; mini Sonic
0000513F 01                         M_Cont_Mini2:	dc.b 1
00005140 0006 0018 00               		dc.b 0,	6, 0, $18, 0	; mini Sonic #2
00005146 00                         		even
00005146 00                         		even
00005146                            
00005146                            ; ===========================================================================
00005146                            ; ---------------------------------------------------------------------------
00005146                            ; Ending sequence in Green Hill	Zone
00005146                            ; ---------------------------------------------------------------------------
00005146                            
00005146                            GM_Ending:
0000514E 6100 CAF6                  		bsr.w	PaletteFadeOut
00005152                            
00005152 43F8 D000                  		lea	(v_objspace).w,a1
00005156 7000                       		moveq	#0,d0
00005158 323C 07FF                  		move.w	#$7FF,d1
0000515C                            	End_ClrObjRam:
0000515C 22C0                       		move.l	d0,(a1)+
0000515E 51C9 FFFC                  		dbf	d1,End_ClrObjRam ; clear object	RAM
00005162                            
00005162 43F8 F628                  		lea	($FFFFF628).w,a1
00005166 7000                       		moveq	#0,d0
00005168 323C 0015                  		move.w	#$15,d1
0000516C                            	End_ClrRam1:
0000516C 22C0                       		move.l	d0,(a1)+
0000516E 51C9 FFFC                  		dbf	d1,End_ClrRam1	; clear	variables
00005172                            
00005172 43F8 F700                  		lea	(v_screenposx).w,a1
00005176 7000                       		moveq	#0,d0
00005178 323C 003F                  		move.w	#$3F,d1
0000517C                            	End_ClrRam2:
0000517C 22C0                       		move.l	d0,(a1)+
0000517E 51C9 FFFC                  		dbf	d1,End_ClrRam2	; clear	variables
00005182                            
00005182 43F8 FE60                  		lea	(v_oscillate+2).w,a1
00005186 7000                       		moveq	#0,d0
00005188 323C 0047                  		move.w	#$47,d1
0000518C                            	End_ClrRam3:
0000518C 22C0                       		move.l	d0,(a1)+
0000518E 51C9 FFFC                  		dbf	d1,End_ClrRam3	; clear	variables
00005192                            
00005192 46FC 2700                  		disable_ints
00005196 3038 F60C                  		move.w	(v_vdp_buffer1).w,d0
0000519A 0200 00BF                  		andi.b	#$BF,d0
0000519E 33C0 00C0 0004             		move.w	d0,(vdp_control_port).l
000051A4 6100 BF0C                  		bsr.w	ClearScreen
000051A8 4DF9 00C0 0004             		lea	(vdp_control_port).l,a6
000051AE 3CBC 8B03                  		move.w	#$8B03,(a6)	; line scroll mode
000051B2 3CBC 8230                  		move.w	#$8200+(vram_fg>>10),(a6) ; set foreground nametable address
000051B6 3CBC 8407                  		move.w	#$8400+(vram_bg>>13),(a6) ; set background nametable address
000051BA 3CBC 857C                  		move.w	#$8500+(vram_sprites>>9),(a6) ; set sprite table address
000051BE 3CBC 9001                  		move.w	#$9001,(a6)		; 64-cell hscroll size
000051C2 3CBC 8004                  		move.w	#$8004,(a6)		; 8-colour mode
000051C6 3CBC 8720                  		move.w	#$8720,(a6)		; set background colour (line 3; colour 0)
000051CA 31FC 8ADF F624             		move.w	#$8A00+223,(v_hbla_hreg).w ; set palette change position (for water)
000051D0 3CB8 F624                  		move.w	(v_hbla_hreg).w,(a6)
000051D4 31FC 001E FE14             		move.w	#30,(v_air).w
000051DA 31FC 0600 FE10             		move.w	#id_EndZ<<8,(v_zone).w ; set level number to 0600 (extra flowers)
000051E0 0C38 0006 FE57             		cmpi.b	#6,(v_emeralds).w ; do you have all 6 emeralds?
000051E6 6700                       		beq.s	End_LoadData	; if yes, branch
000051E8 31FC 0601 FE10             		move.w	#(id_EndZ<<8)+1,(v_zone).w ; set level number to 0601 (no flowers)
000051EE                            
000051EE                            End_LoadData:
000051EE 7000                       		moveq	#plcid_Ending,d0
000051F0 6100 C2E8                  		bsr.w	QuickPLC	; load ending sequence patterns
000051F4 4EB9 0000 0000             		jsr	(Hud_Base).l
000051FA 6100 0000                  		bsr.w	LevelSizeLoad
000051FE 6100 0000                  		bsr.w	DeformLayers
00005202 08F8 0002 F754             		bset	#2,(v_fg_scroll_flags).w
00005208 6100 0000                  		bsr.w	LevelDataLoad
0000520C 6100 0000                  		bsr.w	LoadTilesFromStart
00005210 21FC 0000 0000 F796        		move.l	#Col_GHZ,(v_collindex).w ; load collision index
00005218 46FC 2300                  		enable_ints
0000521C 41F9 0000 0000             		lea	(Kos_EndFlowers).l,a0 ;	load extra flower patterns
00005222 43F8 9400                  		lea	($FFFF9400).w,a1 ; RAM address to buffer the patterns
00005226 6100 C462                  		bsr.w	KosDec
0000522A 7003                       		moveq	#palid_Sonic,d0
0000522C 6100 CC10                  		bsr.w	PalLoad1	; load Sonic's palette
00005238 0838 0006 F604             		btst	#bitA,(v_jpadhold1).w ; is button A pressed?
0000523E 6700                       		beq.s	End_LoadSonic	; if not, branch
00005240 11FC 0001 FFFA             		move.b	#1,(f_debugmode).w ; enable debug mode
00005246                            
00005246                            End_LoadSonic:
00005246 11FC 0000 D000             		move.b	#id_SonicPlayer,(v_player).w ; load Sonic object
0000524C 08F8 0000 D022             		bset	#0,(v_player+obStatus).w ; make Sonic face left
00005252 11FC 0001 F7CC             		move.b	#1,(f_lockctrl).w ; lock controls
00005258 31FC 0400 F602             		move.w	#(btnL<<8),(v_jpadhold2).w ; move Sonic to the left
0000525E 31FC F800 D014             		move.w	#$F800,(v_player+obInertia).w ; set Sonic's speed
00005264 11FC 0000 D040             		move.b	#id_HUD,(v_objspace+$40).w ; load HUD object
0000526A 4EB9 0000 0000             		jsr	(ObjPosLoad).l
00005270 4EB9 0000 0000             		jsr	(ExecuteObjects).l
00005276 4EB9 0000 0000             		jsr	(BuildSprites).l
0000527C 7000                       		moveq	#0,d0
0000527E 31C0 FE20                  		move.w	d0,(v_rings).w
00005282 21C0 FE22                  		move.l	d0,(v_time).w
00005286 11C0 FE1B                  		move.b	d0,(v_lifecount).w
0000528A 11C0 FE2C                  		move.b	d0,(v_shield).w
0000528E 11C0 FE2D                  		move.b	d0,(v_invinc).w
00005292 11C0 FE2E                  		move.b	d0,(v_shoes).w
00005296 11C0 FE2F                  		move.b	d0,($FFFFFE2F).w
0000529A 31C0 FE08                  		move.w	d0,(v_debuguse).w
0000529E 31C0 FE02                  		move.w	d0,(f_restart).w
000052A2 31C0 FE04                  		move.w	d0,(v_framecount).w
000052A6 6100 EFB0                  		bsr.w	OscillateNumInit
000052AA 11FC 0001 FE1F             		move.b	#1,(f_scorecount).w
000052B0 11FC 0001 FE1D             		move.b	#1,(f_ringcount).w
000052B6 11FC 0000 FE1E             		move.b	#0,(f_timecount).w
000052BC 31FC 0708 F614             		move.w	#1800,(v_demolength).w
000052C2 11FC 0018 F62A             		move.b	#$18,(v_vbla_routine).w
000052C8 6100 D4F0                  		bsr.w	WaitForVBla
000052CC 3038 F60C                  		move.w	(v_vdp_buffer1).w,d0
000052D0 0000 0040                  		ori.b	#$40,d0
000052D4 33C0 00C0 0004             		move.w	d0,(vdp_control_port).l
000052DA 31FC 003F F626             		move.w	#$3F,(v_pfade_start).w
000052E0 6100 C8BE                  		bsr.w	PaletteFadeIn
000052E4                            
000052E4                            ; ---------------------------------------------------------------------------
000052E4                            ; Main ending sequence loop
000052E4                            ; ---------------------------------------------------------------------------
000052E4                            
000052E4                            End_MainLoop:
000052E4 6100 BEB0                  		bsr.w	PauseGame
000052E8 11FC 0018 F62A             		move.b	#$18,(v_vbla_routine).w
000052EE 6100 D4CA                  		bsr.w	WaitForVBla
000052F2 5278 FE04                  		addq.w	#1,(v_framecount).w
000052F6 6100 0000                  		bsr.w	End_MoveSonic
000052FA 4EB9 0000 0000             		jsr	(ExecuteObjects).l
00005300 6100 0000                  		bsr.w	DeformLayers
00005304 4EB9 0000 0000             		jsr	(BuildSprites).l
0000530A 4EB9 0000 0000             		jsr	(ObjPosLoad).l
00005310 6100 C418                  		bsr.w	PaletteCycle
00005314 6100 EF98                  		bsr.w	OscillateNumDo
00005318 6100 F02C                  		bsr.w	SynchroAnimate
0000531C 0C38 0000 F600             		cmpi.b	#id_Ending,(v_gamemode).w ; is game mode $18 (ending)?
00005322 6700                       		beq.s	End_ChkEmerald	; if yes, branch
00005324                            
00005324 11FC 0000 F600             		move.b	#id_Credits,(v_gamemode).w ; goto credits
00005332 31FC 0000 FFF4             		move.w	#0,(v_creditsnum).w ; set credits index number to 0
00005338 4E75                       		rts	
0000533A                            ; ===========================================================================
0000533A                            
0000533A                            End_ChkEmerald:
0000533A 4A78 FE02                  		tst.w	(f_restart).w	; has Sonic released the emeralds?
0000533E 6700 FFA4                  		beq.w	End_MainLoop	; if not, branch
00005342                            
00005342 4278 FE02                  		clr.w	(f_restart).w
00005346 31FC 003F F626             		move.w	#$3F,(v_pfade_start).w
0000534C 4278 F794                  		clr.w	(v_palchgspeed).w
00005350                            
00005350                            	End_AllEmlds:
00005350 6100 BE44                  		bsr.w	PauseGame
00005354 11FC 0018 F62A             		move.b	#$18,(v_vbla_routine).w
0000535A 6100 D45E                  		bsr.w	WaitForVBla
0000535E 5278 FE04                  		addq.w	#1,(v_framecount).w
00005362 6100 0000                  		bsr.w	End_MoveSonic
00005366 4EB9 0000 0000             		jsr	(ExecuteObjects).l
0000536C 6100 0000                  		bsr.w	DeformLayers
00005370 4EB9 0000 0000             		jsr	(BuildSprites).l
00005376 4EB9 0000 0000             		jsr	(ObjPosLoad).l
0000537C 6100 EF30                  		bsr.w	OscillateNumDo
00005380 6100 EFC4                  		bsr.w	SynchroAnimate
00005384 5378 F794                  		subq.w	#1,(v_palchgspeed).w
00005388 6A00                       		bpl.s	End_SlowFade
0000538A 31FC 0002 F794             		move.w	#2,(v_palchgspeed).w
00005390 6100 C9FE                  		bsr.w	WhiteOut_ToWhite
00005394                            
00005394                            	End_SlowFade:
00005394 4A78 FE02                  		tst.w	(f_restart).w
00005398 6700 FFB6                  		beq.w	End_AllEmlds
0000539C 4278 FE02                  		clr.w	(f_restart).w
000053A0 31FC 2E2F A480             		move.w	#$2E2F,(v_lvllayout+$80).w ; modify level layout
000053A6 4BF9 00C0 0004             		lea	(vdp_control_port).l,a5
000053AC 4DF9 00C0 0000             		lea	(vdp_data_port).l,a6
000053B2 47F8 F700                  		lea	(v_screenposx).w,a3
000053B6 49F8 A400                  		lea	(v_lvllayout).w,a4
000053BA 343C 4000                  		move.w	#$4000,d2
000053BE 6100 0000                  		bsr.w	DrawChunks
000053C2 7014                       		moveq	#palid_Ending,d0
000053C4 6100 CA78                  		bsr.w	PalLoad1	; load ending palette
000053C8 6100 C8FA                  		bsr.w	PaletteWhiteIn
000053CC 6000 FF16                  		bra.w	End_MainLoop
000053D0                            
000053D0                            ; ---------------------------------------------------------------------------
000053D0                            ; Subroutine controlling Sonic on the ending sequence
000053D0                            ; ---------------------------------------------------------------------------
000053D0                            
000053D0                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000053D0                            
000053D0                            
000053D0                            End_MoveSonic:
000053D0 1038 F7D7                  		move.b	(v_sonicend).w,d0
000053D4 6600                       		bne.s	End_MoveSon2
000053D6 0C78 0090 D008             		cmpi.w	#$90,(v_player+obX).w ; has Sonic passed $90 on x-axis?
000053DC 6400                       		bhs.s	End_MoveSonExit	; if not, branch
000053DE                            
000053DE 5438 F7D7                  		addq.b	#2,(v_sonicend).w
000053E2 11FC 0001 F7CC             		move.b	#1,(f_lockctrl).w ; lock player's controls
000053E8 31FC 0800 F602             		move.w	#(btnR<<8),(v_jpadhold2).w ; move Sonic to the right
000053EE 4E75                       		rts	
000053F0                            ; ===========================================================================
000053F0                            
000053F0                            End_MoveSon2:
000053F0 5500                       		subq.b	#2,d0
000053F2 6600                       		bne.s	End_MoveSon3
000053F4 0C78 00A0 D008             		cmpi.w	#$A0,(v_player+obX).w ; has Sonic passed $A0 on x-axis?
000053FA 6500                       		blo.s	End_MoveSonExit	; if not, branch
000053FC                            
000053FC 5438 F7D7                  		addq.b	#2,(v_sonicend).w
00005400 7000                       		moveq	#0,d0
00005402 11C0 F7CC                  		move.b	d0,(f_lockctrl).w
00005406 31C0 F602                  		move.w	d0,(v_jpadhold2).w ; stop Sonic moving
0000540A 31C0 D014                  		move.w	d0,(v_player+obInertia).w
0000540E 11FC 0081 F7C8             		move.b	#$81,(f_lockmulti).w ; lock controls & position
00005414 11FC 0003 D01A             		move.b	#3,(v_player+obFrame).w
0000541A 31FC 0000 D01C             		move.w	#(id_Wait<<8)+id_Wait,(v_player+obAnim).w ; use "standing" animation
00005420 11FC 0003 D01E             		move.b	#3,(v_player+obTimeFrame).w
00005426 4E75                       		rts	
00005428                            ; ===========================================================================
00005428                            
00005428                            End_MoveSon3:
00005428 5500                       		subq.b	#2,d0
0000542A 6600                       		bne.s	End_MoveSonExit
0000542C 5438 F7D7                  		addq.b	#2,(v_sonicend).w
00005430 31FC 00A0 D008             		move.w	#$A0,(v_player+obX).w
00005436 11FC 0000 D000             		move.b	#id_EndSonic,(v_player).w ; load Sonic ending sequence object
0000543C 4278 D024                  		clr.w	(v_player+obRoutine).w
00005440                            
00005440                            End_MoveSonExit:
00005440 4E75                       		rts	
00005442                            ; End of function End_MoveSonic
00005442                            
00005442                            ; ===========================================================================
00005442                            
00005442                            		include	"_incObj\87 Ending Sequence Sonic.asm"
00005442                            ; ---------------------------------------------------------------------------
00005442                            ; Object 87 - Sonic on ending sequence
00005442                            ; ---------------------------------------------------------------------------
00005442                            
00005442                            EndSonic:
00005442 7000                       		moveq	#0,d0
00005444 1028 0025                  		move.b	ob2ndRout(a0),d0
00005448 323B 0000                  		move.w	ESon_Index(pc,d0.w),d1
0000544C 4EBB 1000                  		jsr	ESon_Index(pc,d1.w)
00005450 4EF9 0000 0000             		jmp	(DisplaySprite).l
00005456                            ; ===========================================================================
00005456 0000 0000                  ESon_Index:	dc.w ESon_Main-ESon_Index, ESon_MakeEmeralds-ESon_Index
0000545A 0000 0000                  		dc.w Obj87_Animate-ESon_Index,	Obj87_LookUp-ESon_Index
0000545E 0000 0000                  		dc.w Obj87_ClrObjRam-ESon_Index, Obj87_Animate-ESon_Index
00005462 0000 0000                  		dc.w Obj87_MakeLogo-ESon_Index, Obj87_Animate-ESon_Index
00005466 0000 0000                  		dc.w Obj87_Leap-ESon_Index, Obj87_Animate-ESon_Index
0000546A                            
0000546A =00000030                  eson_time:	equ $30	; time to wait between events
0000546A                            ; ===========================================================================
0000546A                            
0000546A                            ESon_Main:	; Routine 0
0000546A 0C38 0006 FE57             		cmpi.b	#6,(v_emeralds).w ; do you have all 6 emeralds?
00005470 6700                       		beq.s	ESon_Main2	; if yes, branch
00005472 0628 0010 0025             		addi.b	#$10,ob2ndRout(a0) ; else, skip emerald sequence
00005478 317C 00D8 0030             		move.w	#216,eson_time(a0)
0000547E 4E75                       		rts	
00005480                            ; ===========================================================================
00005480                            
00005480                            ESon_Main2:
00005480 5428 0025                  		addq.b	#2,ob2ndRout(a0)
00005484 217C 0000 0000 0004        		move.l	#Map_ESon,obMap(a0)
0000548C 317C 03E1 0002             		move.w	#$3E1,obGfx(a0)
00005492 117C 0004 0001             		move.b	#4,obRender(a0)
00005498 4228 0022                  		clr.b	obStatus(a0)
0000549C 117C 0002 0018             		move.b	#2,obPriority(a0)
000054A2 117C 0000 001A             		move.b	#0,obFrame(a0)
000054A8 317C 0050 0030             		move.w	#80,eson_time(a0) ; set duration for Sonic to pause
000054AE                            
000054AE                            ESon_MakeEmeralds:
000054AE                            		; Routine 2
000054AE 5368 0030                  		subq.w	#1,eson_time(a0) ; subtract 1 from duration
000054B2 6600                       		bne.s	ESon_Wait
000054B4 5428 0025                  		addq.b	#2,ob2ndRout(a0)
000054B8 317C 0001 001C             		move.w	#1,obAnim(a0)
000054BE 11FC 0000 D400             		move.b	#id_EndChaos,(v_objspace+$400).w ; load chaos emeralds objects
000054C4                            
000054C4                            	ESon_Wait:
000054C4 4E75                       		rts	
000054C6                            ; ===========================================================================
000054C6                            
000054C6                            Obj87_LookUp:	; Routine 6
000054C6 0C79 2000 00FF D43C        		cmpi.w	#$2000,((v_objspace&$FFFFFF)+$400+$3C).l
000054CE 6600                       		bne.s	locret_5480
000054D0 31FC 0001 FE02             		move.w	#1,(f_restart).w ; set level to	restart	(causes	flash)
000054D6 317C 005A 0030             		move.w	#90,eson_time(a0)
000054DC 5428 0025                  		addq.b	#2,ob2ndRout(a0)
000054E0                            
000054E0                            locret_5480:
000054E0 4E75                       		rts	
000054E2                            ; ===========================================================================
000054E2                            
000054E2                            Obj87_ClrObjRam:
000054E2                            		; Routine 8
000054E2 5368 0030                  		subq.w	#1,eson_time(a0)
000054E6 6600                       		bne.s	ESon_Wait2
000054E8 43F8 D400                  		lea	(v_objspace+$400).w,a1
000054EC 323C 00FF                  		move.w	#$FF,d1
000054F0                            
000054F0                            Obj87_ClrLoop:
000054F0 4299                       		clr.l	(a1)+
000054F2 51C9 FFFC                  		dbf	d1,Obj87_ClrLoop ; clear the object RAM
000054F6 31FC 0001 FE02             		move.w	#1,(f_restart).w
000054FC 5428 0025                  		addq.b	#2,ob2ndRout(a0)
00005500 117C 0001 001C             		move.b	#1,obAnim(a0)
00005506 317C 003C 0030             		move.w	#60,eson_time(a0)
0000550C                            
0000550C                            ESon_Wait2:
0000550C 4E75                       		rts	
0000550E                            ; ===========================================================================
0000550E                            
0000550E                            Obj87_MakeLogo:	; Routine $C
0000550E 5368 0030                  		subq.w	#1,eson_time(a0)
00005512 6600                       		bne.s	ESon_Wait3
00005514 5428 0025                  		addq.b	#2,ob2ndRout(a0)
00005518 317C 00B4 0030             		move.w	#180,eson_time(a0)
0000551E 117C 0002 001C             		move.b	#2,obAnim(a0)
00005524 11FC 0000 D400             		move.b	#id_EndSTH,(v_objspace+$400).w ; load "SONIC THE HEDGEHOG" object
0000552A                            
0000552A                            ESon_Wait3:
0000552A 4E75                       		rts	
0000552C                            ; ===========================================================================
0000552C                            
0000552C                            Obj87_Animate:	; Rountine 4, $A, $E, $12
0000552C 43F9 0000 0000             		lea	(AniScript_ESon).l,a1
00005532 4EF9 0000 0000             		jmp	(AnimateSprite).l
00005538                            ; ===========================================================================
00005538                            
00005538                            Obj87_Leap:	; Routine $10
00005538 5368 0030                  		subq.w	#1,eson_time(a0)
0000553C 6600                       		bne.s	ESon_Wait4
0000553E 5428 0025                  		addq.b	#2,ob2ndRout(a0)
00005542 217C 0000 0000 0004        		move.l	#Map_ESon,obMap(a0)
0000554A 317C 03E1 0002             		move.w	#$3E1,obGfx(a0)
00005550 117C 0004 0001             		move.b	#4,obRender(a0)
00005556 4228 0022                  		clr.b	obStatus(a0)
0000555A 117C 0002 0018             		move.b	#2,obPriority(a0)
00005560 117C 0005 001A             		move.b	#5,obFrame(a0)
00005566 117C 0002 001C             		move.b	#2,obAnim(a0)	; use "leaping"	animation
0000556C 11FC 0000 D400             		move.b	#id_EndSTH,(v_objspace+$400).w ; load "SONIC THE HEDGEHOG" object
00005572 60B8                       		bra.s	Obj87_Animate
00005574                            ; ===========================================================================
00005574                            
00005574                            ESon_Wait4:
00005574 4E75                       		rts	
00005574 4E75                       		rts	
00005576                            		include "_anim\Ending Sequence Sonic.asm"
00005576                            ; ---------------------------------------------------------------------------
00005576                            ; Animation script - Sonic on the ending sequence
00005576                            ; ---------------------------------------------------------------------------
00005576 0000                       AniScript_ESon:	dc.w byte_551C-AniScript_ESon
00005578 0000                       		dc.w byte_552A-AniScript_ESon
0000557A 0000                       		dc.w byte_5534-AniScript_ESon
0000557C 0301 0001 0001 0001 0001+  byte_551C:	dc.b 3,	1, 0, 1, 0, 1, 0, 1, 0,	1, 0, 1, 2, $FA
0000558A 0503 0403 0403 0403 FA00   byte_552A:	dc.b 5,	3, 4, 3, 4, 3, 4, 3, $FA, 0
00005594 0305 0505 0607 FE01        byte_5534:	dc.b 3,	5, 5, 5, 6, 7, $FE, 1
0000559C                            		even
0000559C                            		even
0000559C                            		include	"_incObj\88 Ending Sequence Emeralds.asm"
0000559C                            ; ---------------------------------------------------------------------------
0000559C                            ; Object 88 - chaos emeralds on	the ending sequence
0000559C                            ; ---------------------------------------------------------------------------
0000559C                            
0000559C                            EndChaos:
0000559C 7000                       		moveq	#0,d0
0000559E 1028 0024                  		move.b	obRoutine(a0),d0
000055A2 323B 0000                  		move.w	ECha_Index(pc,d0.w),d1
000055A6 4EBB 1000                  		jsr	ECha_Index(pc,d1.w)
000055AA 4EF9 0000 0000             		jmp	(DisplaySprite).l
000055B0                            ; ===========================================================================
000055B0 0000                       ECha_Index:	dc.w ECha_Main-ECha_Index
000055B2 0000                       		dc.w ECha_Move-ECha_Index
000055B4                            
000055B4 =00000038                  echa_origX:	equ $38	; x-axis centre of emerald circle (2 bytes)
000055B4 =0000003A                  echa_origY:	equ $3A	; y-axis centre of emerald circle (2 bytes)
000055B4 =0000003C                  echa_radius:	equ $3C	; radius (2 bytes)
000055B4 =0000003E                  echa_angle:	equ $3E	; angle for rotation (2 bytes)
000055B4                            ; ===========================================================================
000055B4                            
000055B4                            ECha_Main:	; Routine 0
000055B4 0C38 0002 D01A             		cmpi.b	#2,(v_player+obFrame).w
000055BA 6700                       		beq.s	ECha_CreateEms
000055BC 588F                       		addq.l	#4,sp
000055BE 4E75                       		rts	
000055C0                            ; ===========================================================================
000055C0                            
000055C0                            ECha_CreateEms:
000055C0 3178 D008 0008             		move.w	(v_player+obX).w,obX(a0) ; match X position with Sonic
000055C6 3178 D00C 000C             		move.w	(v_player+obY).w,obY(a0) ; match Y position with Sonic
000055CC 2248                       		movea.l	a0,a1
000055CE 7600                       		moveq	#0,d3
000055D0 7401                       		moveq	#1,d2
000055D2 7205                       		moveq	#5,d1
000055D4                            
000055D4                            	ECha_LoadLoop:
000055D4 12BC 0000                  		move.b	#id_EndChaos,(a1) ; load chaos emerald object
000055D8 5429 0024                  		addq.b	#2,obRoutine(a1)
000055DC 237C 0000 0000 0004        		move.l	#Map_ECha,obMap(a1)
000055E4 337C 03C5 0002             		move.w	#$3C5,obGfx(a1)
000055EA 137C 0004 0001             		move.b	#4,obRender(a1)
000055F0 137C 0001 0018             		move.b	#1,obPriority(a1)
000055F6 3368 0008 0038             		move.w	obX(a0),echa_origX(a1)
000055FC 3368 000C 003A             		move.w	obY(a0),echa_origY(a1)
00005602 1342 001C                  		move.b	d2,obAnim(a1)
00005606 1342 001A                  		move.b	d2,obFrame(a1)
0000560A 5202                       		addq.b	#1,d2
0000560C 1343 0026                  		move.b	d3,obAngle(a1)
00005610 0603 002A                  		addi.b	#$100/6,d3	; angle between each emerald
00005614 43E9 0040                  		lea	$40(a1),a1
00005618 51C9 FFBA                  		dbf	d1,ECha_LoadLoop ; repeat 5 more times
0000561C                            
0000561C                            ECha_Move:	; Routine 2
0000561C 3028 003E                  		move.w	echa_angle(a0),d0
00005620 D168 0026                  		add.w	d0,obAngle(a0)
00005624 1028 0026                  		move.b	obAngle(a0),d0
00005628 4EB9 0000 27EC             		jsr	(CalcSine).l
0000562E 7800                       		moveq	#0,d4
00005630 1828 003C                  		move.b	echa_radius(a0),d4
00005634 C3C4                       		muls.w	d4,d1
00005636 E081                       		asr.l	#8,d1
00005638 C1C4                       		muls.w	d4,d0
0000563A E080                       		asr.l	#8,d0
0000563C D268 0038                  		add.w	echa_origX(a0),d1
00005640 D068 003A                  		add.w	echa_origY(a0),d0
00005644 3141 0008                  		move.w	d1,obX(a0)
00005648 3140 000C                  		move.w	d0,obY(a0)
0000564C                            
0000564C                            	ECha_Expand:
0000564C 0C68 2000 003C             		cmpi.w	#$2000,echa_radius(a0)
00005652 6700                       		beq.s	ECha_Rotate
00005654 0668 0020 003C             		addi.w	#$20,echa_radius(a0) ; expand circle of emeralds
0000565A                            
0000565A                            	ECha_Rotate:
0000565A 0C68 2000 003E             		cmpi.w	#$2000,echa_angle(a0)
00005660 6700                       		beq.s	ECha_Rise
00005662 0668 0020 003E             		addi.w	#$20,echa_angle(a0) ; move emeralds around the centre
00005668                            
00005668                            	ECha_Rise:
00005668 0C68 0140 003A             		cmpi.w	#$140,echa_origY(a0)
0000566E 6700                       		beq.s	ECha_End
00005670 5368 003A                  		subq.w	#1,echa_origY(a0) ; make circle rise
00005674                            
00005674                            ECha_End:
00005674 4E75                       		rts	
00005674 4E75                       		rts	
00005676                            		include	"_incObj\89 Ending Sequence STH.asm"
00005676                            ; ---------------------------------------------------------------------------
00005676                            ; Object 89 - "SONIC THE HEDGEHOG" text	on the ending sequence
00005676                            ; ---------------------------------------------------------------------------
00005676                            
00005676                            EndSTH:
00005676 7000                       		moveq	#0,d0
00005678 1028 0024                  		move.b	$24(a0),d0
0000567C 323B 0000                  		move.w	ESth_Index(pc,d0.w),d1
00005680 4EFB 1000                  		jmp	ESth_Index(pc,d1.w)
00005684                            ; ===========================================================================
00005684 0000                       ESth_Index:	dc.w ESth_Main-ESth_Index
00005686 0000                       		dc.w ESth_Move-ESth_Index
00005688 0000                       		dc.w ESth_GotoCredits-ESth_Index
0000568A                            
0000568A =00000030                  esth_time:	equ $30		; time until exit
0000568A                            ; ===========================================================================
0000568A                            
0000568A                            ESth_Main:	; Routine 0
0000568A 5428 0024                  		addq.b	#2,obRoutine(a0)
0000568E 317C FFE0 0008             		move.w	#-$20,obX(a0)	; object starts	outside	the level boundary
00005694 317C 00D8 000A             		move.w	#$D8,obScreenY(a0)
0000569A 217C 0000 0000 0004        		move.l	#Map_ESTH,obMap(a0)
000056A2 317C 05C5 0002             		move.w	#$5C5,obGfx(a0)
000056A8 117C 0000 0001             		move.b	#0,obRender(a0)
000056AE 117C 0000 0018             		move.b	#0,obPriority(a0)
000056B4                            
000056B4                            ESth_Move:	; Routine 2
000056B4 0C68 00C0 0008             		cmpi.w	#$C0,obX(a0)	; has object reached $C0?
000056BA 6700                       		beq.s	ESth_Delay	; if yes, branch
000056BC 0668 0010 0008             		addi.w	#$10,obX(a0)	; move object to the right
000056C2                            	;	bra.w	DisplaySprite ; Temp comment
000056C2                            
000056C2                            ESth_Delay:
000056C2 5428 0024                  		addq.b	#2,obRoutine(a0)
000056C6 317C 0078 0030             		move.w	#120,esth_time(a0) ; set duration for delay (2 seconds)
000056CC                            
000056CC                            ESth_GotoCredits:
000056CC                            		; Routine 4
000056CC 5368 0030                  		subq.w	#1,esth_time(a0) ; subtract 1 from duration
000056D0 6A00                       		bpl.s	ESth_Wait
000056D2 11FC 0000 F600             		move.b	#id_Credits,(v_gamemode).w ; exit to credits
000056D8                            
000056D8                            	ESth_Wait:
000056D8                            	;	bra.w	DisplaySprite ; Temp comment
000056D8                            Map_ESon:	include	"_maps\Ending Sequence Sonic.asm"
000056D8                            ; ---------------------------------------------------------------------------
000056D8                            ; Sprite mappings - Sonic on the ending	sequence
000056D8                            ; ---------------------------------------------------------------------------
000056D8                            Map_ESon_internal:
000056D8 0000                       		dc.w M_ESon_Hold1-Map_ESon_internal
000056DA 0000                       		dc.w M_ESon_Hold2-Map_ESon_internal
000056DC 0000                       		dc.w M_ESon_Up-Map_ESon_internal
000056DE 0000                       		dc.w M_ESon_Conf1-Map_ESon_internal
000056E0 0000                       		dc.w M_ESon_Conf2-Map_ESon_internal
000056E2 0000                       		dc.w M_ESon_Leap1-Map_ESon_internal
000056E4 0000                       		dc.w M_ESon_Leap2-Map_ESon_internal
000056E6 0000                       		dc.w M_ESon_Leap3-Map_ESon_internal
000056E8 02                         M_ESon_Hold1:	dc.b 2
000056E9 EC0B 0000 F8               		dc.b $EC, $B, 0, 0, $F8	; holding emeralds
000056EE 0C0C 000C F0               		dc.b $C, $C, 0,	$C, $F0
000056F3 03                         M_ESon_Hold2:	dc.b 3
000056F4 FC0D 0010 F0               		dc.b $FC, $D, 0, $10, $F0 ; holding emeralds (glowing)
000056F9 EC0B 0000 F8               		dc.b $EC, $B, 0, 0, $F8
000056FE 0C0C 000C F0               		dc.b $C, $C, 0,	$C, $F0
00005703 02                         M_ESon_Up:	dc.b 2
00005704 EC09 0018 F8               		dc.b $EC, 9, 0,	$18, $F8 ; looking up
00005709 FC0E 001E F0               		dc.b $FC, $E, 0, $1E, $F0
0000570E 02                         M_ESon_Conf1:	dc.b 2
0000570F EC09 002A F8               		dc.b $EC, 9, 0,	$2A, $F8 ; confused
00005714 FC0E 0030 F0               		dc.b $FC, $E, 0, $30, $F0
00005719 02                         M_ESon_Conf2:	dc.b 2
0000571A EC09 082A F0               		dc.b $EC, 9, 8,	$2A, $F0 ; confused #2
0000571F FC0E 0830 F0               		dc.b $FC, $E, 8, $30, $F0
00005724 03                         M_ESon_Leap1:	dc.b 3
00005725 EC06 003C F0               		dc.b $EC, 6, 0,	$3C, $F0 ; leaping
0000572A EC06 083C 00               		dc.b $EC, 6, 8,	$3C, 0
0000572F 040D 0042 F0               		dc.b 4,	$D, 0, $42, $F0
00005734 07                         M_ESon_Leap2:	dc.b 7
00005735 B20C 004A F8               		dc.b $B2, $C, 0, $4A, $F8 ; leaping #2
0000573A BA0F 004E F0               		dc.b $BA, $F, 0, $4E, $F0
0000573F BA05 005E 10               		dc.b $BA, 5, 0,	$5E, $10
00005744 CA02 0062 10               		dc.b $CA, 2, 0,	$62, $10
00005749 DA0C 0065 F0               		dc.b $DA, $C, 0, $65, $F0
0000574E E208 0069 F8               		dc.b $E2, 8, 0,	$69, $F8
00005753 EA05 006C F8               		dc.b $EA, 5, 0,	$6C, $F8
00005758 18                         M_ESon_Leap3:	dc.b $18
00005759 800F 0070 F8               		dc.b $80, $F, 0, $70, $F8 ; leaping #3
0000575E 900B 0080 E0               		dc.b $90, $B, 0, $80, $E0
00005763 900B 008C 18               		dc.b $90, $B, 0, $8C, $18
00005768 980B 0098 30               		dc.b $98, $B, 0, $98, $30
0000576D A00F 00A4 58               		dc.b $A0, $F, 0, $A4, $58
00005772 8800 00B4 F0               		dc.b $88, 0, 0,	$B4, $F0
00005777 8005 00B5 18               		dc.b $80, 5, 0,	$B5, $18
0000577C A00F 00B9 F8               		dc.b $A0, $F, 0, $B9, $F8
00005781 B00B 00C9 E0               		dc.b $B0, $B, 0, $C9, $E0
00005786 B80F 00D5 38               		dc.b $B8, $F, 0, $D5, $38
0000578B A805 00E5 48               		dc.b $A8, 5, 0,	$E5, $48
00005790 C002 00E9 58               		dc.b $C0, 2, 0,	$E9, $58
00005795 C00F 00EC F8               		dc.b $C0, $F, 0, $EC, $F8
0000579A B80F 00FC 18               		dc.b $B8, $F, 0, $FC, $18
0000579F B008 010C 18               		dc.b $B0, 8, 1,	$C, $18
000057A4 D80D 010F 30               		dc.b $D8, $D, 1, $F, $30
000057A9 D808 0117 18               		dc.b $D8, 8, 1,	$17, $18
000057AE D80F 011A D8               		dc.b $D8, $F, 1, $1A, $D8
000057B3 E00D 012A F8               		dc.b $E0, $D, 1, $2A, $F8
000057B8 E000 0132 28               		dc.b $E0, 0, 1,	$32, $28
000057BD D004 0133 E0               		dc.b $D0, 4, 1,	$33, $E0
000057C2 E805 0135 C8               		dc.b $E8, 5, 1,	$35, $C8
000057C7 F80C 0139 C8               		dc.b $F8, $C, 1, $39, $C8
000057CC F006 013D F8               		dc.b $F0, 6, 1,	$3D, $F8
000057D2 00                         		even
000057D2 00                         		even
000057D2                            Map_ECha:	include	"_maps\Ending Sequence Emeralds.asm"
000057D2                            ; ---------------------------------------------------------------------------
000057D2                            ; Sprite mappings - chaos emeralds on the ending sequence
000057D2                            ; ---------------------------------------------------------------------------
000057D2                            Map_ECha_internal:
000057D2 0000                       		dc.w M_ECha_1-Map_ECha_internal
000057D4 0000                       		dc.w M_ECha_2-Map_ECha_internal
000057D6 0000                       		dc.w M_ECha_3-Map_ECha_internal
000057D8 0000                       		dc.w M_ECha_4-Map_ECha_internal
000057DA 0000                       		dc.w M_ECha_5-Map_ECha_internal
000057DC 0000                       		dc.w M_ECha_6-Map_ECha_internal
000057DE 0000                       		dc.w M_ECha_7-Map_ECha_internal
000057E0 01                         M_ECha_1:	dc.b 1
000057E1 F805 0000 F8               		dc.b $F8, 5, 0,	0, $F8
000057E6 01                         M_ECha_2:	dc.b 1
000057E7 F805 0004 F8               		dc.b $F8, 5, 0,	4, $F8
000057EC 01                         M_ECha_3:	dc.b 1
000057ED F805 4010 F8               		dc.b $F8, 5, $40, $10, $F8
000057F2 01                         M_ECha_4:	dc.b 1
000057F3 F805 2018 F8               		dc.b $F8, 5, $20, $18, $F8
000057F8 01                         M_ECha_5:	dc.b 1
000057F9 F805 4014 F8               		dc.b $F8, 5, $40, $14, $F8
000057FE 01                         M_ECha_6:	dc.b 1
000057FF F805 0008 F8               		dc.b $F8, 5, 0,	8, $F8
00005804 01                         M_ECha_7:	dc.b 1
00005805 F805 000C F8               		dc.b $F8, 5, 0,	$C, $F8
0000580A                            		even
0000580A                            		even
0000580A                            Map_ESth:	include	"_maps\Ending Sequence STH.asm"
0000580A                            ; ---------------------------------------------------------------------------
0000580A                            ; Sprite mappings - "SONIC THE HEDGEHOG" text on the ending sequence
0000580A                            ; ---------------------------------------------------------------------------
0000580A                            Map_ESth_internal:
0000580A 0000                       		dc.w M_ESth_1-Map_ESth_internal
0000580C 03                         M_ESth_1:	dc.b 3
0000580D F00F 0000 D0               		dc.b $F0, $F, 0, 0, $D0
00005812 F00F 0010 F0               		dc.b $F0, $F, 0, $10, $F0
00005817 F00F 0020 10               		dc.b $F0, $F, 0, $20, $10
0000581C                            		even
0000581C                            		even
0000581C                            
0000581C                            ; ===========================================================================
0000581C                            ; ---------------------------------------------------------------------------
0000581C                            ; Credits ending sequence
0000581C                            ; ---------------------------------------------------------------------------
0000581C                            
0000581C                            GM_Credits:
0000581C 6100 BBAE                  		bsr.w	ClearPLC
00005820 6100 C424                  		bsr.w	PaletteFadeOut
00005824 4DF9 00C0 0004             		lea	(vdp_control_port).l,a6
0000582A 3CBC 8004                  		move.w	#$8004,(a6)		; 8-colour mode
0000582E 3CBC 8230                  		move.w	#$8200+(vram_fg>>10),(a6) ; set foreground nametable address
00005832 3CBC 8407                  		move.w	#$8400+(vram_bg>>13),(a6) ; set background nametable address
00005836 3CBC 9001                  		move.w	#$9001,(a6)		; 64-cell hscroll size
0000583A 3CBC 9200                  		move.w	#$9200,(a6)		; window vertical position
0000583E 3CBC 8B03                  		move.w	#$8B03,(a6)		; line scroll mode
00005842 3CBC 8720                  		move.w	#$8720,(a6)		; set background colour (line 3; colour 0)
00005846 4238 F64E                  		clr.b	(f_wtr_state).w
0000584A 6100 B866                  		bsr.w	ClearScreen
0000584E                            
0000584E 43F8 D000                  		lea	(v_objspace).w,a1
00005852 7000                       		moveq	#0,d0
00005854 323C 07FF                  		move.w	#$7FF,d1
00005858                            	Cred_ClrObjRam:
00005858 22C0                       		move.l	d0,(a1)+
0000585A 51C9 FFFC                  		dbf	d1,Cred_ClrObjRam ; clear object RAM
0000585E                            
00005868 41F9 0000 0000             		lea	(Nem_CreditText).l,a0 ;	load credits alphabet patterns
0000586E 6100 B9BE                  		bsr.w	NemDec
00005872                            
00005872 43F8 FB80                  		lea	(v_pal_dry_dup).w,a1
00005876 7000                       		moveq	#0,d0
00005878 323C 001F                  		move.w	#$1F,d1
0000587C                            	Cred_ClrPal:
0000587C 22C0                       		move.l	d0,(a1)+
0000587E 51C9 FFFC                  		dbf	d1,Cred_ClrPal ; fill palette with black
00005882                            
00005882 7003                       		moveq	#palid_Sonic,d0
00005884 6100 C5B8                  		bsr.w	PalLoad1	; load Sonic's palette
00005888 11FC 0000 D080             		move.b	#id_CreditsText,(v_objspace+$80).w ; load credits object
0000588E 4EB9 0000 0000             		jsr	(ExecuteObjects).l
00005894 4EB9 0000 0000             		jsr	(BuildSprites).l
0000589A 6100 0000                  		bsr.w	EndingDemoLoad
0000589E 7000                       		moveq	#0,d0
000058A0 1038 FE10                  		move.b	(v_zone).w,d0
000058A4 E948                       		lsl.w	#4,d0
000058A6 45F9 0000 0000             		lea	(LevelHeaders).l,a2
000058AC 45F2 0000                  		lea	(a2,d0.w),a2
000058B0 7000                       		moveq	#0,d0
000058B2 1012                       		move.b	(a2),d0
000058B4 6700                       		beq.s	Cred_SkipObjGfx
000058B6 6100 BAB6                  		bsr.w	AddPLC		; load object graphics
000058BA                            
000058BA                            	Cred_SkipObjGfx:
000058BA 7000                       		moveq	#plcid_Main2,d0
000058BC 6100 BAB0                  		bsr.w	AddPLC		; load standard	level graphics
000058C0 31FC 0078 F614             		move.w	#120,(v_demolength).w ; display a credit for 2 seconds
000058C6 6100 C2D8                  		bsr.w	PaletteFadeIn
000058CA                            
000058CA                            Cred_WaitLoop:
000058CA 11FC 0004 F62A             		move.b	#4,(v_vbla_routine).w
000058D0 6100 CEE8                  		bsr.w	WaitForVBla
000058D4 6100 BB04                  		bsr.w	RunPLC
000058D8 4A78 F614                  		tst.w	(v_demolength).w ; have 2 seconds elapsed?
000058DC 66EC                       		bne.s	Cred_WaitLoop	; if not, branch
000058DE 4AB8 F680                  		tst.l	(v_plc_buffer).w ; have level gfx finished decompressing?
000058E2 66E6                       		bne.s	Cred_WaitLoop	; if not, branch
000058E4 0C78 0009 FFF4             		cmpi.w	#9,(v_creditsnum).w ; have the credits finished?
000058EA 6700 0000                  		beq.w	TryAgainEnd	; if yes, branch
000058EE 4E75                       		rts	
000058F0                            		
000058F0                            		include	"_inc\Hacker.asm"
000058F0                            ; ---------------------------------------------------------------------------
000058F0                            ; Hacker! (this now crashes the game which is a good result)
000058F0                            ; ---------------------------------------------------------------------------
000058F0                            
000058F0                            GM_Hacker:
000058F8 41F9 0000 0000             		lea	VDP,a0				; load VDP register data
000058FE 343C 8000                  		move.w	#$8000,d2				; prepare starting register
00005902 7611                       		moveq	#$12-1,d3				; set to write 12 registers (80 - 92)
00005904                            
00005904                            BMD_WriteVDP:
00005904 1418                       		move.b	(a0)+,d2				; load VDP register data
00005906 3C82                       		move.w	d2,(a6)					; save register value to VDP
00005908 D441                       		add.w	d1,d2					; advance to next register
0000590A 51CB FFF8                  		dbf	d3,BMD_WriteVDP				; repeat for 12 registers
0000590E                            
0000590E                            	; --- Loading VRAM data into VRAM ---
0000590E                            
0000590E 41F9 0000 0000             		lea	VRAM,a0				; load VRAM palette data
00005914 2CBC 4000 0000             		move.l	#$40000000,(a6)				; set VDP to VRAM write mode
0000591A 363C 0FFF                  		move.w	#(($10000/$04)/$04)-1,d3		; size of VRAM data to copy
0000591E                            
0000591E                            BMD_WriteVRAM:
0000591E 2A98                       		move.l	(a0)+,(a5)				; copy data into VRAM
00005920 2A98                       		move.l	(a0)+,(a5)				; ''
00005922 2A98                       		move.l	(a0)+,(a5)				; ''
00005924 2A98                       		move.l	(a0)+,(a5)				; ''
00005926 51CB FFF6                  		dbf	d3,BMD_WriteVRAM			; repeat until all data has been copied
0000592A                            
0000592A                            	; --- Loading palette data into CRAM ---
0000592A                            
0000592A 41F9 0000 0000             		lea	CRAM,a0				; load CRAM palette data
00005930 2CBC C000 0000             		move.l	#$C0000000,(a6)				; set VDP to CRAM write mode
00005936 7607                       		moveq	#(($80/$04)/$04)-1,d3			; size of palette to copy
00005938                            
00005938                            BMD_WriteCRAM:
00005938 2A98                       		move.l	(a0)+,(a5)				; copy colours into CRAM
0000593A 2A98                       		move.l	(a0)+,(a5)				; ''
0000593C 2A98                       		move.l	(a0)+,(a5)				; ''
0000593E 2A98                       		move.l	(a0)+,(a5)				; ''
00005940 51CB FFF6                  		dbf	d3,BMD_WriteCRAM			; repeat until all colours have been copied
00005944                            
00005944                            	; --- Finish (loop endlessly) ---
00005944                            
00005944                            BMD_Loop:
00005944 6000 FFFE                  		bra.w	BMD_Loop				; loop endlessly (VDP has data and will display endlessly)
00005948                            VDP:		incbin	"misc\VDP.bin"
0000595A                            		even
0000595A                            CRAM:		incbin	"misc\CRAM.bin"
000059DA                            		even
000059DA                            VRAM:		incbin	"misc\CRAM.bin"
00005A5A                            		even
00005A5A                            ; ===========================================================================
00005A5A                            ; ===========================================================================
00005A5A                            
00005A5A                            ; ---------------------------------------------------------------------------
00005A5A                            ; Ending sequence demo loading subroutine
00005A5A                            ; ---------------------------------------------------------------------------
00005A5A                            
00005A5A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00005A5A                            
00005A5A                            
00005A5A                            EndingDemoLoad:
00005A5A 3038 FFF4                  		move.w	(v_creditsnum).w,d0
00005A5E 0240 000F                  		andi.w	#$F,d0
00005A62 D040                       		add.w	d0,d0
00005A64 303B 0000                  		move.w	EndDemo_Levels(pc,d0.w),d0 ; load level	array
00005A68 31C0 FE10                  		move.w	d0,(v_zone).w	; set level from level array
00005A6C 5278 FFF4                  		addq.w	#1,(v_creditsnum).w
00005A70 0C78 0009 FFF4             		cmpi.w	#9,(v_creditsnum).w ; have credits finished?
00005A76 6400                       		bhs.s	EndDemo_Exit	; if yes, branch
00005A78 31FC 8001 FFF0             		move.w	#$8001,(f_demo).w ; set demo+ending mode
00005A7E 11FC 0000 F600             		move.b	#id_Demo,(v_gamemode).w ; set game mode to 8 (demo)
00005A84 11FC 0003 FE12             		move.b	#3,(v_lives).w	; set lives to 3
00005A8A 7000                       		moveq	#0,d0
00005A8C 31C0 FE20                  		move.w	d0,(v_rings).w	; clear rings
00005A90 21C0 FE22                  		move.l	d0,(v_time).w	; clear time
00005A94 21C0 FE26                  		move.l	d0,(v_score).w	; clear score
00005A98 11C0 FE30                  		move.b	d0,(v_lastlamp).w ; clear lamppost counter
00005A9C 0C78 0004 FFF4             		cmpi.w	#4,(v_creditsnum).w ; is SLZ demo running?
00005AA2 6600                       		bne.s	EndDemo_Exit	; if not, branch
00005AA4 43F9 0000 0000             		lea	(EndDemo_LampVar).l,a1 ; load lamppost variables
00005AAA 45F8 FE30                  		lea	(v_lastlamp).w,a2
00005AAE 303C 0008                  		move.w	#8,d0
00005AB2                            
00005AB2                            	EndDemo_LampLoad:
00005AB2 24D9                       		move.l	(a1)+,(a2)+
00005AB4 51C8 FFFC                  		dbf	d0,EndDemo_LampLoad
00005AB8                            
00005AB8                            EndDemo_Exit:
00005AB8 4E75                       		rts	
00005ABA                            ; End of function EndingDemoLoad
00005ABA                            
00005ABA                            ; ===========================================================================
00005ABA                            ; ---------------------------------------------------------------------------
00005ABA                            ; Levels used in the end sequence demos
00005ABA                            ; ---------------------------------------------------------------------------
00005ABA                            EndDemo_Levels:	incbin	"misc\Demo Level Order - Ending.bin"
00005ACA                            
00005ACA                            ; ---------------------------------------------------------------------------
00005ACA                            ; Lamppost variables in the end sequence demo (Star Light Zone)
00005ACA                            ; ---------------------------------------------------------------------------
00005ACA                            EndDemo_LampVar:
00005ACA 0101                       		dc.b 1,	1		; number of the last lamppost
00005ACC 0A00 062C                  		dc.w $A00, $62C		; x/y-axis position
00005AD0 000D                       		dc.w 13			; rings
00005AD2 0000 0000                  		dc.l 0			; time
00005AD6 0000                       		dc.b 0,	0		; dynamic level event routine counter
00005AD8 0800                       		dc.w $800		; level bottom boundary
00005ADA 0957 05CC                  		dc.w $957, $5CC		; x/y axis screen position
00005ADE 04AB 03A6 0000 028C 0000+  		dc.w $4AB, $3A6, 0, $28C, 0, 0 ; scroll info
00005AEA 0308                       		dc.w $308		; water height
00005AEC 0101                       		dc.b 1,	1		; water routine and state
00005AEE                            ; ===========================================================================
00005AEE                            ; ---------------------------------------------------------------------------
00005AEE                            ; "TRY AGAIN" and "END"	screens
00005AEE                            ; ---------------------------------------------------------------------------
00005AEE                            
00005AEE                            TryAgainEnd:
00005AEE 6100 B8DC                  		bsr.w	ClearPLC
00005AF2 6100 C152                  		bsr.w	PaletteFadeOut
00005AF6 4DF9 00C0 0004             		lea	(vdp_control_port).l,a6
00005AFC 3CBC 8004                  		move.w	#$8004,(a6)	; use 8-colour mode
00005B00 3CBC 8230                  		move.w	#$8200+(vram_fg>>10),(a6) ; set foreground nametable address
00005B04 3CBC 8407                  		move.w	#$8400+(vram_bg>>13),(a6) ; set background nametable address
00005B08 3CBC 9001                  		move.w	#$9001,(a6)	; 64-cell hscroll size
00005B0C 3CBC 9200                  		move.w	#$9200,(a6)	; window vertical position
00005B10 3CBC 8B03                  		move.w	#$8B03,(a6)	; line scroll mode
00005B14 3CBC 8720                  		move.w	#$8720,(a6)	; set background colour (line 3; colour 0)
00005B18 4238 F64E                  		clr.b	(f_wtr_state).w
00005B1C 6100 B594                  		bsr.w	ClearScreen
00005B20                            
00005B20 43F8 D000                  		lea	(v_objspace).w,a1
00005B24 7000                       		moveq	#0,d0
00005B26 323C 07FF                  		move.w	#$7FF,d1
00005B2A                            	TryAg_ClrObjRam:
00005B2A 22C0                       		move.l	d0,(a1)+
00005B2C 51C9 FFFC                  		dbf	d1,TryAg_ClrObjRam ; clear object RAM
00005B30                            
00005B30 7000                       		moveq	#plcid_TryAgain,d0
00005B32 6100 B9A6                  		bsr.w	QuickPLC	; load "TRY AGAIN" or "END" patterns
00005B36                            
00005B36 43F8 FB80                  		lea	(v_pal_dry_dup).w,a1
00005B3A 7000                       		moveq	#0,d0
00005B3C 323C 001F                  		move.w	#$1F,d1
00005B40                            	TryAg_ClrPal:
00005B40 22C0                       		move.l	d0,(a1)+
00005B42 51C9 FFFC                  		dbf	d1,TryAg_ClrPal ; fill palette with black
00005B46                            
00005B46 7014                       		moveq	#palid_Ending,d0
00005B48 6100 C2F4                  		bsr.w	PalLoad1	; load ending palette
00005B4C 4278 FBC0                  		clr.w	(v_pal_dry_dup+$40).w
00005B50 11FC 0000 D080             		move.b	#id_EndEggman,(v_objspace+$80).w ; load Eggman object
00005B56 4EB9 0000 0000             		jsr	(ExecuteObjects).l
00005B5C 4EB9 0000 0000             		jsr	(BuildSprites).l
00005B62 31FC 0708 F614             		move.w	#1800,(v_demolength).w ; show screen for 30 seconds
00005B68 6100 C036                  		bsr.w	PaletteFadeIn
00005B6C                            
00005B6C                            ; ---------------------------------------------------------------------------
00005B6C                            ; "TRY AGAIN" and "END"	screen main loop
00005B6C                            ; ---------------------------------------------------------------------------
00005B6C                            TryAg_MainLoop:
00005B6C 6100 B628                  		bsr.w	PauseGame
00005B70 11FC 0004 F62A             		move.b	#4,(v_vbla_routine).w
00005B76 6100 CC42                  		bsr.w	WaitForVBla
00005B7A 4EB9 0000 0000             		jsr	(ExecuteObjects).l
00005B80 4EB9 0000 0000             		jsr	(BuildSprites).l
00005B86 0238 0080 F605             		andi.b	#btnStart,(v_jpadpress1).w ; is Start button pressed?
00005B8C 6600                       		bne.s	TryAg_Exit	; if yes, branch
00005B8E 4A78 F614                  		tst.w	(v_demolength).w ; has 30 seconds elapsed?
00005B92 6700                       		beq.s	TryAg_Exit	; if yes, branch
00005B94 0C38 0000 F600             		cmpi.b	#id_Credits,(v_gamemode).w
00005B9A 67D0                       		beq.s	TryAg_MainLoop
00005B9C                            
00005B9C                            TryAg_Exit:
00005B9C 11FC 0000 F600             		move.b	#id_Sega,(v_gamemode).w ; goto Sega screen
00005BA2 4E75                       		rts	
00005BA4                            
00005BA4                            ; ===========================================================================
00005BA4                            
00005BA4                            		include	"_incObj\8B Try Again & End Eggman.asm"
00005BA4                            ; ---------------------------------------------------------------------------
00005BA4                            ; Object 8B - Eggman on "TRY AGAIN" and "END"	screens
00005BA4                            ; ---------------------------------------------------------------------------
00005BA4                            
00005BA4                            EndEggman:
00005BA4 7000                       		moveq	#0,d0
00005BA6 1028 0024                  		move.b	obRoutine(a0),d0
00005BAA 323B 0000                  		move.w	EEgg_Index(pc,d0.w),d1
00005BAE 4EBB 1000                  		jsr	EEgg_Index(pc,d1.w)
00005BB2 4EF9 0000 0000             		jmp	(DisplaySprite).l
00005BB8                            ; ===========================================================================
00005BB8 0000                       EEgg_Index:	dc.w EEgg_Main-EEgg_Index
00005BBA 0000                       		dc.w EEgg_Animate-EEgg_Index
00005BBC 0000                       		dc.w EEgg_Juggle-EEgg_Index
00005BBE 0000                       		dc.w EEgg_Wait-EEgg_Index
00005BC0                            
00005BC0 =00000030                  eegg_time:	equ $30		; time between juggle motions
00005BC0                            ; ===========================================================================
00005BC0                            
00005BC0                            EEgg_Main:	; Routine 0
00005BC0 5428 0024                  		addq.b	#2,obRoutine(a0)
00005BC4 317C 0120 0008             		move.w	#$120,obX(a0)
00005BCA 317C 00F4 000A             		move.w	#$F4,obScreenY(a0)
00005BD0 217C 0000 0000 0004        		move.l	#Map_EEgg,obMap(a0)
00005BD8 317C 03E1 0002             		move.w	#$3E1,obGfx(a0)
00005BDE 117C 0000 0001             		move.b	#0,obRender(a0)
00005BE4 117C 0002 0018             		move.b	#2,obPriority(a0)
00005BEA 117C 0002 001C             		move.b	#2,obAnim(a0)	; use "END" animation
00005BF0 0C38 0006 FE57             		cmpi.b	#6,(v_emeralds).w ; do you have all 6 emeralds?
00005BF6 6700                       		beq.s	EEgg_Animate	; if yes, branch
00005BF8                            
00005BF8 11FC 0000 D0C0             		move.b	#id_CreditsText,(v_objspace+$C0).w ; load credits object
00005BFE 31FC 0009 FFF4             		move.w	#9,(v_creditsnum).w ; use "TRY AGAIN" text
00005C04 11FC 0000 D800             		move.b	#id_TryChaos,(v_objspace+$800).w ; load emeralds object on "TRY AGAIN" screen
00005C0A 117C 0000 001C             		move.b	#0,obAnim(a0)	; use "TRY AGAIN" animation
00005C10                            
00005C10                            EEgg_Animate:	; Routine 2
00005C10 43F9 0000 0000             		lea	(Ani_EEgg).l,a1
00005C16 4EF9 0000 0000             		jmp	(AnimateSprite).l
00005C1C                            ; ===========================================================================
00005C1C                            
00005C1C                            EEgg_Juggle:	; Routine 4
00005C1C 5428 0024                  		addq.b	#2,obRoutine(a0)
00005C20 7002                       		moveq	#2,d0
00005C22 0828 0000 001C             		btst	#0,obAnim(a0)
00005C28 6700                       		beq.s	@noflip
00005C2A 4440                       		neg.w	d0
00005C2C                            
00005C2C                            	@noflip:
00005C2C 43F8 D800                  		lea	(v_objspace+$800).w,a1 ; get RAM address for emeralds
00005C30 7205                       		moveq	#5,d1
00005C32                            
00005C32                            @emeraldloop:
00005C32 1340 003E                  		move.b	d0,$3E(a1)
00005C36 3400                       		move.w	d0,d2
00005C38 E742                       		asl.w	#3,d2
00005C3A D529 0026                  		add.b	d2,obAngle(a1)
00005C3E 43E9 0040                  		lea	$40(a1),a1
00005C42                            	;	dbf	d1,@emeraldloop ; temp comment
00005C42 5228 001A                  		addq.b	#1,obFrame(a0)
00005C46 317C 0070 0030             		move.w	#112,eegg_time(a0)
00005C4C                            
00005C4C                            EEgg_Wait:	; Routine 6
00005C4C 5368 0030                  		subq.w	#1,eegg_time(a0) ; decrement timer
00005C50                            	;	bpl.s	@nochg		; branch if time remains ; temp comment
00005C50 0868 0000 001C             		bchg	#0,obAnim(a0)
00005C56 117C 0002 0024             		move.b	#2,obRoutine(a0) ; goto EEgg_Animate next
00005C5C                            
00005C5C                            	@nochg:
00005C5C 4E75                       		rts	
00005C5C 4E75                       		rts	
00005C5E                            		include "_anim\Try Again & End Eggman.asm"
00005C5E                            ; ---------------------------------------------------------------------------
00005C5E                            ; Animation script - Eggman on the "TRY AGAIN" and "END" screens
00005C5E                            ; ---------------------------------------------------------------------------
00005C5E                            Ani_EEgg:	;dc.w @tryagain1-Ani_EEgg ; temp comments
00005C5E                            ;		dc.w @tryagain2-Ani_EEgg
00005C5E                            ;		dc.w @end-Ani_EEgg
00005C5E                            ;@tryagain1:	dc.b 5,	0, afRoutine, 1
00005C5E                            ;@tryagain2:	dc.b 5,	2, afRoutine, 3
00005C5E                            ;@end:		dc.b 7,	4, 5, 6, 5, 4, 5, 6, 5,	4, 5, 6, 5, 7, 5, 6, 5,	afEnd
00005C5E                            		even
00005C5E                            		even
00005C5E                            		include	"_incObj\8C Try Again Emeralds.asm"
00005C5E                            ; ---------------------------------------------------------------------------
00005C5E                            ; Object 8C - chaos emeralds on	the "TRY AGAIN"	screen
00005C5E                            ; ---------------------------------------------------------------------------
00005C5E                            
00005C5E                            TryChaos:
00005C5E 7000                       		moveq	#0,d0
00005C60 1028 0024                  		move.b	obRoutine(a0),d0
00005C64 323B 0000                  		move.w	TCha_Index(pc,d0.w),d1
00005C68 4EBB 1000                  		jsr	TCha_Index(pc,d1.w)
00005C6C 4EF9 0000 0000             		jmp	(DisplaySprite).l
00005C72                            ; ===========================================================================
00005C72 0000                       TCha_Index:	dc.w TCha_Main-TCha_Index
00005C74 0000                       		dc.w TCha_Move-TCha_Index
00005C76                            ; ===========================================================================
00005C76                            
00005C76                            TCha_Main:	; Routine 0
00005C76 2248                       		movea.l	a0,a1
00005C78 7400                       		moveq	#0,d2
00005C7A 7600                       		moveq	#0,d3
00005C7C 7205                       		moveq	#5,d1
00005C7E 9238 FE57                  		sub.b	(v_emeralds).w,d1
00005C82                            
00005C82                            @makeemerald:
00005C82 12BC 0000                  		move.b	#id_TryChaos,(a1) ; load emerald object
00005C86 5429 0024                  		addq.b	#2,obRoutine(a1)
00005C8A 237C 0000 57D2 0004        		move.l	#Map_ECha,obMap(a1)
00005C92 337C 03C5 0002             		move.w	#$3C5,obGfx(a1)
00005C98 137C 0000 0001             		move.b	#0,obRender(a1)
00005C9E 137C 0001 0018             		move.b	#1,obPriority(a1)
00005CA4 337C 0104 0008             		move.w	#$104,obX(a1)
00005CAA 337C 0120 0038             		move.w	#$120,$38(a1)
00005CB0 337C 00EC 000A             		move.w	#$EC,obScreenY(a1)
00005CB6 3369 000A 003A             		move.w	obScreenY(a1),$3A(a1)
00005CBC 137C 001C 003C             		move.b	#$1C,$3C(a1)
00005CC2 47F8 FE58                  		lea	(v_emldlist).w,a3
00005CC6                            
00005CC6                            	@chkemerald:
00005CC6 7000                       		moveq	#0,d0
00005CC8 1038 FE57                  		move.b	(v_emeralds).w,d0
00005CCC 5340                       		subq.w	#1,d0
00005CCE 6500                       		bcs.s	@loc_5B42
00005CD0                            
00005CD0                            	@chkloop:
00005CD0 B433 0000                  		cmp.b	(a3,d0.w),d2
00005CD4 6600                       		bne.s	@notgot
00005CD6 5202                       		addq.b	#1,d2
00005CD8 60EC                       		bra.s	@chkemerald
00005CDA                            ; ===========================================================================
00005CDA                            
00005CDA                            	@notgot:
00005CDA 51C8 FFF4                  		dbf	d0,@chkloop
00005CDE                            
00005CDE                            @loc_5B42:
00005CDE 1342 001A                  		move.b	d2,obFrame(a1)
00005CE2 5229 001A                  		addq.b	#1,obFrame(a1)
00005CE6 5202                       		addq.b	#1,d2
00005CE8 137C 0080 0026             		move.b	#$80,obAngle(a1)
00005CEE 1343 001E                  		move.b	d3,obTimeFrame(a1)
00005CF2 1343 001F                  		move.b	d3,obDelayAni(a1)
00005CF6 0643 000A                  		addi.w	#10,d3
00005CFA 43E9 0040                  		lea	$40(a1),a1
00005CFE 51C9 FF82                  		dbf	d1,@makeemerald	; repeat 5 times
00005D02                            
00005D02                            TCha_Move:	; Routine 2
00005D02 4A68 003E                  		tst.w	$3E(a0)
00005D06 6700                       		beq.s	locret_5BBA
00005D08 4A28 001E                  		tst.b	obTimeFrame(a0)
00005D0C 6700                       		beq.s	loc_5B78
00005D0E 5328 001E                  		subq.b	#1,obTimeFrame(a0)
00005D12 6600                       		bne.s	loc_5B80
00005D14                            
00005D14                            loc_5B78:
00005D14 3028 003E                  		move.w	$3E(a0),d0
00005D18 D168 0026                  		add.w	d0,obAngle(a0)
00005D1C                            
00005D1C                            loc_5B80:
00005D1C 1028 0026                  		move.b	obAngle(a0),d0
00005D20 6700                       		beq.s	loc_5B8C
00005D22 0C00 0080                  		cmpi.b	#$80,d0
00005D26 6600                       		bne.s	loc_5B96
00005D28                            
00005D28                            loc_5B8C:
00005D28 4268 003E                  		clr.w	$3E(a0)
00005D2C 1168 001F 001E             		move.b	obDelayAni(a0),obTimeFrame(a0)
00005D32                            
00005D32                            loc_5B96:
00005D32 4EB9 0000 27EC             		jsr	(CalcSine).l
00005D38 7800                       		moveq	#0,d4
00005D3A 1828 003C                  		move.b	$3C(a0),d4
00005D3E C3C4                       		muls.w	d4,d1
00005D40 E081                       		asr.l	#8,d1
00005D42 C1C4                       		muls.w	d4,d0
00005D44 E080                       		asr.l	#8,d0
00005D46 D268 0038                  		add.w	$38(a0),d1
00005D4A D068 003A                  		add.w	$3A(a0),d0
00005D4E 3141 0008                  		move.w	d1,obX(a0)
00005D52 3140 000A                  		move.w	d0,obScreenY(a0)
00005D56                            
00005D56                            locret_5BBA:
00005D56 4E75                       		rts	
00005D56 4E75                       		rts	
00005D58                            Map_EEgg:	include	"_maps\Try Again & End Eggman.asm"
00005D58                            ; ---------------------------------------------------------------------------
00005D58                            ; Sprite mappings - Robotnik on	the "TRY AGAIN"	and "END" screens
00005D58                            ; ---------------------------------------------------------------------------
00005D58                            Map_EEgg_internal:
00005D58 0000                       		dc.w M_EEgg_Try1-Map_EEgg_internal
00005D5A 0000                       		dc.w M_EEgg_Try2-Map_EEgg_internal
00005D5C 0000                       		dc.w M_EEgg_Try3-Map_EEgg_internal
00005D5E 0000                       		dc.w M_EEgg_Try4-Map_EEgg_internal
00005D60 0000                       		dc.w M_EEgg_End1-Map_EEgg_internal
00005D62 0000                       		dc.w M_EEgg_End2-Map_EEgg_internal
00005D64 0000                       		dc.w M_EEgg_End3-Map_EEgg_internal
00005D66 0000                       		dc.w M_EEgg_End4-Map_EEgg_internal
00005D68 08                         M_EEgg_Try1:	dc.b 8
00005D69 E905 0000 F0               		dc.b $E9, 5, 0,	0, $F0
00005D6E F90C 0004 E0               		dc.b $F9, $C, 0, 4, $E0
00005D73 E904 0008 00               		dc.b $E9, 4, 0,	8, 0
00005D78 F10D 000A 00               		dc.b $F1, $D, 0, $A, 0
00005D7D 0106 0023 F0               		dc.b 1,	6, 0, $23, $F0
00005D82 0106 0823 00               		dc.b 1,	6, 8, $23, 0
00005D87 1804 0029 EC               		dc.b $18, 4, 0,	$29, $EC
00005D8C 1804 0829 04               		dc.b $18, 4, 8,	$29, 4
00005D91 08                         M_EEgg_Try2:	dc.b 8
00005D92 E80D 0012 E0               		dc.b $E8, $D, 0, $12, $E0
00005D97 F808 001A E8               		dc.b $F8, 8, 0,	$1A, $E8
00005D9C E805 0800 00               		dc.b $E8, 5, 8,	0, 0
00005DA1 F80C 0804 00               		dc.b $F8, $C, 8, 4, 0
00005DA6 0006 001D F0               		dc.b 0,	6, 0, $1D, $F0
00005DAB 0006 081D 00               		dc.b 0,	6, 8, $1D, 0
00005DB0 1804 0029 EC               		dc.b $18, 4, 0,	$29, $EC
00005DB5 1804 0829 04               		dc.b $18, 4, 8,	$29, 4
00005DBA 08                         M_EEgg_Try3:	dc.b 8
00005DBB E904 0808 F0               		dc.b $E9, 4, 8,	8, $F0
00005DC0 F10D 080A E0               		dc.b $F1, $D, 8, $A, $E0
00005DC5 E905 0800 00               		dc.b $E9, 5, 8,	0, 0
00005DCA F90C 0804 00               		dc.b $F9, $C, 8, 4, 0
00005DCF 0106 0023 F0               		dc.b 1,	6, 0, $23, $F0
00005DD4 0106 0823 00               		dc.b 1,	6, 8, $23, 0
00005DD9 1804 0029 EC               		dc.b $18, 4, 0,	$29, $EC
00005DDE 1804 0829 04               		dc.b $18, 4, 8,	$29, 4
00005DE3 08                         M_EEgg_Try4:	dc.b 8
00005DE4 E805 0000 F0               		dc.b $E8, 5, 0,	0, $F0
00005DE9 F80C 0004 E0               		dc.b $F8, $C, 0, 4, $E0
00005DEE E80D 0812 00               		dc.b $E8, $D, 8, $12, 0
00005DF3 F808 081A 00               		dc.b $F8, 8, 8,	$1A, 0
00005DF8 0006 001D F0               		dc.b 0,	6, 0, $1D, $F0
00005DFD 0006 081D 00               		dc.b 0,	6, 8, $1D, 0
00005E02 1804 0029 EC               		dc.b $18, 4, 0,	$29, $EC
00005E07 1804 0829 04               		dc.b $18, 4, 8,	$29, 4
00005E0C 0C                         M_EEgg_End1:	dc.b $C
00005E0D ED0A 002B E8               		dc.b $ED, $A, 0, $2B, $E8
00005E12 F500 0034 E0               		dc.b $F5, 0, 0,	$34, $E0
00005E17 0504 0035 F0               		dc.b 5,	4, 0, $35, $F0
00005E1C 0D08 0037 E8               		dc.b $D, 8, 0, $37, $E8
00005E21 ED0A 082B 00               		dc.b $ED, $A, 8, $2B, 0
00005E26 F500 0834 18               		dc.b $F5, 0, 8,	$34, $18
00005E2B 0504 0835 00               		dc.b 5,	4, 8, $35, 0
00005E30 0D08 0837 00               		dc.b $D, 8, 8, $37, 0
00005E35 100D 0073 E0               		dc.b $10, $D, 0, $73, $E0
00005E3A 100D 007B 00               		dc.b $10, $D, 0, $7B, 0
00005E3F 1C0C 005B E0               		dc.b $1C, $C, 0, $5B, $E0
00005E44 1C0C 085B 00               		dc.b $1C, $C, 8, $5B, 0
00005E49 0A                         M_EEgg_End2:	dc.b $A
00005E4A D207 003A F0               		dc.b $D2, 7, 0,	$3A, $F0
00005E4F DA00 0042 E8               		dc.b $DA, 0, 0,	$42, $E8
00005E54 F207 0043 F0               		dc.b $F2, 7, 0,	$43, $F0
00005E59 D207 083A 00               		dc.b $D2, 7, 8,	$3A, 0
00005E5E DA00 0842 10               		dc.b $DA, 0, 8,	$42, $10
00005E63 F207 0843 00               		dc.b $F2, 7, 8,	$43, 0
00005E68 100D 0067 E8               		dc.b $10, $D, 0, $67, $E8
00005E6D 1005 006F 08               		dc.b $10, 5, 0,	$6F, 8
00005E72 1C0C 005F E0               		dc.b $1C, $C, 0, $5F, $E0
00005E77 1C0C 085F 00               		dc.b $1C, $C, 8, $5F, 0
00005E7C 0A                         M_EEgg_End3:	dc.b $A
00005E7D C40B 004B E8               		dc.b $C4, $B, 0, $4B, $E8
00005E82 E408 0057 E8               		dc.b $E4, 8, 0,	$57, $E8
00005E87 EC00 005A F0               		dc.b $EC, 0, 0,	$5A, $F0
00005E8C C40B 084B 00               		dc.b $C4, $B, 8, $4B, 0
00005E91 E408 0857 00               		dc.b $E4, 8, 8,	$57, 0
00005E96 EC00 085A 08               		dc.b $EC, 0, 8,	$5A, 8
00005E9B 100D 0067 E8               		dc.b $10, $D, 0, $67, $E8
00005EA0 1005 006F 08               		dc.b $10, 5, 0,	$6F, 8
00005EA5 1C0C 0063 E0               		dc.b $1C, $C, 0, $63, $E0
00005EAA 1C0C 0863 00               		dc.b $1C, $C, 8, $63, 0
00005EAF 0C                         M_EEgg_End4:	dc.b $C
00005EB0 F40A 002B E8               		dc.b $F4, $A, 0, $2B, $E8
00005EB5 FC00 0034 E0               		dc.b $FC, 0, 0,	$34, $E0
00005EBA 0C04 0035 F0               		dc.b $C, 4, 0, $35, $F0
00005EBF 1408 0037 E8               		dc.b $14, 8, 0,	$37, $E8
00005EC4 F40A 082B 00               		dc.b $F4, $A, 8, $2B, 0
00005EC9 FC00 0834 18               		dc.b $FC, 0, 8,	$34, $18
00005ECE 0C04 0835 00               		dc.b $C, 4, 8, $35, 0
00005ED3 1408 0837 00               		dc.b $14, 8, 8,	$37, 0
00005ED8 180C 0083 E0               		dc.b $18, $C, 0, $83, $E0
00005EDD 180C 0087 00               		dc.b $18, $C, 0, $87, 0
00005EE2 1C0C 005B E0               		dc.b $1C, $C, 0, $5B, $E0
00005EE7 1C0C 085B 00               		dc.b $1C, $C, 8, $5B, 0
00005EEC                            		even
00005EEC                            		even
00005EEC                            
00005EEC                            ; ---------------------------------------------------------------------------
00005EEC                            ; Ending sequence demos
00005EEC                            ; ---------------------------------------------------------------------------
00005EEC                            Demo_EndGHZ1:	incbin	"demodata\Ending - GHZ1.bin"
00005F1A                            		even
00005F1A                            Demo_EndMZ:	incbin	"demodata\Ending - MZ.bin"
00005F5A                            		even
00005F5A                            Demo_EndSYZ:	incbin	"demodata\Ending - SYZ.bin"
00005F8A                            		even
00005F8A                            Demo_EndLZ:	incbin	"demodata\Ending - LZ.bin"
00005FBA                            		even
00005FBA                            Demo_EndSLZ:	incbin	"demodata\Ending - SLZ.bin"
00005FDA                            		even
00005FDA                            Demo_EndSBZ1:	incbin	"demodata\Ending - SBZ1.bin"
00005FFA                            		even
00005FFA                            Demo_EndSBZ2:	incbin	"demodata\Ending - SBZ2.bin"
0000602A                            		even
0000602A                            Demo_EndGHZ2:	incbin	"demodata\Ending - GHZ2.bin"
0000605A                            		even
0000605A                            
0000605A                            		include	"_inc\LevelSizeLoad & BgScrollSpeed.asm"
0000605A                            ; ---------------------------------------------------------------------------
0000605A                            ; Subroutine to	load level boundaries and start	locations
0000605A                            ; ---------------------------------------------------------------------------
0000605A                            
0000605A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000605A                            
0000605A                            
0000605A                            LevelSizeLoad:
0000605A 7000                       		moveq	#0,d0
0000605C 11C0 F740                  		move.b	d0,($FFFFF740).w
00006060 11C0 F741                  		move.b	d0,($FFFFF741).w
00006064 11C0 F746                  		move.b	d0,($FFFFF746).w
00006068 11C0 F748                  		move.b	d0,($FFFFF748).w
0000606C 11C0 F742                  		move.b	d0,(v_dle_routine).w
00006070 3038 FE10                  		move.w	(v_zone).w,d0
00006074 ED08                       		lsl.b	#6,d0
00006076 E848                       		lsr.w	#4,d0
00006078 3200                       		move.w	d0,d1
0000607A D040                       		add.w	d0,d0
0000607C D041                       		add.w	d1,d0
0000607E 41FB 0000                  		lea	LevelSizeArray(pc,d0.w),a0 ; load level	boundaries
00006082 3018                       		move.w	(a0)+,d0
00006084 31C0 F730                  		move.w	d0,($FFFFF730).w
00006088 2018                       		move.l	(a0)+,d0
0000608A 21C0 F728                  		move.l	d0,(v_limitleft2).w
0000608E 21C0 F720                  		move.l	d0,(v_limitleft1).w
00006092 2018                       		move.l	(a0)+,d0
00006094 21C0 F72C                  		move.l	d0,(v_limittop2).w
00006098 21C0 F724                  		move.l	d0,(v_limittop1).w
0000609C 3038 F728                  		move.w	(v_limitleft2).w,d0
000060A0 0640 0240                  		addi.w	#$240,d0
000060A4 31C0 F732                  		move.w	d0,(v_limitleft3).w
000060A8 31FC 1010 F74A             		move.w	#$1010,($FFFFF74A).w
000060AE 3018                       		move.w	(a0)+,d0
000060B0 31C0 F73E                  		move.w	d0,(v_lookshift).w
000060B4 6000 0000                  		bra.w	LevSz_ChkLamp
000060B8                            ; ===========================================================================
000060B8                            ; ---------------------------------------------------------------------------
000060B8                            ; Level size array
000060B8                            ; ---------------------------------------------------------------------------
000060B8                            LevelSizeArray:
000060B8                            		; GHZ
000060B8 0004 0000 24BF 0000 0300+  		dc.w $0004, $0000, $24BF, $0000, $0300, $0060
000060C4 0004 0000 2000 0000 0220+  		dc.w $0004, $0000, $2000, $0000, $0220, $0060
000060D0 0004 0000 295C 0000 0300+  		dc.w $0004, $0000, $295C, $0000, $0300, $0060
000060DC 0004 0000 2ABF 0000 0300+  		dc.w $0004, $0000, $2ABF, $0000, $0300, $0060
000060E8                            		; LZ
000060E8 0004 0000 19BF 0000 0530+  		dc.w $0004, $0000, $19BF, $0000, $0530, $0060
000060F4 0004 0000 10AF 0000 0720+  		dc.w $0004, $0000, $10AF, $0000, $0720, $0060
00006100 0004 0000 202F FF00 0800+  		dc.w $0004, $0000, $202F, $FF00, $0800, $0060
0000610C 0004 0000 20BF 0000 0720+  		dc.w $0004, $0000, $20BF, $0000, $0720, $0060
00006118                            		; MZ
00006118 0004 0000 17BF 0000 01D0+  		dc.w $0004, $0000, $17BF, $0000, $01D0, $0060
00006124 0004 0000 17BF 0000 0520+  		dc.w $0004, $0000, $17BF, $0000, $0520, $0060
00006130 0004 0000 1800 0000 0720+  		dc.w $0004, $0000, $1800, $0000, $0720, $0060
0000613C 0004 0000 16BF 0000 0720+  		dc.w $0004, $0000, $16BF, $0000, $0720, $0060
00006148                            		; SLZ
00006148 0004 0000 1FBF 0000 0640+  		dc.w $0004, $0000, $1FBF, $0000, $0640, $0060
00006154 0004 0000 1FBF 0000 0640+  		dc.w $0004, $0000, $1FBF, $0000, $0640, $0060
00006160 0004 0000 2000 0000 06C0+  		dc.w $0004, $0000, $2000, $0000, $06C0, $0060
0000616C 0004 0000 3EC0 0000 0720+  		dc.w $0004, $0000, $3EC0, $0000, $0720, $0060
00006178                            		; SYZ
00006178 0004 0000 1F60 0000 0420+  		dc.w $0004, $0000, $1F60, $0000, $0420, $0060
00006184 0004 0000 28C0 0000 0520+  		dc.w $0004, $0000, $28C0, $0000, $0520, $0060
00006190 0004 0000 2C00 0000 0620+  		dc.w $0004, $0000, $2C00, $0000, $0620, $0060
0000619C 0004 0000 2EC0 0000 0620+  		dc.w $0004, $0000, $2EC0, $0000, $0620, $0060
000061A8                            		; SBZ
000061A8 0004 0000 21C0 0000 0720+  		dc.w $0004, $0000, $21C0, $0000, $0720, $0060
000061B4 0004 0000 1E40 FF00 0800+  		dc.w $0004, $0000, $1E40, $FF00, $0800, $0060
000061C0 0004 0000 1E40 FF00 0800+  		dc.w $0004, $0000, $1E40, $FF00, $0800, $0060
000061CC 0004 0000 3EC0 0000 0720+  		dc.w $0004, $0000, $3EC0, $0000, $0720, $0060
000061D8                            		; Ending
000061D8 0004 0000 0DF8 0000 0720+  		dc.w $0004, $0000, $0DF8, $0000, $0720, $0060
000061E4 0004 0000 1E40 FF00 0800+  		dc.w $0004, $0000, $1E40, $FF00, $0800, $0060
000061F0 0004 2080 2460 0510 0510+  		dc.w $0004, $2080, $2460, $0510, $0510, $0060
000061FC 0004 0000 3EC0 0000 0720+  		dc.w $0004, $0000, $3EC0, $0000, $0720, $0060
00006208                            		
00006208 0004 0000 0D50 0000 0200+  		dc.w $0004, $0000, $0D50, $0000, $0200, $0060
00006214 0004 0000 1E40 FF00 0800+  		dc.w $0004, $0000, $1E40, $FF00, $0800, $0060
00006220 0004 2080 2460 0510 0510+  		dc.w $0004, $2080, $2460, $0510, $0510, $0060
0000622C 0004 0000 3EC0 0000 0720+  		dc.w $0004, $0000, $3EC0, $0000, $0720, $0060
00006238                            		
00006238 0004 0000 21C0 0000 0720+  		dc.w $0004, $0000, $21C0, $0000, $0720, $0060
00006244 0004 0000 1E40 FF00 0800+  		dc.w $0004, $0000, $1E40, $FF00, $0800, $0060
00006250 0004 2080 2460 0510 0510+  		dc.w $0004, $2080, $2460, $0510, $0510, $0060
0000625C 0004 0000 3EC0 0000 0720+  		dc.w $0004, $0000, $3EC0, $0000, $0720, $0060
00006268                            
00006268                            ; ---------------------------------------------------------------------------
00006268                            ; Ending start location array
00006268                            ; ---------------------------------------------------------------------------
00006268                            EndingStLocArray:
00006268                            		include	"_inc\Start Location Array - Ending.asm"
00006268                            ; ---------------------------------------------------------------------------
00006268                            ; Ending start location array
00006268                            ; ---------------------------------------------------------------------------
00006268                            
00006268                            		incbin	"startpos\ghz1 (Credits demo 1).bin"
0000626C                            		incbin	"startpos\mz2 (Credits demo).bin"
00006270                            		incbin	"startpos\syz3 (Credits demo).bin"
00006274                            		incbin	"startpos\lz3 (Credits demo).bin"
00006278                            		incbin	"startpos\slz3 (Credits demo).bin"
0000627C                            		incbin	"startpos\sbz1 (Credits demo).bin"
00006280                            		incbin	"startpos\sbz2 (Credits demo).bin"
00006284                            		incbin	"startpos\ghz1 (Credits demo 2).bin"
00006288                            		even
00006288                            		even
00006288                            
00006288                            ; ===========================================================================
00006288                            
00006288                            LevSz_ChkLamp:
00006288 4A38 FE30                  		tst.b	(v_lastlamp).w	; have any lampposts been hit?
0000628C 6700                       		beq.s	LevSz_StartLoc	; if not, branch
0000628E                            
0000628E 4EB9 0000 0000             		jsr	(Lamp_LoadInfo).l
00006294 3238 D008                  		move.w	(v_player+obX).w,d1
00006298 3038 D00C                  		move.w	(v_player+obY).w,d0
0000629C 6000 0000                  		bra.w	LevSz_SkipStartPos
000062A0                            ; ===========================================================================
000062A0                            
000062A0                            LevSz_StartLoc:
000062A0 3038 FE10                  		move.w	(v_zone).w,d0
000062A4 ED08                       		lsl.b	#6,d0
000062A6 E848                       		lsr.w	#4,d0
000062A8 43FB 0000                  		lea	StartLocArray(pc,d0.w),a1 ; load Sonic's start location
000062AC 4A78 FFF0                  		tst.w	(f_demo).w	; is ending demo mode on?
000062B0 6A00 0000                  		bpl.w	LevSz_SonicPos	; if not, branch
000062B4                            
000062B4 3038 FFF4                  		move.w	(v_creditsnum).w,d0
000062B8 5340                       		subq.w	#1,d0
000062BA E548                       		lsl.w	#2,d0
000062BC 43FB 00AA                  		lea	EndingStLocArray(pc,d0.w),a1 ; load Sonic's start location
000062C0                            	
000062C0                            StartLocArray:	include	"_inc\Start Location Array - Levels.asm"
000062C0                            ; ---------------------------------------------------------------------------
000062C0                            ; Sonic start location array
000062C0                            ; ---------------------------------------------------------------------------
000062C0                            
000062C0                            		incbin	"startpos\ghz1.bin"
000062C4                            		incbin	"startpos\ghz2.bin"
000062C8                            		incbin	"startpos\ghz3.bin"
000062CC 0080 00A8                  		dc.w	$80,$A8
000062D0                            
000062D0                            		incbin	"startpos\lz1.bin"
000062D4                            		incbin	"startpos\lz2.bin"
000062D8                            		incbin	"startpos\lz3.bin"
000062DC                            		incbin	"startpos\sbz3.bin"
000062E0                            
000062E0                            		incbin	"startpos\mz1.bin"
000062E4                            		incbin	"startpos\mz2.bin"
000062E8                            		incbin	"startpos\mz3.bin"
000062EC 0080 00A8                  		dc.w	$80,$A8
000062F0                            
000062F0                            		incbin	"startpos\slz1.bin"
000062F4                            		incbin	"startpos\slz2.bin"
000062F8                            		incbin	"startpos\slz3.bin"
000062FC 0080 00A8                  		dc.w	$80,$A8
00006300                            
00006300                            		incbin	"startpos\syz1.bin"
00006304                            		incbin	"startpos\syz2.bin"
00006308                            		incbin	"startpos\syz3.bin"
0000630C 0080 00A8                  		dc.w	$80,$A8
00006310                            
00006310                            		incbin	"startpos\sbz1.bin"
00006314                            		incbin	"startpos\sbz2.bin"
00006318                            		incbin	"startpos\fz.bin"
0000631C 0080 00A8                  		dc.w	$80,$A8
00006320                            
00006320                            		incbin	"startpos\end1.bin"
00006324                            		incbin	"startpos\end2.bin"
00006328 0080 00A8                  		dc.w	$80,$A8
0000632C 0080 00A8                  		dc.w	$80,$A8
00006330                            		
00006330                            		incbin	"startpos\imz1.bin"
00006334 0080 00A8                  		dc.w	$80,$A8
00006338 0080 00A8                  		dc.w	$80,$A8
0000633C 0080 00A8                  		dc.w	$80,$A8
00006340                            		
00006340                            		incbin	"startpos\csz1.bin"
00006344 0080 00A8                  		dc.w	$80,$A8
00006348 0080 00A8                  		dc.w	$80,$A8
0000634C 0080 00A8                  		dc.w	$80,$A8
00006350                            
00006350                            		even
00006350                            		even
00006350                            
00006350                            LevSz_SonicPos:
00006350 7200                       		moveq	#0,d1
00006352 3219                       		move.w	(a1)+,d1
00006354 31C1 D008                  		move.w	d1,(v_player+obX).w ; set Sonic's position on x-axis
00006358 7000                       		moveq	#0,d0
0000635A 3011                       		move.w	(a1),d0
0000635C 31C0 D00C                  		move.w	d0,(v_player+obY).w ; set Sonic's position on y-axis
00006360                            
00006360                            SetScreen:
00006360                            	LevSz_SkipStartPos:
00006360 0441 00A0                  		subi.w	#160,d1		; is Sonic more than 160px from left edge?
00006364 6400                       		bcc.s	SetScr_WithinLeft ; if yes, branch
00006366 7200                       		moveq	#0,d1
00006368                            
00006368                            	SetScr_WithinLeft:
00006368 3438 F72A                  		move.w	(v_limitright2).w,d2
0000636C B242                       		cmp.w	d2,d1		; is Sonic inside the right edge?
0000636E 6500                       		bcs.s	SetScr_WithinRight ; if yes, branch
00006370 3202                       		move.w	d2,d1
00006372                            
00006372                            	SetScr_WithinRight:
00006372 31C1 F700                  		move.w	d1,(v_screenposx).w ; set horizontal screen position
00006376                            
00006376 0440 0060                  		subi.w	#96,d0		; is Sonic within 96px of upper edge?
0000637A 6400                       		bcc.s	SetScr_WithinTop ; if yes, branch
0000637C 7000                       		moveq	#0,d0
0000637E                            
0000637E                            	SetScr_WithinTop:
0000637E B078 F72E                  		cmp.w	(v_limitbtm2).w,d0 ; is Sonic above the bottom edge?
00006382 6D00                       		blt.s	SetScr_WithinBottom ; if yes, branch
00006384 3038 F72E                  		move.w	(v_limitbtm2).w,d0
00006388                            
00006388                            	SetScr_WithinBottom:
00006388 31C0 F704                  		move.w	d0,(v_screenposy).w ; set vertical screen position
0000638C 6100 0000                  		bsr.w	BgScrollSpeed
00006390 7000                       		moveq	#0,d0
00006392 1038 FE10                  		move.b	(v_zone).w,d0
00006396 E508                       		lsl.b	#2,d0
00006398 21FB 0000 F7AC             		move.l	LoopTileNums(pc,d0.w),(v_256loop1).w
0000639E 6000 0000                  		bra.w	LevSz_LoadScrollBlockSize
000063A2                            ; ===========================================================================
000063A2                            ; ---------------------------------------------------------------------------
000063A2                            ; Which	256x256	tiles contain loops or roll-tunnels
000063A2                            ; ---------------------------------------------------------------------------
000063A2                            
000063A2                            LoopTileNums:
000063A2                            
000063A2                            ; 		loop	loop	tunnel	tunnel
000063A2                            
000063A2 B57F 1F20                  	dc.b	$B5,	$7F,	$1F,	$20	; Green Hill
000063A6 7F7F 7F7F                  	dc.b	$7F,	$7F,	$7F,	$7F	; Labyrinth
000063AA 7F7F 7F7F                  	dc.b	$7F,	$7F,	$7F,	$7F	; Marble
000063AE B5A8 7F7F                  	dc.b	$B5,	$A8,	$7F,	$7F	; Star Light
000063B2 7F7F 7F7F                  	dc.b	$7F,	$7F,	$7F,	$7F	; Spring Yard
000063B6 7F7F 7F7F                  	dc.b	$7F,	$7F,	$7F,	$7F	; Scrap Brain
000063BA 7F7F 7F7F                  	dc.b	$7F,	$7F,	$7F,	$7F	; Ending (Green Hill)
000063BE                            
000063BE                            		even
000063BE                            
000063BE                            ; ===========================================================================
000063BE                            ; LevSz_Unk:
000063BE                            LevSz_LoadScrollBlockSize:
000063BE 7000                       		moveq	#0,d0
000063C0 1038 FE10                  		move.b	(v_zone).w,d0
000063C4 E748                       		lsl.w	#3,d0
000063C6 43FB 0000                  		lea	BGScrollBlockSizes(pc,d0.w),a1
000063CA 45F8 F7F0                  		lea	(v_scroll_block_1_size).w,a2
000063CE 24D9                       		move.l	(a1)+,(a2)+
000063D0 24D9                       		move.l	(a1)+,(a2)+
000063D2 4E75                       		rts	
000063D4                            ; End of function LevelSizeLoad
000063D4                            
000063D4                            ; ===========================================================================
000063D4                            ; dword_61B4:
000063D4                            BGScrollBlockSizes:
000063D4                            		; GHZ
000063D4 0800                       		dc.w $800
000063D6 0100                       		dc.w $100	; I guess these used to be per act?
000063D8 0100                       		dc.w $100	; Or maybe each scroll block got its own size?
000063DA 0100                       		dc.w $100	; Either way, these are unused now.
000063DC                            		; LZ
000063DC 0800                       		dc.w $800
000063DE 0100                       		dc.w $100
000063E0 0100                       		dc.w $100
000063E2 0000                       		dc.w 0
000063E4                            		; MZ
000063E4 0800                       		dc.w $800
000063E6 0100                       		dc.w $100
000063E8 0100                       		dc.w $100
000063EA 0000                       		dc.w 0
000063EC                            		; SLZ
000063EC 0800                       		dc.w $800
000063EE 0100                       		dc.w $100
000063F0 0100                       		dc.w $100
000063F2 0000                       		dc.w 0
000063F4                            		; SYZ
000063F4 0800                       		dc.w $800
000063F6 0100                       		dc.w $100
000063F8 0100                       		dc.w $100
000063FA 0000                       		dc.w 0
000063FC                            		; SBZ
000063FC 0800                       		dc.w $800
000063FE 0100                       		dc.w $100
00006400 0100                       		dc.w $100
00006402 0000                       		dc.w 0
00006404                            		; Ending
00006404 0070                       		dc.w $70
00006406 0100                       		dc.w $100
00006408 0100                       		dc.w $100
0000640A 0100                       		dc.w $100
0000640C                            		
0000640C 0070                       		dc.w $70
0000640E 0100                       		dc.w $100
00006410 0100                       		dc.w $100
00006412 0100                       		dc.w $100
00006414                            		
00006414 0070                       		dc.w $70
00006416 0100                       		dc.w $100
00006418 0100                       		dc.w $100
0000641A 0100                       		dc.w $100
0000641C                            
0000641C                            ; ---------------------------------------------------------------------------
0000641C                            ; Subroutine to	set scroll speed of some backgrounds
0000641C                            ; ---------------------------------------------------------------------------
0000641C                            
0000641C                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000641C                            
0000641C                            
0000641C                            BgScrollSpeed:
0000641C 4A38 FE30                  		tst.b	(v_lastlamp).w
00006420 6600                       		bne.s	loc_6206
00006422 31C0 F70C                  		move.w	d0,(v_bgscreenposy).w
00006426 31C0 F714                  		move.w	d0,(v_bg2screenposy).w
0000642A 31C1 F708                  		move.w	d1,(v_bgscreenposx).w
0000642E 31C1 F710                  		move.w	d1,(v_bg2screenposx).w
00006432 31C1 F718                  		move.w	d1,(v_bg3screenposx).w
00006436                            
00006436                            loc_6206:
00006436 7400                       		moveq	#0,d2
00006438 1438 FE10                  		move.b	(v_zone).w,d2
0000643C D442                       		add.w	d2,d2
0000643E 343B 2000                  		move.w	BgScroll_Index(pc,d2.w),d2
00006442 4EFB 2000                  		jmp	BgScroll_Index(pc,d2.w)
00006446                            ; End of function BgScrollSpeed
00006446                            
00006446                            ; ===========================================================================
00006446 0000 0000                  BgScroll_Index:	dc.w BgScroll_LZ-BgScroll_Index, BgScroll_LZ-BgScroll_Index
0000644A 0000 0000                  		dc.w BgScroll_MZ-BgScroll_Index, BgScroll_SLZ-BgScroll_Index
0000644E 0000 0000                  		dc.w BgScroll_SYZ-BgScroll_Index, BgScroll_SBZ-BgScroll_Index
00006452 0000 0000                  		dc.w BgScroll_End-BgScroll_Index, BgScroll_SBZ-BgScroll_Index
00006456 0000 0000                  		dc.w BgScroll_GHZ-BgScroll_Index, BgScroll_SBZ-BgScroll_Index
0000645A                            ; ===========================================================================
0000645A                            
0000645A                            BgScroll_GHZ:
0000645A 6000 0000                  		bra.w	Deform_GHZ
0000645E                            ; ===========================================================================
0000645E                            
0000645E                            BgScroll_LZ:
0000645E E280                       		asr.l	#1,d0
00006460 31C0 F70C                  		move.w	d0,(v_bgscreenposy).w
00006464 4E75                       		rts	
00006466                            ; ===========================================================================
00006466                            
00006466                            BgScroll_MZ:
00006466 4E75                       		rts	
00006468                            ; ===========================================================================
00006468                            
00006468                            BgScroll_SLZ:
00006468 E280                       		asr.l	#1,d0
0000646A 0640 00C0                  		addi.w	#$C0,d0
0000646E 31C0 F70C                  		move.w	d0,(v_bgscreenposy).w
00006472 4E75                       		rts	
00006474                            ; ===========================================================================
00006474                            
00006474                            BgScroll_SYZ:
00006474 E980                       		asl.l	#4,d0
00006476 2400                       		move.l	d0,d2
00006478 E380                       		asl.l	#1,d0
0000647A D082                       		add.l	d2,d0
0000647C E080                       		asr.l	#8,d0
0000647E 31C0 F70C                  		move.w	d0,(v_bgscreenposy).w
00006482 31C0 F714                  		move.w	d0,(v_bg2screenposy).w
00006486 4E75                       		rts	
00006488                            ; ===========================================================================
00006488                            
00006488                            BgScroll_SBZ:
00006488 E980                       		asl.l	#4,d0
0000648A E380                       		asl.l	#1,d0
0000648C E080                       		asr.l	#8,d0
0000648E 31C0 F70C                  		move.w	d0,(v_bgscreenposy).w
00006492 4E75                       		rts	
00006494                            ; ===========================================================================
00006494                            
00006494                            BgScroll_End:
00006494 31FC 001E F70C             		move.w	#$1E,(v_bgscreenposy).w
0000649A 31FC 001E F714             		move.w	#$1E,(v_bg2screenposy).w
000064A0 4E75                       		rts	
000064A2                            ; ===========================================================================
000064A2 31FC 00A8 F708             		move.w	#$A8,(v_bgscreenposx).w
000064A8 31FC 001E F70C             		move.w	#$1E,(v_bgscreenposy).w
000064AE 31FC FFC0 F710             		move.w	#-$40,(v_bg2screenposx).w
000064B4 31FC 001E F714             		move.w	#$1E,(v_bg2screenposy).w
000064BA 4E75                       		rts
000064BA 4E75                       		rts
000064BC                            		include	"_inc\DeformLayers (JP1).asm"
000064BC                            ; ---------------------------------------------------------------------------
000064BC                            ; Background layer deformation subroutines
000064BC                            ; ---------------------------------------------------------------------------
000064BC                            
000064BC                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000064BC                            
000064BC                            
000064BC                            DeformLayers:
000064BC 4A38 F744                  		tst.b	(f_nobgscroll).w
000064C0 6700                       		beq.s	@bgscroll
000064C2 4E75                       		rts	
000064C4                            ; ===========================================================================
000064C4                            
000064C4                            	@bgscroll:
000064C4 4278 F754                  		clr.w	(v_fg_scroll_flags).w
000064C8 4278 F756                  		clr.w	(v_bg1_scroll_flags).w
000064CC 4278 F758                  		clr.w	(v_bg2_scroll_flags).w
000064D0 4278 F75A                  		clr.w	(v_bg3_scroll_flags).w
000064D4 6100 0000                  		bsr.w	ScrollHoriz
000064D8 6100 0000                  		bsr.w	ScrollVertical
000064DC 6100 0000                  		bsr.w	DynamicLevelEvents
000064E0 31F8 F704 F616             		move.w	(v_screenposy).w,(v_scrposy_dup).w
000064E6 31F8 F70C F618             		move.w	(v_bgscreenposy).w,(v_bgscrposy_dup).w
000064EC 7000                       		moveq	#0,d0
000064EE 1038 FE10                  		move.b	(v_zone).w,d0
000064F2 D040                       		add.w	d0,d0
000064F4 303B 0000                  		move.w	Deform_Index(pc,d0.w),d0
000064F8 4EFB 0000                  		jmp	Deform_Index(pc,d0.w)
000064FC                            ; End of function DeformLayers
000064FC                            
000064FC                            ; ===========================================================================
000064FC                            ; ---------------------------------------------------------------------------
000064FC                            ; Offset index for background layer deformation	code
000064FC                            ; ---------------------------------------------------------------------------
000064FC 0000 0000                  Deform_Index:	dc.w Deform_GHZ_TTS-Deform_Index, Deform_LZ-Deform_Index
00006500 0000 0000                  		dc.w Deform_Plain-Deform_Index, Deform_Plain-Deform_Index
00006504 0000 0000                  		dc.w Deform_Plain-Deform_Index, Deform_Plain-Deform_Index
00006508 0000                       		dc.w Deform_GHZ-Deform_Index
0000650A                            ; ---------------------------------------------------------------------------
0000650A                            ; Green	Hill Zone background layer deformation code
0000650A                            ; ---------------------------------------------------------------------------
0000650A                            
0000650A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000650A                            
0000650A                            Deform_Plain:
0000650A                            	; plain background scroll
0000650A 3838 F73A                  		move.w	(v_scrshiftx).w,d4
0000650E 48C4                       		ext.l	d4
00006510 EF84                       		asl.l	#7,d4
00006512 3A38 F73C                  		move.w	(v_scrshifty).w,d5
00006516 48C5                       		ext.l	d5
00006518 EF85                       		asl.l	#7,d5
0000651A 6100 0000                  		bsr.w	BGScroll_XY
0000651E                            
0000651E 31F8 F70C F618             		move.w	(v_bgscreenposy).w,(v_bgscrposy_dup).w
00006524                            ;		lea	(Lz_Scroll_Data).l,a3
00006524                            ;		lea	(Drown_WobbleData).l,a2
00006524 1438 F7D8                  		move.b	(v_lz_deform).w,d2
00006528 1602                       		move.b	d2,d3
0000652A 0678 0080 F7D8             		addi.w	#$80,(v_lz_deform).w
00006530                            
00006530 D478 F70C                  		add.w	(v_bgscreenposy).w,d2
00006534 0242 00FF                  		andi.w	#$FF,d2
00006538 D678 F704                  		add.w	(v_screenposy).w,d3
0000653C 0243 00FF                  		andi.w	#$FF,d3
00006540 43F8 CC00                  		lea	(v_hscrolltablebuffer).w,a1
00006544 323C 00DF                  		move.w	#$DF,d1
00006548 3038 F700                  		move.w	(v_screenposx).w,d0
0000654C 4440                       		neg.w	d0
0000654E 3C00                       		move.w	d0,d6
00006550 4840                       		swap.w	d0
00006552 3038 F708                  		move.w	(v_bgscreenposx).w,d0
00006556 4440                       		neg.w	d0
00006558 3838 F646                  		move.w	(v_waterpos1).w,d4
0000655C 3A38 F704                  		move.w	(v_screenposy).w,d5
00006560                            ; End of function Deform_Plain
00006560                            
00006560                            Deform_GHZ_TTS: ; BG scroll for real background
00006560 3838 F73A                  		move.w	(v_scrshiftx).w,d4
00006564 48C4                       		ext.l	d4
00006566 EB84                       		asl.l	#5,d4
00006568 2204                       		move.l	d4,d1
0000656A E584                       		asl.l	#2,d4
0000656C D881                       		add.l	d1,d4
0000656E 7A00                         moveq	#0,d5
00006570 6100 0000                  		bsr.w	BGScroll_Block1
00006574 6100 0000                  		bsr.w	BGScroll_Block4  
00006578 43F8 CC00                  		lea	(v_hscrolltablebuffer).w,a1
0000657C 3038 F704                  		move.w	(v_screenposy).w,d0
00006580 0240 07FF                  		andi.w	#$7FF,d0
00006584 EA48                       		lsr.w	#5,d0
00006586 4440                       		neg.w	d0
00006588 0640 0026                  		addi.w	#$26,d0              
0000658C 31C0 F714                  		move.w	d0,(v_bg2screenposy).w
00006590 3800                       		move.w	d0,d4
00006592 6100 0000                  		bsr.w	BGScroll_Block3
00006596 31FC 000D F70C             		move.w #$D,($FFFFF70C).w
0000659C 31F8 F70C F618             		move.w	(v_bgscreenposy).w,(v_bgscrposy_dup).w
000065A2 43F8 CC00                  		lea	($FFFFCC00).w,a1	; load beginning address of horizontal scroll buffer to a1
000065A6                            
000065A6 3038 F700                  		move.w	($FFFFF700).w,d0	; load FG screen's X position
000065AA 4440                       		neg.w	d0			; negate (positive to negative)
000065AC 4840                       		swap	d0			; send to the left side of d0
000065AE 3038 F708                  		move.w	($FFFFF708).w,d0	; load BG screen's X position
000065B2 4440                       		neg.w	d0			; negate (positive to negative)
000065B4 E240                       		asr.w	#1,d0			; divide by 2 (Slow down the scroll position)
000065B6 323C 00A1                  		move.w	#162-1,d1		; set number of scan lines to dump (minus 1 for dbf)
000065BA                            GHZ_DeformLoop_1:
000065BA 22C0                       		move.l	d0,(a1)+		; dump both the FG and BG scanline position to buffer
000065BC 51C9 FFFC                  		dbf	d1,GHZ_DeformLoop_1	; repeat d1 number of scanlines
000065C0                            
000065C0 3038 F700                  		move.w	($FFFFF700).w,d0	; load FG screen's X position
000065C4 4440                       		neg.w	d0			; negate (positive to negative)
000065C6 4840                       		swap	d0			; send to the left side of d0
000065C8 3038 F708                  		move.w	($FFFFF708).w,d0	; load BG screen's X position
000065CC 4440                       		neg.w	d0			; negate (positive to negative)
000065CE                            	;	No Speed Change
000065CE 323C 003E                  		move.w	#63-1,d1		; set number of scan lines to dump (minus 1 for dbf)
000065D2                            GHZ_DeformLoop_2:
000065D2 22C0                       		move.l	d0,(a1)+		; dump both the FG and BG scanline position to buffer
000065D4 51C9 FFFC                  		dbf	d1,GHZ_DeformLoop_2	; repeat d1 number of scanlines
000065D8 4E75                       		rts
000065DA                            ; End of function Deform_GHZ
000065DA                            
000065DA                            Deform_GHZ:
000065DA                            	; block 3 - distant mountains
000065DA 3838 F73A                  		move.w	(v_scrshiftx).w,d4
000065DE 48C4                       		ext.l	d4
000065E0 EB84                       		asl.l	#5,d4
000065E2 2204                       		move.l	d4,d1
000065E4 E384                       		asl.l	#1,d4
000065E6 D881                       		add.l	d1,d4
000065E8 7C00                       		moveq	#0,d6
000065EA 6100 0000                  		bsr.w	BGScroll_Block3
000065EE                            	; block 2 - hills & waterfalls
000065EE 3838 F73A                  		move.w	(v_scrshiftx).w,d4
000065F2 48C4                       		ext.l	d4
000065F4 EF84                       		asl.l	#7,d4
000065F6 7C00                       		moveq	#0,d6
000065F8 6100 0000                  		bsr.w	BGScroll_Block2
000065FC                            	; calculate Y position
000065FC 43F8 CC00                  		lea	(v_hscrolltablebuffer).w,a1
00006600 3038 F704                  		move.w	(v_screenposy).w,d0
00006604 0240 07FF                  		andi.w	#$7FF,d0
00006608 EA48                       		lsr.w	#5,d0
0000660A 4440                       		neg.w	d0
0000660C 0640 0020                  		addi.w	#$20,d0
00006610 6A00                       		bpl.s	@limitY
00006612 7000                       		moveq	#0,d0
00006614                            	@limitY:
00006614 3800                       		move.w	d0,d4
00006616 31C0 F618                  		move.w	d0,(v_bgscrposy_dup).w
0000661A 3038 F700                  		move.w	(v_screenposx).w,d0
0000661E 0C38 0000 F600             		cmpi.b	#id_Title,(v_gamemode).w
00006624 6600                       		bne.s	@notTitle
00006626 7000                       		moveq	#0,d0	; reset foreground position in title screen
00006628                            	@notTitle:
00006628 4440                       		neg.w	d0
0000662A 4840                       		swap.w	d0
0000662C                            	; auto-scroll clouds
0000662C 45F8 A800                  		lea	(v_bgscroll_buffer).w,a2
00006630 069A 0001 0000             		addi.l	#$10000,(a2)+
00006636 069A 0000 C000             		addi.l	#$C000,(a2)+
0000663C 069A 0000 8000             		addi.l	#$8000,(a2)+
00006642                            	; calculate background scroll	
00006642 3038 A800                  		move.w	(v_bgscroll_buffer).w,d0
00006646 D078 F718                  		add.w	(v_bg3screenposx).w,d0
0000664A 4440                       		neg.w	d0
0000664C 323C 001F                  		move.w	#$1F,d1
00006650 9244                       		sub.w	d4,d1
00006652 6500                       		bcs.s	@gotoCloud2
00006654                            	@cloudLoop1:		; upper cloud (32px)
00006654 22C0                       		move.l	d0,(a1)+
00006656 51C9 FFFC                  		dbf	d1,@cloudLoop1
0000665A                            
0000665A                            	@gotoCloud2:
0000665A 3038 A804                  		move.w	(v_bgscroll_buffer+4).w,d0
0000665E D078 F718                  		add.w	(v_bg3screenposx).w,d0
00006662 4440                       		neg.w	d0
00006664 323C 000F                  		move.w	#$F,d1
00006668                            	@cloudLoop2:		; middle cloud (16px)
00006668 22C0                       		move.l	d0,(a1)+
0000666A 51C9 FFFC                  		dbf	d1,@cloudLoop2
0000666E                            
0000666E 3038 A808                  		move.w	(v_bgscroll_buffer+8).w,d0
00006672 D078 F718                  		add.w	(v_bg3screenposx).w,d0
00006676 4440                       		neg.w	d0
00006678 323C 000F                  		move.w	#$F,d1
0000667C                            	@cloudLoop3:		; lower cloud (16px)
0000667C 22C0                       		move.l	d0,(a1)+
0000667E 51C9 FFFC                  		dbf	d1,@cloudLoop3
00006682                            
00006682 323C 002F                  		move.w	#$2F,d1
00006686 3038 F718                  		move.w	(v_bg3screenposx).w,d0
0000668A 4440                       		neg.w	d0
0000668C                            	@mountainLoop:		; distant mountains (48px)
0000668C 22C0                       		move.l	d0,(a1)+
0000668E 51C9 FFFC                  		dbf	d1,@mountainLoop
00006692                            
00006692 323C 0027                  		move.w	#$27,d1
00006696 3038 F710                  		move.w	(v_bg2screenposx).w,d0
0000669A 4440                       		neg.w	d0
0000669C                            	@hillLoop:			; hills & waterfalls (40px)
0000669C 22C0                       		move.l	d0,(a1)+
0000669E 51C9 FFFC                  		dbf	d1,@hillLoop
000066A2                            
000066A2 3038 F710                  		move.w	(v_bg2screenposx).w,d0
000066A6 3438 F700                  		move.w	(v_screenposx).w,d2
000066AA 9440                       		sub.w	d0,d2
000066AC 48C2                       		ext.l	d2
000066AE E182                       		asl.l	#8,d2
000066B0 85FC 0068                  		divs.w	#$68,d2
000066B4 48C2                       		ext.l	d2
000066B6 E182                       		asl.l	#8,d2
000066B8 7600                       		moveq	#0,d3
000066BA 3600                       		move.w	d0,d3
000066BC 323C 0047                  		move.w	#$47,d1
000066C0 D244                       		add.w	d4,d1
000066C2                            	@waterLoop:			; water deformation
000066C2 3003                       		move.w	d3,d0
000066C4 4440                       		neg.w	d0
000066C6 22C0                       		move.l	d0,(a1)+
000066C8 4843                       		swap.w	d3
000066CA D682                       		add.l	d2,d3
000066CC 4843                       		swap.w	d3
000066CE 51C9 FFF2                  		dbf	d1,@waterLoop
000066D2 4E75                       		rts
000066D4                            ; End of function Deform_GHZ
000066D4                            
000066D4                            ; ---------------------------------------------------------------------------
000066D4                            ; Labyrinth Zone background layer deformation code
000066D4                            ; ---------------------------------------------------------------------------
000066D4                            
000066D4                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000066D4                            Deform_LZ:
000066D4 3838 F73A                  		move.w	(v_scrshiftx).w,d4
000066D8 48C4                       		ext.l	d4
000066DA EF84                       		asl.l	#7,d4
000066DC 3A38 F73C                  		move.w	(v_scrshifty).w,d5
000066E0 48C5                       		ext.l	d5
000066E2 EF85                       		asl.l	#7,d5
000066E4 6100 0000                  		bsr.w	BGScroll_Block1
000066E8 31FC 0000 F70C             		move.w #$0,($FFFFF70C).w
000066EE 31F8 F70C F618             		move.w	(v_bgscreenposy).w,(v_bgscrposy_dup).w
000066F4 43F8 CC00                  		lea	($FFFFCC00).w,a1	; load beginning address of horizontal scroll buffer to a1
000066F8                            
000066F8 3038 F700                  		move.w	($FFFFF700).w,d0	; load FG screen's X position
000066FC 4440                       		neg.w	d0			; negate (positive to negative)
000066FE 4840                       		swap	d0			; send to the left side of d0
00006700 3038 F708                  		move.w	($FFFFF708).w,d0	; load BG screen's X position
00006704 4440                       		neg.w	d0			; negate (positive to negative)
00006706 E240                       		asr.w	#1,d0			; divide by 2 (Slow down the scroll position)
00006708 323C 002F                  		move.w	#48-1,d1		; set number of scan lines to dump (minus 1 for dbf)
0000670C                            LZ_DeformLoop_1:
0000670C 22C0                       		move.l	d0,(a1)+		; dump both the FG and BG scanline position to buffer
0000670E 51C9 FFFC                  		dbf	d1,LZ_DeformLoop_1	; repeat d1 number of scanlines
00006712                            
00006712 3038 F700                  		move.w	($FFFFF700).w,d0	; load FG screen's X position
00006716 4440                       		neg.w	d0			; negate (positive to negative)
00006718 4840                       		swap	d0			; send to the left side of d0
0000671A 3038 F708                  		move.w	($FFFFF708).w,d0	; load BG screen's X position
0000671E 4440                       		neg.w	d0			; negate (positive to negative)
00006720 E440                       		asr.w	#2,d0			; divide by 4 (Slow down the scroll position)
00006722 323C 0017                  		move.w	#24-1,d1		; set number of scan lines to dump (minus 1 for dbf)
00006726                            LZ_DeformLoop_2:
00006726 22C0                       		move.l	d0,(a1)+		; dump both the FG and BG scanline position to buffer
00006728 51C9 FFFC                  		dbf	d1,LZ_DeformLoop_2	; repeat d1 number of scanlines
0000672C                            
0000672C 3038 F700                  		move.w	($FFFFF700).w,d0	; load FG screen's X position
00006730 4440                       		neg.w	d0			; negate (positive to negative)
00006732 4840                       		swap	d0			; send to the left side of d0
00006734 3038 F708                  		move.w	($FFFFF708).w,d0	; load BG screen's X position
00006738 4440                       		neg.w	d0			; negate (positive to negative)
0000673A E640                       		asr.w	#3,d0			; divide by 8 (Slow down the scroll position)
0000673C 323C 0007                  		move.w	#8-1,d1		; set number of scan lines to dump (minus 1 for dbf)
00006740                            LZ_DeformLoop_3:
00006740 22C0                       		move.l	d0,(a1)+		; dump both the FG and BG scanline position to buffer
00006742 51C9 FFFC                  		dbf	d1,LZ_DeformLoop_3	; repeat d1 number of scanlines
00006746                            
00006746 3038 F700                  		move.w	($FFFFF700).w,d0	; load FG screen's X position
0000674A 4440                       		neg.w	d0			; negate (positive to negative)
0000674C 4840                       		swap	d0			; send to the left side of d0
0000674E 3038 F708                  		move.w	($FFFFF708).w,d0	; load BG screen's X position
00006752 4440                       		neg.w	d0			; negate (positive to negative)
00006754 E840                       		asr.w	#4,d0			; divide by 16 (Slow down the scroll position)
00006756 323C 003F                  		move.w	#64-1,d1		; set number of scan lines to dump (minus 1 for dbf)
0000675A                            LZ_DeformLoop_4:
0000675A 22C0                       		move.l	d0,(a1)+		; dump both the FG and BG scanline position to buffer
0000675C 51C9 FFFC                  		dbf	d1,LZ_DeformLoop_4	; repeat d1 number of scanlines
00006760                            
00006760 3038 F700                  		move.w	($FFFFF700).w,d0	; load FG screen's X position
00006764 4440                       		neg.w	d0			; negate (positive to negative)
00006766 4840                       		swap	d0			; send to the left side of d0
00006768 3038 F708                  		move.w	($FFFFF708).w,d0	; load BG screen's X position
0000676C 4440                       		neg.w	d0			; negate (positive to negative)
0000676E E640                       		asr.w	#3,d0			; divide by 8 (Slow down the scroll position)
00006770 323C 0007                  		move.w	#8-1,d1		; set number of scan lines to dump (minus 1 for dbf)
00006774                            LZ_DeformLoop_5:
00006774 22C0                       		move.l	d0,(a1)+		; dump both the FG and BG scanline position to buffer
00006776 51C9 FFFC                  		dbf	d1,LZ_DeformLoop_5	; repeat d1 number of scanlines
0000677A                            
0000677A 3038 F700                  		move.w	($FFFFF700).w,d0	; load FG screen's X position
0000677E 4440                       		neg.w	d0			; negate (positive to negative)
00006780 4840                       		swap	d0			; send to the left side of d0
00006782 3038 F708                  		move.w	($FFFFF708).w,d0	; load BG screen's X position
00006786 4440                       		neg.w	d0			; negate (positive to negative)
00006788 E440                       		asr.w	#2,d0			; divide by 4 (Slow down the scroll position)
0000678A 323C 0017                  		move.w	#24-1,d1		; set number of scan lines to dump (minus 1 for dbf)
0000678E                            LZ_DeformLoop_6:
0000678E 22C0                       		move.l	d0,(a1)+		; dump both the FG and BG scanline position to buffer
00006790 51C9 FFFC                  		dbf	d1,LZ_DeformLoop_6	; repeat d1 number of scanlines
00006794                            
00006794 3038 F700                  		move.w	($FFFFF700).w,d0	; load FG screen's X position
00006798 4440                       		neg.w	d0			; negate (positive to negative)
0000679A 4840                       		swap	d0			; send to the left side of d0
0000679C 3038 F708                  		move.w	($FFFFF708).w,d0	; load BG screen's X position
000067A0 4440                       		neg.w	d0			; negate (positive to negative)
000067A2 E240                       		asr.w	#1,d0			; divide by 2 (Slow down the scroll position)
000067A4 323C 0035                  		move.w	#54-1,d1		; set number of scan lines to dump (minus 1 for dbf)
000067A8                            LZ_DeformLoop_7:
000067A8 22C0                       		move.l	d0,(a1)+		; dump both the FG and BG scanline position to buffer
000067AA 51C9 FFFC                  		dbf	d1,LZ_DeformLoop_7	; repeat d1 number of scanlines
000067AE                            
000067AE                            ; ---------------------------------------------------------------------------
000067AE                            ; Marble Zone background layer deformation code
000067AE                            ; ---------------------------------------------------------------------------
000067AE                            
000067AE                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000067AE                            
000067AE                            
000067AE                            Deform_MZ:
000067AE                            	; block 1 - dungeon interior
000067AE 3838 F73A                  		move.w	(v_scrshiftx).w,d4
000067B2 48C4                       		ext.l	d4
000067B4 ED84                       		asl.l	#6,d4
000067B6 2204                       		move.l	d4,d1
000067B8 E384                       		asl.l	#1,d4
000067BA D881                       		add.l	d1,d4
000067BC 7C02                       		moveq	#2,d6
000067BE 6100 0000                  		bsr.w	BGScroll_Block1
000067C2                            	; block 3 - mountains
000067C2 3838 F73A                  		move.w	(v_scrshiftx).w,d4
000067C6 48C4                       		ext.l	d4
000067C8 ED84                       		asl.l	#6,d4
000067CA 7C06                       		moveq	#6,d6
000067CC 6100 0000                  		bsr.w	BGScroll_Block3
000067D0                            	; block 2 - bushes & antique buildings
000067D0 3838 F73A                  		move.w	(v_scrshiftx).w,d4
000067D4 48C4                       		ext.l	d4
000067D6 EF84                       		asl.l	#7,d4
000067D8 7C04                       		moveq	#4,d6
000067DA 6100 0000                  		bsr.w	BGScroll_Block2
000067DE                            	; calculate y-position of background
000067DE 303C 0200                  		move.w	#$200,d0	; start with 512px, ignoring 2 chunks
000067E2 3238 F704                  		move.w	(v_screenposy).w,d1
000067E6 0441 01C8                  		subi.w	#$1C8,d1	; 0% scrolling when y <= 56px 
000067EA 6500                       		bcs.s	@noYscroll
000067EC 3401                       		move.w	d1,d2
000067EE D241                       		add.w	d1,d1
000067F0 D242                       		add.w	d2,d1
000067F2 E441                       		asr.w	#2,d1
000067F4 D041                       		add.w	d1,d0
000067F6                            	@noYscroll:
000067F6 31C0 F714                  		move.w	d0,(v_bg2screenposy).w
000067FA 31C0 F71C                  		move.w	d0,(v_bg3screenposy).w
000067FE 6100 0000                  		bsr.w	BGScroll_YAbsolute
00006802 31F8 F70C F618             		move.w	(v_bgscreenposy).w,(v_bgscrposy_dup).w
00006808                            	; do something with redraw flags
00006808 1038 F756                  		move.b	(v_bg1_scroll_flags).w,d0
0000680C 8038 F758                  		or.b	(v_bg2_scroll_flags).w,d0
00006810 8138 F75A                  		or.b	d0,(v_bg3_scroll_flags).w
00006814 4238 F756                  		clr.b	(v_bg1_scroll_flags).w
00006818 4238 F758                  		clr.b	(v_bg2_scroll_flags).w
0000681C                            	; calculate background scroll buffer
0000681C 43F8 A800                  		lea	(v_bgscroll_buffer).w,a1
00006820 3438 F700                  		move.w	(v_screenposx).w,d2
00006824 4442                       		neg.w	d2
00006826 3002                       		move.w	d2,d0
00006828 E440                       		asr.w	#2,d0
0000682A 9042                       		sub.w	d2,d0
0000682C 48C0                       		ext.l	d0
0000682E E780                       		asl.l	#3,d0
00006830 81FC 0005                  		divs.w	#5,d0
00006834 48C0                       		ext.l	d0
00006836 E980                       		asl.l	#4,d0
00006838 E180                       		asl.l	#8,d0
0000683A 7600                       		moveq	#0,d3
0000683C 3602                       		move.w	d2,d3
0000683E E243                       		asr.w	#1,d3
00006840 323C 0004                  		move.w	#4,d1
00006844                            	@cloudLoop:		
00006844 32C3                       		move.w	d3,(a1)+
00006846 4843                       		swap.w	d3
00006848 D680                       		add.l	d0,d3
0000684A 4843                       		swap.w	d3
0000684C 51C9 FFF6                  		dbf	d1,@cloudLoop
00006850                            
00006850 3038 F718                  		move.w	(v_bg3screenposx).w,d0
00006854 4440                       		neg.w	d0
00006856 323C 0001                  		move.w	#1,d1
0000685A                            	@mountainLoop:		
0000685A 32C0                       		move.w	d0,(a1)+
0000685C 51C9 FFFC                  		dbf	d1,@mountainLoop
00006860                            
00006860 3038 F710                  		move.w	(v_bg2screenposx).w,d0
00006864 4440                       		neg.w	d0
00006866 323C 0008                  		move.w	#8,d1
0000686A                            	@bushLoop:		
0000686A 32C0                       		move.w	d0,(a1)+
0000686C 51C9 FFFC                  		dbf	d1,@bushLoop
00006870                            
00006870 3038 F708                  		move.w	(v_bgscreenposx).w,d0
00006874 4440                       		neg.w	d0
00006876 323C 000F                  		move.w	#$F,d1
0000687A                            	@interiorLoop:		
0000687A 32C0                       		move.w	d0,(a1)+
0000687C 51C9 FFFC                  		dbf	d1,@interiorLoop
00006880                            
00006880 45F8 A800                  		lea	(v_bgscroll_buffer).w,a2
00006884 3038 F70C                  		move.w	(v_bgscreenposy).w,d0
00006888 0440 0200                  		subi.w	#$200,d0	; subtract 512px (unused 2 chunks)
0000688C 3400                       		move.w	d0,d2
0000688E 0C40 0100                  		cmpi.w	#$100,d0
00006892 6500                       		bcs.s	@limitY
00006894 303C 0100                  		move.w	#$100,d0
00006898                            	@limitY:
00006898 0240 01F0                  		andi.w	#$1F0,d0
0000689C E648                       		lsr.w	#3,d0
0000689E 45F2 0000                  		lea	(a2,d0),a2
000068A2 6000 0000                  		bra.w	Bg_Scroll_X
000068A6                            ; End of function Deform_MZ
000068A6                            
000068A6                            ; ---------------------------------------------------------------------------
000068A6                            ; Star Light Zone background layer deformation code
000068A6                            ; ---------------------------------------------------------------------------
000068A6                            
000068A6                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000068A6                            
000068A6                            
000068A6                            Deform_SLZ:
000068A6                            	; vertical scrolling
000068A6 3A38 F73C                  		move.w	(v_scrshifty).w,d5
000068AA 48C5                       		ext.l	d5
000068AC EF85                       		asl.l	#7,d5
000068AE 6100 0000                  		bsr.w	Bg_Scroll_Y
000068B2 31F8 F70C F618             		move.w	(v_bgscreenposy).w,(v_bgscrposy_dup).w
000068B8                            	; calculate background scroll buffer
000068B8 43F8 A800                  		lea	(v_bgscroll_buffer).w,a1
000068BC 3438 F700                  		move.w	(v_screenposx).w,d2
000068C0 4442                       		neg.w	d2
000068C2 3002                       		move.w	d2,d0
000068C4 E640                       		asr.w	#3,d0
000068C6 9042                       		sub.w	d2,d0
000068C8 48C0                       		ext.l	d0
000068CA E980                       		asl.l	#4,d0
000068CC 81FC 001C                  		divs.w	#$1C,d0
000068D0 48C0                       		ext.l	d0
000068D2 E980                       		asl.l	#4,d0
000068D4 E180                       		asl.l	#8,d0
000068D6 7600                       		moveq	#0,d3
000068D8 3602                       		move.w	d2,d3
000068DA 323C 001B                  		move.w	#$1B,d1
000068DE                            	@starLoop:		
000068DE 32C3                       		move.w	d3,(a1)+
000068E0 4843                       		swap.w	d3
000068E2 D680                       		add.l	d0,d3
000068E4 4843                       		swap.w	d3
000068E6 51C9 FFF6                  		dbf	d1,@starLoop
000068EA                            
000068EA 3002                       		move.w	d2,d0
000068EC E640                       		asr.w	#3,d0
000068EE 3200                       		move.w	d0,d1
000068F0 E241                       		asr.w	#1,d1
000068F2 D041                       		add.w	d1,d0
000068F4 323C 0004                  		move.w	#4,d1
000068F8                            	@buildingLoop1:		; distant black buildings
000068F8 32C0                       		move.w	d0,(a1)+
000068FA 51C9 FFFC                  		dbf	d1,@buildingLoop1
000068FE                            
000068FE 3002                       		move.w	d2,d0
00006900 E440                       		asr.w	#2,d0
00006902 323C 0004                  		move.w	#4,d1
00006906                            	@buildingLoop2:		; closer buildings
00006906 32C0                       		move.w	d0,(a1)+
00006908 51C9 FFFC                  		dbf	d1,@buildingLoop2
0000690C                            
0000690C 3002                       		move.w	d2,d0
0000690E E240                       		asr.w	#1,d0
00006910 323C 001D                  		move.w	#$1D,d1
00006914                            	@bottomLoop:		; bottom part of background
00006914 32C0                       		move.w	d0,(a1)+
00006916 51C9 FFFC                  		dbf	d1,@bottomLoop
0000691A                            
0000691A 45F8 A800                  		lea	(v_bgscroll_buffer).w,a2
0000691E 3038 F70C                  		move.w	(v_bgscreenposy).w,d0
00006922 3400                       		move.w	d0,d2
00006924 0440 00C0                  		subi.w	#$C0,d0
00006928 0240 03F0                  		andi.w	#$3F0,d0
0000692C E648                       		lsr.w	#3,d0
0000692E 45F2 0000                  		lea	(a2,d0),a2
00006932                            ;-------------------------------------------------------------------------------
00006932                            ;-------------------------------------------------------------------------------
00006932                            Bg_Scroll_X:
00006932 43F8 CC00                  		lea	(v_hscrolltablebuffer).w,a1
00006936 323C 000E                  		move.w	#$E,d1
0000693A 3038 F700                  		move.w	(v_screenposx).w,d0
0000693E 4440                       		neg.w	d0
00006940 4840                       		swap.w	d0
00006942 0242 000F                  		andi.w	#$F,d2
00006946 D442                       		add.w	d2,d2
00006948 301A                       		move.w	(a2)+,d0
0000694A 4EFB 2000                  		jmp	@pixelJump(pc,d2.w)		; skip pixels for first row
0000694E                            	@blockLoop:
0000694E 301A                       		move.w	(a2)+,d0
00006950                            	@pixelJump:		
00006950 22C0                       		move.l	d0,(a1)+
00006952 22C0                       		move.l	d0,(a1)+
00006954 22C0                       		move.l	d0,(a1)+
00006956 22C0                       		move.l	d0,(a1)+
00006958 22C0                       		move.l	d0,(a1)+
0000695A 22C0                       		move.l	d0,(a1)+
0000695C 22C0                       		move.l	d0,(a1)+
0000695E 22C0                       		move.l	d0,(a1)+
00006960 22C0                       		move.l	d0,(a1)+
00006962 22C0                       		move.l	d0,(a1)+
00006964 22C0                       		move.l	d0,(a1)+
00006966 22C0                       		move.l	d0,(a1)+
00006968 22C0                       		move.l	d0,(a1)+
0000696A 22C0                       		move.l	d0,(a1)+
0000696C 22C0                       		move.l	d0,(a1)+
0000696E 22C0                       		move.l	d0,(a1)+
00006970 51C9 FFDC                  		dbf	d1,@blockLoop
00006974 4E75                       		rts
00006976                            
00006976                            ; ---------------------------------------------------------------------------
00006976                            ; Spring Yard Zone background layer deformation	code
00006976                            ; ---------------------------------------------------------------------------
00006976                            
00006976                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00006976                            
00006976                            
00006976                            Deform_SYZ:
00006976                            	; vertical scrolling
00006976 3A38 F73C                  		move.w	(v_scrshifty).w,d5
0000697A 48C5                       		ext.l	d5
0000697C E985                       		asl.l	#4,d5
0000697E 2205                       		move.l	d5,d1
00006980 E385                       		asl.l	#1,d5
00006982 DA81                       		add.l	d1,d5
00006984 6100 0000                  		bsr.w	Bg_Scroll_Y
00006988 31F8 F70C F618             		move.w	(v_bgscreenposy).w,(v_bgscrposy_dup).w
0000698E                            	; calculate background scroll buffer
0000698E 43F8 A800                  		lea	(v_bgscroll_buffer).w,a1
00006992 3438 F700                  		move.w	(v_screenposx).w,d2
00006996 4442                       		neg.w	d2
00006998 3002                       		move.w	d2,d0
0000699A E640                       		asr.w	#3,d0
0000699C 9042                       		sub.w	d2,d0
0000699E 48C0                       		ext.l	d0
000069A0 E780                       		asl.l	#3,d0
000069A2 81FC 0008                  		divs.w	#8,d0
000069A6 48C0                       		ext.l	d0
000069A8 E980                       		asl.l	#4,d0
000069AA E180                       		asl.l	#8,d0
000069AC 7600                       		moveq	#0,d3
000069AE 3602                       		move.w	d2,d3
000069B0 E243                       		asr.w	#1,d3
000069B2 323C 0007                  		move.w	#7,d1
000069B6                            	@cloudLoop:		
000069B6 32C3                       		move.w	d3,(a1)+
000069B8 4843                       		swap.w	d3
000069BA D680                       		add.l	d0,d3
000069BC 4843                       		swap.w	d3
000069BE 51C9 FFF6                  		dbf	d1,@cloudLoop
000069C2                            
000069C2 3002                       		move.w	d2,d0
000069C4 E640                       		asr.w	#3,d0
000069C6 323C 0004                  		move.w	#4,d1
000069CA                            	@mountainLoop:		
000069CA 32C0                       		move.w	d0,(a1)+
000069CC 51C9 FFFC                  		dbf	d1,@mountainLoop
000069D0                            
000069D0 3002                       		move.w	d2,d0
000069D2 E440                       		asr.w	#2,d0
000069D4 323C 0005                  		move.w	#5,d1
000069D8                            	@buildingLoop:		
000069D8 32C0                       		move.w	d0,(a1)+
000069DA 51C9 FFFC                  		dbf	d1,@buildingLoop
000069DE                            
000069DE 3002                       		move.w	d2,d0
000069E0 3202                       		move.w	d2,d1
000069E2 E241                       		asr.w	#1,d1
000069E4 9041                       		sub.w	d1,d0
000069E6 48C0                       		ext.l	d0
000069E8 E980                       		asl.l	#4,d0
000069EA 81FC 000E                  		divs.w	#$E,d0
000069EE 48C0                       		ext.l	d0
000069F0 E980                       		asl.l	#4,d0
000069F2 E180                       		asl.l	#8,d0
000069F4 7600                       		moveq	#0,d3
000069F6 3602                       		move.w	d2,d3
000069F8 E243                       		asr.w	#1,d3
000069FA 323C 000D                  		move.w	#$D,d1
000069FE                            	@bushLoop:		
000069FE 32C3                       		move.w	d3,(a1)+
00006A00 4843                       		swap.w	d3
00006A02 D680                       		add.l	d0,d3
00006A04 4843                       		swap.w	d3
00006A06 51C9 FFF6                  		dbf	d1,@bushLoop
00006A0A                            
00006A0A 45F8 A800                  		lea	(v_bgscroll_buffer).w,a2
00006A0E 3038 F70C                  		move.w	(v_bgscreenposy).w,d0
00006A12 3400                       		move.w	d0,d2
00006A14 0240 01F0                  		andi.w	#$1F0,d0
00006A18 E648                       		lsr.w	#3,d0
00006A1A 45F2 0000                  		lea	(a2,d0),a2
00006A1E 6000 FF12                  		bra.w	Bg_Scroll_X
00006A22                            ; End of function Deform_SYZ
00006A22                            
00006A22                            ; ---------------------------------------------------------------------------
00006A22                            ; Scrap	Brain Zone background layer deformation	code
00006A22                            ; ---------------------------------------------------------------------------
00006A22                            
00006A22                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00006A22                            
00006A22                            
00006A22                            Deform_SBZ:
00006A22 4A38 FE11                  		tst.b	(v_act).w
00006A26 6600 0000                  		bne.w	Deform_SBZ2
00006A2A                            	; block 1 - lower black buildings
00006A2A 3838 F73A                  		move.w	(v_scrshiftx).w,d4
00006A2E 48C4                       		ext.l	d4
00006A30 EF84                       		asl.l	#7,d4
00006A32 7C02                       		moveq	#2,d6
00006A34 6100 0000                  		bsr.w	BGScroll_Block1
00006A38                            	; block 3 - distant brown buildings
00006A38 3838 F73A                  		move.w	(v_scrshiftx).w,d4
00006A3C 48C4                       		ext.l	d4
00006A3E ED84                       		asl.l	#6,d4
00006A40 7C06                       		moveq	#6,d6
00006A42 6100 0000                  		bsr.w	BGScroll_Block3
00006A46                            	; block 2 - upper black buildings
00006A46 3838 F73A                  		move.w	(v_scrshiftx).w,d4
00006A4A 48C4                       		ext.l	d4
00006A4C EB84                       		asl.l	#5,d4
00006A4E 2204                       		move.l	d4,d1
00006A50 E384                       		asl.l	#1,d4
00006A52 D881                       		add.l	d1,d4
00006A54 7C04                       		moveq	#4,d6
00006A56 6100 0000                  		bsr.w	BGScroll_Block2
00006A5A                            	; vertical scrolling
00006A5A 7800                       		moveq	#0,d4
00006A5C 3A38 F73C                  		move.w	(v_scrshifty).w,d5
00006A60 48C5                       		ext.l	d5
00006A62 EB85                       		asl.l	#5,d5
00006A64 6100 0000                  		bsr.w	BGScroll_YRelative
00006A68                            
00006A68 3038 F70C                  		move.w	(v_bgscreenposy).w,d0
00006A6C 31C0 F714                  		move.w	d0,(v_bg2screenposy).w
00006A70 31C0 F71C                  		move.w	d0,(v_bg3screenposy).w
00006A74 31C0 F618                  		move.w	d0,(v_bgscrposy_dup).w
00006A78 1038 F756                  		move.b	(v_bg1_scroll_flags).w,d0
00006A7C 8038 F75A                  		or.b	(v_bg3_scroll_flags).w,d0
00006A80 8138 F758                  		or.b	d0,(v_bg2_scroll_flags).w
00006A84 4238 F756                  		clr.b	(v_bg1_scroll_flags).w
00006A88 4238 F75A                  		clr.b	(v_bg3_scroll_flags).w
00006A8C                            	; calculate background scroll buffer
00006A8C 43F8 A800                  		lea	(v_bgscroll_buffer).w,a1
00006A90 3438 F700                  		move.w	(v_screenposx).w,d2
00006A94 4442                       		neg.w	d2
00006A96 E442                       		asr.w	#2,d2
00006A98 3002                       		move.w	d2,d0
00006A9A E240                       		asr.w	#1,d0
00006A9C 9042                       		sub.w	d2,d0
00006A9E 48C0                       		ext.l	d0
00006AA0 E780                       		asl.l	#3,d0
00006AA2 81FC 0004                  		divs.w	#4,d0
00006AA6 48C0                       		ext.l	d0
00006AA8 E980                       		asl.l	#4,d0
00006AAA E180                       		asl.l	#8,d0
00006AAC 7600                       		moveq	#0,d3
00006AAE 3602                       		move.w	d2,d3
00006AB0 323C 0003                  		move.w	#3,d1
00006AB4                            	@cloudLoop:		
00006AB4 32C3                       		move.w	d3,(a1)+
00006AB6 4843                       		swap.w	d3
00006AB8 D680                       		add.l	d0,d3
00006ABA 4843                       		swap.w	d3
00006ABC 51C9 FFF6                  		dbf	d1,@cloudLoop
00006AC0                            
00006AC0 3038 F718                  		move.w	(v_bg3screenposx).w,d0
00006AC4 4440                       		neg.w	d0
00006AC6 323C 0009                  		move.w	#9,d1
00006ACA                            	@buildingLoop1:		; distant brown buildings
00006ACA 32C0                       		move.w	d0,(a1)+
00006ACC 51C9 FFFC                  		dbf	d1,@buildingLoop1
00006AD0                            
00006AD0 3038 F710                  		move.w	(v_bg2screenposx).w,d0
00006AD4 4440                       		neg.w	d0
00006AD6 323C 0006                  		move.w	#6,d1
00006ADA                            	@buildingLoop2:		; upper black buildings
00006ADA 32C0                       		move.w	d0,(a1)+
00006ADC 51C9 FFFC                  		dbf	d1,@buildingLoop2
00006AE0                            
00006AE0 3038 F708                  		move.w	(v_bgscreenposx).w,d0
00006AE4 4440                       		neg.w	d0
00006AE6 323C 000A                  		move.w	#$A,d1
00006AEA                            	@buildingLoop3:		; lower black buildings
00006AEA 32C0                       		move.w	d0,(a1)+
00006AEC 51C9 FFFC                  		dbf	d1,@buildingLoop3
00006AF0 45F8 A800                  		lea	(v_bgscroll_buffer).w,a2
00006AF4 3038 F70C                  		move.w	(v_bgscreenposy).w,d0
00006AF8 3400                       		move.w	d0,d2
00006AFA 0240 01F0                  		andi.w	#$1F0,d0
00006AFE E648                       		lsr.w	#3,d0
00006B00 45F2 0000                  		lea	(a2,d0),a2
00006B04 6000 FE2C                  		bra.w	Bg_Scroll_X
00006B08                            ;-------------------------------------------------------------------------------
00006B08                            Deform_SBZ2:;loc_68A2:
00006B08                            	; plain background deformation
00006B08 3838 F73A                  		move.w	(v_scrshiftx).w,d4
00006B0C 48C4                       		ext.l	d4		
00006B0E ED84                       		asl.l	#6,d4
00006B10 3A38 F73C                  		move.w	(v_scrshifty).w,d5
00006B14 48C5                       		ext.l	d5
00006B16 EB85                       		asl.l	#5,d5
00006B18 6100 0000                  		bsr.w	BGScroll_XY
00006B1C 31F8 F70C F618             		move.w	(v_bgscreenposy).w,(v_bgscrposy_dup).w
00006B22                            	; copy fg & bg x-position to hscroll table
00006B22 43F8 CC00                  		lea	(v_hscrolltablebuffer).w,a1
00006B26 323C 00DF                  		move.w	#223,d1
00006B2A 3038 F700                  		move.w	(v_screenposx).w,d0
00006B2E 4440                       		neg.w	d0
00006B30 4840                       		swap.w	d0
00006B32 3038 F708                  		move.w	(v_bgscreenposx).w,d0
00006B36 4440                       		neg.w	d0
00006B38                            	@loop:		
00006B38 22C0                       		move.l	d0,(a1)+
00006B3A 51C9 FFFC                  		dbf	d1,@loop
00006B3E 4E75                       		rts
00006B40                            ; End of function Deform_SBZ
00006B40                            
00006B40                            ; ---------------------------------------------------------------------------
00006B40                            ; Subroutine to	scroll the level horizontally as Sonic moves
00006B40                            ; ---------------------------------------------------------------------------
00006B40                            
00006B40                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00006B40                            
00006B40                            
00006B40                            ScrollHoriz:
00006B40 3838 F700                  		move.w	(v_screenposx).w,d4 ; save old screen position
00006B44 6100                       		bsr.s	MoveScreenHoriz
00006B46 3038 F700                  		move.w	(v_screenposx).w,d0
00006B4A 0240 0010                  		andi.w	#$10,d0
00006B4E 1238 F74A                  		move.b	(v_fg_xblock).w,d1
00006B52 B300                       		eor.b	d1,d0
00006B54 6600                       		bne.s	@return
00006B56 0A38 0010 F74A             		eori.b	#$10,(v_fg_xblock).w
00006B5C 3038 F700                  		move.w	(v_screenposx).w,d0
00006B60 9044                       		sub.w	d4,d0		; compare new with old screen position
00006B62 6A00                       		bpl.s	@scrollRight
00006B64                            
00006B64 08F8 0002 F754             		bset	#2,(v_fg_scroll_flags).w ; screen moves backward
00006B6A 4E75                       		rts	
00006B6C                            
00006B6C                            	@scrollRight:
00006B6C 08F8 0003 F754             		bset	#3,(v_fg_scroll_flags).w ; screen moves forward
00006B72                            
00006B72                            	@return:
00006B72 4E75                       		rts	
00006B74                            ; End of function ScrollHoriz
00006B74                            
00006B74                            
00006B74                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00006B74                            
00006B74                            
00006B74                            MoveScreenHoriz:
00006B74 3038 D008                  		move.w	(v_player+obX).w,d0
00006B78 9078 F700                  		sub.w	(v_screenposx).w,d0 ; Sonic's distance from left edge of screen
00006B7C 0440 0090                  		subi.w	#144,d0		; is distance less than 144px?
00006B80 6500                       		bcs.s	SH_BehindMid	; if yes, branch
00006B82 0440 0010                  		subi.w	#16,d0		; is distance more than 160px?
00006B86 6400                       		bcc.s	SH_AheadOfMid	; if yes, branch
00006B88 4278 F73A                  		clr.w	(v_scrshiftx).w
00006B8C 4E75                       		rts	
00006B8E                            ; ===========================================================================
00006B8E                            
00006B8E                            SH_AheadOfMid:
00006B8E 0C40 0010                  		cmpi.w	#16,d0		; is Sonic within 16px of middle area?
00006B92 6500                       		bcs.s	SH_Ahead16	; if yes, branch
00006B94 303C 0010                  		move.w	#16,d0		; set to 16 if greater
00006B98                            
00006B98                            	SH_Ahead16:
00006B98 D078 F700                  		add.w	(v_screenposx).w,d0
00006B9C B078 F72A                  		cmp.w	(v_limitright2).w,d0
00006BA0 6D00                       		blt.s	SH_SetScreen
00006BA2 3038 F72A                  		move.w	(v_limitright2).w,d0
00006BA6                            
00006BA6                            SH_SetScreen:
00006BA6 3200                       		move.w	d0,d1
00006BA8 9278 F700                  		sub.w	(v_screenposx).w,d1
00006BAC E141                       		asl.w	#8,d1
00006BAE 31C0 F700                  		move.w	d0,(v_screenposx).w ; set new screen position
00006BB2 31C1 F73A                  		move.w	d1,(v_scrshiftx).w ; set distance for screen movement
00006BB6 4E75                       		rts	
00006BB8                            ; ===========================================================================
00006BB8                            
00006BB8                            SH_BehindMid:
00006BB8 D078 F700                  		add.w	(v_screenposx).w,d0
00006BBC B078 F728                  		cmp.w	(v_limitleft2).w,d0
00006BC0 6EE4                       		bgt.s	SH_SetScreen
00006BC2 3038 F728                  		move.w	(v_limitleft2).w,d0
00006BC6 60DE                       		bra.s	SH_SetScreen
00006BC8                            ; End of function MoveScreenHoriz
00006BC8                            
00006BC8                            ; ===========================================================================
00006BC8 4A40                       		tst.w	d0
00006BCA 6A00                       		bpl.s	loc_6610
00006BCC 303C FFFE                  		move.w	#-2,d0
00006BD0 60E6                       		bra.s	SH_BehindMid
00006BD2                            
00006BD2                            loc_6610:
00006BD2 303C 0002                  		move.w	#2,d0
00006BD6 60B6                       		bra.s	SH_AheadOfMid
00006BD8                            
00006BD8                            ; ---------------------------------------------------------------------------
00006BD8                            ; Subroutine to	scroll the level vertically as Sonic moves
00006BD8                            ; ---------------------------------------------------------------------------
00006BD8                            
00006BD8                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00006BD8                            
00006BD8                            
00006BD8                            ScrollVertical:
00006BD8 7200                       		moveq	#0,d1
00006BDA 3038 D00C                  		move.w	(v_player+obY).w,d0
00006BDE 9078 F704                  		sub.w	(v_screenposy).w,d0 ; Sonic's distance from top of screen
00006BE2 0838 0002 D022             		btst	#2,(v_player+obStatus).w ; is Sonic rolling?
00006BE8 6700                       		beq.s	SV_NotRolling	; if not, branch
00006BEA 5B40                       		subq.w	#5,d0
00006BEC                            
00006BEC                            	SV_NotRolling:
00006BEC 0838 0001 D022             		btst	#1,(v_player+obStatus).w ; is Sonic jumping?
00006BF2 6700                       		beq.s	loc_664A	; if not, branch
00006BF4                            
00006BF4 0640 0020                  		addi.w	#32,d0
00006BF8 9078 F73E                  		sub.w	(v_lookshift).w,d0
00006BFC 6500                       		bcs.s	loc_6696
00006BFE 0440 0040                  		subi.w	#64,d0
00006C02 6400                       		bcc.s	loc_6696
00006C04 4A38 F75C                  		tst.b	(f_bgscrollvert).w
00006C08 6600                       		bne.s	loc_66A8
00006C0A 6000                       		bra.s	loc_6656
00006C0C                            ; ===========================================================================
00006C0C                            
00006C0C                            loc_664A:
00006C0C 9078 F73E                  		sub.w	(v_lookshift).w,d0
00006C10 6600                       		bne.s	loc_665C
00006C12 4A38 F75C                  		tst.b	(f_bgscrollvert).w
00006C16 6600                       		bne.s	loc_66A8
00006C18                            
00006C18                            loc_6656:
00006C18 4278 F73C                  		clr.w	(v_scrshifty).w
00006C1C 4E75                       		rts	
00006C1E                            ; ===========================================================================
00006C1E                            
00006C1E                            loc_665C:
00006C1E 0C78 0060 F73E             		cmpi.w	#$60,(v_lookshift).w
00006C24 6600                       		bne.s	loc_6684
00006C26 3238 D014                  		move.w	(v_player+obInertia).w,d1
00006C2A 6A00                       		bpl.s	loc_666C
00006C2C 4441                       		neg.w	d1
00006C2E                            
00006C2E                            loc_666C:
00006C2E 0C41 0800                  		cmpi.w	#$800,d1
00006C32 6400                       		bcc.s	loc_6696
00006C34 323C 0600                  		move.w	#$600,d1
00006C38 0C40 0006                  		cmpi.w	#6,d0
00006C3C 6E00                       		bgt.s	loc_66F6
00006C3E 0C40 FFFA                  		cmpi.w	#-6,d0
00006C42 6D00                       		blt.s	loc_66C0
00006C44 6000                       		bra.s	loc_66AE
00006C46                            ; ===========================================================================
00006C46                            
00006C46                            loc_6684:
00006C46 323C 0200                  		move.w	#$200,d1
00006C4A 0C40 0002                  		cmpi.w	#2,d0
00006C4E 6E00                       		bgt.s	loc_66F6
00006C50 0C40 FFFE                  		cmpi.w	#-2,d0
00006C54 6D00                       		blt.s	loc_66C0
00006C56 6000                       		bra.s	loc_66AE
00006C58                            ; ===========================================================================
00006C58                            
00006C58                            loc_6696:
00006C58 323C 1000                  		move.w	#$1000,d1
00006C5C 0C40 0010                  		cmpi.w	#$10,d0
00006C60 6E00                       		bgt.s	loc_66F6
00006C62 0C40 FFF0                  		cmpi.w	#-$10,d0
00006C66 6D00                       		blt.s	loc_66C0
00006C68 6000                       		bra.s	loc_66AE
00006C6A                            ; ===========================================================================
00006C6A                            
00006C6A                            loc_66A8:
00006C6A 7000                       		moveq	#0,d0
00006C6C 11C0 F75C                  		move.b	d0,(f_bgscrollvert).w
00006C70                            
00006C70                            loc_66AE:
00006C70 7200                       		moveq	#0,d1
00006C72 3200                       		move.w	d0,d1
00006C74 D278 F704                  		add.w	(v_screenposy).w,d1
00006C78 4A40                       		tst.w	d0
00006C7A 6A00 0000                  		bpl.w	loc_6700
00006C7E 6000 0000                  		bra.w	loc_66CC
00006C82                            ; ===========================================================================
00006C82                            
00006C82                            loc_66C0:
00006C82 4441                       		neg.w	d1
00006C84 48C1                       		ext.l	d1
00006C86 E181                       		asl.l	#8,d1
00006C88 D2B8 F704                  		add.l	(v_screenposy).w,d1
00006C8C 4841                       		swap	d1
00006C8E                            
00006C8E                            loc_66CC:
00006C8E B278 F72C                  		cmp.w	(v_limittop2).w,d1
00006C92 6E00                       		bgt.s	loc_6724
00006C94 0C41 FF00                  		cmpi.w	#-$100,d1
00006C98 6E00                       		bgt.s	loc_66F0
00006C9A 0241 07FF                  		andi.w	#$7FF,d1
00006C9E 0278 07FF D00C             		andi.w	#$7FF,(v_player+obY).w
00006CA4 0278 07FF F704             		andi.w	#$7FF,(v_screenposy).w
00006CAA 0278 03FF F70C             		andi.w	#$3FF,(v_bgscreenposy).w
00006CB0 6000                       		bra.s	loc_6724
00006CB2                            ; ===========================================================================
00006CB2                            
00006CB2                            loc_66F0:
00006CB2 3238 F72C                  		move.w	(v_limittop2).w,d1
00006CB6 6000                       		bra.s	loc_6724
00006CB8                            ; ===========================================================================
00006CB8                            
00006CB8                            loc_66F6:
00006CB8 48C1                       		ext.l	d1
00006CBA E181                       		asl.l	#8,d1
00006CBC D2B8 F704                  		add.l	(v_screenposy).w,d1
00006CC0 4841                       		swap	d1
00006CC2                            
00006CC2                            loc_6700:
00006CC2 B278 F72E                  		cmp.w	(v_limitbtm2).w,d1
00006CC6 6D00                       		blt.s	loc_6724
00006CC8 0441 0800                  		subi.w	#$800,d1
00006CCC 6500                       		bcs.s	loc_6720
00006CCE 0278 07FF D00C             		andi.w	#$7FF,(v_player+obY).w
00006CD4 0478 0800 F704             		subi.w	#$800,(v_screenposy).w
00006CDA 0278 03FF F70C             		andi.w	#$3FF,(v_bgscreenposy).w
00006CE0 6000                       		bra.s	loc_6724
00006CE2                            ; ===========================================================================
00006CE2                            
00006CE2                            loc_6720:
00006CE2 3238 F72E                  		move.w	(v_limitbtm2).w,d1
00006CE6                            
00006CE6                            loc_6724:
00006CE6 3838 F704                  		move.w	(v_screenposy).w,d4
00006CEA 4841                       		swap	d1
00006CEC 2601                       		move.l	d1,d3
00006CEE 96B8 F704                  		sub.l	(v_screenposy).w,d3
00006CF2 E09B                       		ror.l	#8,d3
00006CF4 31C3 F73C                  		move.w	d3,(v_scrshifty).w
00006CF8 21C1 F704                  		move.l	d1,(v_screenposy).w
00006CFC 3038 F704                  		move.w	(v_screenposy).w,d0
00006D00 0240 0010                  		andi.w	#$10,d0
00006D04 1238 F74B                  		move.b	(v_fg_yblock).w,d1
00006D08 B300                       		eor.b	d1,d0
00006D0A 6600                       		bne.s	@return
00006D0C 0A38 0010 F74B             		eori.b	#$10,(v_fg_yblock).w
00006D12 3038 F704                  		move.w	(v_screenposy).w,d0
00006D16 9044                       		sub.w	d4,d0
00006D18 6A00                       		bpl.s	@scrollBottom
00006D1A 08F8 0000 F754             		bset	#0,(v_fg_scroll_flags).w
00006D20 4E75                       		rts	
00006D22                            ; ===========================================================================
00006D22                            
00006D22                            	@scrollBottom:
00006D22 08F8 0001 F754             		bset	#1,(v_fg_scroll_flags).w
00006D28                            
00006D28                            	@return:
00006D28 4E75                       		rts	
00006D2A                            ; End of function ScrollVertical
00006D2A                            
00006D2A                            
00006D2A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00006D2A                            ; Scrolls background and sets redraw flags.
00006D2A                            ; d4 - background x offset * $10000
00006D2A                            ; d5 - background y offset * $10000
00006D2A                            
00006D2A                            BGScroll_XY:
00006D2A 2438 F708                  		move.l	(v_bgscreenposx).w,d2
00006D2E 2002                       		move.l	d2,d0
00006D30 D084                       		add.l	d4,d0
00006D32 21C0 F708                  		move.l	d0,(v_bgscreenposx).w
00006D36 2200                       		move.l	d0,d1
00006D38 4841                       		swap.w	d1
00006D3A 0241 0010                  		andi.w	#$10,d1
00006D3E 1638 F74C                  		move.b	(v_bg1_xblock).w,d3
00006D42 B701                       		eor.b	d3,d1
00006D44 6600                       		bne.s	BGScroll_YRelative	; no change in Y
00006D46 0A38 0010 F74C             		eori.b	#$10,(v_bg1_xblock).w
00006D4C 9082                       		sub.l	d2,d0	; new - old
00006D4E 6A00                       		bpl.s	@scrollRight
00006D50 08F8 0002 F756             		bset	#2,(v_bg1_scroll_flags).w
00006D56 6000                       		bra.s	BGScroll_YRelative
00006D58                            	@scrollRight:
00006D58 08F8 0003 F756             		bset	#3,(v_bg1_scroll_flags).w
00006D5E                            BGScroll_YRelative:
00006D5E 2638 F70C                  		move.l	(v_bgscreenposy).w,d3
00006D62 2003                       		move.l	d3,d0
00006D64 D085                       		add.l	d5,d0
00006D66 21C0 F70C                  		move.l	d0,(v_bgscreenposy).w
00006D6A 2200                       		move.l	d0,d1
00006D6C 4841                       		swap.w	d1
00006D6E 0241 0010                  		andi.w	#$10,d1
00006D72 1438 F74D                  		move.b	(v_bg1_yblock).w,d2
00006D76 B501                       		eor.b	d2,d1
00006D78 6600                       		bne.s	@return
00006D7A 0A38 0010 F74D             		eori.b	#$10,(v_bg1_yblock).w
00006D80 9083                       		sub.l	d3,d0
00006D82 6A00                       		bpl.s	@scrollBottom
00006D84 08F8 0000 F756             		bset	#0,(v_bg1_scroll_flags).w
00006D8A 4E75                       		rts
00006D8C                            	@scrollBottom:
00006D8C 08F8 0001 F756             		bset	#1,(v_bg1_scroll_flags).w
00006D92                            	@return:
00006D92 4E75                       		rts
00006D94                            ; End of function BGScroll_XY
00006D94                            
00006D94                            Bg_Scroll_Y:
00006D94 2638 F70C                  		move.l	(v_bgscreenposy).w,d3
00006D98 2003                       		move.l	d3,d0
00006D9A D085                       		add.l	d5,d0
00006D9C 21C0 F70C                  		move.l	d0,(v_bgscreenposy).w
00006DA0 2200                       		move.l	d0,d1
00006DA2 4841                       		swap.w	d1
00006DA4 0241 0010                  		andi.w	#$10,d1
00006DA8 1438 F74D                  		move.b	(v_bg1_yblock).w,d2
00006DAC B501                       		eor.b	d2,d1
00006DAE 6600                       		bne.s	@return
00006DB0 0A38 0010 F74D             		eori.b	#$10,(v_bg1_yblock).w
00006DB6 9083                       		sub.l	d3,d0
00006DB8 6A00                       		bpl.s	@scrollBottom
00006DBA 08F8 0004 F756             		bset	#4,(v_bg1_scroll_flags).w
00006DC0 4E75                       		rts
00006DC2                            	@scrollBottom:
00006DC2 08F8 0005 F756             		bset	#5,(v_bg1_scroll_flags).w
00006DC8                            	@return:
00006DC8 4E75                       		rts
00006DCA                            
00006DCA                            
00006DCA                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00006DCA                            
00006DCA                            
00006DCA                            BGScroll_YAbsolute:
00006DCA 3638 F70C                  		move.w	(v_bgscreenposy).w,d3
00006DCE 31C0 F70C                  		move.w	d0,(v_bgscreenposy).w
00006DD2 3200                       		move.w	d0,d1
00006DD4 0241 0010                  		andi.w	#$10,d1
00006DD8 1438 F74D                  		move.b	(v_bg1_yblock).w,d2
00006DDC B501                       		eor.b	d2,d1
00006DDE 6600                       		bne.s	@return
00006DE0 0A38 0010 F74D             		eori.b	#$10,(v_bg1_yblock).w
00006DE6 9043                       		sub.w	d3,d0
00006DE8 6A00                       		bpl.s	@scrollBottom
00006DEA 08F8 0000 F756             		bset	#0,(v_bg1_scroll_flags).w
00006DF0 4E75                       		rts
00006DF2                            	@scrollBottom:
00006DF2 08F8 0001 F756             		bset	#1,(v_bg1_scroll_flags).w
00006DF8                            	@return:
00006DF8 4E75                       		rts
00006DFA                            ; End of function BGScroll_YAbsolute
00006DFA                            
00006DFA                            
00006DFA                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00006DFA                            ; d6 - bit to set for redraw
00006DFA                            
00006DFA                            BGScroll_Block1:
00006DFA 2438 F708                  		move.l	(v_bgscreenposx).w,d2
00006DFE 2002                       		move.l	d2,d0
00006E00 D084                       		add.l	d4,d0
00006E02 21C0 F708                  		move.l	d0,(v_bgscreenposx).w
00006E06 2200                       		move.l	d0,d1
00006E08 4841                       		swap.w	d1
00006E0A 0241 0010                  		andi.w	#$10,d1
00006E0E 1638 F74C                  		move.b	(v_bg1_xblock).w,d3
00006E12 B701                       		eor.b	d3,d1
00006E14 6600                       		bne.s	@return
00006E16 0A38 0010 F74C             		eori.b	#$10,(v_bg1_xblock).w
00006E1C 9082                       		sub.l	d2,d0
00006E1E 6A00                       		bpl.s	@scrollRight
00006E20 0DF8 F756                  		bset	d6,(v_bg1_scroll_flags).w
00006E24 6000                       		bra.s	@return
00006E26                            	@scrollRight:
00006E26 5206                       		addq.b	#1,d6
00006E28 0DF8 F756                  		bset	d6,(v_bg1_scroll_flags).w
00006E2C                            	@return:
00006E2C 4E75                       		rts
00006E2E                            ; End of function BGScroll_Block1
00006E2E                            
00006E2E                            
00006E2E                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00006E2E                            
00006E2E                            
00006E2E                            BGScroll_Block2:
00006E2E 2438 F710                  		move.l	(v_bg2screenposx).w,d2
00006E32 2002                       		move.l	d2,d0
00006E34 D084                       		add.l	d4,d0
00006E36 21C0 F710                  		move.l	d0,(v_bg2screenposx).w
00006E3A 2200                       		move.l	d0,d1
00006E3C 4841                       		swap.w	d1
00006E3E 0241 0010                  		andi.w	#$10,d1
00006E42 1638 F74E                  		move.b	(v_bg2_xblock).w,d3
00006E46 B701                       		eor.b	d3,d1
00006E48 6600                       		bne.s	@return
00006E4A 0A38 0010 F74E             		eori.b	#$10,(v_bg2_xblock).w
00006E50 9082                       		sub.l	d2,d0
00006E52 6A00                       		bpl.s	@scrollRight
00006E54 0DF8 F758                  		bset	d6,(v_bg2_scroll_flags).w
00006E58 6000                       		bra.s	@return
00006E5A                            	@scrollRight:
00006E5A 5206                       		addq.b	#1,d6
00006E5C 0DF8 F758                  		bset	d6,(v_bg2_scroll_flags).w
00006E60                            	@return:
00006E60 4E75                       		rts
00006E62                            ;-------------------------------------------------------------------------------
00006E62                            BGScroll_Block3:
00006E62 2438 F718                  		move.l	(v_bg3screenposx).w,d2
00006E66 2002                       		move.l	d2,d0
00006E68 D084                       		add.l	d4,d0
00006E6A 21C0 F718                  		move.l	d0,(v_bg3screenposx).w
00006E6E 2200                       		move.l	d0,d1
00006E70 4841                       		swap.w	d1
00006E72 0241 0010                  		andi.w	#$10,d1
00006E76 1638 F750                  		move.b	(v_bg3_xblock).w,d3
00006E7A B701                       		eor.b	d3,d1
00006E7C 6600                       		bne.s	@return
00006E7E 0A38 0010 F750             		eori.b	#$10,(v_bg3_xblock).w
00006E84 9082                       		sub.l	d2,d0
00006E86 6A00                       		bpl.s	@scrollRight
00006E88 0DF8 F75A                  		bset	d6,(v_bg3_scroll_flags).w
00006E8C 6000                       		bra.s	@return
00006E8E                            	@scrollRight:
00006E8E 5206                       		addq.b	#1,d6
00006E90 0DF8 F75A                  		bset	d6,(v_bg3_scroll_flags).w
00006E94                            	@return:
00006E94 4E75                       		rts
00006E96                            		
00006E96                            BGScroll_Block4:
00006E96 3438 F710                  		move.w	(v_bg2screenposx).w,d2
00006E9A 3638 F714                  		move.w	(v_bg2screenposy).w,d3
00006E9E 3038 F73A                  		move.w	(v_scrshiftx).w,d0
00006EA2 48C0                       		ext.l	d0
00006EA4 EF80                       		asl.l	#7,d0
00006EA6 D1B8 F710                  		add.l	d0,(v_bg2screenposx).w
00006EAA 3038 F710                  		move.w	(v_bg2screenposx).w,d0
00006EAE 0240 0010                  		andi.w	#$10,d0
00006EB2 1238 F74E                  		move.b	($FFFFF74E).w,d1
00006EB6 B300                       		eor.b	d1,d0
00006EB8 6600                       		bne.s	locret_6884
00006EBA 0A38 0010 F74E             		eori.b	#$10,($FFFFF74E).w
00006EC0 3038 F710                  		move.w	(v_bg2screenposx).w,d0
00006EC4 9042                       		sub.w	d2,d0
00006EC6 6A00                       		bpl.s	loc_687E
00006EC8 08F8 0002 F758             		bset	#2,(v_bg2_scroll_flags).w
00006ECE 6000                       		bra.s	locret_6884
00006ED0                            ; ===========================================================================
00006ED0                            
00006ED0                            loc_687E:
00006ED0 08F8 0003 F758             		bset	#3,(v_bg2_scroll_flags).w
00006ED6                            
00006ED6                            locret_6884:
00006ED6 4E75                       		rts
00006ED8                            ; End of function ScrollBlock4  
00006ED8                            ; End of function ScrollBlock4  
00006ED8                            		
00006ED8                            
00006ED8                            
00006ED8                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00006ED8                            
00006ED8                            ; sub_6886:
00006ED8                            LoadTilesAsYouMove_BGOnly:
00006ED8 4BF9 00C0 0004             		lea	(vdp_control_port).l,a5
00006EDE 4DF9 00C0 0000             		lea	(vdp_data_port).l,a6
00006EE4 45F8 F756                  		lea	(v_bg1_scroll_flags).w,a2
00006EE8 47F8 F708                  		lea	(v_bgscreenposx).w,a3
00006EEC 49F8 A440                  		lea	(v_lvllayout+$40).w,a4
00006EF0 343C 6000                  		move.w	#$6000,d2
00006EF4 6100 0000                  		bsr.w	DrawBGScrollBlock1
00006EF8 45F8 F758                  		lea	(v_bg2_scroll_flags).w,a2
00006EFC 47F8 F710                  		lea	(v_bg2screenposx).w,a3
00006F00 6000 0000                  		bra.w	DrawBGScrollBlock2
00006F04                            ; End of function sub_6886
00006F04                            
00006F04                            ; ---------------------------------------------------------------------------
00006F04                            ; Subroutine to	display	correct	tiles as you move
00006F04                            ; ---------------------------------------------------------------------------
00006F04                            
00006F04                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00006F04                            
00006F04                            
00006F04                            LoadTilesAsYouMove:
00006F04 4BF9 00C0 0004             		lea	(vdp_control_port).l,a5
00006F0A 4DF9 00C0 0000             		lea	(vdp_data_port).l,a6
00006F10                            		; First, update the background
00006F10 45F8 FF32                  		lea	(v_bg1_scroll_flags_dup).w,a2	; Scroll block 1 scroll flags
00006F14 47F8 FF18                  		lea	(v_bgscreenposx_dup).w,a3	; Scroll block 1 X coordinate
00006F18 49F8 A440                  		lea	(v_lvllayout+$40).w,a4
00006F1C 343C 6000                  		move.w	#$6000,d2			; VRAM thing for selecting Plane B
00006F20 6100 0000                  		bsr.w	DrawBGScrollBlock1
00006F24 45F8 FF34                  		lea	(v_bg2_scroll_flags_dup).w,a2	; Scroll block 2 scroll flags
00006F28 47F8 FF20                  		lea	(v_bg2screenposx_dup).w,a3	; Scroll block 2 X coordinate
00006F2C 6100 0000                  		bsr.w	DrawBGScrollBlock2
00006F30                            		; Then, update the foreground
00006F30 45F8 FF30                  		lea	(v_fg_scroll_flags_dup).w,a2	; Foreground scroll flags
00006F34 47F8 FF10                  		lea	(v_screenposx_dup).w,a3		; Foreground X coordinate
00006F38 49F8 A400                  		lea	(v_lvllayout).w,a4
00006F3C 343C 4000                  		move.w	#$4000,d2			; VRAM thing for selecting Plane A
00006F40                            		; The FG's update function is inlined here
00006F40 4A12                       		tst.b	(a2)
00006F42 6700                       		beq.s	locret_6952	; If there are no flags set, nothing needs updating
00006F44 0892 0000                  		bclr	#0,(a2)
00006F48 6700                       		beq.s	loc_6908
00006F4A                            		; Draw new tiles at the top
00006F4A 78F0                       		moveq	#-16,d4	; Y coordinate. Note that 16 is the size of a block in pixels
00006F4C 7AF0                       		moveq	#-16,d5 ; X coordinate
00006F4E 6100 0000                  		bsr.w	Calc_VRAM_Pos
00006F52 78F0                       		moveq	#-16,d4 ; Y coordinate
00006F54 7AF0                       		moveq	#-16,d5 ; X coordinate
00006F56 6100 0000                  		bsr.w	DrawBlocks_LR
00006F5A                            
00006F5A                            loc_6908:
00006F5A 0892 0001                  		bclr	#1,(a2)
00006F5E 6700                       		beq.s	loc_6922
00006F60                            		; Draw new tiles at the bottom
00006F60 383C 00E0                  		move.w	#224,d4	; Start at bottom of the screen. Since this draws from top to bottom, we don't need 224+16
00006F64 7AF0                       		moveq	#-16,d5
00006F66 6100 0000                  		bsr.w	Calc_VRAM_Pos
00006F6A 383C 00E0                  		move.w	#224,d4
00006F6E 7AF0                       		moveq	#-16,d5
00006F70 6100 0000                  		bsr.w	DrawBlocks_LR
00006F74                            
00006F74                            loc_6922:
00006F74 0892 0002                  		bclr	#2,(a2)
00006F78 6700                       		beq.s	loc_6938
00006F7A                            		; Draw new tiles on the left
00006F7A 78F0                       		moveq	#-16,d4
00006F7C 7AF0                       		moveq	#-16,d5
00006F7E 6100 0000                  		bsr.w	Calc_VRAM_Pos
00006F82 78F0                       		moveq	#-16,d4
00006F84 7AF0                       		moveq	#-16,d5
00006F86 6100 0000                  		bsr.w	DrawBlocks_TB
00006F8A                            
00006F8A                            loc_6938:
00006F8A 0892 0003                  		bclr	#3,(a2)
00006F8E 6700                       		beq.s	locret_6952
00006F90                            		; Draw new tiles on the right
00006F90 78F0                       		moveq	#-16,d4
00006F92 3A3C 0140                  		move.w	#320,d5
00006F96 6100 0000                  		bsr.w	Calc_VRAM_Pos
00006F9A 78F0                       		moveq	#-16,d4
00006F9C 3A3C 0140                  		move.w	#320,d5
00006FA0 6100 0000                  		bsr.w	DrawBlocks_TB
00006FA4                            
00006FA4                            locret_6952:
00006FA4 4E75                       		rts	
00006FA6                            ; End of function LoadTilesAsYouMove
00006FA6                            
00006FA6                            
00006FA6                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00006FA6                            
00006FA6                            ; sub_6954:
00006FA6                            DrawBGScrollBlock1:
00006FA6 4A12                       		tst.b	(a2)
00006FA8 6700 0000                  		beq.w	locret_69F2
00006FAC 0892 0000                  		bclr	#0,(a2)
00006FB0 6700                       		beq.s	loc_6972
00006FB2                            		; Draw new tiles at the top
00006FB2 78F0                       		moveq	#-16,d4
00006FB4 7AF0                       		moveq	#-16,d5
00006FB6 6100 0000                  		bsr.w	Calc_VRAM_Pos
00006FBA 78F0                       		moveq	#-16,d4
00006FBC 7AF0                       		moveq	#-16,d5
00006FBE 7C1F                       		moveq	#(512/16)-1,d6	 ; Draw entire row of plane
00006FC0 6100 0000                  		bsr.w	DrawBlocks_LR_2
00006FC4                            
00006FC4                            loc_6972:
00006FC4 0892 0001                  		bclr	#1,(a2)
00006FC8 6700                       		beq.s	loc_698E
00006FCA                            		; Draw new tiles at the top
00006FCA 383C 00E0                  		move.w	#224,d4
00006FCE 7AF0                       		moveq	#-16,d5
00006FD0 6100 0000                  		bsr.w	Calc_VRAM_Pos
00006FD4 383C 00E0                  		move.w	#224,d4
00006FD8 7AF0                       		moveq	#-16,d5
00006FDA 7C1F                       		moveq	#(512/16)-1,d6
00006FDC 6100 0000                  		bsr.w	DrawBlocks_LR_2
00006FE0                            
00006FE0                            loc_698E:
00006FE0 0892 0002                  		bclr	#2,(a2)
00006FE4                            
00006FE4 6700                       		beq.s	loc_69BE
00006FE6                            		; Draw new tiles on the left
00006FE6 78F0                       		moveq	#-16,d4
00006FE8 7AF0                       		moveq	#-16,d5
00006FEA 6100 0000                  		bsr.w	Calc_VRAM_Pos
00006FEE 78F0                       		moveq	#-16,d4
00006FF0 7AF0                       		moveq	#-16,d5
00006FF2 3C38 F7F0                  		move.w	(v_scroll_block_1_size).w,d6
00006FF6 322B 0004                  		move.w	4(a3),d1
00006FFA 0241 FFF0                  		andi.w	#-16,d1		; Floor camera Y coordinate to the nearest block
00006FFE 9C41                       		sub.w	d1,d6
00007000 6D00                       		blt.s	loc_69BE	; If scroll block 1 is offscreen, skip loading its tiles
00007002 E84E                       		lsr.w	#4,d6		; Get number of rows not above the screen
00007004 0C46 000F                  		cmpi.w	#((224+16+16)/16)-1,d6
00007008 6500                       		blo.s	loc_69BA
0000700A 7C0F                       		moveq	#((224+16+16)/16)-1,d6	; Cap at height of screen
0000700C                            
0000700C                            loc_69BA:
0000700C 6100 0000                  		bsr.w	DrawBlocks_TB_2
00007010                            
00007010                            loc_69BE:
00007010 0892 0003                  		bclr	#3,(a2)
00007014 6700                       		beq.s	locret_69F2
00007016                            		; Draw new tiles on the right
00007016 78F0                       		moveq	#-16,d4
00007018 3A3C 0140                  		move.w	#320,d5
0000701C 6100 0000                  		bsr.w	Calc_VRAM_Pos
00007020 78F0                       		moveq	#-16,d4
00007022 3A3C 0140                  		move.w	#320,d5
00007026 3C38 F7F0                  		move.w	(v_scroll_block_1_size).w,d6
0000702A 322B 0004                  		move.w	4(a3),d1
0000702E 0241 FFF0                  		andi.w	#-16,d1
00007032 9C41                       		sub.w	d1,d6
00007034 6D00                       		blt.s	locret_69F2
00007036 E84E                       		lsr.w	#4,d6
00007038 0C46 000F                  		cmpi.w	#((224+16+16)/16)-1,d6
0000703C 6500                       		blo.s	loc_69EE
0000703E 7C0F                       		moveq	#((224+16+16)/16)-1,d6
00007040                            
00007040                            loc_69EE:
00007040 6100 0000                  		bsr.w	DrawBlocks_TB_2
00007044                            
00007044                            
00007044                            locret_69F2:
00007044 4E75                       		rts	
00007046                            ; End of function DrawBGScrollBlock1
00007046                            
00007046                            
00007046                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00007046                            
00007046                            ; Essentially, this draws everything that isn't scroll block 1
00007046                            ; sub_69F4:
00007046                            DrawBGScrollBlock2:
00007046                            
00007046 4A12                       		tst.b	(a2)
00007048 6700 0000                  		beq.w	locret_6A80
0000704C 0892 0002                  		bclr	#2,(a2)
00007050 6700                       		beq.s	loc_6A3E
00007052                            		; Draw new tiles on the left
00007052 0C53 0010                  		cmpi.w	#16,(a3)
00007056 6500                       		blo.s	loc_6A3E
00007058 3838 F7F0                  		move.w	(v_scroll_block_1_size).w,d4
0000705C 322B 0004                  		move.w	4(a3),d1
00007060 0241 FFF0                  		andi.w	#-16,d1
00007064 9841                       		sub.w	d1,d4	; Get remaining coverage of screen that isn't scroll block 1
00007066 3F04                       		move.w	d4,-(sp)
00007068 7AF0                       		moveq	#-16,d5
0000706A 6100 0000                  		bsr.w	Calc_VRAM_Pos
0000706E 381F                       		move.w	(sp)+,d4
00007070 7AF0                       		moveq	#-16,d5
00007072 3C38 F7F0                  		move.w	(v_scroll_block_1_size).w,d6
00007076 322B 0004                  		move.w	4(a3),d1
0000707A 0241 FFF0                  		andi.w	#-16,d1
0000707E 9C41                       		sub.w	d1,d6
00007080 6D00                       		blt.s	loc_6A3E	; If scroll block 1 is completely offscreen, branch?
00007082 E84E                       		lsr.w	#4,d6
00007084 0446 000E                  		subi.w	#((224+16)/16)-1,d6	; Get however many of the rows on screen are not scroll block 1
00007088 6400                       		bhs.s	loc_6A3E
0000708A 4446                       		neg.w	d6
0000708C 6100 0000                  		bsr.w	DrawBlocks_TB_2
00007090                            
00007090                            loc_6A3E:
00007090 0892 0003                  		bclr	#3,(a2)
00007094 6700                       		beq.s	locret_6A80
00007096                            		; Draw new tiles on the right
00007096 3838 F7F0                  		move.w	(v_scroll_block_1_size).w,d4
0000709A 322B 0004                  		move.w	4(a3),d1
0000709E 0241 FFF0                  		andi.w	#-16,d1
000070A2 9841                       		sub.w	d1,d4
000070A4 3F04                       		move.w	d4,-(sp)
000070A6 3A3C 0140                  		move.w	#320,d5
000070AA 6100 0000                  		bsr.w	Calc_VRAM_Pos
000070AE 381F                       		move.w	(sp)+,d4
000070B0 3A3C 0140                  		move.w	#320,d5
000070B4 3C38 F7F0                  		move.w	(v_scroll_block_1_size).w,d6
000070B8 322B 0004                  		move.w	4(a3),d1
000070BC 0241 FFF0                  		andi.w	#-16,d1
000070C0 9C41                       		sub.w	d1,d6
000070C2 6D00                       		blt.s	locret_6A80
000070C4 E84E                       		lsr.w	#4,d6
000070C6 0446 000E                  		subi.w	#((224+16)/16)-1,d6
000070CA 6400                       		bhs.s	locret_6A80
000070CC 4446                       		neg.w	d6
000070CE 6100 0000                  		bsr.w	DrawBlocks_TB_2
000070D2                            
000070D2                            locret_6A80:
000070D2 4E75                       		rts	
000070D4                            ; End of function DrawBGScrollBlock2
000070D4                            
000070D4                            ; ===========================================================================
000070D4                            
000070D4                            ; Abandoned unused scroll block code.
000070D4                            ; This would have drawn a scroll block that started at 208 pixels down, and was 48 pixels long.
000070D4 4A12                       		tst.b	(a2)
000070D6 6700                       		beq.s	locret_6AD6
000070D8 0892 0002                  		bclr	#2,(a2)
000070DC 6700                       		beq.s	loc_6AAC
000070DE                            		; Draw new tiles on the left
000070DE 383C 00D0                  		move.w	#224-16,d4	; Note that full screen coverage is normally 224+16+16. This is exactly three blocks less.
000070E2 322B 0004                  		move.w	4(a3),d1
000070E6 0241 FFF0                  		andi.w	#-16,d1
000070EA 9841                       		sub.w	d1,d4
000070EC 3F04                       		move.w	d4,-(sp)
000070EE 7AF0                       		moveq	#-16,d5
000070F0 6100 0000                  		bsr.w	Calc_VRAM_Pos_Unknown
000070F4 381F                       		move.w	(sp)+,d4
000070F6 7AF0                       		moveq	#-16,d5
000070F8 7C02                       		moveq	#3-1,d6	; Draw only three rows
000070FA 6100 0000                  		bsr.w	DrawBlocks_TB_2
000070FE                            
000070FE                            loc_6AAC:
000070FE 0892 0003                  		bclr	#3,(a2)
00007102 6700                       		beq.s	locret_6AD6
00007104                            		; Draw new tiles on the right
00007104 383C 00D0                  		move.w	#224-16,d4
00007108 322B 0004                  		move.w	4(a3),d1
0000710C 0241 FFF0                  		andi.w	#-16,d1
00007110 9841                       		sub.w	d1,d4
00007112 3F04                       		move.w	d4,-(sp)
00007114 3A3C 0140                  		move.w	#320,d5
00007118 6100 0000                  		bsr.w	Calc_VRAM_Pos_Unknown
0000711C 381F                       		move.w	(sp)+,d4
0000711E 3A3C 0140                  		move.w	#320,d5
00007122 7C02                       		moveq	#3-1,d6
00007124 6100 0000                  		bsr.w	DrawBlocks_TB_2
00007128                            
00007128                            locret_6AD6:
00007128 4E75                       		rts	
0000712A                            
0000712A                            
0000712A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000712A                            
0000712A                            ; Don't be fooled by the name: this function's for drawing from left to right
0000712A                            ; when the camera's moving up or down
0000712A                            ; DrawTiles_LR:
0000712A                            DrawBlocks_LR:
0000712A 7C15                       		moveq	#((320+16+16)/16)-1,d6	; Draw the entire width of the screen + two extra columns
0000712C                            ; DrawTiles_LR_2:
0000712C                            DrawBlocks_LR_2:
0000712C 2E3C 0080 0000             		move.l	#$800000,d7	; Delta between rows of tiles
00007132 2200                       		move.l	d0,d1
00007134                            
00007134                            	@loop:
00007134 48E7 0C00                  		movem.l	d4-d5,-(sp)
00007138 6100 0000                  		bsr.w	GetBlockData
0000713C 2001                       		move.l	d1,d0
0000713E 6100 0000                  		bsr.w	DrawBlock
00007142 5801                       		addq.b	#4,d1		; Two tiles ahead
00007144 0201 007F                  		andi.b	#$7F,d1		; Wrap around row
00007148 4CDF 0030                  		movem.l	(sp)+,d4-d5
0000714C 0645 0010                  		addi.w	#16,d5		; Move X coordinate one block ahead
00007150 51CE FFE2                  		dbf	d6,@loop
00007154 4E75                       		rts
00007156                            ; End of function DrawBlocks_LR
00007156                            
00007156                            
00007156                            
00007156                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00007156                            
00007156                            ; Don't be fooled by the name: this function's for drawing from top to bottom
00007156                            ; when the camera's moving left or right
00007156                            ; DrawTiles_TB:
00007156                            DrawBlocks_TB:
00007156 7C0F                       		moveq	#((224+16+16)/16)-1,d6	; Draw the entire height of the screen + two extra rows
00007158                            ; DrawTiles_TB_2:
00007158                            DrawBlocks_TB_2:
00007158 2E3C 0080 0000             		move.l	#$800000,d7	; Delta between rows of tiles
0000715E 2200                       		move.l	d0,d1
00007160                            
00007160                            	@loop:
00007160 48E7 0C00                  		movem.l	d4-d5,-(sp)
00007164 6100 0000                  		bsr.w	GetBlockData
00007168 2001                       		move.l	d1,d0
0000716A 6100 0000                  		bsr.w	DrawBlock
0000716E 0641 0100                  		addi.w	#$100,d1	; Two rows ahead
00007172 0241 0FFF                  		andi.w	#$FFF,d1	; Wrap around plane
00007176 4CDF 0030                  		movem.l	(sp)+,d4-d5
0000717A 0644 0010                  		addi.w	#16,d4		; Move X coordinate one block ahead
0000717E 51CE FFE0                  		dbf	d6,@loop
00007182 4E75                       		rts	
00007184                            ; End of function DrawBlocks_TB_2
00007184                            
00007184                            
00007184                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00007184                            
00007184                            ; Draws a block's worth of tiles
00007184                            ; Parameters:
00007184                            ; a0 = Pointer to block metadata (block index and X/Y flip)
00007184                            ; a1 = Pointer to block
00007184                            ; a5 = Pointer to VDP command port
00007184                            ; a6 = Pointer to VDP data port
00007184                            ; d0 = VRAM command to access plane
00007184                            ; d2 = VRAM plane A/B specifier
00007184                            ; d7 = Plane row delta
00007184                            ; DrawTiles:
00007184                            DrawBlock:
00007184 8042                       		or.w	d2,d0	; OR in that plane A/B specifier to the VRAM command
00007186 4840                       		swap	d0
00007188 0810 0004                  		btst	#4,(a0)	; Check Y-flip bit
0000718C 6600                       		bne.s	DrawFlipY
0000718E 0810 0003                  		btst	#3,(a0)	; Check X-flip bit
00007192 6600                       		bne.s	DrawFlipX
00007194 2A80                       		move.l	d0,(a5)
00007196 2C99                       		move.l	(a1)+,(a6)	; Write top two tiles
00007198 D087                       		add.l	d7,d0		; Next row
0000719A 2A80                       		move.l	d0,(a5)
0000719C 2C99                       		move.l	(a1)+,(a6)	; Write bottom two tiles
0000719E 4E75                       		rts	
000071A0                            ; ===========================================================================
000071A0                            
000071A0                            DrawFlipX:
000071A0 2A80                       		move.l	d0,(a5)
000071A2 2819                       		move.l	(a1)+,d4
000071A4 0A84 0800 0800             		eori.l	#$8000800,d4	; Invert X-flip bits of each tile
000071AA 4844                       		swap	d4		; Swap the tiles around
000071AC 2C84                       		move.l	d4,(a6)		; Write top two tiles
000071AE D087                       		add.l	d7,d0		; Next row
000071B0 2A80                       		move.l	d0,(a5)
000071B2 2819                       		move.l	(a1)+,d4
000071B4 0A84 0800 0800             		eori.l	#$8000800,d4
000071BA 4844                       		swap	d4
000071BC 2C84                       		move.l	d4,(a6)		; Write bottom two tiles
000071BE 4E75                       		rts	
000071C0                            ; ===========================================================================
000071C0                            
000071C0                            DrawFlipY:
000071C0 0810 0003                  		btst	#3,(a0)
000071C4 6600                       		bne.s	DrawFlipXY
000071C6 2A80                       		move.l	d0,(a5)
000071C8 2A19                       		move.l	(a1)+,d5
000071CA 2819                       		move.l	(a1)+,d4
000071CC 0A84 1000 1000             		eori.l	#$10001000,d4
000071D2 2C84                       		move.l	d4,(a6)
000071D4 D087                       		add.l	d7,d0
000071D6 2A80                       		move.l	d0,(a5)
000071D8 0A85 1000 1000             		eori.l	#$10001000,d5
000071DE 2C85                       		move.l	d5,(a6)
000071E0 4E75                       		rts	
000071E2                            ; ===========================================================================
000071E2                            
000071E2                            DrawFlipXY:
000071E2 2A80                       		move.l	d0,(a5)
000071E4 2A19                       		move.l	(a1)+,d5
000071E6 2819                       		move.l	(a1)+,d4
000071E8 0A84 1800 1800             		eori.l	#$18001800,d4
000071EE 4844                       		swap	d4
000071F0 2C84                       		move.l	d4,(a6)
000071F2 D087                       		add.l	d7,d0
000071F4 2A80                       		move.l	d0,(a5)
000071F6 0A85 1800 1800             		eori.l	#$18001800,d5
000071FC 4845                       		swap	d5
000071FE 2C85                       		move.l	d5,(a6)
00007200 4E75                       		rts	
00007202                            ; End of function DrawBlocks
00007202                            
00007202                            ; ===========================================================================
00007202                            ; unused garbage
00007202                            ; This is interesting. It draws a block, but not before
00007202                            ; incrementing its palette lines by 1. This may have been
00007202                            ; a debug function to discolour mirrored tiles, to test
00007202                            ; if they're loading properly.
00007202 4E75                       		rts	
00007204 2A80                       		move.l	d0,(a5)
00007206 3A3C 2000                  		move.w	#$2000,d5
0000720A 3819                       		move.w	(a1)+,d4
0000720C D845                       		add.w	d5,d4
0000720E 3C84                       		move.w	d4,(a6)
00007210 3819                       		move.w	(a1)+,d4
00007212 D845                       		add.w	d5,d4
00007214 3C84                       		move.w	d4,(a6)
00007216 D087                       		add.l	d7,d0
00007218 2A80                       		move.l	d0,(a5)
0000721A 3819                       		move.w	(a1)+,d4
0000721C D845                       		add.w	d5,d4
0000721E 3C84                       		move.w	d4,(a6)
00007220 3819                       		move.w	(a1)+,d4
00007222 D845                       		add.w	d5,d4
00007224 3C84                       		move.w	d4,(a6)
00007226 4E75                       		rts
00007228                            
00007228                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00007228                            
00007228                            ; Gets address of block at a certain coordinate
00007228                            ; Parameters:
00007228                            ; a4 = Pointer to level layout
00007228                            ; d4 = Relative Y coordinate
00007228                            ; d5 = Relative X coordinate
00007228                            ; Returns:
00007228                            ; a0 = Address of block metadata
00007228                            ; a1 = Address of block
00007228                            ; DrawBlocks:
00007228                            GetBlockData:
00007228 43F8 B000                  		lea	(v_16x16).w,a1
0000722C D86B 0004                  		add.w	4(a3),d4	; Add camera Y coordinate to relative coordinate
00007230 DA53                       		add.w	(a3),d5		; Add camera X coordinate to relative coordinate
00007232                            		; Turn Y coordinate into index into level layout
00007232 3604                       		move.w	d4,d3
00007234 E24B                       		lsr.w	#1,d3
00007236 0243 0380                  		andi.w	#$380,d3
0000723A                            		; Turn X coordinate into index into level layout
0000723A E64D                       		lsr.w	#3,d5
0000723C 3005                       		move.w	d5,d0
0000723E EA48                       		lsr.w	#5,d0
00007240 0240 007F                  		andi.w	#$7F,d0
00007244                            		; Get chunk from level layout
00007244 D043                       		add.w	d3,d0
00007246 76FF                       		moveq	#-1,d3
00007248 1634 0000                  		move.b	(a4,d0.w),d3
0000724C 6700                       		beq.s	locret_6C1E	; If chunk 00, just return a pointer to the first block (expected to be empty)
0000724E                            		; Turn chunk ID into index into chunk table
0000724E 5303                       		subq.b	#1,d3
00007250 0243 007F                  		andi.w	#$7F,d3
00007254 EE5B                       		ror.w	#7,d3
00007256                            		; Turn Y coordinate into index into chunk
00007256 D844                       		add.w	d4,d4
00007258 0244 01E0                  		andi.w	#$1E0,d4
0000725C                            		; Turn X coordinate into index into chunk
0000725C 0245 001E                  		andi.w	#$1E,d5
00007260                            		; Get block metadata from chunk
00007260 D644                       		add.w	d4,d3
00007262 D645                       		add.w	d5,d3
00007264 2043                       		movea.l	d3,a0
00007266 3610                       		move.w	(a0),d3
00007268                            		; Turn block ID into address
00007268 0243 03FF                  		andi.w	#$3FF,d3
0000726C E74B                       		lsl.w	#3,d3
0000726E D2C3                       		adda.w	d3,a1
00007270                            
00007270                            locret_6C1E:
00007270 4E75                       		rts	
00007272                            ; End of function GetBlockData
00007272                            
00007272                            
00007272                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00007272                            
00007272                            ; Produces a VRAM plane access command from coordinates
00007272                            ; Parameters:
00007272                            ; d4 = Relative Y coordinate
00007272                            ; d5 = Relative X coordinate
00007272                            ; Returns VDP command in d0
00007272                            Calc_VRAM_Pos:
00007272 D86B 0004                  		add.w	4(a3),d4	; Add camera Y coordinate
00007276 DA53                       		add.w	(a3),d5		; Add camera X coordinate
00007278                            		; Floor the coordinates to the nearest pair of tiles (the size of a block).
00007278                            		; Also note that this wraps the value to the size of the plane:
00007278                            		; The plane is 64*8 wide, so wrap at $100, and it's 32*8 tall, so wrap at $200
00007278 0244 00F0                  		andi.w	#$F0,d4
0000727C 0245 01F0                  		andi.w	#$1F0,d5
00007280                            		; Transform the adjusted coordinates into a VDP command
00007280 E94C                       		lsl.w	#4,d4
00007282 E44D                       		lsr.w	#2,d5
00007284 D845                       		add.w	d5,d4
00007286 7003                       		moveq	#3,d0	; Highest bits of plane VRAM address
00007288 4840                       		swap	d0
0000728A 3004                       		move.w	d4,d0
0000728C 4E75                       		rts	
0000728E                            ; End of function Calc_VRAM_Pos
0000728E                            
0000728E                            
0000728E                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000728E                            ; not used
0000728E                            
0000728E                            ; This is just like Calc_VRAM_Pos, but seemingly for an earlier
0000728E                            ; VRAM layout: the only difference is the high bits of the
0000728E                            ; plane's VRAM address, which are 10 instead of 11.
0000728E                            ; Both the foreground and background are at $C000 and $E000
0000728E                            ; respectively, so this one starting at $8000 makes no sense.
0000728E                            ; sub_6C3C:
0000728E                            Calc_VRAM_Pos_Unknown:
0000728E D86B 0004                  		add.w	4(a3),d4
00007292 DA53                       		add.w	(a3),d5
00007294 0244 00F0                  		andi.w	#$F0,d4
00007298 0245 01F0                  		andi.w	#$1F0,d5
0000729C E94C                       		lsl.w	#4,d4
0000729E E44D                       		lsr.w	#2,d5
000072A0 D845                       		add.w	d5,d4
000072A2 7002                       		moveq	#2,d0
000072A4 4840                       		swap	d0
000072A6 3004                       		move.w	d4,d0
000072A8 4E75                       		rts	
000072AA                            ; End of function Calc_VRAM_Pos_Unknown
000072AA                            
000072AA                            ; ---------------------------------------------------------------------------
000072AA                            ; Subroutine to	load tiles as soon as the level	appears
000072AA                            ; ---------------------------------------------------------------------------
000072AA                            
000072AA                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000072AA                            
000072AA                            
000072AA                            LoadTilesFromStart:
000072AA 4BF9 00C0 0004             		lea	(vdp_control_port).l,a5
000072B0 4DF9 00C0 0000             		lea	(vdp_data_port).l,a6
000072B6 47F8 F700                  		lea	(v_screenposx).w,a3
000072BA 49F8 A400                  		lea	(v_lvllayout).w,a4
000072BE 343C 4000                  		move.w	#$4000,d2
000072C2 6100                       		bsr.s	DrawChunks
000072C4 47F8 F708                  		lea	(v_bgscreenposx).w,a3
000072C8 49F8 A440                  		lea	(v_lvllayout+$40).w,a4
000072CC 343C 6000                  		move.w	#$6000,d2
000072D0                            ; End of function LoadTilesFromStart
000072D0                            
000072D0                            
000072D0                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000072D0                            
000072D0                            
000072D0                            DrawChunks:
000072D0 78F0                       		moveq	#-16,d4
000072D2 7C0F                       		moveq	#((224+16+16)/16)-1,d6
000072D4                            
000072D4                            	@loop:
000072D4 48E7 0E00                  		movem.l	d4-d6,-(sp)
000072D8 7A00                       		moveq	#0,d5
000072DA 3204                       		move.w	d4,d1
000072DC 6100 FF94                  		bsr.w	Calc_VRAM_Pos
000072E0 3801                       		move.w	d1,d4
000072E2 7A00                       		moveq	#0,d5
000072E4 7C1F                       		moveq	#(512/16)-1,d6
000072E6 6100 FE44                  		bsr.w	DrawBlocks_LR_2
000072EA 4CDF 0070                  		movem.l	(sp)+,d4-d6
000072EE 0644 0010                  		addi.w	#16,d4
000072F2 51CE FFE0                  		dbf	d6,@loop
000072F6 4E75                       		rts	
000072F8                            ; End of function DrawChunks
000072F8                            
000072F8                            
000072F8                            ; ---------------------------------------------------------------------------
000072F8                            ; Subroutine to load basic level data
000072F8                            ; ---------------------------------------------------------------------------
000072F8                            
000072F8                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000072F8                            
000072F8                            
000072F8                            LevelDataLoad:
000072F8 7000                       		moveq	#0,d0
000072FA 1038 FE10                  		move.b	(v_zone).w,d0
000072FE E948                       		lsl.w	#4,d0
00007300 45F9 0000 0000             		lea	(LevelHeaders).l,a2
00007306 45F2 0000                  		lea	(a2,d0.w),a2
0000730A 2F0A                       		move.l	a2,-(sp)
0000730C 588A                       		addq.l	#4,a2
0000730E 205A                       		movea.l	(a2)+,a0
00007310 43F8 B000                  		lea	(v_16x16).w,a1	; RAM address for 16x16 mappings
00007314 303C 0000                  		move.w	#0,d0
00007318 6100 A1F2                  		bsr.w	EniDec
0000731C 205A                       		movea.l	(a2)+,a0
0000731E 43F9 00FF 0000             		lea	(v_256x256).l,a1 ; RAM address for 256x256 mappings
00007324 6100 A364                  		bsr.w	KosDec
00007328 6100 0000                  		bsr.w	LevelLayoutLoad
0000732C 301A                       		move.w	(a2)+,d0
0000732E 3012                       		move.w	(a2),d0
00007330 0240 00FF                  		andi.w	#$FF,d0
00007334 0C78 0103 FE10             		cmpi.w	#(id_LZ<<8)+3,(v_zone).w ; is level SBZ3 (LZ4) ?
0000733A 6600                       		bne.s	@notSBZ3	; if not, branch
0000733C 700D                       		moveq	#palid_SBZ3,d0	; use SB3 palette
0000733E                            
0000733E                            	@notSBZ3:
0000733E 0C78 0501 FE10             		cmpi.w	#(id_SBZ<<8)+1,(v_zone).w ; is level SBZ2?
00007344 6700                       		beq.s	@isSBZorFZ	; if yes, branch
00007346 0C78 0502 FE10             		cmpi.w	#(id_SBZ<<8)+2,(v_zone).w ; is level FZ?
0000734C 6600                       		bne.s	@normalpal	; if not, branch
0000734E                            
0000734E                            	@isSBZorFZ:
0000734E 700F                       		moveq	#palid_SBZ2,d0	; use SBZ2/FZ palette
00007350                            
00007350                            	@normalpal:
00007350 6100 AAEC                  		bsr.w	PalLoad1	; load palette (based on d0)
00007354 245F                       		movea.l	(sp)+,a2
00007356 584A                       		addq.w	#4,a2		; read number for 2nd PLC
00007358 7000                       		moveq	#0,d0
0000735A 1012                       		move.b	(a2),d0
0000735C 6700                       		beq.s	@skipPLC	; if 2nd PLC is 0 (i.e. the ending sequence), branch
0000735E 6100 A00E                  		bsr.w	AddPLC		; load pattern load cues
00007362                            
00007362                            	@skipPLC:
00007362 4E75                       		rts	
00007364                            ; End of function LevelDataLoad
00007364                            
00007364                            ; ---------------------------------------------------------------------------
00007364                            ; Level	layout loading subroutine
00007364                            ; ---------------------------------------------------------------------------
00007364                            
00007364                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00007364                            
00007364                            
00007364                            LevelLayoutLoad:
00007364 47F8 A400                  		lea	(v_lvllayout).w,a3
00007368 323C 01FF                  		move.w	#$1FF,d1
0000736C 7000                       		moveq	#0,d0
0000736E                            
0000736E                            LevLoad_ClrRam:
0000736E 26C0                       		move.l	d0,(a3)+
00007370 51C9 FFFC                  		dbf	d1,LevLoad_ClrRam ; clear the RAM ($A400-A7FF)
00007374                            
00007374 47F8 A400                  		lea	(v_lvllayout).w,a3 ; RAM address for level layout
00007378 7200                       		moveq	#0,d1
0000737A 6100 0000                  		bsr.w	LevelLayoutLoad2 ; load	level layout into RAM
0000737E 47F8 A440                  		lea	(v_lvllayout+$40).w,a3 ; RAM address for background layout
00007382 7202                       		moveq	#2,d1
00007384                            ; End of function LevelLayoutLoad
00007384                            
00007384                            ; "LevelLayoutLoad2" is	run twice - for	the level and the background
00007384                            
00007384                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00007384                            
00007384                            
00007384                            LevelLayoutLoad2:
00007384 3038 FE10                  		move.w	(v_zone).w,d0
00007388 ED08                       		lsl.b	#6,d0
0000738A EA48                       		lsr.w	#5,d0
0000738C 3400                       		move.w	d0,d2
0000738E D040                       		add.w	d0,d0
00007390 D042                       		add.w	d2,d0
00007392 D041                       		add.w	d1,d0
00007394 43F9 0000 0000             		lea	(Level_Index).l,a1
0000739A 3031 0000                  		move.w	(a1,d0.w),d0
0000739E 43F1 0000                  		lea	(a1,d0.w),a1
000073A2 7200                       		moveq	#0,d1
000073A4 3401                       		move.w	d1,d2
000073A6 1219                       		move.b	(a1)+,d1	; load level width (in tiles)
000073A8 1419                       		move.b	(a1)+,d2	; load level height (in	tiles)
000073AA                            
000073AA                            LevLoad_NumRows:
000073AA 3001                       		move.w	d1,d0
000073AC 204B                       		movea.l	a3,a0
000073AE                            
000073AE                            LevLoad_Row:
000073AE 10D9                       		move.b	(a1)+,(a0)+
000073B0 51C8 FFFC                  		dbf	d0,LevLoad_Row	; load 1 row
000073B4 47EB 0080                  		lea	$80(a3),a3	; do next row
000073B8 51CA FFF0                  		dbf	d2,LevLoad_NumRows ; repeat for	number of rows
000073BC 4E75                       		rts	
000073BE                            ; End of function LevelLayoutLoad2
000073BE                            
000073BE                            		include	"_inc\DynamicLevelEvents.asm"
000073BE                            ; ---------------------------------------------------------------------------
000073BE                            ; Dynamic level events
000073BE                            ; ---------------------------------------------------------------------------
000073BE                            
000073BE                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000073BE                            
000073BE                            
000073BE                            DynamicLevelEvents:
000073BE 7000                       		moveq	#0,d0
000073C0 1038 FE10                  		move.b	(v_zone).w,d0
000073C4 D040                       		add.w	d0,d0
000073C6 303B 0000                  		move.w	DLE_Index(pc,d0.w),d0
000073CA 4EBB 0000                  		jsr	DLE_Index(pc,d0.w) ; run level-specific events
000073CE 7202                       		moveq	#2,d1
000073D0 3038 F726                  		move.w	(v_limitbtm1).w,d0
000073D4 9078 F72E                  		sub.w	(v_limitbtm2).w,d0 ; has lower level boundary changed recently?
000073D8 6700                       		beq.s	DLE_NoChg	; if not, branch
000073DA 6400                       		bcc.s	loc_6DAC
000073DC                            
000073DC 4441                       		neg.w	d1
000073DE 3038 F704                  		move.w	(v_screenposy).w,d0
000073E2 B078 F726                  		cmp.w	(v_limitbtm1).w,d0
000073E6 6300                       		bls.s	loc_6DA0
000073E8 31C0 F72E                  		move.w	d0,(v_limitbtm2).w
000073EC 0278 FFFE F72E             		andi.w	#$FFFE,(v_limitbtm2).w
000073F2                            
000073F2                            loc_6DA0:
000073F2 D378 F72E                  		add.w	d1,(v_limitbtm2).w
000073F6 11FC 0001 F75C             		move.b	#1,(f_bgscrollvert).w
000073FC                            
000073FC                            DLE_NoChg:
000073FC 4E75                       		rts	
000073FE                            ; ===========================================================================
000073FE                            
000073FE                            loc_6DAC:
000073FE 3038 F704                  		move.w	(v_screenposy).w,d0
00007402 5040                       		addq.w	#8,d0
00007404 B078 F72E                  		cmp.w	(v_limitbtm2).w,d0
00007408 6500                       		bcs.s	loc_6DC4
0000740A 0838 0001 D022             		btst	#1,(v_player+obStatus).w
00007410 6700                       		beq.s	loc_6DC4
00007412 D241                       		add.w	d1,d1
00007414 D241                       		add.w	d1,d1
00007416                            
00007416                            loc_6DC4:
00007416 D378 F72E                  		add.w	d1,(v_limitbtm2).w
0000741A 11FC 0001 F75C             		move.b	#1,(f_bgscrollvert).w
00007420 4E75                       		rts	
00007422                            ; End of function DynamicLevelEvents
00007422                            
00007422                            ; ===========================================================================
00007422                            ; ---------------------------------------------------------------------------
00007422                            ; Offset index for dynamic level events
00007422                            ; ---------------------------------------------------------------------------
00007422 0000 0000                  DLE_Index:	dc.w DLE_GHZ-DLE_Index, DLE_LZ-DLE_Index
00007426 0000 0000                  		dc.w DLE_MZ-DLE_Index, DLE_SLZ-DLE_Index
0000742A 0000 0000                  		dc.w DLE_SYZ-DLE_Index, DLE_SBZ-DLE_Index
0000742E 0000 0000                  		dc.w DLE_Ending-DLE_Index, DLE_IMZ-DLE_Index
00007432 0000 0000                  		dc.w DLE_SBZ-DLE_Index, DLE_SBZ-DLE_Index
00007436                            ; ===========================================================================
00007436                            ; ---------------------------------------------------------------------------
00007436                            ; Green	Hill Zone dynamic level events
00007436                            ; ---------------------------------------------------------------------------
00007436                            
00007436                            DLE_GHZ:
00007436 7000                       		moveq	#0,d0
00007438 1038 FE11                  		move.b	(v_act).w,d0
0000743C D040                       		add.w	d0,d0
0000743E 303B 0000                  		move.w	DLE_GHZx(pc,d0.w),d0
00007442 4EFB 0000                  		jmp	DLE_GHZx(pc,d0.w)
00007446                            ; ===========================================================================
00007446 0000                       DLE_GHZx:	dc.w DLE_GHZ1-DLE_GHZx
00007448 0000                       		dc.w DLE_GHZ2-DLE_GHZx
0000744A 0000                       		dc.w DLE_GHZ3-DLE_GHZx
0000744C                            ; ===========================================================================
0000744C                            
0000744C                            DLE_GHZ1:
0000744C 31FC 0300 F726             		move.w	#$300,(v_limitbtm1).w ; set lower y-boundary
00007452 0C78 0D00 F700             		cmpi.w	#$0D00,(v_screenposx).w ; has the camera reached $1780 on x-axis?
00007458 6500                       		bcs.s	locret_6E08	; if not, branch
0000745A 31FC 0200 F726             		move.w	#$200,(v_limitbtm1).w ; set lower y-boundary
00007460 0C78 1680 F700             		cmpi.w	#$1680,(v_screenposx).w ; has the camera reached $1780 on x-axis?
00007466 6500                       		bcs.s	locret_6E08	; if not, branch
00007468 31FC 0400 F726             		move.w	#$400,(v_limitbtm1).w ; set lower y-boundary
0000746E                            
0000746E                            locret_6E08:
0000746E 4E75                       		rts	
00007470                            ; ===========================================================================
00007470                            
00007470                            DLE_GHZ2:
00007470                            	;	move.w	#$100,(v_limittop1).w
00007470                            	;	cmpi.w	#$ED0,(v_screenposx).w
00007470                            	;	bcs.s	locret_6E3A
00007470                            	;	move.w	#$200,(v_limitbtm1).w
00007470                            	;	cmpi.w	#$1600,(v_screenposx).w
00007470                            	;	bcs.s	locret_6E3A
00007470                            	;	move.w	#$400,(v_limitbtm1).w
00007470 0C78 1AE0 F700             		cmpi.w	#$1AE0,(v_screenposx).w
00007476 6500                       		bcs.s	locret_6E3A
00007478 31FC 0200 F72C             		move.w	#$200,(v_limittop2).w
0000747E                            
0000747E                            locret_6E3A:
0000747E 4E75                       		rts	
00007480                            ; ===========================================================================
00007480                            
00007480                            DLE_GHZ3:
00007480 7000                       		moveq	#0,d0
00007482 1038 F742                  		move.b	(v_dle_routine).w,d0
00007486 303B 0000                  		move.w	off_6E4A(pc,d0.w),d0
0000748A 4EFB 0000                  		jmp	off_6E4A(pc,d0.w)
0000748E                            ; ===========================================================================
0000748E 0000                       off_6E4A:	dc.w DLE_GHZ3main-off_6E4A
00007490 0000                       		dc.w DLE_GHZ3boss-off_6E4A
00007492 0000                       		dc.w DLE_GHZ3end-off_6E4A
00007494                            ; ===========================================================================
00007494                            
00007494                            DLE_GHZ3main:
00007494 31FC 0300 F726             		move.w	#$300,(v_limitbtm1).w
0000749A 0C78 0380 F700             		cmpi.w	#$380,(v_screenposx).w
000074A0 6500                       		bcs.s	locret_6E96
000074A2 31FC 0310 F726             		move.w	#$310,(v_limitbtm1).w
000074A8 0C78 0960 F700             		cmpi.w	#$960,(v_screenposx).w
000074AE 6500                       		bcs.s	locret_6E96
000074B0 0C78 0280 F704             		cmpi.w	#$280,(v_screenposy).w
000074B6 6500                       		bcs.s	loc_6E98
000074B8 31FC 0400 F726             		move.w	#$400,(v_limitbtm1).w
000074BE 0C78 1380 F700             		cmpi.w	#$1380,(v_screenposx).w
000074C4 6400                       		bcc.s	loc_6E8E
000074C6 31FC 04C0 F726             		move.w	#$4C0,(v_limitbtm1).w
000074CC 31FC 04C0 F72E             		move.w	#$4C0,(v_limitbtm2).w
000074D2                            
000074D2                            loc_6E8E:
000074D2 0C78 1700 F700             		cmpi.w	#$1700,(v_screenposx).w
000074D8 6400                       		bcc.s	loc_6E98
000074DA                            
000074DA                            locret_6E96:
000074DA 4E75                       		rts	
000074DC                            ; ===========================================================================
000074DC                            
000074DC                            loc_6E98:
000074DC 31FC 0300 F726             		move.w	#$300,(v_limitbtm1).w
000074E2 5438 F742                  		addq.b	#2,(v_dle_routine).w
000074E6 4E75                       		rts	
000074E8                            ; ===========================================================================
000074E8                            
000074E8                            DLE_GHZ3boss:
000074E8 0C78 0960 F700             		cmpi.w	#$960,(v_screenposx).w
000074EE 6400                       		bcc.s	loc_6EB0
000074F0 5538 F742                  		subq.b	#2,(v_dle_routine).w
000074F4                            
000074F4                            loc_6EB0:
000074F4 0C78 2900 F700             		cmpi.w	#$2900,(v_screenposx).w
000074FA 6500                       		bcs.s	locret_6EE8
000074FC 6100 0000                  		bsr.w	FindFreeObj
00007500 6600                       		bne.s	loc_6ED0
00007502 137C 0000 0000             		move.b	#id_BossGreenHill,0(a1) ; load GHZ boss	object
00007508 337C 2A60 0008             		move.w	#$2A60,obX(a1)
0000750E 337C 0280 000C             		move.w	#$280,obY(a1)
00007514                            
00007514                            loc_6ED0:
0000751C 11FC 0001 F7AA             		move.b	#1,(f_lockscreen).w ; lock screen
00007522 5438 F742                  		addq.b	#2,(v_dle_routine).w
00007526 7000                       		moveq	#plcid_Boss,d0
00007528 6000 9E44                  		bra.w	AddPLC		; load boss patterns
0000752C                            ; ===========================================================================
0000752C                            
0000752C                            locret_6EE8:
0000752C 4E75                       		rts	
0000752E                            ; ===========================================================================
0000752E                            
0000752E                            DLE_GHZ3end:
0000752E 31F8 F700 F728             		move.w	(v_screenposx).w,(v_limitleft2).w
00007534 4E75                       		rts	
00007536                            ; ===========================================================================
00007536                            ; ---------------------------------------------------------------------------
00007536                            ; Labyrinth Zone dynamic level events
00007536                            ; ---------------------------------------------------------------------------
00007536                            
00007536                            DLE_LZ:
00007536 7000                       		moveq	#0,d0
00007538 1038 FE11                  		move.b	(v_act).w,d0
0000753C D040                       		add.w	d0,d0
0000753E 303B 0000                  		move.w	DLE_LZx(pc,d0.w),d0
00007542 4EFB 0000                  		jmp	DLE_LZx(pc,d0.w)
00007546                            ; ===========================================================================
00007546 0000                       DLE_LZx:	dc.w DLE_LZ12-DLE_LZx
00007548 0000                       		dc.w DLE_LZ12-DLE_LZx
0000754A 0000                       		dc.w DLE_LZ3-DLE_LZx
0000754C 0000                       		dc.w DLE_SBZ3-DLE_LZx
0000754E                            ; ===========================================================================
0000754E                            
0000754E                            DLE_LZ12:
0000754E 4E75                       		rts	
00007550                            ; ===========================================================================
00007550                            
00007550                            DLE_LZ3:
00007550 4A38 F7EF                  		tst.b	(f_switch+$F).w	; has switch $F	been pressed?
00007554 6700                       		beq.s	loc_6F28	; if not, branch
00007556 43F8 A506                  		lea	(v_lvllayout+$106).w,a1
0000755A 0C11 0007                  		cmpi.b	#7,(a1)
0000755E 6700                       		beq.s	loc_6F28
00007560 12BC 0007                  		move.b	#7,(a1)		; modify level layout
0000756C                            
0000756C                            loc_6F28:
0000756C 4A38 F742                  		tst.b	(v_dle_routine).w
00007570 6600                       		bne.s	locret_6F64
00007572 0C78 1CA0 F700             		cmpi.w	#$1CA0,(v_screenposx).w
00007578 6500                       		bcs.s	locret_6F62
0000757A 0C78 0600 F704             		cmpi.w	#$600,(v_screenposy).w
00007580 6400                       		bcc.s	locret_6F62
00007582 6100 0000                  		bsr.w	FindFreeObj
00007586 6600                       		bne.s	loc_6F4A
00007588 137C 0000 0000             		move.b	#id_BossLabyrinth,0(a1) ; load LZ boss object
0000758E                            
0000758E                            loc_6F4A:
00007596 11FC 0001 F7AA             		move.b	#1,(f_lockscreen).w ; lock screen
0000759C 5438 F742                  		addq.b	#2,(v_dle_routine).w
000075A0 7000                       		moveq	#plcid_Boss,d0
000075A2 6000 9DCA                  		bra.w	AddPLC		; load boss patterns
000075A6                            ; ===========================================================================
000075A6                            
000075A6                            locret_6F62:
000075A6 4E75                       		rts	
000075A8                            ; ===========================================================================
000075A8                            
000075A8                            locret_6F64:
000075A8 4E75                       		rts	
000075AA                            ; ===========================================================================
000075AA                            
000075AA                            DLE_SBZ3:
000075AA 0C78 0D00 F700             		cmpi.w	#$D00,(v_screenposx).w
000075B0 6500                       		bcs.s	locret_6F8C
000075B2 0C78 0018 D00C             		cmpi.w	#$18,(v_player+obY).w ; has Sonic reached the top of the level?
000075B8 6400                       		bcc.s	locret_6F8C	; if not, branch
000075BA 4238 FE30                  		clr.b	(v_lastlamp).w
000075BE 31FC 0001 FE02             		move.w	#1,(f_restart).w ; restart level
000075C4 31FC 0502 FE10             		move.w	#(id_SBZ<<8)+2,(v_zone).w ; set level number to 0502 (FZ)
000075CA 11FC 0001 F7C8             		move.b	#1,(f_lockmulti).w ; freeze Sonic
000075D0                            
000075D0                            locret_6F8C:
000075D0 4E75                       		rts	
000075D2                            ; ===========================================================================
000075D2                            ; ---------------------------------------------------------------------------
000075D2                            ; Marble Zone dynamic level events
000075D2                            ; ---------------------------------------------------------------------------
000075D2                            
000075D2                            DLE_MZ:
000075D2 7000                       		moveq	#0,d0
000075D4 1038 FE11                  		move.b	(v_act).w,d0
000075D8 D040                       		add.w	d0,d0
000075DA 303B 0000                  		move.w	DLE_MZx(pc,d0.w),d0
000075DE 4EFB 0000                  		jmp	DLE_MZx(pc,d0.w)
000075E2                            ; ===========================================================================
000075E2 0000                       DLE_MZx:	dc.w DLE_MZ1-DLE_MZx
000075E4 0000                       		dc.w DLE_MZ2-DLE_MZx
000075E6 0000                       		dc.w DLE_MZ3-DLE_MZx
000075E8                            ; ===========================================================================
000075E8                            
000075E8                            DLE_MZ1:
000075E8 7000                       		moveq	#0,d0
000075EA 1038 F742                  		move.b	(v_dle_routine).w,d0
000075EE 303B 0000                  		move.w	off_6FB2(pc,d0.w),d0
000075F2 4EFB 0000                  		jmp	off_6FB2(pc,d0.w)
000075F6                            ; ===========================================================================
000075F6 0000                       off_6FB2:	dc.w loc_6FBA-off_6FB2
000075F8 0000                       		dc.w loc_6FEA-off_6FB2
000075FA 0000                       		dc.w loc_702E-off_6FB2
000075FC 0000                       		dc.w loc_7050-off_6FB2
000075FE                            ; ===========================================================================
000075FE                            
000075FE                            loc_6FBA:
000075FE 31FC 01D0 F726             		move.w	#$1D0,(v_limitbtm1).w
00007604 0C78 0700 F700             		cmpi.w	#$700,(v_screenposx).w
0000760A 6500                       		bcs.s	locret_6FE8
0000760C 31FC 0220 F726             		move.w	#$220,(v_limitbtm1).w
00007612 0C78 0C00 F700             		cmpi.w	#$C00,(v_screenposx).w
00007618 6500                       		bcs.s	locret_6FE8
0000761A 31FC 0340 F726             		move.w	#$340,(v_limitbtm1).w
00007620 0C78 0340 F704             		cmpi.w	#$340,(v_screenposy).w
00007626 6500                       		bcs.s	locret_6FE8
00007628 5438 F742                  		addq.b	#2,(v_dle_routine).w
0000762C                            
0000762C                            locret_6FE8:
0000762C 4E75                       		rts	
0000762E                            ; ===========================================================================
0000762E                            
0000762E                            loc_6FEA:
0000762E 0C78 0340 F704             		cmpi.w	#$340,(v_screenposy).w
00007634 6400                       		bcc.s	loc_6FF8
00007636 5538 F742                  		subq.b	#2,(v_dle_routine).w
0000763A 4E75                       		rts	
0000763C                            ; ===========================================================================
0000763C                            
0000763C                            loc_6FF8:
0000763C 31FC 0000 F72C             		move.w	#0,(v_limittop2).w
00007642 0C78 0E00 F700             		cmpi.w	#$E00,(v_screenposx).w
00007648 6400                       		bcc.s	locret_702C
0000764A 31FC 0340 F72C             		move.w	#$340,(v_limittop2).w
00007650 31FC 0340 F726             		move.w	#$340,(v_limitbtm1).w
00007656 0C78 0A90 F700             		cmpi.w	#$A90,(v_screenposx).w
0000765C 6400                       		bcc.s	locret_702C
0000765E 31FC 0500 F726             		move.w	#$500,(v_limitbtm1).w
00007664 0C78 0370 F704             		cmpi.w	#$370,(v_screenposy).w
0000766A 6500                       		bcs.s	locret_702C
0000766C 5438 F742                  		addq.b	#2,(v_dle_routine).w
00007670                            
00007670                            locret_702C:
00007670 4E75                       		rts	
00007672                            ; ===========================================================================
00007672                            
00007672                            loc_702E:
00007672 0C78 0370 F704             		cmpi.w	#$370,(v_screenposy).w
00007678 6400                       		bcc.s	loc_703C
0000767A 5538 F742                  		subq.b	#2,(v_dle_routine).w
0000767E 4E75                       		rts	
00007680                            ; ===========================================================================
00007680                            
00007680                            loc_703C:
00007680 0C78 0500 F704             		cmpi.w	#$500,(v_screenposy).w
00007686 6500                       		bcs.s	locret_704E
00007688 31FC 0500 F72C             		move.w	#$500,(v_limittop2).w
0000768E 5438 F742                  		addq.b	#2,(v_dle_routine).w
00007692                            
00007692                            locret_704E:
00007692 4E75                       		rts	
00007694                            ; ===========================================================================
00007694                            
00007694                            loc_7050:
00007694                            
00007694 0C78 0E70 F700             		cmpi.w	#$E70,(v_screenposx).w
0000769A 6500                       		bcs.s	locret_7072
0000769C 31FC 0000 F72C             		move.w	#0,(v_limittop2).w
000076A2 31FC 0500 F726             		move.w	#$500,(v_limitbtm1).w
000076A8 0C78 1430 F700             		cmpi.w	#$1430,(v_screenposx).w
000076AE 6500                       		bcs.s	locret_7072
000076B0 31FC 0210 F726             		move.w	#$210,(v_limitbtm1).w
000076B6                            
000076B6                            locret_7072:
000076B6 4E75                       		rts	
000076B8                            ; ===========================================================================
000076B8                            
000076B8                            DLE_MZ2:
000076B8 31FC 0520 F726             		move.w	#$520,(v_limitbtm1).w
000076BE 0C78 1700 F700             		cmpi.w	#$1700,(v_screenposx).w
000076C4 6500                       		bcs.s	locret_7088
000076C6 31FC 0200 F726             		move.w	#$200,(v_limitbtm1).w
000076CC                            
000076CC                            locret_7088:
000076CC 4E75                       		rts	
000076CE                            ; ===========================================================================
000076CE                            
000076CE                            DLE_MZ3:
000076CE 7000                       		moveq	#0,d0
000076D0 1038 F742                  		move.b	(v_dle_routine).w,d0
000076D4 303B 0000                  		move.w	off_7098(pc,d0.w),d0
000076D8 4EFB 0000                  		jmp	off_7098(pc,d0.w)
000076DC                            ; ===========================================================================
000076DC 0000                       off_7098:	dc.w DLE_MZ3boss-off_7098
000076DE 0000                       		dc.w DLE_MZ3end-off_7098
000076E0                            ; ===========================================================================
000076E0                            
000076E0                            DLE_MZ3boss:
000076E0                            	;	move.w	#$720,(v_limitbtm1).w
000076E0 0C78 1560 F700             		cmpi.w	#$1560,(v_screenposx).w
000076E6 6500                       		bcs.s	locret_70E8
000076E8 31FC 0410 F726             		move.w	#$410,(v_limitbtm1).w
000076EE 0C78 17F0 F700             		cmpi.w	#$17F0,(v_screenposx).w
000076F4 6500                       		bcs.s	locret_70E8
000076F6 6100 0000                  		bsr.w	FindFreeObj
000076FA 6600                       		bne.s	loc_70D0
000076FC 137C 0000 0000             		move.b	#id_BossMarble,0(a1) ; load MZ boss object
00007702 337C 19F0 0008             		move.w	#$19F0,obX(a1)
00007708 337C 042C 000C             		move.w	#$42C,obY(a1)
0000770E                            
0000770E                            loc_70D0:
00007716 11FC 0001 F7AA             		move.b	#1,(f_lockscreen).w ; lock screen
0000771C 5438 F742                  		addq.b	#2,(v_dle_routine).w
00007720 7000                       		moveq	#plcid_Boss,d0
00007722 6000 9C4A                  		bra.w	AddPLC		; load boss patterns
00007726                            ; ===========================================================================
00007726                            
00007726                            locret_70E8:
00007726 4E75                       		rts	
00007728                            ; ===========================================================================
00007728                            
00007728                            DLE_MZ3end:
00007728 31F8 F700 F728             		move.w	(v_screenposx).w,(v_limitleft2).w
0000772E 4E75                       		rts	
00007730                            ; ===========================================================================
00007730                            ; ---------------------------------------------------------------------------
00007730                            ; Star Light Zone dynamic level events
00007730                            ; ---------------------------------------------------------------------------
00007730                            
00007730                            DLE_SLZ:
00007730 7000                       		moveq	#0,d0
00007732 1038 FE11                  		move.b	(v_act).w,d0
00007736 D040                       		add.w	d0,d0
00007738 303B 0000                  		move.w	DLE_SLZx(pc,d0.w),d0
0000773C 4EFB 0000                  		jmp	DLE_SLZx(pc,d0.w)
00007740                            ; ===========================================================================
00007740 0000                       DLE_SLZx:	dc.w DLE_SLZ12-DLE_SLZx
00007742 0000                       		dc.w DLE_SLZ12-DLE_SLZx
00007744 0000                       		dc.w DLE_SLZ3-DLE_SLZx
00007746                            ; ===========================================================================
00007746                            
00007746                            DLE_SLZ12:
00007746 4E75                       		rts	
00007748                            ; ===========================================================================
00007748                            
00007748                            DLE_SLZ3:
00007748 7000                       		moveq	#0,d0
0000774A 1038 F742                  		move.b	(v_dle_routine).w,d0
0000774E 303B 0000                  		move.w	off_7118(pc,d0.w),d0
00007752 4EFB 0000                  		jmp	off_7118(pc,d0.w)
00007756                            ; ===========================================================================
00007756 0000                       off_7118:	dc.w DLE_SLZ3main-off_7118
00007758 0000                       		dc.w DLE_SLZ3boss-off_7118
0000775A 0000                       		dc.w DLE_SLZ3end-off_7118
0000775C                            ; ===========================================================================
0000775C                            
0000775C                            DLE_SLZ3main:
0000775C 0C78 1E70 F700             		cmpi.w	#$1E70,(v_screenposx).w
00007762 6500                       		bcs.s	locret_7130
00007764 31FC 0210 F726             		move.w	#$210,(v_limitbtm1).w
0000776A 5438 F742                  		addq.b	#2,(v_dle_routine).w
0000776E                            
0000776E                            locret_7130:
0000776E 4E75                       		rts	
00007770                            ; ===========================================================================
00007770                            
00007770                            DLE_SLZ3boss:
00007770 0C78 2000 F700             		cmpi.w	#$2000,(v_screenposx).w
00007776 6500                       		bcs.s	locret_715C
00007778 6100 0000                  		bsr.w	FindFreeObj
0000777C 6600                       		bne.s	loc_7144
0000777E 12BC 0000                  		move.b	#id_BossStarLight,(a1) ; load SLZ boss object
00007782                            
00007782                            loc_7144:
0000778A 11FC 0001 F7AA             		move.b	#1,(f_lockscreen).w ; lock screen
00007790 5438 F742                  		addq.b	#2,(v_dle_routine).w
00007794 7000                       		moveq	#plcid_Boss,d0
00007796 6000 9BD6                  		bra.w	AddPLC		; load boss patterns
0000779A                            ; ===========================================================================
0000779A                            
0000779A                            locret_715C:
0000779A 4E75                       		rts	
0000779C                            ; ===========================================================================
0000779C                            
0000779C                            DLE_SLZ3end:
0000779C 31F8 F700 F728             		move.w	(v_screenposx).w,(v_limitleft2).w
000077A2 4E75                       		rts
000077A4 4E75                       		rts
000077A6                            ; ===========================================================================
000077A6                            ; ---------------------------------------------------------------------------
000077A6                            ; Spring Yard Zone dynamic level events
000077A6                            ; ---------------------------------------------------------------------------
000077A6                            
000077A6                            DLE_SYZ:
000077A6 7000                       		moveq	#0,d0
000077A8 1038 FE11                  		move.b	(v_act).w,d0
000077AC D040                       		add.w	d0,d0
000077AE 303B 0000                  		move.w	DLE_SYZx(pc,d0.w),d0
000077B2 4EFB 0000                  		jmp	DLE_SYZx(pc,d0.w)
000077B6                            ; ===========================================================================
000077B6 0000                       DLE_SYZx:	dc.w DLE_SYZ1-DLE_SYZx
000077B8 0000                       		dc.w DLE_SYZ2-DLE_SYZx
000077BA 0000                       		dc.w DLE_SYZ3-DLE_SYZx
000077BC                            ; ===========================================================================
000077BC                            
000077BC                            DLE_SYZ1:
000077BC 4E75                       		rts	
000077BE                            ; ===========================================================================
000077BE                            
000077BE                            DLE_SYZ2:
000077BE 31FC 0520 F726             		move.w	#$520,(v_limitbtm1).w
000077C4 0C78 25A0 F700             		cmpi.w	#$25A0,(v_screenposx).w
000077CA 6500                       		bcs.s	locret_71A2
000077CC 31FC 0420 F726             		move.w	#$420,(v_limitbtm1).w
000077D2 0C78 04D0 D00C             		cmpi.w	#$4D0,(v_player+obY).w
000077D8 6500                       		bcs.s	locret_71A2
000077DA 31FC 0520 F726             		move.w	#$520,(v_limitbtm1).w
000077E0                            
000077E0                            locret_71A2:
000077E0 4E75                       		rts	
000077E2                            ; ===========================================================================
000077E2                            
000077E2                            DLE_SYZ3:
000077E2 7000                       		moveq	#0,d0
000077E4 1038 F742                  		move.b	(v_dle_routine).w,d0
000077E8 303B 0000                  		move.w	off_71B2(pc,d0.w),d0
000077EC 4EFB 0000                  		jmp	off_71B2(pc,d0.w)
000077F0                            ; ===========================================================================
000077F0 0000                       off_71B2:	dc.w DLE_SYZ3main-off_71B2
000077F2 0000                       		dc.w DLE_SYZ3boss-off_71B2
000077F4 0000                       		dc.w DLE_SYZ3end-off_71B2
000077F6                            ; ===========================================================================
000077F6                            
000077F6                            DLE_SYZ3main:
000077F6 0C78 2AC0 F700             		cmpi.w	#$2AC0,(v_screenposx).w
000077FC 6500                       		bcs.s	locret_71CE
000077FE 6100 0000                  		bsr.w	FindFreeObj
00007802 6600                       		bne.s	locret_71CE
00007804 12BC 0000                  		move.b	#id_BossBlock,(a1) ; load blocks that boss picks up
00007808 5438 F742                  		addq.b	#2,(v_dle_routine).w
0000780C                            
0000780C                            locret_71CE:
0000780C 4E75                       		rts	
0000780E                            ; ===========================================================================
0000780E                            
0000780E                            DLE_SYZ3boss:
0000780E 0C78 2C00 F700             		cmpi.w	#$2C00,(v_screenposx).w
00007814 6500                       		bcs.s	locret_7200
00007816 31FC 04CC F726             		move.w	#$4CC,(v_limitbtm1).w
0000781C 6100 0000                  		bsr.w	FindFreeObj
00007820 6600                       		bne.s	loc_71EC
00007822 12BC 0000                  		move.b	#id_BossSpringYard,(a1) ; load SYZ boss	object
00007826 5438 F742                  		addq.b	#2,(v_dle_routine).w
0000782A                            
0000782A                            loc_71EC:
00007832 11FC 0001 F7AA             		move.b	#1,(f_lockscreen).w ; lock screen
00007838 7000                       		moveq	#plcid_Boss,d0
0000783A 6000 9B32                  		bra.w	AddPLC		; load boss patterns
0000783E                            ; ===========================================================================
0000783E                            
0000783E                            locret_7200:
0000783E 4E75                       		rts	
00007840                            ; ===========================================================================
00007840                            
00007840                            DLE_SYZ3end:
00007840 31F8 F700 F728             		move.w	(v_screenposx).w,(v_limitleft2).w
00007846 4E75                       		rts	
00007848                            ; ===========================================================================
00007848                            ; ---------------------------------------------------------------------------
00007848                            ; Scrap	Brain Zone dynamic level events
00007848                            ; ---------------------------------------------------------------------------
00007848                            
00007848                            DLE_SBZ:
00007848 7000                       		moveq	#0,d0
0000784A 1038 FE11                  		move.b	(v_act).w,d0
0000784E D040                       		add.w	d0,d0
00007850 303B 0000                  		move.w	DLE_SBZx(pc,d0.w),d0
00007854 4EFB 0000                  		jmp	DLE_SBZx(pc,d0.w)
00007858                            ; ===========================================================================
00007858 0000                       DLE_SBZx:	dc.w DLE_SBZ1-DLE_SBZx
0000785A 0000                       		dc.w DLE_SBZ2-DLE_SBZx
0000785C 0000                       		dc.w DLE_FZ-DLE_SBZx
0000785E                            ; ===========================================================================
0000785E                            
0000785E                            DLE_SBZ1:
0000785E 31FC 0720 F726             		move.w	#$720,(v_limitbtm1).w
00007864 0C78 1880 F700             		cmpi.w	#$1880,(v_screenposx).w
0000786A 6500                       		bcs.s	locret_7242
0000786C 31FC 0620 F726             		move.w	#$620,(v_limitbtm1).w
00007872 0C78 2000 F700             		cmpi.w	#$2000,(v_screenposx).w
00007878 6500                       		bcs.s	locret_7242
0000787A 31FC 02A0 F726             		move.w	#$2A0,(v_limitbtm1).w
00007880                            
00007880                            locret_7242:
00007880 4E75                       		rts	
00007882                            ; ===========================================================================
00007882                            
00007882                            DLE_SBZ2:
00007882 7000                       		moveq	#0,d0
00007884 1038 F742                  		move.b	(v_dle_routine).w,d0
00007888 303B 0000                  		move.w	off_7252(pc,d0.w),d0
0000788C 4EFB 0000                  		jmp	off_7252(pc,d0.w)
00007890                            ; ===========================================================================
00007890 0000                       off_7252:	dc.w DLE_SBZ2main-off_7252
00007892 0000                       		dc.w DLE_SBZ2boss-off_7252
00007894 0000                       		dc.w DLE_SBZ2boss2-off_7252
00007896 0000                       		dc.w DLE_SBZ2end-off_7252
00007898                            ; ===========================================================================
00007898                            
00007898                            DLE_SBZ2main:
00007898 31FC 0800 F726             		move.w	#$800,(v_limitbtm1).w
0000789E 0C78 1800 F700             		cmpi.w	#$1800,(v_screenposx).w
000078A4 6500                       		bcs.s	locret_727A
000078A6 31FC 0800 F726             		move.w	#$800,(v_limitbtm1).w
000078AC 0C78 1E00 F700             		cmpi.w	#$1E00,(v_screenposx).w
000078B2 6500                       		bcs.s	locret_727A
000078B4 5438 F742                  		addq.b	#2,(v_dle_routine).w
000078B8                            
000078B8                            locret_727A:
000078B8 4E75                       		rts	
000078BA                            ; ===========================================================================
000078BA                            
000078BA                            DLE_SBZ2boss:
000078BA 0C78 1EB0 F700             		cmpi.w	#$1EB0,(v_screenposx).w
000078C0 6500                       		bcs.s	locret_7298
000078C2 6100 0000                  		bsr.w	FindFreeObj
000078C6 6600                       		bne.s	locret_7298
000078C8 12BC 0000                  		move.b	#id_FalseFloor,(a1) ; load collapsing block object
000078CC 5438 F742                  		addq.b	#2,(v_dle_routine).w
000078D0 7000                       		moveq	#plcid_EggmanSBZ2,d0
000078D2 6000 9A9A                  		bra.w	AddPLC		; load SBZ2 Eggman patterns
000078D6                            ; ===========================================================================
000078D6                            
000078D6                            locret_7298:
000078D6 4E75                       		rts	
000078D8                            ; ===========================================================================
000078D8                            
000078D8                            DLE_SBZ2boss2:
000078D8 0C78 1F60 F700             		cmpi.w	#$1F60,(v_screenposx).w
000078DE 6500                       		bcs.s	loc_72B6
000078E0 6100 0000                  		bsr.w	FindFreeObj
000078E4 6600                       		bne.s	loc_72B0
000078E6 12BC 0000                  		move.b	#id_ScrapEggman,(a1) ; load SBZ2 Eggman object
000078EA 5438 F742                  		addq.b	#2,(v_dle_routine).w
000078EE                            
000078EE                            loc_72B0:
000078EE 11FC 0001 F7AA             		move.b	#1,(f_lockscreen).w ; lock screen
000078F4                            
000078F4                            loc_72B6:
000078F4 6000                       		bra.s	loc_72C2
000078F6                            ; ===========================================================================
000078F6                            
000078F6                            DLE_SBZ2end:
000078F6 0C78 2050 F700             		cmpi.w	#$2050,(v_screenposx).w
000078FC 6500                       		bcs.s	loc_72C2
000078FE 4E75                       		rts	
00007900                            ; ===========================================================================
00007900                            
00007900                            loc_72C2:
00007900                            	;	move.w	(v_screenposx).w,(v_limitleft2).w
00007900 4E75                       		rts	
00007902                            ; ===========================================================================
00007902                            
00007902                            DLE_FZ:
00007902 7000                       		moveq	#0,d0
00007904 1038 F742                  		move.b	(v_dle_routine).w,d0
00007908 303B 0000                  		move.w	off_72D8(pc,d0.w),d0
0000790C 4EFB 0000                  		jmp	off_72D8(pc,d0.w)
00007910                            ; ===========================================================================
00007910 0000 0000                  off_72D8:	dc.w DLE_FZmain-off_72D8, DLE_FZboss-off_72D8
00007914 0000 0000                  		dc.w DLE_FZend-off_72D8, locret_7322-off_72D8
00007918 0000                       		dc.w DLE_FZend2-off_72D8
0000791A                            ; ===========================================================================
0000791A                            
0000791A                            DLE_FZmain:
0000791A 0C78 2148 F700             		cmpi.w	#$2148,(v_screenposx).w
00007920 6500                       		bcs.s	loc_72F4
00007922 5438 F742                  		addq.b	#2,(v_dle_routine).w
00007926 7000                       		moveq	#plcid_FZBoss,d0
00007928 6100 9A44                  		bsr.w	AddPLC		; load FZ boss patterns
0000792C                            
0000792C                            loc_72F4:
0000792C 60D2                       		bra.s	loc_72C2
0000792E                            ; ===========================================================================
0000792E                            
0000792E                            DLE_FZboss:
0000792E 0C78 2300 F700             		cmpi.w	#$2300,(v_screenposx).w
00007934 6500                       		bcs.s	loc_7312
00007936 6100 0000                  		bsr.w	FindFreeObj
0000793A 6600                       		bne.s	loc_7312
0000793C 12BC 0000                  		move.b	#id_BossFinal,(a1) ; load FZ boss object
00007940 5438 F742                  		addq.b	#2,(v_dle_routine).w
00007944 11FC 0001 F7AA             		move.b	#1,(f_lockscreen).w ; lock screen
0000794A                            
0000794A                            loc_7312:
0000794A 60B4                       		bra.s	loc_72C2
0000794C                            ; ===========================================================================
0000794C                            
0000794C                            DLE_FZend:
0000794C 0C78 2450 F700             		cmpi.w	#$2450,(v_screenposx).w
00007952 6500                       		bcs.s	loc_7320
00007954 5438 F742                  		addq.b	#2,(v_dle_routine).w
00007958                            
00007958                            loc_7320:
00007958 60A6                       		bra.s	loc_72C2
0000795A                            ; ===========================================================================
0000795A                            
0000795A                            locret_7322:
0000795A 4E75                       		rts	
0000795C                            ; ===========================================================================
0000795C                            
0000795C                            DLE_FZend2:
0000795C 60A2                       		bra.s	loc_72C2
0000795E                            ; ===========================================================================
0000795E                            ; ---------------------------------------------------------------------------
0000795E                            ; Ending sequence dynamic level events (empty)
0000795E                            ; ---------------------------------------------------------------------------
0000795E                            
0000795E                            DLE_Ending:
0000795E 4E75                       		rts	
00007960                            		
00007960                            ; ---------------------------------------------------------------------------
00007960                            ; Ice Mountain dynamic level events (empty)
00007960                            ; ---------------------------------------------------------------------------
00007960                            
00007960                            DLE_IMZ:
00007960 4E75                       		rts	
00007960 4E75                       		rts	
00007962                            
00007962                            		include	"_incObj\11 Bridge (part 1).asm"
00007962                            ; ---------------------------------------------------------------------------
00007962                            ; Object 11 - GHZ bridge
00007962                            ; ---------------------------------------------------------------------------
00007962                            
00007962                            Bridge:
00007962 7000                       		moveq	#0,d0
00007964 1028 0024                  		move.b	obRoutine(a0),d0
00007968 323B 0000                  		move.w	Bri_Index(pc,d0.w),d1
0000796C 4EFB 1000                  		jmp	Bri_Index(pc,d1.w)
00007970                            ; ===========================================================================
00007970 0000 0000                  Bri_Index:	dc.w Bri_Main-Bri_Index, Bri_Action-Bri_Index
00007974 0000 0000                  		dc.w Bri_Platform-Bri_Index, Bri_Delete-Bri_Index
00007978 0000 0000                  		dc.w Bri_Delete-Bri_Index, Bri_Display-Bri_Index
0000797C                            ; ===========================================================================
0000797C                            
0000797C                            Bri_Main:	; Routine 0
0000797C 5428 0024                  		addq.b	#2,obRoutine(a0)
00007980 217C 0000 0000 0004        		move.l	#Map_Bri,obMap(a0)
00007988 317C 438E 0002             		move.w	#$438E,obGfx(a0)
0000798E 117C 0004 0001             		move.b	#4,obRender(a0)
00007994 117C 0003 0018             		move.b	#3,obPriority(a0)
0000799A 117C 0080 0019             		move.b	#$80,obActWid(a0)
000079A0 3428 000C                  		move.w	obY(a0),d2
000079A4 3628 0008                  		move.w	obX(a0),d3
000079A8 1828 0000                  		move.b	0(a0),d4	; copy object number ($11) to d4
000079AC 45E8 0028                  		lea	obSubtype(a0),a2
000079B0 7200                       		moveq	#0,d1
000079B2 1212                       		move.b	(a2),d1		; copy bridge length to d1
000079B4 14FC 0000                  		move.b	#0,(a2)+	; clear bridge length
000079B8 3001                       		move.w	d1,d0
000079BA E248                       		lsr.w	#1,d0
000079BC E948                       		lsl.w	#4,d0
000079BE 9640                       		sub.w	d0,d3		; d3 is position of leftmost log
000079C0 5501                       		subq.b	#2,d1
000079C2 6500                       		bcs.s	Bri_Action	; don't make more if bridge has only 1 log
000079C4                            
000079C4                            @buildloop:
000079C4 6100 0000                  		bsr.w	FindFreeObj
000079C8 6600                       		bne.s	Bri_Action
000079CA 5228 0028                  		addq.b	#1,obSubtype(a0)
000079CE B668 0008                  		cmp.w	obX(a0),d3	; is this log the leftmost one?
000079D2 6600                       		bne.s	@notleftmost	; if not, branch
000079D4                            
000079D4 0643 0010                  		addi.w	#$10,d3
000079D8 3142 000C                  		move.w	d2,obY(a0)
000079DC 3142 003C                  		move.w	d2,$3C(a0)
000079E0 3A08                       		move.w	a0,d5
000079E2 0445 D000                  		subi.w	#$D000,d5
000079E6 EC4D                       		lsr.w	#6,d5
000079E8 0245 007F                  		andi.w	#$7F,d5
000079EC 14C5                       		move.b	d5,(a2)+
000079EE 5228 0028                  		addq.b	#1,obSubtype(a0)
000079F2                            
000079F2                            	@notleftmost:
000079F2 3A09                       		move.w	a1,d5
000079F4 0445 D000                  		subi.w	#$D000,d5
000079F8 EC4D                       		lsr.w	#6,d5
000079FA 0245 007F                  		andi.w	#$7F,d5
000079FE 14C5                       		move.b	d5,(a2)+
00007A00 137C 000A 0024             		move.b	#$A,obRoutine(a1)
00007A06 1344 0000                  		move.b	d4,0(a1)	; load bridge object (d4 = $11)
00007A0A 3342 000C                  		move.w	d2,obY(a1)
00007A0E 3342 003C                  		move.w	d2,$3C(a1)
00007A12 3343 0008                  		move.w	d3,obX(a1)
00007A16 237C 0000 0000 0004        		move.l	#Map_Bri,obMap(a1)
00007A1E 337C 438E 0002             		move.w	#$438E,obGfx(a1)
00007A24 137C 0004 0001             		move.b	#4,obRender(a1)
00007A2A 137C 0003 0018             		move.b	#3,obPriority(a1)
00007A30 137C 0008 0019             		move.b	#8,obActWid(a1)
00007A36 0643 0010                  		addi.w	#$10,d3
00007A3A 51C9 FF88                  		dbf	d1,@buildloop ; repeat d1 times (length of bridge)
00007A3E                            
00007A3E                            Bri_Action:	; Routine 2
00007A3E 6100                       		bsr.s	Bri_Solid
00007A40 4A28 003E                  		tst.b	$3E(a0)
00007A44 6700                       		beq.s	@display
00007A46 5928 003E                  		subq.b	#4,$3E(a0)
00007A4A 6100 0000                  		bsr.w	Bri_Bend
00007A4E                            
00007A4E                            	@display:
00007A4E 6100 0000                  		bsr.w	DisplaySprite
00007A52 6000 0000                  		bra.w	Bri_ChkDel
00007A56                            
00007A56                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00007A56                            
00007A56                            
00007A56                            Bri_Solid:
00007A56 7200                       		moveq	#0,d1
00007A58 1228 0028                  		move.b	obSubtype(a0),d1
00007A5C E749                       		lsl.w	#3,d1
00007A5E 3401                       		move.w	d1,d2
00007A60 5041                       		addq.w	#8,d1
00007A62 D442                       		add.w	d2,d2
00007A64 43F8 D000                  		lea	(v_player).w,a1
00007A68 4A69 0012                  		tst.w	obVelY(a1)
00007A6C 6B00 0000                  		bmi.w	Plat_Exit
00007A70 3029 0008                  		move.w	obX(a1),d0
00007A74 9068 0008                  		sub.w	obX(a0),d0
00007A78 D041                       		add.w	d1,d0
00007A7A 6B00 0000                  		bmi.w	Plat_Exit
00007A7E B042                       		cmp.w	d2,d0
00007A80 6400 0000                  		bcc.w	Plat_Exit
00007A84 6000                       		bra.s	Plat_NoXCheck
00007A86                            ; End of function Bri_Solid
00007A86                            ; End of function Bri_Solid
00007A86                            
00007A86                            ; ---------------------------------------------------------------------------
00007A86                            ; Platform subroutine
00007A86                            ; ---------------------------------------------------------------------------
00007A86                            
00007A86                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00007A86                            
00007A86                            PlatformObject:
00007A86 43F8 D000                  		lea	(v_player).w,a1
00007A8A 4A69 0012                  		tst.w	obVelY(a1)	; is Sonic moving up/jumping?
00007A8E 6B00 0000                  		bmi.w	Plat_Exit	; if yes, branch
00007A92                            
00007A92                            ;		perform x-axis range check
00007A92 3029 0008                  		move.w	obX(a1),d0
00007A96 9068 0008                  		sub.w	obX(a0),d0
00007A9A D041                       		add.w	d1,d0
00007A9C 6B00 0000                  		bmi.w	Plat_Exit
00007AA0 D241                       		add.w	d1,d1
00007AA2 B041                       		cmp.w	d1,d0
00007AA4 6400 0000                  		bhs.w	Plat_Exit
00007AA8                            
00007AA8                            	Plat_NoXCheck:
00007AA8 3028 000C                  		move.w	obY(a0),d0
00007AAC 5140                       		subq.w	#8,d0
00007AAE                            
00007AAE                            Platform3:
00007AAE                            ;		perform y-axis range check
00007AAE 3429 000C                  		move.w	obY(a1),d2
00007AB2 1229 0016                  		move.b	obHeight(a1),d1
00007AB6 4881                       		ext.w	d1
00007AB8 D242                       		add.w	d2,d1
00007ABA 5841                       		addq.w	#4,d1
00007ABC 9041                       		sub.w	d1,d0
00007ABE 6200 0000                  		bhi.w	Plat_Exit
00007AC2 0C40 FFF0                  		cmpi.w	#-$10,d0
00007AC6 6500 0000                  		blo.w	Plat_Exit
00007ACA                            
00007ACA 4A38 F7C8                  		tst.b	(f_lockmulti).w
00007ACE 6B00 0000                  		bmi.w	Plat_Exit
00007AD2 0C29 0006 0024             		cmpi.b	#6,obRoutine(a1)
00007AD8 6400 0000                  		bhs.w	Plat_Exit
00007ADC D440                       		add.w	d0,d2
00007ADE 5642                       		addq.w	#3,d2
00007AE0 3342 000C                  		move.w	d2,obY(a1)
00007AE4 5428 0024                  		addq.b	#2,obRoutine(a0)
00007AE8                            
00007AE8                            loc_74AE:
00007AE8 0829 0003 0022             		btst	#3,obStatus(a1)
00007AEE 6700                       		beq.s	loc_74DC
00007AF0 7000                       		moveq	#0,d0
00007AF2 1029 003D                  		move.b	$3D(a1),d0
00007AF6 ED48                       		lsl.w	#6,d0
00007AF8 0680 00FF D000             		addi.l	#v_objspace&$FFFFFF,d0
00007AFE 2440                       		movea.l	d0,a2
00007B00 08AA 0003 0022             		bclr	#3,obStatus(a2)
00007B06 422A 0025                  		clr.b	ob2ndRout(a2)
00007B0A 0C2A 0004 0024             		cmpi.b	#4,obRoutine(a2)
00007B10 6600                       		bne.s	loc_74DC
00007B12 552A 0024                  		subq.b	#2,obRoutine(a2)
00007B16                            
00007B16                            loc_74DC:
00007B16 3008                       		move.w	a0,d0
00007B18 0440 D000                  		subi.w	#-$3000,d0
00007B1C EC48                       		lsr.w	#6,d0
00007B1E 0240 007F                  		andi.w	#$7F,d0
00007B22 1340 003D                  		move.b	d0,$3D(a1)
00007B26 137C 0000 0026             		move.b	#0,obAngle(a1)
00007B2C 337C 0000 0012             		move.w	#0,obVelY(a1)
00007B32 3369 0010 0014             		move.w	obVelX(a1),obInertia(a1)
00007B38 0829 0001 0022             		btst	#1,obStatus(a1)
00007B3E 6700                       		beq.s	loc_7512
00007B40 2F08                       		move.l	a0,-(sp)
00007B42 2049                       		movea.l	a1,a0
00007B44 4EB9 0000 0000             		jsr	(Sonic_ResetOnFloor).l
00007B4A 205F                       		movea.l	(sp)+,a0
00007B4C                            
00007B4C                            loc_7512:
00007B4C 08E9 0003 0022             		bset	#3,obStatus(a1)
00007B52 08E8 0003 0022             		bset	#3,obStatus(a0)
00007B58                            
00007B58                            Plat_Exit:
00007B58 4E75                       		rts	
00007B5A                            ; End of function PlatformObject
00007B5A                            
00007B5A                            ; ---------------------------------------------------------------------------
00007B5A                            ; Sloped platform subroutine (GHZ collapsing ledges and	SLZ seesaws)
00007B5A                            ; ---------------------------------------------------------------------------
00007B5A                            
00007B5A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00007B5A                            
00007B5A                            
00007B5A                            SlopeObject:
00007B5A 43F8 D000                  		lea	(v_player).w,a1
00007B5E 4A69 0012                  		tst.w	obVelY(a1)
00007B62 6B00 FFF4                  		bmi.w	Plat_Exit
00007B66 3029 0008                  		move.w	obX(a1),d0
00007B6A 9068 0008                  		sub.w	obX(a0),d0
00007B6E D041                       		add.w	d1,d0
00007B70 6BE6                       		bmi.s	Plat_Exit
00007B72 D241                       		add.w	d1,d1
00007B74 B041                       		cmp.w	d1,d0
00007B76 64E0                       		bhs.s	Plat_Exit
00007B78 0828 0000 0001             		btst	#0,obRender(a0)
00007B7E 6700                       		beq.s	loc_754A
00007B80 4640                       		not.w	d0
00007B82 D041                       		add.w	d1,d0
00007B84                            
00007B84                            loc_754A:
00007B84 E248                       		lsr.w	#1,d0
00007B86 7600                       		moveq	#0,d3
00007B88 1632 0000                  		move.b	(a2,d0.w),d3
00007B8C 3028 000C                  		move.w	obY(a0),d0
00007B90 9043                       		sub.w	d3,d0
00007B92 6000 FF1A                  		bra.w	Platform3
00007B96                            ; End of function SlopeObject
00007B96                            
00007B96                            
00007B96                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00007B96                            
00007B96                            
00007B96                            Swing_Solid:
00007B96 43F8 D000                  		lea	(v_player).w,a1
00007B9A 4A69 0012                  		tst.w	obVelY(a1)
00007B9E 6B00 FFB8                  		bmi.w	Plat_Exit
00007BA2 3029 0008                  		move.w	obX(a1),d0
00007BA6 9068 0008                  		sub.w	obX(a0),d0
00007BAA D041                       		add.w	d1,d0
00007BAC 6B00 FFAA                  		bmi.w	Plat_Exit
00007BB0 D241                       		add.w	d1,d1
00007BB2 B041                       		cmp.w	d1,d0
00007BB4 6400 FFA2                  		bhs.w	Plat_Exit
00007BB8 3028 000C                  		move.w	obY(a0),d0
00007BBC 9043                       		sub.w	d3,d0
00007BBE 6000 FEEE                  		bra.w	Platform3
00007BC2                            ; End of function Obj15_Solid
00007BC2                            
00007BC2                            ; ===========================================================================
00007BC2                            
00007BC2                            		include	"_incObj\11 Bridge (part 2).asm"
00007BC2                            
00007BC2                            Bri_Platform:	; Routine 4
00007BC2 6100                       		bsr.s	Bri_WalkOff
00007BC4 6100 0000                  		bsr.w	DisplaySprite
00007BC8 6000 0000                  		bra.w	Bri_ChkDel
00007BCC                            
00007BCC                            ; ---------------------------------------------------------------------------
00007BCC                            ; Subroutine allowing Sonic to walk off a bridge
00007BCC                            ; ---------------------------------------------------------------------------
00007BCC                            
00007BCC                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00007BCC                            
00007BCC                            
00007BCC                            Bri_WalkOff:
00007BCC 7200                       		moveq	#0,d1
00007BCE 1228 0028                  		move.b	obSubtype(a0),d1
00007BD2 E749                       		lsl.w	#3,d1
00007BD4 3401                       		move.w	d1,d2
00007BD6 5041                       		addq.w	#8,d1
00007BD8 6100                       		bsr.s	ExitPlatform2
00007BDA 6400                       		bcc.s	locret_75BE
00007BDC E848                       		lsr.w	#4,d0
00007BDE 1140 003F                  		move.b	d0,$3F(a0)
00007BE2 1028 003E                  		move.b	$3E(a0),d0
00007BE6 0C00 0040                  		cmpi.b	#$40,d0
00007BEA 6700                       		beq.s	loc_75B6
00007BEC 5828 003E                  		addq.b	#4,$3E(a0)
00007BF0                            
00007BF0                            loc_75B6:
00007BF0 6100 0000                  		bsr.w	Bri_Bend
00007BF4 6100 0000                  		bsr.w	Bri_MoveSonic
00007BF8                            
00007BF8                            locret_75BE:
00007BF8 4E75                       		rts	
00007BFA                            ; End of function Bri_WalkOff
00007BFA                            ; End of function Bri_WalkOff
00007BFA                            
00007BFA                            ; ---------------------------------------------------------------------------
00007BFA                            ; Subroutine allowing Sonic to walk or jump off	a platform
00007BFA                            ; ---------------------------------------------------------------------------
00007BFA                            
00007BFA                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00007BFA                            
00007BFA                            
00007BFA                            ExitPlatform:
00007BFA 3401                       		move.w	d1,d2
00007BFC                            
00007BFC                            ExitPlatform2:
00007BFC D442                       		add.w	d2,d2
00007BFE 43F8 D000                  		lea	(v_player).w,a1
00007C02 0829 0001 0022             		btst	#1,obStatus(a1)
00007C08 6600                       		bne.s	loc_75E0
00007C0A 3029 0008                  		move.w	obX(a1),d0
00007C0E 9068 0008                  		sub.w	obX(a0),d0
00007C12 D041                       		add.w	d1,d0
00007C14 6B00                       		bmi.s	loc_75E0
00007C16 B042                       		cmp.w	d2,d0
00007C18 6500                       		blo.s	locret_75F2
00007C1A                            
00007C1A                            loc_75E0:
00007C1A 08A9 0003 0022             		bclr	#3,obStatus(a1)
00007C20 117C 0002 0024             		move.b	#2,obRoutine(a0)
00007C26 08A8 0003 0022             		bclr	#3,obStatus(a0)
00007C2C                            
00007C2C                            locret_75F2:
00007C2C 4E75                       		rts	
00007C2E                            ; End of function ExitPlatform
00007C2E                            
00007C2E                            		include	"_incObj\11 Bridge (part 3).asm"
00007C2E                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00007C2E                            
00007C2E                            
00007C2E                            Bri_MoveSonic:
00007C2E 7000                       		moveq	#0,d0
00007C30 1028 003F                  		move.b	$3F(a0),d0
00007C34 1030 0029                  		move.b	$29(a0,d0.w),d0
00007C38 ED48                       		lsl.w	#6,d0
00007C3A 0680 00FF D000             		addi.l	#v_objspace&$FFFFFF,d0
00007C40 2440                       		movea.l	d0,a2
00007C42 43F8 D000                  		lea	(v_player).w,a1
00007C46 302A 000C                  		move.w	obY(a2),d0
00007C4A 5140                       		subq.w	#8,d0
00007C4C 7200                       		moveq	#0,d1
00007C4E 1229 0016                  		move.b	obHeight(a1),d1
00007C52 9041                       		sub.w	d1,d0
00007C54 3340 000C                  		move.w	d0,obY(a1)	; change Sonic's position on y-axis
00007C58 4E75                       		rts	
00007C5A                            ; End of function Bri_MoveSonic
00007C5A                            
00007C5A                            
00007C5A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00007C5A                            
00007C5A                            
00007C5A                            Bri_Bend:
00007C5A 1028 003E                  		move.b	$3E(a0),d0
00007C5E 6100 AB8C                  		bsr.w	CalcSine
00007C62 3800                       		move.w	d0,d4
00007C64 49F9 0000 0000             		lea	(Obj11_BendData2).l,a4
00007C6A 7000                       		moveq	#0,d0
00007C6C 1028 0028                  		move.b	obSubtype(a0),d0
00007C70 E948                       		lsl.w	#4,d0
00007C72 7600                       		moveq	#0,d3
00007C74 1628 003F                  		move.b	$3F(a0),d3
00007C78 3403                       		move.w	d3,d2
00007C7A D640                       		add.w	d0,d3
00007C7C 7A00                       		moveq	#0,d5
00007C7E 4BF9 0000 0000             		lea	(Obj11_BendData).l,a5
00007C84 1A35 3000                  		move.b	(a5,d3.w),d5
00007C88 0243 000F                  		andi.w	#$F,d3
00007C8C E94B                       		lsl.w	#4,d3
00007C8E 47F4 3000                  		lea	(a4,d3.w),a3
00007C92 45E8 0029                  		lea	$29(a0),a2
00007C96                            
00007C96                            loc_765C:
00007C96 7000                       		moveq	#0,d0
00007C98 101A                       		move.b	(a2)+,d0
00007C9A ED48                       		lsl.w	#6,d0
00007C9C 0680 00FF D000             		addi.l	#v_objspace&$FFFFFF,d0
00007CA2 2240                       		movea.l	d0,a1
00007CA4 7000                       		moveq	#0,d0
00007CA6 101B                       		move.b	(a3)+,d0
00007CA8 5240                       		addq.w	#1,d0
00007CAA C0C5                       		mulu.w	d5,d0
00007CAC C0C4                       		mulu.w	d4,d0
00007CAE 4840                       		swap	d0
00007CB0 D069 003C                  		add.w	$3C(a1),d0
00007CB4 3340 000C                  		move.w	d0,obY(a1)
00007CB8 51CA FFDC                  		dbf	d2,loc_765C
00007CBC 7000                       		moveq	#0,d0
00007CBE 1028 0028                  		move.b	obSubtype(a0),d0
00007CC2 7600                       		moveq	#0,d3
00007CC4 1628 003F                  		move.b	$3F(a0),d3
00007CC8 5203                       		addq.b	#1,d3
00007CCA 9600                       		sub.b	d0,d3
00007CCC 4403                       		neg.b	d3
00007CCE 6B00                       		bmi.s	locret_76CA
00007CD0 3403                       		move.w	d3,d2
00007CD2 E94B                       		lsl.w	#4,d3
00007CD4 47F4 3000                  		lea	(a4,d3.w),a3
00007CD8 D6C2                       		adda.w	d2,a3
00007CDA 5342                       		subq.w	#1,d2
00007CDC 6500                       		bcs.s	locret_76CA
00007CDE                            
00007CDE                            loc_76A4:
00007CDE 7000                       		moveq	#0,d0
00007CE0 101A                       		move.b	(a2)+,d0
00007CE2 ED48                       		lsl.w	#6,d0
00007CE4 0680 00FF D000             		addi.l	#v_objspace&$FFFFFF,d0
00007CEA 2240                       		movea.l	d0,a1
00007CEC 7000                       		moveq	#0,d0
00007CEE 1023                       		move.b	-(a3),d0
00007CF0 5240                       		addq.w	#1,d0
00007CF2 C0C5                       		mulu.w	d5,d0
00007CF4 C0C4                       		mulu.w	d4,d0
00007CF6 4840                       		swap	d0
00007CF8 D069 003C                  		add.w	$3C(a1),d0
00007CFC 3340 000C                  		move.w	d0,obY(a1)
00007D00 51CA FFDC                  		dbf	d2,loc_76A4
00007D04                            
00007D04                            locret_76CA:
00007D04 4E75                       		rts	
00007D06                            ; End of function Bri_Bend
00007D06                            
00007D06                            ; ===========================================================================
00007D06                            ; ---------------------------------------------------------------------------
00007D06                            ; GHZ bridge-bending data
00007D06                            ; (Defines how the bridge bends	when Sonic walks across	it)
00007D06                            ; ---------------------------------------------------------------------------
00007D06                            Obj11_BendData:	incbin	"misc\ghzbend1.bin"
00007E16                            		even
00007E16                            Obj11_BendData2:incbin	"misc\ghzbend2.bin"
00007F16                            		even
00007F16                            
00007F16                            ; ===========================================================================
00007F16                            
00007F16                            Bri_ChkDel:
00007F34 4E75                       		rts	
00007F36                            ; ===========================================================================
00007F36                            
00007F36                            @deletebridge:
00007F36 7400                       		moveq	#0,d2
00007F38 45E8 0028                  		lea	obSubtype(a0),a2 ; load bridge length
00007F3C 141A                       		move.b	(a2)+,d2	; move bridge length to	d2
00007F3E 5302                       		subq.b	#1,d2		; subtract 1
00007F40 6500                       		bcs.s	@delparent
00007F42                            
00007F42                            	@loop:
00007F42 7000                       		moveq	#0,d0
00007F44 101A                       		move.b	(a2)+,d0
00007F46 ED48                       		lsl.w	#6,d0
00007F48 0680 00FF D000             		addi.l	#v_objspace&$FFFFFF,d0
00007F4E 2240                       		movea.l	d0,a1
00007F50 B048                       		cmp.w	a0,d0
00007F52 6700                       		beq.s	@skipdel
00007F54 6100 0000                  		bsr.w	DeleteChild
00007F58                            
00007F58                            	@skipdel:
00007F58 51CA FFE8                  		dbf	d2,@loop ; repeat d2 times (bridge length)
00007F5C                            
00007F5C                            @delparent:
00007F5C 6100 0000                  		bsr.w	DeleteObject
00007F60 4E75                       		rts	
00007F62                            ; ===========================================================================
00007F62                            
00007F62                            Bri_Delete:	; Routine 6, 8
00007F62 6100 0000                  		bsr.w	DeleteObject
00007F66 4E75                       		rts	
00007F68                            ; ===========================================================================
00007F68                            
00007F68                            Bri_Display:	; Routine $A
00007F68 6100 0000                  		bsr.w	DisplaySprite
00007F6C 4E75                       		rts	
00007F6C 4E75                       		rts	
00007F6E                            Map_Bri:	include	"_maps\Bridge.asm"
00007F6E                            ; ---------------------------------------------------------------------------
00007F6E                            ; Sprite mappings - GHZ	bridge
00007F6E                            ; ---------------------------------------------------------------------------
00007F6E                            Map_Bri_internal:
00007F6E 0000                       		dc.w M_Bri_Log-Map_Bri_internal
00007F70 0000                       		dc.w M_Bri_Stump-Map_Bri_internal
00007F72 0000                       		dc.w M_Bri_Rope-Map_Bri_internal
00007F74 01                         M_Bri_Log:	dc.b 1
00007F75 F805 0000 F8               		dc.b $F8, 5, 0,	0, $F8	; log
00007F7A 02                         M_Bri_Stump:	dc.b 2
00007F7B F804 0004 F0               		dc.b $F8, 4, 0,	4, $F0	; stump & rope
00007F80 000C 0006 F0               		dc.b 0,	$C, 0, 6, $F0
00007F85 01                         M_Bri_Rope:	dc.b 1
00007F86 FC04 0008 F8               		dc.b $FC, 4, 0,	8, $F8	; rope only
00007F8C 00                         		even
00007F8C 00                         		even
00007F8C                            
00007F8C                            		include	"_incObj\15 Swinging Platforms (part 1).asm"
00007F8C                            ; ---------------------------------------------------------------------------
00007F8C                            ; Object 15 - swinging platforms (GHZ, MZ, SLZ)
00007F8C                            ;	    - spiked ball on a chain (SBZ)
00007F8C                            ; ---------------------------------------------------------------------------
00007F8C                            
00007F8C                            SwingingPlatform:
00007F8C 7000                       		moveq	#0,d0
00007F8E 1028 0024                  		move.b	obRoutine(a0),d0
00007F92 323B 0000                  		move.w	Swing_Index(pc,d0.w),d1
00007F96 4EFB 1000                  		jmp	Swing_Index(pc,d1.w)
00007F9A                            ; ===========================================================================
00007F9A 0000 0000                  Swing_Index:	dc.w Swing_Main-Swing_Index, Swing_SetSolid-Swing_Index
00007F9E 0000 0000                  		dc.w Swing_Action2-Swing_Index,	Swing_Delete-Swing_Index
00007FA2 0000 0000                  		dc.w Swing_Delete-Swing_Index, Swing_Display-Swing_Index
00007FA6 0000                       		dc.w Swing_Action-Swing_Index
00007FA8                            
00007FA8 =0000003A                  swing_origX:	equ $3A		; original x-axis position
00007FA8 =00000038                  swing_origY:	equ $38		; original y-axis position
00007FA8                            ; ===========================================================================
00007FA8                            
00007FA8                            Swing_Main:	; Routine 0
00007FA8 5428 0024                  		addq.b	#2,obRoutine(a0)
00007FAC 217C 0000 0000 0004        		move.l	#Map_Swing_GHZ,obMap(a0) ; GHZ and MZ specific code
00007FB4 317C 4380 0002             		move.w	#$4380,obGfx(a0)
00007FBA 117C 0004 0001             		move.b	#4,obRender(a0)
00007FC0 117C 0003 0018             		move.b	#3,obPriority(a0)
00007FC6 117C 0018 0019             		move.b	#$18,obActWid(a0)
00007FCC 117C 0008 0016             		move.b	#8,obHeight(a0)
00007FD2 3168 000C 0038             		move.w	obY(a0),swing_origY(a0)
00007FD8 3168 0008 003A             		move.w	obX(a0),swing_origX(a0)
00007FDE 0C38 0003 FE10             		cmpi.b	#id_SLZ,(v_zone).w ; check if level is SLZ
00007FE4 6600                       		bne.s	@notSLZ
00007FE6                            
00007FE6 217C 0000 0000 0004        		move.l	#Map_Swing_SLZ,obMap(a0) ; SLZ specific code
00007FEE 317C 43DC 0002             		move.w	#$43DC,obGfx(a0)
00007FF4 117C 0020 0019             		move.b	#$20,obActWid(a0)
00007FFA 117C 0010 0016             		move.b	#$10,obHeight(a0)
00008000 117C 0099 0020             		move.b	#$99,obColType(a0)
00008006                            
00008006                            	@notSLZ:
00008006 0C38 0005 FE10             		cmpi.b	#id_SBZ,(v_zone).w ; check if level is SBZ
0000800C 6600                       		bne.s	@length
0000800E                            
0000800E 217C 0000 0000 0004        		move.l	#Map_BBall,obMap(a0) ; SBZ specific code
00008016 317C 0391 0002             		move.w	#$391,obGfx(a0)
0000801C 117C 0018 0019             		move.b	#$18,obActWid(a0)
00008022 117C 0018 0016             		move.b	#$18,obHeight(a0)
00008028 117C 0086 0020             		move.b	#$86,obColType(a0)
0000802E 117C 000C 0024             		move.b	#$C,obRoutine(a0) ; goto Swing_Action next
00008034                            
00008034                            @length:
00008034 1828 0000                  		move.b	0(a0),d4
00008038 7200                       		moveq	#0,d1
0000803A 45E8 0028                  		lea	obSubtype(a0),a2 ; move chain length to a2
0000803E 1212                       		move.b	(a2),d1		; move a2 to d1
00008040 3F01                       		move.w	d1,-(sp)
00008042 0241 000F                  		andi.w	#$F,d1
00008046 14FC 0000                  		move.b	#0,(a2)+
0000804A 3601                       		move.w	d1,d3
0000804C E94B                       		lsl.w	#4,d3
0000804E 5003                       		addq.b	#8,d3
00008050 1143 003C                  		move.b	d3,$3C(a0)
00008054 5103                       		subq.b	#8,d3
00008056 4A28 001A                  		tst.b	obFrame(a0)
0000805A 6700                       		beq.s	@makechain
0000805C 5003                       		addq.b	#8,d3
0000805E 5341                       		subq.w	#1,d1
00008060                            
00008060                            @makechain:
00008060 6100 0000                  		bsr.w	FindFreeObj
00008064 6600                       		bne.s	@fail
00008066 5228 0028                  		addq.b	#1,obSubtype(a0)
0000806A 3A09                       		move.w	a1,d5
0000806C 0445 D000                  		subi.w	#$D000,d5
00008070 EC4D                       		lsr.w	#6,d5
00008072 0245 007F                  		andi.w	#$7F,d5
00008076 14C5                       		move.b	d5,(a2)+
00008078 137C 000A 0024             		move.b	#$A,obRoutine(a1) ; goto Swing_Display next
0000807E 1344 0000                  		move.b	d4,0(a1)	; load swinging	object
00008082 2368 0004 0004             		move.l	obMap(a0),obMap(a1)
00008088 3368 0002 0002             		move.w	obGfx(a0),obGfx(a1)
0000808E 08A9 0006 0002             		bclr	#6,obGfx(a1)
00008094 137C 0004 0001             		move.b	#4,obRender(a1)
0000809A 137C 0004 0018             		move.b	#4,obPriority(a1)
000080A0 137C 0008 0019             		move.b	#8,obActWid(a1)
000080A6 137C 0001 001A             		move.b	#1,obFrame(a1)
000080AC 1343 003C                  		move.b	d3,$3C(a1)
000080B0 0403 0010                  		subi.b	#$10,d3
000080B4 6400                       		bcc.s	@notanchor
000080B6 137C 0002 001A             		move.b	#2,obFrame(a1)
000080BC 137C 0003 0018             		move.b	#3,obPriority(a1)
000080C2 08E9 0006 0002             		bset	#6,obGfx(a1)
000080C8                            
000080C8                            	@notanchor:
000080C8 51C9 FF96                  		dbf	d1,@makechain ; repeat d1 times (chain length)
000080CC                            
000080CC                            	@fail:
000080CC 3A08                       		move.w	a0,d5
000080CE 0445 D000                  		subi.w	#$D000,d5
000080D2 EC4D                       		lsr.w	#6,d5
000080D4 0245 007F                  		andi.w	#$7F,d5
000080D8 14C5                       		move.b	d5,(a2)+
000080DA 317C 4080 0026             		move.w	#$4080,obAngle(a0)
000080E0 317C FE00 003E             		move.w	#-$200,$3E(a0)
000080E6 321F                       		move.w	(sp)+,d1
000080E8 0801 0004                  		btst	#4,d1		; is object type $1X ?
000080EC 6700                       		beq.s	@not1X	; if not, branch
000080EE 217C 0000 0000 0004        		move.l	#Map_GBall,obMap(a0) ; use GHZ ball mappings
000080F6 317C 43AA 0002             		move.w	#$43AA,obGfx(a0)
000080FC 117C 0001 001A             		move.b	#1,obFrame(a0)
00008102 117C 0002 0018             		move.b	#2,obPriority(a0)
00008108 117C 0081 0020             		move.b	#$81,obColType(a0) ; make object hurt when touched
0000810E                            
0000810E                            	@not1X:
0000810E 0C38 0005 FE10             		cmpi.b	#id_SBZ,(v_zone).w ; is zone SBZ?
00008114 6700                       		beq.s	Swing_Action	; if yes, branch
00008116                            
00008116                            Swing_SetSolid:	; Routine 2
00008116 7200                       		moveq	#0,d1
00008118 1228 0019                  		move.b	obActWid(a0),d1
0000811C 7600                       		moveq	#0,d3
0000811E 1628 0016                  		move.b	obHeight(a0),d3
00008122 6100 FA72                  		bsr.w	Swing_Solid
00008126                            
00008126                            Swing_Action:	; Routine $C
00008126 6100 0000                  		bsr.w	Swing_Move
0000812A 6100 0000                  		bsr.w	DisplaySprite
0000812E 6000 0000                  		bra.w	Swing_ChkDel
00008132                            ; ===========================================================================
00008132                            
00008132                            Swing_Action2:	; Routine 4
00008132 7200                       		moveq	#0,d1
00008134 1228 0019                  		move.b	obActWid(a0),d1
00008138 6100 FAC0                  		bsr.w	ExitPlatform
0000813C 3F28 0008                  		move.w	obX(a0),-(sp)
00008140 6100 0000                  		bsr.w	Swing_Move
00008144 341F                       		move.w	(sp)+,d2
00008146 7600                       		moveq	#0,d3
00008148 1628 0016                  		move.b	obHeight(a0),d3
0000814C 5203                       		addq.b	#1,d3
0000814E 6100 0000                  		bsr.w	MvSonicOnPtfm
00008152 6100 0000                  		bsr.w	DisplaySprite
00008156 6000 0000                  		bra.w	Swing_ChkDel
0000815A                            
0000815A 4E75                       		rts
0000815A 4E75                       		rts
0000815C                            
0000815C                            ; ---------------------------------------------------------------------------
0000815C                            ; Subroutine to	change Sonic's position with a platform
0000815C                            ; ---------------------------------------------------------------------------
0000815C                            
0000815C                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000815C                            
0000815C                            
0000815C                            MvSonicOnPtfm:
0000815C 43F8 D000                  		lea	(v_player).w,a1
00008160 3028 000C                  		move.w	obY(a0),d0
00008164 9043                       		sub.w	d3,d0
00008166 6000                       		bra.s	MvSonic2
00008168                            ; End of function MvSonicOnPtfm
00008168                            
00008168                            ; ---------------------------------------------------------------------------
00008168                            ; Subroutine to	change Sonic's position with a platform
00008168                            ; ---------------------------------------------------------------------------
00008168                            
00008168                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00008168                            
00008168                            
00008168                            MvSonicOnPtfm2:
00008168 43F8 D000                  		lea	(v_player).w,a1
0000816C 3028 000C                  		move.w	obY(a0),d0
00008170 0440 0009                  		subi.w	#9,d0
00008174                            
00008174                            MvSonic2:
00008174 4A38 F7C8                  		tst.b	(f_lockmulti).w
00008178 6B00                       		bmi.s	locret_7B62
0000817A 0C38 0006 D024             		cmpi.b	#6,(v_player+obRoutine).w
00008180 6400                       		bhs.s	locret_7B62
00008182 4A78 FE08                  		tst.w	(v_debuguse).w
00008186 6600                       		bne.s	locret_7B62
00008188 7200                       		moveq	#0,d1
0000818A 1229 0016                  		move.b	obHeight(a1),d1
0000818E 9041                       		sub.w	d1,d0
00008190 3340 000C                  		move.w	d0,obY(a1)
00008194 9468 0008                  		sub.w	obX(a0),d2
00008198 9569 0008                  		sub.w	d2,obX(a1)
0000819C                            
0000819C                            locret_7B62:
0000819C 4E75                       		rts	
0000819E                            ; End of function MvSonicOnPtfm2
0000819E                            
0000819E                            		include	"_incObj\15 Swinging Platforms (part 2).asm"
0000819E                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000819E                            
0000819E                            
0000819E                            Swing_Move:
0000819E 1038 FE78                  		move.b	(v_oscillate+$1A).w,d0
000081A2 323C 0080                  		move.w	#$80,d1
000081A6 0828 0000 0022             		btst	#0,obStatus(a0)
000081AC 6700                       		beq.s	loc_7B78
000081AE 4440                       		neg.w	d0
000081B0 D041                       		add.w	d1,d0
000081B2                            
000081B2                            loc_7B78:
000081B2 6000                       		bra.s	Swing_Move2
000081B4                            ; End of function Swing_Move
000081B4                            
000081B4                            
000081B4                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000081B4                            
000081B4                            
000081B4                            Obj48_Move:
000081B4 4A28 003D                  		tst.b	$3D(a0)
000081B8 6600                       		bne.s	loc_7B9C
000081BA 3028 003E                  		move.w	$3E(a0),d0
000081BE 5040                       		addq.w	#8,d0
000081C0 3140 003E                  		move.w	d0,$3E(a0)
000081C4 D168 0026                  		add.w	d0,obAngle(a0)
000081C8 0C40 0200                  		cmpi.w	#$200,d0
000081CC 6600                       		bne.s	loc_7BB6
000081CE 117C 0001 003D             		move.b	#1,$3D(a0)
000081D4 6000                       		bra.s	loc_7BB6
000081D6                            ; ===========================================================================
000081D6                            
000081D6                            loc_7B9C:
000081D6 3028 003E                  		move.w	$3E(a0),d0
000081DA 5140                       		subq.w	#8,d0
000081DC 3140 003E                  		move.w	d0,$3E(a0)
000081E0 D168 0026                  		add.w	d0,obAngle(a0)
000081E4 0C40 FE00                  		cmpi.w	#-$200,d0
000081E8 6600                       		bne.s	loc_7BB6
000081EA 117C 0000 003D             		move.b	#0,$3D(a0)
000081F0                            
000081F0                            loc_7BB6:
000081F0 1028 0026                  		move.b	obAngle(a0),d0
000081F4                            ; End of function Obj48_Move
000081F4                            
000081F4                            
000081F4                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000081F4                            
000081F4                            
000081F4                            Swing_Move2:
000081F4 6100 A5F6                  		bsr.w	CalcSine
000081F8 3428 0038                  		move.w	$38(a0),d2
000081FC 3628 003A                  		move.w	$3A(a0),d3
00008200 45E8 0028                  		lea	obSubtype(a0),a2
00008204 7C00                       		moveq	#0,d6
00008206 1C1A                       		move.b	(a2)+,d6
00008208                            
00008208                            loc_7BCE:
00008208 7800                       		moveq	#0,d4
0000820A 181A                       		move.b	(a2)+,d4
0000820C ED4C                       		lsl.w	#6,d4
0000820E 0684 00FF D000             		addi.l	#v_objspace&$FFFFFF,d4
00008214 2244                       		movea.l	d4,a1
00008216 7800                       		moveq	#0,d4
00008218 1829 003C                  		move.b	$3C(a1),d4
0000821C 2A04                       		move.l	d4,d5
0000821E C9C0                       		muls.w	d0,d4
00008220 E084                       		asr.l	#8,d4
00008222 CBC1                       		muls.w	d1,d5
00008224 E085                       		asr.l	#8,d5
00008226 D842                       		add.w	d2,d4
00008228 DA43                       		add.w	d3,d5
0000822A 3344 000C                  		move.w	d4,obY(a1)
0000822E 3345 0008                  		move.w	d5,obX(a1)
00008232 51CE FFD4                  		dbf	d6,loc_7BCE
00008236 4E75                       		rts	
00008238                            ; End of function Swing_Move2
00008238                            
00008238                            ; ===========================================================================
00008238                            
00008238                            Swing_ChkDel:
00008256 4E75                       		rts	
00008258                            ; ===========================================================================
00008258                            
00008258                            Swing_DelAll:
00008258 7400                       		moveq	#0,d2
0000825A 45E8 0028                  		lea	obSubtype(a0),a2
0000825E 141A                       		move.b	(a2)+,d2
00008260                            
00008260                            Swing_DelLoop:
00008260 7000                       		moveq	#0,d0
00008262 101A                       		move.b	(a2)+,d0
00008264 ED48                       		lsl.w	#6,d0
00008266 0680 00FF D000             		addi.l	#v_objspace&$FFFFFF,d0
0000826C 2240                       		movea.l	d0,a1
0000826E 6100 0000                  		bsr.w	DeleteChild
00008272 51CA FFEC                  		dbf	d2,Swing_DelLoop ; repeat for length of	chain
00008276 4E75                       		rts	
00008278                            ; ===========================================================================
00008278                            
00008278                            Swing_Delete:	; Routine 6, 8
00008278 6100 0000                  		bsr.w	DeleteObject
0000827C 4E75                       		rts	
0000827E                            ; ===========================================================================
0000827E                            
0000827E                            Swing_Display:	; Routine $A
0000827E 6000 0000                  		bra.w	DisplaySprite
0000827E 6000 0000                  		bra.w	DisplaySprite
00008282                            Map_Swing_GHZ:	include	"_maps\Swinging Platforms (GHZ).asm"
00008282                            ; ---------------------------------------------------------------------------
00008282                            ; Sprite mappings - GHZ	and MZ swinging	platforms
00008282                            ; ---------------------------------------------------------------------------
00008282                            Map_Swing_GHZ_internal:
00008282 0000                       		dc.w @block-Map_Swing_GHZ_internal
00008284 0000                       		dc.w @chain-Map_Swing_GHZ_internal
00008286 0000                       		dc.w @anchor-Map_Swing_GHZ_internal
00008288 02                         @block:		dc.b 2
00008289 F809 0004 E8               		dc.b $F8, 9, 0,	4, $E8
0000828E F809 0004 00               		dc.b $F8, 9, 0,	4, 0
00008293 01                         @chain:		dc.b 1
00008294 F805 0000 F8               		dc.b $F8, 5, 0,	0, $F8
00008299 01                         @anchor:	dc.b 1
0000829A F805 000A F8               		dc.b $F8, 5, 0,	$A, $F8
000082A0 00                         		even
000082A0 00                         		even
000082A0                            Map_Swing_SLZ:	include	"_maps\Swinging Platforms (SLZ).asm"
000082A0                            ; ---------------------------------------------------------------------------
000082A0                            ; Sprite mappings - SLZ	swinging platforms
000082A0                            ; ---------------------------------------------------------------------------
000082A0                            Map_Swing_SLZ_internal:
000082A0 0000                       		dc.w @block-Map_Swing_SLZ_internal
000082A2 0000                       		dc.w @chain-Map_Swing_SLZ_internal
000082A4 0000                       		dc.w @anchor-Map_Swing_SLZ_internal
000082A6 08                         @block:		dc.b 8
000082A7 F00F 0004 E0               		dc.b $F0, $F, 0, 4, $E0
000082AC F00F 0804 00               		dc.b $F0, $F, 8, 4, 0
000082B1 F005 0014 D0               		dc.b $F0, 5, 0,	$14, $D0
000082B6 F005 0814 20               		dc.b $F0, 5, 8,	$14, $20
000082BB 1004 0018 E0               		dc.b $10, 4, 0,	$18, $E0
000082C0 1004 0818 10               		dc.b $10, 4, 8,	$18, $10
000082C5 1001 001A F8               		dc.b $10, 1, 0,	$1A, $F8
000082CA 1001 081A 00               		dc.b $10, 1, 8,	$1A, 0
000082CF 01                         @chain:		dc.b 1
000082D0 F805 4000 F8               		dc.b $F8, 5, $40, 0, $F8
000082D5 01                         @anchor:	dc.b 1
000082D6 F805 001C F8               		dc.b $F8, 5, 0,	$1C, $F8
000082DC 00                         		even
000082DC 00                         		even
000082DC                            		include	"_incObj\17 Spiked Pole Helix.asm"
000082DC                            ; ---------------------------------------------------------------------------
000082DC                            ; Object 17 - helix of spikes on a pole	(GHZ)
000082DC                            ; ---------------------------------------------------------------------------
000082DC                            
000082DC                            Helix:
000082DC 7000                       		moveq	#0,d0
000082DE 1028 0024                  		move.b	obRoutine(a0),d0
000082E2 323B 0000                  		move.w	Hel_Index(pc,d0.w),d1
000082E6 4EFB 1000                  		jmp	Hel_Index(pc,d1.w)
000082EA                            ; ===========================================================================
000082EA 0000                       Hel_Index:	dc.w Hel_Main-Hel_Index
000082EC 0000                       		dc.w Hel_Action-Hel_Index
000082EE 0000                       		dc.w Hel_Action-Hel_Index
000082F0 0000                       		dc.w Hel_Delete-Hel_Index
000082F2 0000                       		dc.w Hel_Display-Hel_Index
000082F4                            
000082F4 =0000003E                  hel_frame:	equ $3E		; start frame (different for each spike)
000082F4                            
000082F4                            ;		$29-38 are used for child object addresses
000082F4                            ; ===========================================================================
000082F4                            
000082F4                            Hel_Main:	; Routine 0
000082F4 5428 0024                  		addq.b	#2,obRoutine(a0)
000082F8 217C 0000 0000 0004        		move.l	#Map_Hel,obMap(a0)
00008300 317C 4398 0002             		move.w	#$4398,obGfx(a0)
00008306 117C 0007 0022             		move.b	#7,obStatus(a0)
0000830C 117C 0004 0001             		move.b	#4,obRender(a0)
00008312 117C 0003 0018             		move.b	#3,obPriority(a0)
00008318 117C 0008 0019             		move.b	#8,obActWid(a0)
0000831E 3428 000C                  		move.w	obY(a0),d2
00008322 3628 0008                  		move.w	obX(a0),d3
00008326 1828 0000                  		move.b	0(a0),d4
0000832A 45E8 0028                  		lea	obSubtype(a0),a2 ; move helix length to a2
0000832E 7200                       		moveq	#0,d1
00008330 1212                       		move.b	(a2),d1		; move helix length to d1
00008332 14FC 0000                  		move.b	#0,(a2)+	; clear subtype
00008336 3001                       		move.w	d1,d0
00008338 E248                       		lsr.w	#1,d0
0000833A E948                       		lsl.w	#4,d0
0000833C 9640                       		sub.w	d0,d3		; d3 is x-axis position of leftmost spike
0000833E 5501                       		subq.b	#2,d1
00008340 6500                       		bcs.s	Hel_Action	; skip to action if length is only 1
00008342 7C00                       		moveq	#0,d6
00008344                            
00008344                            Hel_Build:
00008344 6100 0000                  		bsr.w	FindFreeObj
00008348 6600                       		bne.s	Hel_Action
0000834A 5228 0028                  		addq.b	#1,obSubtype(a0)
0000834E 3A09                       		move.w	a1,d5
00008350 0445 D000                  		subi.w	#$D000,d5
00008354 EC4D                       		lsr.w	#6,d5
00008356 0245 007F                  		andi.w	#$7F,d5
0000835A 14C5                       		move.b	d5,(a2)+	; copy child address to parent RAM
0000835C 137C 0008 0024             		move.b	#8,obRoutine(a1)
00008362 1344 0000                  		move.b	d4,0(a1)
00008366 3342 000C                  		move.w	d2,ObY(a1)
0000836A 3343 0008                  		move.w	d3,obX(a1)
0000836E 2368 0004 0004             		move.l	obMap(a0),obMap(a1)
00008374 337C 4398 0002             		move.w	#$4398,obGfx(a1)
0000837A 137C 0004 0001             		move.b	#4,obRender(a1)
00008380 137C 0003 0018             		move.b	#3,obPriority(a1)
00008386 137C 0008 0019             		move.b	#8,obActWid(a1)
0000838C 1346 003E                  		move.b	d6,hel_frame(a1)
00008390 5206                       		addq.b	#1,d6
00008392 0206 0007                  		andi.b	#7,d6
00008396 0643 0010                  		addi.w	#$10,d3
0000839A B668 0008                  		cmp.w	obX(a0),d3	; is this spike in the centre?
0000839E 6600                       		bne.s	Hel_NotCentre	; if not, branch
000083A0                            
000083A0 1146 003E                  		move.b	d6,hel_frame(a0) ; set parent spike frame
000083A4 5206                       		addq.b	#1,d6
000083A6 0206 0007                  		andi.b	#7,d6
000083AA 0643 0010                  		addi.w	#$10,d3		; skip to next spike
000083AE 5228 0028                  		addq.b	#1,obSubtype(a0)
000083B2                            
000083B2                            	Hel_NotCentre:
000083B2 51C9 FF90                  		dbf	d1,Hel_Build ; repeat d1 times (helix length)
000083B6                            
000083B6                            Hel_Action:	; Routine 2, 4
000083B6 6100 0000                  		bsr.w	Hel_RotateSpikes
000083BA 6100 0000                  		bsr.w	DisplaySprite
000083BE 6000 0000                  		bra.w	Hel_ChkDel
000083C2                            
000083C2                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000083C2                            
000083C2                            
000083C2                            Hel_RotateSpikes:
000083C2 1038 FEC1                  		move.b	(v_ani0_frame).w,d0
000083C6 117C 0000 0020             		move.b	#0,obColType(a0) ; make object harmless
000083CC D028 003E                  		add.b	hel_frame(a0),d0
000083D0 0200 0007                  		andi.b	#7,d0
000083D4 1140 001A                  		move.b	d0,obFrame(a0)	; change current frame
000083D8 6600                       		bne.s	locret_7DA6
000083DA 117C 0084 0020             		move.b	#$84,obColType(a0) ; make object harmful
000083E0                            
000083E0                            locret_7DA6:
000083E0 4E75                       		rts	
000083E2                            ; End of function Hel_RotateSpikes
000083E2                            
000083E2                            ; ===========================================================================
000083E2                            
000083E2                            Hel_ChkDel:
00008400 4E75                       		rts	
00008402                            ; ===========================================================================
00008402                            
00008402                            Hel_DelAll:
00008402 7400                       		moveq	#0,d2
00008404 45E8 0028                  		lea	obSubtype(a0),a2 ; move helix length to a2
00008408 141A                       		move.b	(a2)+,d2	; move helix length to d2
0000840A 5502                       		subq.b	#2,d2
0000840C 6500                       		bcs.s	Hel_Delete
0000840E                            
0000840E                            	Hel_DelLoop:
0000840E 7000                       		moveq	#0,d0
00008410 101A                       		move.b	(a2)+,d0
00008412 ED48                       		lsl.w	#6,d0
00008414 0680 00FF D000             		addi.l	#v_objspace&$FFFFFF,d0
0000841A 2240                       		movea.l	d0,a1		; get child address
0000841C 6100 0000                  		bsr.w	DeleteChild	; delete object
00008420 51CA FFEC                  		dbf	d2,Hel_DelLoop ; repeat d2 times (helix length)
00008424                            
00008424                            Hel_Delete:	; Routine 6
00008424 6100 0000                  		bsr.w	DeleteObject
00008428 4E75                       		rts	
0000842A                            ; ===========================================================================
0000842A                            
0000842A                            Hel_Display:	; Routine 8
0000842A 6100 FF96                  		bsr.w	Hel_RotateSpikes
0000842E 6000 0000                  		bra.w	DisplaySprite
0000842E 6000 0000                  		bra.w	DisplaySprite
00008432                            Map_Hel:	include	"_maps\Spiked Pole Helix.asm"
00008432                            ; ---------------------------------------------------------------------------
00008432                            ; Sprite mappings - helix of spikes on a pole (GHZ)
00008432                            ; ---------------------------------------------------------------------------
00008432                            Map_Hel_internal:
00008432 0000                       		dc.w byte_7E08-Map_Hel_internal
00008434 0000                       		dc.w byte_7E0E-Map_Hel_internal
00008436 0000                       		dc.w byte_7E14-Map_Hel_internal
00008438 0000                       		dc.w byte_7E1A-Map_Hel_internal
0000843A 0000                       		dc.w byte_7E20-Map_Hel_internal
0000843C 0000                       		dc.w byte_7E26-Map_Hel_internal
0000843E 0000                       		dc.w byte_7E2E-Map_Hel_internal
00008440 0000                       		dc.w byte_7E2C-Map_Hel_internal
00008442 01                         byte_7E08:	dc.b 1
00008443 F001 0000 FC               		dc.b $F0, 1, 0,	0, $FC	; points straight up (harmful)
00008448 01                         byte_7E0E:	dc.b 1
00008449 F505 0002 F8               		dc.b $F5, 5, 0,	2, $F8	; 45 degree
0000844E 01                         byte_7E14:	dc.b 1
0000844F F805 0006 F8               		dc.b $F8, 5, 0,	6, $F8	; 90 degree
00008454 01                         byte_7E1A:	dc.b 1
00008455 FB05 000A F8               		dc.b $FB, 5, 0,	$A, $F8	; 45 degree
0000845A 01                         byte_7E20:	dc.b 1
0000845B 0001 000E FC               		dc.b 0,	1, 0, $E, $FC	; straight down
00008460 01                         byte_7E26:	dc.b 1
00008461 0400 0010 FD               		dc.b 4,	0, 0, $10, $FD	; 45 degree
00008466 01                         byte_7E2C:	dc.b 1
00008467 F4                         		dc.b $F4
00008468                            byte_7E2E:	; reads the 0 below	; not visible
00008468 0000 11FD                  		dc.b 0, 0,	$11, $FD ; 45 degree
0000846C                            		even
0000846C                            		even
0000846C                            		include	"_incObj\18 Platforms.asm"
0000846C                            ; ---------------------------------------------------------------------------
0000846C                            ; Object 18 - platforms	(GHZ, SYZ, SLZ)
0000846C                            ; ---------------------------------------------------------------------------
0000846C                            
0000846C                            BasicPlatform:
0000846C 7000                       		moveq	#0,d0
0000846E 1028 0024                  		move.b	obRoutine(a0),d0
00008472 323B 0000                  		move.w	Plat_Index(pc,d0.w),d1
00008476 4EFB 1000                  		jmp	Plat_Index(pc,d1.w)
0000847A                            ; ===========================================================================
0000847A 0000                       Plat_Index:	dc.w Plat_Main-Plat_Index
0000847C 0000                       		dc.w Plat_Solid-Plat_Index
0000847E 0000                       		dc.w Plat_Action2-Plat_Index
00008480 0000                       		dc.w Plat_Delete-Plat_Index
00008482 0000                       		dc.w Plat_Action-Plat_Index
00008484                            ; ===========================================================================
00008484                            
00008484                            Plat_Main:	; Routine 0
00008484 5428 0024                  		addq.b	#2,obRoutine(a0)
00008488 317C 4000 0002             		move.w	#$4000,obGfx(a0)
0000848E 217C 0000 0000 0004        		move.l	#Map_Plat_GHZ,obMap(a0)
00008496 117C 0020 0019             		move.b	#$20,obActWid(a0)
0000849C 0C38 0004 FE10             		cmpi.b	#id_SYZ,(v_zone).w ; check if level is SYZ
000084A2 6600                       		bne.s	@notSYZ
000084A4                            
000084A4 217C 0000 0000 0004        		move.l	#Map_Plat_SYZ,obMap(a0) ; SYZ specific code
000084AC 117C 0020 0019             		move.b	#$20,obActWid(a0)
000084B2                            
000084B2                            	@notSYZ:
000084B2 0C38 0003 FE10             		cmpi.b	#id_SLZ,(v_zone).w ; check if level is SLZ
000084B8 6600                       		bne.s	@notSLZ
000084BA 217C 0000 0000 0004        		move.l	#Map_Plat_SLZ,obMap(a0) ; SLZ specific code
000084C2 117C 0020 0019             		move.b	#$20,obActWid(a0)
000084C8 317C 4000 0002             		move.w	#$4000,obGfx(a0)
000084CE 117C 0003 0028             		move.b	#3,obSubtype(a0)
000084D4                            
000084D4                            	@notSLZ:
000084D4 117C 0004 0001             		move.b	#4,obRender(a0)
000084DA 117C 0004 0018             		move.b	#4,obPriority(a0)
000084E0 3168 000C 002C             		move.w	obY(a0),$2C(a0)
000084E6 3168 000C 0034             		move.w	obY(a0),$34(a0)
000084EC 3168 0008 0032             		move.w	obX(a0),$32(a0)
000084F2 317C 0080 0026             		move.w	#$80,obAngle(a0)
000084F8 7200                       		moveq	#0,d1
000084FA 1028 0028                  		move.b	obSubtype(a0),d0
000084FE 0C00 000A                  		cmpi.b	#$A,d0		; is object type $A (large platform)?
00008502 6600                       		bne.s	@setframe	; if not, branch
00008504 5201                       		addq.b	#1,d1		; use frame #1
00008506 117C 0020 0019             		move.b	#$20,obActWid(a0) ; set width
0000850C                            
0000850C                            	@setframe:
0000850C 1141 001A                  		move.b	d1,obFrame(a0)	; set frame to d1
00008510                            
00008510                            Plat_Solid:	; Routine 2
00008510 4A28 0038                  		tst.b	$38(a0)
00008514 6700                       		beq.s	loc_7EE0
00008516 5928 0038                  		subq.b	#4,$38(a0)
0000851A                            
0000851A                            	loc_7EE0:
0000851A 7200                       		moveq	#0,d1
0000851C 1228 0019                  		move.b	obActWid(a0),d1
00008520 6100 F564                  		bsr.w	PlatformObject
00008524                            
00008524                            Plat_Action:	; Routine 8
00008524 6100 0000                  		bsr.w	Plat_Move
00008528 6100 0000                  		bsr.w	Plat_Nudge
0000852C 6100 0000                  		bsr.w	DisplaySprite
00008530 6000 0000                  		bra.w	Plat_ChkDel
00008534                            ; ===========================================================================
00008534                            
00008534                            Plat_Action2:	; Routine 4
00008534 0C28 0040 0038             		cmpi.b	#$40,$38(a0)
0000853A 6700                       		beq.s	loc_7F06
0000853C 5828 0038                  		addq.b	#4,$38(a0)
00008540                            
00008540                            	loc_7F06:
00008540 7200                       		moveq	#0,d1
00008542 1228 0019                  		move.b	obActWid(a0),d1
00008546 6100 F6B2                  		bsr.w	ExitPlatform
0000854A 3F28 0008                  		move.w	obX(a0),-(sp)
0000854E 6100 0000                  		bsr.w	Plat_Move
00008552 6100 0000                  		bsr.w	Plat_Nudge
00008556 341F                       		move.w	(sp)+,d2
00008558 6100 FC0E                  		bsr.w	MvSonicOnPtfm2
0000855C 6100 0000                  		bsr.w	DisplaySprite
00008560 6000 0000                  		bra.w	Plat_ChkDel
00008564                            
00008564 4E75                       		rts
00008566                            
00008566                            ; ---------------------------------------------------------------------------
00008566                            ; Subroutine to	move platform slightly when you	stand on it
00008566                            ; ---------------------------------------------------------------------------
00008566                            
00008566                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00008566                            
00008566                            
00008566                            Plat_Nudge:
00008566 1028 0038                  		move.b	$38(a0),d0
0000856A 6100 A280                  		bsr.w	CalcSine
0000856E 323C 0400                  		move.w	#$400,d1
00008572 C1C1                       		muls.w	d1,d0
00008574 4840                       		swap	d0
00008576 D068 002C                  		add.w	$2C(a0),d0
0000857A 3140 000C                  		move.w	d0,obY(a0)
0000857E 4E75                       		rts	
00008580                            ; End of function Plat_Nudge
00008580                            
00008580                            ; ---------------------------------------------------------------------------
00008580                            ; Subroutine to	move platforms
00008580                            ; ---------------------------------------------------------------------------
00008580                            
00008580                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00008580                            
00008580                            
00008580                            Plat_Move:
00008580 7000                       		moveq	#0,d0
00008582 1028 0028                  		move.b	obSubtype(a0),d0
00008586 0240 000F                  		andi.w	#$F,d0
0000858A D040                       		add.w	d0,d0
0000858C 323B 0000                  		move.w	@index(pc,d0.w),d1
00008590 4EFB 1000                  		jmp	@index(pc,d1.w)
00008594                            ; End of function Plat_Move
00008594                            
00008594                            ; ===========================================================================
00008594 0000 0000                  @index:		dc.w @type00-@index, @type01-@index
00008598 0000 0000                  		dc.w @type02-@index, @type03-@index
0000859C 0000 0000                  		dc.w @type04-@index, @type05-@index
000085A0 0000 0000                  		dc.w @type06-@index, @type07-@index
000085A4 0000 0000                  		dc.w @type08-@index, @type00-@index
000085A8 0000 0000                  		dc.w @type0A-@index, @type0B-@index
000085AC 0000                       		dc.w @type0C-@index
000085AE                            ; ===========================================================================
000085AE                            
000085AE                            @type00:
000085AE 4E75                       		rts			; platform 00 doesn't move
000085B0                            ; ===========================================================================
000085B0                            
000085B0                            @type05:
000085B0 3028 0032                  		move.w	$32(a0),d0
000085B4 1228 0026                  		move.b	obAngle(a0),d1	; load platform-motion variable
000085B8 4401                       		neg.b	d1		; reverse platform-motion
000085BA 0601 0040                  		addi.b	#$40,d1
000085BE 6000                       		bra.s	@type01_move
000085C0                            ; ===========================================================================
000085C0                            
000085C0                            @type01:
000085C0 3028 0032                  		move.w	$32(a0),d0
000085C4 1228 0026                  		move.b	obAngle(a0),d1	; load platform-motion variable
000085C8 0401 0040                  		subi.b	#$40,d1
000085CC                            
000085CC                            	@type01_move:
000085CC 4881                       		ext.w	d1
000085CE D041                       		add.w	d1,d0
000085D0 3140 0008                  		move.w	d0,obX(a0)	; change position on x-axis
000085D4 6000 0000                  		bra.w	@chgmotion
000085D8                            ; ===========================================================================
000085D8                            
000085D8                            @type0C:
000085D8 3028 0034                  		move.w	$34(a0),d0
000085DC 1238 FE6C                  		move.b	(v_oscillate+$E).w,d1 ; load platform-motion variable
000085E0 4401                       		neg.b	d1		; reverse platform-motion
000085E2 0601 0030                  		addi.b	#$30,d1
000085E6 6000                       		bra.s	@type02_move
000085E8                            ; ===========================================================================
000085E8                            
000085E8                            @type0B:
000085E8 3028 0034                  		move.w	$34(a0),d0
000085EC 1238 FE6C                  		move.b	(v_oscillate+$E).w,d1 ; load platform-motion variable
000085F0 0401 0030                  		subi.b	#$30,d1
000085F4 6000                       		bra.s	@type02_move
000085F6                            ; ===========================================================================
000085F6                            
000085F6                            @type06:
000085F6 3028 0034                  		move.w	$34(a0),d0
000085FA 1228 0026                  		move.b	obAngle(a0),d1	; load platform-motion variable
000085FE 4401                       		neg.b	d1		; reverse platform-motion
00008600 0601 0040                  		addi.b	#$40,d1
00008604 6000                       		bra.s	@type02_move
00008606                            ; ===========================================================================
00008606                            
00008606                            @type02:
00008606 3028 0034                  		move.w	$34(a0),d0
0000860A 1228 0026                  		move.b	obAngle(a0),d1	; load platform-motion variable
0000860E 0401 0040                  		subi.b	#$40,d1
00008612                            
00008612                            	@type02_move:
00008612 4881                       		ext.w	d1
00008614 D041                       		add.w	d1,d0
00008616 3140 002C                  		move.w	d0,$2C(a0)	; change position on y-axis
0000861A 6000 0000                  		bra.w	@chgmotion
0000861E                            ; ===========================================================================
0000861E                            
0000861E                            @type03:
0000861E 4A68 003A                  		tst.w	$3A(a0)		; is time delay	set?
00008622 6600                       		bne.s	@type03_wait	; if yes, branch
00008624 0828 0003 0022             		btst	#3,obStatus(a0)	; is Sonic standing on the platform?
0000862A 6700                       		beq.s	@type03_nomove	; if not, branch
0000862C 317C 001E 003A             		move.w	#30,$3A(a0)	; set time delay to 0.5	seconds
00008632                            
00008632                            	@type03_nomove:
00008632 4E75                       		rts	
00008634                            
00008634                            	@type03_wait:
00008634 5368 003A                  		subq.w	#1,$3A(a0)	; subtract 1 from time
00008638 66F8                       		bne.s	@type03_nomove	; if time is > 0, branch
0000863A 317C 0020 003A             		move.w	#32,$3A(a0)
00008640 5228 0028                  		addq.b	#1,obSubtype(a0) ; change to type 04 (falling)
00008644 4E75                       		rts	
00008646                            ; ===========================================================================
00008646                            
00008646                            @type04:
00008646 4A68 003A                  		tst.w	$3A(a0)
0000864A 6700                       		beq.s	@loc_8048
0000864C 5368 003A                  		subq.w	#1,$3A(a0)
00008650 6600                       		bne.s	@loc_8048
00008652 0828 0003 0022             		btst	#3,obStatus(a0)
00008658 6700                       		beq.s	@loc_8042
0000865A 08E9 0001 0022             		bset	#1,obStatus(a1)
00008660 08A9 0003 0022             		bclr	#3,obStatus(a1)
00008666 137C 0002 0024             		move.b	#2,obRoutine(a1)
0000866C 08A8 0003 0022             		bclr	#3,obStatus(a0)
00008672 4228 0025                  		clr.b	$25(a0)
00008676 3368 0012 0012             		move.w	obVelY(a0),obVelY(a1)
0000867C                            
0000867C                            	@loc_8042:
0000867C 117C 0008 0024             		move.b	#8,obRoutine(a0)
00008682                            
00008682                            	@loc_8048:
00008682 2628 002C                  		move.l	$2C(a0),d3
00008686 3028 0012                  		move.w	obVelY(a0),d0
0000868A 48C0                       		ext.l	d0
0000868C E180                       		asl.l	#8,d0
0000868E D680                       		add.l	d0,d3
00008690 2143 002C                  		move.l	d3,$2C(a0)
00008694 0668 0038 0012             		addi.w	#$38,obVelY(a0)
0000869A 3038 F72E                  		move.w	(v_limitbtm2).w,d0
0000869E 0640 00E0                  		addi.w	#$E0,d0
000086A2 B068 002C                  		cmp.w	$2C(a0),d0
000086A6 6400                       		bcc.s	@locret_8074
000086A8 117C 0006 0024             		move.b	#6,obRoutine(a0)
000086AE                            
000086AE                            	@locret_8074:
000086AE 4E75                       		rts	
000086B0                            ; ===========================================================================
000086B0                            
000086B0                            @type07:
000086B0 4A68 003A                  		tst.w	$3A(a0)		; is time delay	set?
000086B4 6600                       		bne.s	@type07_wait	; if yes, branch
000086B6 45F8 F7E0                  		lea	(f_switch).w,a2	; load switch statuses
000086BA 7000                       		moveq	#0,d0
000086BC 1028 0028                  		move.b	obSubtype(a0),d0 ; move object type ($x7) to d0
000086C0 E848                       		lsr.w	#4,d0		; divide d0 by 8, round	down
000086C2 4A32 0000                  		tst.b	(a2,d0.w)	; has switch no. d0 been pressed?
000086C6 6700                       		beq.s	@type07_nomove	; if not, branch
000086C8 317C 003C 003A             		move.w	#60,$3A(a0)	; set time delay to 1 second
000086CE                            
000086CE                            	@type07_nomove:
000086CE 4E75                       		rts	
000086D0                            
000086D0                            	@type07_wait:
000086D0 5368 003A                  		subq.w	#1,$3A(a0)	; subtract 1 from time delay
000086D4 66F8                       		bne.s	@type07_nomove	; if time is > 0, branch
000086D6 5228 0028                  		addq.b	#1,obSubtype(a0) ; change to type 08
000086DA 4E75                       		rts	
000086DC                            ; ===========================================================================
000086DC                            
000086DC                            @type08:
000086DC 5568 002C                  		subq.w	#2,$2C(a0)	; move platform	up
000086E0 3028 0034                  		move.w	$34(a0),d0
000086E4 0440 0200                  		subi.w	#$200,d0
000086E8 B068 002C                  		cmp.w	$2C(a0),d0	; has platform moved $200 pixels?
000086EC 6600                       		bne.s	@type08_nostop	; if not, branch
000086EE 4228 0028                  		clr.b	obSubtype(a0)	; change to type 00 (stop moving)
000086F2                            
000086F2                            	@type08_nostop:
000086F2 4E75                       		rts	
000086F4                            ; ===========================================================================
000086F4                            
000086F4                            @type0A:
000086F4 3028 0034                  		move.w	$34(a0),d0
000086F8 1228 0026                  		move.b	obAngle(a0),d1	; load platform-motion variable
000086FC 0401 0040                  		subi.b	#$40,d1
00008700 4881                       		ext.w	d1
00008702 E241                       		asr.w	#1,d1
00008704 D041                       		add.w	d1,d0
00008706 3140 002C                  		move.w	d0,$2C(a0)	; change position on y-axis
0000870A                            
0000870A                            @chgmotion:
0000870A 1178 FE78 0026             		move.b	(v_oscillate+$1A).w,$26(a0) ; update platform-movement variable
00008710 4E75                       		rts	
00008712                            ; ===========================================================================
00008712                            
00008712                            Plat_ChkDel:
0000872E 4E75                       		rts	
00008730                            ; ===========================================================================
00008730                            
00008730                            Plat_Delete:	; Routine 6
00008730 6000 0000                  		bra.w	DeleteObject
00008730 6000 0000                  		bra.w	DeleteObject
00008734                            Map_Plat_Unused:include	"_maps\Platforms (unused).asm"
00008734                            ; ---------------------------------------------------------------------------
00008734                            ; Sprite mappings - unused
00008734                            ; ---------------------------------------------------------------------------
00008734                            Map_Plat_Unused_internal:
00008734 0000                       		dc.w @small-Map_Plat_Unused_internal
00008736 0000                       		dc.w @large-Map_Plat_Unused_internal
00008738 02                         @small:		dc.b 2
00008739 F40B 003C E8               		dc.b $F4, $B, 0, $3C, $E8
0000873E F40B 0048 00               		dc.b $F4, $B, 0, $48, 0
00008743 0A                         @large:		dc.b $A
00008744 F40F 00CA E0               		dc.b $F4, $F, 0, $CA, $E0
00008749 040F 00DA E0               		dc.b 4,	$F, 0, $DA, $E0
0000874E 240F 00DA E0               		dc.b $24, $F, 0, $DA, $E0
00008753 440F 00DA E0               		dc.b $44, $F, 0, $DA, $E0
00008758 640F 00DA E0               		dc.b $64, $F, 0, $DA, $E0
0000875D F40F 08CA 00               		dc.b $F4, $F, 8, $CA, 0
00008762 040F 08DA 00               		dc.b 4,	$F, 8, $DA, 0
00008767 240F 08DA 00               		dc.b $24, $F, 8, $DA, 0
0000876C 440F 08DA 00               		dc.b $44, $F, 8, $DA, 0
00008771 640F 08DA 00               		dc.b $64, $F, 8, $DA, 0
00008776                            		even
00008776                            		even
00008776                            Map_Plat_GHZ:	include	"_maps\Platforms (GHZ).asm"
00008776                            ; ---------------------------------------------------------------------------
00008776                            ; Sprite mappings - GHZ	platforms
00008776                            ; ---------------------------------------------------------------------------
00008776                            Map_Plat_GHZ_internal:
00008776 0000                       		dc.w @small-Map_Plat_GHZ_internal
00008778 0000                       		dc.w @large-Map_Plat_GHZ_internal
0000877A 04                         @small:		dc.b 4
0000877B F40B 003B E0               		dc.b $F4, $B, 0, $3B, $E0 ; small platform
00008780 F407 003F F8               		dc.b $F4, 7, 0,	$3F, $F8
00008785 F407 003F 08               		dc.b $F4, 7, 0,	$3F, 8
0000878A F403 0047 18               		dc.b $F4, 3, 0,	$47, $18
0000878F 0A                         @large:		dc.b $A
00008790 F40F 00C5 E0               		dc.b $F4, $F, 0, $C5, $E0 ; large column platform
00008795 040F 00D5 E0               		dc.b 4,	$F, 0, $D5, $E0
0000879A 240F 00D5 E0               		dc.b $24, $F, 0, $D5, $E0
0000879F 440F 00D5 E0               		dc.b $44, $F, 0, $D5, $E0
000087A4 640F 00D5 E0               		dc.b $64, $F, 0, $D5, $E0
000087A9 F40F 08C5 00               		dc.b $F4, $F, 8, $C5, 0
000087AE 040F 08D5 00               		dc.b 4,	$F, 8, $D5, 0
000087B3 240F 08D5 00               		dc.b $24, $F, 8, $D5, 0
000087B8 440F 08D5 00               		dc.b $44, $F, 8, $D5, 0
000087BD 640F 08D5 00               		dc.b $64, $F, 8, $D5, 0
000087C2                            		even
000087C2                            		even
000087C2                            Map_Plat_SYZ:	include	"_maps\Platforms (SYZ).asm"
000087C2                            ; ---------------------------------------------------------------------------
000087C2                            ; Sprite mappings - SYZ	platforms
000087C2                            ; ---------------------------------------------------------------------------
000087C2                            Map_Plat_SYZ_internal:
000087C2 0000                       		dc.w @platform-Map_Plat_SYZ_internal
000087C4 03                         @platform:	dc.b 3
000087C5 F60B 0049 E0               		dc.b $F6, $B, 0, $49, $E0
000087CA F607 0051 F8               		dc.b $F6, 7, 0,	$51, $F8
000087CF F60B 0055 08               		dc.b $F6, $B, 0, $55, 8
000087D4                            		even
000087D4                            		even
000087D4                            Map_Plat_SLZ:	include	"_maps\Platforms (SLZ).asm"
000087D4                            ; ---------------------------------------------------------------------------
000087D4                            ; Sprite mappings - SLZ	platforms
000087D4                            ; ---------------------------------------------------------------------------
000087D4                            Map_Plat_SLZ_internal:
000087D4 0000                       		dc.w @platform-Map_Plat_SLZ_internal
000087D6 02                         @platform:	dc.b 2
000087D7 F80F 0021 E0               		dc.b $F8, $F, 0, $21, $E0
000087DC F80F 0021 00               		dc.b $F8, $F, 0, $21, 0
000087E2 00                         		even
000087E2 00                         		even
000087E2                            		include	"_incObj\19.asm"
000087E2                            ; ---------------------------------------------------------------------------
000087E2                            ; Object 19 - GHZ Boulder
000087E2                            ; ---------------------------------------------------------------------------
000087E2                            
000087E2                            GHZBoulder:
000087E2 7000                                       moveq   #0,d0
000087E4 1028 0024                                  move.b  $24(a0),d0
000087E8 323B 0000                                  move.w  GHZBoulder_Index(pc,d0.w),d1
000087EC 4EFB 1000                                  jmp     GHZBoulder_Index(pc,d1.w)
000087F0                            ; ---------------------------------------------------------------------------
000087F0 0000                       GHZBoulder_Index:dc.w GHZBoulder_Init-*
000087F2 0000                                       dc.w GHZBoulder_Main-GHZBoulder_Index
000087F4 0000                                       dc.w loc_5D86-GHZBoulder_Index
000087F6 0000                                       dc.w GHZBoulder_Delete-GHZBoulder_Index
000087F8 0000                                       dc.w sub_5CEE-GHZBoulder_Index
000087FA                            ; ---------------------------------------------------------------------------
000087FA                            
000087FA                            GHZBoulder_Init:
000087FA 117C 0018 0016                             move.b  #$18,$16(a0)
00008800 117C 000C 0017                             move.b  #$C,$17(a0)
00008806 6100 0000                                  bsr.w   ObjectFall
0000880A 4EB9 0000 0000                             jsr     (ObjFloorDist).l
00008810 4A41                                       tst.w   d1
00008812 6A00                                       bpl.s   GHZBoulder_Return
00008814 D368 000C                                  add.w   d1,$C(a0)
00008818 317C 0000 0012                             move.w  #0,$12(a0)
0000881E 117C 0008 0024                             move.b  #8,$24(a0)
00008824 217C 0000 0000 0004                        move.l  #Map_GBall,4(a0)
0000882C 317C 43AA 0002                             move.w  #$43AA,2(a0)
00008832 117C 0004 0001                             move.b  #4,1(a0)
00008838 117C 0003 0019                             move.b  #3,$19(a0)
0000883E 117C 0018 0018                             move.b  #$18,$18(a0)
00008844 117C 0001 001F                             move.b  #1,$1F(a0)
0000884A 6100 0000                                  bsr.w   sub_5DC8
0000884E                            
0000884E                            GHZBoulder_Return:
0000884E 4E75                                       rts
00008850                            
00008850                            ; =============== S U B R O U T I N E =======================================
00008850                            
00008850                            
00008850                            sub_5CEE:
00008850                            
00008850                            ; FUNCTION CHUNK AT 00005E2A SIZE 00000020 BYTES
00008850                            
00008850 323C 0023                                  move.w  #$23,d1 ; '#'
00008854 343C 0018                                  move.w  #$18,d2
00008858 363C 0018                                  move.w  #$18,d3
0000885C 3828 0008                                  move.w  8(a0),d4
00008860 6100 0000                                  bsr.w   SolidObject
00008864 0828 0005 0022                             btst    #5,$22(a0)
0000886A 6600                                       bne.s   loc_5D14
0000886C 3038 D008                                  move.w  ($FFFFD008).w,d0
00008870 9068 0008                                  sub.w   8(a0),d0
00008874 6500                                       bcs.s   loc_5D20
00008876                            
00008876                            loc_5D14:
00008876 117C 0002 0024                             move.b  #2,$24(a0)
0000887C 317C 0080 0014                             move.w  #$80,$14(a0)
00008882                            
00008882                            loc_5D20:
00008882 6100 0000                                  bsr.w   sub_5DC8
00008886 6100 0000                                  bsr.w   DisplaySprite
0000888A 6000 0000                                  bra.w   loc_5E2A
0000888E                            ; End of function sub_5CEE
0000888E                            
0000888E                            ; ---------------------------------------------------------------------------
0000888E                            
0000888E                            GHZBoulder_Main:
0000888E 0828 0001 0022                             btst    #1,$22(a0)
00008894 6600 0000                                  bne.w   loc_5D86
00008898 6100 0000                                  bsr.w   sub_5DC8
0000889C 6100 0000                                  bsr.w   sub_5E50
000088A0 6100 0000                                  bsr.w   SpeedToPos
000088A4 323C 0023                                  move.w  #$23,d1 ; '#'
000088A8 343C 0018                                  move.w  #$18,d2
000088AC 363C 0018                                  move.w  #$18,d3
000088B0 3828 0008                                  move.w  8(a0),d4
000088B4 6100 0000                                  bsr.w   SolidObject
000088B8 4EB9 0000 0000                             jsr     (Sonic_AnglePos).l
000088BE 0C68 0020 0008                             cmpi.w  #$20,8(a0) ; ' '
000088C4 6400                                       bcc.s   loc_5D70
000088C6 317C 0020 0008                             move.w  #$20,8(a0) ; ' '
000088CC 317C 0400 0014                             move.w  #$400,$14(a0)
000088D2                            
000088D2                            loc_5D70:
000088D2 0828 0001 0022                             btst    #1,$22(a0)
000088D8 6700                                       beq.s   loc_5D7E
000088DA 317C FC00 0012                             move.w  #$FC00,$12(a0)
000088E0                            
000088E0                            loc_5D7E:
000088E0 6100 0000                                  bsr.w   DisplaySprite
000088E4 6000 0000                                  bra.w   loc_5E2A
000088E8                            ; ---------------------------------------------------------------------------
000088E8                            
000088E8                            loc_5D86:
000088E8 6100 0000                                  bsr.w   sub_5DC8
000088EC 6100 0000                                  bsr.w   SpeedToPos
000088F0 323C 0023                                  move.w  #$23,d1 ; '#'
000088F4 343C 0018                                  move.w  #$18,d2
000088F8 363C 0018                                  move.w  #$18,d3
000088FC 3828 0008                                  move.w  8(a0),d4
00008900 6100 0000                                  bsr.w   SolidObject
00008904 4EB9 0000 0000                             jsr     (Sonic_Floor).l
0000890A 0828 0001 0022                             btst    #1,$22(a0)
00008910 6700                                       beq.s   loc_5DBE
00008912 3028 0012                                  move.w  $12(a0),d0
00008916 0640 0028                                  addi.w  #$28,d0 ; '('
0000891A 3140 0012                                  move.w  d0,$12(a0)
0000891E 6000                                       bra.s   loc_5DC0
00008920                            ; ---------------------------------------------------------------------------
00008920                            
00008920                            loc_5DBE:
00008920 4E71                                       nop
00008922                            
00008922                            loc_5DC0:
00008922 6100 0000                                  bsr.w   DisplaySprite
00008926 6000 0000                                  bra.w   loc_5E2A
0000892A                            
0000892A                            ; =============== S U B R O U T I N E =======================================
0000892A                            
0000892A                            
0000892A                            sub_5DC8:
0000892A 4A28 001A                                  tst.b   $1A(a0)
0000892E 6700                                       beq.s   loc_5DD6
00008930 117C 0000 001A                             move.b  #0,$1A(a0)
00008936 4E75                                       rts
00008938                            ; ---------------------------------------------------------------------------
00008938                            
00008938                            loc_5DD6:
00008938 1028 0014                                  move.b  $14(a0),d0
0000893C 6700                                       beq.s   loc_5E02
0000893E 6B00                                       bmi.s   loc_5E0A
00008940 5328 001E                                  subq.b  #1,$1E(a0)
00008944 6A00                                       bpl.s   loc_5E02
00008946 4400                                       neg.b   d0
00008948 5000                                       addq.b  #8,d0
0000894A 6500                                       bcs.s   loc_5DEC
0000894C 7000                                       moveq   #0,d0
0000894E                            
0000894E                            loc_5DEC:
0000894E 1140 001E                                  move.b  d0,$1E(a0)
00008952 1028 001F                                  move.b  $1F(a0),d0
00008956 5200                                       addq.b  #1,d0
00008958 0C00 0004                                  cmpi.b  #4,d0
0000895C 6600                                       bne.s   loc_5DFE
0000895E 7001                                       moveq   #1,d0
00008960                            
00008960                            loc_5DFE:
00008960 1140 001F                                  move.b  d0,$1F(a0)
00008964                            
00008964                            loc_5E02:
00008964 1168 001F 001A                             move.b  $1F(a0),$1A(a0)
0000896A 4E75                                       rts
0000896C                            ; ---------------------------------------------------------------------------
0000896C                            
0000896C                            loc_5E0A:
0000896C 5328 001E                                  subq.b  #1,$1E(a0)
00008970 6AF2                                       bpl.s   loc_5E02
00008972 5000                                       addq.b  #8,d0
00008974 6500                                       bcs.s   loc_5E16
00008976 7000                                       moveq   #0,d0
00008978                            
00008978                            loc_5E16:
00008978 1140 001E                                  move.b  d0,$1E(a0)
0000897C 1028 001F                                  move.b  $1F(a0),d0
00008980 5300                                       subq.b  #1,d0
00008982 6600                                       bne.s   loc_5E24
00008984 7003                                       moveq   #3,d0
00008986                            
00008986                            loc_5E24:
00008986 1140 001F                                  move.b  d0,$1F(a0)
0000898A 60D8                                       bra.s   loc_5E02
0000898C                            ; End of function sub_5DC8
0000898C                            
0000898C                            ; ---------------------------------------------------------------------------
0000898C                            ; START OF FUNCTION CHUNK FOR sub_5CEE
0000898C                            
0000898C                            loc_5E2A:
0000898C 3028 0008                                  move.w  8(a0),d0
00008990 0240 FF80                                  andi.w  #$FF80,d0
00008994 3238 F700                                  move.w  ($FFFFF700).w,d1
00008998 0441 0080                                  subi.w  #$80,d1
0000899C 0241 FF80                                  andi.w  #$FF80,d1
000089A0 9041                                       sub.w   d1,d0
000089A2 0C40 0280                                  cmpi.w  #$280,d0
000089A6 6200 0000                                  bhi.w   DeleteObject
000089AA 4E75                                       rts
000089AC                            ; END OF FUNCTION CHUNK FOR sub_5CEE
000089AC                            ; ---------------------------------------------------------------------------
000089AC                            
000089AC                            GHZBoulder_Delete:
000089AC 6100 0000                                  bsr.w   DeleteObject
000089B0 4E75                                       rts
000089B2                            
000089B2                            ; =============== S U B R O U T I N E =======================================
000089B2                            
000089B2                            
000089B2                            sub_5E50:
000089B2 1028 0026                                  move.b  $26(a0),d0
000089B6 6100 9E34                                  bsr.w   CalcSine
000089BA 3400                                       move.w  d0,d2
000089BC C5FC 0038                                  muls.w  #$38,d2 ; '8'
000089C0 E082                                       asr.l   #8,d2
000089C2 D568 0014                                  add.w   d2,$14(a0)
000089C6 C3E8 0014                                  muls.w  $14(a0),d1
000089CA E081                                       asr.l   #8,d1
000089CC 3141 0010                                  move.w  d1,$10(a0)
000089D0 C1E8 0014                                  muls.w  $14(a0),d0
000089D4 E080                                       asr.l   #8,d0
000089D6 3140 0012                                  move.w  d0,$12(a0)
000089DA 4E75                                       rts
000089DC                            ; End of function sub_5E50
000089DC                            
000089DC                            
000089DC                            ; ---------------------------------------------------------------------------
000089DC                            ; ---------------------------------------------------------------------------
000089DC                            Map_GBall:	include	"_maps\GHZ Ball.asm"
000089DC                            ; ---------------------------------------------------------------------------
000089DC                            ; Sprite mappings - swinging ball on a chain from GHZ boss
000089DC                            ; ---------------------------------------------------------------------------
000089DC                            Map_GBall_internal:
000089DC 0000                       		dc.w @shiny-Map_GBall_internal
000089DE 0000                       		dc.w @check1-Map_GBall_internal
000089E0 0000                       		dc.w @check2-Map_GBall_internal
000089E2 0000                       		dc.w @check3-Map_GBall_internal
000089E4 06                         @shiny:		dc.b 6
000089E5 F004 0024 F0               		dc.b $F0, 4, 0,	$24, $F0
000089EA F804 1024 F0               		dc.b $F8, 4, $10, $24, $F0
000089EF E80A 0000 E8               		dc.b $E8, $A, 0, 0, $E8
000089F4 E80A 0800 00               		dc.b $E8, $A, 8, 0, 0
000089F9 000A 1000 E8               		dc.b 0,	$A, $10, 0, $E8
000089FE 000A 1800 00               		dc.b 0,	$A, $18, 0, 0
00008A03 04                         @check1:	dc.b 4
00008A04 E80A 0009 E8               		dc.b $E8, $A, 0, 9, $E8
00008A09 E80A 0809 00               		dc.b $E8, $A, 8, 9, 0
00008A0E 000A 1009 E8               		dc.b 0,	$A, $10, 9, $E8
00008A13 000A 1809 00               		dc.b 0,	$A, $18, 9, 0
00008A18 04                         @check2:	dc.b 4
00008A19 E80A 0012 E8               		dc.b $E8, $A, 0, $12, $E8
00008A1E E80A 001B 00               		dc.b $E8, $A, 0, $1B, 0
00008A23 000A 181B E8               		dc.b 0,	$A, $18, $1B, $E8
00008A28 000A 1812 00               		dc.b 0,	$A, $18, $12, 0
00008A2D 04                         @check3:	dc.b 4
00008A2E E80A 081B E8               		dc.b $E8, $A, 8, $1B, $E8
00008A33 E80A 0812 00               		dc.b $E8, $A, 8, $12, 0
00008A38 000A 1012 E8               		dc.b 0,	$A, $10, $12, $E8
00008A3D 000A 101B 00               		dc.b 0,	$A, $10, $1B, 0
00008A42                            		even
00008A42                            		even
00008A42                            		include	"_incObj\1A Collapsing Ledge (part 1).asm"
00008A42                            ; ---------------------------------------------------------------------------
00008A42                            ; Object 1A - GHZ collapsing ledge
00008A42                            ; ---------------------------------------------------------------------------
00008A42                            
00008A42                            CollapseLedge:
00008A42 7000                       		moveq	#0,d0
00008A44 1028 0024                  		move.b	obRoutine(a0),d0
00008A48 323B 0000                  		move.w	Ledge_Index(pc,d0.w),d1
00008A4C 4EFB 1000                  		jmp	Ledge_Index(pc,d1.w)
00008A50                            ; ===========================================================================
00008A50 0000 0000                  Ledge_Index:	dc.w Ledge_Main-Ledge_Index, Ledge_Touch-Ledge_Index
00008A54 0000 0000                  		dc.w Ledge_Collapse-Ledge_Index, Ledge_Display-Ledge_Index
00008A58 0000 0000                  		dc.w Ledge_Delete-Ledge_Index, Ledge_WalkOff-Ledge_Index
00008A5C                            
00008A5C =00000038                  ledge_timedelay:	equ $38		; time between touching the ledge and it collapsing
00008A5C =0000003A                  ledge_collapse_flag:	equ $3A		; collapse flag
00008A5C                            ; ===========================================================================
00008A5C                            
00008A5C                            Ledge_Main:	; Routine 0
00008A5C 5428 0024                  		addq.b	#2,obRoutine(a0)
00008A60 217C 0000 0000 0004        		move.l	#Map_Ledge,obMap(a0)
00008A68 317C 4000 0002             		move.w	#$4000,obGfx(a0)
00008A6E 0028 0004 0001             		ori.b	#4,obRender(a0)
00008A74 117C 0004 0018             		move.b	#4,obPriority(a0)
00008A7A 117C 0007 0038             		move.b	#7,ledge_timedelay(a0) ; set time delay for collapse
00008A80 117C 0064 0019             		move.b	#$64,obActWid(a0)
00008A86 1168 0028 001A             		move.b	obSubtype(a0),obFrame(a0)
00008A8C 117C 0038 0016             		move.b	#$38,obHeight(a0)
00008A92 08E8 0004 0001             		bset	#4,obRender(a0)
00008A98                            
00008A98                            Ledge_Touch:	; Routine 2
00008A98 4A28 003A                  		tst.b	ledge_collapse_flag(a0)	; is ledge collapsing?
00008A9C 6700                       		beq.s	@slope		; if not, branch
00008A9E 4A28 0038                  		tst.b	ledge_timedelay(a0)	; has time reached zero?
00008AA2 6700 0000                  		beq.w	Ledge_Fragment	; if yes, branch
00008AA6 5328 0038                  		subq.b	#1,ledge_timedelay(a0) ; subtract 1 from time
00008AAA                            
00008AAA                            	@slope:
00008AAA 323C 0030                  		move.w	#$30,d1
00008AAE 45F9 0000 0000             		lea	(Ledge_SlopeData).l,a2
00008AB4 6100 F0A4                  		bsr.w	SlopeObject
00008AB8 6000 0000                  		bra.w	RememberState
00008ABC                            ; ===========================================================================
00008ABC                            
00008ABC                            Ledge_Collapse:	; Routine 4
00008ABC 4A28 0038                  		tst.b	ledge_timedelay(a0)
00008AC0 6700 0000                  		beq.w	loc_847A
00008AC4 117C 0001 003A             		move.b	#1,ledge_collapse_flag(a0)	; set collapse flag
00008ACA 5328 0038                  		subq.b	#1,ledge_timedelay(a0)
00008ACE                            
00008ACE                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00008ACE                            
00008ACE                            
00008ACE                            Ledge_WalkOff:	; Routine $A
00008ACE 323C 0030                  		move.w	#$30,d1
00008AD2 6100 F126                  		bsr.w	ExitPlatform
00008AD6 323C 0030                  		move.w	#$30,d1
00008ADA 45F9 0000 0000             		lea	(Ledge_SlopeData).l,a2
00008AE0 3428 0008                  		move.w	obX(a0),d2
00008AE4 6100 0000                  		bsr.w	SlopeObject2
00008AE8 6000 0000                  		bra.w	RememberState
00008AEC                            ; End of function Ledge_WalkOff
00008AEC                            
00008AEC                            ; ===========================================================================
00008AEC                            
00008AEC                            Ledge_Display:	; Routine 6
00008AEC 4A28 0038                  		tst.b	ledge_timedelay(a0)	; has time delay reached zero?
00008AF0 6700                       		beq.s	Ledge_TimeZero	; if yes, branch
00008AF2 4A28 003A                  		tst.b	ledge_collapse_flag(a0)	; is ledge collapsing?
00008AF6 6600 0000                  		bne.w	loc_82D0	; if yes, branch
00008AFA 5328 0038                  		subq.b	#1,ledge_timedelay(a0) ; subtract 1 from time
00008AFE 6000 0000                  		bra.w	DisplaySprite
00008B02                            ; ===========================================================================
00008B02                            
00008B02                            loc_82D0:
00008B02 5328 0038                  		subq.b	#1,ledge_timedelay(a0)
00008B06 6100 FFC6                  		bsr.w	Ledge_WalkOff
00008B0A 43F8 D000                  		lea	(v_player).w,a1
00008B0E 0829 0003 0022             		btst	#3,obStatus(a1)
00008B14 6700                       		beq.s	loc_82FC
00008B16 4A28 0038                  		tst.b	ledge_timedelay(a0)
00008B1A 6600                       		bne.s	locret_8308
00008B1C 08A9 0003 0022             		bclr	#3,obStatus(a1)
00008B22 08A9 0005 0022             		bclr	#5,obStatus(a1)
00008B28 137C 0001 001D             		move.b	#1,obNextAni(a1)
00008B2E                            
00008B2E                            loc_82FC:
00008B2E 117C 0000 003A             		move.b	#0,ledge_collapse_flag(a0)
00008B34 117C 0006 0024             		move.b	#6,obRoutine(a0) ; run "Ledge_Display" routine
00008B3A                            
00008B3A                            locret_8308:
00008B3A 4E75                       		rts	
00008B3C                            ; ===========================================================================
00008B3C                            
00008B3C                            Ledge_TimeZero:
00008B3C 6100 0000                  		bsr.w	ObjectFall
00008B40 6100 0000                  		bsr.w	DisplaySprite
00008B44 4A28 0001                  		tst.b	obRender(a0)
00008B48 6A00                       		bpl.s	Ledge_Delete
00008B4A 4E75                       		rts	
00008B4C                            ; ===========================================================================
00008B4C                            
00008B4C                            Ledge_Delete:	; Routine 8
00008B4C 6100 0000                  		bsr.w	DeleteObject
00008B50 4E75                       		rts	
00008B50 4E75                       		rts	
00008B52                            		include	"_incObj\53 Collapsing Floors.asm"
00008B52                            ; ---------------------------------------------------------------------------
00008B52                            ; Object 53 - collapsing floors	(MZ, SLZ, SBZ)
00008B52                            ; ---------------------------------------------------------------------------
00008B52                            
00008B52                            CollapseFloor:
00008B52 7000                       		moveq	#0,d0
00008B54 1028 0024                  		move.b	obRoutine(a0),d0
00008B58 323B 0000                  		move.w	CFlo_Index(pc,d0.w),d1
00008B5C 4EFB 1000                  		jmp	CFlo_Index(pc,d1.w)
00008B60                            ; ===========================================================================
00008B60 0000 0000                  CFlo_Index:	dc.w CFlo_Main-CFlo_Index, CFlo_Touch-CFlo_Index
00008B64 0000 0000                  		dc.w CFlo_Collapse-CFlo_Index, CFlo_Display-CFlo_Index
00008B68 0000 0000                  		dc.w CFlo_Delete-CFlo_Index, CFlo_WalkOff-CFlo_Index
00008B6C                            
00008B6C =00000038                  cflo_timedelay:		equ $38
00008B6C =0000003A                  cflo_collapse_flag:	equ $3A
00008B6C                            ; ===========================================================================
00008B6C                            
00008B6C                            CFlo_Main:	; Routine 0
00008B6C 5428 0024                  		addq.b	#2,obRoutine(a0)
00008B70 217C 0000 0000 0004        		move.l	#Map_CFlo,obMap(a0)
00008B78 317C 42B8 0002             		move.w	#$42B8,obGfx(a0)
00008B7E 0C38 0003 FE10             		cmpi.b	#id_SLZ,(v_zone).w ; check if level is SLZ
00008B84 6600                       		bne.s	@notSLZ
00008B86                            
00008B86 317C 44E0 0002             		move.w	#$44E0,obGfx(a0) ; SLZ specific code
00008B8C 5428 001A                  		addq.b	#2,obFrame(a0)
00008B90                            
00008B90                            	@notSLZ:
00008B90 0C38 0005 FE10             		cmpi.b	#id_SBZ,(v_zone).w ; check if level is SBZ
00008B96 6600                       		bne.s	@notSBZ
00008B98 317C 43F5 0002             		move.w	#$43F5,obGfx(a0) ; SBZ specific code
00008B9E                            
00008B9E                            	@notSBZ:
00008B9E 0028 0004 0001             		ori.b	#4,obRender(a0)
00008BA4 117C 0004 0018             		move.b	#4,obPriority(a0)
00008BAA 117C 0007 0038             		move.b	#7,cflo_timedelay(a0)
00008BB0 117C 0044 0019             		move.b	#$44,obActWid(a0)
00008BB6                            
00008BB6                            CFlo_Touch:	; Routine 2
00008BB6 4A28 003A                  		tst.b	cflo_collapse_flag(a0)	; has Sonic touched the	object?
00008BBA 6700                       		beq.s	@solid		; if not, branch
00008BBC 4A28 0038                  		tst.b	cflo_timedelay(a0)	; has time delay reached zero?
00008BC0 6700 0000                  		beq.w	CFlo_Fragment	; if yes, branch
00008BC4 5328 0038                  		subq.b	#1,cflo_timedelay(a0) ; subtract 1 from time
00008BC8                            
00008BC8                            	@solid:
00008BC8 323C 0020                  		move.w	#$20,d1
00008BCC 6100 EEB8                  		bsr.w	PlatformObject
00008BD0 4A28 0028                  		tst.b	obSubtype(a0)
00008BD4 6A00                       		bpl.s	@remstate
00008BD6 0829 0003 0022             		btst	#3,obStatus(a1)
00008BDC 6700                       		beq.s	@remstate
00008BDE 08A8 0000 0001             		bclr	#0,obRender(a0)
00008BE4 3029 0008                  		move.w	obX(a1),d0
00008BE8 9068 0008                  		sub.w	obX(a0),d0
00008BEC 6400                       		bcc.s	@remstate
00008BEE 08E8 0000 0001             		bset	#0,obRender(a0)
00008BF4                            
00008BF4                            	@remstate:
00008BF4 6000 0000                  		bra.w	RememberState
00008BF8                            ; ===========================================================================
00008BF8                            
00008BF8                            CFlo_Collapse:	; Routine 4
00008BF8 4A28 0038                  		tst.b	cflo_timedelay(a0)
00008BFC 6700 0000                  		beq.w	loc_8458
00008C00 117C 0001 003A             		move.b	#1,cflo_collapse_flag(a0)	; set object as	"touched"
00008C06 5328 0038                  		subq.b	#1,cflo_timedelay(a0)
00008C0A                            
00008C0A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00008C0A                            
00008C0A                            
00008C0A                            CFlo_WalkOff:	; Routine $A
00008C0A 323C 0020                  		move.w	#$20,d1
00008C0E 6100 EFEA                  		bsr.w	ExitPlatform
00008C12 3428 0008                  		move.w	obX(a0),d2
00008C16 6100 F550                  		bsr.w	MvSonicOnPtfm2
00008C1A 6000 0000                  		bra.w	RememberState
00008C1E                            ; End of function CFlo_WalkOff
00008C1E                            
00008C1E                            ; ===========================================================================
00008C1E                            
00008C1E                            CFlo_Display:	; Routine 6
00008C1E 4A28 0038                  		tst.b	cflo_timedelay(a0)	; has time delay reached zero?
00008C22 6700                       		beq.s	CFlo_TimeZero	; if yes, branch
00008C24 4A28 003A                  		tst.b	cflo_collapse_flag(a0)	; has Sonic touched the	object?
00008C28 6600 0000                  		bne.w	loc_8402	; if yes, branch
00008C2C 5328 0038                  		subq.b	#1,cflo_timedelay(a0); subtract 1 from time
00008C30 6000 0000                  		bra.w	DisplaySprite
00008C34                            ; ===========================================================================
00008C34                            
00008C34                            loc_8402:
00008C34 5328 0038                  		subq.b	#1,cflo_timedelay(a0)
00008C38 6100 FFD0                  		bsr.w	CFlo_WalkOff
00008C3C 43F8 D000                  		lea	(v_player).w,a1
00008C40 0829 0003 0022             		btst	#3,obStatus(a1)
00008C46 6700                       		beq.s	loc_842E
00008C48 4A28 0038                  		tst.b	cflo_timedelay(a0)
00008C4C 6600                       		bne.s	locret_843A
00008C4E 08A9 0003 0022             		bclr	#3,obStatus(a1)
00008C54 08A9 0005 0022             		bclr	#5,obStatus(a1)
00008C5A 137C 0001 001D             		move.b	#1,obNextAni(a1)
00008C60                            
00008C60                            loc_842E:
00008C60 117C 0000 003A             		move.b	#0,cflo_collapse_flag(a0)
00008C66 117C 0006 0024             		move.b	#6,obRoutine(a0) ; run "CFlo_Display" routine
00008C6C                            
00008C6C                            locret_843A:
00008C6C 4E75                       		rts	
00008C6E                            ; ===========================================================================
00008C6E                            
00008C6E                            CFlo_TimeZero:
00008C6E 6100 0000                  		bsr.w	ObjectFall
00008C72 6100 0000                  		bsr.w	DisplaySprite
00008C76 4A28 0001                  		tst.b	obRender(a0)
00008C7A 6A00                       		bpl.s	CFlo_Delete
00008C7C 4E75                       		rts	
00008C7E                            ; ===========================================================================
00008C7E                            
00008C7E                            CFlo_Delete:	; Routine 8
00008C7E 6100 0000                  		bsr.w	DeleteObject
00008C82 4E75                       		rts	
00008C84                            ; ===========================================================================
00008C84                            
00008C84                            CFlo_Fragment:
00008C84 117C 0000 003A             		move.b	#0,cflo_collapse_flag(a0)
00008C8A                            
00008C8A                            loc_8458:
00008C8A 49F9 0000 0000             		lea	(CFlo_Data2).l,a4
00008C90 0828 0000 0028             		btst	#0,obSubtype(a0)
00008C96 6700                       		beq.s	loc_846C
00008C98 49F9 0000 0000             		lea	(CFlo_Data3).l,a4
00008C9E                            
00008C9E                            loc_846C:
00008C9E 7207                       		moveq	#7,d1
00008CA0 5228 001A                  		addq.b	#1,obFrame(a0)
00008CA4 6000                       		bra.s	loc_8486
00008CA4 6000                       		bra.s	loc_8486
00008CA6                            
00008CA6                            ; ===========================================================================
00008CA6                            
00008CA6                            Ledge_Fragment:
00008CA6 117C 0000 003A             		move.b	#0,ledge_collapse_flag(a0)
00008CAC                            
00008CAC                            loc_847A:
00008CAC 49F9 0000 0000             		lea	(CFlo_Data1).l,a4
00008CB2 7218                       		moveq	#$18,d1
00008CB4 5428 001A                  		addq.b	#2,obFrame(a0)
00008CB8                            
00008CB8                            loc_8486:
00008CB8 7000                       		moveq	#0,d0
00008CBA 1028 001A                  		move.b	obFrame(a0),d0
00008CBE D040                       		add.w	d0,d0
00008CC0 2668 0004                  		movea.l	obMap(a0),a3
00008CC4 D6F3 0000                  		adda.w	(a3,d0.w),a3
00008CC8 524B                       		addq.w	#1,a3
00008CCA 08E8 0005 0001             		bset	#5,obRender(a0)
00008CD0 1828 0000                  		move.b	0(a0),d4
00008CD4 1A28 0001                  		move.b	obRender(a0),d5
00008CD8 2248                       		movea.l	a0,a1
00008CDA 6000                       		bra.s	loc_84B2
00008CDC                            ; ===========================================================================
00008CDC                            
00008CDC                            loc_84AA:
00008CDC 6100 0000                  		bsr.w	FindFreeObj
00008CE0 6600                       		bne.s	loc_84F2
00008CE2 5A4B                       		addq.w	#5,a3
00008CE4                            
00008CE4                            loc_84B2:
00008CE4 137C 0006 0024             		move.b	#6,obRoutine(a1)
00008CEA 1344 0000                  		move.b	d4,0(a1)
00008CEE 234B 0004                  		move.l	a3,obMap(a1)
00008CF2 1345 0001                  		move.b	d5,obRender(a1)
00008CF6 3368 0008 0008             		move.w	obX(a0),obX(a1)
00008CFC 3368 000C 000C             		move.w	obY(a0),obY(a1)
00008D02 3368 0002 0002             		move.w	obGfx(a0),obGfx(a1)
00008D08 1368 0018 0018             		move.b	obPriority(a0),obPriority(a1)
00008D0E 1368 0019 0019             		move.b	obActWid(a0),obActWid(a1)
00008D14 135C 0038                  		move.b	(a4)+,ledge_timedelay(a1)
00008D18 B3C8                       		cmpa.l	a0,a1
00008D1A 6400                       		bhs.s	loc_84EE
00008D1C 6100 0000                  		bsr.w	DisplaySprite1
00008D20                            
00008D20                            loc_84EE:
00008D20 51C9 FFBA                  		dbf	d1,loc_84AA
00008D24                            
00008D24                            loc_84F2:
00008D24 6100 0000                  		bsr.w	DisplaySprite
00008D32                            ; ===========================================================================
00008D32                            ; ---------------------------------------------------------------------------
00008D32                            ; Disintegration data for collapsing ledges (MZ, SLZ, SBZ)
00008D32                            ; ---------------------------------------------------------------------------
00008D32 1C18 1410 1A16 120E 0A06+  CFlo_Data1:	dc.b $1C, $18, $14, $10, $1A, $16, $12,	$E, $A,	6, $18,	$14, $10, $C, 8, 4
00008D42 1612 0E0A 0602 1410 0C00   		dc.b $16, $12, $E, $A, 6, 2, $14, $10, $C, 0
00008D4C 1E16 0E06 1A12 0A02        CFlo_Data2:	dc.b $1E, $16, $E, 6, $1A, $12,	$A, 2
00008D54 161E 1A12 060E 0A02        CFlo_Data3:	dc.b $16, $1E, $1A, $12, 6, $E,	$A, 2
00008D5C                            
00008D5C                            ; ---------------------------------------------------------------------------
00008D5C                            ; Sloped platform subroutine (GHZ collapsing ledges and	MZ platforms)
00008D5C                            ; ---------------------------------------------------------------------------
00008D5C                            
00008D5C                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00008D5C                            
00008D5C                            
00008D5C                            SlopeObject2:
00008D5C 43F8 D000                  		lea	(v_player).w,a1
00008D60 0829 0003 0022             		btst	#3,obStatus(a1)
00008D66 6700                       		beq.s	locret_856E
00008D68 3029 0008                  		move.w	obX(a1),d0
00008D6C 9068 0008                  		sub.w	obX(a0),d0
00008D70 D041                       		add.w	d1,d0
00008D72 E248                       		lsr.w	#1,d0
00008D74 0828 0000 0001             		btst	#0,obRender(a0)
00008D7A 6700                       		beq.s	loc_854E
00008D7C 4640                       		not.w	d0
00008D7E D041                       		add.w	d1,d0
00008D80                            
00008D80                            loc_854E:
00008D80 7200                       		moveq	#0,d1
00008D82 1232 0000                  		move.b	(a2,d0.w),d1
00008D86 3028 000C                  		move.w	obY(a0),d0
00008D8A 9041                       		sub.w	d1,d0
00008D8C 7200                       		moveq	#0,d1
00008D8E 1229 0016                  		move.b	obHeight(a1),d1
00008D92 9041                       		sub.w	d1,d0
00008D94 3340 000C                  		move.w	d0,obY(a1)
00008D98 9468 0008                  		sub.w	obX(a0),d2
00008D9C 9569 0008                  		sub.w	d2,obX(a1)
00008DA0                            
00008DA0                            locret_856E:
00008DA0 4E75                       		rts	
00008DA2                            ; End of function SlopeObject2
00008DA2                            
00008DA2                            ; ===========================================================================
00008DA2                            ; ---------------------------------------------------------------------------
00008DA2                            ; Collision data for GHZ collapsing ledge
00008DA2                            ; ---------------------------------------------------------------------------
00008DA2                            Ledge_SlopeData:
00008DA2                            		incbin	"misc\GHZ Collapsing Ledge Heightmap.bin"
00008DD2                            		even
00008DD2                            
00008DD2                            Map_Ledge:	include	"_maps\Collapsing Ledge.asm"
00008DD2                            ; ---------------------------------------------------------------------------
00008DD2                            ; Sprite mappings - GHZ	collapsing ledge
00008DD2                            ; ---------------------------------------------------------------------------
00008DD2                            Map_Ledge_internal:
00008DD2 0000                       		dc.w @left-Map_Ledge_internal
00008DD4 0000                       		dc.w @right-Map_Ledge_internal
00008DD6 0000                       		dc.w @leftsmash-Map_Ledge_internal
00008DD8 0000                       		dc.w @rightsmash-Map_Ledge_internal
00008DDA 10                         @left:		dc.b $10
00008DDB C80E 0057 10               		dc.b $C8, $E, 0, $57, $10 ; ledge facing left
00008DE0 D00D 0063 F0               		dc.b $D0, $D, 0, $63, $F0
00008DE5 E00D 006B 10               		dc.b $E0, $D, 0, $6B, $10
00008DEA E00D 0073 F0               		dc.b $E0, $D, 0, $73, $F0
00008DEF D806 007B E0               		dc.b $D8, 6, 0,	$7B, $E0
00008DF4 D806 0081 D0               		dc.b $D8, 6, 0,	$81, $D0
00008DF9 F00D 0087 10               		dc.b $F0, $D, 0, $87, $10
00008DFE F00D 008F F0               		dc.b $F0, $D, 0, $8F, $F0
00008E03 F005 0097 E0               		dc.b $F0, 5, 0,	$97, $E0
00008E08 F005 009B D0               		dc.b $F0, 5, 0,	$9B, $D0
00008E0D 000D 009F 10               		dc.b 0,	$D, 0, $9F, $10
00008E12 0005 00A7 00               		dc.b 0,	5, 0, $A7, 0
00008E17 000D 00AB E0               		dc.b 0,	$D, 0, $AB, $E0
00008E1C 0005 00B3 D0               		dc.b 0,	5, 0, $B3, $D0
00008E21 100D 00AB 10               		dc.b $10, $D, 0, $AB, $10
00008E26 1005 00B7 00               		dc.b $10, 5, 0,	$B7, 0
00008E2B 10                         @right:		dc.b $10
00008E2C C80E 0057 10               		dc.b $C8, $E, 0, $57, $10 ; ledge facing right
00008E31 D00D 0063 F0               		dc.b $D0, $D, 0, $63, $F0
00008E36 E00D 006B 10               		dc.b $E0, $D, 0, $6B, $10
00008E3B E00D 0073 F0               		dc.b $E0, $D, 0, $73, $F0
00008E40 D806 007B E0               		dc.b $D8, 6, 0,	$7B, $E0
00008E45 D806 00BB D0               		dc.b $D8, 6, 0,	$BB, $D0
00008E4A F00D 0087 10               		dc.b $F0, $D, 0, $87, $10
00008E4F F00D 008F F0               		dc.b $F0, $D, 0, $8F, $F0
00008E54 F005 0097 E0               		dc.b $F0, 5, 0,	$97, $E0
00008E59 F005 00C1 D0               		dc.b $F0, 5, 0,	$C1, $D0
00008E5E 000D 009F 10               		dc.b 0,	$D, 0, $9F, $10
00008E63 0005 00A7 00               		dc.b 0,	5, 0, $A7, 0
00008E68 000D 00AB E0               		dc.b 0,	$D, 0, $AB, $E0
00008E6D 0005 00B7 D0               		dc.b 0,	5, 0, $B7, $D0
00008E72 100D 00AB 10               		dc.b $10, $D, 0, $AB, $10
00008E77 1005 00B7 00               		dc.b $10, 5, 0,	$B7, 0
00008E7C 19                         @leftsmash:	dc.b $19
00008E7D C806 005D 20               		dc.b $C8, 6, 0,	$5D, $20 ; ledge facing	left in	pieces
00008E82 C806 0057 10               		dc.b $C8, 6, 0,	$57, $10
00008E87 D005 0067 00               		dc.b $D0, 5, 0,	$67, 0
00008E8C D005 0063 F0               		dc.b $D0, 5, 0,	$63, $F0
00008E91 E005 006F 20               		dc.b $E0, 5, 0,	$6F, $20
00008E96 E005 006B 10               		dc.b $E0, 5, 0,	$6B, $10
00008E9B E005 0077 00               		dc.b $E0, 5, 0,	$77, 0
00008EA0 E005 0073 F0               		dc.b $E0, 5, 0,	$73, $F0
00008EA5 D806 007B E0               		dc.b $D8, 6, 0,	$7B, $E0
00008EAA D806 0081 D0               		dc.b $D8, 6, 0,	$81, $D0
00008EAF F005 008B 20               		dc.b $F0, 5, 0,	$8B, $20
00008EB4 F005 0087 10               		dc.b $F0, 5, 0,	$87, $10
00008EB9 F005 0093 00               		dc.b $F0, 5, 0,	$93, 0
00008EBE F005 008F F0               		dc.b $F0, 5, 0,	$8F, $F0
00008EC3 F005 0097 E0               		dc.b $F0, 5, 0,	$97, $E0
00008EC8 F005 009B D0               		dc.b $F0, 5, 0,	$9B, $D0
00008ECD 0005 008B 20               		dc.b 0,	5, 0, $8B, $20
00008ED2 0005 008B 10               		dc.b 0,	5, 0, $8B, $10
00008ED7 0005 00A7 00               		dc.b 0,	5, 0, $A7, 0
00008EDC 0005 00AB F0               		dc.b 0,	5, 0, $AB, $F0
00008EE1 0005 00AB E0               		dc.b 0,	5, 0, $AB, $E0
00008EE6 0005 00B3 D0               		dc.b 0,	5, 0, $B3, $D0
00008EEB 1005 00AB 20               		dc.b $10, 5, 0,	$AB, $20
00008EF0 1005 00AB 10               		dc.b $10, 5, 0,	$AB, $10
00008EF5 1005 00B7 00               		dc.b $10, 5, 0,	$B7, 0
00008EFA 19                         @rightsmash:	dc.b $19
00008EFB C806 005D 20               		dc.b $C8, 6, 0,	$5D, $20 ; ledge facing	right in pieces
00008F00 C806 0057 10               		dc.b $C8, 6, 0,	$57, $10
00008F05 D005 0067 00               		dc.b $D0, 5, 0,	$67, 0
00008F0A D005 0063 F0               		dc.b $D0, 5, 0,	$63, $F0
00008F0F E005 006F 20               		dc.b $E0, 5, 0,	$6F, $20
00008F14 E005 006B 10               		dc.b $E0, 5, 0,	$6B, $10
00008F19 E005 0077 00               		dc.b $E0, 5, 0,	$77, 0
00008F1E E005 0073 F0               		dc.b $E0, 5, 0,	$73, $F0
00008F23 D806 007B E0               		dc.b $D8, 6, 0,	$7B, $E0
00008F28 D806 00BB D0               		dc.b $D8, 6, 0,	$BB, $D0
00008F2D F005 008B 20               		dc.b $F0, 5, 0,	$8B, $20
00008F32 F005 0087 10               		dc.b $F0, 5, 0,	$87, $10
00008F37 F005 0093 00               		dc.b $F0, 5, 0,	$93, 0
00008F3C F005 008F F0               		dc.b $F0, 5, 0,	$8F, $F0
00008F41 F005 0097 E0               		dc.b $F0, 5, 0,	$97, $E0
00008F46 F005 00C1 D0               		dc.b $F0, 5, 0,	$C1, $D0
00008F4B 0005 008B 20               		dc.b 0,	5, 0, $8B, $20
00008F50 0005 008B 10               		dc.b 0,	5, 0, $8B, $10
00008F55 0005 00A7 00               		dc.b 0,	5, 0, $A7, 0
00008F5A 0005 00AB F0               		dc.b 0,	5, 0, $AB, $F0
00008F5F 0005 00AB E0               		dc.b 0,	5, 0, $AB, $E0
00008F64 0005 00B7 D0               		dc.b 0,	5, 0, $B7, $D0
00008F69 1005 00AB 20               		dc.b $10, 5, 0,	$AB, $20
00008F6E 1005 00AB 10               		dc.b $10, 5, 0,	$AB, $10
00008F73 1005 00B7 00               		dc.b $10, 5, 0,	$B7, 0
00008F78                            		even
00008F78                            		even
00008F78                            Map_CFlo:	include	"_maps\Collapsing Floors.asm"
00008F78                            ; ---------------------------------------------------------------------------
00008F78                            ; Sprite mappings - collapsing floors (MZ, SLZ,	SBZ)
00008F78                            ; ---------------------------------------------------------------------------
00008F78                            Map_CFlo_internal:
00008F78 0000                       		dc.w byte_874E-Map_CFlo_internal
00008F7A 0000                       		dc.w byte_8763-Map_CFlo_internal
00008F7C 0000                       		dc.w byte_878C-Map_CFlo_internal
00008F7E 0000                       		dc.w byte_87A1-Map_CFlo_internal
00008F80 04                         byte_874E:	dc.b 4
00008F81 F80D 0000 E0               		dc.b $F8, $D, 0, 0, $E0	; MZ and SBZ blocks
00008F86 080D 0000 E0               		dc.b 8,	$D, 0, 0, $E0
00008F8B F80D 0000 00               		dc.b $F8, $D, 0, 0, 0
00008F90 080D 0000 00               		dc.b 8,	$D, 0, 0, 0
00008F95 08                         byte_8763:	dc.b 8
00008F96 F805 0000 E0               		dc.b $F8, 5, 0,	0, $E0
00008F9B F805 0000 F0               		dc.b $F8, 5, 0,	0, $F0
00008FA0 F805 0000 00               		dc.b $F8, 5, 0,	0, 0
00008FA5 F805 0000 10               		dc.b $F8, 5, 0,	0, $10
00008FAA 0805 0000 E0               		dc.b 8,	5, 0, 0, $E0
00008FAF 0805 0000 F0               		dc.b 8,	5, 0, 0, $F0
00008FB4 0805 0000 00               		dc.b 8,	5, 0, 0, 0
00008FB9 0805 0000 10               		dc.b 8,	5, 0, 0, $10
00008FBE 04                         byte_878C:	dc.b 4
00008FBF F80D 0000 E0               		dc.b $F8, $D, 0, 0, $E0	; SLZ blocks
00008FC4 080D 0008 E0               		dc.b 8,	$D, 0, 8, $E0
00008FC9 F80D 0000 00               		dc.b $F8, $D, 0, 0, 0
00008FCE 080D 0008 00               		dc.b 8,	$D, 0, 8, 0
00008FD3 08                         byte_87A1:	dc.b 8
00008FD4 F805 0000 E0               		dc.b $F8, 5, 0,	0, $E0
00008FD9 F805 0004 F0               		dc.b $F8, 5, 0,	4, $F0
00008FDE F805 0000 00               		dc.b $F8, 5, 0,	0, 0
00008FE3 F805 0004 10               		dc.b $F8, 5, 0,	4, $10
00008FE8 0805 0008 E0               		dc.b 8,	5, 0, 8, $E0
00008FED 0805 000C F0               		dc.b 8,	5, 0, $C, $F0
00008FF2 0805 0008 00               		dc.b 8,	5, 0, 8, 0
00008FF7 0805 000C 10               		dc.b 8,	5, 0, $C, $10
00008FFC                            		even
00008FFC                            		even
00008FFC                            
00008FFC                            		include	"_incObj\1C Scenery.asm"
00008FFC                            ; ---------------------------------------------------------------------------
00008FFC                            ; Object 1C - scenery (GHZ bridge stump, SLZ lava thrower)
00008FFC                            ; ---------------------------------------------------------------------------
00008FFC                            
00008FFC                            Scenery:
00008FFC 7000                       		moveq	#0,d0
00008FFE 1028 0024                  		move.b	obRoutine(a0),d0
00009002 323B 0000                  		move.w	Scen_Index(pc,d0.w),d1
00009006 4EFB 1000                  		jmp	Scen_Index(pc,d1.w)
0000900A                            ; ===========================================================================
0000900A 0000                       Scen_Index:	dc.w Scen_Main-Scen_Index
0000900C 0000                       		dc.w Scen_ChkDel-Scen_Index
0000900E                            ; ===========================================================================
0000900E                            
0000900E                            Scen_Main:	; Routine 0
0000900E 5428 0024                  		addq.b	#2,obRoutine(a0)
00009012 7000                       		moveq	#0,d0
00009014 1028 0028                  		move.b	obSubtype(a0),d0 ; copy object subtype to d0
00009018 C0FC 000A                  		mulu.w	#$A,d0		; multiply by $A
0000901C 43FB 0000                  		lea	Scen_Values(pc,d0.w),a1
00009020 2159 0004                  		move.l	(a1)+,obMap(a0)
00009024 3159 0002                  		move.w	(a1)+,obGfx(a0)
00009028 0028 0004 0001             		ori.b	#4,obRender(a0)
0000902E 1159 001A                  		move.b	(a1)+,obFrame(a0)
00009032 1159 0019                  		move.b	(a1)+,obActWid(a0)
00009036 1159 0018                  		move.b	(a1)+,obPriority(a0)
0000903A 1159 0020                  		move.b	(a1)+,obColType(a0)
0000903E                            
0000903E                            Scen_ChkDel:	; Routine 2
0000905C 6000 0000                  		bra.w	DisplaySprite
00009060                            ; ===========================================================================
00009060                            ; ---------------------------------------------------------------------------
00009060                            ; Variables for	object $1C are stored in an array
00009060                            ; ---------------------------------------------------------------------------
00009060 0000 0000                  Scen_Values:	dc.l Map_Scen		; mappings address
00009064 44D8                       		dc.w $44D8		; VRAM setting
00009066 0008 0200                  		dc.b 0,	8, 2, 0		; frame, width,	priority, collision response
0000906A 0000 0000                  		dc.l Map_Scen
0000906E 44D8                       		dc.w $44D8
00009070 0008 0200                  		dc.b 0,	8, 2, 0
00009074 0000 0000                  		dc.l Map_Scen
00009078 44D8                       		dc.w $44D8
0000907A 0008 0200                  		dc.b 0,	8, 2, 0
0000907E 0000 7F6E                  		dc.l Map_Bri
00009082 438E                       		dc.w $438E
00009084 0110 0100                  		dc.b 1,	$10, 1,	0
00009088                            		even
00009088                            		even
00009088                            Map_Scen:	include	"_maps\Scenery.asm"
00009088                            ; ---------------------------------------------------------------------------
00009088                            ; Sprite mappings - SLZ	lava thrower
00009088                            ; ---------------------------------------------------------------------------
00009088                            Map_Scen_internal:
00009088 0000                       		dc.w byte_8858-Map_Scen_internal
0000908A 01                         byte_8858:	dc.b 1
0000908B F007 0000 F8               		dc.b $F0, 7, 0,	0, $F8
00009090                            		even
00009090                            		even
00009090                            
00009090                            		include	"_incObj\1D Unused Switch.asm"
00009090                            ; ---------------------------------------------------------------------------
00009090                            ; Object 1D - switch that activates when Sonic touches it
00009090                            ; (this	is not used anywhere in	the game)
00009090                            ; ---------------------------------------------------------------------------
00009090                            
00009090                            MagicSwitch:
00009090 7000                       		moveq	#0,d0
00009092 1028 0024                  		move.b	obRoutine(a0),d0
00009096 323B 0000                  		move.w	Swi_Index(pc,d0.w),d1
0000909A 4EFB 1000                  		jmp	Swi_Index(pc,d1.w)
0000909E                            ; ===========================================================================
0000909E 0000                       Swi_Index:	dc.w Swi_Main-Swi_Index
000090A0 0000                       		dc.w Swi_Action-Swi_Index
000090A2 0000                       		dc.w Swi_Delete-Swi_Index
000090A4                            
000090A4 =00000030                  swi_origY:	equ $30		; original y-axis position
000090A4                            ; ===========================================================================
000090A4                            
000090A4                            Swi_Main:	; Routine 0
000090A4 5428 0024                  		addq.b	#2,obRoutine(a0)
000090A8 217C 0000 0000 0004        		move.l	#Map_Swi,obMap(a0)
000090B0 317C 4000 0002             		move.w	#$4000,obGfx(a0)
000090B6 117C 0004 0001             		move.b	#4,obRender(a0)
000090BC 3168 000C 0030             		move.w	obY(a0),swi_origY(a0) ; save position on y-axis
000090C2 117C 0010 0019             		move.b	#$10,obActWid(a0)
000090C8 117C 0005 0018             		move.b	#5,obPriority(a0)
000090CE                            
000090CE                            Swi_Action:	; Routine 2
000090CE 3168 0030 000C             		move.w	swi_origY(a0),obY(a0) ; restore position on y-axis
000090D4 323C 0010                  		move.w	#$10,d1
000090D8 6100 0000                  		bsr.w	Swi_ChkTouch	; check if Sonic touches the switch
000090DC 6700                       		beq.s	Swi_ChkDel	; if not, branch
000090DE                            
000090DE 5468 000C                  		addq.w	#2,obY(a0)	; move object 2	pixels
000090E2 7001                       		moveq	#1,d0
000090E4 31C0 F7E0                  		move.w	d0,(f_switch).w	; set switch 0 as "pressed"
000090E8                            
000090E8                            Swi_ChkDel:
000090E8 6100 0000                  		bsr.w	DisplaySprite
0000910A 4E75                       		rts	
0000910C                            ; ===========================================================================
0000910C                            
0000910C                            Swi_Delete:	; Routine 4
0000910C 6100 0000                  		bsr.w	DeleteObject
00009110 4E75                       		rts	
00009112                            
00009112                            ; ---------------------------------------------------------------------------
00009112                            ; Subroutine to	check if Sonic touches the object
00009112                            ; ---------------------------------------------------------------------------
00009112                            
00009112                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00009112                            
00009112                            
00009112                            Swi_ChkTouch:
00009112 43F8 D000                  		lea	(v_player).w,a1
00009116 3029 0008                  		move.w	obX(a1),d0
0000911A 9068 0008                  		sub.w	obX(a0),d0
0000911E D041                       		add.w	d1,d0
00009120 6B00                       		bmi.s	Swi_NoTouch
00009122 D241                       		add.w	d1,d1
00009124 B041                       		cmp.w	d1,d0
00009126 6400                       		bcc.s	Swi_NoTouch
00009128 3429 000C                  		move.w	obY(a1),d2
0000912C 1229 0016                  		move.b	obHeight(a1),d1
00009130 4881                       		ext.w	d1
00009132 D242                       		add.w	d2,d1
00009134 3028 000C                  		move.w	obY(a0),d0
00009138 0440 0010                  		subi.w	#$10,d0
0000913C 9041                       		sub.w	d1,d0
0000913E 6200                       		bhi.s	Swi_NoTouch
00009140 0C40 FFF0                  		cmpi.w	#-$10,d0
00009144 6500                       		bcs.s	Swi_NoTouch
00009146 70FF                       		moveq	#-1,d0		; Sonic has touched it
00009148 4E75                       		rts	
0000914A                            ; ===========================================================================
0000914A                            
0000914A                            Swi_NoTouch:
0000914A 7000                       		moveq	#0,d0		; Sonic hasn't touched it
0000914C 4E75                       		rts	
0000914E                            ; End of function Swi_ChkTouch
0000914E                            ; End of function Swi_ChkTouch
0000914E                            Map_Swi:	include	"_maps\Unused Switch.asm"
0000914E                            ; ---------------------------------------------------------------------------
0000914E                            ; Sprite mappings - Unused switch thingy
0000914E                            ; ---------------------------------------------------------------------------
0000914E                            Map_Swi_internal:
0000914E 0000                       		dc.w byte_891E-Map_Swi_internal
00009150 04                         byte_891E:	dc.b 4
00009151 E807 0054 F0               		dc.b $E8, 7, 0,	$54, $F0
00009156 0805 005C F0               		dc.b 8,	5, 0, $5C, $F0
0000915B E807 0054 00               		dc.b $E8, 7, 0,	$54, 0
00009160 0805 005C 00               		dc.b 8,	5, 0, $5C, 0
00009166 00                         		even
00009166 00                         		even
00009166                            
00009166                            		include	"_incObj\2A SBZ Small Door.asm"
00009166                            ; ---------------------------------------------------------------------------
00009166                            ; Object 2A - small vertical door (SBZ)
00009166                            ; ---------------------------------------------------------------------------
00009166                            
00009166                            AutoDoor:
00009166 7000                       		moveq	#0,d0
00009168 1028 0024                  		move.b	obRoutine(a0),d0
0000916C 323B 0000                  		move.w	ADoor_Index(pc,d0.w),d1
00009170 4EFB 1000                  		jmp	ADoor_Index(pc,d1.w)
00009174                            ; ===========================================================================
00009174 0000                       ADoor_Index:	dc.w ADoor_Main-ADoor_Index
00009176 0000                       		dc.w ADoor_OpenShut-ADoor_Index
00009178                            ; ===========================================================================
00009178                            
00009178                            ADoor_Main:	; Routine 0
00009178 5428 0024                  		addq.b	#2,obRoutine(a0)
0000917C 217C 0000 0000 0004        		move.l	#Map_ADoor,obMap(a0)
00009184 317C 42E8 0002             		move.w	#$42E8,obGfx(a0)
0000918A 0028 0004 0001             		ori.b	#4,obRender(a0)
00009190 117C 0008 0019             		move.b	#8,obActWid(a0)
00009196 117C 0004 0018             		move.b	#4,obPriority(a0)
0000919C                            
0000919C                            ADoor_OpenShut:	; Routine 2
0000919C 323C 0040                  		move.w	#$40,d1		; set range for door detection
000091A0 4228 001C                  		clr.b	obAnim(a0)	; use "closing"	animation
000091A4 3038 D008                  		move.w	(v_player+obX).w,d0
000091A8 D041                       		add.w	d1,d0
000091AA B068 0008                  		cmp.w	obX(a0),d0
000091AE 6500                       		bcs.s	ADoor_Animate
000091B0 9041                       		sub.w	d1,d0
000091B2 9041                       		sub.w	d1,d0
000091B4 B068 0008                  		cmp.w	obX(a0),d0	; is Sonic > $40 pixels from door?
000091B8 6400                       		bcc.s	ADoor_Animate	; close door
000091BA D041                       		add.w	d1,d0
000091BC B068 0008                  		cmp.w	obX(a0),d0	; is Sonic left of the door?
000091C0 6400                       		bcc.s	loc_899A	; if yes, branch
000091C2 0828 0000 0022             		btst	#0,obStatus(a0)
000091C8 6600                       		bne.s	ADoor_Animate
000091CA 6000                       		bra.s	ADoor_Open
000091CC                            ; ===========================================================================
000091CC                            
000091CC                            loc_899A:
000091CC 0828 0000 0022             		btst	#0,obStatus(a0)
000091D2 6700                       		beq.s	ADoor_Animate
000091D4                            
000091D4                            ADoor_Open:
000091D4 117C 0001 001C             		move.b	#1,obAnim(a0)	; use "opening"	animation
000091DA                            
000091DA                            ADoor_Animate:
000091DA 43F9 0000 0000             		lea	(Ani_ADoor).l,a1
000091E0 6100 0000                  		bsr.w	AnimateSprite
000091E4 4A28 001A                  		tst.b	obFrame(a0)	; is the door open?
000091E8 6600                       		bne.s	@remember	; if yes, branch
000091EA 323C 0011                  		move.w	#$11,d1
000091EE 343C 0020                  		move.w	#$20,d2
000091F2 3602                       		move.w	d2,d3
000091F4 5243                       		addq.w	#1,d3
000091F6 3828 0008                  		move.w	obX(a0),d4
000091FA 6100 0000                  		bsr.w	SolidObject
000091FE                            
000091FE                            	@remember:
000091FE 6000 0000                  		bra.w	RememberState
000091FE 6000 0000                  		bra.w	RememberState
00009202                            		include	"_anim\SBZ Small Door.asm"
00009202                            ; ---------------------------------------------------------------------------
00009202                            ; Animation script - doors (SBZ)
00009202                            ; ---------------------------------------------------------------------------
00009202 0000                       Ani_ADoor:	dc.w @close-Ani_ADoor
00009204 0000                       		dc.w @open-Ani_ADoor
00009206 0008 0706 0504 0302 0100+  @close:		dc.b 0,	8, 7, 6, 5, 4, 3, 2, 1,	0, afBack, 1
00009212 0000 0102 0304 0506 0708+  @open:		dc.b 0,	0, 1, 2, 3, 4, 5, 6, 7,	8, afBack, 1
0000921E                            		even
0000921E                            		even
0000921E                            Map_ADoor:	include	"_maps\SBZ Small Door.asm"
0000921E                            ; ---------------------------------------------------------------------------
0000921E                            ; Sprite mappings - doors (SBZ)
0000921E                            ; ---------------------------------------------------------------------------
0000921E                            Map_ADoor_internal:
0000921E 0000                       		dc.w @closed-Map_ADoor_internal
00009220 0000                       		dc.w @01-Map_ADoor_internal
00009222 0000                       		dc.w @02-Map_ADoor_internal
00009224 0000                       		dc.w @03-Map_ADoor_internal
00009226 0000                       		dc.w @04-Map_ADoor_internal
00009228 0000                       		dc.w @05-Map_ADoor_internal
0000922A 0000                       		dc.w @06-Map_ADoor_internal
0000922C 0000                       		dc.w @07-Map_ADoor_internal
0000922E 0000                       		dc.w @open-Map_ADoor_internal
00009230 02                         @closed:	dc.b 2
00009231 E007 0800 F8               		dc.b $E0, 7, 8,	0, $F8	; door closed
00009236 0007 0800 F8               		dc.b 0,	7, 8, 0, $F8
0000923B 02                         @01:		dc.b 2
0000923C DC07 0800 F8               		dc.b $DC, 7, 8,	0, $F8
00009241 0407 0800 F8               		dc.b 4,	7, 8, 0, $F8
00009246 02                         @02:		dc.b 2
00009247 D807 0800 F8               		dc.b $D8, 7, 8,	0, $F8
0000924C 0807 0800 F8               		dc.b 8,	7, 8, 0, $F8
00009251 02                         @03:		dc.b 2
00009252 D407 0800 F8               		dc.b $D4, 7, 8,	0, $F8
00009257 0C07 0800 F8               		dc.b $C, 7, 8, 0, $F8
0000925C 02                         @04:		dc.b 2
0000925D D007 0800 F8               		dc.b $D0, 7, 8,	0, $F8
00009262 1007 0800 F8               		dc.b $10, 7, 8,	0, $F8
00009267 02                         @05:		dc.b 2
00009268 CC07 0800 F8               		dc.b $CC, 7, 8,	0, $F8
0000926D 1407 0800 F8               		dc.b $14, 7, 8,	0, $F8
00009272 02                         @06:		dc.b 2
00009273 C807 0800 F8               		dc.b $C8, 7, 8,	0, $F8
00009278 1807 0800 F8               		dc.b $18, 7, 8,	0, $F8
0000927D 02                         @07:		dc.b 2
0000927E C407 0800 F8               		dc.b $C4, 7, 8,	0, $F8
00009283 1C07 0800 F8               		dc.b $1C, 7, 8,	0, $F8
00009288 02                         @open:		dc.b 2
00009289 C007 0800 F8               		dc.b $C0, 7, 8,	0, $F8	; door fully open
0000928E 2007 0800 F8               		dc.b $20, 7, 8,	0, $F8
00009294 00                         		even
00009294 00                         		even
00009294                            
00009294                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00009294                            
00009294                            
00009294                            Obj44_SolidWall:
00009294 6100 0000                  		bsr.w	Obj44_SolidWall2
00009298 6700                       		beq.s	loc_8AA8
0000929A 6B00 0000                  		bmi.w	loc_8AC4
0000929E 4A40                       		tst.w	d0
000092A0 6700 0000                  		beq.w	loc_8A92
000092A4 6B00                       		bmi.s	loc_8A7C
000092A6 4A69 0010                  		tst.w	obVelX(a1)
000092AA 6B00                       		bmi.s	loc_8A92
000092AC 6000                       		bra.s	loc_8A82
000092AE                            ; ===========================================================================
000092AE                            
000092AE                            loc_8A7C:
000092AE 4A69 0010                  		tst.w	obVelX(a1)
000092B2 6A00                       		bpl.s	loc_8A92
000092B4                            
000092B4                            loc_8A82:
000092B4 9169 0008                  		sub.w	d0,obX(a1)
000092B8 337C 0000 0014             		move.w	#0,obInertia(a1)
000092BE 337C 0000 0010             		move.w	#0,obVelX(a1)
000092C4                            
000092C4                            loc_8A92:
000092C4 0829 0001 0022             		btst	#1,obStatus(a1)
000092CA 6600                       		bne.s	loc_8AB6
000092CC 08E9 0005 0022             		bset	#5,obStatus(a1)
000092D2 08E8 0005 0022             		bset	#5,obStatus(a0)
000092D8 4E75                       		rts	
000092DA                            ; ===========================================================================
000092DA                            
000092DA                            loc_8AA8:
000092DA 0828 0005 0022             		btst	#5,obStatus(a0)
000092E0 6700                       		beq.s	locret_8AC2
000092E2 337C 0000 001C             		move.w	#id_Run,obAnim(a1)
000092E8                            
000092E8                            loc_8AB6:
000092E8 08A8 0005 0022             		bclr	#5,obStatus(a0)
000092EE 08A9 0005 0022             		bclr	#5,obStatus(a1)
000092F4                            
000092F4                            locret_8AC2:
000092F4 4E75                       		rts	
000092F6                            ; ===========================================================================
000092F6                            
000092F6                            loc_8AC4:
000092F6 4A69 0012                  		tst.w	obVelY(a1)
000092FA 6A00                       		bpl.s	locret_8AD8
000092FC 4A43                       		tst.w	d3
000092FE 6A00                       		bpl.s	locret_8AD8
00009300 9769 000C                  		sub.w	d3,obY(a1)
00009304 337C 0000 0012             		move.w	#0,obVelY(a1)
0000930A                            
0000930A                            locret_8AD8:
0000930A 4E75                       		rts	
0000930C                            ; End of function Obj44_SolidWall
0000930C                            
0000930C                            
0000930C                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000930C                            
0000930C                            
0000930C                            Obj44_SolidWall2:
0000930C 43F8 D000                  		lea	(v_player).w,a1
00009310 3029 0008                  		move.w	obX(a1),d0
00009314 9068 0008                  		sub.w	obX(a0),d0
00009318 D041                       		add.w	d1,d0
0000931A 6B00                       		bmi.s	loc_8B48
0000931C 3601                       		move.w	d1,d3
0000931E D643                       		add.w	d3,d3
00009320 B043                       		cmp.w	d3,d0
00009322 6200                       		bhi.s	loc_8B48
00009324 1629 0016                  		move.b	obHeight(a1),d3
00009328 4883                       		ext.w	d3
0000932A D443                       		add.w	d3,d2
0000932C 3629 000C                  		move.w	obY(a1),d3
00009330 9668 000C                  		sub.w	obY(a0),d3
00009334 D642                       		add.w	d2,d3
00009336 6B00                       		bmi.s	loc_8B48
00009338 3802                       		move.w	d2,d4
0000933A D844                       		add.w	d4,d4
0000933C B644                       		cmp.w	d4,d3
0000933E 6400                       		bhs.s	loc_8B48
00009340 4A38 F7C8                  		tst.b	(f_lockmulti).w
00009344 6B00                       		bmi.s	loc_8B48
00009346 0C38 0006 D024             		cmpi.b	#6,(v_player+obRoutine).w
0000934C 6400                       		bhs.s	loc_8B48
0000934E 4A78 FE08                  		tst.w	(v_debuguse).w
00009352 6600                       		bne.s	loc_8B48
00009354 3A00                       		move.w	d0,d5
00009356 B240                       		cmp.w	d0,d1
00009358 6400                       		bhs.s	loc_8B30
0000935A D241                       		add.w	d1,d1
0000935C 9041                       		sub.w	d1,d0
0000935E 3A00                       		move.w	d0,d5
00009360 4445                       		neg.w	d5
00009362                            
00009362                            loc_8B30:
00009362 3203                       		move.w	d3,d1
00009364 B443                       		cmp.w	d3,d2
00009366 6400                       		bhs.s	loc_8B3C
00009368 9644                       		sub.w	d4,d3
0000936A 3203                       		move.w	d3,d1
0000936C 4441                       		neg.w	d1
0000936E                            
0000936E                            loc_8B3C:
0000936E BA41                       		cmp.w	d1,d5
00009370 6200                       		bhi.s	loc_8B44
00009372 7801                       		moveq	#1,d4
00009374 4E75                       		rts	
00009376                            ; ===========================================================================
00009376                            
00009376                            loc_8B44:
00009376 78FF                       		moveq	#-1,d4
00009378 4E75                       		rts	
0000937A                            ; ===========================================================================
0000937A                            
0000937A                            loc_8B48:
0000937A 7800                       		moveq	#0,d4
0000937C 4E75                       		rts	
0000937E                            ; End of function Obj44_SolidWall2
0000937E                            
0000937E                            ; ===========================================================================
0000937E                            
0000937E                            		include	"_incObj\1E Ball Hog.asm"
0000937E                            ; ---------------------------------------------------------------------------
0000937E                            ; Object 1E - Ball Hog enemy (SBZ)
0000937E                            ; ---------------------------------------------------------------------------
0000937E                            
0000937E                            Ballhog:
0000937E 7000                                       moveq   #0,d0
00009380 1028 0024                                  move.b  $24(a0),d0
00009384 323B 0000                                  move.w  Ballhog_Index(pc,d0.w),d1
00009388 4EFB 1000                                  jmp     Ballhog_Index(pc,d1.w)
0000938C                            ; ---------------------------------------------------------------------------
0000938C 0000                       Ballhog_Index:dc.w Ballhog_Init-*
0000938E 0000                                       dc.w Ballhog_Action-Ballhog_Index
00009390 0000                                       dc.w Ballhog_Display-Ballhog_Index
00009392 0000                                       dc.w Ballhog_Delete-Ballhog_Index
00009394                            ; ---------------------------------------------------------------------------
00009394                            
00009394                            Ballhog_Init:
00009394 117C 0013 0016                             move.b  #$13,$16(a0)
0000939A 117C 0008 0017                             move.b  #8,$17(a0)
000093A0 217C 0000 0000 0004                        move.l  #Map_Hog,4(a0)
000093A8 317C 2400 0002                             move.w  #$2400,2(a0)
000093AE 117C 0004 0001                             move.b  #4,1(a0)
000093B4 117C 0004 0019                             move.b  #4,$19(a0)
000093BA 117C 0005 0020                             move.b  #5,$20(a0)
000093C0 117C 000C 0018                             move.b  #$C,$18(a0)
000093C6 6100 0000                                  bsr.w   ObjectFall
000093CA 4EB9 0000 0000                             jsr     (ObjFloorDist).l
000093D0 4A41                                       tst.w   d1
000093D2 6A00                                       bpl.s   Ballhog_Return
000093D4 D368 000C                                  add.w   d1,$C(a0)
000093D8 317C 0000 0012                             move.w  #0,$12(a0)
000093DE 5428 0024                                  addq.b  #2,$24(a0)
000093E2                            
000093E2                            Ballhog_Return:
000093E2 4E75                                       rts
000093E4                            ; ---------------------------------------------------------------------------
000093E4                            
000093E4                            Ballhog_Action:
000093E4 7000                                       moveq   #0,d0
000093E6 1028 0025                                  move.b  $25(a0),d0
000093EA 323B 0000                                  move.w  Ballhog_Index2(pc,d0.w),d1
000093EE 4EBB 1000                                  jsr     Ballhog_Index2(pc,d1.w)
000093F2 43F9 0000 0000                             lea     (unk_7244).l,a1
000093F8 6100 0000                                  bsr.w   AnimateSprite
000093FC 6000 0000                                  bra.w   RememberState
00009400                            ; ---------------------------------------------------------------------------
00009400 0000                       Ballhog_Index2:dc.w loc_6FB6-*
00009402 0000                                       dc.w loc_701C-Ballhog_Index2
00009404                            ; ---------------------------------------------------------------------------
00009404                            
00009404                            loc_6FB6:
00009404 5368 0030                                  subq.w  #1,$30(a0)
00009408 6A00                                       bpl.s   loc_6FE6
0000940A 5428 0025                                  addq.b  #2,$25(a0)
0000940E 317C 00FF 0030                             move.w  #$FF,$30(a0)
00009414 317C 0040 0010                             move.w  #$40,$10(a0) ; '@'
0000941A 117C 0001 001C                             move.b  #1,$1C(a0)
00009420 0868 0000 0022                             bchg    #0,$22(a0)
00009426 6600                                       bne.s   loc_6FDE
00009428 4468 0010                                  neg.w   $10(a0)
0000942C                            
0000942C                            loc_6FDE:
0000942C 117C 0000 0032                             move.b  #0,$32(a0)
00009432 4E75                                       rts
00009434                            ; ---------------------------------------------------------------------------
00009434                            
00009434                            loc_6FE6:
00009434 4A28 0032                                  tst.b   $32(a0)
00009438 6600                                       bne.s   locret_6FF4
0000943A 0C28 0002 001A                             cmpi.b  #2,$1A(a0)
00009440 6700                                       beq.s   Ballhog_MakeBall
00009442                            
00009442                            locret_6FF4:
00009442 4E75                                       rts
00009444                            ; ---------------------------------------------------------------------------
00009444                            
00009444                            Ballhog_MakeBall:
00009444 117C 0001 0032                             move.b  #1,$32(a0)
0000944A 6100 0000                                  bsr.w   FindFreeObj
0000944E 6600                                       bne.s   Ballhog_MakeFail
00009450 137C 0020 0000                             move.b  #$20,0(a1) ; ' '
00009456 3368 0008 0008                             move.w  8(a0),8(a1)
0000945C 3368 000C 000C                             move.w  $C(a0),$C(a1)
00009462 0669 0010 000C                             addi.w  #$10,$C(a1)
00009468                            
00009468                            Ballhog_MakeFail:
00009468 4E75                                       rts
0000946A                            ; ---------------------------------------------------------------------------
0000946A                            
0000946A                            loc_701C:
0000946A 5368 0030                                  subq.w  #1,$30(a0)
0000946E 6B00                                       bmi.s   loc_7032
00009470 6100 0000                                  bsr.w   SpeedToPos
00009474 4EB9 0000 0000                             jsr     (ObjFloorDist).l
0000947A D368 000C                                  add.w   d1,$C(a0)
0000947E 4E75                                       rts
00009480                            ; ---------------------------------------------------------------------------
00009480                            
00009480                            loc_7032:
00009480 5528 0025                                  subq.b  #2,$25(a0)
00009484 317C 003B 0030                             move.w  #$3B,$30(a0) ; ';'
0000948A 317C 0000 0010                             move.w  #0,$10(a0)
00009490 117C 0000 001C                             move.b  #0,$1C(a0)
00009496 4A28 0001                                  tst.b   1(a0)
0000949A 6A00                                       bpl.s   locret_7054
0000949C 117C 0002 001C                             move.b  #2,$1C(a0)
000094A2                            
000094A2                            locret_7054:
000094A2 4E75                                       rts
000094A4                            ; ---------------------------------------------------------------------------
000094A4                            
000094A4                            Ballhog_Display:
000094A4 6100 0000                                  bsr.w   DisplaySprite
000094A8 4E75                                       rts
000094AA                            ; ---------------------------------------------------------------------------
000094AA                            
000094AA                            Ballhog_Delete:
000094AA 6100 0000                                  bsr.w   DeleteObject
000094AE 4E75                                       rts
000094B0 00                         unk_7244:       dc.b   0
000094B1 06                                         dc.b   6
000094B2 00                                         dc.b   0
000094B3 0A                                         dc.b  $A
000094B4 00                                         dc.b   0
000094B5 10                                         dc.b $10
000094B6 0F                                         dc.b  $F
000094B7 00                                         dc.b   0
000094B8 FF                                         dc.b $FF
000094B9 00                                         dc.b   0
000094BA 0B                                         dc.b  $B
000094BB 01                                         dc.b   1
000094BC 00                                         dc.b   0
000094BD 21                                         dc.b $21 ; !
000094BE 00                                         dc.b   0
000094BF FF                                         dc.b $FF
000094C0 14                                         dc.b $14
000094C1 00                                         dc.b   0
000094C2 02                                         dc.b   2
000094C3 00                                         dc.b   0
000094C4 FE                                         dc.b $FE
000094C5 01                                         dc.b   1
000094C5 01                                         dc.b   1
000094C6                            		include	"_incObj\20 Cannonball.asm"
000094C6                            ; ---------------------------------------------------------------------------
000094C6                            ; Object 20 - cannonball that Ball Hog throws (SBZ)
000094C6                            ; ---------------------------------------------------------------------------
000094C6                            
000094C6                            Cannonball:
000094C6 7000                                       moveq   #0,d0
000094C8 1028 0024                                  move.b  $24(a0),d0
000094CC 323B 0000                                  move.w  Cannonball_Index(pc,d0.w),d1
000094D0 4EFB 1000                                  jmp     Cannonball_Index(pc,d1.w)
000094D4                            ; End of function Cannonball
000094D4                            
000094D4                            ; ---------------------------------------------------------------------------
000094D4 0000                       Cannonball_Index:dc.w Cannonball_Init-*
000094D6 0000                                       dc.w Cannonball_ChkFloor-Cannonball_Index
000094D8 0000                                       dc.w Cannonball_Delete-Cannonball_Index
000094DA                            ; ---------------------------------------------------------------------------
000094DA                            
000094DA                            Cannonball_Init:
000094DA 5428 0024                                  addq.b  #2,$24(a0)
000094DE 217C 0000 0000 0004                        move.l  #unk_729A,4(a0)
000094E6 317C 2418 0002                             move.w  #$2418,2(a0)
000094EC 117C 0004 0001                             move.b  #4,1(a0)
000094F2 117C 0003 0019                             move.b  #3,$19(a0)
000094F8 117C 0087 0020                             move.b  #$87,$20(a0)
000094FE 117C 0008 0018                             move.b  #8,$18(a0)
00009504 317C 0018 0030                             move.w  #$18,$30(a0)
0000950A                            
0000950A                            Cannonball_ChkFloor:
0000950A 0828 0007 0022                             btst    #7,$22(a0)
00009510 6600                                       bne.s   Cannonball_Explode
00009512 4A68 0030                                  tst.w   $30(a0)
00009516 6600                                       bne.s   loc_70D2
00009518 4EB9 0000 0000                             jsr     (ObjFloorDist).l
0000951E 4A41                                       tst.w   d1
00009520 6A00                                       bpl.s   loc_70D6
00009522 D368 000C                                  add.w   d1,$C(a0)
00009526                            
00009526                            Cannonball_Explode:
00009526 117C 0024 0000                             move.b  #$24,0(a0) ; '$'
0000952C 117C 0000 0024                             move.b  #0,$24(a0)
00009532 6000 0000                                  bra.w   MissileDissolve
00009536                            ; ---------------------------------------------------------------------------
00009536                            
00009536                            loc_70D2:
00009536 5368 0030                                  subq.w  #1,$30(a0)
0000953A                            
0000953A                            loc_70D6:
0000953A 6100 0000                                  bsr.w   ObjectFall
0000953E 6100 0000                                  bsr.w   DisplaySprite
00009542 3038 F72E                                  move.w  ($FFFFF72E).w,d0
00009546 0640 00E0                                  addi.w  #$E0,d0
0000954A B068 000C                                  cmp.w   $C(a0),d0
0000954E 6500                                       bcs.s   Cannonball_Delete
00009550 4E75                                       rts
00009552                            ; ---------------------------------------------------------------------------
00009552                            
00009552                            Cannonball_Delete:
00009552 6100 0000                                  bsr.w   DeleteObject
00009556 4E75                                       rts
00009558                            ; ---------------------------------------------------------------------------
00009558                            
00009558                            
00009558                            		include	"_incObj\24, 27 & 3F Explosions.asm"
00009558                            ; ---------------------------------------------------------------------------
00009558                            ; Object 24 - buzz bomber missile vanishing (unused?)
00009558                            ; ---------------------------------------------------------------------------
00009558                            
00009558                            MissileDissolve:
00009558 7000                       		moveq	#0,d0
0000955A 1028 0024                  		move.b	obRoutine(a0),d0
0000955E 323B 0000                  		move.w	MDis_Index(pc,d0.w),d1
00009562 4EFB 1000                  		jmp	MDis_Index(pc,d1.w)
00009566                            ; ===========================================================================
00009566 0000                       MDis_Index:	dc.w MDis_Main-MDis_Index
00009568 0000                       		dc.w MDis_Animate-MDis_Index
0000956A                            ; ===========================================================================
0000956A                            
0000956A                            MDis_Main:	; Routine 0
0000956A 5428 0024                  		addq.b	#2,obRoutine(a0)
0000956E 217C 0000 0000 0004        		move.l	#Map_MisDissolve,obMap(a0)
00009576 317C 041C 0002             		move.w	#$41C,obGfx(a0)
0000957C 117C 0004 0001             		move.b	#4,obRender(a0)
00009582 117C 0001 0018             		move.b	#1,obPriority(a0)
00009588 117C 0000 0020             		move.b	#0,obColType(a0)
0000958E 117C 000C 0019             		move.b	#$C,obActWid(a0)
00009594 117C 0009 001E             		move.b	#9,obTimeFrame(a0)
0000959A 117C 0000 001A             		move.b	#0,obFrame(a0)
000095AA                            
000095AA                            MDis_Animate:	; Routine 2
000095AA 5328 001E                  		subq.b	#1,obTimeFrame(a0) ; subtract 1 from frame duration
000095AE 6A00                       		bpl.s	@display
000095B0 117C 0009 001E             		move.b	#9,obTimeFrame(a0) ; set frame duration to 9 frames
000095B6 5228 001A                  		addq.b	#1,obFrame(a0)	; next frame
000095BA 0C28 0004 001A             		cmpi.b	#4,obFrame(a0)	; has animation completed?
000095C0 6700 0000                  		beq.w	DeleteObject	; if yes, branch
000095C4                            
000095C4                            	@display:
000095C4 6000 0000                  		bra.w	DisplaySprite
000095C8                            ; ===========================================================================
000095C8                            
000095C8                            ; ---------------------------------------------------------------------------
000095C8                            ; Object 27 - explosion	from a destroyed enemy or monitor
000095C8                            ; ---------------------------------------------------------------------------
000095C8                            
000095C8                            ExplosionItem:
000095C8 7000                       		moveq	#0,d0
000095CA 1028 0024                  		move.b	obRoutine(a0),d0
000095CE 323B 0000                  		move.w	ExItem_Index(pc,d0.w),d1
000095D2 4EFB 1000                  		jmp	ExItem_Index(pc,d1.w)
000095D6                            ; ===========================================================================
000095D6 0000                       ExItem_Index:	dc.w ExItem_Animal-ExItem_Index
000095D8 0000                       		dc.w ExItem_Main-ExItem_Index
000095DA 0000                       		dc.w ExItem_Animate-ExItem_Index
000095DC                            ; ===========================================================================
000095DC                            
000095DC                            ExItem_Animal:	; Routine 0
000095DC 5428 0024                  		addq.b	#2,obRoutine(a0)
000095E0 6100 0000                  		bsr.w	FindFreeObj
000095E4 6600                       		bne.s	ExItem_Main
000095E6 137C 0000 0000             		move.b	#id_Animals,0(a1) ; load animal object
000095EC 3368 0008 0008             		move.w	obX(a0),obX(a1)
000095F2 3368 000C 000C             		move.w	obY(a0),obY(a1)
000095F8 3368 003E 003E             		move.w	$3E(a0),$3E(a1)
000095FE                            
000095FE                            ExItem_Main:	; Routine 2
000095FE 5428 0024                  		addq.b	#2,obRoutine(a0)
00009602 217C 0000 0000 0004        		move.l	#Map_ExplodeItem,obMap(a0)
0000960A 317C 05A0 0002             		move.w	#$5A0,obGfx(a0)
00009610 117C 0004 0001             		move.b	#4,obRender(a0)
00009616 117C 0001 0018             		move.b	#1,obPriority(a0)
0000961C 117C 0000 0020             		move.b	#0,obColType(a0)
00009622 117C 000C 0019             		move.b	#$C,obActWid(a0)
00009628 117C 0007 001E             		move.b	#7,obTimeFrame(a0) ; set frame duration to 7 frames
0000962E 117C 0000 001A             		move.b	#0,obFrame(a0)
0000963E                            
0000963E                            ExItem_Animate:	; Routine 4 (2 for ExplosionBomb)
0000963E 5328 001E                  		subq.b	#1,obTimeFrame(a0) ; subtract 1 from frame duration
00009642 6A00                       		bpl.s	@display
00009644 117C 0007 001E             		move.b	#7,obTimeFrame(a0) ; set frame duration to 7 frames
0000964A 5228 001A                  		addq.b	#1,obFrame(a0)	; next frame
0000964E 0C28 0005 001A             		cmpi.b	#5,obFrame(a0)	; is the final frame (05) displayed?
00009654 6700 0000                  		beq.w	DeleteObject	; if yes, branch
00009658                            
00009658                            	@display:
00009658 6000 0000                  		bra.w	DisplaySprite
0000965C                            ; ===========================================================================
0000965C                            ; ---------------------------------------------------------------------------
0000965C                            ; Object 3F - explosion	from a destroyed boss, bomb or cannonball
0000965C                            ; ---------------------------------------------------------------------------
0000965C                            
0000965C                            ExplosionBomb:
0000965C 7000                       		moveq	#0,d0
0000965E 1028 0024                  		move.b	obRoutine(a0),d0
00009662 323B 0000                  		move.w	ExBom_Index(pc,d0.w),d1
00009666 4EFB 1000                  		jmp	ExBom_Index(pc,d1.w)
0000966A                            ; ===========================================================================
0000966A 0000                       ExBom_Index:	dc.w ExBom_Main-ExBom_Index
0000966C FFD4                       		dc.w ExItem_Animate-ExBom_Index
0000966E                            ; ===========================================================================
0000966E                            
0000966E                            ExBom_Main:	; Routine 0
0000966E 5428 0024                  		addq.b	#2,obRoutine(a0)
00009672 217C 0000 0000 0004        		move.l	#Map_ExplodeBomb,obMap(a0)
0000967A 317C 05A0 0002             		move.w	#$5A0,obGfx(a0)
00009680 117C 0004 0001             		move.b	#4,obRender(a0)
00009686 117C 0001 0018             		move.b	#1,obPriority(a0)
0000968C 117C 0000 0020             		move.b	#0,obColType(a0)
00009692 117C 000C 0019             		move.b	#$C,obActWid(a0)
00009698 117C 0007 001E             		move.b	#7,obTimeFrame(a0)
0000969E 117C 0000 001A             		move.b	#0,obFrame(a0)
000096AE                            		include	"_anim\Ball Hog.asm"
000096AE                            ; ---------------------------------------------------------------------------
000096AE                            ; Animation script - doors (SBZ)
000096AE                            ; ---------------------------------------------------------------------------
000096AE 0000                       Ani_Hog:	dc.w @hog-Ani_Hog
000096B0 0900 0002 0203 0200 0002+  @hog:		dc.b 9,	0, 0, 2, 2, 3, 2, 0, 0,	2, 2, 3, 2, 0, 0, 2, 2, 3, 2, 0, 0, 1, afEnd
000096C8 00                         		even
000096C8 00                         		even
000096C8                            Map_Hog:	include	"_maps\Ball Hog.asm"
000096C8                            ; ---------------------------------------------------------------------------
000096C8                            ; Sprite mappings - Ball Hog enemy (SBZ)
000096C8                            ; ---------------------------------------------------------------------------
000096C8 0000                       Map_BallHog:    dc.w unk_7260-*
000096CA 0000                                       dc.w unk_7275-Map_BallHog
000096CC 0000                                       dc.w unk_7285-Map_BallHog
000096CE 04                         unk_7260:       dc.b   4
000096CF ED07 0000 F0ED 0708 0000+                  dc.b $ED, 7, 0, 0, $F0, $ED, 7, 8, 0, 0, $D, 4, 0
000096DC 08F0 0D04 0808 00                          dc.b 8, $F0, $D, 4, 8, 8, 0
000096E3 03                         unk_7275:       dc.b   3
000096E4 EC07 0000 EEEC 0708 00FE+                  dc.b $EC, 7, 0, 0, $EE, $EC, 7, 8, 0, $FE, $C, $C
000096F0 000A EE                                    dc.b 0, $A, $EE
000096F3 04                         unk_7285:       dc.b   4
000096F4 ED                                         dc.b $ED
000096F5 07                                         dc.b   7
000096F6 00                                         dc.b   0
000096F7 0E                                         dc.b  $E
000096F8 F0                                         dc.b $F0
000096F9 ED                                         dc.b $ED
000096FA 07                                         dc.b   7
000096FB 08                                         dc.b   8
000096FC 0E                                         dc.b  $E
000096FD 00                                         dc.b   0
000096FE 0D                                         dc.b  $D
000096FF 04                                         dc.b   4
00009700 00                                         dc.b   0
00009701 16                                         dc.b $16
00009702 F0                                         dc.b $F0
00009703 0D                                         dc.b  $D
00009704 04                                         dc.b   4
00009705 08                                         dc.b   8
00009706 16                                         dc.b $16
00009707 00                                         dc.b   0
00009708 00                         unk_729A:       dc.b   0
00009709 02                                         dc.b   2
0000970A 01                                         dc.b   1
0000970B F8                                         dc.b $F8
0000970C 05                                         dc.b   5
0000970D 00                                         dc.b   0
0000970E 00                                         dc.b   0
0000970F F8                                         dc.b $F8
00009710 00                         unk_72A2:       dc.b   0
00009711 08                                         dc.b   8
00009712 00                                         dc.b   0
00009713 0E                                         dc.b  $E
00009714 00                                         dc.b   0
00009715 14                                         dc.b $14
00009716 00                                         dc.b   0
00009717 1A                                         dc.b $1A
00009718 01                                         dc.b   1
00009719 F4                                         dc.b $F4
0000971A 0A                                         dc.b  $A
0000971B 00                                         dc.b   0
0000971C 00                                         dc.b   0
0000971D F4                                         dc.b $F4
0000971E 01                                         dc.b   1
0000971F F4                                         dc.b $F4
00009720 0A                                         dc.b  $A
00009721 00                                         dc.b   0
00009722 09                                         dc.b   9
00009723 F4                                         dc.b $F4
00009724 01                                         dc.b   1
00009725 F4                                         dc.b $F4
00009726 0A                                         dc.b  $A
00009727 00                                         dc.b   0
00009728 12                                         dc.b $12
00009729 F4                                         dc.b $F4
0000972A 01                                         dc.b   1
0000972B F4                                         dc.b $F4
0000972C 0A                                         dc.b  $A
0000972D 00                                         dc.b   0
0000972E 1B                                         dc.b $1B
0000972F F4                                         dc.b $F4
00009730 00                         unk_72C2:       dc.b   0
00009731 0A                                         dc.b  $A
00009732 00                                         dc.b   0
00009733 10                                         dc.b $10
00009734 00                                         dc.b   0
00009735 16                                         dc.b $16
00009736 00                                         dc.b   0
00009737 1C                                         dc.b $1C
00009738 00                                         dc.b   0
00009739 31                                         dc.b $31 ; 1
0000973A 01                                         dc.b   1
0000973B F8                                         dc.b $F8
0000973C 09                                         dc.b   9
0000973D 00                                         dc.b   0
0000973E 00                                         dc.b   0
0000973F F4                                         dc.b $F4
00009740 01                                         dc.b   1
00009741 F0                                         dc.b $F0
00009742 0F                                         dc.b  $F
00009743 00                                         dc.b   0
00009744 06                                         dc.b   6
00009745 F0                                         dc.b $F0
00009746 01                                         dc.b   1
00009747 F0                                         dc.b $F0
00009748 0F                                         dc.b  $F
00009749 00                                         dc.b   0
0000974A 16                                         dc.b $16
0000974B F0                                         dc.b $F0
0000974C 04                                         dc.b   4
0000974D EC                                         dc.b $EC
0000974E 0A                                         dc.b  $A
0000974F 00                                         dc.b   0
00009750 26                                         dc.b $26 ; &
00009751 EC                                         dc.b $EC
00009752 EC                                         dc.b $EC
00009753 05                                         dc.b   5
00009754 00                                         dc.b   0
00009755 2F                                         dc.b $2F ; /
00009756 04                                         dc.b   4
00009757 04                                         dc.b   4
00009758 05                                         dc.b   5
00009759 18                                         dc.b $18
0000975A 2F                                         dc.b $2F ; /
0000975B EC                                         dc.b $EC
0000975C FC                                         dc.b $FC
0000975D 0A                                         dc.b  $A
0000975E 18                                         dc.b $18
0000975F 26                                         dc.b $26 ; &
00009760 FC                                         dc.b $FC
00009761 04                                         dc.b   4
00009762 EC                                         dc.b $EC
00009763 0A                                         dc.b  $A
00009764 00                                         dc.b   0
00009765 33                                         dc.b $33 ; 3
00009766 EC                                         dc.b $EC
00009767 EC                                         dc.b $EC
00009768 05                                         dc.b   5
00009769 00                                         dc.b   0
0000976A 3C                                         dc.b $3C ; <
0000976B 04                                         dc.b   4
0000976C 04                                         dc.b   4
0000976D 05                                         dc.b   5
0000976E 18                                         dc.b $18
0000976F 3C                                         dc.b $3C ; <
00009770 EC                                         dc.b $EC
00009771 FC                                         dc.b $FC
00009772 0A                                         dc.b  $A
00009773 18                                         dc.b $18
00009774 33                                         dc.b $33 ; 3
00009775 FC                                         dc.b $FC
00009776 FF                         unk_7308:       dc.b $FF
00009777 C4                                         dc.b $C4
00009778 00                                         dc.b   0
00009779 0A                                         dc.b  $A
0000977A 00                                         dc.b   0
0000977B 10                                         dc.b $10
0000977C FF                                         dc.b $FF
0000977D D6                                         dc.b $D6
0000977E FF                                         dc.b $FF
0000977F EB                                         dc.b $EB
00009780 01                                         dc.b   1
00009781 F0                                         dc.b $F0
00009782 0F                                         dc.b  $F
00009783 00                                         dc.b   0
00009784 40                                         dc.b $40 ; @
00009785 F0                                         dc.b $F0
00009786 01                                         dc.b   1
00009787 F0                                         dc.b $F0
00009788 0F                                         dc.b  $F
00009789 00                                         dc.b   0
0000978A 50                                         dc.b $50 ; P
0000978B F0                                         dc.b $F0
0000978C                            		even
0000978C                            		even
0000978C                            Map_MisDissolve:include	"_maps\Buzz Bomber Missile Dissolve.asm"
0000978C                            ; ---------------------------------------------------------------------------
0000978C                            ; Sprite mappings - buzz bomber missile vanishing
0000978C                            ; ---------------------------------------------------------------------------
0000978C                            Map_MisDissolve_internal:
0000978C 0000                       		dc.w byte_8EAE-Map_MisDissolve_internal
0000978E 0000                       		dc.w byte_8EB4-Map_MisDissolve_internal
00009790 0000                       		dc.w byte_8EBA-Map_MisDissolve_internal
00009792 0000                       		dc.w byte_8EC0-Map_MisDissolve_internal
00009794 01                         byte_8EAE:	dc.b 1
00009795 F40A 0000 F4               		dc.b $F4, $A, 0, 0, $F4
0000979A 01                         byte_8EB4:	dc.b 1
0000979B F40A 0009 F4               		dc.b $F4, $A, 0, 9, $F4
000097A0 01                         byte_8EBA:	dc.b 1
000097A1 F40A 0012 F4               		dc.b $F4, $A, 0, $12, $F4
000097A6 01                         byte_8EC0:	dc.b 1
000097A7 F40A 001B F4               		dc.b $F4, $A, 0, $1B, $F4
000097AC                            		even
000097AC                            		even
000097AC                            		include	"_maps\Explosions.asm"
000097AC                            ; ---------------------------------------------------------------------------
000097AC                            ; Sprite mappings - explosion from a badnik or monitor
000097AC                            ; ---------------------------------------------------------------------------
000097AC 0000 0000                  Map_ExplodeItem:dc.w byte_8ED0-Map_ExplodeItem, byte_8ED6-Map_ExplodeItem
000097B0 0000 0000                  		dc.w byte_8EDC-Map_ExplodeItem, byte_8EE2-Map_ExplodeItem
000097B4 0000                       		dc.w byte_8EF7-Map_ExplodeItem
000097B6 01                         byte_8ED0:	dc.b 1
000097B7 F809 0000 F4               		dc.b $F8, 9, 0,	0, $F4
000097BC 01                         byte_8ED6:	dc.b 1
000097BD F00F 0006 F0               		dc.b $F0, $F, 0, 6, $F0
000097C2 01                         byte_8EDC:	dc.b 1
000097C3 F00F 0016 F0               		dc.b $F0, $F, 0, $16, $F0
000097C8 04                         byte_8EE2:	dc.b 4
000097C9 EC0A 0026 EC               		dc.b $EC, $A, 0, $26, $EC
000097CE EC05 002F 04               		dc.b $EC, 5, 0,	$2F, 4
000097D3 0405 182F EC               		dc.b 4,	5, $18,	$2F, $EC
000097D8 FC0A 1826 FC               		dc.b $FC, $A, $18, $26,	$FC
000097DD 04                         byte_8EF7:	dc.b 4
000097DE EC0A 0033 EC               		dc.b $EC, $A, 0, $33, $EC
000097E3 EC05 003C 04               		dc.b $EC, 5, 0,	$3C, 4
000097E8 0405 183C EC               		dc.b 4,	5, $18,	$3C, $EC
000097ED FC0A 1833 FC               		dc.b $FC, $A, $18, $33,	$FC
000097F2                            		even
000097F2                            ; ---------------------------------------------------------------------------
000097F2                            ; Sprite mappings - explosion from when	a boss is destroyed
000097F2                            ; ---------------------------------------------------------------------------
000097F2 FFC4                       Map_ExplodeBomb:dc.w byte_8ED0-Map_ExplodeBomb
000097F4 0000                       		dc.w byte_8F16-Map_ExplodeBomb
000097F6 0000                       		dc.w byte_8F1C-Map_ExplodeBomb
000097F8 FFD6                       		dc.w byte_8EE2-Map_ExplodeBomb
000097FA FFEB                       		dc.w byte_8EF7-Map_ExplodeBomb
000097FC 01                         byte_8F16:	dc.b 1
000097FD F00F 0040 F0               		dc.b $F0, $F, 0, $40, $F0
00009802 01                         byte_8F1C:	dc.b 1
00009803 F00F 0050 F0               		dc.b $F0, $F, 0, $50, $F0
00009808                            		even
00009808                            		even
00009808                            
00009808                            		include	"_incObj\28 Animals.asm"
00009808                            ; ---------------------------------------------------------------------------
00009808                            ; Object 28 - animals
00009808                            ; ---------------------------------------------------------------------------
00009808                            
00009808                            Animals:
00009808 7000                       		moveq	#0,d0
0000980A 1028 0024                  		move.b	obRoutine(a0),d0
0000980E 323B 0000                  		move.w	Anml_Index(pc,d0.w),d1
00009812 4EFB 1000                  		jmp	Anml_Index(pc,d1.w)
00009816                            ; ===========================================================================
00009816 0000 0000                  Anml_Index:	dc.w Anml_Ending-Anml_Index, loc_912A-Anml_Index
0000981A 0000 0000                  		dc.w loc_9184-Anml_Index, loc_91C0-Anml_Index
0000981E 0000 0000                  		dc.w loc_9184-Anml_Index, loc_9184-Anml_Index
00009822 0000 0000                  		dc.w loc_9184-Anml_Index, loc_91C0-Anml_Index
00009826 0000 0000                  		dc.w loc_9184-Anml_Index, loc_9240-Anml_Index
0000982A 0000 0000                  		dc.w loc_9260-Anml_Index, loc_9260-Anml_Index
0000982E 0000 0000                  		dc.w loc_9280-Anml_Index, loc_92BA-Anml_Index
00009832 0000 0000                  		dc.w loc_9314-Anml_Index, loc_9332-Anml_Index
00009836 0000 0000                  		dc.w loc_9314-Anml_Index, loc_9332-Anml_Index
0000983A 0000 0000                  		dc.w loc_9314-Anml_Index, loc_9370-Anml_Index
0000983E 0000                       		dc.w loc_92D6-Anml_Index
00009840                            
00009840 0005 0203 0603 0405 0401+  Anml_VarIndex:	dc.b 0,	5, 2, 3, 6, 3, 4, 5, 4,	1, 0, 1
0000984C                            
0000984C FE00 FC00                  Anml_Variables:	dc.w $FE00, $FC00
00009850 0000 0000                  		dc.l Map_Animal1
00009854 FE00 FD00                  		dc.w $FE00, $FD00	; horizontal speed, vertical speed
00009858 0000 0000                  		dc.l Map_Animal2	; mappings address
0000985C FE80 FD00                  		dc.w $FE80, $FD00
00009860 0000 0000                  		dc.l Map_Animal1
00009864 FEC0 FE80                  		dc.w $FEC0, $FE80
00009868 0000 0000                  		dc.l Map_Animal2
0000986C FE40 FD00                  		dc.w $FE40, $FD00
00009870 0000 0000                  		dc.l Map_Animal3
00009874 FD00 FC00                  		dc.w $FD00, $FC00
00009878 0000 0000                  		dc.l Map_Animal2
0000987C FD80 FC80                  		dc.w $FD80, $FC80
00009880 0000 0000                  		dc.l Map_Animal3
00009884                            
00009884 FBC0 FC00 FBC0 FC00 FBC0+  Anml_EndSpeed:	dc.w $FBC0, $FC00, $FBC0, $FC00, $FBC0,	$FC00, $FD00, $FC00
00009894 FD00 FC00 FE80 FD00 FE80+  		dc.w $FD00, $FC00, $FE80, $FD00, $FE80,	$FD00, $FEC0, $FE80
000098A4 FE40 FD00 FE00 FD00 FD80+  		dc.w $FE40, $FD00, $FE00, $FD00, $FD80,	$FC80
000098B0                            
000098B0 0000 0000 0000 0000 0000+  Anml_EndMap:	dc.l Map_Animal2, Map_Animal2, Map_Animal2, Map_Animal1, Map_Animal1
000098C4 0000 0000 0000 0000 0000+  		dc.l Map_Animal1, Map_Animal1, Map_Animal2, Map_Animal3, Map_Animal2
000098D8 0000 0000                  		dc.l Map_Animal3
000098DC                            
000098DC 05A5 05A5 05A5 0553 0553+  Anml_EndVram:	dc.w $5A5, $5A5, $5A5, $553, $553, $573, $573, $585, $593
000098EE 0565 05B3                  		dc.w $565, $5B3
000098F2                            ; ===========================================================================
000098F2                            
000098F2                            Anml_Ending:	; Routine 0
000098F2 4A28 0028                  		tst.b	obSubtype(a0)	; did animal come from a destroyed enemy?
000098F6 6700 0000                  		beq.w	Anml_FromEnemy	; if yes, branch
000098FA 7000                       		moveq	#0,d0
000098FC 1028 0028                  		move.b	obSubtype(a0),d0 ; move object type to d0
00009900 D040                       		add.w	d0,d0		; multiply d0 by 2
00009902 1140 0024                  		move.b	d0,obRoutine(a0) ; move d0 to routine counter
00009906 0440 0014                  		subi.w	#$14,d0
0000990A 317B 00D0 0002             		move.w	Anml_EndVram(pc,d0.w),obGfx(a0)
00009910 D040                       		add.w	d0,d0
00009912 217B 009C 0004             		move.l	Anml_EndMap(pc,d0.w),obMap(a0)
00009918 43FA FF6A                  		lea	Anml_EndSpeed(pc),a1
0000991C 3171 0000 0032             		move.w	(a1,d0.w),$32(a0) ; load horizontal speed
00009922 3171 0000 0010             		move.w	(a1,d0.w),obVelX(a0)
00009928 3171 0002 0034             		move.w	2(a1,d0.w),$34(a0) ; load vertical speed
0000992E 3171 0002 0012             		move.w	2(a1,d0.w),obVelY(a0)
00009934 117C 000C 0016             		move.b	#$C,obHeight(a0)
0000993A 117C 0004 0001             		move.b	#4,obRender(a0)
00009940 08E8 0000 0001             		bset	#0,obRender(a0)
00009946 117C 0006 0018             		move.b	#6,obPriority(a0)
0000994C 117C 0008 0019             		move.b	#8,obActWid(a0)
00009952 117C 0007 001E             		move.b	#7,obTimeFrame(a0)
00009958 6000 0000                  		bra.w	DisplaySprite
0000995C                            ; ===========================================================================
0000995C                            
0000995C                            Anml_FromEnemy:
0000995C 5428 0024                  		addq.b	#2,obRoutine(a0)
00009960 6100 8E64                  		bsr.w	RandomNumber
00009964 0240 0001                  		andi.w	#1,d0
00009968 7200                       		moveq	#0,d1
0000996A 1238 FE10                  		move.b	(v_zone).w,d1
0000996E D241                       		add.w	d1,d1
00009970 D240                       		add.w	d0,d1
00009972 43FA FECC                  		lea	Anml_VarIndex(pc),a1
00009976 1031 1000                  		move.b	(a1,d1.w),d0
0000997A 1140 0030                  		move.b	d0,$30(a0)
0000997E E748                       		lsl.w	#3,d0
00009980 43FA FECA                  		lea	Anml_Variables(pc),a1
00009984 D2C0                       		adda.w	d0,a1
00009986 3159 0032                  		move.w	(a1)+,$32(a0)	; load horizontal speed
0000998A 3159 0034                  		move.w	(a1)+,$34(a0)	; load vertical	speed
0000998E 2159 0004                  		move.l	(a1)+,obMap(a0)	; load mappings
00009992 317C 0580 0002             		move.w	#$580,obGfx(a0)	; VRAM setting for 1st animal
00009998 0828 0000 0030             		btst	#0,$30(a0)	; is 1st animal	used?
0000999E 6700                       		beq.s	loc_90C0	; if yes, branch
000099A0 317C 0592 0002             		move.w	#$592,obGfx(a0)	; VRAM setting for 2nd animal
000099A6                            
000099A6                            loc_90C0:
000099A6 117C 000C 0016             		move.b	#$C,obHeight(a0)
000099AC 117C 0004 0001             		move.b	#4,obRender(a0)
000099B2 08E8 0000 0001             		bset	#0,obRender(a0)
000099B8 117C 0006 0018             		move.b	#6,obPriority(a0)
000099BE 117C 0008 0019             		move.b	#8,obActWid(a0)
000099C4 117C 0007 001E             		move.b	#7,obTimeFrame(a0)
000099CA 117C 0002 001A             		move.b	#2,obFrame(a0)
000099D0 317C FC00 0012             		move.w	#-$400,obVelY(a0)
000099D6 4A38 F7A7                  		tst.b	(v_bossstatus).w
000099DA 6600                       		bne.s	loc_911C
000099DC 6100 0000                  		bsr.w	FindFreeObj
000099E0 6600                       		bne.s	Anml_Display
000099E2 137C 0000 0000             		move.b	#id_Points,0(a1) ; load points object
000099E8 3368 0008 0008             		move.w	obX(a0),obX(a1)
000099EE 3368 000C 000C             		move.w	obY(a0),obY(a1)
000099F4 3028 003E                  		move.w	$3E(a0),d0
000099F8 E248                       		lsr.w	#1,d0
000099FA 1340 001A                  		move.b	d0,obFrame(a1)
000099FE                            
000099FE                            Anml_Display:
000099FE 6000 0000                  		bra.w	DisplaySprite
00009A02                            ; ===========================================================================
00009A02                            
00009A02                            loc_911C:
00009A02 117C 0012 0024             		move.b	#$12,obRoutine(a0)
00009A08 4268 0010                  		clr.w	obVelX(a0)
00009A0C 6000 0000                  		bra.w	DisplaySprite
00009A10                            ; ===========================================================================
00009A10                            
00009A10                            loc_912A:
00009A10 4A28 0001                  		tst.b	obRender(a0)
00009A14 6A00 0000                  		bpl.w	DeleteObject
00009A18 6100 0000                  		bsr.w	ObjectFall
00009A1C 4A68 0012                  		tst.w	obVelY(a0)
00009A20 6B00                       		bmi.s	loc_9180
00009A22 4EB9 0000 0000             		jsr	(ObjFloorDist).l
00009A28 4A41                       		tst.w	d1
00009A2A 6A00                       		bpl.s	loc_9180
00009A2C D368 000C                  		add.w	d1,obY(a0)
00009A30 3168 0032 0010             		move.w	$32(a0),obVelX(a0)
00009A36 3168 0034 0012             		move.w	$34(a0),obVelY(a0)
00009A3C 117C 0001 001A             		move.b	#1,obFrame(a0)
00009A42 1028 0030                  		move.b	$30(a0),d0
00009A46 D000                       		add.b	d0,d0
00009A48 5800                       		addq.b	#4,d0
00009A4A 1140 0024                  		move.b	d0,obRoutine(a0)
00009A4E 4A38 F7A7                  		tst.b	(v_bossstatus).w
00009A52 6700                       		beq.s	loc_9180
00009A54 0838 0004 FE0F             		btst	#4,(v_vbla_byte).w
00009A5A 6700                       		beq.s	loc_9180
00009A5C 4468 0010                  		neg.w	obVelX(a0)
00009A60 0868 0000 0001             		bchg	#0,obRender(a0)
00009A66                            
00009A66                            loc_9180:
00009A66 6000 0000                  		bra.w	DisplaySprite
00009A6A                            ; ===========================================================================
00009A6A                            
00009A6A                            loc_9184:
00009A6A 6100 0000                  		bsr.w	ObjectFall
00009A6E 117C 0001 001A             		move.b	#1,obFrame(a0)
00009A74 4A68 0012                  		tst.w	obVelY(a0)
00009A78 6B00                       		bmi.s	loc_91AE
00009A7A 117C 0000 001A             		move.b	#0,obFrame(a0)
00009A80 4EB9 0000 0000             		jsr	(ObjFloorDist).l
00009A86 4A41                       		tst.w	d1
00009A88 6A00                       		bpl.s	loc_91AE
00009A8A D368 000C                  		add.w	d1,obY(a0)
00009A8E 3168 0034 0012             		move.w	$34(a0),obVelY(a0)
00009A94                            
00009A94                            loc_91AE:
00009A94 4A28 0028                  		tst.b	obSubtype(a0)
00009A98 6600                       		bne.s	loc_9224
00009A9A 4A28 0001                  		tst.b	obRender(a0)
00009A9E 6A00 0000                  		bpl.w	DeleteObject
00009AA2 6000 0000                  		bra.w	DisplaySprite
00009AA6                            ; ===========================================================================
00009AA6                            
00009AA6                            loc_91C0:
00009AA6 6100 0000                  		bsr.w	SpeedToPos
00009AAA 0668 0018 0012             		addi.w	#$18,obVelY(a0)
00009AB0 4A68 0012                  		tst.w	obVelY(a0)
00009AB4 6B00                       		bmi.s	loc_91FC
00009AB6 4EB9 0000 0000             		jsr	(ObjFloorDist).l
00009ABC 4A41                       		tst.w	d1
00009ABE 6A00                       		bpl.s	loc_91FC
00009AC0 D368 000C                  		add.w	d1,obY(a0)
00009AC4 3168 0034 0012             		move.w	$34(a0),obVelY(a0)
00009ACA 4A28 0028                  		tst.b	obSubtype(a0)
00009ACE 6700                       		beq.s	loc_91FC
00009AD0 0C28 000A 0028             		cmpi.b	#$A,obSubtype(a0)
00009AD6 6700                       		beq.s	loc_91FC
00009AD8 4468 0010                  		neg.w	obVelX(a0)
00009ADC 0868 0000 0001             		bchg	#0,obRender(a0)
00009AE2                            
00009AE2                            loc_91FC:
00009AE2 5328 001E                  		subq.b	#1,obTimeFrame(a0)
00009AE6 6A00                       		bpl.s	loc_9212
00009AE8 117C 0001 001E             		move.b	#1,obTimeFrame(a0)
00009AEE 5228 001A                  		addq.b	#1,obFrame(a0)
00009AF2 0228 0001 001A             		andi.b	#1,obFrame(a0)
00009AF8                            
00009AF8                            loc_9212:
00009AF8 4A28 0028                  		tst.b	obSubtype(a0)
00009AFC 6600                       		bne.s	loc_9224
00009AFE 4A28 0001                  		tst.b	obRender(a0)
00009B02 6A00 0000                  		bpl.w	DeleteObject
00009B06 6000 0000                  		bra.w	DisplaySprite
00009B0A                            ; ===========================================================================
00009B0A                            
00009B0A                            loc_9224:
00009B0A 3028 0008                  		move.w	obX(a0),d0
00009B0E 9078 D008                  		sub.w	(v_player+obX).w,d0
00009B12 6500                       		bcs.s	loc_923C
00009B14 0440 0180                  		subi.w	#$180,d0
00009B18 6A00                       		bpl.s	loc_923C
00009B1A 4A28 0001                  		tst.b	obRender(a0)
00009B1E 6A00 0000                  		bpl.w	DeleteObject
00009B22                            
00009B22                            loc_923C:
00009B22 6000 0000                  		bra.w	DisplaySprite
00009B26                            ; ===========================================================================
00009B26                            
00009B26                            loc_9240:
00009B26 4A28 0001                  		tst.b	obRender(a0)
00009B2A 6A00 0000                  		bpl.w	DeleteObject
00009B2E 5368 0036                  		subq.w	#1,$36(a0)
00009B32 6600 0000                  		bne.w	loc_925C
00009B36 117C 0002 0024             		move.b	#2,obRoutine(a0)
00009B3C 117C 0003 0018             		move.b	#3,obPriority(a0)
00009B42                            
00009B42                            loc_925C:
00009B42 6000 0000                  		bra.w	DisplaySprite
00009B46                            ; ===========================================================================
00009B46                            
00009B46                            loc_9260:
00009B46 6100 0000                  		bsr.w	sub_9404
00009B4A 6400                       		bcc.s	loc_927C
00009B4C 3168 0032 0010             		move.w	$32(a0),obVelX(a0)
00009B52 3168 0034 0012             		move.w	$34(a0),obVelY(a0)
00009B58 117C 000E 0024             		move.b	#$E,obRoutine(a0)
00009B5E 6000 FF46                  		bra.w	loc_91C0
00009B62                            ; ===========================================================================
00009B62                            
00009B62                            loc_927C:
00009B62 6000 FFA6                  		bra.w	loc_9224
00009B66                            ; ===========================================================================
00009B66                            
00009B66                            loc_9280:
00009B66 6100 0000                  		bsr.w	sub_9404
00009B6A 6A00                       		bpl.s	loc_92B6
00009B6C 4268 0010                  		clr.w	obVelX(a0)
00009B70 4268 0032                  		clr.w	$32(a0)
00009B74 6100 0000                  		bsr.w	SpeedToPos
00009B78 0668 0018 0012             		addi.w	#$18,obVelY(a0)
00009B7E 6100 0000                  		bsr.w	loc_93C4
00009B82 6100 0000                  		bsr.w	loc_93EC
00009B86 5328 001E                  		subq.b	#1,obTimeFrame(a0)
00009B8A 6A00                       		bpl.s	loc_92B6
00009B8C 117C 0001 001E             		move.b	#1,obTimeFrame(a0)
00009B92 5228 001A                  		addq.b	#1,obFrame(a0)
00009B96 0228 0001 001A             		andi.b	#1,obFrame(a0)
00009B9C                            
00009B9C                            loc_92B6:
00009B9C 6000 FF6C                  		bra.w	loc_9224
00009BA0                            ; ===========================================================================
00009BA0                            
00009BA0                            loc_92BA:
00009BA0 6100 0000                  		bsr.w	sub_9404
00009BA4 6A00                       		bpl.s	loc_9310
00009BA6 3168 0032 0010             		move.w	$32(a0),obVelX(a0)
00009BAC 3168 0034 0012             		move.w	$34(a0),obVelY(a0)
00009BB2 117C 0004 0024             		move.b	#4,obRoutine(a0)
00009BB8 6000 FEB0                  		bra.w	loc_9184
00009BBC                            ; ===========================================================================
00009BBC                            
00009BBC                            loc_92D6:
00009BBC 6100 0000                  		bsr.w	ObjectFall
00009BC0 117C 0001 001A             		move.b	#1,obFrame(a0)
00009BC6 4A68 0012                  		tst.w	obVelY(a0)
00009BCA 6B00                       		bmi.s	loc_9310
00009BCC 117C 0000 001A             		move.b	#0,obFrame(a0)
00009BD2 4EB9 0000 0000             		jsr	(ObjFloorDist).l
00009BD8 4A41                       		tst.w	d1
00009BDA 6A00                       		bpl.s	loc_9310
00009BDC 4628 0029                  		not.b	$29(a0)
00009BE0 6600                       		bne.s	loc_9306
00009BE2 4468 0010                  		neg.w	obVelX(a0)
00009BE6 0868 0000 0001             		bchg	#0,obRender(a0)
00009BEC                            
00009BEC                            loc_9306:
00009BEC D368 000C                  		add.w	d1,obY(a0)
00009BF0 3168 0034 0012             		move.w	$34(a0),obVelY(a0)
00009BF6                            
00009BF6                            loc_9310:
00009BF6 6000 FF12                  		bra.w	loc_9224
00009BFA                            ; ===========================================================================
00009BFA                            
00009BFA                            loc_9314:
00009BFA 6100 0000                  		bsr.w	sub_9404
00009BFE 6A00                       		bpl.s	loc_932E
00009C00 4268 0010                  		clr.w	obVelX(a0)
00009C04 4268 0032                  		clr.w	$32(a0)
00009C08 6100 0000                  		bsr.w	ObjectFall
00009C0C 6100 0000                  		bsr.w	loc_93C4
00009C10 6100 0000                  		bsr.w	loc_93EC
00009C14                            
00009C14                            loc_932E:
00009C14 6000 FEF4                  		bra.w	loc_9224
00009C18                            ; ===========================================================================
00009C18                            
00009C18                            loc_9332:
00009C18 6100 0000                  		bsr.w	sub_9404
00009C1C 6A00                       		bpl.s	loc_936C
00009C1E 6100 0000                  		bsr.w	ObjectFall
00009C22 117C 0001 001A             		move.b	#1,obFrame(a0)
00009C28 4A68 0012                  		tst.w	obVelY(a0)
00009C2C 6B00                       		bmi.s	loc_936C
00009C2E 117C 0000 001A             		move.b	#0,obFrame(a0)
00009C34 4EB9 0000 0000             		jsr	(ObjFloorDist).l
00009C3A 4A41                       		tst.w	d1
00009C3C 6A00                       		bpl.s	loc_936C
00009C3E 4468 0010                  		neg.w	obVelX(a0)
00009C42 0868 0000 0001             		bchg	#0,obRender(a0)
00009C48 D368 000C                  		add.w	d1,obY(a0)
00009C4C 3168 0034 0012             		move.w	$34(a0),obVelY(a0)
00009C52                            
00009C52                            loc_936C:
00009C52 6000 FEB6                  		bra.w	loc_9224
00009C56                            ; ===========================================================================
00009C56                            
00009C56                            loc_9370:
00009C56 6100 0000                  		bsr.w	sub_9404
00009C5A 6A00                       		bpl.s	loc_93C0
00009C5C 6100 0000                  		bsr.w	SpeedToPos
00009C60 0668 0018 0012             		addi.w	#$18,obVelY(a0)
00009C66 4A68 0012                  		tst.w	obVelY(a0)
00009C6A 6B00                       		bmi.s	loc_93AA
00009C6C 4EB9 0000 0000             		jsr	(ObjFloorDist).l
00009C72 4A41                       		tst.w	d1
00009C74 6A00                       		bpl.s	loc_93AA
00009C76 4628 0029                  		not.b	$29(a0)
00009C7A 6600                       		bne.s	loc_93A0
00009C7C 4468 0010                  		neg.w	obVelX(a0)
00009C80 0868 0000 0001             		bchg	#0,obRender(a0)
00009C86                            
00009C86                            loc_93A0:
00009C86 D368 000C                  		add.w	d1,obY(a0)
00009C8A 3168 0034 0012             		move.w	$34(a0),obVelY(a0)
00009C90                            
00009C90                            loc_93AA:
00009C90 5328 001E                  		subq.b	#1,obTimeFrame(a0)
00009C94 6A00                       		bpl.s	loc_93C0
00009C96 117C 0001 001E             		move.b	#1,obTimeFrame(a0)
00009C9C 5228 001A                  		addq.b	#1,obFrame(a0)
00009CA0 0228 0001 001A             		andi.b	#1,obFrame(a0)
00009CA6                            
00009CA6                            loc_93C0:
00009CA6 6000 FE62                  		bra.w	loc_9224
00009CAA                            ; ===========================================================================
00009CAA                            
00009CAA                            loc_93C4:
00009CAA 117C 0001 001A             		move.b	#1,obFrame(a0)
00009CB0 4A68 0012                  		tst.w	obVelY(a0)
00009CB4 6B00                       		bmi.s	locret_93EA
00009CB6 117C 0000 001A             		move.b	#0,obFrame(a0)
00009CBC 4EB9 0000 0000             		jsr	(ObjFloorDist).l
00009CC2 4A41                       		tst.w	d1
00009CC4 6A00                       		bpl.s	locret_93EA
00009CC6 D368 000C                  		add.w	d1,obY(a0)
00009CCA 3168 0034 0012             		move.w	$34(a0),obVelY(a0)
00009CD0                            
00009CD0                            locret_93EA:
00009CD0 4E75                       		rts	
00009CD2                            ; ===========================================================================
00009CD2                            
00009CD2                            loc_93EC:
00009CD2 08E8 0000 0001             		bset	#0,obRender(a0)
00009CD8 3028 0008                  		move.w	obX(a0),d0
00009CDC 9078 D008                  		sub.w	(v_player+obX).w,d0
00009CE0 6400                       		bcc.s	locret_9402
00009CE2 08A8 0000 0001             		bclr	#0,obRender(a0)
00009CE8                            
00009CE8                            locret_9402:
00009CE8 4E75                       		rts	
00009CEA                            
00009CEA                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00009CEA                            
00009CEA                            
00009CEA                            sub_9404:
00009CEA 3038 D008                  		move.w	(v_player+obX).w,d0
00009CEE 9068 0008                  		sub.w	obX(a0),d0
00009CF2 0440 00B8                  		subi.w	#$B8,d0
00009CF6 4E75                       		rts	
00009CF8                            ; End of function sub_9404
00009CF8                            ; End of function sub_9404
00009CF8                            		include	"_incObj\29 Points.asm"
00009CF8                            ; ---------------------------------------------------------------------------
00009CF8                            ; Object 29 - points that appear when you destroy something
00009CF8                            ; ---------------------------------------------------------------------------
00009CF8                            
00009CF8                            Points:
00009CF8 7000                       		moveq	#0,d0
00009CFA 1028 0024                  		move.b	obRoutine(a0),d0
00009CFE 323B 0000                  		move.w	Poi_Index(pc,d0.w),d1
00009D02 4EBB 1000                  		jsr	Poi_Index(pc,d1.w)
00009D06 6000 0000                  		bra.w	DisplaySprite
00009D0A                            ; ===========================================================================
00009D0A 0000                       Poi_Index:	dc.w Poi_Main-Poi_Index
00009D0C 0000                       		dc.w Poi_Slower-Poi_Index
00009D0E                            ; ===========================================================================
00009D0E                            
00009D0E                            Poi_Main:	; Routine 0
00009D0E 5428 0024                  		addq.b	#2,obRoutine(a0)
00009D12 217C 0000 0000 0004        		move.l	#Map_Poi,obMap(a0)
00009D1A 317C 2797 0002             		move.w	#$2797,obGfx(a0)
00009D20 117C 0004 0001             		move.b	#4,obRender(a0)
00009D26 117C 0001 0018             		move.b	#1,obPriority(a0)
00009D2C 117C 0008 0019             		move.b	#8,obActWid(a0)
00009D32 317C FD00 0012             		move.w	#-$300,obVelY(a0) ; move object upwards
00009D38                            
00009D38                            Poi_Slower:	; Routine 2
00009D38 4A68 0012                  		tst.w	obVelY(a0)	; is object moving?
00009D3C 6A00 0000                  		bpl.w	DeleteObject	; if not, delete
00009D40 6100 0000                  		bsr.w	SpeedToPos
00009D44 0668 0018 0012             		addi.w	#$18,obVelY(a0)	; reduce object	speed
00009D4A 4E75                       		rts	
00009D4A 4E75                       		rts	
00009D4C                            Map_Animal1:	include	"_maps\Animals 1.asm"
00009D4C                            ; ---------------------------------------------------------------------------
00009D4C                            ; Sprite mappings - animals
00009D4C                            ; ---------------------------------------------------------------------------
00009D4C                            Map_Animal1_internal:
00009D4C 0000                       		dc.w byte_9472-Map_Animal1_internal
00009D4E 0000                       		dc.w byte_9478-Map_Animal1_internal
00009D50 0000                       		dc.w byte_946C-Map_Animal1_internal
00009D52 01                         byte_946C:	dc.b 1
00009D53 F406 0000 F8               		dc.b $F4, 6, 0,	0, $F8
00009D58 01                         byte_9472:	dc.b 1
00009D59 F406 0006 F8               		dc.b $F4, 6, 0,	6, $F8
00009D5E 01                         byte_9478:	dc.b 1
00009D5F F406 000C F8               		dc.b $F4, 6, 0,	$C, $F8
00009D64                            		even
00009D64                            		even
00009D64                            Map_Animal2:	include	"_maps\Animals 2.asm"
00009D64                            ; ---------------------------------------------------------------------------
00009D64                            ; Sprite mappings - animals
00009D64                            ; ---------------------------------------------------------------------------
00009D64                            Map_Animal2_internal:
00009D64 0000                       		dc.w byte_948A-Map_Animal2_internal
00009D66 0000                       		dc.w byte_9490-Map_Animal2_internal
00009D68 0000                       		dc.w byte_9484-Map_Animal2_internal
00009D6A 01                         byte_9484:	dc.b 1
00009D6B F406 0000 F8               		dc.b $F4, 6, 0,	0, $F8
00009D70 01                         byte_948A:	dc.b 1
00009D71 FC05 0006 F8               		dc.b $FC, 5, 0,	6, $F8
00009D76 01                         byte_9490:	dc.b 1
00009D77 FC05 000A F8               		dc.b $FC, 5, 0,	$A, $F8
00009D7C                            		even
00009D7C                            		even
00009D7C                            Map_Animal3:	include	"_maps\Animals 3.asm"
00009D7C                            ; ---------------------------------------------------------------------------
00009D7C                            ; Sprite mappings - animals
00009D7C                            ; ---------------------------------------------------------------------------
00009D7C                            Map_Animal3_internal:
00009D7C 0000                       		dc.w byte_94A2-Map_Animal3_internal
00009D7E 0000                       		dc.w byte_94A8-Map_Animal3_internal
00009D80 0000                       		dc.w byte_949C-Map_Animal3_internal
00009D82 01                         byte_949C:	dc.b 1
00009D83 F406 0000 F8               		dc.b $F4, 6, 0,	0, $F8
00009D88 01                         byte_94A2:	dc.b 1
00009D89 FC09 0006 F4               		dc.b $FC, 9, 0,	6, $F4
00009D8E 01                         byte_94A8:	dc.b 1
00009D8F FC09 000C F4               		dc.b $FC, 9, 0,	$C, $F4
00009D94                            		even
00009D94                            		even
00009D94                            Map_Poi:	include	"_maps\Points.asm"
00009D94                            ; ---------------------------------------------------------------------------
00009D94                            ; Sprite mappings - points that	appear when you	destroy	something
00009D94                            ; ---------------------------------------------------------------------------
00009D94                            Map_Poi_internal:
00009D94 0000                       		dc.w byte_94BC-Map_Poi_internal
00009D96 0000                       		dc.w byte_94C2-Map_Poi_internal
00009D98 0000                       		dc.w byte_94C8-Map_Poi_internal
00009D9A 0000                       		dc.w byte_94CE-Map_Poi_internal
00009D9C 0000                       		dc.w byte_94D4-Map_Poi_internal
00009D9E 0000                       		dc.w byte_94DA-Map_Poi_internal
00009DA0 0000                       		dc.w byte_94E5-Map_Poi_internal
00009DA2 01                         byte_94BC:	dc.b 1
00009DA3 FC04 0000 F8               		dc.b $FC, 4, 0,	0, $F8	; 100 points
00009DA8 01                         byte_94C2:	dc.b 1
00009DA9 FC04 0002 F8               		dc.b $FC, 4, 0,	2, $F8	; 200 points
00009DAE 01                         byte_94C8:	dc.b 1
00009DAF FC04 0004 F8               		dc.b $FC, 4, 0,	4, $F8	; 500 points
00009DB4 01                         byte_94CE:	dc.b 1
00009DB5 FC08 0006 F8               		dc.b $FC, 8, 0,	6, $F8	; 1000 points
00009DBA 01                         byte_94D4:	dc.b 1
00009DBB FC00 0006 FC               		dc.b $FC, 0, 0,	6, $FC	; 10 points
00009DC0 02                         byte_94DA:	dc.b 2
00009DC1 FC08 0006 F4               		dc.b $FC, 8, 0,	6, $F4	; 10,000 points
00009DC6 FC04 0007 01               		dc.b $FC, 4, 0,	7, 1
00009DCB 02                         byte_94E5:	dc.b 2
00009DCC FC08 0006 F4               		dc.b $FC, 8, 0,	6, $F4	; 100,000 points
00009DD1 FC04 0007 06               		dc.b $FC, 4, 0,	7, 6
00009DD6                            		even
00009DD6                            		even
00009DD6                            
00009DD6                            		include	"_incObj\1F Crabmeat.asm"
00009DD6                            ; ---------------------------------------------------------------------------
00009DD6                            ; Object 1F - Crabmeat enemy (GHZ, SYZ)
00009DD6                            ; ---------------------------------------------------------------------------
00009DD6                            
00009DD6                            Crabmeat:
00009DD6 7000                       		moveq	#0,d0
00009DD8 1028 0024                  		move.b	obRoutine(a0),d0
00009DDC 323B 0000                  		move.w	Crab_Index(pc,d0.w),d1
00009DE0 4EFB 1000                  		jmp	Crab_Index(pc,d1.w)
00009DE4                            ; ===========================================================================
00009DE4                            Crab_Index:
00009DE4 0000                       ptr_Crab_Main:		dc.w Crab_Main-Crab_Index
00009DE6 0000                       ptr_Crab_Action:	dc.w Crab_Action-Crab_Index
00009DE8 0000                       ptr_Crab_Delete:	dc.w Crab_Delete-Crab_Index
00009DEA 0000                       ptr_Crab_BallMain:	dc.w Crab_BallMain-Crab_Index
00009DEC 0000                       ptr_Crab_BallMove:	dc.w Crab_BallMove-Crab_Index
00009DEE                            
00009DEE =00000000                  id_Crab_Main:		equ ptr_Crab_Main-Crab_Index	; 0
00009DEE =00000002                  id_Crab_Action:		equ ptr_Crab_Action-Crab_Index	; 2
00009DEE =00000004                  id_Crab_Delete:		equ ptr_Crab_Delete-Crab_Index	; 4
00009DEE =00000006                  id_Crab_BallMain:	equ ptr_Crab_BallMain-Crab_Index	; 6
00009DEE =00000008                  id_Crab_BallMove:	equ ptr_Crab_BallMove-Crab_Index	; 8
00009DEE                            
00009DEE =00000030                  crab_timedelay:	equ $30
00009DEE =00000032                  crab_mode:	equ $32
00009DEE                            ; ===========================================================================
00009DEE                            
00009DEE                            Crab_Main:	; Routine 0
00009DEE 117C 0010 0016             		move.b	#$10,obHeight(a0)
00009DF4 117C 0008 0017             		move.b	#8,obWidth(a0)
00009DFA 217C 0000 0000 0004        		move.l	#Map_Crab,obMap(a0)
00009E02 317C 0400 0002             		move.w	#$400,obGfx(a0)
00009E08 117C 0004 0001             		move.b	#4,obRender(a0)
00009E0E 117C 0003 0018             		move.b	#3,obPriority(a0)
00009E14 117C 0006 0020             		move.b	#6,obColType(a0)
00009E1A 117C 0015 0019             		move.b	#$15,obActWid(a0)
00009E20 6100 0000                  		bsr.w	ObjectFall
00009E24 4EB9 0000 0000             		jsr	(ObjFloorDist).l	; find floor
00009E2A 4A41                       		tst.w	d1
00009E2C 6A00                       		bpl.s	@floornotfound
00009E2E D368 000C                  		add.w	d1,obY(a0)
00009E32 1143 0026                  		move.b	d3,obAngle(a0)
00009E36 317C 0000 0012             		move.w	#0,obVelY(a0)
00009E3C 5428 0024                  		addq.b	#2,obRoutine(a0)
00009E40                            
00009E40                            	@floornotfound:
00009E40 4E75                       		rts	
00009E42                            ; ===========================================================================
00009E42                            
00009E42                            Crab_Action:	; Routine 2
00009E42 7000                       		moveq	#0,d0
00009E44 1028 0025                  		move.b	ob2ndRout(a0),d0
00009E48 323B 0000                  		move.w	@index(pc,d0.w),d1
00009E4C 4EBB 1000                  		jsr	@index(pc,d1.w)
00009E50 43F9 0000 0000             		lea	(Ani_Crab).l,a1
00009E56 6100 0000                  		bsr.w	AnimateSprite
00009E5A 6000 0000                  		bra.w	RememberState
00009E5E                            ; ===========================================================================
00009E5E 0000                       @index:		dc.w @waittofire-@index
00009E60 0000                       		dc.w @walkonfloor-@index
00009E62                            ; ===========================================================================
00009E62                            
00009E62                            @waittofire:
00009E62 5368 0030                  		subq.w	#1,crab_timedelay(a0) ; subtract 1 from time delay
00009E66 6A00                       		bpl.s	@dontmove
00009E68 4A28 0001                  		tst.b	obRender(a0)
00009E6C 6A00                       		bpl.s	@movecrab
00009E6E 0868 0001 0032             		bchg	#1,crab_mode(a0)
00009E74 6600                       		bne.s	@fire
00009E76                            
00009E76                            	@movecrab:
00009E76 5428 0025                  		addq.b	#2,ob2ndRout(a0)
00009E7A 317C 007F 0030             		move.w	#127,crab_timedelay(a0) ; set time delay to approx 2 seconds
00009E80 317C 0080 0010             		move.w	#$80,obVelX(a0)	; move Crabmeat	to the right
00009E86 6100 0000                  		bsr.w	Crab_SetAni
00009E8A 5600                       		addq.b	#3,d0
00009E8C 1140 001C                  		move.b	d0,obAnim(a0)
00009E90 0868 0000 0022             		bchg	#0,obStatus(a0)
00009E96 6600                       		bne.s	@noflip
00009E98 4468 0010                  		neg.w	obVelX(a0)	; change direction
00009E9C                            
00009E9C                            	@dontmove:
00009E9C                            	@noflip:
00009E9C 4E75                       		rts	
00009E9E                            ; ===========================================================================
00009E9E                            
00009E9E                            @fire:
00009E9E 317C 003B 0030             		move.w	#59,crab_timedelay(a0)
00009EA4 117C 0006 001C             		move.b	#6,obAnim(a0)	; use firing animation
00009EAA 6100 0000                  		bsr.w	FindFreeObj
00009EAE 6600                       		bne.s	@failleft
00009EB0 137C 0000 0000             		move.b	#id_Crabmeat,0(a1) ; load left fireball
00009EB6 137C 0006 0024             		move.b	#id_Crab_BallMain,obRoutine(a1)
00009EBC 3368 0008 0008             		move.w	obX(a0),obX(a1)
00009EC2 0469 0010 0008             		subi.w	#$10,obX(a1)
00009EC8 3368 000C 000C             		move.w	obY(a0),obY(a1)
00009ECE 337C FF00 0010             		move.w	#-$100,obVelX(a1)
00009ED4                            
00009ED4                            	@failleft:
00009ED4 6100 0000                  		bsr.w	FindFreeObj
00009ED8 6600                       		bne.s	@failright
00009EDA 137C 0000 0000             		move.b	#id_Crabmeat,0(a1) ; load right fireball
00009EE0 137C 0006 0024             		move.b	#id_Crab_BallMain,obRoutine(a1)
00009EE6 3368 0008 0008             		move.w	obX(a0),obX(a1)
00009EEC 0669 0010 0008             		addi.w	#$10,obX(a1)
00009EF2 3368 000C 000C             		move.w	obY(a0),obY(a1)
00009EF8 337C 0100 0010             		move.w	#$100,obVelX(a1)
00009EFE                            
00009EFE                            	@failright:
00009EFE 4E75                       		rts	
00009F00                            ; ===========================================================================
00009F00                            
00009F00                            @walkonfloor:
00009F00 5368 0030                  		subq.w	#1,crab_timedelay(a0)
00009F04 6B00                       		bmi.s	loc_966E
00009F06 6100 0000                  		bsr.w	SpeedToPos
00009F0A 0868 0000 0032             		bchg	#0,crab_mode(a0)
00009F10 6600                       		bne.s	loc_9654
00009F12 3628 0008                  		move.w	obX(a0),d3
00009F16 0643 0010                  		addi.w	#$10,d3
00009F1A 0828 0000 0022             		btst	#0,obStatus(a0)
00009F20 6700                       		beq.s	loc_9640
00009F22 0443 0020                  		subi.w	#$20,d3
00009F26                            
00009F26                            loc_9640:
00009F26 4EB9 0000 0000             		jsr	(ObjFloorDist2).l
00009F2C 0C41 FFF8                  		cmpi.w	#-8,d1
00009F30 6D00                       		blt.s	loc_966E
00009F32 0C41 000C                  		cmpi.w	#$C,d1
00009F36 6C00                       		bge.s	loc_966E
00009F38 4E75                       		rts	
00009F3A                            ; ===========================================================================
00009F3A                            
00009F3A                            loc_9654:
00009F3A 4EB9 0000 0000             		jsr	(ObjFloorDist).l
00009F40 D368 000C                  		add.w	d1,obY(a0)
00009F44 1143 0026                  		move.b	d3,obAngle(a0)
00009F48 6100 0000                  		bsr.w	Crab_SetAni
00009F4C 5600                       		addq.b	#3,d0
00009F4E 1140 001C                  		move.b	d0,obAnim(a0)
00009F52 4E75                       		rts	
00009F54                            ; ===========================================================================
00009F54                            
00009F54                            loc_966E:
00009F54 5528 0025                  		subq.b	#2,ob2ndRout(a0)
00009F58 317C 003B 0030             		move.w	#59,crab_timedelay(a0)
00009F5E 317C 0000 0010             		move.w	#0,obVelX(a0)
00009F64 6100 0000                  		bsr.w	Crab_SetAni
00009F68 1140 001C                  		move.b	d0,obAnim(a0)
00009F6C 4E75                       		rts	
00009F6E                            ; ---------------------------------------------------------------------------
00009F6E                            ; Subroutine to	set the	correct	animation for a	Crabmeat
00009F6E                            ; ---------------------------------------------------------------------------
00009F6E                            
00009F6E                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00009F6E                            
00009F6E                            
00009F6E                            Crab_SetAni:
00009F6E 7000                       		moveq	#0,d0
00009F70 1628 0026                  		move.b	obAngle(a0),d3
00009F74 6B00                       		bmi.s	loc_96A4
00009F76 0C03 0006                  		cmpi.b	#6,d3
00009F7A 6500                       		bcs.s	locret_96A2
00009F7C 7001                       		moveq	#1,d0
00009F7E 0828 0000 0022             		btst	#0,obStatus(a0)
00009F84 6600                       		bne.s	locret_96A2
00009F86 7002                       		moveq	#2,d0
00009F88                            
00009F88                            locret_96A2:
00009F88 4E75                       		rts	
00009F8A                            ; ===========================================================================
00009F8A                            
00009F8A                            loc_96A4:
00009F8A 0C03 00FA                  		cmpi.b	#-6,d3
00009F8E 6200                       		bhi.s	locret_96B6
00009F90 7002                       		moveq	#2,d0
00009F92 0828 0000 0022             		btst	#0,obStatus(a0)
00009F98 6600                       		bne.s	locret_96B6
00009F9A 7001                       		moveq	#1,d0
00009F9C                            
00009F9C                            locret_96B6:
00009F9C 4E75                       		rts	
00009F9E                            ; End of function Crab_SetAni
00009F9E                            
00009F9E                            ; ===========================================================================
00009F9E                            
00009F9E                            Crab_Delete:	; Routine 4
00009F9E 6100 0000                  		bsr.w	DeleteObject
00009FA2 4E75                       		rts	
00009FA4                            ; ===========================================================================
00009FA4                            ; ---------------------------------------------------------------------------
00009FA4                            ; Sub-object - missile that the	Crabmeat throws
00009FA4                            ; ---------------------------------------------------------------------------
00009FA4                            
00009FA4                            Crab_BallMain:	; Routine 6
00009FA4 5428 0024                  		addq.b	#2,obRoutine(a0)
00009FA8 217C 0000 0000 0004        		move.l	#Map_Crab,obMap(a0)
00009FB0 317C 0400 0002             		move.w	#$400,obGfx(a0)
00009FB6 117C 0004 0001             		move.b	#4,obRender(a0)
00009FBC 117C 0003 0018             		move.b	#3,obPriority(a0)
00009FC2 117C 0087 0020             		move.b	#$87,obColType(a0)
00009FC8 117C 0008 0019             		move.b	#8,obActWid(a0)
00009FCE 317C FC00 0012             		move.w	#-$400,obVelY(a0)
00009FD4 117C 0007 001C             		move.b	#7,obAnim(a0)
00009FDA                            
00009FDA                            Crab_BallMove:	; Routine 8
00009FDA 43F9 0000 0000             		lea	(Ani_Crab).l,a1
00009FE0 6100 0000                  		bsr.w	AnimateSprite
00009FE4 6100 0000                  		bsr.w	ObjectFall
00009FE8 6100 0000                  		bsr.w	DisplaySprite
00009FEC 3038 F72E                  		move.w	(v_limitbtm2).w,d0
00009FF0 0640 00E0                  		addi.w	#$E0,d0
00009FF4 B068 000C                  		cmp.w	obY(a0),d0	; has object moved below the level boundary?
00009FF8 6500                       		bcs.s	@delete		; if yes, branch
00009FFA 4E75                       		rts	
00009FFC                            
00009FFC                            	@delete:
00009FFC 6000 0000                  		bra.w	DeleteObject
00009FFC 6000 0000                  		bra.w	DeleteObject
0000A000                            		include	"_anim\Crabmeat.asm"
0000A000                            ; ---------------------------------------------------------------------------
0000A000                            ; Animation script - Crabmeat enemy
0000A000                            ; ---------------------------------------------------------------------------
0000A000 0000 0000 0000             Ani_Crab:	dc.w @stand-Ani_Crab, @standslope-Ani_Crab, @standsloperev-Ani_Crab
0000A006 0000 0000 0000             		dc.w @walk-Ani_Crab, @walkslope-Ani_Crab, @walksloperev-Ani_Crab
0000A00C 0000 0000                  		dc.w @firing-Ani_Crab, @ball-Ani_Crab
0000A010 0F00 FF                    @stand:		dc.b $F, 0, afEnd
0000A014 00                         		even
0000A014 0F02 FF                    @standslope:	dc.b $F, 2, afEnd
0000A018 00                         		even
0000A018 0F22 FF                    @standsloperev:	dc.b $F, $22, afEnd
0000A01C 00                         		even
0000A01C 0F01 2100 FF               @walk:		dc.b $F, 1, $21, 0, afEnd
0000A022 00                         		even
0000A022 0F21 0302 FF               @walkslope:	dc.b $F, $21, 3, 2, afEnd
0000A028 00                         		even
0000A028 0F01 2322 FF               @walksloperev:	dc.b $F, 1, $23, $22, afEnd
0000A02E 00                         		even
0000A02E 0F04 FF                    @firing:	dc.b $F, 4, afEnd
0000A032 00                         		even
0000A032 0105 06FF                  @ball:		dc.b 1,	5, 6, afEnd
0000A036                            		even
0000A036                            		even
0000A036                            Map_Crab:	include	"_maps\Crabmeat.asm"
0000A036                            ; ---------------------------------------------------------------------------
0000A036                            ; Sprite mappings - Crabmeat enemy (GHZ, SYZ)
0000A036                            ; ---------------------------------------------------------------------------
0000A036                            Map_Crab_internal:
0000A036 0000                       		dc.w @stand-Map_Crab_internal
0000A038 0000                       		dc.w @walk-Map_Crab_internal
0000A03A 0000                       		dc.w @slope1-Map_Crab_internal
0000A03C 0000                       		dc.w @slope2-Map_Crab_internal
0000A03E 0000                       		dc.w @firing-Map_Crab_internal
0000A040 0000                       		dc.w @ball1-Map_Crab_internal
0000A042 0000                       		dc.w @ball2-Map_Crab_internal
0000A044 04                         @stand:		dc.b 4
0000A045 F009 0000 E8               		dc.b $F0, 9, 0,	0, $E8	; standing/middle walking frame
0000A04A F009 0800 00               		dc.b $F0, 9, 8,	0, 0
0000A04F 0005 0006 F0               		dc.b 0,	5, 0, 6, $F0
0000A054 0005 0806 00               		dc.b 0,	5, 8, 6, 0
0000A059 04                         @walk:		dc.b 4
0000A05A F009 000A E8               		dc.b $F0, 9, 0,	$A, $E8	; walking
0000A05F F009 0010 00               		dc.b $F0, 9, 0,	$10, 0
0000A064 0005 0016 F0               		dc.b 0,	5, 0, $16, $F0
0000A069 0009 001A 00               		dc.b 0,	9, 0, $1A, 0
0000A06E 04                         @slope1:	dc.b 4
0000A06F EC09 0000 E8               		dc.b $EC, 9, 0,	0, $E8	; walking on slope
0000A074 EC09 0800 00               		dc.b $EC, 9, 8,	0, 0
0000A079 FC05 0806 00               		dc.b $FC, 5, 8,	6, 0
0000A07E FC06 0020 F0               		dc.b $FC, 6, 0,	$20, $F0
0000A083 04                         @slope2:	dc.b 4
0000A084 EC09 000A E8               		dc.b $EC, 9, 0,	$A, $E8	; walking on slope
0000A089 EC09 0010 00               		dc.b $EC, 9, 0,	$10, 0
0000A08E FC09 0026 00               		dc.b $FC, 9, 0,	$26, 0
0000A093 FC06 002C F0               		dc.b $FC, 6, 0,	$2C, $F0
0000A098 06                         @firing:	dc.b 6
0000A099 F004 0032 F0               		dc.b $F0, 4, 0,	$32, $F0 ; firing projectiles
0000A09E F004 0832 00               		dc.b $F0, 4, 8,	$32, 0
0000A0A3 F809 0034 E8               		dc.b $F8, 9, 0,	$34, $E8
0000A0A8 F809 0834 00               		dc.b $F8, 9, 8,	$34, 0
0000A0AD 0804 003A F0               		dc.b 8,	4, 0, $3A, $F0
0000A0B2 0804 083A 00               		dc.b 8,	4, 8, $3A, 0
0000A0B7 01                         @ball1:		dc.b 1
0000A0B8 F805 003C F8               		dc.b $F8, 5, 0,	$3C, $F8 ; projectile
0000A0BD 01                         @ball2:		dc.b 1
0000A0BE F805 0040 F8               		dc.b $F8, 5, 0,	$40, $F8 ; projectile
0000A0C4 00                         		even
0000A0C4 00                         		even
0000A0C4                            		include	"_incObj\22 Buzz Bomber.asm"
0000A0C4                            ; ===========================================================================
0000A0C4                            ; ---------------------------------------------------------------------------
0000A0C4                            ; Object 22 - Buzz Bomber enemy	(GHZ, MZ, SYZ)
0000A0C4                            ; ---------------------------------------------------------------------------
0000A0C4                            
0000A0C4                            BuzzBomber:
0000A0C4 7000                       		moveq	#0,d0
0000A0C6 1028 0024                  		move.b	obRoutine(a0),d0
0000A0CA 323B 0000                  		move.w	Buzz_Index(pc,d0.w),d1
0000A0CE 4EFB 1000                  		jmp	Buzz_Index(pc,d1.w)
0000A0D2                            ; ===========================================================================
0000A0D2 0000                       Buzz_Index:	dc.w Buzz_Main-Buzz_Index
0000A0D4 0000                       		dc.w Buzz_Action-Buzz_Index
0000A0D6 0000                       		dc.w Buzz_Delete-Buzz_Index
0000A0D8                            
0000A0D8 =00000032                  buzz_timedelay:	equ $32
0000A0D8 =00000034                  buzz_buzzstatus:	equ $34
0000A0D8 =0000003C                  buzz_parent:	equ $3C
0000A0D8                            ; ===========================================================================
0000A0D8                            
0000A0D8                            Buzz_Main:	; Routine 0
0000A0D8 5428 0024                  		addq.b	#2,obRoutine(a0)
0000A0DC 217C 0000 0000 0004        		move.l	#Map_Buzz,obMap(a0)
0000A0E4 317C 0444 0002             		move.w	#$444,obGfx(a0)
0000A0EA 117C 0004 0001             		move.b	#4,obRender(a0)
0000A0F0 117C 0003 0018             		move.b	#3,obPriority(a0)
0000A0F6 117C 0008 0020             		move.b	#8,obColType(a0)
0000A0FC 117C 0018 0019             		move.b	#$18,obActWid(a0)
0000A102                            
0000A102                            Buzz_Action:	; Routine 2
0000A102 7000                       		moveq	#0,d0
0000A104 1028 0025                  		move.b	ob2ndRout(a0),d0
0000A108 323B 0000                  		move.w	@index(pc,d0.w),d1
0000A10C 4EBB 1000                  		jsr	@index(pc,d1.w)
0000A110 43F9 0000 0000             		lea	(Ani_Buzz).l,a1
0000A116 6100 0000                  		bsr.w	AnimateSprite
0000A11A 6000 0000                  		bra.w	RememberState
0000A11E                            ; ===========================================================================
0000A11E 0000                       @index:		dc.w @move-@index
0000A120 0000                       		dc.w @chknearsonic-@index
0000A122                            ; ===========================================================================
0000A122                            
0000A122                            @move:
0000A122 5368 0032                  		subq.w	#1,buzz_timedelay(a0) ; subtract 1 from time delay
0000A126 6A00                       		bpl.s	@noflip		; if time remains, branch
0000A128 0828 0001 0034             		btst	#1,buzz_buzzstatus(a0) ; is Buzz Bomber near Sonic?
0000A12E 6600                       		bne.s	@fire		; if yes, branch
0000A130 5428 0025                  		addq.b	#2,ob2ndRout(a0)
0000A134 317C 00FE 0032             		move.w	#254,buzz_timedelay(a0) ; set time delay to just over 2 seconds
0000A13A 317C 0200 0010             		move.w	#$200,obVelX(a0) ; move Buzz Bomber to the right
0000A140 117C 0001 001C             		move.b	#1,obAnim(a0)	; use "flying" animation
0000A146 0828 0000 0022             		btst	#0,obStatus(a0)	; is Buzz Bomber facing	left?
0000A14C 6600                       		bne.s	@noflip		; if not, branch
0000A14E 4468 0010                  		neg.w	obVelX(a0)	; move Buzz Bomber to the left
0000A152                            
0000A152                            	@noflip:
0000A152 4E75                       		rts	
0000A154                            ; ===========================================================================
0000A154                            
0000A154                            	@fire:
0000A154 6100 0000                  		bsr.w	FindFreeObj
0000A158 6600                       		bne.s	@fail
0000A15A 137C 0000 0000             		move.b	#id_Missile,0(a1) ; load missile object
0000A160 3368 0008 0008             		move.w	obX(a0),obX(a1)
0000A166 3368 000C 000C             		move.w	obY(a0),obY(a1)
0000A16C 0669 001C 000C             		addi.w	#$1C,obY(a1)
0000A172 337C 0200 0012             		move.w	#$200,obVelY(a1) ; move missile downwards
0000A178 337C 0200 0010             		move.w	#$200,obVelX(a1) ; move missile to the right
0000A17E 303C 0018                  		move.w	#$18,d0
0000A182 0828 0000 0022             		btst	#0,obStatus(a0)	; is Buzz Bomber facing	left?
0000A188 6600                       		bne.s	@noflip2	; if not, branch
0000A18A 4440                       		neg.w	d0
0000A18C 4469 0010                  		neg.w	obVelX(a1)	; move missile to the left
0000A190                            
0000A190                            	@noflip2:
0000A190 D169 0008                  		add.w	d0,obX(a1)
0000A194 1368 0022 0022             		move.b	obStatus(a0),obStatus(a1)
0000A19A 337C 000E 0032             		move.w	#$E,buzz_timedelay(a1)
0000A1A0 2348 003C                  		move.l	a0,buzz_parent(a1)
0000A1A4 117C 0001 0034             		move.b	#1,buzz_buzzstatus(a0) ; set to "already fired" to prevent refiring
0000A1AA 317C 003B 0032             		move.w	#59,buzz_timedelay(a0)
0000A1B0 117C 0002 001C             		move.b	#2,obAnim(a0)	; use "firing" animation
0000A1B6                            
0000A1B6                            	@fail:
0000A1B6 4E75                       		rts	
0000A1B8                            ; ===========================================================================
0000A1B8                            
0000A1B8                            @chknearsonic:
0000A1B8 5368 0032                  		subq.w	#1,buzz_timedelay(a0) ; subtract 1 from time delay
0000A1BC 6B00                       		bmi.s	@chgdirection
0000A1BE 6100 0000                  		bsr.w	SpeedToPos
0000A1C2 4A28 0034                  		tst.b	buzz_buzzstatus(a0)
0000A1C6 6600                       		bne.s	@keepgoing
0000A1C8 3038 D008                  		move.w	(v_player+obX).w,d0
0000A1CC 9068 0008                  		sub.w	obX(a0),d0
0000A1D0 6A00                       		bpl.s	@isleft
0000A1D2 4440                       		neg.w	d0
0000A1D4                            
0000A1D4                            	@isleft:
0000A1D4 0C40 0060                  		cmpi.w	#$60,d0		; is Buzz Bomber within	$60 pixels of Sonic?
0000A1D8 6400                       		bcc.s	@keepgoing	; if not, branch
0000A1DA 4A28 0001                  		tst.b	obRender(a0)
0000A1DE 6A00                       		bpl.s	@keepgoing
0000A1E0 117C 0002 0034             		move.b	#2,buzz_buzzstatus(a0) ; set Buzz Bomber to "near Sonic"
0000A1E6 317C 001D 0032             		move.w	#29,buzz_timedelay(a0) ; set time delay to half a second
0000A1EC 6000                       		bra.s	@stop
0000A1EE                            ; ===========================================================================
0000A1EE                            
0000A1EE                            	@chgdirection:
0000A1EE 117C 0000 0034             		move.b	#0,buzz_buzzstatus(a0) ; set Buzz Bomber to "normal"
0000A1F4 0868 0000 0022             		bchg	#0,obStatus(a0)	; change direction
0000A1FA 317C 003B 0032             		move.w	#59,buzz_timedelay(a0)
0000A200                            
0000A200                            	@stop:
0000A200 5528 0025                  		subq.b	#2,ob2ndRout(a0)
0000A204 317C 0000 0010             		move.w	#0,obVelX(a0)	; stop Buzz Bomber moving
0000A20A 117C 0000 001C             		move.b	#0,obAnim(a0)	; use "hovering" animation
0000A210                            
0000A210                            @keepgoing:
0000A210 4E75                       		rts	
0000A212                            ; ===========================================================================
0000A212                            
0000A212                            Buzz_Delete:	; Routine 4
0000A212 6100 0000                  		bsr.w	DeleteObject
0000A216 4E75                       		rts	
0000A216 4E75                       		rts	
0000A218                            		include	"_incObj\23 Buzz Bomber Missile.asm"
0000A218                            ; ---------------------------------------------------------------------------
0000A218                            ; Object 23 - missile that Buzz	Bomber throws
0000A218                            ; ---------------------------------------------------------------------------
0000A218                            
0000A218                            Missile:
0000A218 7000                       		moveq	#0,d0
0000A21A 1028 0024                  		move.b	obRoutine(a0),d0
0000A21E 323B 0000                  		move.w	Msl_Index(pc,d0.w),d1
0000A222 4EFB 1000                  		jmp	Msl_Index(pc,d1.w)
0000A226                            ; ===========================================================================
0000A226 0000                       Msl_Index:	dc.w Msl_Main-Msl_Index
0000A228 0000                       		dc.w Msl_Animate-Msl_Index
0000A22A 0000                       		dc.w Msl_FromBuzz-Msl_Index
0000A22C 0000                       		dc.w Msl_Delete-Msl_Index
0000A22E 0000                       		dc.w Msl_FromNewt-Msl_Index
0000A230                            
0000A230 =0000003C                  msl_parent:	equ $3C
0000A230                            ; ===========================================================================
0000A230                            
0000A230                            Msl_Main:	; Routine 0
0000A230 5368 0032                  		subq.w	#1,$32(a0)
0000A234 6A00                       		bpl.s	Msl_ChkCancel
0000A236 5428 0024                  		addq.b	#2,obRoutine(a0)
0000A23A 217C 0000 0000 0004        		move.l	#Map_Missile,obMap(a0)
0000A242 317C 2444 0002             		move.w	#$2444,obGfx(a0)
0000A248 117C 0004 0001             		move.b	#4,obRender(a0)
0000A24E 117C 0003 0018             		move.b	#3,obPriority(a0)
0000A254 117C 0008 0019             		move.b	#8,obActWid(a0)
0000A25A 0228 0003 0022             		andi.b	#3,obStatus(a0)
0000A260 4A28 0028                  		tst.b	obSubtype(a0)	; was object created by	a Newtron?
0000A264 6700                       		beq.s	Msl_Animate	; if not, branch
0000A266                            
0000A266 117C 0008 0024             		move.b	#8,obRoutine(a0) ; run "Msl_FromNewt" routine
0000A26C 117C 0087 0020             		move.b	#$87,obColType(a0)
0000A272 117C 0001 001C             		move.b	#1,obAnim(a0)
0000A278 6000                       		bra.s	Msl_Animate2
0000A27A                            ; ===========================================================================
0000A27A                            
0000A27A                            Msl_Animate:	; Routine 2
0000A27A 6100                       		bsr.s	Msl_ChkCancel
0000A27C 43F9 0000 0000             		lea	(Ani_Missile).l,a1
0000A282 6100 0000                  		bsr.w	AnimateSprite
0000A286 6000 0000                  		bra.w	DisplaySprite
0000A28A                            
0000A28A                            ; ---------------------------------------------------------------------------
0000A28A                            ; Subroutine to	check if the Buzz Bomber which fired the missile has been
0000A28A                            ; destroyed, and if it has, then cancel	the missile
0000A28A                            ; ---------------------------------------------------------------------------
0000A28A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000A28A                            
0000A28A                            
0000A28A                            Msl_ChkCancel:
0000A28A 2268 003C                  		movea.l	msl_parent(a0),a1
0000A28E 0C29 0000 0000             		cmpi.b	#id_ExplosionItem,0(a1) ; has Buzz Bomber been destroyed?
0000A294 6700                       		beq.s	Msl_Delete	; if yes, branch
0000A296 4E75                       		rts	
0000A298                            ; End of function Msl_ChkCancel
0000A298                            
0000A298                            ; ===========================================================================
0000A298                            
0000A298                            Msl_FromBuzz:	; Routine 4
0000A298 0828 0007 0022             		btst	#7,obStatus(a0)
0000A29E 6600                       		bne.s	@explode
0000A2A0 117C 0087 0020             		move.b	#$87,obColType(a0)
0000A2A6 117C 0001 001C             		move.b	#1,obAnim(a0)
0000A2AC 6100 0000                  		bsr.w	SpeedToPos
0000A2B0 43F9 0000 0000             		lea	(Ani_Missile).l,a1
0000A2B6 6100 0000                  		bsr.w	AnimateSprite
0000A2BA 6100 0000                  		bsr.w	DisplaySprite
0000A2BE 3038 F72E                  		move.w	(v_limitbtm2).w,d0
0000A2C2 0640 00E0                  		addi.w	#$E0,d0
0000A2C6 B068 000C                  		cmp.w	obY(a0),d0	; has object moved below the level boundary?
0000A2CA 6500                       		bcs.s	Msl_Delete	; if yes, branch
0000A2CC 4E75                       		rts	
0000A2CE                            ; ===========================================================================
0000A2CE                            
0000A2CE                            	@explode:
0000A2CE 117C 0000 0000             		move.b	#id_MissileDissolve,0(a0) ; change object to an explosion (Obj24)
0000A2D4 117C 0000 0024             		move.b	#0,obRoutine(a0)
0000A2DA 6000 F27C                  		bra.w	MissileDissolve
0000A2DE                            ; ===========================================================================
0000A2DE                            
0000A2DE                            Msl_Delete:	; Routine 6
0000A2DE 6100 0000                  		bsr.w	DeleteObject
0000A2E2 4E75                       		rts	
0000A2E4                            ; ===========================================================================
0000A2E4                            
0000A2E4                            Msl_FromNewt:	; Routine 8
0000A2E4 4A28 0001                  		tst.b	obRender(a0)
0000A2E8 6AF4                       		bpl.s	Msl_Delete
0000A2EA 6100 0000                  		bsr.w	SpeedToPos
0000A2EE                            
0000A2EE                            Msl_Animate2:
0000A2EE 43F9 0000 0000             		lea	(Ani_Missile).l,a1
0000A2F4 6100 0000                  		bsr.w	AnimateSprite
0000A2F8 6100 0000                  		bsr.w	DisplaySprite
0000A2FC 4E75                       		rts	
0000A2FC 4E75                       		rts	
0000A2FE                            		include	"_anim\Buzz Bomber.asm"
0000A2FE                            ; ---------------------------------------------------------------------------
0000A2FE                            ; Animation script - Buzz Bomber enemy
0000A2FE                            ; ---------------------------------------------------------------------------
0000A2FE 0000                       Ani_Buzz:	dc.w @fly1-Ani_Buzz
0000A300 0000                       		dc.w @fly2-Ani_Buzz
0000A302 0000                       		dc.w @fires-Ani_Buzz
0000A304 0100 01FF                  @fly1:		dc.b 1,	0, 1, afEnd
0000A308 0102 03FF                  @fly2:		dc.b 1,	2, 3, afEnd
0000A30C 0104 05FF                  @fires:		dc.b 1,	4, 5, afEnd
0000A310                            		even
0000A310                            		even
0000A310                            		include	"_anim\Buzz Bomber Missile.asm"
0000A310                            ; ---------------------------------------------------------------------------
0000A310                            ; Animation script - missile that Buzz Bomber throws
0000A310                            ; ---------------------------------------------------------------------------
0000A310 0000                       Ani_Missile:	dc.w @flare-Ani_Missile
0000A312 0000                       		dc.w @missile-Ani_Missile
0000A314 0700 01FC                  @flare:		dc.b 7,	0, 1, afRoutine
0000A318 0102 03FF                  @missile:	dc.b 1,	2, 3, afEnd
0000A31C                            		even
0000A31C                            		even
0000A31C                            Map_Buzz:	include	"_maps\Buzz Bomber.asm"
0000A31C                            ; ================================================================================
0000A31C                            ; Sprite Mappings - generated by Flex 2 Sat Jan 16 2021 16:01:10 GMT-0500 (Eastern Standard Time)
0000A31C                            ; ================================================================================
0000A31C                            
0000A31C                            DATAOVSFM3K93ER:
0000A31C 0000 0000                  	dc.w DATAOVSFM3K93ER_0-DATAOVSFM3K93ER, DATAOVSFM3K93ER_1-DATAOVSFM3K93ER
0000A320 0000 0000                  	dc.w DATAOVSFM3K93ER_2-DATAOVSFM3K93ER, DATAOVSFM3K93ER_3-DATAOVSFM3K93ER
0000A324 0000 0000                  	dc.w DATAOVSFM3K93ER_4-DATAOVSFM3K93ER, DATAOVSFM3K93ER_5-DATAOVSFM3K93ER
0000A328 07                         DATAOVSFM3K93ER_0: dc.b $7
0000A329 F604 2031 E7               	dc.b $F6, $4, $20, $31, $E7
0000A32E F409 0000 E8               	dc.b $F4, $9, $0, $0, $E8
0000A333 F409 000F 00               	dc.b $F4, $9, $0, $F, $0
0000A338 0408 0015 E8               	dc.b $4, $8, $0, $15, $E8
0000A33D 0404 0018 00               	dc.b $4, $4, $0, $18, $0
0000A342 F108 001A EC               	dc.b $F1, $8, $0, $1A, $EC
0000A347 F104 001D 04               	dc.b $F1, $4, $0, $1D, $4
0000A34C 07                         DATAOVSFM3K93ER_1: dc.b $7
0000A34D F604 2031 E7               	dc.b $F6, $4, $20, $31, $E7
0000A352 F409 0000 E8               	dc.b $F4, $9, $0, $0, $E8
0000A357 F409 000F 00               	dc.b $F4, $9, $0, $F, $0
0000A35C 0408 0015 E8               	dc.b $4, $8, $0, $15, $E8
0000A361 0404 0018 00               	dc.b $4, $4, $0, $18, $0
0000A366 F408 001F EC               	dc.b $F4, $8, $0, $1F, $EC
0000A36B F404 0022 04               	dc.b $F4, $4, $0, $22, $4
0000A370 08                         DATAOVSFM3K93ER_2: dc.b $8
0000A371 F604 2031 E7               	dc.b $F6, $4, $20, $31, $E7
0000A376 0400 0030 0C               	dc.b $4, $0, $0, $30, $C
0000A37B F409 0000 E8               	dc.b $F4, $9, $0, $0, $E8
0000A380 F409 000F 00               	dc.b $F4, $9, $0, $F, $0
0000A385 0408 0015 E8               	dc.b $4, $8, $0, $15, $E8
0000A38A 0404 0018 00               	dc.b $4, $4, $0, $18, $0
0000A38F F108 001A EC               	dc.b $F1, $8, $0, $1A, $EC
0000A394 F104 001D 04               	dc.b $F1, $4, $0, $1D, $4
0000A399 09                         DATAOVSFM3K93ER_3: dc.b $9
0000A39A F604 2031 E7               	dc.b $F6, $4, $20, $31, $E7
0000A39F 0400 0030 0C               	dc.b $4, $0, $0, $30, $C
0000A3A4 F409 0000 E8               	dc.b $F4, $9, $0, $0, $E8
0000A3A9 F409 000F 00               	dc.b $F4, $9, $0, $F, $0
0000A3AE 0408 0015 E8               	dc.b $4, $8, $0, $15, $E8
0000A3B3 0404 0018 00               	dc.b $4, $4, $0, $18, $0
0000A3B8 F408 001F EC               	dc.b $F4, $8, $0, $1F, $EC
0000A3BD F404 0022 04               	dc.b $F4, $4, $0, $22, $4
0000A3C2 0400 0030 0F               	dc.b $4, $0, $0, $30, $F
0000A3C7 07                         DATAOVSFM3K93ER_4: dc.b $7
0000A3C8 F604 2031 EB               	dc.b $F6, $4, $20, $31, $EB
0000A3CD F40D 0000 EC               	dc.b $F4, $D, $0, $0, $EC
0000A3D2 040C 0008 EC               	dc.b $4, $C, $0, $8, $EC
0000A3D7 0400 000C 0C               	dc.b $4, $0, $0, $C, $C
0000A3DC 0C04 000D F4               	dc.b $C, $4, $0, $D, $F4
0000A3E1 F104 201D 04               	dc.b $F1, $4, $20, $1D, $4
0000A3E6 F108 001A EC               	dc.b $F1, $8, $0, $1A, $EC
0000A3EB 05                         DATAOVSFM3K93ER_5: dc.b $5
0000A3EC F604 2031 EB               	dc.b $F6, $4, $20, $31, $EB
0000A3F1 F40D 0000 EC               	dc.b $F4, $D, $0, $0, $EC
0000A3F6 040C 0008 EC               	dc.b $4, $C, $0, $8, $EC
0000A3FB 0400 000C 0C               	dc.b $4, $0, $0, $C, $C
0000A400 0C04 000D F4               	dc.b $C, $4, $0, $D, $F4
0000A406 00                         	even
0000A406 00                         	even
0000A406                            Map_Missile:	include	"_maps\Buzz Bomber Missile.asm"
0000A406                            ; ---------------------------------------------------------------------------
0000A406                            ; Sprite mappings - missile that Buzz Bomber throws
0000A406                            ; ---------------------------------------------------------------------------
0000A406                            Map_Missile_internal:
0000A406 0000                       		dc.w @Flare1-Map_Missile_internal
0000A408 0000                       		dc.w @Flare2-Map_Missile_internal
0000A40A 0000                       		dc.w @Ball1-Map_Missile_internal
0000A40C 0000                       		dc.w @Ball2-Map_Missile_internal
0000A40E 01                         @Flare1:	dc.b 1
0000A40F F805 0024 F8               		dc.b $F8, 5, 0,	$24, $F8 ; buzz bomber firing flare
0000A414 01                         @Flare2:	dc.b 1
0000A415 F805 0028 F8               		dc.b $F8, 5, 0,	$28, $F8
0000A41A 01                         @Ball1:		dc.b 1
0000A41B F805 002C F8               		dc.b $F8, 5, 0,	$2C, $F8 ; missile itself
0000A420 01                         @Ball2:		dc.b 1
0000A421 F805 0033 F8               		dc.b $F8, 5, 0,	$33, $F8
0000A426                            		even
0000A426                            		even
0000A426                            
0000A426                            		include	"_incObj\25 & 37 Rings.asm"
0000A426                            ; ---------------------------------------------------------------------------
0000A426                            ; Object 25 - rings
0000A426                            ; ---------------------------------------------------------------------------
0000A426                            
0000A426                            Rings:
0000A426 7000                       		moveq	#0,d0
0000A428 1028 0024                  		move.b	obRoutine(a0),d0
0000A42C 323B 0000                  		move.w	Ring_Index(pc,d0.w),d1
0000A430 4EFB 1000                  		jmp	Ring_Index(pc,d1.w)
0000A434                            ; ===========================================================================
0000A434                            Ring_Index:
0000A434 0000                       ptr_Ring_Main:		dc.w Ring_Main-Ring_Index
0000A436 0000                       ptr_Ring_Animate:	dc.w Ring_Animate-Ring_Index
0000A438 0000                       ptr_Ring_Collect:	dc.w Ring_Collect-Ring_Index
0000A43A 0000                       ptr_Ring_Sparkle:	dc.w Ring_Sparkle-Ring_Index
0000A43C 0000                       ptr_Ring_Delete:	dc.w Ring_Delete-Ring_Index
0000A43E                            
0000A43E =00000000                  id_Ring_Main:		equ ptr_Ring_Main-Ring_Index	; 0
0000A43E =00000002                  id_Ring_Animate:		equ ptr_Ring_Animate-Ring_Index	; 2
0000A43E =00000004                  id_Ring_Collect:		equ ptr_Ring_Collect-Ring_Index	; 4
0000A43E =00000006                  id_Ring_Sparkle:		equ ptr_Ring_Sparkle-Ring_Index	; 6
0000A43E =00000008                  id_Ring_Delete:		equ ptr_Ring_Delete-Ring_Index	; 8
0000A43E                            ; ---------------------------------------------------------------------------
0000A43E                            ; Distances between rings (format: horizontal, vertical)
0000A43E                            ; ---------------------------------------------------------------------------
0000A43E 1000                       Ring_PosData:	dc.b $10, 0		; horizontal tight
0000A440 1800                       		dc.b $18, 0		; horizontal normal
0000A442 2000                       		dc.b $20, 0		; horizontal wide
0000A444 0010                       		dc.b 0,	$10		; vertical tight
0000A446 0018                       		dc.b 0,	$18		; vertical normal
0000A448 0020                       		dc.b 0,	$20		; vertical wide
0000A44A 1010                       		dc.b $10, $10		; diagonal
0000A44C 1818                       		dc.b $18, $18
0000A44E 2020                       		dc.b $20, $20
0000A450 F010                       		dc.b $F0, $10
0000A452 E818                       		dc.b $E8, $18
0000A454 E020                       		dc.b $E0, $20
0000A456 1008                       		dc.b $10, 8
0000A458 1810                       		dc.b $18, $10
0000A45A F008                       		dc.b $F0, 8
0000A45C E810                       		dc.b $E8, $10
0000A45E                            ; ===========================================================================
0000A45E                            
0000A45E                            Ring_Main:	; Routine 0
0000A45E 45F8 FC00                  		lea	(v_objstate).w,a2
0000A462 7000                       		moveq	#0,d0
0000A464 1028 0023                  		move.b	obRespawnNo(a0),d0
0000A468 45F2 0002                  		lea	2(a2,d0.w),a2
0000A46C 1812                       		move.b	(a2),d4
0000A46E 1228 0028                  		move.b	obSubtype(a0),d1
0000A472 1001                       		move.b	d1,d0
0000A474 0241 0007                  		andi.w	#7,d1
0000A478 0C41 0007                  		cmpi.w	#7,d1
0000A47C 6600                       		bne.s	loc_9B80
0000A47E 7206                       		moveq	#6,d1
0000A480                            
0000A480                            	loc_9B80:
0000A480 4841                       		swap	d1
0000A482 323C 0000                  		move.w	#0,d1
0000A486 E808                       		lsr.b	#4,d0
0000A488 D040                       		add.w	d0,d0
0000A48A 1A3B 00B2                  		move.b	Ring_PosData(pc,d0.w),d5 ; load ring spacing data
0000A48E 4885                       		ext.w	d5
0000A490 1C3B 00AD                  		move.b	Ring_PosData+1(pc,d0.w),d6
0000A494 4886                       		ext.w	d6
0000A496 2248                       		movea.l	a0,a1
0000A498 3428 0008                  		move.w	obX(a0),d2
0000A49C 3628 000C                  		move.w	obY(a0),d3
0000A4A0 E20C                       		lsr.b	#1,d4
0000A4A2 6500                       		bcs.s	loc_9C02
0000A4A4 0892 0007                  		bclr	#7,(a2)
0000A4A8 6000                       		bra.s	loc_9BBA
0000A4AA                            ; ===========================================================================
0000A4AA                            
0000A4AA                            Ring_MakeRings:
0000A4AA 4841                       		swap	d1
0000A4AC E20C                       		lsr.b	#1,d4
0000A4AE 6500                       		bcs.s	loc_9C02
0000A4B0 0892 0007                  		bclr	#7,(a2)
0000A4B4 6100 0000                  		bsr.w	FindFreeObj
0000A4B8 6600                       		bne.s	loc_9C0E
0000A4BA                            
0000A4BA                            loc_9BBA:
0000A4BA 137C 0000 0000             		move.b	#id_Rings,0(a1)	; load ring object
0000A4C0 5429 0024                  		addq.b	#2,obRoutine(a1)
0000A4C4 3342 0008                  		move.w	d2,obX(a1)	; set x-axis position based on d2
0000A4C8 3368 0008 0032             		move.w	obX(a0),$32(a1)
0000A4CE 3343 000C                  		move.w	d3,obY(a1)	; set y-axis position based on d3
0000A4D2 237C 0000 0000 0004        		move.l	#Map_Ring,obMap(a1)
0000A4DA 337C 27B2 0002             		move.w	#$27B2,obGfx(a1)
0000A4E0 137C 0004 0001             		move.b	#4,obRender(a1)
0000A4E6 137C 0002 0018             		move.b	#2,obPriority(a1)
0000A4EC 137C 0047 0020             		move.b	#$47,obColType(a1)
0000A4F2 137C 0008 0019             		move.b	#8,obActWid(a1)
0000A4F8 1368 0023 0023             		move.b	obRespawnNo(a0),obRespawnNo(a1)
0000A4FE 1341 0034                  		move.b	d1,$34(a1)
0000A502                            
0000A502                            loc_9C02:
0000A502 5241                       		addq.w	#1,d1
0000A504 D445                       		add.w	d5,d2		; add ring spacing value to d2
0000A506 D646                       		add.w	d6,d3		; add ring spacing value to d3
0000A508 4841                       		swap	d1
0000A50A 51C9 FF9E                  		dbf	d1,Ring_MakeRings ; repeat for	number of rings
0000A50E                            
0000A50E                            loc_9C0E:
0000A50E 0812 0000                  		btst	#0,(a2)
0000A512 6600 0000                  		bne.w	DeleteObject
0000A516                            
0000A516                            Ring_Animate:	; Routine 2
0000A516 1178 FEC3 001A             		move.b	(v_ani1_frame).w,obFrame(a0) ; set frame
0000A51C 6100 0000                  		bsr.w	DisplaySprite
0000A53C 4E75                       		rts	
0000A53E                            ; ===========================================================================
0000A53E                            
0000A53E                            Ring_Collect:	; Routine 4
0000A53E 5428 0024                  		addq.b	#2,obRoutine(a0)
0000A542 117C 0000 0020             		move.b	#0,obColType(a0)
0000A548 117C 0001 0018             		move.b	#1,obPriority(a0)
0000A54E 6100 0000                  		bsr.w	CollectRing
0000A552 45F8 FC00                  		lea	(v_objstate).w,a2
0000A556 7000                       		moveq	#0,d0
0000A558 1028 0023                  		move.b	obRespawnNo(a0),d0
0000A55C 1228 0034                  		move.b	$34(a0),d1
0000A560 03F2 0002                  		bset	d1,2(a2,d0.w)
0000A564                            
0000A564                            Ring_Sparkle:	; Routine 6
0000A564 43F9 0000 0000             		lea	(Ani_Ring).l,a1
0000A56A 6100 0000                  		bsr.w	AnimateSprite
0000A56E 6000 0000                  		bra.w	DisplaySprite
0000A572                            ; ===========================================================================
0000A572                            
0000A572                            Ring_Delete:	; Routine 8
0000A572 6000 0000                  		bra.w	DeleteObject
0000A576                            
0000A576                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000A576                            
0000A576                            
0000A576                            CollectRing:
0000A576 5278 FE20                  		addq.w	#1,(v_rings).w	; add 1 to rings
0000A57A 0038 0001 FE1D             		ori.b	#1,(f_ringcount).w ; update the rings counter
0000A580 303C 0000                  		move.w	#sfx_Ring,d0	; play ring sound
0000A584 0C78 0032 FE20             		cmpi.w	#50,(v_rings).w ; do you have < 100 rings?
0000A58A 6500                       		bcs.s	@playsnd	; if yes, branch
0000A58C 08F8 0001 FE1B             		bset	#1,(v_lifecount).w ; update lives counter
0000A592 6700                       		beq.s	@got100
0000A594 0C78 0064 FE20             		cmpi.w	#100,(v_rings).w ; do you have < 200 rings?
0000A59A 6500                       		bcs.s	@playsnd	; if yes, branch
0000A59C 08F8 0002 FE1B             		bset	#2,(v_lifecount).w ; update lives counter
0000A5A2 6600                       		bne.s	@playsnd
0000A5A4                            
0000A5A4                            	@got100:
0000A5A4 5238 FE12                  		addq.b	#1,(v_lives).w	; add 1 to the number of lives you have
0000A5A8 5238 FE1C                  		addq.b	#1,(f_lifecount).w ; update the lives counter
0000A5AC 303C 0000                  		move.w	#bgm_ExtraLife,d0 ; play extra life music
0000A5B0                            
0000A5B0                            	@playsnd:
0000A5B0 4EF9 0000 118A             		jmp	(PlaySound_Special).l
0000A5B6                            ; End of function CollectRing
0000A5B6                            
0000A5B6                            ; ===========================================================================
0000A5B6                            ; ---------------------------------------------------------------------------
0000A5B6                            ; Object 37 - rings flying out of Sonic	when he's hit
0000A5B6                            ; ---------------------------------------------------------------------------
0000A5B6                            
0000A5B6                            RingLoss:
0000A5B6 7000                       		moveq	#0,d0
0000A5B8 1028 0024                  		move.b	obRoutine(a0),d0
0000A5BC 323B 0000                  		move.w	RLoss_Index(pc,d0.w),d1
0000A5C0 4EFB 1000                  		jmp	RLoss_Index(pc,d1.w)
0000A5C4                            ; ===========================================================================
0000A5C4 0000                       RLoss_Index:	dc.w RLoss_Count-RLoss_Index
0000A5C6 0000                       		dc.w RLoss_Bounce-RLoss_Index
0000A5C8 0000                       		dc.w RLoss_Collect-RLoss_Index
0000A5CA 0000                       		dc.w RLoss_Sparkle-RLoss_Index
0000A5CC 0000                       		dc.w RLoss_Delete-RLoss_Index
0000A5CE                            ; ===========================================================================
0000A5CE                            
0000A5CE                            RLoss_Count:	; Routine 0
0000A5CE 2248                       		movea.l	a0,a1
0000A5D0 7A00                       		moveq	#0,d5
0000A5D2 3A38 FE20                  		move.w	(v_rings).w,d5	; check number of rings you have
0000A5D6 7064                       		moveq	#100,d0
0000A5D8 BA40                       		cmp.w	d0,d5		; do you have 32 or more?
0000A5DA 6500                       		bcs.s	@belowmax	; if not, branch
0000A5DC 3A00                       		move.w	d0,d5		; if yes, set d5 to 32
0000A5DE                            
0000A5DE                            	@belowmax:
0000A5DE 5345                       		subq.w	#1,d5
0000A5E0 383C 0288                  		move.w	#$288,d4
0000A5E4 6000                       		bra.s	@makerings
0000A5E6                            ; ===========================================================================
0000A5E6                            
0000A5E6                            	@loop:
0000A5E6 6100 0000                  		bsr.w	FindFreeObj
0000A5EA 6600 0000                  		bne.w	@resetcounter
0000A5EE                            
0000A5EE                            @makerings:
0000A5EE 137C 0000 0000             		move.b	#id_RingLoss,0(a1) ; load bouncing ring object
0000A5F4 5429 0024                  		addq.b	#2,obRoutine(a1)
0000A5F8 137C 0008 0016             		move.b	#8,obHeight(a1)
0000A5FE 137C 0008 0017             		move.b	#8,obWidth(a1)
0000A604 3368 0008 0008             		move.w	obX(a0),obX(a1)
0000A60A 3368 000C 000C             		move.w	obY(a0),obY(a1)
0000A610 237C 0000 0000 0004        		move.l	#Map_Ring,obMap(a1)
0000A618 337C 27B2 0002             		move.w	#$27B2,obGfx(a1)
0000A61E 137C 0004 0001             		move.b	#4,obRender(a1)
0000A624 137C 0003 0018             		move.b	#3,obPriority(a1)
0000A62A 137C 0047 0020             		move.b	#$47,obColType(a1)
0000A630 137C 0008 0019             		move.b	#8,obActWid(a1)
0000A636 11FC 00FF FEC6             		move.b	#-1,(v_ani3_time).w
0000A63C 4A44                       		tst.w	d4
0000A63E 6B00                       		bmi.s	@loc_9D62
0000A640 3004                       		move.w	d4,d0
0000A642 6100 81A8                  		bsr.w	CalcSine
0000A646 3404                       		move.w	d4,d2
0000A648 E04A                       		lsr.w	#8,d2
0000A64A E560                       		asl.w	d2,d0
0000A64C E561                       		asl.w	d2,d1
0000A64E 3400                       		move.w	d0,d2
0000A650 3601                       		move.w	d1,d3
0000A652 0604 0010                  		addi.b	#$10,d4
0000A656 6400                       		bcc.s	@loc_9D62
0000A658 0444 0080                  		subi.w	#$80,d4
0000A65C 6400                       		bcc.s	@loc_9D62
0000A65E 383C 0288                  		move.w	#$288,d4
0000A662                            
0000A662                            	@loc_9D62:
0000A662                            	;	move.w	d2,obVelX(a1)
0000A662 3343 0012                  		move.w	d3,obVelY(a1)
0000A666 4442                       		neg.w	d2
0000A668 4444                       		neg.w	d4
0000A66A                            	;	dbf	d5,@loop	; repeat for number of rings (max 31)
0000A66A                            
0000A66A                            @resetcounter:
0000A66A 31FC 0000 FE20             		move.w	#0,(v_rings).w	; reset number of rings to zero
0000A670 11FC 0080 FE1D             		move.b	#$80,(f_ringcount).w ; update ring counter
0000A676 11FC 0000 FE1B             		move.b	#0,(v_lifecount).w
0000A67C                            	;	sfx	sfx_RingLoss,0,0,0	; play ring loss sound
0000A67C                            
0000A67C                            RLoss_Bounce:	; Routine 2
0000A67C 1178 FEC7 001A             		move.b	(v_ani3_frame).w,obFrame(a0)
0000A682 6100 0000                  		bsr.w	SpeedToPos
0000A686 0668 0018 0012             		addi.w	#$18,obVelY(a0)
0000A68C 6B00                       		bmi.s	@chkdel
0000A68E 1038 FE0F                  		move.b	(v_vbla_byte).w,d0
0000A692 D007                       		add.b	d7,d0
0000A694 0200 0003                  		andi.b	#3,d0
0000A698 6600                       		bne.s	@chkdel
0000A69A                            	;	jsr	(ObjFloorDist).l
0000A69A 4A41                       		tst.w	d1
0000A69C 6A00                       		bpl.s	@chkdel
0000A69E D368 000C                  		add.w	d1,obY(a0)
0000A6A2 3028 0012                  		move.w	obVelY(a0),d0
0000A6A6 E440                       		asr.w	#2,d0
0000A6A8 9168 0012                  		sub.w	d0,obVelY(a0)
0000A6AC 4468 0012                  		neg.w	obVelY(a0)
0000A6B0                            
0000A6B0                            	@chkdel:
0000A6B0 4A38 FEC6                  		tst.b	(v_ani3_time).w
0000A6B4 6700                       		beq.s	RLoss_Delete
0000A6B6 3038 F72E                  		move.w	(v_limitbtm2).w,d0
0000A6BA 0640 00E0                  		addi.w	#$E0,d0
0000A6BE B068 000C                  		cmp.w	obY(a0),d0	; has object moved below level boundary?
0000A6C2 6500                       		bcs.s	RLoss_Delete	; if yes, branch
0000A6C4 6000 0000                  		bra.w	DisplaySprite
0000A6C8                            ; ===========================================================================
0000A6C8                            
0000A6C8                            RLoss_Collect:	; Routine 4
0000A6C8 5428 0024                  		addq.b	#2,obRoutine(a0)
0000A6CC 117C 0000 0020             		move.b	#0,obColType(a0)
0000A6D2 117C 0001 0018             		move.b	#1,obPriority(a0)
0000A6D8 6100 FE9C                  		bsr.w	CollectRing
0000A6DC                            
0000A6DC                            RLoss_Sparkle:	; Routine 6
0000A6DC 43F9 0000 0000             		lea	(Ani_Ring).l,a1
0000A6E2 6100 0000                  		bsr.w	AnimateSprite
0000A6E6 6000 0000                  		bra.w	DisplaySprite
0000A6EA                            ; ===========================================================================
0000A6EA                            
0000A6EA                            RLoss_Delete:	; Routine 8
0000A6EA 6000 0000                  		bra.w	DeleteObject
0000A6EA 6000 0000                  		bra.w	DeleteObject
0000A6EE                            		include	"_incObj\4B Giant Ring.asm"
0000A6EE                            ; ---------------------------------------------------------------------------
0000A6EE                            ; Object 4B - giant ring for entry to special stage
0000A6EE                            ; ---------------------------------------------------------------------------
0000A6EE                            
0000A6EE                            GiantRing:
0000A6EE 7000                       		moveq	#0,d0
0000A6F0 1028 0024                  		move.b	obRoutine(a0),d0
0000A6F4 323B 0000                  		move.w	GRing_Index(pc,d0.w),d1
0000A6F8 4EFB 1000                  		jmp	GRing_Index(pc,d1.w)
0000A6FC                            ; ===========================================================================
0000A6FC 0000                       GRing_Index:	dc.w GRing_Main-GRing_Index
0000A6FE 0000                       		dc.w GRing_Animate-GRing_Index
0000A700 0000                       		dc.w GRing_Collect-GRing_Index
0000A702 0000                       		dc.w GRing_Delete-GRing_Index
0000A704                            ; ===========================================================================
0000A704                            
0000A704                            GRing_Main:	; Routine 0
0000A704 217C 0000 0000 0004        		move.l	#Map_Null,obMap(a0)
0000A70C                            	;	move.w	#$2400,obGfx(a0)
0000A70C 0028 0004 0001             		ori.b	#4,obRender(a0)
0000A712 117C 0040 0019             		move.b	#$40,obActWid(a0)
0000A718 4A28 0001                  		tst.b	obRender(a0)
0000A71C 6A00                       		bpl.s	GRing_Animate
0000A71E                            ; ===========================================================================
0000A71E                            
0000A71E                            GRing_Okay:
0000A71E 5428 0024                  		addq.b	#2,obRoutine(a0)
0000A722 117C 0002 0018             		move.b	#2,obPriority(a0)
0000A728 117C 0052 0020             		move.b	#$52,obColType(a0)
0000A72E                            	;	move.w	#$C40,(v_gfxbigring).w	; Signal that Art_BigRing should be loaded ($C40 is the size of Art_BigRing)
0000A72E                            
0000A72E                            GRing_Animate:	; Routine 2
0000A72E 1178 FEC3 001A             		move.b	(v_ani1_frame).w,obFrame(a0)
0000A752 6000 0000                  		bra.w	DisplaySprite
0000A756                            ; ===========================================================================
0000A756                            
0000A756                            GRing_Collect:	; Routine 4
0000A756 5528 0024                  		subq.b	#2,obRoutine(a0)
0000A75A 117C 0000 0020             		move.b	#0,obColType(a0)
0000A760 6100 0000                  		bsr.w	FindFreeObj
0000A764 6600 0000                  		bne.w	GRing_PlaySnd
0000A768 137C 004A 0000             		move.b	#$4A,0(a1) ; load warp object
0000A76E 6000 0000                  		bra.w	DeleteObject
0000A772 3368 0008 0008             		move.w	obX(a0),obX(a1)
0000A778 3368 000C 000C             		move.w	obY(a0),obY(a1)
0000A77E 2348 003C                  		move.l	a0,$3C(a1)
0000A782 3038 D008                  		move.w	(v_player+obX).w,d0
0000A786 B068 0008                  		cmp.w	obX(a0),d0	; has Sonic come from the left?
0000A78A 6500                       		bcs.s	GRing_PlaySnd	; if yes, branch
0000A78C 08E9 0000 0001             		bset	#0,obRender(a1)	; reverse flash	object
0000A792                            
0000A792                            GRing_PlaySnd:
0000A79C 6090                       		bra.s	GRing_Animate
0000A79E                            ; ===========================================================================
0000A79E                            
0000A79E                            GRing_Delete:	; Routine 6
0000A79E 6000 0000                  		bra.w	DeleteObject
0000A79E 6000 0000                  		bra.w	DeleteObject
0000A7A2                            		include	"_incObj\7C Ring Flash.asm"
0000A7A2                            ; ---------------------------------------------------------------------------
0000A7A2                            ; Object 7C - flash effect when	you collect the	giant ring
0000A7A2                            ; ---------------------------------------------------------------------------
0000A7A2                            
0000A7A2                            RingFlash:
0000A7A2 7000                       		moveq	#0,d0
0000A7A4 1028 0024                  		move.b	obRoutine(a0),d0
0000A7A8 323B 0000                  		move.w	Flash_Index(pc,d0.w),d1
0000A7AC 4EFB 1000                  		jmp	Flash_Index(pc,d1.w)
0000A7B0                            ; ===========================================================================
0000A7B0 0000                       Flash_Index:	dc.w Flash_Main-Flash_Index
0000A7B2 0000                       		dc.w Flash_ChkDel-Flash_Index
0000A7B4 0000                       		dc.w Flash_Delete-Flash_Index
0000A7B6                            ; ===========================================================================
0000A7B6                            
0000A7B6                            Flash_Main:	; Routine 0
0000A7B6 5428 0024                  		addq.b	#2,obRoutine(a0)
0000A7BA 217C 0000 0000 0004        		move.l	#Map_Flash,obMap(a0)
0000A7C2 317C 2462 0002             		move.w	#$2462,obGfx(a0)
0000A7C8 0028 0004 0001             		ori.b	#4,obRender(a0)
0000A7CE 117C 0000 0018             		move.b	#0,obPriority(a0)
0000A7D4 117C 0020 0019             		move.b	#$20,obActWid(a0)
0000A7DA 117C 00FF 001A             		move.b	#$FF,obFrame(a0)
0000A7E0                            
0000A7E0                            Flash_ChkDel:	; Routine 2
0000A7E0 6100                       		bsr.s	Flash_Collect
0000A800 6000 0000                  		bra.w	DisplaySprite
0000A804                            
0000A804                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000A804                            
0000A804                            
0000A804                            Flash_Collect:
0000A804 5328 001E                  		subq.b	#1,obTimeFrame(a0)
0000A808 6A00                       		bpl.s	locret_9F76
0000A80A 117C 0001 001E             		move.b	#1,obTimeFrame(a0)
0000A810 5228 001A                  		addq.b	#1,obFrame(a0)
0000A814 0C28 0008 001A             		cmpi.b	#8,obFrame(a0)	; has animation	finished?
0000A81A 6400                       		bcc.s	Flash_End	; if yes, branch
0000A81C 0C28 0003 001A             		cmpi.b	#3,obFrame(a0)	; is 3rd frame displayed?
0000A822 6600                       		bne.s	locret_9F76	; if not, branch
0000A824 2268 003C                  		movea.l	$3C(a0),a1	; get parent object address
0000A828 137C 0006 0024             		move.b	#6,obRoutine(a1) ; delete parent object
0000A82E 11FC 0000 D01C             		move.b	#id_Null,(v_player+obAnim).w ; make Sonic invisible
0000A834 11FC 0001 F7CD             		move.b	#1,(f_bigring).w ; stop	Sonic getting bonuses
0000A83A 4238 FE2D                  		clr.b	(v_invinc).w	; remove invincibility
0000A83E 4238 FE2C                  		clr.b	(v_shield).w	; remove shield
0000A842                            
0000A842                            locret_9F76:
0000A842 4E75                       		rts	
0000A844                            ; ===========================================================================
0000A844                            
0000A844                            Flash_End:
0000A844 5428 0024                  		addq.b	#2,obRoutine(a0)
0000A848                            	;	move.w	#0,(v_player).w ; remove Sonic object
0000A848 588F                       		addq.l	#4,sp
0000A84A 4E75                       		rts	
0000A84C                            ; End of function Flash_Collect
0000A84C                            
0000A84C                            ; ===========================================================================
0000A84C                            
0000A84C                            Flash_Delete:	; Routine 4
0000A84C 6000 0000                  		bra.w	DeleteObject
0000A84C 6000 0000                  		bra.w	DeleteObject
0000A850                            		include	"_incObj\04 Key.asm"
0000A850                            ; ---------------------------------------------------------------------------
0000A850                            ; Object 25 - Keys
0000A850                            ; ---------------------------------------------------------------------------
0000A850                            
0000A850                            Key:
0000A850 7000                       		moveq	#0,d0
0000A852 1028 0024                  		move.b	obRoutine(a0),d0
0000A856 323B 0000                  		move.w	Key_Index(pc,d0.w),d1
0000A85A 4EFB 1000                  		jmp	Key_Index(pc,d1.w)
0000A85E                            ; ===========================================================================
0000A85E                            Key_Index:
0000A85E 0000                       ptr_Key_Main:		dc.w Key_Main-Key_Index
0000A860 0000                       ptr_Key_Animate:	dc.w Key_Animate-Key_Index
0000A862 0000                       ptr_Key_Collect:	dc.w Key_Collect-Key_Index
0000A864 0000                       ptr_Key_Sparkle:	dc.w Key_Sparkle-Key_Index
0000A866 0000                       ptr_Key_Delete:	dc.w Key_Delete-Key_Index
0000A868                            
0000A868 =00000000                  id_Key_Main:		equ ptr_Key_Main-Key_Index	; 0
0000A868 =00000002                  id_Key_Animate:		equ ptr_Key_Animate-Key_Index	; 2
0000A868 =00000004                  id_Key_Collect:		equ ptr_Key_Collect-Key_Index	; 4
0000A868 =00000006                  id_Key_Sparkle:		equ ptr_Key_Sparkle-Key_Index	; 6
0000A868 =00000008                  id_Key_Delete:		equ ptr_Key_Delete-Key_Index	; 8
0000A868                            ; ---------------------------------------------------------------------------
0000A868                            ; Distances between Keys (format: horizontal, vertical)
0000A868                            ; ---------------------------------------------------------------------------
0000A868 1000                       Key_PosData:	dc.b $10, 0		; horizontal tight
0000A86A 1800                       		dc.b $18, 0		; horizontal normal
0000A86C 2000                       		dc.b $20, 0		; horizontal wide
0000A86E 0010                       		dc.b 0,	$10		; vertical tight
0000A870 0018                       		dc.b 0,	$18		; vertical normal
0000A872 0020                       		dc.b 0,	$20		; vertical wide
0000A874 1010                       		dc.b $10, $10		; diagonal
0000A876 1818                       		dc.b $18, $18
0000A878 2020                       		dc.b $20, $20
0000A87A F010                       		dc.b $F0, $10
0000A87C E818                       		dc.b $E8, $18
0000A87E E020                       		dc.b $E0, $20
0000A880 1008                       		dc.b $10, 8
0000A882 1810                       		dc.b $18, $10
0000A884 F008                       		dc.b $F0, 8
0000A886 E810                       		dc.b $E8, $10
0000A888                            ; ===========================================================================
0000A888                            
0000A888                            Key_Main:	; Routine 0
0000A888 45F8 FC00                  		lea	(v_objstate).w,a2
0000A88C 7000                       		moveq	#0,d0
0000A88E 1028 0023                  		move.b	obRespawnNo(a0),d0
0000A892 45F2 0002                  		lea	2(a2,d0.w),a2
0000A896 1812                       		move.b	(a2),d4
0000A898 1228 0028                  		move.b	obSubtype(a0),d1
0000A89C 1001                       		move.b	d1,d0
0000A89E 0241 0007                  		andi.w	#7,d1
0000A8A2 0C41 0007                  		cmpi.w	#7,d1
0000A8A6 6600                       		bne.s	loc_9b80Copy
0000A8A8 7206                       		moveq	#6,d1
0000A8AA                            
0000A8AA                            	loc_9b80Copy:
0000A8AA 4841                       		swap	d1
0000A8AC 323C 0000                  		move.w	#0,d1
0000A8B0 E808                       		lsr.b	#4,d0
0000A8B2 D040                       		add.w	d0,d0
0000A8B4 1A3B 00B2                  		move.b	Key_PosData(pc,d0.w),d5 ; load Key spacing data
0000A8B8 4885                       		ext.w	d5
0000A8BA 1C3B 00AD                  		move.b	Key_PosData+1(pc,d0.w),d6
0000A8BE 4886                       		ext.w	d6
0000A8C0 2248                       		movea.l	a0,a1
0000A8C2 3428 0008                  		move.w	obX(a0),d2
0000A8C6 3628 000C                  		move.w	obY(a0),d3
0000A8CA E20C                       		lsr.b	#1,d4
0000A8CC 6500                       		bcs.s	loc_9c02Copy
0000A8CE 0892 0007                  		bclr	#7,(a2)
0000A8D2 6000                       		bra.s	loc_9bbaCopy
0000A8D4                            ; ===========================================================================
0000A8D4                            
0000A8D4                            Key_MakeKeys:
0000A8D4 4841                       		swap	d1
0000A8D6 E20C                       		lsr.b	#1,d4
0000A8D8 6500                       		bcs.s	loc_9c02Copy
0000A8DA 0892 0007                  		bclr	#7,(a2)
0000A8DE 6100 0000                  		bsr.w	FindFreeObj
0000A8E2 6600                       		bne.s	loc_9c0eCopy
0000A8E4                            
0000A8E4                            loc_9bbaCopy:
0000A8E4 137C 0004 0000             		move.b	#$04,0(a1)	; load Key object
0000A8EA 5429 0024                  		addq.b	#2,obRoutine(a1)
0000A8EE 3342 0008                  		move.w	d2,obX(a1)	; set x-axis position based on d2
0000A8F2 3368 0008 0032             		move.w	obX(a0),$32(a1)
0000A8F8 3343 000C                  		move.w	d3,obY(a1)	; set y-axis position based on d3
0000A8FC 237C 0000 0000 0004        		move.l	#Map_Key,obMap(a1)
0000A904 337C 26C0 0002             		move.w	#$26C0,obGfx(a1)
0000A90A 137C 0004 0001             		move.b	#4,obRender(a1)
0000A910 137C 0002 0018             		move.b	#2,obPriority(a1)
0000A916 137C 0047 0020             		move.b	#$47,obColType(a1)
0000A91C 137C 0008 0019             		move.b	#8,obActWid(a1)
0000A922 1368 0023 0023             		move.b	obRespawnNo(a0),obRespawnNo(a1)
0000A928 1341 0034                  		move.b	d1,$34(a1)
0000A92C                            
0000A92C                            loc_9c02Copy:
0000A92C 5241                       		addq.w	#1,d1
0000A92E D445                       		add.w	d5,d2		; add Key spacing value to d2
0000A930 D646                       		add.w	d6,d3		; add Key spacing value to d3
0000A932 4841                       		swap	d1
0000A934 51C9 FF9E                  		dbf	d1,Key_MakeKeys ; repeat for	number of Keys
0000A938                            
0000A938                            loc_9c0eCopy:
0000A938 0812 0000                  		btst	#0,(a2)
0000A93C 6600 0000                  		bne.w	DeleteObject
0000A940                            
0000A940                            Key_Animate:	; Routine 2
0000A940                            	;	move.b	(v_ani1_frame).w,obFrame(a0) ; set frame
0000A940 6100 0000                  		bsr.w	DisplaySprite
0000A944                            	;	out_of_range.s	Key_Delete,$32(a0)
0000A944 4E75                       		rts	
0000A946                            ; ===========================================================================
0000A946                            
0000A946                            Key_Collect:	; Routine 4
0000A946 5428 0024                  		addq.b	#2,obRoutine(a0)
0000A94A 117C 0000 0020             		move.b	#0,obColType(a0)
0000A950 117C 0001 0018             		move.b	#1,obPriority(a0)
0000A956 6100 0000                  		bsr.w	CollectKey
0000A95A 45F8 FC00                  		lea	(v_objstate).w,a2
0000A95E 7000                       		moveq	#0,d0
0000A960 1028 0023                  		move.b	obRespawnNo(a0),d0
0000A964 1228 0034                  		move.b	$34(a0),d1
0000A968 03F2 0002                  		bset	d1,2(a2,d0.w)
0000A96C                            
0000A96C                            Key_Sparkle:	; Routine 6
0000A96C                            	;	lea	(Ani_Ring).l,a1
0000A96C                            	;	bsr.w	AnimateSprite
0000A96C                            	;	bra.w	DisplaySprite
0000A96C                            ; ===========================================================================
0000A96C                            
0000A96C                            Key_Delete:	; Routine 8
0000A96C 6000 0000                  		bra.w	DeleteObject
0000A970                            
0000A970                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000A970                            
0000A970                            
0000A970                            CollectKey:
0000A970                            	;	addq.w	#1,(v_emeralds).w	; add 1 to Keys
0000A970                            	;	ori.b	#1,(f_Keycount).w ; update the Keys counter
0000A970 303C 0000                  		move.w	#sfx_Ring,d0	; play Key sound
0000A974 4EF9 0000 118A             		jmp	(PlaySound_Special).l
0000A97A                            ; End of function CollectKey
0000A97A                            ; End of function CollectKey
0000A97A                            
0000A97A                            		include	"_anim\Rings.asm"
0000A97A                            ; ---------------------------------------------------------------------------
0000A97A                            ; Animation script - ring
0000A97A                            ; ---------------------------------------------------------------------------
0000A97A 0000                       Ani_Ring:	dc.w @ring-Ani_Ring
0000A97C 0504 0506 07FC             @ring:		dc.b 5,	4, 5, 6, 7, afRoutine
0000A982                            		even
0000A982                            		even
0000A982                            Map_Ring:	include	"_maps\Rings.asm"
0000A982                            ; ---------------------------------------------------------------------------
0000A982                            ; Sprite mappings - rings
0000A982                            ; ---------------------------------------------------------------------------
0000A982                            Map_Ring_internal:
0000A982 0000                       		dc.w @front-Map_Ring_internal
0000A984 0000                       		dc.w @angle1-Map_Ring_internal
0000A986 0000                       		dc.w @edge-Map_Ring_internal
0000A988 0000                       		dc.w @angle2-Map_Ring_internal
0000A98A 0000                       		dc.w @sparkle1-Map_Ring_internal
0000A98C 0000                       		dc.w @sparkle2-Map_Ring_internal
0000A98E 0000                       		dc.w @sparkle3-Map_Ring_internal
0000A990 0000                       		dc.w @sparkle4-Map_Ring_internal
0000A992 01                         @front:		dc.b 1
0000A993 F805 0000 F8               		dc.b $F8, 5, 0,	0, $F8	; ring front
0000A998 01                         @angle1:	dc.b 1
0000A999 F805 0004 F8               		dc.b $F8, 5, 0,	4, $F8	; ring angle
0000A99E 01                         @edge:		dc.b 1
0000A99F F801 0008 FC               		dc.b $F8, 1, 0,	8, $FC	; ring perpendicular
0000A9A4 01                         @angle2:	dc.b 1
0000A9A5 F805 0804 F8               		dc.b $F8, 5, 8,	4, $F8	; ring angle
0000A9AA 01                         @sparkle1:	dc.b 1
0000A9AB F805 000A F8               		dc.b $F8, 5, 0,	$A, $F8	; sparkle
0000A9B0 01                         @sparkle2:	dc.b 1
0000A9B1 F805 180A F8               		dc.b $F8, 5, $18, $A, $F8 ; sparkle
0000A9B6 01                         @sparkle3:	dc.b 1
0000A9B7 F805 080A F8               		dc.b $F8, 5, 8,	$A, $F8	;sparkle
0000A9BC 01                         @sparkle4:	dc.b 1
0000A9BD F805 100A F8               		dc.b $F8, 5, $10, $A, $F8 ; sparkle
0000A9C2                            		even
0000A9C2                            		even
0000A9C2                            Map_Key:	include	"_maps\Key.asm"
0000A9C2                            ; ================================================================================
0000A9C2                            ; Sprite Mappings - generated by Flex 2 Thu May 27 2021 20:36:28 GMT-0400 (Eastern Daylight Time)
0000A9C2                            ; ================================================================================
0000A9C2                            
0000A9C2                            DATAEXCOV4G3JLL:
0000A9C2 0000 0000                  	dc.w DATAEXCOV4G3JLL_0-DATAEXCOV4G3JLL, DATAEXCOV4G3JLL_1-DATAEXCOV4G3JLL
0000A9C6 0000 0000                  	dc.w DATAEXCOV4G3JLL_2-DATAEXCOV4G3JLL, DATAEXCOV4G3JLL_3-DATAEXCOV4G3JLL
0000A9CA 0000 0000                  	dc.w DATAEXCOV4G3JLL_4-DATAEXCOV4G3JLL, DATAEXCOV4G3JLL_5-DATAEXCOV4G3JLL
0000A9CE 0000 0000                  	dc.w DATAEXCOV4G3JLL_6-DATAEXCOV4G3JLL, DATAEXCOV4G3JLL_7-DATAEXCOV4G3JLL
0000A9D2 01                         DATAEXCOV4G3JLL_0: dc.b $1
0000A9D3 F805 0000 F8               	dc.b $F8, $5, $0, $0, $F8
0000A9D8 01                         DATAEXCOV4G3JLL_1: dc.b $1
0000A9D9 F805 0004 F8               	dc.b $F8, $5, $0, $4, $F8
0000A9DE 01                         DATAEXCOV4G3JLL_2: dc.b $1
0000A9DF F801 0008 FC               	dc.b $F8, $1, $0, $8, $FC
0000A9E4 01                         DATAEXCOV4G3JLL_3: dc.b $1
0000A9E5 F805 0804 F8               	dc.b $F8, $5, $8, $4, $F8
0000A9EA 01                         DATAEXCOV4G3JLL_4: dc.b $1
0000A9EB F805 000A F8               	dc.b $F8, $5, $0, $A, $F8
0000A9F0 01                         DATAEXCOV4G3JLL_5: dc.b $1
0000A9F1 F805 180A F8               	dc.b $F8, $5, $18, $A, $F8
0000A9F6 01                         DATAEXCOV4G3JLL_6: dc.b $1
0000A9F7 F805 080A F8               	dc.b $F8, $5, $8, $A, $F8
0000A9FC 01                         DATAEXCOV4G3JLL_7: dc.b $1
0000A9FD F805 100A F8               	dc.b $F8, $5, $10, $A, $F8
0000AA02                            	even
0000AA02                            	even
0000AA02                            Map_GRing:	include	"_maps\Giant Ring.asm"
0000AA02                            ; ---------------------------------------------------------------------------
0000AA02                            ; Sprite mappings - giant ring
0000AA02                            ; ---------------------------------------------------------------------------
0000AA02                            Map_GRing_internal:
0000AA02 0000                       		dc.w byte_9FDA-Map_GRing_internal
0000AA04 0000                       		dc.w byte_A00D-Map_GRing_internal
0000AA06 0000                       		dc.w byte_A036-Map_GRing_internal
0000AA08 0000                       		dc.w byte_A04B-Map_GRing_internal
0000AA0A 0A                         byte_9FDA:	dc.b $A
0000AA0B E008 0000 E8               		dc.b $E0, 8, 0,	0, $E8	; ring front
0000AA10 E008 0003 00               		dc.b $E0, 8, 0,	3, 0
0000AA15 E80C 0006 E0               		dc.b $E8, $C, 0, 6, $E0
0000AA1A E80C 000A 00               		dc.b $E8, $C, 0, $A, 0
0000AA1F F007 000E E0               		dc.b $F0, 7, 0,	$E, $E0
0000AA24 F007 0016 10               		dc.b $F0, 7, 0,	$16, $10
0000AA29 100C 001E E0               		dc.b $10, $C, 0, $1E, $E0
0000AA2E 100C 0022 00               		dc.b $10, $C, 0, $22, 0
0000AA33 1808 0026 E8               		dc.b $18, 8, 0,	$26, $E8
0000AA38 1808 0029 00               		dc.b $18, 8, 0,	$29, 0
0000AA3D 08                         byte_A00D:	dc.b 8
0000AA3E E00C 002C F0               		dc.b $E0, $C, 0, $2C, $F0 ; ring angle
0000AA43 E808 0030 E8               		dc.b $E8, 8, 0,	$30, $E8
0000AA48 E809 0033 00               		dc.b $E8, 9, 0,	$33, 0
0000AA4D F007 0039 E8               		dc.b $F0, 7, 0,	$39, $E8
0000AA52 F805 0041 08               		dc.b $F8, 5, 0,	$41, 8
0000AA57 0809 0045 00               		dc.b 8,	9, 0, $45, 0
0000AA5C 1008 004B E8               		dc.b $10, 8, 0,	$4B, $E8
0000AA61 180C 004E F0               		dc.b $18, $C, 0, $4E, $F0
0000AA66 04                         byte_A036:	dc.b 4
0000AA67 E007 0052 F4               		dc.b $E0, 7, 0,	$52, $F4 ; ring perpendicular
0000AA6C E003 0852 04               		dc.b $E0, 3, 8,	$52, 4
0000AA71 0007 005A F4               		dc.b 0,	7, 0, $5A, $F4
0000AA76 0003 085A 04               		dc.b 0,	3, 8, $5A, 4
0000AA7B 08                         byte_A04B:	dc.b 8
0000AA7C E00C 082C F0               		dc.b $E0, $C, 8, $2C, $F0 ; ring angle
0000AA81 E808 0830 00               		dc.b $E8, 8, 8,	$30, 0
0000AA86 E809 0833 E8               		dc.b $E8, 9, 8,	$33, $E8
0000AA8B F007 0839 08               		dc.b $F0, 7, 8,	$39, 8
0000AA90 F805 0841 E8               		dc.b $F8, 5, 8,	$41, $E8
0000AA95 0809 0845 E8               		dc.b 8,	9, 8, $45, $E8
0000AA9A 1008 084B 00               		dc.b $10, 8, 8,	$4B, 0
0000AA9F 180C 084E F0               		dc.b $18, $C, 8, $4E, $F0
0000AAA4                            		even
0000AAA4                            		even
0000AAA4 0000 0000                  Map_Null:	dc.b	0, 0, 0, 0
0000AAA8 0000 0000                  		dc.b	0, 0, 0, 0
0000AAAC 0000 0000                  		dc.b	0, 0, 0, 0
0000AAB0 0000 0000                  		dc.b	0, 0, 0, 0
0000AAB4 0000 0000                  		dc.b	0, 0, 0, 0
0000AAB8                            		even
0000AAB8                            Map_Flash:	include	"_maps\Ring Flash.asm"
0000AAB8                            ; ---------------------------------------------------------------------------
0000AAB8                            ; Sprite mappings - flash effect when you collect the giant ring
0000AAB8                            ; ---------------------------------------------------------------------------
0000AAB8                            Map_Flash_internal:
0000AAB8 0000                       		dc.w byte_A084-Map_Flash_internal
0000AABA 0000                       		dc.w byte_A08F-Map_Flash_internal
0000AABC 0000                       		dc.w byte_A0A4-Map_Flash_internal
0000AABE 0000                       		dc.w byte_A0B9-Map_Flash_internal
0000AAC0 0000                       		dc.w byte_A0CE-Map_Flash_internal
0000AAC2 0000                       		dc.w byte_A0E3-Map_Flash_internal
0000AAC4 0000                       		dc.w byte_A0F8-Map_Flash_internal
0000AAC6 0000                       		dc.w byte_A103-Map_Flash_internal
0000AAC8 02                         byte_A084:	dc.b 2
0000AAC9 E00F 0000 00               		dc.b $E0, $F, 0, 0, 0
0000AACE 000F 1000 00               		dc.b 0,	$F, $10, 0, 0
0000AAD3 04                         byte_A08F:	dc.b 4
0000AAD4 E00F 0010 F0               		dc.b $E0, $F, 0, $10, $F0
0000AAD9 E007 0020 10               		dc.b $E0, 7, 0,	$20, $10
0000AADE 000F 1010 F0               		dc.b 0,	$F, $10, $10, $F0
0000AAE3 0007 1020 10               		dc.b 0,	7, $10,	$20, $10
0000AAE8 04                         byte_A0A4:	dc.b 4
0000AAE9 E00F 0028 E8               		dc.b $E0, $F, 0, $28, $E8
0000AAEE E00B 0038 08               		dc.b $E0, $B, 0, $38, 8
0000AAF3 000F 1028 E8               		dc.b 0,	$F, $10, $28, $E8
0000AAF8 000B 1038 08               		dc.b 0,	$B, $10, $38, 8
0000AAFD 04                         byte_A0B9:	dc.b 4
0000AAFE E00F 0834 E0               		dc.b $E0, $F, 8, $34, $E0
0000AB03 E00F 0034 00               		dc.b $E0, $F, 0, $34, 0
0000AB08 000F 1834 E0               		dc.b 0,	$F, $18, $34, $E0
0000AB0D 000F 1034 00               		dc.b 0,	$F, $10, $34, 0
0000AB12 04                         byte_A0CE:	dc.b 4
0000AB13 E00B 0838 E0               		dc.b $E0, $B, 8, $38, $E0
0000AB18 E00F 0828 F8               		dc.b $E0, $F, 8, $28, $F8
0000AB1D 000B 1838 E0               		dc.b 0,	$B, $18, $38, $E0
0000AB22 000F 1828 F8               		dc.b 0,	$F, $18, $28, $F8
0000AB27 04                         byte_A0E3:	dc.b 4
0000AB28 E007 0820 E0               		dc.b $E0, 7, 8,	$20, $E0
0000AB2D E00F 0810 F0               		dc.b $E0, $F, 8, $10, $F0
0000AB32 0007 1820 E0               		dc.b 0,	7, $18,	$20, $E0
0000AB37 000F 1810 F0               		dc.b 0,	$F, $18, $10, $F0
0000AB3C 02                         byte_A0F8:	dc.b 2
0000AB3D E00F 0800 E0               		dc.b $E0, $F, 8, 0, $E0
0000AB42 000F 1800 E0               		dc.b 0,	$F, $18, 0, $E0
0000AB47 04                         byte_A103:	dc.b 4
0000AB48 E00F 0044 E0               		dc.b $E0, $F, 0, $44, $E0
0000AB4D E00F 0844 00               		dc.b $E0, $F, 8, $44, 0
0000AB52 000F 1044 E0               		dc.b 0,	$F, $10, $44, $E0
0000AB57 000F 1844 00               		dc.b 0,	$F, $18, $44, 0
0000AB5C                            		even
0000AB5C                            		even
0000AB5C                            		include	"_incObj\26 Monitor.asm"
0000AB5C                            ; ---------------------------------------------------------------------------
0000AB5C                            ; Object 26 - monitors
0000AB5C                            ; ---------------------------------------------------------------------------
0000AB5C                            
0000AB5C                            Monitor:
0000AB5C 7000                       		moveq	#0,d0
0000AB5E 1028 0024                  		move.b	obRoutine(a0),d0
0000AB62 323B 0000                  		move.w	Mon_Index(pc,d0.w),d1
0000AB66 4EFB 1000                  		jmp	Mon_Index(pc,d1.w)
0000AB6A                            ; ===========================================================================
0000AB6A 0000                       Mon_Index:	dc.w Mon_Main-Mon_Index
0000AB6C 0000                       		dc.w Mon_Solid-Mon_Index
0000AB6E 0000                       		dc.w Mon_BreakOpen-Mon_Index
0000AB70 0000                       		dc.w Mon_Animate-Mon_Index
0000AB72 0000                       		dc.w Mon_Display-Mon_Index
0000AB74                            ; ===========================================================================
0000AB74                            
0000AB74                            Mon_Main:	; Routine 0
0000AB74 5428 0024                  		addq.b	#2,obRoutine(a0)
0000AB78 117C 000D 0016             		move.b	#$D,obHeight(a0)
0000AB7E 117C 000D 0017             		move.b	#$D,obWidth(a0)
0000AB84 217C 0000 0000 0004        		move.l	#Map_Monitor,obMap(a0)
0000AB8C 317C 0680 0002             		move.w	#$680,obGfx(a0)
0000AB92 117C 0004 0001             		move.b	#4,obRender(a0)
0000AB98 117C 0003 0018             		move.b	#3,obPriority(a0)
0000AB9E 117C 000E 0019             		move.b	#$E,obActWid(a0)
0000ABA4 45F8 FC00                  		lea	(v_objstate).w,a2
0000ABA8 7000                       		moveq	#0,d0
0000ABAA 1028 0023                  		move.b	obRespawnNo(a0),d0
0000ABAE 08B2 0007 0002             		bclr	#7,2(a2,d0.w)
0000ABB4 0832 0000 0002             		btst	#0,2(a2,d0.w)	; has monitor been broken?
0000ABBA 6700                       		beq.s	@notbroken	; if not, branch
0000ABBC 117C 0008 0024             		move.b	#8,obRoutine(a0) ; run "Mon_Display" routine
0000ABC2 117C 000B 001A             		move.b	#$B,obFrame(a0)	; use broken monitor frame
0000ABC8 4E75                       		rts	
0000ABCA                            ; ===========================================================================
0000ABCA                            
0000ABCA                            	@notbroken:
0000ABCA 117C 0046 0020             		move.b	#$46,obColType(a0)
0000ABD0 1168 0028 001C             		move.b	obSubtype(a0),obAnim(a0)
0000ABD6                            
0000ABD6                            Mon_Solid:	; Routine 2
0000ABD6 1028 0025                  		move.b	ob2ndRout(a0),d0 ; is monitor set to fall?
0000ABDA 6700                       		beq.s	@normal		; if not, branch
0000ABDC 5500                       		subq.b	#2,d0
0000ABDE 6600                       		bne.s	@fall
0000ABE0                            
0000ABE0                            		; 2nd Routine 2
0000ABE0 7200                       		moveq	#0,d1
0000ABE2 1228 0019                  		move.b	obActWid(a0),d1
0000ABE6 0641 000B                  		addi.w	#$B,d1
0000ABEA 6100 D00E                  		bsr.w	ExitPlatform
0000ABEE 0829 0003 0022             		btst	#3,obStatus(a1) ; is Sonic on top of the monitor?
0000ABF4 6600 0000                  		bne.w	@ontop		; if yes, branch
0000ABF8 4228 0025                  		clr.b	ob2ndRout(a0)
0000ABFC 6000 0000                  		bra.w	Mon_Animate
0000AC00                            ; ===========================================================================
0000AC00                            
0000AC00                            	@ontop:
0000AC00 363C 0010                  		move.w	#$10,d3
0000AC04 3428 0008                  		move.w	obX(a0),d2
0000AC08 6100 D552                  		bsr.w	MvSonicOnPtfm
0000AC0C 6000 0000                  		bra.w	Mon_Animate
0000AC10                            ; ===========================================================================
0000AC10                            
0000AC10                            @fall:		; 2nd Routine 4
0000AC10 6000 0000                  		bra.w	Mon_BreakOpen
0000AC14 4E75                       		rts
0000AC16 6100 0000                  		bsr.w	ObjectFall
0000AC1A 4EB9 0000 0000             		jsr	(ObjFloorDist).l
0000AC20 4A41                       		tst.w	d1
0000AC22 6A00 0000                  		bpl.w	Mon_Animate
0000AC26 D368 000C                  		add.w	d1,obY(a0)
0000AC2A 4268 0012                  		clr.w	obVelY(a0)
0000AC2E 4228 0025                  		clr.b	ob2ndRout(a0)
0000AC32 6000 0000                  		bra.w	Mon_Animate
0000AC36                            ; ===========================================================================
0000AC36                            
0000AC36                            @normal:	; 2nd Routine 0
0000AC36 323C 001A                  		move.w	#$1A,d1
0000AC3A 343C 000F                  		move.w	#$F,d2
0000AC3E 6100 0000                  		bsr.w	Mon_SolidSides
0000AC42 6700 0000                  		beq.w	loc_A25C
0000AC46 4A69 0012                  		tst.w	obVelY(a1)
0000AC4A 6B00                       		bmi.s	loc_A20A
0000AC4C 0C29 0000 001C             		cmpi.b	#id_Roll,obAnim(a1) ; is Sonic rolling?
0000AC52 6700                       		beq.s	loc_A25C	; if yes, branch
0000AC54                            
0000AC54                            loc_A20A:
0000AC54 4A41                       		tst.w	d1
0000AC56 6A00                       		bpl.s	loc_A220
0000AC58 9769 000C                  		sub.w	d3,obY(a1)
0000AC5C 6100 CE8A                  		bsr.w	loc_74AE
0000AC60 117C 0002 0025             		move.b	#2,ob2ndRout(a0)
0000AC66 6000 0000                  		bra.w	Mon_Animate
0000AC6A                            ; ===========================================================================
0000AC6A                            
0000AC6A                            loc_A220:
0000AC6A 4A40                       		tst.w	d0
0000AC6C 6700 0000                  		beq.w	loc_A246
0000AC70 6B00                       		bmi.s	loc_A230
0000AC72 4A69 0010                  		tst.w	obVelX(a1)
0000AC76 6B00                       		bmi.s	loc_A246
0000AC78 6000                       		bra.s	loc_A236
0000AC7A                            ; ===========================================================================
0000AC7A                            
0000AC7A                            loc_A230:
0000AC7A 4A69 0010                  		tst.w	obVelX(a1)
0000AC7E 6A00                       		bpl.s	loc_A246
0000AC80                            
0000AC80                            loc_A236:
0000AC80 9169 0008                  		sub.w	d0,obX(a1)
0000AC84 337C 0000 0014             		move.w	#0,obInertia(a1)
0000AC8A 337C 0000 0010             		move.w	#0,obVelX(a1)
0000AC90                            
0000AC90                            loc_A246:
0000AC90 0829 0001 0022             		btst	#1,obStatus(a1)
0000AC96 6600                       		bne.s	loc_A26A
0000AC98 08E9 0005 0022             		bset	#5,obStatus(a1)
0000AC9E 08E8 0005 0022             		bset	#5,obStatus(a0)
0000ACA4 6000                       		bra.s	Mon_Animate
0000ACA6                            ; ===========================================================================
0000ACA6                            
0000ACA6                            loc_A25C:
0000ACA6 0828 0005 0022             		btst	#5,obStatus(a0)
0000ACAC 6700                       		beq.s	Mon_Animate
0000ACAE 337C 0001 001C             		move.w	#1,obAnim(a1)	; clear obAnim and set obNextAni to 1
0000ACB4                            
0000ACB4                            loc_A26A:
0000ACB4 08A8 0005 0022             		bclr	#5,obStatus(a0)
0000ACBA 08A9 0005 0022             		bclr	#5,obStatus(a1)
0000ACC0                            
0000ACC0                            Mon_Animate:	; Routine 6
0000ACC0 43F9 0000 0000             		lea	(Ani_Monitor).l,a1
0000ACC6 6100 0000                  		bsr.w	AnimateSprite
0000ACCA                            
0000ACCA                            Mon_Display:	; Routine 8
0000ACCA 6100 0000                  		bsr.w	DisplaySprite
0000ACEC 4E75                       		rts	
0000ACEE                            ; ===========================================================================
0000ACEE                            
0000ACEE                            Mon_BreakOpen:	; Routine 4
0000ACEE 5428 0024                  		addq.b	#2,obRoutine(a0)
0000ACF2 117C 0000 0020             		move.b	#0,obColType(a0)
0000ACF8 6100 0000                  		bsr.w	FindFreeObj
0000ACFC 6600                       		bne.s	Mon_Explode
0000ACFE 137C 0000 0000             		move.b	#id_PowerUp,0(a1) ; load monitor contents object
0000AD04 3368 0008 0008             		move.w	obX(a0),obX(a1)
0000AD0A 3368 000C 000C             		move.w	obY(a0),obY(a1)
0000AD10 1368 001C 001C             		move.b	obAnim(a0),obAnim(a1)
0000AD16                            
0000AD16                            Mon_Explode:
0000AD16 6100 0000                  		bsr.w	FindFreeObj
0000AD1A 6600                       		bne.s	@fail
0000AD1C 137C 0000 0000             		move.b	#id_ExplosionItem,0(a1) ; load explosion object
0000AD22 5429 0024                  		addq.b	#2,obRoutine(a1) ; don't create an animal
0000AD26 3368 0008 0008             		move.w	obX(a0),obX(a1)
0000AD2C 3368 000C 000C             		move.w	obY(a0),obY(a1)
0000AD32                            
0000AD32                            	@fail:
0000AD32 45F8 FC00                  		lea	(v_objstate).w,a2
0000AD36 7000                       		moveq	#0,d0
0000AD38 1028 0023                  		move.b	obRespawnNo(a0),d0
0000AD3C 08F2 0000 0002             		bset	#0,2(a2,d0.w)
0000AD42 117C 0009 001C             		move.b	#9,obAnim(a0)	; set monitor type to broken
0000AD48 6000 0000                  		bra.w	DisplaySprite
0000AD48 6000 0000                  		bra.w	DisplaySprite
0000AD4C                            		include	"_incObj\2E Monitor Content Power-Up.asm"
0000AD4C                            ; ---------------------------------------------------------------------------
0000AD4C                            ; Object 2E - contents of monitors
0000AD4C                            ; ---------------------------------------------------------------------------
0000AD4C                            
0000AD4C                            PowerUp:
0000AD4C 7000                       		moveq	#0,d0
0000AD4E 1028 0024                  		move.b	obRoutine(a0),d0
0000AD52 323B 0000                  		move.w	Pow_Index(pc,d0.w),d1
0000AD56 4EBB 1000                  		jsr	Pow_Index(pc,d1.w)
0000AD5A 6000 0000                  		bra.w	DisplaySprite
0000AD5E                            ; ===========================================================================
0000AD5E 0000                       Pow_Index:	dc.w Pow_Main-Pow_Index
0000AD60 0000                       		dc.w Pow_Move-Pow_Index
0000AD62 0000                       		dc.w Pow_Delete-Pow_Index
0000AD64                            ; ===========================================================================
0000AD64                            
0000AD64                            Pow_Main:	; Routine 0
0000AD64 5428 0024                  		addq.b	#2,obRoutine(a0)
0000AD68 317C 0680 0002             		move.w	#$680,obGfx(a0)
0000AD6E 117C 0024 0001             		move.b	#$24,obRender(a0)
0000AD74 117C 0003 0018             		move.b	#3,obPriority(a0)
0000AD7A 117C 0008 0019             		move.b	#8,obActWid(a0)
0000AD80 317C FD00 0012             		move.w	#-$300,obVelY(a0)
0000AD86 7000                       		moveq	#0,d0
0000AD88 1028 001C                  		move.b	obAnim(a0),d0	; get subtype
0000AD8C 5400                       		addq.b	#2,d0
0000AD8E 1140 001A                  		move.b	d0,obFrame(a0)	; use correct frame
0000AD92 227C 0000 0000             		movea.l	#Map_Monitor,a1
0000AD98 D000                       		add.b	d0,d0
0000AD9A D2F1 0000                  		adda.w	(a1,d0.w),a1
0000AD9E 5249                       		addq.w	#1,a1
0000ADA0 2149 0004                  		move.l	a1,obMap(a0)
0000ADA4                            
0000ADA4                            Pow_Move:	; Routine 2
0000ADA4 4A68 0012                  		tst.w	obVelY(a0)	; is object moving?
0000ADA8 6A00 0000                  		bpl.w	Pow_Checks	; if not, branch
0000ADAC 6100 0000                  		bsr.w	SpeedToPos
0000ADB0 0668 0018 0012             		addi.w	#$18,obVelY(a0)	; reduce object	speed
0000ADB6 4E75                       		rts	
0000ADB8                            ; ===========================================================================
0000ADB8                            
0000ADB8                            Pow_Checks:
0000ADB8 5428 0024                  		addq.b	#2,obRoutine(a0)
0000ADBC 317C 001D 001E             		move.w	#29,obTimeFrame(a0) ; display icon for half a second
0000ADC2                            
0000ADC2                            Pow_ChkEggman:
0000ADC2 1028 001C                  		move.b	obAnim(a0),d0
0000ADC6 0C00 0001                  		cmpi.b	#1,d0		; does monitor contain Eggman?
0000ADCA 6600                       		bne.s	Pow_ChkSonic
0000ADCC 4E75                       		rts			; Eggman monitor does nothing
0000ADCE                            ; ===========================================================================
0000ADCE                            
0000ADCE                            Pow_ChkSonic:
0000ADCE 0C00 0002                  		cmpi.b	#2,d0		; does monitor contain Sonic?
0000ADD2 6600                       		bne.s	Pow_ChkShoes
0000ADD4                            
0000ADD4                            	ExtraLife:
0000ADD4 5238 FE12                  		addq.b	#1,(v_lives).w	; add 1 to the number of lives you have
0000ADD8 5238 FE1C                  		addq.b	#1,(f_lifecount).w ; update the lives counter
0000ADE6                            ; ===========================================================================
0000ADE6                            
0000ADE6                            Pow_ChkShoes:
0000ADE6 0C00 0003                  		cmpi.b	#3,d0		; does monitor contain speed shoes?
0000ADEA 6600                       		bne.s	Pow_ChkShield
0000ADEC                            
0000ADEC 11FC 0001 FE2E             		move.b	#1,(v_shoes).w	; speed up the BG music
0000ADF2 31FC 04B0 D034             		move.w	#$4B0,(v_player+$34).w	; time limit for the power-up
0000ADF8 31FC 0C00 F760             		move.w	#$C00,(v_sonspeedmax).w ; change Sonic's top speed
0000ADFE 31FC 0018 F762             		move.w	#$18,(v_sonspeedacc).w	; change Sonic's acceleration
0000AE04 31FC 0080 F764             		move.w	#$80,(v_sonspeeddec).w	; change Sonic's deceleration
0000AE14                            ; ===========================================================================
0000AE14                            
0000AE14                            Pow_ChkShield:
0000AE14 0C00 0004                  		cmpi.b	#4,d0		; does monitor contain a shield?
0000AE18 6600                       		bne.s	Pow_ChkInvinc
0000AE1A                            
0000AE1A 11FC 0001 FE2C             		move.b	#1,(v_shield).w	; give Sonic a shield
0000AE20 11FC 0000 D180             		move.b	#id_ShieldItem,(v_objspace+$180).w ; load shield object ($38)
0000AE30                            ; ===========================================================================
0000AE30                            
0000AE30                            Pow_ChkInvinc:
0000AE30 0C00 0005                  		cmpi.b	#5,d0		; does monitor contain invincibility?
0000AE34 6600                       		bne.s	Pow_ChkRings
0000AE36                            
0000AE36 11FC 0001 FE2D             		move.b	#1,(v_invinc).w	; make Sonic invincible
0000AE3C 31FC 04B0 D032             		move.w	#$4B0,(v_player+$32).w ; time limit for the power-up
0000AE42 11FC 0000 D200             		move.b	#id_ShieldItem,(v_objspace+$200).w ; load stars object ($3801)
0000AE48 11FC 0001 D21C             		move.b	#1,(v_objspace+$200+obAnim).w
0000AE4E 11FC 0000 D240             		move.b	#id_ShieldItem,(v_objspace+$240).w ; load stars object ($3802)
0000AE54 11FC 0002 D25C             		move.b	#2,(v_objspace+$240+obAnim).w
0000AE5A 11FC 0000 D280             		move.b	#id_ShieldItem,(v_objspace+$280).w ; load stars object ($3803)
0000AE60 11FC 0003 D29C             		move.b	#3,(v_objspace+$280+obAnim).w
0000AE66 11FC 0000 D2C0             		move.b	#id_ShieldItem,(v_objspace+$2C0).w ; load stars object ($3804)
0000AE6C 11FC 0004 D2DC             		move.b	#4,(v_objspace+$2C0+obAnim).w
0000AE72 4A38 F7AA                  		tst.b	(f_lockscreen).w ; is boss mode on?
0000AE76 6000                       		bra.s	Pow_NoMusic	; if yes, branch
0000AE82                            ; ===========================================================================
0000AE82                            
0000AE82                            Pow_NoMusic:
0000AE82 4E75                       		rts	
0000AE84                            ; ===========================================================================
0000AE84                            
0000AE84                            Pow_ChkRings:
0000AE84 0C00 0006                  		cmpi.b	#6,d0		; does monitor contain 10 rings?
0000AE88 6600                       		bne.s	Pow_ChkS
0000AE8A                            
0000AE8A 0678 000A FE20             		addi.w	#10,(v_rings).w	; add 10 rings to the number of rings you have
0000AE90 0038 0001 FE1D             		ori.b	#1,(f_ringcount).w ; update the ring counter
0000AE96 0C78 0032 FE20             		cmpi.w	#50,(v_rings).w ; check if you have 100 rings
0000AE9C 6500                       		bcs.s	Pow_RingSound
0000AE9E 08F8 0001 FE1B             		bset	#1,(v_lifecount).w
0000AEA4 6700 FF2E                  		beq.w	ExtraLife
0000AEA8 0C78 0064 FE20             		cmpi.w	#100,(v_rings).w ; check if you have 200 rings
0000AEAE 6500                       		bcs.s	Pow_RingSound
0000AEB0 08F8 0002 FE1B             		bset	#2,(v_lifecount).w
0000AEB6 6700 FF1C                  		beq.w	ExtraLife
0000AEBA                            
0000AEBA                            	Pow_RingSound:
0000AEC4                            ; ===========================================================================
0000AEC4                            
0000AEC4                            Pow_ChkS:
0000AEC4 0C00 0007                  		cmpi.b	#7,d0		; does monitor contain 'S'?
0000AEC8 6600                       		bne.s	Pow_ChkGoggle
0000AED4                            	
0000AED4                            Pow_ChkGoggle:	
0000AED4 0C00 0008                  		cmpi.b	#8,d0		; does monitor contain 'S'?
0000AED8 6600                       		bne.s	Pow_ChkCycle
0000AEE4 13FC 00FF FFFF FE15        		move.b	#$FF,(v_airbyte)
0000AEEC                            		
0000AEEC                            Pow_ChkCycle:	
0000AEEC 0C00 000A                  		cmpi.b	#$A,d0		; does monitor contain 'S'?
0000AEF0 6600                       		bne.s	Pow_ChkEnd
0000AEFC 13FC 00FF FFFF FE15        		move.b	#$FF,(v_airbyte)
0000AF04                            
0000AF04                            Pow_ChkEnd:
0000AF04 4E75                       		rts			; 'S' and goggles monitors do nothing
0000AF06                            ; ===========================================================================
0000AF06                            
0000AF06                            Pow_Delete:	; Routine 4
0000AF06 5368 001E                  		subq.w	#1,obTimeFrame(a0)
0000AF0A 6B00 0000                  		bmi.w	DeleteObject	; delete after half a second
0000AF0E 4E75                       		rts	
0000AF0E 4E75                       		rts	
0000AF10                            		include	"_incObj\26 Monitor (SolidSides subroutine).asm"
0000AF10                            ; ---------------------------------------------------------------------------
0000AF10                            ; Subroutine to	make the sides of a monitor solid
0000AF10                            ; ---------------------------------------------------------------------------
0000AF10                            
0000AF10                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000AF10                            
0000AF10                            
0000AF10                            Mon_SolidSides:
0000AF10 43F8 D000                  		lea	(v_player).w,a1
0000AF14 3029 0008                  		move.w	obX(a1),d0
0000AF18 9068 0008                  		sub.w	obX(a0),d0
0000AF1C D041                       		add.w	d1,d0
0000AF1E 6B00                       		bmi.s	loc_A4E6
0000AF20 3601                       		move.w	d1,d3
0000AF22 D643                       		add.w	d3,d3
0000AF24 B043                       		cmp.w	d3,d0
0000AF26 6200                       		bhi.s	loc_A4E6
0000AF28 1629 0016                  		move.b	obHeight(a1),d3
0000AF2C 4883                       		ext.w	d3
0000AF2E D443                       		add.w	d3,d2
0000AF30 3629 000C                  		move.w	obY(a1),d3
0000AF34 9668 000C                  		sub.w	obY(a0),d3
0000AF38 D642                       		add.w	d2,d3
0000AF3A 6B00                       		bmi.s	loc_A4E6
0000AF3C D442                       		add.w	d2,d2
0000AF3E B642                       		cmp.w	d2,d3
0000AF40 6400                       		bcc.s	loc_A4E6
0000AF42 4A38 F7C8                  		tst.b	(f_lockmulti).w
0000AF46 6B00                       		bmi.s	loc_A4E6
0000AF48 0C38 0006 D024             		cmpi.b	#6,(v_player+obRoutine).w
0000AF4E 6400                       		bcc.s	loc_A4E6
0000AF50 4A78 FE08                  		tst.w	(v_debuguse).w
0000AF54 6600                       		bne.s	loc_A4E6
0000AF56 B240                       		cmp.w	d0,d1
0000AF58 6400                       		bcc.s	loc_A4DC
0000AF5A D241                       		add.w	d1,d1
0000AF5C 9041                       		sub.w	d1,d0
0000AF5E                            
0000AF5E                            loc_A4DC:
0000AF5E 0C43 0010                  		cmpi.w	#$10,d3
0000AF62 6500                       		bcs.s	loc_A4EA
0000AF64                            
0000AF64                            loc_A4E2:
0000AF64 7201                       		moveq	#1,d1
0000AF66 4E75                       		rts	
0000AF68                            ; ===========================================================================
0000AF68                            
0000AF68                            loc_A4E6:
0000AF68 7200                       		moveq	#0,d1
0000AF6A 4E75                       		rts	
0000AF6C                            ; ===========================================================================
0000AF6C                            
0000AF6C                            loc_A4EA:
0000AF6C 7200                       		moveq	#0,d1
0000AF6E 1228 0019                  		move.b	obActWid(a0),d1
0000AF72 5841                       		addq.w	#4,d1
0000AF74 3401                       		move.w	d1,d2
0000AF76 D442                       		add.w	d2,d2
0000AF78 D269 0008                  		add.w	obX(a1),d1
0000AF7C 9268 0008                  		sub.w	obX(a0),d1
0000AF80 6BE2                       		bmi.s	loc_A4E2
0000AF82 B242                       		cmp.w	d2,d1
0000AF84 64DE                       		bcc.s	loc_A4E2
0000AF86 72FF                       		moveq	#-1,d1
0000AF88 4E75                       		rts	
0000AF8A                            ; End of function Obj26_SolidSides
0000AF8A                            ; End of function Obj26_SolidSides
0000AF8A                            		include	"_anim\Monitor.asm"
0000AF8A                            ; ---------------------------------------------------------------------------
0000AF8A                            ; Animation script - monitors
0000AF8A                            ; ---------------------------------------------------------------------------
0000AF8A 0000 0000 0000             Ani_Monitor:	dc.w @static-Ani_Monitor, @eggman-Ani_Monitor, @sonic-Ani_Monitor
0000AF90 0000 0000 0000             		dc.w @shoes-Ani_Monitor, @shield-Ani_Monitor, @invincible-Ani_Monitor
0000AF96 0000 0000 0000             		dc.w @rings-Ani_Monitor, @s-Ani_Monitor, @goggles-Ani_Monitor
0000AF9C 0000 0000                  		dc.w @breaking-Ani_Monitor,	@cycle-Ani_Monitor
0000AFA0 0100 0102 FF               @static:	dc.b 1,	0, 1, 2, afEnd
0000AFA6 00                         		even
0000AFA6 0100 0303 0103 0302 0303+  @eggman:	dc.b 1,	0, 3, 3, 1, 3, 3, 2, 3,	3, afEnd
0000AFB2 00                         		even
0000AFB2 0100 0404 0104 0402 0404+  @sonic:		dc.b 1,	0, 4, 4, 1, 4, 4, 2, 4,	4, afEnd
0000AFBE 00                         		even
0000AFBE 0100 0505 0105 0502 0505+  @shoes:		dc.b 1,	0, 5, 5, 1, 5, 5, 2, 5,	5, afEnd
0000AFCA 00                         		even
0000AFCA 0100 0606 0106 0602 0606+  @shield:	dc.b 1,	0, 6, 6, 1, 6, 6, 2, 6,	6, afEnd
0000AFD6 00                         		even
0000AFD6 0100 0707 0107 0702 0707+  @invincible:	dc.b 1,	0, 7, 7, 1, 7, 7, 2, 7,	7, afEnd
0000AFE2 00                         		even
0000AFE2 0100 0808 0108 0802 0808+  @rings:		dc.b 1,	0, 8, 8, 1, 8, 8, 2, 8,	8, afEnd
0000AFEE 00                         		even
0000AFEE 0100 0909 0109 0902 0909+  @s:		dc.b 1,	0, 9, 9, 1, 9, 9, 2, 9,	9, afEnd
0000AFFA 00                         		even
0000AFFA 0100 0A0A 010A 0A02 0A0A+  @goggles:	dc.b 1,	0, $A, $A, 1, $A, $A, 2, $A, $A, afEnd
0000B006 00                         		even
0000B006 0200 0102 0BFE 01          @breaking:	dc.b 2,	0, 1, 2, $B, afBack, 1
0000B00E 00                         		even
0000B00E 0300 0303 0303 0303 0303+  @cycle:	dc.b 3,	0, $3, $3, $3, $3, $3, $3, $3, $3, 1, $4, $4, $4, $4, $4, $4, $4, $4, 2, $5, $5, $5, $5, $5, $5, $5, $5, 0, $6, $6, $6, $6, $6, $6, $6, $6, 1, $7, $7, $7, $7, $7, $7, $7, $7, 2, $8, $8, $8, $8, $8, $8, $8, $8, 0, $9, $9, $9, $9, $9, $9, $9, $9, 1, $A, $A, $A, $A, $A, $A, $A, $A, afEnd
0000B058                            		even
0000B058                            		even
0000B058                            Map_Monitor:	include	"_maps\Monitor.asm"
0000B058                            ; ================================================================================
0000B058                            ; Sprite Mappings - generated by Flex 2 Thu May 20 2021 16:40:23 GMT-0400 (Eastern Daylight Time)
0000B058                            ; ================================================================================
0000B058                            
0000B058                            DATAHW4YG9ONB04:
0000B058 0000 0000                  	dc.w DATAHW4YG9ONB04_0-DATAHW4YG9ONB04, DATAHW4YG9ONB04_1-DATAHW4YG9ONB04
0000B05C 0000 0000                  	dc.w DATAHW4YG9ONB04_2-DATAHW4YG9ONB04, DATAHW4YG9ONB04_3-DATAHW4YG9ONB04
0000B060 0000 0000                  	dc.w DATAHW4YG9ONB04_4-DATAHW4YG9ONB04, DATAHW4YG9ONB04_5-DATAHW4YG9ONB04
0000B064 0000 0000                  	dc.w DATAHW4YG9ONB04_6-DATAHW4YG9ONB04, DATAHW4YG9ONB04_7-DATAHW4YG9ONB04
0000B068 0000 0000                  	dc.w DATAHW4YG9ONB04_8-DATAHW4YG9ONB04, DATAHW4YG9ONB04_9-DATAHW4YG9ONB04
0000B06C 0000 0000                  	dc.w DATAHW4YG9ONB04_A-DATAHW4YG9ONB04, DATAHW4YG9ONB04_B-DATAHW4YG9ONB04
0000B070 01                         DATAHW4YG9ONB04_0: dc.b $1
0000B071 EF0F 0000 F0               	dc.b $EF, $F, $0, $0, $F0
0000B076 02                         DATAHW4YG9ONB04_1: dc.b $2
0000B077 F505 0010 F8               	dc.b $F5, $5, $0, $10, $F8
0000B07C EF0F 0000 F0               	dc.b $EF, $F, $0, $0, $F0
0000B081 02                         DATAHW4YG9ONB04_2: dc.b $2
0000B082 F505 0014 F8               	dc.b $F5, $5, $0, $14, $F8
0000B087 EF0F 0000 F0               	dc.b $EF, $F, $0, $0, $F0
0000B08C 02                         DATAHW4YG9ONB04_3: dc.b $2
0000B08D F505 0018 F8               	dc.b $F5, $5, $0, $18, $F8
0000B092 EF0F 0000 F0               	dc.b $EF, $F, $0, $0, $F0
0000B097 02                         DATAHW4YG9ONB04_4: dc.b $2
0000B098 F505 001C F8               	dc.b $F5, $5, $0, $1C, $F8
0000B09D EF0F 0000 F0               	dc.b $EF, $F, $0, $0, $F0
0000B0A2 02                         DATAHW4YG9ONB04_5: dc.b $2
0000B0A3 F505 0024 F8               	dc.b $F5, $5, $0, $24, $F8
0000B0A8 EF0F 0000 F0               	dc.b $EF, $F, $0, $0, $F0
0000B0AD 02                         DATAHW4YG9ONB04_6: dc.b $2
0000B0AE F505 0028 F8               	dc.b $F5, $5, $0, $28, $F8
0000B0B3 EF0F 0000 F0               	dc.b $EF, $F, $0, $0, $F0
0000B0B8 02                         DATAHW4YG9ONB04_7: dc.b $2
0000B0B9 F505 002C F8               	dc.b $F5, $5, $0, $2C, $F8
0000B0BE EF0F 0000 F0               	dc.b $EF, $F, $0, $0, $F0
0000B0C3 02                         DATAHW4YG9ONB04_8: dc.b $2
0000B0C4 F505 0030 F8               	dc.b $F5, $5, $0, $30, $F8
0000B0C9 EF0F 0000 F0               	dc.b $EF, $F, $0, $0, $F0
0000B0CE 02                         DATAHW4YG9ONB04_9: dc.b $2
0000B0CF F505 0034 F8               	dc.b $F5, $5, $0, $34, $F8
0000B0D4 EF0F 0000 F0               	dc.b $EF, $F, $0, $0, $F0
0000B0D9 02                         DATAHW4YG9ONB04_A: dc.b $2
0000B0DA F505 0020 F8               	dc.b $F5, $5, $0, $20, $F8
0000B0DF EF0F 0000 F0               	dc.b $EF, $F, $0, $0, $F0
0000B0E4 01                         DATAHW4YG9ONB04_B: dc.b $1
0000B0E5 FF0D 0038 F0               	dc.b $FF, $D, $0, $38, $F0
0000B0EA                            	even
0000B0EA                            	even
0000B0EA                            
0000B0EA                            		include	"_incObj\0E Title Screen Sonic.asm"
0000B0EA                            ; ---------------------------------------------------------------------------
0000B0EA                            ; Object 0E - Sonic on the title screen
0000B0EA                            ; ---------------------------------------------------------------------------
0000B0EA                            
0000B0EA                            TitleSonic:
0000B0EA 7000                       		moveq	#0,d0
0000B0EC 1028 0024                  		move.b	obRoutine(a0),d0
0000B0F0 323B 0000                  		move.w	TSon_Index(pc,d0.w),d1
0000B0F4 4EFB 1000                  		jmp	TSon_Index(pc,d1.w)
0000B0F8                            ; ===========================================================================
0000B0F8 0000                       TSon_Index:	dc.w TSon_Main-TSon_Index
0000B0FA 0000                       		dc.w TSon_Delay-TSon_Index
0000B0FC 0000                       		dc.w TSon_Move-TSon_Index
0000B0FE 0000                       		dc.w TSon_Animate-TSon_Index
0000B100                            ; ===========================================================================
0000B100                            
0000B100                            TSon_Main:	; Routine 0
0000B100 5428 0024                  		addq.b	#2,obRoutine(a0)
0000B104 317C 00F8 0008             		move.w	#$F8,obX(a0)
0000B10A 317C 00E1 000A             		move.w	#$E1,obScreenY(a0) ; position is fixed to screen
0000B110 217C 0000 0000 0004        		move.l	#Map_TSon,obMap(a0)
0000B118 317C 2338 0002             		move.w	#$2338,obGfx(a0)
0000B11E 117C 0001 0018             		move.b	#1,obPriority(a0)
0000B124 117C 001D 001F             		move.b	#29,obDelayAni(a0) ; set time delay to 0.5 seconds
0000B12A 43F9 0000 0000             		lea	(Ani_TSon).l,a1
0000B130 6100 0000                  		bsr.w	AnimateSprite
0000B134                            
0000B134                            TSon_Delay:	;Routine 2
0000B134 5328 001F                  		subq.b	#1,obDelayAni(a0) ; subtract 1 from time delay
0000B138 6A00                       		bpl.s	@wait		; if time remains, branch
0000B13A 5428 0024                  		addq.b	#2,obRoutine(a0) ; go to next routine
0000B13E 6000 0000                  		bra.w	DisplaySprite
0000B142                            
0000B142                            	@wait:
0000B142 4E75                       		rts	
0000B144                            ; ===========================================================================
0000B144                            
0000B144                            TSon_Move:	; Routine 4
0000B144 5168 000A                  		subq.w	#8,obScreenY(a0) ; move Sonic up
0000B148 0C68 0099 000A             		cmpi.w	#$99,obScreenY(a0) ; has Sonic reached final position?
0000B14E 6600                       		bne.s	@display	; if not, branch
0000B150 5428 0024                  		addq.b	#2,obRoutine(a0)
0000B154                            
0000B154                            	@display:
0000B154 6000 0000                  		bra.w	DisplaySprite
0000B158                            
0000B158 4E75                       		rts	
0000B15A                            ; ===========================================================================
0000B15A                            
0000B15A                            TSon_Animate:	; Routine 6
0000B15A 43F9 0000 0000             		lea	(Ani_TSon).l,a1
0000B160 6100 0000                  		bsr.w	AnimateSprite
0000B164 6000 0000                  		bra.w	DisplaySprite
0000B168                            
0000B168 4E75                       		rts	
0000B168 4E75                       		rts	
0000B16A                            		include	"_incObj\0F Press Start and TM.asm"
0000B16A                            ; ---------------------------------------------------------------------------
0000B16A                            ; Object 0F - "PRESS START BUTTON" and "TM" from title screen
0000B16A                            ; ---------------------------------------------------------------------------
0000B16A                            
0000B16A                            PSBTM:
0000B16A 7000                       		moveq	#0,d0
0000B16C 1028 0024                  		move.b	obRoutine(a0),d0
0000B170 323B 0000                  		move.w	PSB_Index(pc,d0.w),d1
0000B174 4EBB 1000                  		jsr	PSB_Index(pc,d1.w)
0000B178 6000 0000                  		bra.w	DisplaySprite
0000B17C                            ; ===========================================================================
0000B17C 0000                       PSB_Index:	dc.w PSB_Main-PSB_Index
0000B17E 0000                       		dc.w PSB_PrsStart-PSB_Index
0000B180 0000                       		dc.w PSB_Exit-PSB_Index
0000B182                            ; ===========================================================================
0000B182                            
0000B182                            PSB_Main:	; Routine 0
0000B182 5428 0024                  		addq.b	#2,obRoutine(a0)
0000B186 317C 00D0 0008             		move.w	#$D0,obX(a0)
0000B18C 317C 0130 000A             		move.w	#$130,obScreenY(a0)
0000B192 217C 0000 0000 0004        		move.l	#Map_PSB,obMap(a0)
0000B19A 317C 0200 0002             		move.w	#$200,obGfx(a0)
0000B1A0 0C28 0002 001A             		cmpi.b	#2,obFrame(a0)	; is object "PRESS START"?
0000B1A6 6500                       		bcs.s	PSB_PrsStart	; if yes, branch
0000B1A8                            
0000B1A8 5428 0024                  		addq.b	#2,obRoutine(a0)
0000B1AC 0C28 0003 001A             		cmpi.b	#3,obFrame(a0)	; is the object	"TM"?
0000B1B2 6600                       		bne.s	PSB_Exit	; if not, branch
0000B1B4                            
0000B1B4 317C 2510 0002             		move.w	#$2510,obGfx(a0) ; "TM" specific code
0000B1BA 317C 0170 0008             		move.w	#$170,obX(a0)
0000B1C0 317C 00F8 000A             		move.w	#$F8,obScreenY(a0)
0000B1C6                            
0000B1C6                            PSB_Exit:	; Routine 4
0000B1C6 4E75                       		rts	
0000B1C8                            ; ===========================================================================
0000B1C8                            
0000B1C8                            PSB_PrsStart:	; Routine 2
0000B1C8 43F9 0000 0000             		lea	(Ani_PSBTM).l,a1
0000B1CE 6000 0000                  		bra.w	AnimateSprite	; "PRESS START" is animated
0000B1CE 6000 0000                  		bra.w	AnimateSprite	; "PRESS START" is animated
0000B1D2                            
0000B1D2                            		include	"_anim\Title Screen Sonic.asm"
0000B1D2                            ; ---------------------------------------------------------------------------
0000B1D2                            ; Animation script - Sonic on the title screen
0000B1D2                            ; ---------------------------------------------------------------------------
0000B1D2 0000                       Ani_TSon:	dc.w byte_A706-Ani_TSon
0000B1D4 0700 0102 0304 0506 07FE+  byte_A706:	dc.b 7,	0, 1, 2, 3, 4, 5, 6, 7,	afBack, 2
0000B1E0 00                         		even
0000B1E0 00                         		even
0000B1E0                            		include	"_anim\Press Start and TM.asm"
0000B1E0                            ; ---------------------------------------------------------------------------
0000B1E0                            ; Animation script - "TM" and "PRESS START BUTTON" on the title screen
0000B1E0                            ; ---------------------------------------------------------------------------
0000B1E0 0000                       Ani_PSBTM:	dc.w @flash-Ani_PSBTM
0000B1E2 1F00 01FF                  @flash:		dc.b $1F, 0, 1,	afEnd
0000B1E6                            		even
0000B1E6                            		even
0000B1E6                            
0000B1E6                            		include	"_incObj\sub AnimateSprite.asm"
0000B1E6                            ; ---------------------------------------------------------------------------
0000B1E6                            ; Subroutine to	animate	a sprite using an animation script
0000B1E6                            ; ---------------------------------------------------------------------------
0000B1E6                            
0000B1E6                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000B1E6                            
0000B1E6                            
0000B1E6                            AnimateSprite:
0000B1E6 7000                       		moveq	#0,d0
0000B1E8 1028 001C                  		move.b	obAnim(a0),d0	; move animation number	to d0
0000B1EC B028 001D                  		cmp.b	obNextAni(a0),d0 ; is animation set to restart?
0000B1F0 6700                       		beq.s	Anim_Run	; if not, branch
0000B1F2                            
0000B1F2 1140 001D                  		move.b	d0,obNextAni(a0) ; set to "no restart"
0000B1F6 117C 0000 001B             		move.b	#0,obAniFrame(a0) ; reset animation
0000B1FC 117C 0000 001E             		move.b	#0,obTimeFrame(a0) ; reset frame duration
0000B202                            
0000B202                            Anim_Run:
0000B202 5328 001E                  		subq.b	#1,obTimeFrame(a0) ; subtract 1 from frame duration
0000B206 6A00                       		bpl.s	Anim_Wait	; if time remains, branch
0000B208 D040                       		add.w	d0,d0
0000B20A D2F1 0000                  		adda.w	(a1,d0.w),a1	; jump to appropriate animation	script
0000B20E 1151 001E                  		move.b	(a1),obTimeFrame(a0) ; load frame duration
0000B212 7200                       		moveq	#0,d1
0000B214 1228 001B                  		move.b	obAniFrame(a0),d1 ; load current frame number
0000B218 1031 1001                  		move.b	1(a1,d1.w),d0	; read sprite number from script
0000B21C 6B00                       		bmi.s	Anim_End_FF	; if animation is complete, branch
0000B21E                            
0000B21E                            Anim_Next:
0000B21E 1200                       		move.b	d0,d1
0000B220 0200 001F                  		andi.b	#$1F,d0
0000B224 1140 001A                  		move.b	d0,obFrame(a0)	; load sprite number
0000B228 1028 0022                  		move.b	obStatus(a0),d0
0000B22C E719                       		rol.b	#3,d1
0000B22E B101                       		eor.b	d0,d1
0000B230 0201 0003                  		andi.b	#3,d1
0000B234 0228 00FC 0001             		andi.b	#$FC,obRender(a0)
0000B23A 8328 0001                  		or.b	d1,obRender(a0)
0000B23E 5228 001B                  		addq.b	#1,obAniFrame(a0) ; next frame number
0000B242                            
0000B242                            Anim_Wait:
0000B242 4E75                       		rts	
0000B244                            ; ===========================================================================
0000B244                            
0000B244                            Anim_End_FF:
0000B244 5200                       		addq.b	#1,d0		; is the end flag = $FF	?
0000B246 6600                       		bne.s	Anim_End_FE	; if not, branch
0000B248 117C 0000 001B             		move.b	#0,obAniFrame(a0) ; restart the animation
0000B24E 1029 0001                  		move.b	1(a1),d0	; read sprite number
0000B252 60CA                       		bra.s	Anim_Next
0000B254                            ; ===========================================================================
0000B254                            
0000B254                            Anim_End_FE:
0000B254 5200                       		addq.b	#1,d0		; is the end flag = $FE	?
0000B256 6600                       		bne.s	Anim_End_FD	; if not, branch
0000B258 1031 1002                  		move.b	2(a1,d1.w),d0	; read the next	byte in	the script
0000B25C 9128 001B                  		sub.b	d0,obAniFrame(a0) ; jump back d0 bytes in the script
0000B260 9200                       		sub.b	d0,d1
0000B262 1031 1001                  		move.b	1(a1,d1.w),d0	; read sprite number
0000B266 60B6                       		bra.s	Anim_Next
0000B268                            ; ===========================================================================
0000B268                            
0000B268                            Anim_End_FD:
0000B268 5200                       		addq.b	#1,d0		; is the end flag = $FD	?
0000B26A 6600                       		bne.s	Anim_End_FC	; if not, branch
0000B26C 1171 1002 001C             		move.b	2(a1,d1.w),obAnim(a0) ; read next byte, run that animation
0000B272                            
0000B272                            Anim_End_FC:
0000B272 5200                       		addq.b	#1,d0		; is the end flag = $FC	?
0000B274 6600                       		bne.s	Anim_End_FB	; if not, branch
0000B276 5428 0024                  		addq.b	#2,obRoutine(a0) ; jump to next routine
0000B27A                            
0000B27A                            Anim_End_FB:
0000B27A 5200                       		addq.b	#1,d0		; is the end flag = $FB	?
0000B27C 6600                       		bne.s	Anim_End_FA	; if not, branch
0000B27E 117C 0000 001B             		move.b	#0,obAniFrame(a0) ; reset animation
0000B284 4228 0025                  		clr.b	ob2ndRout(a0)	; reset	2nd routine counter
0000B288                            
0000B288                            Anim_End_FA:
0000B288 5200                       		addq.b	#1,d0		; is the end flag = $FA	?
0000B28A 6600                       		bne.s	Anim_End	; if not, branch
0000B28C 5428 0025                  		addq.b	#2,ob2ndRout(a0) ; jump to next routine
0000B290                            
0000B290                            Anim_End:
0000B290 4E75                       		rts	
0000B292                            ; End of function AnimateSprite
0000B292                            ; End of function AnimateSprite
0000B292                            
0000B292                            Map_PSB:	include	"_maps\Press Start and TM.asm"
0000B292                            ; ================================================================================
0000B292                            ; Sprite Mappings - generated by Flex 2 Wed Jun 09 2021 20:27:54 GMT-0400 (Eastern Daylight Time)
0000B292                            ; ================================================================================
0000B292                            
0000B292                            DATASLVYKQV1DH:
0000B292 0000 0000                  	dc.w $0, DATASLVYKQV1DH_1-DATASLVYKQV1DH
0000B296 0000 0000                  	dc.w DATASLVYKQV1DH_2-DATASLVYKQV1DH, $0
0000B29A 07                         DATASLVYKQV1DH_1: dc.b $7
0000B29B 0008 00EC 01               	dc.b $0, $8, $0, $EC, $1
0000B2A0 0000 00EF 19               	dc.b $0, $0, $0, $EF, $19
0000B2A5 0000 00EF 21               	dc.b $0, $0, $0, $EF, $21
0000B2AA 000C 00F0 31               	dc.b $0, $C, $0, $F0, $31
0000B2AF 0000 00F4 51               	dc.b $0, $0, $0, $F4, $51
0000B2B4 0008 00F5 61               	dc.b $0, $8, $0, $F5, $61
0000B2B9 0008 00F7 79               	dc.b $0, $8, $0, $F7, $79
0000B2BE 1E                         DATASLVYKQV1DH_2: dc.b $1E
0000B2BF B80F 0000 80               	dc.b $B8, $F, $0, $0, $80
0000B2C4 B80F 0000 80               	dc.b $B8, $F, $0, $0, $80
0000B2C9 B80F 0000 80               	dc.b $B8, $F, $0, $0, $80
0000B2CE B80F 0000 80               	dc.b $B8, $F, $0, $0, $80
0000B2D3 B80F 0000 80               	dc.b $B8, $F, $0, $0, $80
0000B2D8 B80F 0000 80               	dc.b $B8, $F, $0, $0, $80
0000B2DD B80F 0000 80               	dc.b $B8, $F, $0, $0, $80
0000B2E2 B80F 0000 80               	dc.b $B8, $F, $0, $0, $80
0000B2E7 B80F 0000 80               	dc.b $B8, $F, $0, $0, $80
0000B2EC B80F 0000 80               	dc.b $B8, $F, $0, $0, $80
0000B2F1 D80F 0000 80               	dc.b $D8, $F, $0, $0, $80
0000B2F6 D80F 0000 80               	dc.b $D8, $F, $0, $0, $80
0000B2FB D80F 0000 80               	dc.b $D8, $F, $0, $0, $80
0000B300 D80F 0000 80               	dc.b $D8, $F, $0, $0, $80
0000B305 D80F 0000 80               	dc.b $D8, $F, $0, $0, $80
0000B30A D80F 0000 80               	dc.b $D8, $F, $0, $0, $80
0000B30F D80F 0000 80               	dc.b $D8, $F, $0, $0, $80
0000B314 D80F 0000 80               	dc.b $D8, $F, $0, $0, $80
0000B319 D80F 0000 80               	dc.b $D8, $F, $0, $0, $80
0000B31E D80F 0000 80               	dc.b $D8, $F, $0, $0, $80
0000B323 F80F 0000 80               	dc.b $F8, $F, $0, $0, $80
0000B328 F80F 0000 80               	dc.b $F8, $F, $0, $0, $80
0000B32D F80F 0000 80               	dc.b $F8, $F, $0, $0, $80
0000B332 F80F 0000 80               	dc.b $F8, $F, $0, $0, $80
0000B337 F80F 0000 80               	dc.b $F8, $F, $0, $0, $80
0000B33C F80F 0000 80               	dc.b $F8, $F, $0, $0, $80
0000B341 F80F 0000 80               	dc.b $F8, $F, $0, $0, $80
0000B346 F80F 0000 80               	dc.b $F8, $F, $0, $0, $80
0000B34B F80F 0000 80               	dc.b $F8, $F, $0, $0, $80
0000B350 F80F 0000 80               	dc.b $F8, $F, $0, $0, $80
0000B356 00                         	even
0000B356 00                         	even
0000B356                            Map_TSon:	include	"_maps\Title Screen Sonic.asm"
0000B356                            ; ================================================================================
0000B356                            ; Sprite Mappings - generated by Flex 2 Wed Apr 21 2021 22:07:41 GMT-0400 (Eastern Daylight Time)
0000B356                            ; ================================================================================
0000B356                            
0000B356                            DATACABT4L5301I:
0000B356 0000 0000                  	dc.w DATACABT4L5301I_0-DATACABT4L5301I, DATACABT4L5301I_1-DATACABT4L5301I
0000B35A 0000 0000                  	dc.w DATACABT4L5301I_2-DATACABT4L5301I, DATACABT4L5301I_3-DATACABT4L5301I
0000B35E 0000 0000                  	dc.w DATACABT4L5301I_4-DATACABT4L5301I, DATACABT4L5301I_5-DATACABT4L5301I
0000B362 0000 0000                  	dc.w DATACABT4L5301I_6-DATACABT4L5301I, DATACABT4L5301I_7-DATACABT4L5301I
0000B366 0000 0000                  	dc.w DATACABT4L5301I_8-DATACABT4L5301I, DATACABT4L5301I_9-DATACABT4L5301I
0000B36A 0A                         DATACABT4L5301I_0: dc.b $A
0000B36B 0808 0000 08               	dc.b $8, $8, $0, $0, $8
0000B370 100F 0003 08               	dc.b $10, $F, $0, $3, $8
0000B375 100F 0013 28               	dc.b $10, $F, $0, $13, $28
0000B37A 300E 0023 08               	dc.b $30, $E, $0, $23, $8
0000B37F 300E 002F 28               	dc.b $30, $E, $0, $2F, $28
0000B384 480D 003B 00               	dc.b $48, $D, $0, $3B, $0
0000B389 4809 0043 20               	dc.b $48, $9, $0, $43, $20
0000B38E 4800 0049 38               	dc.b $48, $0, $0, $49, $38
0000B393 580C 004A 08               	dc.b $58, $C, $0, $4A, $8
0000B398 5800 004E 28               	dc.b $58, $0, $0, $4E, $28
0000B39D 0F                         DATACABT4L5301I_1: dc.b $F
0000B39E 480E 01BD 20               	dc.b $48, $E, $1, $BD, $20
0000B3A3 3805 01C9 38               	dc.b $38, $5, $1, $C9, $38
0000B3A8 4000 01CD 30               	dc.b $40, $0, $1, $CD, $30
0000B3AD 4800 01CE 40               	dc.b $48, $0, $1, $CE, $40
0000B3B2 6000 01CF 20               	dc.b $60, $0, $1, $CF, $20
0000B3B7 100E 004F 08               	dc.b $10, $E, $0, $4F, $8
0000B3BC 100E 005B 28               	dc.b $10, $E, $0, $5B, $28
0000B3C1 1801 0067 48               	dc.b $18, $1, $0, $67, $48
0000B3C6 2802 0069 00               	dc.b $28, $2, $0, $69, $0
0000B3CB 280F 006C 08               	dc.b $28, $F, $0, $6C, $8
0000B3D0 280F 007C 28               	dc.b $28, $F, $0, $7C, $28
0000B3D5 3002 008C 48               	dc.b $30, $2, $0, $8C, $48
0000B3DA 480E 008F 10               	dc.b $48, $E, $0, $8F, $10
0000B3DF 4809 009B 30               	dc.b $48, $9, $0, $9B, $30
0000B3E4 5804 00A1 30               	dc.b $58, $4, $0, $A1, $30
0000B3E9 11                         DATACABT4L5301I_2: dc.b $11
0000B3EA 380E 01BD 28               	dc.b $38, $E, $1, $BD, $28
0000B3EF 2805 01C9 40               	dc.b $28, $5, $1, $C9, $40
0000B3F4 3000 01CD 38               	dc.b $30, $0, $1, $CD, $38
0000B3F9 3800 01CE 48               	dc.b $38, $0, $1, $CE, $48
0000B3FE 5000 01CF 28               	dc.b $50, $0, $1, $CF, $28
0000B403 200F 01A9 08               	dc.b $20, $F, $1, $A9, $8
0000B408 2003 01B9 28               	dc.b $20, $3, $1, $B9, $28
0000B40D 100E 004F 08               	dc.b $10, $E, $0, $4F, $8
0000B412 100E 005B 28               	dc.b $10, $E, $0, $5B, $28
0000B417 1801 0067 48               	dc.b $18, $1, $0, $67, $48
0000B41C 2802 0069 00               	dc.b $28, $2, $0, $69, $0
0000B421 280F 006C 08               	dc.b $28, $F, $0, $6C, $8
0000B426 280F 007C 28               	dc.b $28, $F, $0, $7C, $28
0000B42B 3002 008C 48               	dc.b $30, $2, $0, $8C, $48
0000B430 480E 008F 10               	dc.b $48, $E, $0, $8F, $10
0000B435 4809 009B 30               	dc.b $48, $9, $0, $9B, $30
0000B43A 5804 00A1 30               	dc.b $58, $4, $0, $A1, $30
0000B43F 0D                         DATACABT4L5301I_3: dc.b $D
0000B440 100F 00A3 08               	dc.b $10, $F, $0, $A3, $8
0000B445 0808 00B3 28               	dc.b $8, $8, $0, $B3, $28
0000B44A 100F 00B6 28               	dc.b $10, $F, $0, $B6, $28
0000B44F 1800 00C6 48               	dc.b $18, $0, $0, $C6, $48
0000B454 2006 00C7 48               	dc.b $20, $6, $0, $C7, $48
0000B459 3800 00CD 48               	dc.b $38, $0, $0, $CD, $48
0000B45E 300D 00CE 08               	dc.b $30, $D, $0, $CE, $8
0000B463 300E 00D6 28               	dc.b $30, $E, $0, $D6, $28
0000B468 400B 00E2 10               	dc.b $40, $B, $0, $E2, $10
0000B46D 4808 00EE 28               	dc.b $48, $8, $0, $EE, $28
0000B472 5001 00F1 08               	dc.b $50, $1, $0, $F1, $8
0000B477 5004 00F3 28               	dc.b $50, $4, $0, $F3, $28
0000B47C 5800 00F5 28               	dc.b $58, $0, $0, $F5, $28
0000B481 0B                         DATACABT4L5301I_4: dc.b $B
0000B482 080F 00F6 10               	dc.b $8, $F, $0, $F6, $10
0000B487 080B 0106 30               	dc.b $8, $B, $1, $6, $30
0000B48C 1006 0112 48               	dc.b $10, $6, $1, $12, $48
0000B491 280E 0118 18               	dc.b $28, $E, $1, $18, $18
0000B496 280E 0124 38               	dc.b $28, $E, $1, $24, $38
0000B49B 2801 0130 10               	dc.b $28, $1, $1, $30, $10
0000B4A0 400E 0132 10               	dc.b $40, $E, $1, $32, $10
0000B4A5 4006 013E 30               	dc.b $40, $6, $1, $3E, $30
0000B4AA 4004 0144 40               	dc.b $40, $4, $1, $44, $40
0000B4AF 4800 0146 40               	dc.b $48, $0, $1, $46, $40
0000B4B4 5808 0147 18               	dc.b $58, $8, $1, $47, $18
0000B4B9 13                         DATACABT4L5301I_5: dc.b $13
0000B4BA 280E 01E4 38               	dc.b $28, $E, $1, $E4, $38
0000B4BF 1805 01F0 48               	dc.b $18, $5, $1, $F0, $48
0000B4C4 4008 01F4 38               	dc.b $40, $8, $1, $F4, $38
0000B4C9 4804 01F7 38               	dc.b $48, $4, $1, $F7, $38
0000B4CE 100F 014A 10               	dc.b $10, $F, $1, $4A, $10
0000B4D3 0804 015A 20               	dc.b $8, $4, $1, $5A, $20
0000B4D8 000B 015C 30               	dc.b $0, $B, $1, $5C, $30
0000B4DD 0800 0168 48               	dc.b $8, $0, $1, $68, $48
0000B4E2 1800 0169 48               	dc.b $18, $0, $1, $69, $48
0000B4E7 1805 016A 00               	dc.b $18, $5, $1, $6A, $0
0000B4EC 2802 016E 08               	dc.b $28, $2, $1, $6E, $8
0000B4F1 300F 0171 10               	dc.b $30, $F, $1, $71, $10
0000B4F6 200D 0181 30               	dc.b $20, $D, $1, $81, $30
0000B4FB 2001 0189 50               	dc.b $20, $1, $1, $89, $50
0000B500 3008 018B 30               	dc.b $30, $8, $1, $8B, $30
0000B505 380E 018E 30               	dc.b $38, $E, $1, $8E, $30
0000B50A 500D 019A 08               	dc.b $50, $D, $1, $9A, $8
0000B50F 500C 01A2 28               	dc.b $50, $C, $1, $A2, $28
0000B514 5808 01A6 28               	dc.b $58, $8, $1, $A6, $28
0000B519 15                         DATACABT4L5301I_6: dc.b $15
0000B51A 280E 01E4 38               	dc.b $28, $E, $1, $E4, $38
0000B51F 1805 01F0 48               	dc.b $18, $5, $1, $F0, $48
0000B524 4008 01F4 38               	dc.b $40, $8, $1, $F4, $38
0000B529 4804 01F7 38               	dc.b $48, $4, $1, $F7, $38
0000B52E 180F 01D0 08               	dc.b $18, $F, $1, $D0, $8
0000B533 1803 01E0 28               	dc.b $18, $3, $1, $E0, $28
0000B538 100F 014A 10               	dc.b $10, $F, $1, $4A, $10
0000B53D 0804 015A 20               	dc.b $8, $4, $1, $5A, $20
0000B542 000B 015C 30               	dc.b $0, $B, $1, $5C, $30
0000B547 0800 0168 48               	dc.b $8, $0, $1, $68, $48
0000B54C 1800 0169 48               	dc.b $18, $0, $1, $69, $48
0000B551 1805 016A 00               	dc.b $18, $5, $1, $6A, $0
0000B556 2802 016E 08               	dc.b $28, $2, $1, $6E, $8
0000B55B 300F 0171 10               	dc.b $30, $F, $1, $71, $10
0000B560 200D 0181 30               	dc.b $20, $D, $1, $81, $30
0000B565 2001 0189 50               	dc.b $20, $1, $1, $89, $50
0000B56A 3008 018B 30               	dc.b $30, $8, $1, $8B, $30
0000B56F 380E 018E 30               	dc.b $38, $E, $1, $8E, $30
0000B574 500D 019A 08               	dc.b $50, $D, $1, $9A, $8
0000B579 500C 01A2 28               	dc.b $50, $C, $1, $A2, $28
0000B57E 5808 01A6 28               	dc.b $58, $8, $1, $A6, $28
0000B583 16                         DATACABT4L5301I_7: dc.b $16
0000B584 1804 01F9 38               	dc.b $18, $4, $1, $F9, $38
0000B589 2000 01FB 38               	dc.b $20, $0, $1, $FB, $38
0000B58E 2808 01FC 30               	dc.b $28, $8, $1, $FC, $30
0000B593 3001 01FF 30               	dc.b $30, $1, $1, $FF, $30
0000B598 300B 0201 38               	dc.b $30, $B, $2, $1, $38
0000B59D 180F 01D0 08               	dc.b $18, $F, $1, $D0, $8
0000B5A2 1803 01E0 28               	dc.b $18, $3, $1, $E0, $28
0000B5A7 100F 014A 10               	dc.b $10, $F, $1, $4A, $10
0000B5AC 0804 015A 20               	dc.b $8, $4, $1, $5A, $20
0000B5B1 000B 015C 30               	dc.b $0, $B, $1, $5C, $30
0000B5B6 0800 0168 48               	dc.b $8, $0, $1, $68, $48
0000B5BB 1800 0169 48               	dc.b $18, $0, $1, $69, $48
0000B5C0 1805 016A 00               	dc.b $18, $5, $1, $6A, $0
0000B5C5 2802 016E 08               	dc.b $28, $2, $1, $6E, $8
0000B5CA 300F 0171 10               	dc.b $30, $F, $1, $71, $10
0000B5CF 200D 0181 30               	dc.b $20, $D, $1, $81, $30
0000B5D4 2001 0189 50               	dc.b $20, $1, $1, $89, $50
0000B5D9 3008 018B 30               	dc.b $30, $8, $1, $8B, $30
0000B5DE 380E 018E 30               	dc.b $38, $E, $1, $8E, $30
0000B5E3 500D 019A 08               	dc.b $50, $D, $1, $9A, $8
0000B5E8 500C 01A2 28               	dc.b $50, $C, $1, $A2, $28
0000B5ED 5808 01A6 28               	dc.b $58, $8, $1, $A6, $28
0000B5F2 11                         DATACABT4L5301I_8: dc.b $11
0000B5F3 180F 01D0 08               	dc.b $18, $F, $1, $D0, $8
0000B5F8 1803 01E0 28               	dc.b $18, $3, $1, $E0, $28
0000B5FD 100F 014A 10               	dc.b $10, $F, $1, $4A, $10
0000B602 0804 015A 20               	dc.b $8, $4, $1, $5A, $20
0000B607 000B 015C 30               	dc.b $0, $B, $1, $5C, $30
0000B60C 0800 0168 48               	dc.b $8, $0, $1, $68, $48
0000B611 1800 0169 48               	dc.b $18, $0, $1, $69, $48
0000B616 1805 016A 00               	dc.b $18, $5, $1, $6A, $0
0000B61B 2802 016E 08               	dc.b $28, $2, $1, $6E, $8
0000B620 300F 0171 10               	dc.b $30, $F, $1, $71, $10
0000B625 200D 0181 30               	dc.b $20, $D, $1, $81, $30
0000B62A 2001 0189 50               	dc.b $20, $1, $1, $89, $50
0000B62F 3008 018B 30               	dc.b $30, $8, $1, $8B, $30
0000B634 380E 018E 30               	dc.b $38, $E, $1, $8E, $30
0000B639 500D 019A 08               	dc.b $50, $D, $1, $9A, $8
0000B63E 500C 01A2 28               	dc.b $50, $C, $1, $A2, $28
0000B643 5808 01A6 28               	dc.b $58, $8, $1, $A6, $28
0000B648 0F                         DATACABT4L5301I_9: dc.b $F
0000B649 100F 014A 10               	dc.b $10, $F, $1, $4A, $10
0000B64E 0804 015A 20               	dc.b $8, $4, $1, $5A, $20
0000B653 000B 015C 30               	dc.b $0, $B, $1, $5C, $30
0000B658 0800 0168 48               	dc.b $8, $0, $1, $68, $48
0000B65D 1800 0169 48               	dc.b $18, $0, $1, $69, $48
0000B662 1805 016A 00               	dc.b $18, $5, $1, $6A, $0
0000B667 2802 016E 08               	dc.b $28, $2, $1, $6E, $8
0000B66C 300F 0171 10               	dc.b $30, $F, $1, $71, $10
0000B671 200D 0181 30               	dc.b $20, $D, $1, $81, $30
0000B676 2001 0189 50               	dc.b $20, $1, $1, $89, $50
0000B67B 3008 018B 30               	dc.b $30, $8, $1, $8B, $30
0000B680 380E 018E 30               	dc.b $38, $E, $1, $8E, $30
0000B685 500D 019A 08               	dc.b $50, $D, $1, $9A, $8
0000B68A 500C 01A2 28               	dc.b $50, $C, $1, $A2, $28
0000B68F 5808 01A6 28               	dc.b $58, $8, $1, $A6, $28
0000B694                            	even
0000B694                            	even
0000B694                            
0000B694                            		include	"_incObj\2B Chopper.asm"
0000B694                            ; ---------------------------------------------------------------------------
0000B694                            ; Object 2B - Chopper enemy (GHZ)
0000B694                            ; ---------------------------------------------------------------------------
0000B694                            
0000B694                            Chopper:
0000B694 7000                       		moveq	#0,d0
0000B696 1028 0024                  		move.b	obRoutine(a0),d0
0000B69A 323B 0000                  		move.w	Chop_Index(pc,d0.w),d1
0000B69E 4EBB 1000                  		jsr	Chop_Index(pc,d1.w)
0000B6A2 6000 0000                  		bra.w	RememberState
0000B6A6                            ; ===========================================================================
0000B6A6 0000                       Chop_Index:	dc.w Chop_Main-Chop_Index
0000B6A8 0000                       		dc.w Chop_ChgSpeed-Chop_Index
0000B6AA                            
0000B6AA =00000030                  chop_origY:	equ $30
0000B6AA                            ; ===========================================================================
0000B6AA                            
0000B6AA                            Chop_Main:	; Routine 0
0000B6AA 5428 0024                  		addq.b	#2,obRoutine(a0)
0000B6AE 217C 0000 0000 0004        		move.l	#Map_Chop,obMap(a0)
0000B6B6 317C 247B 0002             		move.w	#$247B,obGfx(a0)
0000B6BC 117C 0004 0001             		move.b	#4,obRender(a0)
0000B6C2 117C 0004 0018             		move.b	#4,obPriority(a0)
0000B6C8 117C 0009 0020             		move.b	#9,obColType(a0)
0000B6CE 117C 0010 0019             		move.b	#$10,obActWid(a0)
0000B6D4 317C F900 0012             		move.w	#-$700,obVelY(a0) ; set vertical speed
0000B6DA 3168 000C 0030             		move.w	obY(a0),chop_origY(a0) ; save original position
0000B6E0                            
0000B6E0                            Chop_ChgSpeed:	; Routine 2
0000B6E0 43F9 0000 0000             		lea	(Ani_Chop).l,a1
0000B6E6 6100 FAFE                  		bsr.w	AnimateSprite
0000B6EA 6100 0000                  		bsr.w	SpeedToPos
0000B6EE 0668 0018 0012             		addi.w	#$18,obVelY(a0)	; reduce speed
0000B6F4 3028 0030                  		move.w	chop_origY(a0),d0
0000B6F8 B068 000C                  		cmp.w	obY(a0),d0	; has Chopper returned to its original position?
0000B6FC 6400                       		bcc.s	@chganimation	; if not, branch
0000B6FE 3140 000C                  		move.w	d0,obY(a0)
0000B702 317C F900 0012             		move.w	#-$700,obVelY(a0) ; set vertical speed
0000B708                            
0000B708                            	@chganimation:
0000B708 117C 0001 001C             		move.b	#1,obAnim(a0)	; use fast animation
0000B70E 0440 00C0                  		subi.w	#$C0,d0
0000B712 B068 000C                  		cmp.w	obY(a0),d0
0000B716 6400                       		bcc.s	@nochg
0000B718 117C 0000 001C             		move.b	#0,obAnim(a0)	; use slow animation
0000B71E 4A68 0012                  		tst.w	obVelY(a0)	; is Chopper at	its highest point?
0000B722 6B00                       		bmi.s	@nochg		; if not, branch
0000B724 117C 0002 001C             		move.b	#2,obAnim(a0)	; use stationary animation
0000B72A                            
0000B72A                            	@nochg:
0000B72A 4E75                       		rts	
0000B72A 4E75                       		rts	
0000B72C                            		include	"_anim\Chopper.asm"
0000B72C                            ; ---------------------------------------------------------------------------
0000B72C                            ; Animation script - Chopper enemy
0000B72C                            ; ---------------------------------------------------------------------------
0000B72C 0000                       Ani_Chop:	dc.w @slow-Ani_Chop
0000B72E 0000                       		dc.w @fast-Ani_Chop
0000B730 0000                       		dc.w @still-Ani_Chop
0000B732 0700 01FF                  @slow:		dc.b 7,	0, 1, afEnd
0000B736 0300 01FF                  @fast:		dc.b 3,	0, 1, afEnd
0000B73A 0700 FF                    @still:		dc.b 7,	0, afEnd
0000B73E 00                         		even
0000B73E 00                         		even
0000B73E                            Map_Chop:	include	"_maps\Chopper.asm"
0000B73E                            ; ---------------------------------------------------------------------------
0000B73E                            ; Sprite mappings - Chopper enemy (GHZ)
0000B73E                            ; ---------------------------------------------------------------------------
0000B73E                            Map_Chop_internal:
0000B73E 0000                       		dc.w @mouthshut-Map_Chop_internal
0000B740 0000                       		dc.w @mouthopen-Map_Chop_internal
0000B742 01                         @mouthshut:	dc.b 1
0000B743 F00F 0000 F0               		dc.b $F0, $F, 0, 0, $F0
0000B748 01                         @mouthopen:	dc.b 1
0000B749 F00F 0010 F0               		dc.b $F0, $F, 0, $10, $F0
0000B74E                            		even
0000B74E                            		even
0000B74E                            		include	"_incObj\2C Jaws.asm"
0000B74E                            ; ---------------------------------------------------------------------------
0000B74E                            ; Object 2C - Jaws enemy (LZ)
0000B74E                            ; ---------------------------------------------------------------------------
0000B74E                            
0000B74E                            Jaws:
0000B74E 7000                       		moveq	#0,d0
0000B750 1028 0024                  		move.b	obRoutine(a0),d0
0000B754 323B 0000                  		move.w	Jaws_Index(pc,d0.w),d1
0000B758 4EFB 1000                  		jmp	Jaws_Index(pc,d1.w)
0000B75C                            ; ===========================================================================
0000B75C 0000                       Jaws_Index:	dc.w Jaws_Main-Jaws_Index
0000B75E 0000                       		dc.w Jaws_Turn-Jaws_Index
0000B760                            
0000B760 =00000030                  jaws_timecount:	equ $30
0000B760 =00000032                  jaws_timedelay:	equ $32
0000B760                            ; ===========================================================================
0000B760                            
0000B760                            Jaws_Main:	; Routine 0
0000B760 5428 0024                  		addq.b	#2,obRoutine(a0)
0000B764 217C 0000 0000 0004        		move.l	#Map_Jaws,obMap(a0)
0000B76C 317C 2486 0002             		move.w	#$2486,obGfx(a0)
0000B772 0028 0004 0001             		ori.b	#4,obRender(a0)
0000B778 117C 000A 0020             		move.b	#$A,obColType(a0)
0000B77E 117C 0004 0018             		move.b	#4,obPriority(a0)
0000B784 117C 0010 0019             		move.b	#$10,obActWid(a0)
0000B78A 7000                       		moveq	#0,d0
0000B78C 1028 0028                  		move.b	obSubtype(a0),d0 ; load object subtype number
0000B790 ED48                       		lsl.w	#6,d0		; multiply d0 by 64
0000B792 5340                       		subq.w	#1,d0
0000B794 3140 0030                  		move.w	d0,jaws_timecount(a0) ; set turn delay time
0000B798 3140 0032                  		move.w	d0,jaws_timedelay(a0)
0000B79C 317C FFC0 0010             		move.w	#-$40,obVelX(a0) ; move Jaws to the left
0000B7A2 0828 0000 0022             		btst	#0,obStatus(a0)	; is Jaws facing left?
0000B7A8 6700                       		beq.s	Jaws_Turn	; if yes, branch
0000B7AA 4468 0010                  		neg.w	obVelX(a0)	; move Jaws to the right
0000B7AE                            
0000B7AE                            Jaws_Turn:	; Routine 2
0000B7AE 5368 0030                  		subq.w	#1,jaws_timecount(a0) ; subtract 1 from turn delay time
0000B7B2 6A00                       		bpl.s	@animate	; if time remains, branch
0000B7B4 3168 0032 0030             		move.w	jaws_timedelay(a0),jaws_timecount(a0) ; reset turn delay time
0000B7BA 4468 0010                  		neg.w	obVelX(a0)	; change speed direction
0000B7BE 0868 0000 0022             		bchg	#0,obStatus(a0)	; change Jaws facing direction
0000B7C4 117C 0001 001D             		move.b	#1,obNextAni(a0) ; reset animation
0000B7CA                            
0000B7CA                            	@animate:
0000B7CA 43F9 0000 0000             		lea	(Ani_Jaws).l,a1
0000B7D0 6100 FA14                  		bsr.w	AnimateSprite
0000B7D4 6100 0000                  		bsr.w	SpeedToPos
0000B7D8 6000 0000                  		bra.w	RememberState
0000B7D8 6000 0000                  		bra.w	RememberState
0000B7DC                            		include	"_anim\Jaws.asm"
0000B7DC                            ; ---------------------------------------------------------------------------
0000B7DC                            ; Animation script - Jaws enemy
0000B7DC                            ; ---------------------------------------------------------------------------
0000B7DC 0000                       Ani_Jaws:	dc.w @swim-Ani_Jaws
0000B7DE 0700 0102 03FF             @swim:		dc.b 7,	0, 1, 2, 3, afEnd
0000B7E4                            		even
0000B7E4                            		even
0000B7E4                            Map_Jaws:	include	"_maps\Jaws.asm"
0000B7E4                            ; ---------------------------------------------------------------------------
0000B7E4                            ; Sprite mappings - Jaws enemy (LZ)
0000B7E4                            ; ---------------------------------------------------------------------------
0000B7E4                            Map_Jaws_internal:
0000B7E4 0000                       		dc.w @open1-Map_Jaws_internal
0000B7E6 0000                       		dc.w @shut1-Map_Jaws_internal
0000B7E8 0000                       		dc.w @open2-Map_Jaws_internal
0000B7EA 0000                       		dc.w @shut2-Map_Jaws_internal
0000B7EC 02                         @open1:		dc.b 2
0000B7ED F40E 0000 F0               		dc.b $F4, $E, 0, 0, $F0	; mouth open
0000B7F2 F505 0018 10               		dc.b $F5, 5, 0,	$18, $10
0000B7F7 02                         @shut1:		dc.b 2
0000B7F8 F40E 000C F0               		dc.b $F4, $E, 0, $C, $F0 ; mouth shut
0000B7FD F505 001C 10               		dc.b $F5, 5, 0,	$1C, $10
0000B802 02                         @open2:		dc.b 2
0000B803 F40E 0000 F0               		dc.b $F4, $E, 0, 0, $F0
0000B808 F505 1018 10               		dc.b $F5, 5, $10, $18, $10
0000B80D 02                         @shut2:		dc.b 2
0000B80E F40E 000C F0               		dc.b $F4, $E, 0, $C, $F0
0000B813 F505 101C 10               		dc.b $F5, 5, $10, $1C, $10
0000B818                            		even
0000B818                            		even
0000B818                            		include	"_incObj\2D Burrobot.asm"
0000B818                            ; ---------------------------------------------------------------------------
0000B818                            ; Object 2D - Burrobot enemy (LZ)
0000B818                            ; ---------------------------------------------------------------------------
0000B818                            
0000B818                            Burrobot:
0000B818 7000                       		moveq	#0,d0
0000B81A 1028 0024                  		move.b	obRoutine(a0),d0
0000B81E 323B 0000                  		move.w	Burro_Index(pc,d0.w),d1
0000B822 4EFB 1000                  		jmp	Burro_Index(pc,d1.w)
0000B826                            ; ===========================================================================
0000B826 0000                       Burro_Index:	dc.w Burro_Main-Burro_Index
0000B828 0000                       		dc.w Burro_Action-Burro_Index
0000B82A                            
0000B82A =00000030                  burro_timedelay:	equ $30		; time between direction changes
0000B82A                            ; ===========================================================================
0000B82A                            
0000B82A                            Burro_Main:	; Routine 0
0000B82A 5428 0024                  		addq.b	#2,obRoutine(a0)
0000B82E 117C 0013 0016             		move.b	#$13,obHeight(a0)
0000B834 117C 0008 0017             		move.b	#8,obWidth(a0)
0000B83A 217C 0000 0000 0004        		move.l	#Map_Burro,obMap(a0)
0000B842 317C 04A6 0002             		move.w	#$4A6,obGfx(a0)
0000B848 0028 0004 0001             		ori.b	#4,obRender(a0)
0000B84E 117C 0004 0018             		move.b	#4,obPriority(a0)
0000B854 117C 0005 0020             		move.b	#5,obColType(a0)
0000B85A 117C 000C 0019             		move.b	#$C,obActWid(a0)
0000B860 5C28 0025                  		addq.b	#6,ob2ndRout(a0) ; run "Burro_ChkSonic" routine
0000B864 117C 0002 001C             		move.b	#2,obAnim(a0)
0000B86A                            
0000B86A                            Burro_Action:	; Routine 2
0000B86A 7000                       		moveq	#0,d0
0000B86C 1028 0025                  		move.b	ob2ndRout(a0),d0
0000B870 323B 0000                  		move.w	@index(pc,d0.w),d1
0000B874 4EBB 1000                  		jsr	@index(pc,d1.w)
0000B878 43F9 0000 0000             		lea	(Ani_Burro).l,a1
0000B87E 6100 F966                  		bsr.w	AnimateSprite
0000B882 6000 0000                  		bra.w	RememberState
0000B886                            ; ===========================================================================
0000B886 0000                       @index:		dc.w @changedir-@index
0000B888 0000                       		dc.w Burro_Move-@index
0000B88A 0000                       		dc.w Burro_Jump-@index
0000B88C 0000                       		dc.w Burro_ChkSonic-@index
0000B88E                            ; ===========================================================================
0000B88E                            
0000B88E                            @changedir:
0000B88E 5368 0030                  		subq.w	#1,burro_timedelay(a0)
0000B892 6A00                       		bpl.s	@nochg
0000B894 5428 0025                  		addq.b	#2,ob2ndRout(a0)
0000B898 317C 00FF 0030             		move.w	#255,burro_timedelay(a0)
0000B89E 317C 0080 0010             		move.w	#$80,obVelX(a0)
0000B8A4 117C 0001 001C             		move.b	#1,obAnim(a0)
0000B8AA 0868 0000 0022             		bchg	#0,obStatus(a0)	; change direction the Burrobot	is facing
0000B8B0 6700                       		beq.s	@nochg
0000B8B2 4468 0010                  		neg.w	obVelX(a0)	; change direction the Burrobot	is moving
0000B8B6                            
0000B8B6                            	@nochg:
0000B8B6 4E75                       		rts	
0000B8B8                            ; ===========================================================================
0000B8B8                            
0000B8B8                            Burro_Move:
0000B8B8 5368 0030                  		subq.w	#1,burro_timedelay(a0)
0000B8BC 6B00                       		bmi.s	loc_AD84
0000B8BE 6100 0000                  		bsr.w	SpeedToPos
0000B8C2 0868 0000 0032             		bchg	#0,$32(a0)
0000B8C8 6600                       		bne.s	loc_AD78
0000B8CA 3628 0008                  		move.w	obX(a0),d3
0000B8CE 0643 000C                  		addi.w	#$C,d3
0000B8D2 0828 0000 0022             		btst	#0,obStatus(a0)
0000B8D8 6600                       		bne.s	loc_AD6A
0000B8DA 0443 0018                  		subi.w	#$18,d3
0000B8DE                            
0000B8DE                            loc_AD6A:
0000B8DE 4EB9 0000 0000             		jsr	(ObjFloorDist2).l
0000B8E4 0C41 000C                  		cmpi.w	#$C,d1
0000B8E8 6C00                       		bge.s	loc_AD84
0000B8EA 4E75                       		rts	
0000B8EC                            ; ===========================================================================
0000B8EC                            
0000B8EC                            loc_AD78:
0000B8EC 4EB9 0000 0000             		jsr	(ObjFloorDist).l
0000B8F2 D368 000C                  		add.w	d1,obY(a0)
0000B8F6 4E75                       		rts	
0000B8F8                            ; ===========================================================================
0000B8F8                            
0000B8F8                            loc_AD84:
0000B8F8 0838 0002 FE0F             		btst	#2,(v_vbla_byte).w
0000B8FE 6700                       		beq.s	loc_ADA4
0000B900 5528 0025                  		subq.b	#2,ob2ndRout(a0)
0000B904 317C 003B 0030             		move.w	#59,burro_timedelay(a0)
0000B90A 317C 0000 0010             		move.w	#0,obVelX(a0)
0000B910 117C 0000 001C             		move.b	#0,obAnim(a0)
0000B916 4E75                       		rts	
0000B918                            ; ===========================================================================
0000B918                            
0000B918                            loc_ADA4:
0000B918 5428 0025                  		addq.b	#2,ob2ndRout(a0)
0000B91C 317C FC00 0012             		move.w	#-$400,obVelY(a0)
0000B922 117C 0002 001C             		move.b	#2,obAnim(a0)
0000B928 4E75                       		rts	
0000B92A                            ; ===========================================================================
0000B92A                            
0000B92A                            Burro_Jump:
0000B92A 6100 0000                  		bsr.w	SpeedToPos
0000B92E 0668 0018 0012             		addi.w	#$18,obVelY(a0)
0000B934 6B00                       		bmi.s	locret_ADF0
0000B936 117C 0003 001C             		move.b	#3,obAnim(a0)
0000B93C 4EB9 0000 0000             		jsr	(ObjFloorDist).l
0000B942 4A41                       		tst.w	d1
0000B944 6A00                       		bpl.s	locret_ADF0
0000B946 D368 000C                  		add.w	d1,obY(a0)
0000B94A 317C 0000 0012             		move.w	#0,obVelY(a0)
0000B950 117C 0001 001C             		move.b	#1,obAnim(a0)
0000B956 317C 00FF 0030             		move.w	#255,burro_timedelay(a0)
0000B95C 5528 0025                  		subq.b	#2,ob2ndRout(a0)
0000B960 6100 0000                  		bsr.w	Burro_ChkSonic2
0000B964                            
0000B964                            locret_ADF0:
0000B964 4E75                       		rts	
0000B966                            ; ===========================================================================
0000B966                            
0000B966                            Burro_ChkSonic:
0000B966 343C 0060                  		move.w	#$60,d2
0000B96A 6100 0000                  		bsr.w	Burro_ChkSonic2
0000B96E 6400                       		bcc.s	locret_AE20
0000B970 3038 D00C                  		move.w	(v_player+obY).w,d0
0000B974 9068 000C                  		sub.w	obY(a0),d0
0000B978 6400                       		bcc.s	locret_AE20
0000B97A 0C40 FF80                  		cmpi.w	#-$80,d0
0000B97E 6500                       		bcs.s	locret_AE20
0000B980 4A78 FE08                  		tst.w	(v_debuguse).w
0000B984 6600                       		bne.s	locret_AE20
0000B986 5528 0025                  		subq.b	#2,ob2ndRout(a0)
0000B98A 3141 0010                  		move.w	d1,obVelX(a0)
0000B98E 317C FC00 0012             		move.w	#-$400,obVelY(a0)
0000B994                            
0000B994                            locret_AE20:
0000B994 4E75                       		rts	
0000B996                            
0000B996                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000B996                            
0000B996                            
0000B996                            Burro_ChkSonic2:
0000B996 323C 0080                  		move.w	#$80,d1
0000B99A 08E8 0000 0022             		bset	#0,obStatus(a0)
0000B9A0 3038 D008                  		move.w	(v_player+obX).w,d0
0000B9A4 9068 0008                  		sub.w	obX(a0),d0
0000B9A8 6400                       		bcc.s	loc_AE40
0000B9AA 4440                       		neg.w	d0
0000B9AC 4441                       		neg.w	d1
0000B9AE 08A8 0000 0022             		bclr	#0,obStatus(a0)
0000B9B4                            
0000B9B4                            loc_AE40:
0000B9B4 B042                       		cmp.w	d2,d0
0000B9B6 4E75                       		rts	
0000B9B8                            ; End of function Burro_ChkSonic2
0000B9B8                            ; End of function Burro_ChkSonic2
0000B9B8                            		include	"_anim\Burrobot.asm"
0000B9B8                            ; ---------------------------------------------------------------------------
0000B9B8                            ; Animation script - Burrobot enemy
0000B9B8                            ; ---------------------------------------------------------------------------
0000B9B8 0000                       Ani_Burro:	dc.w @walk1-Ani_Burro
0000B9BA 0000                       		dc.w @walk2-Ani_Burro
0000B9BC 0000                       		dc.w @digging-Ani_Burro
0000B9BE 0000                       		dc.w @fall-Ani_Burro
0000B9C0 0300 06FF                  @walk1:		dc.b 3,	0, 6, afEnd
0000B9C4 0300 01FF                  @walk2:		dc.b 3,	0, 1, afEnd
0000B9C8 0302 03FF                  @digging:	dc.b 3,	2, 3, afEnd
0000B9CC 0304 FF                    @fall:		dc.b 3,	4, afEnd
0000B9D0 00                         		even
0000B9D0 00                         		even
0000B9D0                            		include	"_incObj\07 Imp.asm"
0000B9D0                            ; ---------------------------------------------------------------------------
0000B9D0                            ; Object 07 - Enemy Imp
0000B9D0                            ; ---------------------------------------------------------------------------
0000B9D0                            
0000B9D0                            Imp:
0000B9D0 7000                       		moveq	#0,d0
0000B9D2 1028 0024                  		move.b	obRoutine(a0),d0
0000B9D6 323B 0000                  		move.w	Imp_Index(pc,d0.w),d1
0000B9DA 4EFB 1000                  		jmp	Imp_Index(pc,d1.w)
0000B9DE                            ; ===========================================================================
0000B9DE 0000                       Imp_Index:	dc.w Imp_Main-Imp_Index
0000B9E0 0000                       		dc.w Imp_Action-Imp_Index
0000B9E2                            
0000B9E2 =00000030                  imp_timedelay:	equ $30		; time between direction changes
0000B9E2                            ; ===========================================================================
0000B9E2                            
0000B9E2                            Imp_Main:	; Routine 0
0000B9E2 5428 0024                  		addq.b	#2,obRoutine(a0)
0000B9E6 117C 0013 0016             		move.b	#$13,obHeight(a0)
0000B9EC 117C 0008 0017             		move.b	#8,obWidth(a0)
0000B9F2 217C 0000 0000 0004        		move.l	#Map_Imp,obMap(a0)
0000B9FA 317C 04A6 0002             		move.w	#$4A6,obGfx(a0)
0000BA00 0028 0004 0001             		ori.b	#4,obRender(a0)
0000BA06 117C 0004 0018             		move.b	#4,obPriority(a0)
0000BA0C 117C 0005 0020             		move.b	#5,obColType(a0)
0000BA12 117C 000C 0019             		move.b	#$C,obActWid(a0)
0000BA18                            	;	addq.b	#6,ob2ndRout(a0) ; run "Imp_ChkSonic" routine
0000BA18 117C 0002 001C             		move.b	#2,obAnim(a0)
0000BA1E                            		
0000BA1E                            locret_8D54:
0000BA1E 4E75                       		rts
0000BA20                            
0000BA20                            Imp_Action:	; Routine 2
0000BA20 7000                       		moveq	#0,d0
0000BA22 1028 0025                  		move.b	ob2ndRout(a0),d0
0000BA26 323B 0000                  		move.w	@index(pc,d0.w),d1
0000BA2A 4EBB 1000                  		jsr	@index(pc,d1.w)
0000BA2E 43F9 0000 0000             		lea	(Ani_Imp).l,a1
0000BA34 6100 F7B0                  		bsr.w	AnimateSprite
0000BA38 6000 0000                  		bra.w	RememberState
0000BA3C                            ; ===========================================================================
0000BA3C 0000                       @index:		dc.w @changedir-@index
0000BA3E 0000                       		dc.w Imp_Move-@index
0000BA40 0000                       		dc.w Imp_Jump-@index
0000BA42 0000                       		dc.w Imp_ChkSonic-@index
0000BA44                            ; ===========================================================================
0000BA44                            
0000BA44                            @changedir:
0000BA44 5368 0030                  		subq.w	#1,imp_timedelay(a0)
0000BA48 6A00                       		bpl.s	@nochg
0000BA4A 5428 0025                  		addq.b	#2,ob2ndRout(a0)
0000BA4E 317C 00FF 0030             		move.w	#255,imp_timedelay(a0)
0000BA54 317C 0080 0010             		move.w	#$80,obVelX(a0)
0000BA5A 117C 0001 001C             		move.b	#1,obAnim(a0)
0000BA60 0868 0000 0022             		bchg	#0,obStatus(a0)	; change direction the Imp	is facing
0000BA66 6700                       		beq.s	@nochg
0000BA68 4468 0010                  		neg.w	obVelX(a0)	; change direction the Imp	is moving
0000BA6C                            
0000BA6C                            	@nochg:
0000BA6C 4E75                       		rts	
0000BA6E                            ; ===========================================================================
0000BA6E                            
0000BA6E                            Imp_Move:
0000BA6E 5368 0030                  		subq.w	#1,imp_timedelay(a0)
0000BA72 6B00                       		bmi.s	loc_AD842
0000BA74 6100 0000                  		bsr.w	SpeedToPos
0000BA78 0868 0000 0032             		bchg	#0,$32(a0)
0000BA7E 6600                       		bne.s	loc_AD782
0000BA80 3628 0008                  		move.w	obX(a0),d3
0000BA84 0643 000C                  		addi.w	#$C,d3
0000BA88 0828 0000 0022             		btst	#0,obStatus(a0)
0000BA8E 6600                       		bne.s	loc_AD6A2
0000BA90 0443 0018                  		subi.w	#$18,d3
0000BA94                            
0000BA94                            loc_AD6A2:
0000BA94 4EB9 0000 0000             		jsr	(ObjFloorDist2).l
0000BA9A 0C41 000C                  		cmpi.w	#$C,d1
0000BA9E 6C00                       		bge.s	loc_AD842
0000BAA0 4E75                       		rts	
0000BAA2                            ; ===========================================================================
0000BAA2                            
0000BAA2                            loc_AD782:
0000BAA2 4EB9 0000 0000             		jsr	(ObjFloorDist).l
0000BAA8 D368 000C                  		add.w	d1,obY(a0)
0000BAAC 4E75                       		rts	
0000BAAE                            ; ===========================================================================
0000BAAE                            
0000BAAE                            loc_AD842:
0000BAAE 0838 0002 FE0F             		btst	#2,(v_vbla_byte).w
0000BAB4 6700                       		beq.s	loc_ADA42
0000BAB6 5528 0025                  		subq.b	#2,ob2ndRout(a0)
0000BABA 317C 003B 0030             		move.w	#59,imp_timedelay(a0)
0000BAC0 317C 0000 0010             		move.w	#0,obVelX(a0)
0000BAC6 117C 0000 001C             		move.b	#0,obAnim(a0)
0000BACC 4E75                       		rts	
0000BACE                            ; ===========================================================================
0000BACE                            
0000BACE                            loc_ADA42:
0000BACE 5428 0025                  		addq.b	#2,ob2ndRout(a0)
0000BAD2 317C FC00 0012             		move.w	#-$400,obVelY(a0)
0000BAD8 117C 0002 001C             		move.b	#2,obAnim(a0)
0000BADE 4E75                       		rts	
0000BAE0                            ; ===========================================================================
0000BAE0                            
0000BAE0                            Imp_Jump:
0000BAE0 6100 0000                  		bsr.w	SpeedToPos
0000BAE4 0668 0018 0012             		addi.w	#$18,obVelY(a0)
0000BAEA 6B00                       		bmi.s	locret_ADF02
0000BAEC 117C 0003 001C             		move.b	#3,obAnim(a0)
0000BAF2 4EB9 0000 0000             		jsr	(ObjFloorDist).l
0000BAF8 4A41                       		tst.w	d1
0000BAFA 6A00                       		bpl.s	locret_ADF02
0000BAFC D368 000C                  		add.w	d1,obY(a0)
0000BB00 317C 0000 0012             		move.w	#0,obVelY(a0)
0000BB06 117C 0001 001C             		move.b	#1,obAnim(a0)
0000BB0C 317C 00FF 0030             		move.w	#255,imp_timedelay(a0)
0000BB12 5528 0025                  		subq.b	#2,ob2ndRout(a0)
0000BB16 6100 0000                  		bsr.w	Imp_ChkSonic2
0000BB1A                            
0000BB1A                            locret_ADF02:
0000BB1A 4E75                       		rts	
0000BB1C                            ; ===========================================================================
0000BB1C                            
0000BB1C                            Imp_ChkSonic:
0000BB1C 343C 0060                  		move.w	#$60,d2
0000BB20 6100 0000                  		bsr.w	Imp_ChkSonic2
0000BB24 6400                       		bcc.s	locret_AE202
0000BB26 3038 D00C                  		move.w	(v_player+obY).w,d0
0000BB2A 9068 000C                  		sub.w	obY(a0),d0
0000BB2E 6400                       		bcc.s	locret_AE202
0000BB30 0C40 FFC0                  		cmpi.w	#-$40,d0
0000BB34 117C 0004 001C             		move.b	#4,obAnim(a0)
0000BB3A 6500                       		bcs.s	locret_AE202
0000BB3C 4A78 FE08                  		tst.w	(v_debuguse).w
0000BB40 6600                       		bne.s	locret_AE202
0000BB42 5528 0025                  		subq.b	#2,ob2ndRout(a0)
0000BB46 3141 0010                  		move.w	d1,obVelX(a0)
0000BB4A 317C FC00 0012             		move.w	#-$400,obVelY(a0)
0000BB50                            
0000BB50                            locret_AE202:
0000BB50 4E75                       		rts	
0000BB52                            
0000BB52                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000BB52                            
0000BB52                            
0000BB52                            Imp_ChkSonic2:
0000BB52 323C 0080                  		move.w	#$80,d1
0000BB56 08E8 0000 0022             		bset	#0,obStatus(a0)
0000BB5C 3038 D008                  		move.w	(v_player+obX).w,d0
0000BB60 9068 0008                  		sub.w	obX(a0),d0
0000BB64 6400                       		bcc.s	loc_AE402
0000BB66 4440                       		neg.w	d0
0000BB68 4441                       		neg.w	d1
0000BB6A 08A8 0000 0022             		bclr	#0,obStatus(a0)
0000BB70                            
0000BB70                            loc_AE402:
0000BB70 B042                       		cmp.w	d2,d0
0000BB72 4E75                       		rts	
0000BB74                            		
0000BB74                            		
0000BB74                            		include	"_anim\Imp.asm"
0000BB74                            ; ---------------------------------------------------------------------------
0000BB74                            ; Animation script - Imp enemy
0000BB74                            ; ---------------------------------------------------------------------------
0000BB74 0000                       Ani_Imp:	dc.w @walk1-Ani_Imp
0000BB76 0000                       		dc.w @walk2-Ani_Imp
0000BB78 0000                       		dc.w @digging-Ani_Imp
0000BB7A 0000                       		dc.w @fall-Ani_Imp
0000BB7C 0800 FF                    @walk1:		dc.b 8,	0, afEnd
0000BB7F 0F01 0002 00FF             @walk2:		dc.b 15, 1, 0, 2, 0, afEnd
0000BB85 0803 FF                    @digging:	dc.b 8, 3, afEnd
0000BB88 0803 FF                    @fall:		dc.b 8, 3, afEnd
0000BB8B 0404 05FF                  @dead:		dc.b 4,	4, 5, afEnd
0000BB90 00                         		even
0000BB90 00                         		even
0000BB90                            Map_Burro:	include	"_maps\Burrobot.asm"
0000BB90                            ; ---------------------------------------------------------------------------
0000BB90                            ; Sprite mappings - Burrobot enemy (LZ)
0000BB90                            ; ---------------------------------------------------------------------------
0000BB90                            Map_Burro_internal:
0000BB90 0000                       		dc.w @walk1-Map_Burro_internal
0000BB92 0000                       		dc.w @walk2-Map_Burro_internal
0000BB94 0000                       		dc.w @digging1-Map_Burro_internal
0000BB96 0000                       		dc.w @digging2-Map_Burro_internal
0000BB98 0000                       		dc.w @fall-Map_Burro_internal
0000BB9A 0000                       		dc.w @facedown-Map_Burro_internal
0000BB9C 0000                       		dc.w @walk3-Map_Burro_internal
0000BB9E 02                         @walk1:		dc.b 2
0000BB9F EC0A 0000 F0               		dc.b $EC, $A, 0, 0, $F0	; walking
0000BBA4 0409 0009 F4               		dc.b 4,	9, 0, 9, $F4
0000BBA9 02                         @walk2:		dc.b 2
0000BBAA EC0A 000F F0               		dc.b $EC, $A, 0, $F, $F0
0000BBAF 0409 0018 F4               		dc.b 4,	9, 0, $18, $F4
0000BBB4 02                         @digging1:	dc.b 2
0000BBB5 E80A 001E F4               		dc.b $E8, $A, 0, $1E, $F4 ; digging
0000BBBA 000A 0027 F4               		dc.b 0,	$A, 0, $27, $F4
0000BBBF 02                         @digging2:	dc.b 2
0000BBC0 E80A 0030 F4               		dc.b $E8, $A, 0, $30, $F4
0000BBC5 000A 0039 F4               		dc.b 0,	$A, 0, $39, $F4
0000BBCA 02                         @fall:		dc.b 2
0000BBCB E80A 000F F0               		dc.b $E8, $A, 0, $F, $F0 ; falling after jumping up
0000BBD0 000A 0042 F4               		dc.b 0,	$A, 0, $42, $F4
0000BBD5 02                         @facedown:	dc.b 2
0000BBD6 F406 004B E8               		dc.b $F4, 6, 0,	$4B, $E8 ; facing down (unused)
0000BBDB F40A 0051 F8               		dc.b $F4, $A, 0, $51, $F8
0000BBE0 02                         @walk3:		dc.b 2
0000BBE1 EC0A 000F F0               		dc.b $EC, $A, 0, $F, $F0
0000BBE6 0409 0009 F4               		dc.b 4,	9, 0, 9, $F4
0000BBEC 00                         		even
0000BBEC 00                         		even
0000BBEC                            Map_Imp:	include	"_maps\Imp.asm"
0000BBEC                            ; ================================================================================
0000BBEC                            ; Sprite Mappings - generated by Flex 2 Sat Jan 16 2021 02:21:46 GMT-0500 (Eastern Standard Time)
0000BBEC                            ; ================================================================================
0000BBEC                            
0000BBEC                            DATALF075XSCCR:
0000BBEC 0000 0000                  	dc.w DATALF075XSCCR_0-DATALF075XSCCR, DATALF075XSCCR_1-DATALF075XSCCR
0000BBF0 0000 0000                  	dc.w DATALF075XSCCR_2-DATALF075XSCCR, DATALF075XSCCR_3-DATALF075XSCCR
0000BBF4 02                         DATALF075XSCCR_0: dc.b $2
0000BBF5 F40F 0000 F0               	dc.b $F4, $F, $0, $0, $F0
0000BBFA EC0C 0010 F0               	dc.b $EC, $C, $0, $10, $F0
0000BBFF 02                         DATALF075XSCCR_1: dc.b $2
0000BC00 F40F 0014 F0               	dc.b $F4, $F, $0, $14, $F0
0000BC05 EC0C 0024 F0               	dc.b $EC, $C, $0, $24, $F0
0000BC0A 02                         DATALF075XSCCR_2: dc.b $2
0000BC0B F80F 0028 F0               	dc.b $F8, $F, $0, $28, $F0
0000BC10 F00C 0038 F0               	dc.b $F0, $C, $0, $38, $F0
0000BC15 01                         DATALF075XSCCR_3: dc.b $1
0000BC16 EC0F 003C F0               	dc.b $EC, $F, $0, $3C, $F0
0000BC1C 00                         	even
0000BC1C 00                         	even
0000BC1C                            
0000BC1C                            		include	"_incObj\2F MZ Large Grassy Platforms.asm"
0000BC1C                            ; ---------------------------------------------------------------------------
0000BC1C                            ; Object 2F - large grass-covered platforms (MZ)
0000BC1C                            ; ---------------------------------------------------------------------------
0000BC1C                            
0000BC1C                            LargeGrass:
0000BC1C 7000                       		moveq	#0,d0
0000BC1E 1028 0024                  		move.b	obRoutine(a0),d0
0000BC22 323B 0000                  		move.w	LGrass_Index(pc,d0.w),d1
0000BC26 4EFB 1000                  		jmp	LGrass_Index(pc,d1.w)
0000BC2A                            ; ===========================================================================
0000BC2A 0000                       LGrass_Index:	dc.w LGrass_Main-LGrass_Index
0000BC2C 0000                       		dc.w LGrass_Action-LGrass_Index
0000BC2E                            
0000BC2E =0000002A                  lgrass_origX:	equ $2A
0000BC2E =0000002C                  lgrass_origY:	equ $2C
0000BC2E                            
0000BC2E 0000                       LGrass_Data:	dc.w LGrass_Data1-LGrass_Data 	; collision angle data
0000BC30 0040                       		dc.b 0,	$40			; frame	number,	platform width
0000BC32 0000                       		dc.w LGrass_Data3-LGrass_Data
0000BC34 0140                       		dc.b 1,	$40
0000BC36 0000                       		dc.w LGrass_Data2-LGrass_Data
0000BC38 0220                       		dc.b 2,	$20
0000BC3A                            ; ===========================================================================
0000BC3A                            
0000BC3A                            LGrass_Main:	; Routine 0
0000BC3A 5428 0024                  		addq.b	#2,obRoutine(a0)
0000BC3E 217C 0000 0000 0004        		move.l	#Map_LGrass,obMap(a0)
0000BC46 317C C000 0002             		move.w	#$C000,obGfx(a0)
0000BC4C 117C 0004 0001             		move.b	#4,obRender(a0)
0000BC52 117C 0005 0018             		move.b	#5,obPriority(a0)
0000BC58 3168 000C 002C             		move.w	obY(a0),lgrass_origY(a0)
0000BC5E 3168 0008 002A             		move.w	obX(a0),lgrass_origX(a0)
0000BC64 7000                       		moveq	#0,d0
0000BC66 1028 0028                  		move.b	obSubtype(a0),d0
0000BC6A E448                       		lsr.w	#2,d0
0000BC6C 0240 001C                  		andi.w	#$1C,d0
0000BC70 43FB 00BC                  		lea	LGrass_Data(pc,d0.w),a1
0000BC74 3019                       		move.w	(a1)+,d0
0000BC76 45FB 00B6                  		lea	LGrass_Data(pc,d0.w),a2
0000BC7A 214A 0030                  		move.l	a2,$30(a0)
0000BC7E 1159 001A                  		move.b	(a1)+,obFrame(a0)
0000BC82 1151 0019                  		move.b	(a1),obActWid(a0)
0000BC86 0228 000F 0028             		andi.b	#$F,obSubtype(a0)
0000BC8C 117C 0040 0016             		move.b	#$40,obHeight(a0)
0000BC92 08E8 0004 0001             		bset	#4,1(a0)
0000BC98                            
0000BC98                            LGrass_Action:	; Routine 2
0000BC98 6100 0000                  		bsr.w	LGrass_Types
0000BC9C 4A28 0025                  		tst.b	ob2ndRout(a0)
0000BCA0 6700                       		beq.s	LGrass_Solid
0000BCA2 7200                       		moveq	#0,d1
0000BCA4 1228 0019                  		move.b	obActWid(a0),d1
0000BCA8 0641 000B                  		addi.w	#$B,d1
0000BCAC 6100 BF4C                  		bsr.w	ExitPlatform
0000BCB0 0829 0003 0022             		btst	#3,obStatus(a1)
0000BCB6 6600 0000                  		bne.w	LGrass_Slope
0000BCBA 4228 0025                  		clr.b	ob2ndRout(a0)
0000BCBE 6000                       		bra.s	LGrass_Display
0000BCC0                            ; ===========================================================================
0000BCC0                            
0000BCC0                            LGrass_Slope:
0000BCC0 7200                       		moveq	#0,d1
0000BCC2 1228 0019                  		move.b	obActWid(a0),d1
0000BCC6 0641 000B                  		addi.w	#$B,d1
0000BCCA 2468 0030                  		movea.l	$30(a0),a2
0000BCCE 3428 0008                  		move.w	obX(a0),d2
0000BCD2 6100 D088                  		bsr.w	SlopeObject2
0000BCD6 6000                       		bra.s	LGrass_Display
0000BCD8                            ; ===========================================================================
0000BCD8                            
0000BCD8                            LGrass_Solid:
0000BCD8 7200                       		moveq	#0,d1
0000BCDA 1228 0019                  		move.b	obActWid(a0),d1
0000BCDE 0641 000B                  		addi.w	#$B,d1
0000BCE2 343C 0020                  		move.w	#$20,d2
0000BCE6 0C28 0002 001A             		cmpi.b	#2,obFrame(a0)
0000BCEC 6600                       		bne.s	loc_AF8E
0000BCEE 343C 0030                  		move.w	#$30,d2
0000BCF2                            
0000BCF2                            loc_AF8E:
0000BCF2 2468 0030                  		movea.l	$30(a0),a2
0000BCF6 6100 0000                  		bsr.w	SolidObject2F
0000BCFA                            
0000BCFA                            LGrass_Display:
0000BCFA 6100 0000                  		bsr.w	DisplaySprite
0000BCFE 6000 0000                  		bra.w	LGrass_ChkDel
0000BD02                            
0000BD02                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000BD02                            
0000BD02                            
0000BD02                            LGrass_Types:
0000BD02 7000                       		moveq	#0,d0
0000BD04 1028 0028                  		move.b	obSubtype(a0),d0
0000BD08 0240 0007                  		andi.w	#7,d0
0000BD0C D040                       		add.w	d0,d0
0000BD0E 323B 0000                  		move.w	LGrass_TypeIndex(pc,d0.w),d1
0000BD12 4EFB 1000                  		jmp	LGrass_TypeIndex(pc,d1.w)
0000BD16                            ; End of function LGrass_Types
0000BD16                            
0000BD16                            ; ===========================================================================
0000BD16 0000                       LGrass_TypeIndex:dc.w LGrass_Type00-LGrass_TypeIndex
0000BD18 0000                       		dc.w LGrass_Type01-LGrass_TypeIndex
0000BD1A 0000                       		dc.w LGrass_Type02-LGrass_TypeIndex
0000BD1C 0000                       		dc.w LGrass_Type03-LGrass_TypeIndex
0000BD1E 0000                       		dc.w LGrass_Type04-LGrass_TypeIndex
0000BD20 0000                       		dc.w LGrass_Type05-LGrass_TypeIndex
0000BD22                            ; ===========================================================================
0000BD22                            
0000BD22                            LGrass_Type00:
0000BD22 4E75                       		rts			; type 00 platform doesn't move
0000BD24                            ; ===========================================================================
0000BD24                            
0000BD24                            LGrass_Type01:
0000BD24 1038 FE60                  		move.b	(v_oscillate+2).w,d0
0000BD28 323C 0020                  		move.w	#$20,d1
0000BD2C 6000                       		bra.s	LGrass_Move
0000BD2E                            ; ===========================================================================
0000BD2E                            
0000BD2E                            LGrass_Type02:
0000BD2E 1038 FE64                  		move.b	(v_oscillate+6).w,d0
0000BD32 323C 0030                  		move.w	#$30,d1
0000BD36 6000                       		bra.s	LGrass_Move
0000BD38                            ; ===========================================================================
0000BD38                            
0000BD38                            LGrass_Type03:
0000BD38 1038 FE68                  		move.b	(v_oscillate+$A).w,d0
0000BD3C 323C 0040                  		move.w	#$40,d1
0000BD40 6000                       		bra.s	LGrass_Move
0000BD42                            ; ===========================================================================
0000BD42                            
0000BD42                            LGrass_Type04:
0000BD42 1038 FE6C                  		move.b	(v_oscillate+$E).w,d0
0000BD46 323C 0060                  		move.w	#$60,d1
0000BD4A                            
0000BD4A                            LGrass_Move:
0000BD4A 0828 0003 0028             		btst	#3,obSubtype(a0)
0000BD50 6700                       		beq.s	loc_AFF2
0000BD52 4440                       		neg.w	d0
0000BD54 D041                       		add.w	d1,d0
0000BD56                            
0000BD56                            loc_AFF2:
0000BD56 3228 002C                  		move.w	lgrass_origY(a0),d1
0000BD5A 9240                       		sub.w	d0,d1
0000BD5C 3141 000C                  		move.w	d1,obY(a0)	; update position on y-axis
0000BD60 4E75                       		rts	
0000BD62                            ; ===========================================================================
0000BD62                            
0000BD62                            LGrass_Type05:
0000BD62 1028 0034                  		move.b	$34(a0),d0
0000BD66 4A28 0025                  		tst.b	ob2ndRout(a0)
0000BD6A 6600                       		bne.s	loc_B010
0000BD6C 5500                       		subq.b	#2,d0
0000BD6E 6400                       		bcc.s	loc_B01C
0000BD70 7000                       		moveq	#0,d0
0000BD72 6000                       		bra.s	loc_B01C
0000BD74                            ; ===========================================================================
0000BD74                            
0000BD74                            loc_B010:
0000BD74 5800                       		addq.b	#4,d0
0000BD76 0C00 0040                  		cmpi.b	#$40,d0
0000BD7A 6500                       		bcs.s	loc_B01C
0000BD7C 103C 0040                  		move.b	#$40,d0
0000BD80                            
0000BD80                            loc_B01C:
0000BD80 1140 0034                  		move.b	d0,$34(a0)
0000BD84 4EB9 0000 27EC             		jsr	(CalcSine).l
0000BD8A E848                       		lsr.w	#4,d0
0000BD8C 3200                       		move.w	d0,d1
0000BD8E D068 002C                  		add.w	lgrass_origY(a0),d0
0000BD92 3140 000C                  		move.w	d0,obY(a0)
0000BD96 0C28 0020 0034             		cmpi.b	#$20,$34(a0)
0000BD9C 6600                       		bne.s	loc_B07A
0000BD9E 4A28 0035                  		tst.b	$35(a0)
0000BDA2 6600                       		bne.s	loc_B07A
0000BDA4 117C 0001 0035             		move.b	#1,$35(a0)
0000BDAA 6100 0000                  		bsr.w	FindNextFreeObj
0000BDAE 6600                       		bne.s	loc_B07A
0000BDB0 137C 0000 0000             		move.b	#id_GrassFire,0(a1) ; load sitting flame object
0000BDB6 3368 0008 0008             		move.w	obX(a0),obX(a1)
0000BDBC 3368 002C 002C             		move.w	lgrass_origY(a0),lgrass_origY(a1)
0000BDC2 5069 002C                  		addq.w	#8,lgrass_origY(a1)
0000BDC6 5769 002C                  		subq.w	#3,lgrass_origY(a1)
0000BDCA 0469 0040 0008             		subi.w	#$40,obX(a1)
0000BDD0 2368 0030 0030             		move.l	$30(a0),$30(a1)
0000BDD6 2348 0038                  		move.l	a0,$38(a1)
0000BDDA 2448                       		movea.l	a0,a2
0000BDDC 6100                       		bsr.s	sub_B09C
0000BDDE                            
0000BDDE                            loc_B07A:
0000BDDE 7400                       		moveq	#0,d2
0000BDE0 45E8 0036                  		lea	$36(a0),a2
0000BDE4 141A                       		move.b	(a2)+,d2
0000BDE6 5302                       		subq.b	#1,d2
0000BDE8 6500                       		bcs.s	locret_B09A
0000BDEA                            
0000BDEA                            loc_B086:
0000BDEA 7000                       		moveq	#0,d0
0000BDEC 101A                       		move.b	(a2)+,d0
0000BDEE ED48                       		lsl.w	#6,d0
0000BDF0 0640 D000                  		addi.w	#$D000,d0
0000BDF4 3240                       		movea.w	d0,a1
0000BDF6 3341 003C                  		move.w	d1,$3C(a1)
0000BDFA 51CA FFEE                  		dbf	d2,loc_B086
0000BDFE                            
0000BDFE                            locret_B09A:
0000BDFE 4E75                       		rts	
0000BE00                            
0000BE00                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000BE00                            
0000BE00                            
0000BE00                            sub_B09C:
0000BE00 45EA 0036                  		lea	$36(a2),a2
0000BE04 7000                       		moveq	#0,d0
0000BE06 1012                       		move.b	(a2),d0
0000BE08 5212                       		addq.b	#1,(a2)
0000BE0A 45F2 0001                  		lea	1(a2,d0.w),a2
0000BE0E 3009                       		move.w	a1,d0
0000BE10 0440 D000                  		subi.w	#$D000,d0
0000BE14 EC48                       		lsr.w	#6,d0
0000BE16 0240 007F                  		andi.w	#$7F,d0
0000BE1A 1480                       		move.b	d0,(a2)
0000BE1C 4E75                       		rts	
0000BE1E                            ; End of function sub_B09C
0000BE1E                            
0000BE1E                            ; ===========================================================================
0000BE1E                            
0000BE1E                            LGrass_ChkDel:
0000BE1E 4A28 0035                  		tst.b	$35(a0)
0000BE22 6700                       		beq.s	loc_B0C6
0000BE24 4A28 0001                  		tst.b	obRender(a0)
0000BE28 6A00                       		bpl.s	LGrass_DelFlames
0000BE2A                            
0000BE2A                            loc_B0C6:
0000BE48 4E75                       		rts	
0000BE4A                            ; ===========================================================================
0000BE4A                            
0000BE4A                            LGrass_DelFlames:
0000BE4A 7400                       		moveq	#0,d2
0000BE4C                            
0000BE4C                            loc_B0E8:
0000BE4C 45E8 0036                  		lea	$36(a0),a2
0000BE50 1412                       		move.b	(a2),d2
0000BE52 421A                       		clr.b	(a2)+
0000BE54 5302                       		subq.b	#1,d2
0000BE56 6500                       		bcs.s	locret_B116
0000BE58                            
0000BE58                            loc_B0F4:
0000BE58 7000                       		moveq	#0,d0
0000BE5A 1012                       		move.b	(a2),d0
0000BE5C 421A                       		clr.b	(a2)+
0000BE5E ED48                       		lsl.w	#6,d0
0000BE60 0640 D000                  		addi.w	#$D000,d0
0000BE64 3240                       		movea.w	d0,a1
0000BE66 6100 0000                  		bsr.w	DeleteChild
0000BE6A 51CA FFEC                  		dbf	d2,loc_B0F4
0000BE6E 117C 0000 0035             		move.b	#0,$35(a0)
0000BE74 117C 0000 0034             		move.b	#0,$34(a0)
0000BE7A                            
0000BE7A                            locret_B116:
0000BE7A 4E75                       		rts	
0000BE7C                            ; ===========================================================================
0000BE7C                            ; ---------------------------------------------------------------------------
0000BE7C                            ; Collision data for large moving platforms (MZ)
0000BE7C                            ; ---------------------------------------------------------------------------
0000BE7C                            LGrass_Data1:	incbin	"misc\mz_pfm1.bin"
0000BEC8                            		even
0000BEC8                            LGrass_Data2:	incbin	"misc\mz_pfm2.bin"
0000BEF4                            		even
0000BEF4                            LGrass_Data3:	incbin	"misc\mz_pfm3.bin"
0000BF40                            		even
0000BF40                            		even
0000BF40                            		include	"_incObj\35 Burning Grass.asm"
0000BF40                            ; ---------------------------------------------------------------------------
0000BF40                            ; Object 35 - fireball that sits on the	floor (MZ)
0000BF40                            ; (appears when	you walk on sinking platforms)
0000BF40                            ; ---------------------------------------------------------------------------
0000BF40                            
0000BF40                            GrassFire:
0000BF40 7000                       		moveq	#0,d0
0000BF42 1028 0024                  		move.b	obRoutine(a0),d0
0000BF46 323B 0000                  		move.w	GFire_Index(pc,d0.w),d1
0000BF4A 4EFB 1000                  		jmp	GFire_Index(pc,d1.w)
0000BF4E                            ; ===========================================================================
0000BF4E 0000                       GFire_Index:	dc.w GFire_Main-GFire_Index
0000BF50 0000                       		dc.w loc_B238-GFire_Index
0000BF52 0000                       		dc.w GFire_Move-GFire_Index
0000BF54                            
0000BF54 =0000002A                  gfire_origX:	equ $2A
0000BF54                            ; ===========================================================================
0000BF54                            
0000BF54                            GFire_Main:	; Routine 0
0000BF54 5428 0024                  		addq.b	#2,obRoutine(a0)
0000BF58 217C 0000 0000 0004        		move.l	#Map_Fire,obMap(a0)
0000BF60 317C 0345 0002             		move.w	#$345,obGfx(a0)
0000BF66 3168 0008 002A             		move.w	obX(a0),gfire_origX(a0)
0000BF6C 117C 0004 0001             		move.b	#4,obRender(a0)
0000BF72 117C 0001 0018             		move.b	#1,obPriority(a0)
0000BF78 117C 008B 0020             		move.b	#$8B,obColType(a0)
0000BF7E 117C 0008 0019             		move.b	#8,obActWid(a0)
0000BF8E 4A28 0028                  		tst.b	obSubtype(a0)
0000BF92 6700                       		beq.s	loc_B238
0000BF94 5428 0024                  		addq.b	#2,obRoutine(a0)
0000BF98 6000 0000                  		bra.w	GFire_Move
0000BF9C                            ; ===========================================================================
0000BF9C                            
0000BF9C                            loc_B238:	; Routine 2
0000BF9C 2268 0030                  		movea.l	$30(a0),a1
0000BFA0 3228 0008                  		move.w	obX(a0),d1
0000BFA4 9268 002A                  		sub.w	gfire_origX(a0),d1
0000BFA8 0641 000C                  		addi.w	#$C,d1
0000BFAC 3001                       		move.w	d1,d0
0000BFAE E248                       		lsr.w	#1,d0
0000BFB0 1031 0000                  		move.b	(a1,d0.w),d0
0000BFB4 4440                       		neg.w	d0
0000BFB6 D068 002C                  		add.w	$2C(a0),d0
0000BFBA 3400                       		move.w	d0,d2
0000BFBC D068 003C                  		add.w	$3C(a0),d0
0000BFC0 3140 000C                  		move.w	d0,obY(a0)
0000BFC4 0C41 0084                  		cmpi.w	#$84,d1
0000BFC8 6400                       		bcc.s	loc_B2B0
0000BFCA 06A8 0001 0000 0008        		addi.l	#$10000,obX(a0)
0000BFD2 0C41 0080                  		cmpi.w	#$80,d1
0000BFD6 6400                       		bcc.s	loc_B2B0
0000BFD8 2028 0008                  		move.l	obX(a0),d0
0000BFDC 0680 0008 0000             		addi.l	#$80000,d0
0000BFE2 0280 000F FFFF             		andi.l	#$FFFFF,d0
0000BFE8 6600                       		bne.s	loc_B2B0
0000BFEA 6100 0000                  		bsr.w	FindNextFreeObj
0000BFEE 6600                       		bne.s	loc_B2B0
0000BFF0 137C 0000 0000             		move.b	#id_GrassFire,0(a1)
0000BFF6 3368 0008 0008             		move.w	obX(a0),obX(a1)
0000BFFC 3342 002C                  		move.w	d2,$2C(a1)
0000C000 3368 003C 003C             		move.w	$3C(a0),$3C(a1)
0000C006 137C 0001 0028             		move.b	#1,obSubtype(a1)
0000C00C 2468 0038                  		movea.l	$38(a0),a2
0000C010 6100 FDEE                  		bsr.w	sub_B09C
0000C014                            
0000C014                            loc_B2B0:
0000C014 6000                       		bra.s	GFire_Animate
0000C016                            ; ===========================================================================
0000C016                            
0000C016                            GFire_Move:	; Routine 4
0000C016 3028 002C                  		move.w	$2C(a0),d0
0000C01A D068 003C                  		add.w	$3C(a0),d0
0000C01E 3140 000C                  		move.w	d0,obY(a0)
0000C022                            
0000C022                            GFire_Animate:
0000C022 43F9 0000 0000             		lea	(Ani_GFire).l,a1
0000C028 6100 F1BC                  		bsr.w	AnimateSprite
0000C02C 6000 0000                  		bra.w	DisplaySprite
0000C02C 6000 0000                  		bra.w	DisplaySprite
0000C030                            		include	"_anim\Burning Grass.asm"
0000C030                            ; ---------------------------------------------------------------------------
0000C030                            ; Animation script - burning grass that sits on the floor (MZ)
0000C030                            ; ---------------------------------------------------------------------------
0000C030 0000                       Ani_GFire:	dc.w @burn-Ani_GFire
0000C032 0500 2001 21FF             @burn:		dc.b 5,	0, $20,	1, $21,	afEnd
0000C038                            		even
0000C038                            		even
0000C038                            Map_LGrass:	include	"_maps\MZ Large Grassy Platforms.asm"
0000C038                            ; ---------------------------------------------------------------------------
0000C038                            ; Sprite mappings - large moving grass-covered platforms (MZ)
0000C038                            ; ---------------------------------------------------------------------------
0000C038                            Map_LGrass_internal:
0000C038 0000                       		dc.w @wide-Map_LGrass_internal
0000C03A 0000                       		dc.w @sloped-Map_LGrass_internal
0000C03C 0000                       		dc.w @narrow-Map_LGrass_internal
0000C03E 0D                         @wide:		dc.b $D
0000C03F D806 0057 C0               		dc.b $D8, 6, 0,	$57, $C0 ; wide platform
0000C044 F005 0053 C0               		dc.b $F0, 5, 0,	$53, $C0
0000C049 000F 0001 C0               		dc.b 0,	$F, 0, 1, $C0
0000C04E D00F 0027 D0               		dc.b $D0, $F, 0, $27, $D0
0000C053 F00D 0037 D0               		dc.b $F0, $D, 0, $37, $D0
0000C058 F00F 0001 E0               		dc.b $F0, $F, 0, 1, $E0
0000C05D D00F 0011 F0               		dc.b $D0, $F, 0, $11, $F0
0000C062 D00F 003F 10               		dc.b $D0, $F, 0, $3F, $10
0000C067 F00D 004F 10               		dc.b $F0, $D, 0, $4F, $10
0000C06C F00F 0001 00               		dc.b $F0, $F, 0, 1, 0
0000C071 000F 0001 20               		dc.b 0,	$F, 0, 1, $20
0000C076 D806 0057 30               		dc.b $D8, 6, 0,	$57, $30
0000C07B F005 0053 30               		dc.b $F0, 5, 0,	$53, $30
0000C080 0A                         @sloped:	dc.b $A
0000C081 D00F 0027 C0               		dc.b $D0, $F, 0, $27, $C0 ; sloped platform (catches fire)
0000C086 F00D 0037 C0               		dc.b $F0, $D, 0, $37, $C0
0000C08B 000F 0001 C0               		dc.b 0,	$F, 0, 1, $C0
0000C090 C00F 0027 E0               		dc.b $C0, $F, 0, $27, $E0
0000C095 E00D 0037 E0               		dc.b $E0, $D, 0, $37, $E0
0000C09A F00F 0001 E0               		dc.b $F0, $F, 0, 1, $E0
0000C09F C00F 0011 00               		dc.b $C0, $F, 0, $11, 0
0000C0A4 E00F 0001 00               		dc.b $E0, $F, 0, 1, 0
0000C0A9 C00F 003F 20               		dc.b $C0, $F, 0, $3F, $20
0000C0AE E00D 004F 20               		dc.b $E0, $D, 0, $4F, $20
0000C0B3 06                         @narrow:	dc.b 6
0000C0B4 D00F 0011 E0               		dc.b $D0, $F, 0, $11, $E0 ; narrow platform
0000C0B9 F00F 0001 E0               		dc.b $F0, $F, 0, 1, $E0
0000C0BE 100F 0001 E0               		dc.b $10, $F, 0, 1, $E0
0000C0C3 D00F 0011 00               		dc.b $D0, $F, 0, $11, 0
0000C0C8 F00F 0001 00               		dc.b $F0, $F, 0, 1, 0
0000C0CD 100F 0001 00               		dc.b $10, $F, 0, 1, 0
0000C0D2                            		even
0000C0D2                            		even
0000C0D2                            Map_Fire:	include	"_maps\Fireballs.asm"
0000C0D2                            ; ---------------------------------------------------------------------------
0000C0D2                            ; Sprite mappings - fire balls (MZ, SLZ)
0000C0D2                            ; ---------------------------------------------------------------------------
0000C0D2                            Map_Fire_internal:
0000C0D2 0000                       		dc.w @vertical1-Map_Fire_internal
0000C0D4 0000                       		dc.w @vertical2-Map_Fire_internal
0000C0D6 0000                       		dc.w @vertcollide-Map_Fire_internal
0000C0D8 0000                       		dc.w @horizontal1-Map_Fire_internal
0000C0DA 0000                       		dc.w @horizontal2-Map_Fire_internal
0000C0DC 0000                       		dc.w @horicollide-Map_Fire_internal
0000C0DE 01                         @vertical1:	dc.b 1
0000C0DF E807 0000 F8               		dc.b $E8, 7, 0,	0, $F8
0000C0E4 01                         @vertical2:	dc.b 1
0000C0E5 E807 0008 F8               		dc.b $E8, 7, 0,	8, $F8
0000C0EA 01                         @vertcollide:	dc.b 1
0000C0EB F006 0010 F8               		dc.b $F0, 6, 0,	$10, $F8
0000C0F0 01                         @horizontal1:	dc.b 1
0000C0F1 F80D 0016 E8               		dc.b $F8, $D, 0, $16, $E8
0000C0F6 01                         @horizontal2:	dc.b 1
0000C0F7 F80D 001E E8               		dc.b $F8, $D, 0, $1E, $E8
0000C0FC 01                         @horicollide:	dc.b 1
0000C0FD F809 0026 F0               		dc.b $F8, 9, 0,	$26, $F0
0000C102                            		even
0000C102                            		even
0000C102                            		include	"_incObj\30 MZ Large Green Glass Blocks.asm"
0000C102                            ; ---------------------------------------------------------------------------
0000C102                            ; Object 30 - large green glass blocks (MZ)
0000C102                            ; ---------------------------------------------------------------------------
0000C102                            
0000C102                            GlassBlock:
0000C102 7000                       		moveq	#0,d0
0000C104 1028 0024                  		move.b	obRoutine(a0),d0
0000C108 323B 0000                  		move.w	Glass_Index(pc,d0.w),d1
0000C10C 4EBB 1000                  		jsr	Glass_Index(pc,d1.w)
0000C12E 6000 0000                  		bra.w	DisplaySprite
0000C132                            ; ===========================================================================
0000C132                            
0000C132                            Glass_Delete:
0000C132 6000 0000                  		bra.w	DeleteObject
0000C136                            ; ===========================================================================
0000C136 0000                       Glass_Index:	dc.w Glass_Main-Glass_Index
0000C138 0000                       		dc.w Glass_Block012-Glass_Index
0000C13A 0000                       		dc.w Glass_Reflect012-Glass_Index
0000C13C 0000                       		dc.w Glass_Block34-Glass_Index
0000C13E 0000                       		dc.w Glass_Reflect34-Glass_Index
0000C140                            
0000C140 =00000032                  glass_dist:	equ $32		; distance block moves when switch is pressed
0000C140 =0000003C                  glass_parent:	equ $3C		; address of parent object
0000C140                            
0000C140 0200 00                    Glass_Vars1:	dc.b 2,	0, 0	; routine num, y-axis dist from	origin,	frame num
0000C143 0400 01                    		dc.b 4,	0, 1
0000C146 0600 02                    Glass_Vars2:	dc.b 6,	0, 2
0000C149 0800 01                    		dc.b 8,	0, 1
0000C14C                            ; ===========================================================================
0000C14C                            
0000C14C                            Glass_Main:	; Routine 0
0000C14C 45F9 0000 C140             		lea	(Glass_Vars1).l,a2
0000C152 7201                       		moveq	#1,d1
0000C154 117C 0048 0016             		move.b	#$48,obHeight(a0)
0000C15A 0C28 0003 0028             		cmpi.b	#3,obSubtype(a0) ; is object type 0/1/2 ?
0000C160 6500                       		bcs.s	@IsType012	; if yes, branch
0000C162                            
0000C162 45F9 0000 C146             		lea	(Glass_Vars2).l,a2
0000C168 7201                       		moveq	#1,d1
0000C16A 117C 0038 0016             		move.b	#$38,obHeight(a0)
0000C170                            
0000C170                            	@IsType012:
0000C170 2248                       		movea.l	a0,a1
0000C172 6000                       		bra.s	@Load		; load main object
0000C174                            ; ===========================================================================
0000C174                            
0000C174                            	@Repeat:
0000C174 6100 0000                  		bsr.w	FindNextFreeObj
0000C178 6600                       		bne.s	@Fail
0000C17A                            
0000C17A                            @Load:
0000C17A 135A 0024                  		move.b	(a2)+,obRoutine(a1)
0000C17E 137C 0000 0000             		move.b	#id_GlassBlock,0(a1)
0000C184 3368 0008 0008             		move.w	obX(a0),obX(a1)
0000C18A 101A                       		move.b	(a2)+,d0
0000C18C 4880                       		ext.w	d0
0000C18E D068 000C                  		add.w	obY(a0),d0
0000C192 3340 000C                  		move.w	d0,obY(a1)
0000C196 237C 0000 0000 0004        		move.l	#Map_Glass,obMap(a1)
0000C19E 337C C38E 0002             		move.w	#$C38E,obGfx(a1)
0000C1A4 137C 0004 0001             		move.b	#4,obRender(a1)
0000C1AA 3369 000C 0030             		move.w	obY(a1),$30(a1)
0000C1B0 1368 0028 0028             		move.b	obSubtype(a0),obSubtype(a1)
0000C1B6 137C 0020 0019             		move.b	#$20,obActWid(a1)
0000C1BC 137C 0004 0018             		move.b	#4,obPriority(a1)
0000C1C2 135A 001A                  		move.b	(a2)+,obFrame(a1)
0000C1C6 2348 003C                  		move.l	a0,glass_parent(a1)
0000C1CA 51C9 FFA8                  		dbf	d1,@Repeat	; repeat once to load "reflection object"
0000C1CE                            
0000C1CE 137C 0010 0019             		move.b	#$10,obActWid(a1)
0000C1D4 137C 0003 0018             		move.b	#3,obPriority(a1)
0000C1DA 5029 0028                  		addq.b	#8,obSubtype(a1)
0000C1DE 0229 000F 0028             		andi.b	#$F,obSubtype(a1)
0000C1E4                            
0000C1E4                            	@Fail:
0000C1E4 317C 0090 0032             		move.w	#$90,glass_dist(a0)
0000C1EA 08E8 0004 0001             		bset	#4,obRender(a0)
0000C1F0                            
0000C1F0                            Glass_Block012:	; Routine 2
0000C1F0 6100 0000                  		bsr.w	Glass_Types
0000C1F4 323C 002B                  		move.w	#$2B,d1
0000C1F8 343C 0048                  		move.w	#$48,d2
0000C1FC 363C 0049                  		move.w	#$49,d3
0000C200 3828 0008                  		move.w	obX(a0),d4
0000C204 6000 0000                  		bra.w	SolidObject
0000C208                            ; ===========================================================================
0000C208                            
0000C208                            Glass_Reflect012:
0000C208                            		; Routine 4
0000C208 2268 003C                  		movea.l	$3C(a0),a1
0000C20C 3169 0032 0032             		move.w	glass_dist(a1),glass_dist(a0)
0000C212 6000 0000                  		bra.w	Glass_Types
0000C216                            ; ===========================================================================
0000C216                            
0000C216                            Glass_Block34:	; Routine 6
0000C216 6100 0000                  		bsr.w	Glass_Types
0000C21A 323C 002B                  		move.w	#$2B,d1
0000C21E 343C 0038                  		move.w	#$38,d2
0000C222 363C 0039                  		move.w	#$39,d3
0000C226 3828 0008                  		move.w	obX(a0),d4
0000C22A 6000 0000                  		bra.w	SolidObject
0000C22E                            ; ===========================================================================
0000C22E                            
0000C22E                            Glass_Reflect34:
0000C22E                            		; Routine 8
0000C22E 2268 003C                  		movea.l	$3C(a0),a1
0000C232 3169 0032 0032             		move.w	glass_dist(a1),glass_dist(a0)
0000C238 3169 000C 0030             		move.w	obY(a1),$30(a0)
0000C23E 6000 0000                  		bra.w	Glass_Types
0000C242                            
0000C242                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000C242                            
0000C242                            
0000C242                            Glass_Types:
0000C242 7000                       		moveq	#0,d0
0000C244 1028 0028                  		move.b	obSubtype(a0),d0
0000C248 0240 0007                  		andi.w	#7,d0
0000C24C D040                       		add.w	d0,d0
0000C24E 323B 0000                  		move.w	Glass_TypeIndex(pc,d0.w),d1
0000C252 4EFB 1000                  		jmp	Glass_TypeIndex(pc,d1.w)
0000C256                            ; End of function Glass_Types
0000C256                            
0000C256                            ; ===========================================================================
0000C256 0000                       Glass_TypeIndex:dc.w Glass_Type00-Glass_TypeIndex
0000C258 0000                       		dc.w Glass_Type01-Glass_TypeIndex
0000C25A 0000                       		dc.w Glass_Type02-Glass_TypeIndex
0000C25C 0000                       		dc.w Glass_Type03-Glass_TypeIndex
0000C25E 0000                       		dc.w Glass_Type04-Glass_TypeIndex
0000C260                            ; ===========================================================================
0000C260                            
0000C260                            Glass_Type00:
0000C260 4E75                       		rts	
0000C262                            ; ===========================================================================
0000C262                            
0000C262                            Glass_Type01:
0000C262 1038 FE70                  		move.b	(v_oscillate+$12).w,d0
0000C266 323C 0040                  		move.w	#$40,d1
0000C26A 6000                       		bra.s	loc_B514
0000C26C                            ; ===========================================================================
0000C26C                            
0000C26C                            Glass_Type02:
0000C26C 1038 FE70                  		move.b	(v_oscillate+$12).w,d0
0000C270 323C 0040                  		move.w	#$40,d1
0000C274 4440                       		neg.w	d0
0000C276 D041                       		add.w	d1,d0
0000C278                            
0000C278                            loc_B514:
0000C278 0828 0003 0028             		btst	#3,obSubtype(a0)
0000C27E 6700                       		beq.s	loc_B526
0000C280 4440                       		neg.w	d0
0000C282 D041                       		add.w	d1,d0
0000C284 E208                       		lsr.b	#1,d0
0000C286 0640 0020                  		addi.w	#$20,d0
0000C28A                            
0000C28A                            loc_B526:
0000C28A 6000 0000                  		bra.w	loc_B5EE
0000C28E                            ; ===========================================================================
0000C28E                            
0000C28E                            Glass_Type03:
0000C28E 0828 0003 0028             		btst	#3,obSubtype(a0)
0000C294 6700                       		beq.s	loc_B53E
0000C296 1038 FE70                  		move.b	(v_oscillate+$12).w,d0
0000C29A 0440 0010                  		subi.w	#$10,d0
0000C29E 6000 0000                  		bra.w	loc_B5EE
0000C2A2                            ; ===========================================================================
0000C2A2                            
0000C2A2                            loc_B53E:
0000C2A2 0828 0003 0022             		btst	#3,obStatus(a0)
0000C2A8 6600                       		bne.s	loc_B54E
0000C2AA 08A8 0000 0034             		bclr	#0,$34(a0)
0000C2B0 6000                       		bra.s	loc_B582
0000C2B2                            ; ===========================================================================
0000C2B2                            
0000C2B2                            loc_B54E:
0000C2B2 4A28 0034                  		tst.b	$34(a0)
0000C2B6 6600                       		bne.s	loc_B582
0000C2B8 117C 0001 0034             		move.b	#1,$34(a0)
0000C2BE 08E8 0000 0035             		bset	#0,$35(a0)
0000C2C4 6700                       		beq.s	loc_B582
0000C2C6 08E8 0007 0034             		bset	#7,$34(a0)
0000C2CC 317C 0010 0036             		move.w	#$10,$36(a0)
0000C2D2 117C 000A 0038             		move.b	#$A,$38(a0)
0000C2D8 0C68 0040 0032             		cmpi.w	#$40,glass_dist(a0)
0000C2DE 6600                       		bne.s	loc_B582
0000C2E0 317C 0040 0036             		move.w	#$40,$36(a0)
0000C2E6                            
0000C2E6                            loc_B582:
0000C2E6 4A28 0034                  		tst.b	$34(a0)
0000C2EA 6A00                       		bpl.s	loc_B5AA
0000C2EC 4A28 0038                  		tst.b	$38(a0)
0000C2F0 6700                       		beq.s	loc_B594
0000C2F2 5328 0038                  		subq.b	#1,$38(a0)
0000C2F6 6600                       		bne.s	loc_B5AA
0000C2F8                            
0000C2F8                            loc_B594:
0000C2F8 4A68 0032                  		tst.w	glass_dist(a0)
0000C2FC 6700                       		beq.s	loc_B5A4
0000C2FE 5368 0032                  		subq.w	#1,glass_dist(a0)
0000C302 5368 0036                  		subq.w	#1,$36(a0)
0000C306 6600                       		bne.s	loc_B5AA
0000C308                            
0000C308                            loc_B5A4:
0000C308 08A8 0007 0034             		bclr	#7,$34(a0)
0000C30E                            
0000C30E                            loc_B5AA:
0000C30E 3028 0032                  		move.w	glass_dist(a0),d0
0000C312 6000                       		bra.s	loc_B5EE
0000C314                            ; ===========================================================================
0000C314                            
0000C314                            Glass_Type04:
0000C314 0828 0003 0028             		btst	#3,obSubtype(a0)
0000C31A 6700                       		beq.s	Glass_ChkSwitch
0000C31C 1038 FE70                  		move.b	(v_oscillate+$12).w,d0
0000C320 0440 0010                  		subi.w	#$10,d0
0000C324 6000                       		bra.s	loc_B5EE
0000C326                            ; ===========================================================================
0000C326                            
0000C326                            Glass_ChkSwitch:
0000C326 4A28 0034                  		tst.b	$34(a0)
0000C32A 6600                       		bne.s	loc_B5E0
0000C32C 45F8 F7E0                  		lea	(f_switch).w,a2
0000C330 7000                       		moveq	#0,d0
0000C332 1028 0028                  		move.b	obSubtype(a0),d0 ; load object type number
0000C336 E848                       		lsr.w	#4,d0		; read only the	first nybble
0000C338 4A32 0000                  		tst.b	(a2,d0.w)	; has switch number d0 been pressed?
0000C33C 6700                       		beq.s	loc_B5EA	; if not, branch
0000C33E 117C 0001 0034             		move.b	#1,$34(a0)
0000C344                            
0000C344                            loc_B5E0:
0000C344 4A68 0032                  		tst.w	glass_dist(a0)
0000C348 6700                       		beq.s	loc_B5EA
0000C34A 5568 0032                  		subq.w	#2,glass_dist(a0)
0000C34E                            
0000C34E                            loc_B5EA:
0000C34E 3028 0032                  		move.w	glass_dist(a0),d0
0000C352                            
0000C352                            loc_B5EE:
0000C352 3228 0030                  		move.w	$30(a0),d1
0000C356 9240                       		sub.w	d0,d1
0000C358 3141 000C                  		move.w	d1,obY(a0)
0000C35C 4E75                       		rts	
0000C35C 4E75                       		rts	
0000C35E                            Map_Glass:	include	"_maps\MZ Large Green Glass Blocks.asm"
0000C35E                            ; ---------------------------------------------------------------------------
0000C35E                            ; Sprite mappings - large green	glassy blocks (MZ)
0000C35E                            ; ---------------------------------------------------------------------------
0000C35E                            Map_Glass_internal:
0000C35E 0000                       		dc.w @tall-Map_Glass_internal
0000C360 0000                       		dc.w @shine-Map_Glass_internal
0000C362 0000                       		dc.w @short-Map_Glass_internal
0000C364 0C                         @tall:		dc.b $C
0000C365 B80C 0000 E0               		dc.b $B8, $C, 0, 0, $E0	; tall block
0000C36A B80C 0800 00               		dc.b $B8, $C, 8, 0, 0
0000C36F C00F 0004 E0               		dc.b $C0, $F, 0, 4, $E0
0000C374 C00F 0804 00               		dc.b $C0, $F, 8, 4, 0
0000C379 E00F 0004 E0               		dc.b $E0, $F, 0, 4, $E0
0000C37E E00F 0804 00               		dc.b $E0, $F, 8, 4, 0
0000C383 000F 0004 E0               		dc.b 0,	$F, 0, 4, $E0
0000C388 000F 0804 00               		dc.b 0,	$F, 8, 4, 0
0000C38D 200F 0004 E0               		dc.b $20, $F, 0, 4, $E0
0000C392 200F 0804 00               		dc.b $20, $F, 8, 4, 0
0000C397 400C 1000 E0               		dc.b $40, $C, $10, 0, $E0
0000C39C 400C 1800 00               		dc.b $40, $C, $18, 0, 0
0000C3A1 02                         @shine:		dc.b 2
0000C3A2 0806 0014 F0               		dc.b 8,	6, 0, $14, $F0	; reflected shine on block
0000C3A7 0006 0014 00               		dc.b 0,	6, 0, $14, 0
0000C3AC 0A                         @short:		dc.b $A
0000C3AD C80C 0000 E0               		dc.b $C8, $C, 0, 0, $E0	; short block
0000C3B2 C80C 0800 00               		dc.b $C8, $C, 8, 0, 0
0000C3B7 D00F 0004 E0               		dc.b $D0, $F, 0, 4, $E0
0000C3BC D00F 0804 00               		dc.b $D0, $F, 8, 4, 0
0000C3C1 F00F 0004 E0               		dc.b $F0, $F, 0, 4, $E0
0000C3C6 F00F 0804 00               		dc.b $F0, $F, 8, 4, 0
0000C3CB 100F 0004 E0               		dc.b $10, $F, 0, 4, $E0
0000C3D0 100F 0804 00               		dc.b $10, $F, 8, 4, 0
0000C3D5 300C 1000 E0               		dc.b $30, $C, $10, 0, $E0
0000C3DA 300C 1800 00               		dc.b $30, $C, $18, 0, 0
0000C3E0 00                         		even
0000C3E0 00                         		even
0000C3E0                            		include	"_incObj\31 Chained Stompers.asm"
0000C3E0                            ; ---------------------------------------------------------------------------
0000C3E0                            ; Object 31 - stomping metal blocks on chains (MZ)
0000C3E0                            ; ---------------------------------------------------------------------------
0000C3E0                            
0000C3E0                            ChainStomp:
0000C3E0 7000                       		moveq	#0,d0
0000C3E2 1028 0024                  		move.b	obRoutine(a0),d0
0000C3E6 323B 0000                  		move.w	CStom_Index(pc,d0.w),d1
0000C3EA 4EFB 1000                  		jmp	CStom_Index(pc,d1.w)
0000C3EE                            ; ===========================================================================
0000C3EE 0000                       CStom_Index:	dc.w CStom_Main-CStom_Index
0000C3F0 0000                       		dc.w loc_B798-CStom_Index
0000C3F2 0000                       		dc.w loc_B7FE-CStom_Index
0000C3F4 0000                       		dc.w CStom_Display2-CStom_Index
0000C3F6 0000                       		dc.w loc_B7E2-CStom_Index
0000C3F8                            
0000C3F8 =0000003A                  CStom_switch:	equ $3A			; switch number for the current stomper
0000C3F8                            
0000C3F8 0000                       CStom_SwchNums:	dc.b 0,	0		; switch number, obj number
0000C3FA 0100                       		dc.b 1,	0
0000C3FC                            
0000C3FC 0200 00                    CStom_Var:	dc.b 2,	0, 0		; routine number, y-position, frame number
0000C3FF 041C 01                    		dc.b 4,	$1C, 1
0000C402 08CC 03                    		dc.b 8,	$CC, 3
0000C405 06F0 02                    		dc.b 6,	$F0, 2
0000C408                            
0000C408 7000 A000                  word_B6A4:	dc.w $7000, $A000
0000C40C 5000 7800                  		dc.w $5000, $7800
0000C410 3800 5800                  		dc.w $3800, $5800
0000C414 B800                       		dc.w $B800
0000C416                            ; ===========================================================================
0000C416                            
0000C416                            CStom_Main:	; Routine 0
0000C416 7000                       		moveq	#0,d0
0000C418 1028 0028                  		move.b	obSubtype(a0),d0
0000C41C 6A00                       		bpl.s	loc_B6CE
0000C41E 0240 007F                  		andi.w	#$7F,d0
0000C422 D040                       		add.w	d0,d0
0000C424 45FB 00D2                  		lea	CStom_SwchNums(pc,d0.w),a2
0000C428 115A 003A                  		move.b	(a2)+,CStom_switch(a0)
0000C42C 101A                       		move.b	(a2)+,d0
0000C42E 1140 0028                  		move.b	d0,obSubtype(a0)
0000C432                            
0000C432                            loc_B6CE:
0000C432 0200 000F                  		andi.b	#$F,d0
0000C436 D040                       		add.w	d0,d0
0000C438 343B 00CE                  		move.w	word_B6A4(pc,d0.w),d2
0000C43C 4A40                       		tst.w	d0
0000C43E 6600                       		bne.s	loc_B6E0
0000C440 3142 0032                  		move.w	d2,$32(a0)
0000C444                            
0000C444                            loc_B6E0:
0000C444 45F9 0000 C3FC             		lea	(CStom_Var).l,a2
0000C44A 2248                       		movea.l	a0,a1
0000C44C 7203                       		moveq	#3,d1
0000C44E 6000                       		bra.s	CStom_MakeStomper
0000C450                            ; ===========================================================================
0000C450                            
0000C450                            CStom_Loop:
0000C450 6100 0000                  		bsr.w	FindNextFreeObj
0000C454 6600 0000                  		bne.w	CStom_SetSize
0000C458                            
0000C458                            CStom_MakeStomper:
0000C458 135A 0024                  		move.b	(a2)+,obRoutine(a1)
0000C45C 137C 0000 0000             		move.b	#id_ChainStomp,0(a1)
0000C462 3368 0008 0008             		move.w	obX(a0),obX(a1)
0000C468 101A                       		move.b	(a2)+,d0
0000C46A 4880                       		ext.w	d0
0000C46C D068 000C                  		add.w	obY(a0),d0
0000C470 3340 000C                  		move.w	d0,obY(a1)
0000C474 237C 0000 0000 0004        		move.l	#Map_CStom,obMap(a1)
0000C47C 337C 0300 0002             		move.w	#$300,obGfx(a1)
0000C482 137C 0004 0001             		move.b	#4,obRender(a1)
0000C488 3369 000C 0030             		move.w	obY(a1),$30(a1)
0000C48E 1368 0028 0028             		move.b	obSubtype(a0),obSubtype(a1)
0000C494 137C 0010 0019             		move.b	#$10,obActWid(a1)
0000C49A 3342 0034                  		move.w	d2,$34(a1)
0000C49E 137C 0004 0018             		move.b	#4,obPriority(a1)
0000C4A4 135A 001A                  		move.b	(a2)+,obFrame(a1)
0000C4A8 0C29 0001 001A             		cmpi.b	#1,obFrame(a1)
0000C4AE 6600                       		bne.s	loc_B76A
0000C4B0 5341                       		subq.w	#1,d1
0000C4B2 1028 0028                  		move.b	obSubtype(a0),d0
0000C4B6 0240 00F0                  		andi.w	#$F0,d0
0000C4BA 0C40 0020                  		cmpi.w	#$20,d0
0000C4BE 6798                       		beq.s	CStom_MakeStomper
0000C4C0 137C 0038 0019             		move.b	#$38,obActWid(a1)
0000C4C6 137C 0090 0020             		move.b	#$90,obColType(a1)
0000C4CC 5241                       		addq.w	#1,d1
0000C4CE                            
0000C4CE                            loc_B76A:
0000C4CE 2348 003C                  		move.l	a0,$3C(a1)
0000C4D2 51C9 FF7C                  		dbf	d1,CStom_Loop
0000C4D6                            
0000C4D6 137C 0003 0018             		move.b	#3,obPriority(a1)
0000C4DC                            
0000C4DC                            CStom_SetSize:
0000C4DC 7000                       		moveq	#0,d0
0000C4DE 1028 0028                  		move.b	obSubtype(a0),d0
0000C4E2 E648                       		lsr.w	#3,d0
0000C4E4 0200 000E                  		andi.b	#$E,d0
0000C4E8 45FB 0000                  		lea	CStom_Var2(pc,d0.w),a2
0000C4EC 115A 0019                  		move.b	(a2)+,obActWid(a0)
0000C4F0 115A 001A                  		move.b	(a2)+,obFrame(a0)
0000C4F4 6000                       		bra.s	loc_B798
0000C4F6                            ; ===========================================================================
0000C4F6 3800                       CStom_Var2:	dc.b $38, 0		; width, frame number
0000C4F8 3009                       		dc.b $30, 9
0000C4FA 100A                       		dc.b $10, $A
0000C4FC                            ; ===========================================================================
0000C4FC                            
0000C4FC                            loc_B798:	; Routine 2
0000C4FC 6100 0000                  		bsr.w	CStom_Types
0000C500 31E8 000C F7A4             		move.w	obY(a0),(v_obj31ypos).w
0000C506 7200                       		moveq	#0,d1
0000C508 1228 0019                  		move.b	obActWid(a0),d1
0000C50C 0641 000B                  		addi.w	#$B,d1
0000C510 343C 000C                  		move.w	#$C,d2
0000C514 363C 000D                  		move.w	#$D,d3
0000C518 3828 0008                  		move.w	obX(a0),d4
0000C51C 6100 0000                  		bsr.w	SolidObject
0000C520 0828 0003 0022             		btst	#3,obStatus(a0)
0000C526 6700                       		beq.s	CStom_Display
0000C528 0C28 0010 0032             		cmpi.b	#$10,$32(a0)
0000C52E 6400                       		bcc.s	CStom_Display
0000C530 2448                       		movea.l	a0,a2
0000C532 41F8 D000                  		lea	(v_player).w,a0
0000C536 4EB9 0000 0000             		jsr	(KillSonic).l
0000C53C 204A                       		movea.l	a2,a0
0000C53E                            
0000C53E                            CStom_Display:
0000C53E 6100 0000                  		bsr.w	DisplaySprite
0000C542 6000 0000                  		bra.w	CStom_ChkDel
0000C546                            ; ===========================================================================
0000C546                            
0000C546                            loc_B7E2:	; Routine 8
0000C546 117C 0080 0016             		move.b	#$80,obHeight(a0)
0000C54C 08E8 0004 0001             		bset	#4,obRender(a0)
0000C552 2268 003C                  		movea.l	$3C(a0),a1
0000C556 1029 0032                  		move.b	$32(a1),d0
0000C55A EA08                       		lsr.b	#5,d0
0000C55C 5600                       		addq.b	#3,d0
0000C55E 1140 001A                  		move.b	d0,obFrame(a0)
0000C562                            
0000C562                            loc_B7FE:	; Routine 4
0000C562 2268 003C                  		movea.l	$3C(a0),a1
0000C566 7000                       		moveq	#0,d0
0000C568 1029 0032                  		move.b	$32(a1),d0
0000C56C D068 0030                  		add.w	$30(a0),d0
0000C570 3140 000C                  		move.w	d0,obY(a0)
0000C574                            
0000C574                            CStom_Display2:	; Routine 6
0000C574 6100 0000                  		bsr.w	DisplaySprite
0000C578                            
0000C578                            CStom_ChkDel:
0000C596 4E75                       		rts	
0000C598                            ; ===========================================================================
0000C598                            
0000C598                            CStom_Types:
0000C598 1028 0028                  		move.b	obSubtype(a0),d0
0000C59C 0240 000F                  		andi.w	#$F,d0
0000C5A0 D040                       		add.w	d0,d0
0000C5A2 323B 0000                  		move.w	CStom_TypeIndex(pc,d0.w),d1
0000C5A6 4EFB 1000                  		jmp	CStom_TypeIndex(pc,d1.w)
0000C5AA                            ; ===========================================================================
0000C5AA 0000                       CStom_TypeIndex:dc.w CStom_Type00-CStom_TypeIndex
0000C5AC 0000                       		dc.w CStom_Type01-CStom_TypeIndex
0000C5AE 0000                       		dc.w CStom_Type01-CStom_TypeIndex
0000C5B0 0000                       		dc.w CStom_Type03-CStom_TypeIndex
0000C5B2 0000                       		dc.w CStom_Type01-CStom_TypeIndex
0000C5B4 0000                       		dc.w CStom_Type03-CStom_TypeIndex
0000C5B6 0000                       		dc.w CStom_Type01-CStom_TypeIndex
0000C5B8                            ; ===========================================================================
0000C5B8                            
0000C5B8                            CStom_Type00:
0000C5B8 45F8 F7E0                  		lea	(f_switch).w,a2	; load switch statuses
0000C5BC 7000                       		moveq	#0,d0
0000C5BE 1028 003A                  		move.b	CStom_switch(a0),d0 ; move number 0 or 1 to d0
0000C5C2 4A32 0000                  		tst.b	(a2,d0.w)	; has switch (d0) been pressed?
0000C5C6 6700                       		beq.s	loc_B8A8	; if not, branch
0000C5C8 4A78 F7A4                  		tst.w	(v_obj31ypos).w
0000C5CC 6A00                       		bpl.s	loc_B872
0000C5CE 0C28 0010 0032             		cmpi.b	#$10,$32(a0)
0000C5D4 6700                       		beq.s	loc_B8A0
0000C5D6                            
0000C5D6                            loc_B872:
0000C5D6 4A68 0032                  		tst.w	$32(a0)
0000C5DA 6700                       		beq.s	loc_B8A0
0000C5DC 1038 FE0F                  		move.b	(v_vbla_byte).w,d0
0000C5E0 0200 000F                  		andi.b	#$F,d0
0000C5E4 6600                       		bne.s	loc_B892
0000C5E6 4A28 0001                  		tst.b	1(a0)
0000C5EA 6A00                       		bpl.s	loc_B892
0000C5F6                            
0000C5F6                            loc_B892:
0000C5F6 0468 0080 0032             		subi.w	#$80,$32(a0)
0000C5FC 6400                       		bcc.s	CStom_Restart
0000C5FE 317C 0000 0032             		move.w	#0,$32(a0)
0000C604                            
0000C604                            loc_B8A0:
0000C604 317C 0000 0012             		move.w	#0,obVelY(a0)
0000C60A 6000                       		bra.s	CStom_Restart
0000C60C                            ; ===========================================================================
0000C60C                            
0000C60C                            loc_B8A8:
0000C60C 3228 0034                  		move.w	$34(a0),d1
0000C610 B268 0032                  		cmp.w	$32(a0),d1
0000C614 6700                       		beq.s	CStom_Restart
0000C616 3028 0012                  		move.w	obVelY(a0),d0
0000C61A 0668 0070 0012             		addi.w	#$70,obVelY(a0)	; make object fall
0000C620 D168 0032                  		add.w	d0,$32(a0)
0000C624 B268 0032                  		cmp.w	$32(a0),d1
0000C628 6200                       		bhi.s	CStom_Restart
0000C62A 3141 0032                  		move.w	d1,$32(a0)
0000C62E 317C 0000 0012             		move.w	#0,obVelY(a0)	; stop object falling
0000C634 4A28 0001                  		tst.b	obRender(a0)
0000C638 6A00                       		bpl.s	CStom_Restart
0000C644                            
0000C644                            CStom_Restart:
0000C644 7000                       		moveq	#0,d0
0000C646 1028 0032                  		move.b	$32(a0),d0
0000C64A D068 0030                  		add.w	$30(a0),d0
0000C64E 3140 000C                  		move.w	d0,obY(a0)
0000C652 4E75                       		rts	
0000C654                            ; ===========================================================================
0000C654                            
0000C654                            CStom_Type01:
0000C654 4A68 0036                  		tst.w	$36(a0)
0000C658 6700                       		beq.s	loc_B938
0000C65A 4A68 0038                  		tst.w	$38(a0)
0000C65E 6700                       		beq.s	loc_B902
0000C660 5368 0038                  		subq.w	#1,$38(a0)
0000C664 6000                       		bra.s	loc_B97C
0000C666                            ; ===========================================================================
0000C666                            
0000C666                            loc_B902:
0000C666 1038 FE0F                  		move.b	(v_vbla_byte).w,d0
0000C66A 0200 000F                  		andi.b	#$F,d0
0000C66E 6600                       		bne.s	loc_B91C
0000C670 4A28 0001                  		tst.b	obRender(a0)
0000C674 6A00                       		bpl.s	loc_B91C
0000C680                            
0000C680                            loc_B91C:
0000C680 0468 0080 0032             		subi.w	#$80,$32(a0)
0000C686 6400                       		bcc.s	loc_B97C
0000C688 317C 0000 0032             		move.w	#0,$32(a0)
0000C68E 317C 0000 0012             		move.w	#0,obVelY(a0)
0000C694 317C 0000 0036             		move.w	#0,$36(a0)
0000C69A 6000                       		bra.s	loc_B97C
0000C69C                            ; ===========================================================================
0000C69C                            
0000C69C                            loc_B938:
0000C69C 3228 0034                  		move.w	$34(a0),d1
0000C6A0 B268 0032                  		cmp.w	$32(a0),d1
0000C6A4 6700                       		beq.s	loc_B97C
0000C6A6 3028 0012                  		move.w	obVelY(a0),d0
0000C6AA 0668 0070 0012             		addi.w	#$70,obVelY(a0)	; make object fall
0000C6B0 D168 0032                  		add.w	d0,$32(a0)
0000C6B4 B268 0032                  		cmp.w	$32(a0),d1
0000C6B8 6200                       		bhi.s	loc_B97C
0000C6BA 3141 0032                  		move.w	d1,$32(a0)
0000C6BE 317C 0000 0012             		move.w	#0,obVelY(a0)	; stop object falling
0000C6C4 317C 0001 0036             		move.w	#1,$36(a0)
0000C6CA 317C 003C 0038             		move.w	#$3C,$38(a0)
0000C6D0 4A28 0001                  		tst.b	obRender(a0)
0000C6D4 6A00                       		bpl.s	loc_B97C
0000C6E0                            
0000C6E0                            loc_B97C:
0000C6E0 6000 FF62                  		bra.w	CStom_Restart
0000C6E4                            ; ===========================================================================
0000C6E4                            
0000C6E4                            CStom_Type03:
0000C6E4 3038 D008                  		move.w	(v_player+obX).w,d0
0000C6E8 9068 0008                  		sub.w	obX(a0),d0
0000C6EC 6400                       		bcc.s	loc_B98C
0000C6EE 4440                       		neg.w	d0
0000C6F0                            
0000C6F0                            loc_B98C:
0000C6F0 0C40 0090                  		cmpi.w	#$90,d0
0000C6F4 6400                       		bcc.s	loc_B996
0000C6F6 5228 0028                  		addq.b	#1,obSubtype(a0)
0000C6FA                            
0000C6FA                            loc_B996:
0000C6FA 6000 FF48                  		bra.w	CStom_Restart
0000C6FA 6000 FF48                  		bra.w	CStom_Restart
0000C6FE                            		include	"_incObj\45 Sideways Stomper.asm"
0000C6FE                            ; ---------------------------------------------------------------------------
0000C6FE                            ; Object 45 - spiked metal block from beta version (MZ)
0000C6FE                            ; ---------------------------------------------------------------------------
0000C6FE                            
0000C6FE                            SideStomp:
0000C6FE 7000                       		moveq	#0,d0
0000C700 1028 0024                  		move.b	obRoutine(a0),d0
0000C704 323B 0000                  		move.w	SStom_Index(pc,d0.w),d1
0000C708 4EFB 1000                  		jmp	SStom_Index(pc,d1.w)
0000C70C                            ; ===========================================================================
0000C70C 0000                       SStom_Index:	dc.w SStom_Main-SStom_Index
0000C70E 0000                       		dc.w SStom_Solid-SStom_Index
0000C710 0000                       		dc.w loc_BA8E-SStom_Index
0000C712 0000                       		dc.w SStom_Display-SStom_Index
0000C714 0000                       		dc.w SStom_Pole-SStom_Index
0000C716                            
0000C716                            		;	routine		frame
0000C716                            		;		 xpos
0000C716 0204 00                    SStom_Var:	dc.b	2,  	 4,	0	; main block
0000C719 04E4 01                    		dc.b	4,	-$1C,	1	; spikes
0000C71C 0834 03                    		dc.b	8,	 $34,	3	; pole
0000C71F 0628 02                    		dc.b	6,	 $28,	2	; wall bracket
0000C722                            
0000C722                            ;word_B9BE:	; Note that this indicates three subtypes
0000C722 3800                       SStom_Len:	dc.w $3800	; short
0000C724 A000                       		dc.w $A000	; long
0000C726 5000                       		dc.w $5000	; medium
0000C728                            ; ===========================================================================
0000C728                            
0000C728                            SStom_Main:	; Routine 0
0000C728 7000                       		moveq	#0,d0
0000C72A 1028 0028                  		move.b	obSubtype(a0),d0
0000C72E D040                       		add.w	d0,d0
0000C730 343B 00F0                  		move.w	SStom_Len(pc,d0.w),d2
0000C734 45F9 0000 C716             		lea	(SStom_Var).l,a2
0000C73A 2248                       		movea.l	a0,a1
0000C73C 7203                       		moveq	#3,d1
0000C73E 6000                       		bra.s	@load
0000C740                            
0000C740                            	@loop:
0000C740 6100 0000                  		bsr.w	FindNextFreeObj
0000C744 6600                       		bne.s	@fail
0000C746                            
0000C746                            	@load:
0000C746 135A 0024                  		move.b	(a2)+,obRoutine(a1)
0000C74A 137C 0000 0000             		move.b	#id_SideStomp,0(a1)
0000C750 3368 000C 000C             		move.w	obY(a0),obY(a1)
0000C756 101A                       		move.b	(a2)+,d0
0000C758 4880                       		ext.w	d0
0000C75A D068 0008                  		add.w	obX(a0),d0
0000C75E 3340 0008                  		move.w	d0,obX(a1)
0000C762 237C 0000 0000 0004        		move.l	#Map_SStom,obMap(a1)
0000C76A 337C 0300 0002             		move.w	#$300,obGfx(a1)
0000C770 137C 0004 0001             		move.b	#4,obRender(a1)
0000C776 3369 0008 0030             		move.w	obX(a1),$30(a1)
0000C77C 3368 0008 003A             		move.w	obX(a0),$3A(a1)
0000C782 1368 0028 0028             		move.b	obSubtype(a0),obSubtype(a1)
0000C788 137C 0020 0019             		move.b	#$20,obActWid(a1)
0000C78E 3342 0034                  		move.w	d2,$34(a1)
0000C792 137C 0004 0018             		move.b	#4,obPriority(a1)
0000C798 0C12 0001                  		cmpi.b	#1,(a2)		; is subobject spikes?
0000C79C 6600                       		bne.s	@notspikes	; if not, branch
0000C79E 137C 0091 0020             		move.b	#$91,obColType(a1) ; use harmful collision type
0000C7A4                            
0000C7A4                            	@notspikes:
0000C7A4 135A 001A                  		move.b	(a2)+,obFrame(a1)
0000C7A8 2348 003C                  		move.l	a0,$3C(a1)
0000C7AC 51C9 FF92                  		dbf	d1,@loop	; repeat 3 times
0000C7B0                            
0000C7B0 137C 0003 0018             		move.b	#3,obPriority(a1)
0000C7B6                            
0000C7B6                            	@fail:
0000C7B6 117C 0010 0019             		move.b	#$10,obActWid(a0)
0000C7BC                            
0000C7BC                            SStom_Solid:	; Routine 2
0000C7BC 3F28 0008                  		move.w	obX(a0),-(sp)
0000C7C0 6100 0000                  		bsr.w	SStom_Move
0000C7C4 323C 0017                  		move.w	#$17,d1
0000C7C8 343C 0020                  		move.w	#$20,d2
0000C7CC 363C 0020                  		move.w	#$20,d3
0000C7D0 381F                       		move.w	(sp)+,d4
0000C7D2 6100 0000                  		bsr.w	SolidObject
0000C7D6 6100 0000                  		bsr.w	DisplaySprite
0000C7DA 6000 0000                  		bra.w	SStom_ChkDel
0000C7DE                            ; ===========================================================================
0000C7DE                            
0000C7DE                            SStom_Pole:	; Routine 8
0000C7DE 2268 003C                  		movea.l	$3C(a0),a1
0000C7E2 1029 0032                  		move.b	$32(a1),d0
0000C7E6 0600 0010                  		addi.b	#$10,d0
0000C7EA EA08                       		lsr.b	#5,d0
0000C7EC 5600                       		addq.b	#3,d0
0000C7EE 1140 001A                  		move.b	d0,obFrame(a0)
0000C7F2                            
0000C7F2                            loc_BA8E:	; Routine 4
0000C7F2 2268 003C                  		movea.l	$3C(a0),a1
0000C7F6 7000                       		moveq	#0,d0
0000C7F8 1029 0032                  		move.b	$32(a1),d0
0000C7FC 4440                       		neg.w	d0
0000C7FE D068 0030                  		add.w	$30(a0),d0
0000C802 3140 0008                  		move.w	d0,obX(a0)
0000C806                            
0000C806                            SStom_Display:	; Routine 6
0000C806 6100 0000                  		bsr.w	DisplaySprite
0000C80A                            
0000C80A                            SStom_ChkDel:
0000C828 4E75                       		rts	
0000C82A                            
0000C82A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000C82A                            
0000C82A                            
0000C82A                            SStom_Move:
0000C82A 7000                       		moveq	#0,d0
0000C82C 1028 0028                  		move.b	obSubtype(a0),d0
0000C830 D040                       		add.w	d0,d0
0000C832 323B 0000                  		move.w	off_BAD6(pc,d0.w),d1
0000C836 4EFB 1000                  		jmp	off_BAD6(pc,d1.w)
0000C83A                            ; End of function SStom_Move
0000C83A                            
0000C83A                            ; ===========================================================================
0000C83A                            		; This indicates only two subtypes... that do the same thing
0000C83A                            		; Compare to SStom_Len. This breaks subtype 02
0000C83A 0000                       off_BAD6:	dc.w loc_BADA-off_BAD6
0000C83C 0000                       		dc.w loc_BADA-off_BAD6
0000C83E                            ; ===========================================================================
0000C83E                            
0000C83E                            loc_BADA:
0000C83E 4A68 0036                  		tst.w	$36(a0)
0000C842 6700                       		beq.s	loc_BB08
0000C844 4A68 0038                  		tst.w	$38(a0)
0000C848 6700                       		beq.s	loc_BAEC
0000C84A 5368 0038                  		subq.w	#1,$38(a0)
0000C84E 6000                       		bra.s	loc_BB3C
0000C850                            ; ===========================================================================
0000C850                            
0000C850                            loc_BAEC:
0000C850 0468 0080 0032             		subi.w	#$80,$32(a0)
0000C856 6400                       		bcc.s	loc_BB3C
0000C858 317C 0000 0032             		move.w	#0,$32(a0)
0000C85E 317C 0000 0010             		move.w	#0,obVelX(a0)
0000C864 317C 0000 0036             		move.w	#0,$36(a0)
0000C86A 6000                       		bra.s	loc_BB3C
0000C86C                            ; ===========================================================================
0000C86C                            
0000C86C                            loc_BB08:
0000C86C 3228 0034                  		move.w	$34(a0),d1
0000C870 B268 0032                  		cmp.w	$32(a0),d1
0000C874 6700                       		beq.s	loc_BB3C
0000C876 3028 0010                  		move.w	obVelX(a0),d0
0000C87A 0668 0070 0010             		addi.w	#$70,obVelX(a0)
0000C880 D168 0032                  		add.w	d0,$32(a0)
0000C884 B268 0032                  		cmp.w	$32(a0),d1
0000C888 6200                       		bhi.s	loc_BB3C
0000C88A 3141 0032                  		move.w	d1,$32(a0)
0000C88E 317C 0000 0010             		move.w	#0,obVelX(a0)
0000C894 317C 0001 0036             		move.w	#1,$36(a0)
0000C89A 317C 003C 0038             		move.w	#$3C,$38(a0)
0000C8A0                            
0000C8A0                            loc_BB3C:
0000C8A0 7000                       		moveq	#0,d0
0000C8A2 1028 0032                  		move.b	$32(a0),d0
0000C8A6 4440                       		neg.w	d0
0000C8A8 D068 0030                  		add.w	$30(a0),d0
0000C8AC 3140 0008                  		move.w	d0,obX(a0)
0000C8B0 4E75                       		rts	
0000C8B0 4E75                       		rts	
0000C8B2                            Map_CStom:	include	"_maps\Chained Stompers.asm"
0000C8B2                            ; ---------------------------------------------------------------------------
0000C8B2                            ; Sprite mappings - metal stomping blocks on chains (MZ)
0000C8B2                            ; ---------------------------------------------------------------------------
0000C8B2                            Map_CStom_internal:
0000C8B2 0000                       		dc.w @wideblock-Map_CStom_internal
0000C8B4 0000                       		dc.w @spikes-Map_CStom_internal
0000C8B6 0000                       		dc.w @ceiling-Map_CStom_internal
0000C8B8 0000                       		dc.w @chain1-Map_CStom_internal
0000C8BA 0000                       		dc.w @chain2-Map_CStom_internal
0000C8BC 0000                       		dc.w @chain3-Map_CStom_internal
0000C8BE 0000                       		dc.w @chain4-Map_CStom_internal
0000C8C0 0000                       		dc.w @chain5-Map_CStom_internal
0000C8C2 0000                       		dc.w @chain5-Map_CStom_internal
0000C8C4 0000                       		dc.w @mediumblock-Map_CStom_internal
0000C8C6 0000                       		dc.w @smallblock-Map_CStom_internal
0000C8C8 05                         @wideblock:	dc.b 5
0000C8C9 F406 0000 C8               		dc.b $F4, 6, 0,	0, $C8
0000C8CE F40A 0006 D8               		dc.b $F4, $A, 0, 6, $D8
0000C8D3 EC0F 000F F0               		dc.b $EC, $F, 0, $F, $F0
0000C8D8 F40A 0806 10               		dc.b $F4, $A, 8, 6, $10
0000C8DD F406 0800 28               		dc.b $F4, 6, 8,	0, $28
0000C8E2 05                         @spikes:	dc.b 5
0000C8E3 F003 121F D4               		dc.b $F0, 3, $12, $1F, $D4
0000C8E8 F003 121F E8               		dc.b $F0, 3, $12, $1F, $E8
0000C8ED F003 121F FC               		dc.b $F0, 3, $12, $1F, $FC
0000C8F2 F003 121F 10               		dc.b $F0, 3, $12, $1F, $10
0000C8F7 F003 121F 24               		dc.b $F0, 3, $12, $1F, $24
0000C8FC 01                         @ceiling:	dc.b 1
0000C8FD DC0F 100F F0               		dc.b $DC, $F, $10, $F, $F0
0000C902 02                         @chain1:	dc.b 2
0000C903 0001 003F FC               		dc.b 0,	1, 0, $3F, $FC
0000C908 1001 003F FC               		dc.b $10, 1, 0,	$3F, $FC
0000C90D 04                         @chain2:	dc.b 4
0000C90E E001 003F FC               		dc.b $E0, 1, 0,	$3F, $FC
0000C913 F001 003F FC               		dc.b $F0, 1, 0,	$3F, $FC
0000C918 0001 003F FC               		dc.b 0,	1, 0, $3F, $FC
0000C91D 1001 003F FC               		dc.b $10, 1, 0,	$3F, $FC
0000C922 06                         @chain3:	dc.b 6
0000C923 C001 003F FC               		dc.b $C0, 1, 0,	$3F, $FC
0000C928 D001 003F FC               		dc.b $D0, 1, 0,	$3F, $FC
0000C92D E001 003F FC               		dc.b $E0, 1, 0,	$3F, $FC
0000C932 F001 003F FC               		dc.b $F0, 1, 0,	$3F, $FC
0000C937 0001 003F FC               		dc.b 0,	1, 0, $3F, $FC
0000C93C 1001 003F FC               		dc.b $10, 1, 0,	$3F, $FC
0000C941 08                         @chain4:	dc.b 8
0000C942 A001 003F FC               		dc.b $A0, 1, 0,	$3F, $FC
0000C947 B001 003F FC               		dc.b $B0, 1, 0,	$3F, $FC
0000C94C C001 003F FC               		dc.b $C0, 1, 0,	$3F, $FC
0000C951 D001 003F FC               		dc.b $D0, 1, 0,	$3F, $FC
0000C956 E001 003F FC               		dc.b $E0, 1, 0,	$3F, $FC
0000C95B F001 003F FC               		dc.b $F0, 1, 0,	$3F, $FC
0000C960 0001 003F FC               		dc.b 0,	1, 0, $3F, $FC
0000C965 1001 003F FC               		dc.b $10, 1, 0,	$3F, $FC
0000C96A 0A                         @chain5:	dc.b $A
0000C96B 8001 003F FC               		dc.b $80, 1, 0,	$3F, $FC
0000C970 9001 003F FC               		dc.b $90, 1, 0,	$3F, $FC
0000C975 A001 003F FC               		dc.b $A0, 1, 0,	$3F, $FC
0000C97A B001 003F FC               		dc.b $B0, 1, 0,	$3F, $FC
0000C97F C001 003F FC               		dc.b $C0, 1, 0,	$3F, $FC
0000C984 D001 003F FC               		dc.b $D0, 1, 0,	$3F, $FC
0000C989 E001 003F FC               		dc.b $E0, 1, 0,	$3F, $FC
0000C98E F001 003F FC               		dc.b $F0, 1, 0,	$3F, $FC
0000C993 0001 003F FC               		dc.b 0,	1, 0, $3F, $FC
0000C998 1001 003F FC               		dc.b $10, 1, 0,	$3F, $FC
0000C99D 05                         @mediumblock:	dc.b 5
0000C99E F406 0000 D0               		dc.b $F4, 6, 0,	0, $D0
0000C9A3 F40A 0006 E0               		dc.b $F4, $A, 0, 6, $E0
0000C9A8 F40A 0806 08               		dc.b $F4, $A, 8, 6, 8
0000C9AD F406 0800 20               		dc.b $F4, 6, 8,	0, $20
0000C9B2 EC0F 000F F0               		dc.b $EC, $F, 0, $F, $F0
0000C9B7 01                         @smallblock:	dc.b 1
0000C9B8 EC0F 002F F0               		dc.b $EC, $F, 0, $2F, $F0
0000C9BE 00                         		even
0000C9BE 00                         		even
0000C9BE                            Map_SStom:	include	"_maps\Sideways Stomper.asm"
0000C9BE                            ; ---------------------------------------------------------------------------
0000C9BE                            ; Sprite mappings - spiked metal block from beta version (MZ)
0000C9BE                            ; ---------------------------------------------------------------------------
0000C9BE                            Map_SStom_internal:
0000C9BE 0000                       		dc.w @block-Map_SStom_internal
0000C9C0 0000                       		dc.w @spikes-Map_SStom_internal
0000C9C2 0000                       		dc.w @wallbracket-Map_SStom_internal
0000C9C4 0000                       		dc.w @pole1-Map_SStom_internal
0000C9C6 0000                       		dc.w @pole2-Map_SStom_internal
0000C9C8 0000                       		dc.w @pole3-Map_SStom_internal
0000C9CA 0000                       		dc.w @pole4-Map_SStom_internal
0000C9CC 0000                       		dc.w @pole5-Map_SStom_internal
0000C9CE 0000                       		dc.w @pole5-Map_SStom_internal
0000C9D0 03                         @block:		dc.b 3
0000C9D1 E00B 001F F4               		dc.b $E0, $B, 0, $1F, $F4 ; main metal block
0000C9D6 000B 101F F4               		dc.b 0,	$B, $10, $1F, $F4
0000C9DB F003 002B 0C               		dc.b $F0, 3, 0,	$2B, $C
0000C9E0 03                         @spikes:	dc.b 3
0000C9E1 E80C 121B F0               		dc.b $E8, $C, $12, $1B,	$F0 ; three spikes
0000C9E6 FC0C 121B F0               		dc.b $FC, $C, $12, $1B,	$F0
0000C9EB 100C 121B F0               		dc.b $10, $C, $12, $1B,	$F0
0000C9F0 01                         @wallbracket:	dc.b 1
0000C9F1 F003 082B FC               		dc.b $F0, 3, 8,	$2B, $FC ; thing holding it to the wall
0000C9F6 02                         @pole1:		dc.b 2
0000C9F7 F805 0041 E0               		dc.b $F8, 5, 0,	$41, $E0 ; poles of various lengths
0000C9FC F805 0041 F0               		dc.b $F8, 5, 0,	$41, $F0
0000CA01 04                         @pole2:		dc.b 4
0000CA02 F805 0041 E0               		dc.b $F8, 5, 0,	$41, $E0
0000CA07 F805 0041 F0               		dc.b $F8, 5, 0,	$41, $F0
0000CA0C F805 0041 00               		dc.b $F8, 5, 0,	$41, 0
0000CA11 F805 0041 10               		dc.b $F8, 5, 0,	$41, $10
0000CA16 06                         @pole3:		dc.b 6
0000CA17 F805 0041 E0               		dc.b $F8, 5, 0,	$41, $E0
0000CA1C F805 0041 F0               		dc.b $F8, 5, 0,	$41, $F0
0000CA21 F805 0041 00               		dc.b $F8, 5, 0,	$41, 0
0000CA26 F805 0041 10               		dc.b $F8, 5, 0,	$41, $10
0000CA2B F805 0041 20               		dc.b $F8, 5, 0,	$41, $20
0000CA30 F805 0041 30               		dc.b $F8, 5, 0,	$41, $30
0000CA35 08                         @pole4:		dc.b 8
0000CA36 F805 0041 E0               		dc.b $F8, 5, 0,	$41, $E0
0000CA3B F805 0041 F0               		dc.b $F8, 5, 0,	$41, $F0
0000CA40 F805 0041 00               		dc.b $F8, 5, 0,	$41, 0
0000CA45 F805 0041 10               		dc.b $F8, 5, 0,	$41, $10
0000CA4A F805 0041 20               		dc.b $F8, 5, 0,	$41, $20
0000CA4F F805 0041 30               		dc.b $F8, 5, 0,	$41, $30
0000CA54 F805 0041 40               		dc.b $F8, 5, 0,	$41, $40
0000CA59 F805 0041 50               		dc.b $F8, 5, 0,	$41, $50
0000CA5E 08                         @pole5:		dc.b 8		; Incorrect: this should be $A
0000CA5F F805 0041 E0               		dc.b $F8, 5, 0,	$41, $E0
0000CA64 F805 0041 F0               		dc.b $F8, 5, 0,	$41, $F0
0000CA69 F805 0041 00               		dc.b $F8, 5, 0,	$41, 0
0000CA6E F805 0041 10               		dc.b $F8, 5, 0,	$41, $10
0000CA73 F805 0041 20               		dc.b $F8, 5, 0,	$41, $20
0000CA78 F805 0041 30               		dc.b $F8, 5, 0,	$41, $30
0000CA7D F805 0041 40               		dc.b $F8, 5, 0,	$41, $40
0000CA82 F805 0041 50               		dc.b $F8, 5, 0,	$41, $50
0000CA87 F805 0041 60               		dc.b $F8, 5, 0,	$41, $60
0000CA8C F805 0041 70               		dc.b $F8, 5, 0,	$41, $70
0000CA91                            		; @pole6 should be here, but it isn't...
0000CA92 00                         		even
0000CA92 00                         		even
0000CA92                            
0000CA92                            		include	"_incObj\32 Button.asm"
0000CA92                            ; ---------------------------------------------------------------------------
0000CA92                            ; Object 32 - buttons (MZ, SYZ, LZ, SBZ)
0000CA92                            ; ---------------------------------------------------------------------------
0000CA92                            
0000CA92                            Button:
0000CA92 7000                       		moveq	#0,d0
0000CA94 1028 0024                  		move.b	obRoutine(a0),d0
0000CA98 323B 0000                  		move.w	But_Index(pc,d0.w),d1
0000CA9C 4EFB 1000                  		jmp	But_Index(pc,d1.w)
0000CAA0                            ; ===========================================================================
0000CAA0 0000                       But_Index:	dc.w But_Main-But_Index
0000CAA2 0000                       		dc.w But_Pressed-But_Index
0000CAA4                            ; ===========================================================================
0000CAA4                            
0000CAA4                            But_Main:	; Routine 0
0000CAA4 5428 0024                  		addq.b	#2,obRoutine(a0)
0000CAA8 217C 0000 0000 0004        		move.l	#Map_But,obMap(a0)
0000CAB0 317C 4513 0002             		move.w	#$4513,obGfx(a0) ; MZ specific code
0000CAB6 0C38 0002 FE10             		cmpi.b	#id_MZ,(v_zone).w ; is level Marble Zone?
0000CABC 6700                       		beq.s	But_IsMZ	; if yes, branch
0000CABE                            
0000CABE 317C 0513 0002             		move.w	#$513,obGfx(a0)	; SYZ, LZ and SBZ specific code
0000CAC4                            
0000CAC4                            	But_IsMZ:
0000CAC4 117C 0004 0001             		move.b	#4,obRender(a0)
0000CACA 117C 0010 0019             		move.b	#$10,obActWid(a0)
0000CAD0 117C 0004 0018             		move.b	#4,obPriority(a0)
0000CAD6 5668 000C                  		addq.w	#3,obY(a0)
0000CADA                            
0000CADA                            But_Pressed:	; Routine 2
0000CADA 4A28 0001                  		tst.b	obRender(a0)
0000CADE 6A00                       		bpl.s	But_Display
0000CAE0 323C 001B                  		move.w	#$1B,d1
0000CAE4 343C 0005                  		move.w	#5,d2
0000CAE8 363C 0005                  		move.w	#5,d3
0000CAEC 3828 0008                  		move.w	obX(a0),d4
0000CAF0 6100 0000                  		bsr.w	SolidObject
0000CAF4 08A8 0000 001A             		bclr	#0,obFrame(a0)	; use "unpressed" frame
0000CAFA 1028 0028                  		move.b	obSubtype(a0),d0
0000CAFE 0240 000F                  		andi.w	#$F,d0
0000CB02 47F8 F7E0                  		lea	(f_switch).w,a3
0000CB06 47F3 0000                  		lea	(a3,d0.w),a3
0000CB0A 7600                       		moveq	#0,d3
0000CB0C 0828 0006 0028             		btst	#6,obSubtype(a0)
0000CB12 6700                       		beq.s	loc_BDB2
0000CB14 7607                       		moveq	#7,d3
0000CB16                            
0000CB16                            loc_BDB2:
0000CB16 4A28 0028                  		tst.b	obSubtype(a0)
0000CB1A 6A00                       		bpl.s	loc_BDBE
0000CB1C 6100 0000                  		bsr.w	But_MZBlock
0000CB20 6600                       		bne.s	loc_BDC8
0000CB22                            
0000CB22                            loc_BDBE:
0000CB22 4A28 0025                  		tst.b	ob2ndRout(a0)
0000CB26 6600                       		bne.s	loc_BDC8
0000CB28 0793                       		bclr	d3,(a3)
0000CB2A 6000                       		bra.s	loc_BDDE
0000CB2C                            ; ===========================================================================
0000CB2C                            
0000CB2C                            loc_BDC8:
0000CB2C 4A13                       		tst.b	(a3)
0000CB2E 6600                       		bne.s	loc_BDD6
0000CB3A                            
0000CB3A                            loc_BDD6:
0000CB3A 07D3                       		bset	d3,(a3)
0000CB3C 08E8 0000 001A             		bset	#0,obFrame(a0)	; use "pressed"	frame
0000CB42                            
0000CB42                            loc_BDDE:
0000CB42 0828 0005 0028             		btst	#5,obSubtype(a0)
0000CB48 6700                       		beq.s	But_Display
0000CB4A 5328 001E                  		subq.b	#1,obTimeFrame(a0)
0000CB4E 6A00                       		bpl.s	But_Display
0000CB50 117C 0007 001E             		move.b	#7,obTimeFrame(a0)
0000CB56 0868 0001 001A             		bchg	#1,obFrame(a0)
0000CB5C                            
0000CB5C                            But_Display:
0000CB5C 6100 0000                  		bsr.w	DisplaySprite
0000CB7E 4E75                       		rts	
0000CB80                            ; ===========================================================================
0000CB80                            
0000CB80                            But_Delete:
0000CB80 6100 0000                  		bsr.w	DeleteObject
0000CB84 4E75                       		rts	
0000CB86                            
0000CB86                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000CB86                            
0000CB86                            
0000CB86                            But_MZBlock:
0000CB86 3F03                       		move.w	d3,-(sp)
0000CB88 3428 0008                  		move.w	obX(a0),d2
0000CB8C 3628 000C                  		move.w	obY(a0),d3
0000CB90 0442 0010                  		subi.w	#$10,d2
0000CB94 5143                       		subq.w	#8,d3
0000CB96 383C 0020                  		move.w	#$20,d4
0000CB9A 3A3C 0010                  		move.w	#$10,d5
0000CB9E 43F8 D800                  		lea	(v_lvlobjspace).w,a1 ; begin checking object RAM
0000CBA2 3C3C 005F                  		move.w	#$5F,d6
0000CBA6                            
0000CBA6                            But_MZLoop:
0000CBA6 4A29 0001                  		tst.b	obRender(a1)
0000CBAA 6A00                       		bpl.s	loc_BE4E
0000CBAC 0C11 0000                  		cmpi.b	#id_PushBlock,(a1) ; is the object a green MZ block?
0000CBB0 6700                       		beq.s	loc_BE5E	; if yes, branch
0000CBB2                            
0000CBB2                            loc_BE4E:
0000CBB2 43E9 0040                  		lea	$40(a1),a1	; check	next object
0000CBB6 51CE FFEE                  		dbf	d6,But_MZLoop	; repeat $5F times
0000CBBA                            
0000CBBA 361F                       		move.w	(sp)+,d3
0000CBBC 7000                       		moveq	#0,d0
0000CBBE                            
0000CBBE                            locret_BE5A:
0000CBBE 4E75                       		rts	
0000CBC0                            ; ===========================================================================
0000CBC0 1010                       But_MZData:	dc.b $10, $10
0000CBC2                            ; ===========================================================================
0000CBC2                            
0000CBC2                            loc_BE5E:
0000CBC2 7001                       		moveq	#1,d0
0000CBC4 0240 003F                  		andi.w	#$3F,d0
0000CBC8 D040                       		add.w	d0,d0
0000CBCA 45FB 00F2                  		lea	But_MZData-2(pc,d0.w),a2
0000CBCE 121A                       		move.b	(a2)+,d1
0000CBD0 4881                       		ext.w	d1
0000CBD2 3029 0008                  		move.w	obX(a1),d0
0000CBD6 9041                       		sub.w	d1,d0
0000CBD8 9042                       		sub.w	d2,d0
0000CBDA 6400                       		bcc.s	loc_BE80
0000CBDC D241                       		add.w	d1,d1
0000CBDE D041                       		add.w	d1,d0
0000CBE0 6500                       		bcs.s	loc_BE84
0000CBE2 60CE                       		bra.s	loc_BE4E
0000CBE4                            ; ===========================================================================
0000CBE4                            
0000CBE4                            loc_BE80:
0000CBE4 B044                       		cmp.w	d4,d0
0000CBE6 62CA                       		bhi.s	loc_BE4E
0000CBE8                            
0000CBE8                            loc_BE84:
0000CBE8 121A                       		move.b	(a2)+,d1
0000CBEA 4881                       		ext.w	d1
0000CBEC 3029 000C                  		move.w	obY(a1),d0
0000CBF0 9041                       		sub.w	d1,d0
0000CBF2 9043                       		sub.w	d3,d0
0000CBF4 6400                       		bcc.s	loc_BE9A
0000CBF6 D241                       		add.w	d1,d1
0000CBF8 D041                       		add.w	d1,d0
0000CBFA 6500                       		bcs.s	loc_BE9E
0000CBFC 60B4                       		bra.s	loc_BE4E
0000CBFE                            ; ===========================================================================
0000CBFE                            
0000CBFE                            loc_BE9A:
0000CBFE B045                       		cmp.w	d5,d0
0000CC00 62B0                       		bhi.s	loc_BE4E
0000CC02                            
0000CC02                            loc_BE9E:
0000CC02 361F                       		move.w	(sp)+,d3
0000CC04 7001                       		moveq	#1,d0
0000CC06 4E75                       		rts	
0000CC08                            ; End of function But_MZBlock
0000CC08                            ; End of function But_MZBlock
0000CC08                            Map_But:	include	"_maps\Button.asm"
0000CC08                            ; ---------------------------------------------------------------------------
0000CC08                            ; Sprite mappings - switches (MZ, SYZ, LZ, SBZ)
0000CC08                            ; ---------------------------------------------------------------------------
0000CC08                            Map_But_internal:
0000CC08 0000                       		dc.w byte_BEAC-Map_But_internal
0000CC0A 0000                       		dc.w byte_BEB7-Map_But_internal
0000CC0C 0000                       		dc.w byte_BEC2-Map_But_internal
0000CC0E 0000                       		dc.w byte_BEB7-Map_But_internal
0000CC10 02                         byte_BEAC:	dc.b 2
0000CC11 F505 0000 F0               		dc.b $F5, 5, 0,	0, $F0
0000CC16 F505 0800 00               		dc.b $F5, 5, 8,	0, 0
0000CC1B 02                         byte_BEB7:	dc.b 2
0000CC1C F505 0004 F0               		dc.b $F5, 5, 0,	4, $F0
0000CC21 F505 0804 00               		dc.b $F5, 5, 8,	4, 0
0000CC26 02                         byte_BEC2:	dc.b 2
0000CC27 F505 FFFC F0               		dc.b $F5, 5, $FF, $FC, $F0
0000CC2C F505 07FC 00               		dc.b $F5, 5, 7,	$FC, 0
0000CC31 F805 0000 F8               		dc.b $F8, 5, 0,	0, $F8
0000CC36                            		even
0000CC36                            		even
0000CC36                            
0000CC36                            		include	"_incObj\33 Pushable Blocks.asm"
0000CC36                            ; ---------------------------------------------------------------------------
0000CC36                            ; Object 33 - pushable blocks (MZ, LZ)
0000CC36                            ; ---------------------------------------------------------------------------
0000CC36                            
0000CC36                            PushBlock:
0000CC36 7000                       		moveq	#0,d0
0000CC38 1028 0024                  		move.b	obRoutine(a0),d0
0000CC3C 323B 0000                  		move.w	PushB_Index(pc,d0.w),d1
0000CC40 4EFB 1000                  		jmp	PushB_Index(pc,d1.w)
0000CC44                            ; ===========================================================================
0000CC44 0000                       PushB_Index:	dc.w PushB_Main-PushB_Index
0000CC46 0000                       		dc.w loc_BF6E-PushB_Index
0000CC48 0000                       		dc.w loc_C02C-PushB_Index
0000CC4A                            
0000CC4A 1000                       PushB_Var:	dc.b $10, 0	; object width,	frame number
0000CC4C 4001                       		dc.b $40, 1
0000CC4E                            ; ===========================================================================
0000CC4E                            
0000CC4E                            PushB_Main:	; Routine 0
0000CC4E 5428 0024                  		addq.b	#2,obRoutine(a0)
0000CC52 117C 000F 0016             		move.b	#$F,obHeight(a0)
0000CC58 117C 000F 0017             		move.b	#$F,obWidth(a0)
0000CC5E 217C 0000 0000 0004        		move.l	#Map_Push,obMap(a0)
0000CC66 317C 42B8 0002             		move.w	#$42B8,obGfx(a0) ; MZ specific code
0000CC6C 0C38 0001 FE10             		cmpi.b	#1,(v_zone).w
0000CC72 6600                       		bne.s	@notLZ
0000CC74 317C 43DE 0002             		move.w	#$43DE,obGfx(a0) ; LZ specific code
0000CC7A                            
0000CC7A                            	@notLZ:
0000CC7A 117C 0004 0001             		move.b	#4,obRender(a0)
0000CC80 117C 0003 0018             		move.b	#3,obPriority(a0)
0000CC86 3168 0008 0034             		move.w	obX(a0),$34(a0)
0000CC8C 3168 000C 0036             		move.w	obY(a0),$36(a0)
0000CC92 7000                       		moveq	#0,d0
0000CC94 1028 0028                  		move.b	obSubtype(a0),d0
0000CC98 D040                       		add.w	d0,d0
0000CC9A 0240 000E                  		andi.w	#$E,d0
0000CC9E 45FB 00AA                  		lea	PushB_Var(pc,d0.w),a2
0000CCA2 115A 0019                  		move.b	(a2)+,obActWid(a0)
0000CCA6 115A 001A                  		move.b	(a2)+,obFrame(a0)
0000CCAA 4A28 0028                  		tst.b	obSubtype(a0)
0000CCAE 6700                       		beq.s	@chkgone
0000CCB0 317C C2B8 0002             		move.w	#$C2B8,obGfx(a0)
0000CCB6                            
0000CCB6                            	@chkgone:
0000CCB6 45F8 FC00                  		lea	(v_objstate).w,a2
0000CCBA 7000                       		moveq	#0,d0
0000CCBC 1028 0023                  		move.b	obRespawnNo(a0),d0
0000CCC0 6700                       		beq.s	loc_BF6E
0000CCC2 08B2 0007 0002             		bclr	#7,2(a2,d0.w)
0000CCC8 08F2 0000 0002             		bset	#0,2(a2,d0.w)
0000CCCE 6600 0000                  		bne.w	DeleteObject
0000CCD2                            
0000CCD2                            loc_BF6E:	; Routine 2
0000CCD2 4A28 0032                  		tst.b	$32(a0)
0000CCD6 6600 0000                  		bne.w	loc_C046
0000CCDA 7200                       		moveq	#0,d1
0000CCDC 1228 0019                  		move.b	obActWid(a0),d1
0000CCE0 0641 000B                  		addi.w	#$B,d1
0000CCE4 343C 0010                  		move.w	#$10,d2
0000CCE8 363C 0011                  		move.w	#$11,d3
0000CCEC 3828 0008                  		move.w	obX(a0),d4
0000CCF0 6100 0000                  		bsr.w	loc_C186
0000CCF4 0C78 0200 FE10             		cmpi.w	#(id_MZ<<8)+0,(v_zone).w ; is the level MZ act 1?
0000CCFA 6600                       		bne.s	loc_BFC6	; if not, branch
0000CCFC 08A8 0007 0028             		bclr	#7,obSubtype(a0)
0000CD02 3028 0008                  		move.w	obX(a0),d0
0000CD06 0C40 0A20                  		cmpi.w	#$A20,d0
0000CD0A 6500                       		bcs.s	loc_BFC6
0000CD0C 0C40 0AA1                  		cmpi.w	#$AA1,d0
0000CD10 6400                       		bcc.s	loc_BFC6
0000CD12 3038 F7A4                  		move.w	(v_obj31ypos).w,d0
0000CD16 0440 001C                  		subi.w	#$1C,d0
0000CD1A 3140 000C                  		move.w	d0,obY(a0)
0000CD1E 08F8 0007 F7A4             		bset	#7,(v_obj31ypos).w
0000CD24 08E8 0007 0028             		bset	#7,obSubtype(a0)
0000CD2A                            
0000CD2A                            	loc_BFC6:
0000CD46 6000 0000                  		bra.w	DisplaySprite
0000CD4A                            ; ===========================================================================
0000CD4A                            
0000CD4A                            loc_ppppp:
0000CD66 3168 0034 0008             		move.w	$34(a0),obX(a0)
0000CD6C 3168 0036 000C             		move.w	$36(a0),obY(a0)
0000CD72 117C 0004 0024             		move.b	#4,obRoutine(a0)
0000CD78 6000                       		bra.s	loc_C02C
0000CD7A                            ; ===========================================================================
0000CD7A                            
0000CD7A                            loc_C016:
0000CD7A 45F8 FC00                  		lea	(v_objstate).w,a2
0000CD7E 7000                       		moveq	#0,d0
0000CD80 1028 0023                  		move.b	obRespawnNo(a0),d0
0000CD84 6700                       		beq.s	loc_C028
0000CD86 08B2 0000 0002             		bclr	#0,2(a2,d0.w)
0000CD8C                            
0000CD8C                            loc_C028:
0000CD8C 6000 0000                  		bra.w	DeleteObject
0000CD90                            ; ===========================================================================
0000CD90                            
0000CD90                            loc_C02C:	; Routine 4
0000CD90 6100 0000                  		bsr.w	ChkPartiallyVisible
0000CD94 6700                       		beq.s	locret_C044
0000CD96 117C 0002 0024             		move.b	#2,obRoutine(a0)
0000CD9C 4228 0032                  		clr.b	$32(a0)
0000CDA0 4268 0010                  		clr.w	obVelX(a0)
0000CDA4 4268 0012                  		clr.w	obVelY(a0)
0000CDA8                            
0000CDA8                            locret_C044:
0000CDA8 4E75                       		rts	
0000CDAA                            ; ===========================================================================
0000CDAA                            
0000CDAA                            loc_C046:
0000CDAA 3F28 0008                  		move.w	obX(a0),-(sp)
0000CDAE 0C28 0004 0025             		cmpi.b	#4,ob2ndRout(a0)
0000CDB4 6400                       		bcc.s	loc_C056
0000CDB6 6100 0000                  		bsr.w	SpeedToPos
0000CDBA                            
0000CDBA                            loc_C056:
0000CDBA 0828 0001 0022             		btst	#1,obStatus(a0)
0000CDC0 6700                       		beq.s	loc_C0A0
0000CDC2 0668 0018 0012             		addi.w	#$18,obVelY(a0)
0000CDC8 4EB9 0000 0000             		jsr	(ObjFloorDist).l
0000CDCE 4A41                       		tst.w	d1
0000CDD0 6A00 0000                  		bpl.w	loc_C09E
0000CDD4 D368 000C                  		add.w	d1,obY(a0)
0000CDD8 4268 0012                  		clr.w	obVelY(a0)
0000CDDC 08A8 0001 0022             		bclr	#1,obStatus(a0)
0000CDE2 3011                       		move.w	(a1),d0
0000CDE4 0240 03FF                  		andi.w	#$3FF,d0
0000CDE8 0C40 016A                  		cmpi.w	#$16A,d0
0000CDEC 6500                       		bcs.s	loc_C09E
0000CDEE 3028 0030                  		move.w	$30(a0),d0
0000CDF2 E640                       		asr.w	#3,d0
0000CDF4 3140 0010                  		move.w	d0,obVelX(a0)
0000CDF8 117C 0001 0032             		move.b	#1,$32(a0)
0000CDFE 4268 000E                  		clr.w	$E(a0)
0000CE02                            
0000CE02                            loc_C09E:
0000CE02 6000                       		bra.s	loc_C0E6
0000CE04                            ; ===========================================================================
0000CE04                            
0000CE04                            loc_C0A0:
0000CE04 4A68 0010                  		tst.w	obVelX(a0)
0000CE08 6700 0000                  		beq.w	loc_C0D6
0000CE0C 6B00                       		bmi.s	loc_C0BC
0000CE0E 7600                       		moveq	#0,d3
0000CE10 1628 0019                  		move.b	obActWid(a0),d3
0000CE14 4EB9 0000 0000             		jsr	(ObjHitWallRight).l
0000CE1A 4A41                       		tst.w	d1		; has block touched a wall?
0000CE1C 6B00                       		bmi.s	PushB_StopPush	; if yes, branch
0000CE1E 6000                       		bra.s	loc_C0E6
0000CE20                            ; ===========================================================================
0000CE20                            
0000CE20                            loc_C0BC:
0000CE20 7600                       		moveq	#0,d3
0000CE22 1628 0019                  		move.b	obActWid(a0),d3
0000CE26 4643                       		not.w	d3
0000CE28 4EB9 0000 0000             		jsr	(ObjHitWallLeft).l
0000CE2E 4A41                       		tst.w	d1		; has block touched a wall?
0000CE30 6B00                       		bmi.s	PushB_StopPush	; if yes, branch
0000CE32 6000                       		bra.s	loc_C0E6
0000CE34                            ; ===========================================================================
0000CE34                            
0000CE34                            PushB_StopPush:
0000CE34 4268 0010                  		clr.w	obVelX(a0)		; stop block moving
0000CE38 6000                       		bra.s	loc_C0E6
0000CE3A                            ; ===========================================================================
0000CE3A                            
0000CE3A                            loc_C0D6:
0000CE3A 06A8 0000 2001 000C        		addi.l	#$2001,obY(a0)
0000CE42 0C28 00A0 000F             		cmpi.b	#$A0,obY+3(a0)
0000CE48 6400                       		bcc.s	loc_C104
0000CE4A                            
0000CE4A                            loc_C0E6:
0000CE4A 7200                       		moveq	#0,d1
0000CE4C 1228 0019                  		move.b	obActWid(a0),d1
0000CE50 0641 000B                  		addi.w	#$B,d1
0000CE54 343C 0010                  		move.w	#$10,d2
0000CE58 363C 0011                  		move.w	#$11,d3
0000CE5C 381F                       		move.w	(sp)+,d4
0000CE5E 6100 0000                  		bsr.w	loc_C186
0000CE62 6100                       		bsr.s	PushB_ChkLava
0000CE64 6000 FEC4                  		bra.w	loc_BFC6
0000CE68                            ; ===========================================================================
0000CE68                            
0000CE68                            loc_C104:
0000CE68 381F                       		move.w	(sp)+,d4
0000CE6A 43F8 D000                  		lea	(v_player).w,a1
0000CE6E 08A9 0003 0022             		bclr	#3,obStatus(a1)
0000CE74 08A8 0003 0022             		bclr	#3,obStatus(a0)
0000CE7A 6000 FECE                  		bra.w	loc_ppppp
0000CE7E                            ; ===========================================================================
0000CE7E                            
0000CE7E                            PushB_ChkLava:
0000CE7E 0C78 0201 FE10             		cmpi.w	#(id_MZ<<8)+1,(v_zone).w ; is the level MZ act 2?
0000CE84 6600                       		bne.s	PushB_ChkLava2	; if not, branch
0000CE86 343C FFE0                  		move.w	#-$20,d2
0000CE8A 0C68 0DD0 0008             		cmpi.w	#$DD0,obX(a0)
0000CE90 6700                       		beq.s	PushB_LoadLava
0000CE92 0C68 0CC0 0008             		cmpi.w	#$CC0,obX(a0)
0000CE98 6700                       		beq.s	PushB_LoadLava
0000CE9A 0C68 0BA0 0008             		cmpi.w	#$BA0,obX(a0)
0000CEA0 6700                       		beq.s	PushB_LoadLava
0000CEA2 4E75                       		rts	
0000CEA4                            ; ===========================================================================
0000CEA4                            
0000CEA4                            PushB_ChkLava2:
0000CEA4 0C78 0202 FE10             		cmpi.w	#(id_MZ<<8)+2,(v_zone).w ; is the level MZ act 3?
0000CEAA 6600                       		bne.s	PushB_NoLava	; if not, branch
0000CEAC 343C 0020                  		move.w	#$20,d2
0000CEB0 0C68 0560 0008             		cmpi.w	#$560,obX(a0)
0000CEB6 6700                       		beq.s	PushB_LoadLava
0000CEB8 0C68 05C0 0008             		cmpi.w	#$5C0,obX(a0)
0000CEBE 6700                       		beq.s	PushB_LoadLava
0000CEC0                            
0000CEC0                            PushB_NoLava:
0000CEC0 4E75                       		rts	
0000CEC2                            ; ===========================================================================
0000CEC2                            
0000CEC2                            PushB_LoadLava:
0000CEC2 6100 0000                  		bsr.w	FindFreeObj
0000CEC6 6600                       		bne.s	locret_C184
0000CEC8 137C 0000 0000             		move.b	#id_GeyserMaker,0(a1) ; load lava geyser object
0000CECE 3368 0008 0008             		move.w	obX(a0),obX(a1)
0000CED4 D569 0008                  		add.w	d2,obX(a1)
0000CED8 3368 000C 000C             		move.w	obY(a0),obY(a1)
0000CEDE 0669 0010 000C             		addi.w	#$10,obY(a1)
0000CEE4 2348 003C                  		move.l	a0,$3C(a1)
0000CEE8                            
0000CEE8                            locret_C184:
0000CEE8 4E75                       		rts	
0000CEEA                            ; ===========================================================================
0000CEEA                            
0000CEEA                            loc_C186:
0000CEEA 1028 0025                  		move.b	ob2ndRout(a0),d0
0000CEEE 6700 0000                  		beq.w	loc_C218
0000CEF2 5500                       		subq.b	#2,d0
0000CEF4 6600                       		bne.s	loc_C1AA
0000CEF6 6100 AD02                  		bsr.w	ExitPlatform
0000CEFA 0829 0003 0022             		btst	#3,obStatus(a1)
0000CF00 6600                       		bne.s	loc_C1A4
0000CF02 4228 0025                  		clr.b	ob2ndRout(a0)
0000CF06 4E75                       		rts	
0000CF08                            ; ===========================================================================
0000CF08                            
0000CF08                            loc_C1A4:
0000CF08 3404                       		move.w	d4,d2
0000CF0A 6000 B250                  		bra.w	MvSonicOnPtfm
0000CF0E                            ; ===========================================================================
0000CF0E                            
0000CF0E                            loc_C1AA:
0000CF0E 5500                       		subq.b	#2,d0
0000CF10 6600                       		bne.s	loc_C1F2
0000CF12 6100 0000                  		bsr.w	SpeedToPos
0000CF16 0668 0018 0012             		addi.w	#$18,obVelY(a0)
0000CF1C 4EB9 0000 0000             		jsr	(ObjFloorDist).l
0000CF22 4A41                       		tst.w	d1
0000CF24 6A00 0000                  		bpl.w	locret_C1F0
0000CF28 D368 000C                  		add.w	d1,obY(a0)
0000CF2C 4268 0012                  		clr.w	obVelY(a0)
0000CF30 4228 0025                  		clr.b	ob2ndRout(a0)
0000CF34 3011                       		move.w	(a1),d0
0000CF36 0240 03FF                  		andi.w	#$3FF,d0
0000CF3A 0C40 016A                  		cmpi.w	#$16A,d0
0000CF3E 6500                       		bcs.s	locret_C1F0
0000CF40 3028 0030                  		move.w	$30(a0),d0
0000CF44 E640                       		asr.w	#3,d0
0000CF46 3140 0010                  		move.w	d0,obVelX(a0)
0000CF4A 117C 0001 0032             		move.b	#1,$32(a0)
0000CF50 4268 000E                  		clr.w	obY+2(a0)
0000CF54                            
0000CF54                            locret_C1F0:
0000CF54 4E75                       		rts	
0000CF56                            ; ===========================================================================
0000CF56                            
0000CF56                            loc_C1F2:
0000CF56 6100 0000                  		bsr.w	SpeedToPos
0000CF5A 3028 0008                  		move.w	obX(a0),d0
0000CF5E 0240 000C                  		andi.w	#$C,d0
0000CF62 6600 0000                  		bne.w	locret_C2E4
0000CF66 0268 FFF0 0008             		andi.w	#-$10,obX(a0)
0000CF6C 3168 0010 0030             		move.w	obVelX(a0),$30(a0)
0000CF72 4268 0010                  		clr.w	obVelX(a0)
0000CF76 5528 0025                  		subq.b	#2,ob2ndRout(a0)
0000CF7A 4E75                       		rts	
0000CF7C                            ; ===========================================================================
0000CF7C                            
0000CF7C                            loc_C218:
0000CF7C 6100 0000                  		bsr.w	Solid_ChkEnter
0000CF80 4A44                       		tst.w	d4
0000CF82 6700 0000                  		beq.w	locret_C2E4
0000CF86 6B00 0000                  		bmi.w	locret_C2E4
0000CF8A 4A28 0032                  		tst.b	$32(a0)
0000CF8E 6700                       		beq.s	loc_C230
0000CF90 6000 0000                  		bra.w	locret_C2E4
0000CF94                            ; ===========================================================================
0000CF94                            
0000CF94                            loc_C230:
0000CF94 4A40                       		tst.w	d0
0000CF96 6700 0000                  		beq.w	locret_C2E4
0000CF9A 6B00                       		bmi.s	loc_C268
0000CF9C 0829 0000 0022             		btst	#0,obStatus(a1)
0000CFA2 6600 0000                  		bne.w	locret_C2E4
0000CFA6 3F00                       		move.w	d0,-(sp)
0000CFA8 7600                       		moveq	#0,d3
0000CFAA 1628 0019                  		move.b	obActWid(a0),d3
0000CFAE 4EB9 0000 0000             		jsr	(ObjHitWallRight).l
0000CFB4 301F                       		move.w	(sp)+,d0
0000CFB6 4A41                       		tst.w	d1
0000CFB8 6B00 0000                  		bmi.w	locret_C2E4
0000CFBC 06A8 0001 0000 0008        		addi.l	#$10000,obX(a0)
0000CFC4 7001                       		moveq	#1,d0
0000CFC6 323C 0040                  		move.w	#$40,d1
0000CFCA 6000                       		bra.s	loc_C294
0000CFCC                            ; ===========================================================================
0000CFCC                            
0000CFCC                            loc_C268:
0000CFCC 0829 0000 0022             		btst	#0,obStatus(a1)
0000CFD2 6700                       		beq.s	locret_C2E4
0000CFD4 3F00                       		move.w	d0,-(sp)
0000CFD6 7600                       		moveq	#0,d3
0000CFD8 1628 0019                  		move.b	obActWid(a0),d3
0000CFDC 4643                       		not.w	d3
0000CFDE 4EB9 0000 0000             		jsr	(ObjHitWallLeft).l
0000CFE4 301F                       		move.w	(sp)+,d0
0000CFE6 4A41                       		tst.w	d1
0000CFE8 6B00                       		bmi.s	locret_C2E4
0000CFEA 04A8 0001 0000 0008        		subi.l	#$10000,obX(a0)
0000CFF2 70FF                       		moveq	#-1,d0
0000CFF4 323C FFC0                  		move.w	#-$40,d1
0000CFF8                            
0000CFF8                            loc_C294:
0000CFF8 43F8 D000                  		lea	(v_player).w,a1
0000CFFC D169 0008                  		add.w	d0,obX(a1)
0000D000 3341 0014                  		move.w	d1,obInertia(a1)
0000D004 337C 0000 0010             		move.w	#0,obVelX(a1)
0000D00A 3F00                       		move.w	d0,-(sp)
0000D016 301F                       		move.w	(sp)+,d0
0000D018 4A28 0028                  		tst.b	obSubtype(a0)
0000D01C 6B00                       		bmi.s	locret_C2E4
0000D01E 3F00                       		move.w	d0,-(sp)
0000D020 4EB9 0000 0000             		jsr	(ObjFloorDist).l
0000D026 301F                       		move.w	(sp)+,d0
0000D028 0C41 0004                  		cmpi.w	#4,d1
0000D02C 6F00                       		ble.s	loc_C2E0
0000D02E 317C 0400 0010             		move.w	#$400,obVelX(a0)
0000D034 4A40                       		tst.w	d0
0000D036 6A00                       		bpl.s	loc_C2D8
0000D038 4468 0010                  		neg.w	obVelX(a0)
0000D03C                            
0000D03C                            loc_C2D8:
0000D03C 117C 0006 0025             		move.b	#6,ob2ndRout(a0)
0000D042 6000                       		bra.s	locret_C2E4
0000D044                            ; ===========================================================================
0000D044                            
0000D044                            loc_C2E0:
0000D044 D368 000C                  		add.w	d1,obY(a0)
0000D048                            
0000D048                            locret_C2E4:
0000D048 4E75                       		rts	
0000D048 4E75                       		rts	
0000D04A                            Map_Push:	include	"_maps\Pushable Blocks.asm"
0000D04A                            ; ---------------------------------------------------------------------------
0000D04A                            ; Sprite mappings - pushable blocks (MZ, LZ)
0000D04A                            ; ---------------------------------------------------------------------------
0000D04A                            Map_Push_internal:
0000D04A 0000                       		dc.w @single-Map_Push_internal
0000D04C 0000                       		dc.w @four-Map_Push_internal
0000D04E 01                         @single:	dc.b 1
0000D04F F00F 0008 F0               		dc.b $F0, $F, 0, 8, $F0	; single block
0000D054 04                         @four:		dc.b 4
0000D055 F00F 0008 C0               		dc.b $F0, $F, 0, 8, $C0	; row of 4 blocks
0000D05A F00F 0008 E0               		dc.b $F0, $F, 0, 8, $E0
0000D05F F00F 0008 00               		dc.b $F0, $F, 0, 8, 0
0000D064 F00F 0008 20               		dc.b $F0, $F, 0, 8, $20
0000D06A 00                         		even
0000D06A 00                         		even
0000D06A                            
0000D06A                            		include	"_incObj\34 Title Cards.asm"
0000D06A                            ; ---------------------------------------------------------------------------
0000D06A                            ; Object 34 - zone title cards
0000D06A                            ; ---------------------------------------------------------------------------
0000D06A                            
0000D06A                            TitleCard:
0000D06A 7000                       		moveq	#0,d0
0000D06C 1028 0024                  		move.b	obRoutine(a0),d0
0000D070 323B 0000                  		move.w	Card_Index(pc,d0.w),d1
0000D074 4EFB 1000                  		jmp	Card_Index(pc,d1.w)
0000D078                            ; ===========================================================================
0000D078 0000                       Card_Index:	dc.w Card_CheckSBZ3-Card_Index
0000D07A 0000                       		dc.w Card_ChkPos-Card_Index
0000D07C 0000                       		dc.w Card_Wait-Card_Index
0000D07E 0000                       		dc.w Card_Wait-Card_Index
0000D080                            
0000D080 =00000030                  card_mainX:	equ $30		; position for card to display on
0000D080 =00000032                  card_finalX:	equ $32		; position for card to finish on
0000D080                            ; ===========================================================================
0000D080                            
0000D080                            Card_CheckSBZ3:	; Routine 0
0000D080 2248                       		movea.l	a0,a1
0000D082 7000                       		moveq	#0,d0
0000D084 1038 FE10                  		move.b	(v_zone).w,d0
0000D088 0C78 0103 FE10             		cmpi.w	#(id_LZ<<8)+3,(v_zone).w ; check if level is SBZ 3
0000D08E 6600                       		bne.s	Card_CheckFZ
0000D090 7005                       		moveq	#5,d0		; load title card number 5 (SBZ)
0000D092                            
0000D092                            	Card_CheckFZ:
0000D092 3400                       		move.w	d0,d2
0000D094 0C78 0502 FE10             		cmpi.w	#(id_SBZ<<8)+2,(v_zone).w ; check if level is FZ
0000D09A 6600                       		bne.s	Card_LoadConfig
0000D09C 7006                       		moveq	#6,d0		; load title card number 6 (FZ)
0000D09E 740D                       		moveq	#$D,d2		; use "FINAL" mappings
0000D0A0                            
0000D0A0                            	Card_LoadConfig:
0000D0A0 47F9 0000 0000             		lea	(Card_ConData).l,a3
0000D0A6 E948                       		lsl.w	#4,d0
0000D0A8 D6C0                       		adda.w	d0,a3
0000D0AA 45F9 0000 0000             		lea	(Card_ItemData).l,a2
0000D0B0 7203                       		moveq	#3,d1
0000D0B2                            
0000D0B2                            Card_Loop:
0000D0B2 137C 0000 0000             		move.b	#id_TitleCard,0(a1)
0000D0B8 3353 0008                  		move.w	(a3),obX(a1)	; load start x-position
0000D0BC 335B 0032                  		move.w	(a3)+,card_finalX(a1) ; load finish x-position (same as start)
0000D0C0 335B 0030                  		move.w	(a3)+,card_mainX(a1) ; load main x-position
0000D0C4 335A 000A                  		move.w	(a2)+,obScreenY(a1)
0000D0C8 135A 0024                  		move.b	(a2)+,obRoutine(a1)
0000D0CC 101A                       		move.b	(a2)+,d0
0000D0CE 6600                       		bne.s	Card_ActNumber
0000D0D0 1002                       		move.b	d2,d0
0000D0D2                            
0000D0D2                            	Card_ActNumber:
0000D0D2 0C00 0009                  		cmpi.b	#9,d0
0000D0D6 6600                       		bne.s	Card_MakeSprite
0000D0D8 D038 FE11                  		add.b	(v_act).w,d0
0000D0DC 0C38 0003 FE11             		cmpi.b	#3,(v_act).w
0000D0E2 6600                       		bne.s	Card_MakeSprite
0000D0E4 5300                       		subq.b	#1,d0
0000D0E6                            
0000D0E6                            	Card_MakeSprite:
0000D0E6 1340 001A                  		move.b	d0,obFrame(a1)	; display frame	number d0
0000D0EA 237C 0000 0000 0004        		move.l	#Map_Card,obMap(a1)
0000D0F2 337C 857C 0002             		move.w	#$857C,obGfx(a1)
0000D0F8 137C 0078 0019             		move.b	#$78,obActWid(a1)
0000D0FE 137C 0000 0001             		move.b	#0,obRender(a1)
0000D104 137C 0000 0018             		move.b	#0,obPriority(a1)
0000D10A 337C 003C 001E             		move.w	#60,obTimeFrame(a1) ; set time delay to 1 second
0000D110 43E9 0040                  		lea	$40(a1),a1	; next object
0000D114 51C9 FF9C                  		dbf	d1,Card_Loop	; repeat sequence another 3 times
0000D118                            
0000D118                            Card_ChkPos:	; Routine 2
0000D118 7210                       		moveq	#$10,d1		; set horizontal speed
0000D11A 3028 0030                  		move.w	card_mainX(a0),d0
0000D11E B068 0008                  		cmp.w	obX(a0),d0	; has item reached the target position?
0000D122 6700                       		beq.s	Card_NoMove	; if yes, branch
0000D124 6C00                       		bge.s	Card_Move
0000D126 4441                       		neg.w	d1
0000D128                            
0000D128                            Card_Move:
0000D128 D368 0008                  		add.w	d1,obX(a0)	; change item's position
0000D12C                            
0000D12C                            Card_NoMove:
0000D12C 3028 0008                  		move.w	obX(a0),d0
0000D130 6B00                       		bmi.s	locret_C3D8
0000D132 0C40 0200                  		cmpi.w	#$200,d0	; has item moved beyond	$200 on	x-axis?
0000D136 6400                       		bcc.s	locret_C3D8	; if yes, branch
0000D138 6000 0000                  		bra.w	DisplaySprite
0000D13C                            ; ===========================================================================
0000D13C                            
0000D13C                            locret_C3D8:
0000D13C 4E75                       		rts	
0000D13E                            ; ===========================================================================
0000D13E                            
0000D13E                            Card_Wait:	; Routine 4/6
0000D13E 4A68 001E                  		tst.w	obTimeFrame(a0)	; is time remaining zero?
0000D142 6700                       		beq.s	Card_ChkPos2	; if yes, branch
0000D144 5368 001E                  		subq.w	#1,obTimeFrame(a0) ; subtract 1 from time
0000D148 6000 0000                  		bra.w	DisplaySprite
0000D14C                            ; ===========================================================================
0000D14C                            
0000D14C                            Card_ChkPos2:
0000D14C 4A28 0001                  		tst.b	obRender(a0)
0000D150 6A00                       		bpl.s	Card_ChangeArt
0000D152 7220                       		moveq	#$20,d1
0000D154 3028 0032                  		move.w	card_finalX(a0),d0
0000D158 B068 0008                  		cmp.w	obX(a0),d0	; has item reached the finish position?
0000D15C 6700                       		beq.s	Card_ChangeArt	; if yes, branch
0000D15E 6C00                       		bge.s	Card_Move2
0000D160 4441                       		neg.w	d1
0000D162                            
0000D162                            Card_Move2:
0000D162 D368 0008                  		add.w	d1,obX(a0)	; change item's position
0000D166 3028 0008                  		move.w	obX(a0),d0
0000D16A 6B00                       		bmi.s	locret_C412
0000D16C 0C40 0200                  		cmpi.w	#$200,d0	; has item moved beyond	$200 on	x-axis?
0000D170 6400                       		bcc.s	locret_C412	; if yes, branch
0000D172 6000 0000                  		bra.w	DisplaySprite
0000D176                            ; ===========================================================================
0000D176                            
0000D176                            locret_C412:
0000D176 4E75                       		rts	
0000D178                            ; ===========================================================================
0000D178                            
0000D178                            Card_ChangeArt:
0000D178 0C28 0004 0024             		cmpi.b	#4,obRoutine(a0)
0000D17E 6600                       		bne.s	Card_Delete
0000D180 7000                       		moveq	#plcid_Explode,d0
0000D182 4EB9 0000 136E             		jsr	(AddPLC).l	; load explosion patterns
0000D188 7000                       		moveq	#0,d0
0000D18A 1038 FE10                  		move.b	(v_zone).w,d0
0000D18E 0640 0000                  		addi.w	#plcid_GHZAnimals,d0
0000D192 4EB9 0000 136E             		jsr	(AddPLC).l	; load animal patterns
0000D198                            
0000D198                            Card_Delete:
0000D198 6000 0000                  		bra.w	DeleteObject
0000D19C                            ; ===========================================================================
0000D19C 00D0                       Card_ItemData:	dc.w $D0	; y-axis position
0000D19E 0200                       		dc.b 2,	0	; routine number, frame	number (changes)
0000D1A0 00E4                       		dc.w $E4
0000D1A2 0206                       		dc.b 2,	6
0000D1A4 00EA                       		dc.w $EA
0000D1A6 0209                       		dc.b 2,	9
0000D1A8 00E0                       		dc.w $E0
0000D1AA 020C                       		dc.b 2,	$C
0000D1AC                            ; ---------------------------------------------------------------------------
0000D1AC                            ; Title	card configuration data
0000D1AC                            ; Format:
0000D1AC                            ; 4 bytes per item (YYYY XXXX)
0000D1AC                            ; 4 items per level (GREEN HILL, ZONE, ACT X, oval)
0000D1AC                            ; ---------------------------------------------------------------------------
0000D1AC 0000 0120 FEFC 013C 0414+  Card_ConData:	dc.w 0,	$120, $FEFC, $13C, $414, $154, $214, $154 ; GHZ
0000D1BC 0000 0120 FEF4 0134 040C+  		dc.w 0,	$120, $FEF4, $134, $40C, $14C, $20C, $14C ; LZ
0000D1CC 0000 0120 FEE0 0120 03F8+  		dc.w 0,	$120, $FEE0, $120, $3F8, $138, $1F8, $138 ; MZ
0000D1DC 0000 0120 FEFC 013C 0414+  		dc.w 0,	$120, $FEFC, $13C, $414, $154, $214, $154 ; SLZ
0000D1EC 0000 0120 FF04 0144 041C+  		dc.w 0,	$120, $FF04, $144, $41C, $15C, $21C, $15C ; SYZ
0000D1FC 0000 0120 FF04 0144 041C+  		dc.w 0,	$120, $FF04, $144, $41C, $15C, $21C, $15C ; SBZ
0000D20C 0000 0120 FEE4 0124 03EC+  		dc.w 0,	$120, $FEE4, $124, $3EC, $3EC, $1EC, $12C ; FZ
0000D21C 0000 0120 FF04 0144 041C+  		dc.w 0,	$120, $FF04, $144, $41C, $15C, $21C, $15C ; SBZ
0000D22C 0000 0120 FF04 0144 041C+  		dc.w 0,	$120, $FF04, $144, $41C, $15C, $21C, $15C ; SBZ
0000D23C                            ; ===========================================================================
0000D23C                            ; ===========================================================================
0000D23C                            		include	"_incObj\39 Game Over.asm"
0000D23C                            ; ---------------------------------------------------------------------------
0000D23C                            ; Object 39 - "GAME OVER" and "TIME OVER"
0000D23C                            ; ---------------------------------------------------------------------------
0000D23C                            
0000D23C                            GameOverCard:
0000D23C 7000                       		moveq	#0,d0
0000D23E 1028 0024                  		move.b	obRoutine(a0),d0
0000D242 323B 0000                  		move.w	Over_Index(pc,d0.w),d1
0000D246 4EFB 1000                  		jmp	Over_Index(pc,d1.w)
0000D24A                            ; ===========================================================================
0000D24A 0000                       Over_Index:	dc.w Over_ChkPLC-Over_Index
0000D24C 0000                       		dc.w Over_Move-Over_Index
0000D24E 0000                       		dc.w Over_Wait-Over_Index
0000D250                            ; ===========================================================================
0000D250                            
0000D250                            Over_ChkPLC:	; Routine 0
0000D250 4AB8 F680                  		tst.l	(v_plc_buffer).w ; are the pattern load cues empty?
0000D254 6700                       		beq.s	Over_Main	; if yes, branch
0000D256 4E75                       		rts	
0000D258                            ; ===========================================================================
0000D258                            
0000D258                            Over_Main:
0000D258 5428 0024                  		addq.b	#2,obRoutine(a0)
0000D25C 317C 0050 0008             		move.w	#$50,obX(a0)	; set x-position
0000D262 0828 0000 001A             		btst	#0,obFrame(a0)	; is the object	"OVER"?
0000D268 6700                       		beq.s	Over_1stWord	; if not, branch
0000D26A 317C 01F0 0008             		move.w	#$1F0,obX(a0)	; set x-position for "OVER"
0000D270                            
0000D270                            	Over_1stWord:
0000D270 317C 00F0 000A             		move.w	#$F0,obScreenY(a0)
0000D276 217C 0000 0000 0004        		move.l	#Map_Over,obMap(a0)
0000D27E 317C 855E 0002             		move.w	#$855E,obGfx(a0)
0000D284 117C 0000 0001             		move.b	#0,obRender(a0)
0000D28A 117C 0000 0018             		move.b	#0,obPriority(a0)
0000D290                            
0000D290                            Over_Move:	; Routine 2
0000D290 7210                       		moveq	#$10,d1		; set horizontal speed
0000D292 0C68 0120 0008             		cmpi.w	#$120,obX(a0)	; has item reached its target position?
0000D298 6700                       		beq.s	Over_SetWait	; if yes, branch
0000D29A 6500                       		bcs.s	Over_UpdatePos
0000D29C 4441                       		neg.w	d1
0000D29E                            	Over_UpdatePos:
0000D29E D368 0008                  		add.w	d1,obX(a0)	; change item's position
0000D2A2 6000 0000                  		bra.w	DisplaySprite
0000D2A6                            ; ===========================================================================
0000D2A6                            
0000D2A6                            Over_SetWait:
0000D2A6 317C 0438 001E             		move.w	#18*60,obTimeFrame(a0) ; set time delay to 12 seconds
0000D2AC 5428 0024                  		addq.b	#2,obRoutine(a0)
0000D2B0 4E75                       		rts	
0000D2B2                            ; ===========================================================================
0000D2B2                            
0000D2B2                            Over_Wait:	; Routine 4
0000D2B2 1038 F605                  		move.b	(v_jpadpress1).w,d0
0000D2B6 0200 0070                  		andi.b	#btnABC,d0	; is button A, B or C pressed?
0000D2BA 6600                       		bne.s	Over_ChgMode	; if yes, branch
0000D2BC 0828 0000 001A             		btst	#0,obFrame(a0)
0000D2C2 6600                       		bne.s	Over_Display
0000D2C4 4A68 001E                  		tst.w	obTimeFrame(a0)	; has time delay reached zero?
0000D2C8 6700                       		beq.s	Over_ChgMode	; if yes, branch
0000D2CA 5368 001E                  		subq.w	#1,obTimeFrame(a0) ; subtract 1 from time delay
0000D2CE 6000 0000                  		bra.w	DisplaySprite
0000D2D2                            ; ===========================================================================
0000D2D2                            
0000D2D2                            Over_ChgMode:
0000D2D2 4A38 FE1A                  		tst.b	(f_timeover).w	; is time over flag set?
0000D2D6 6600                       		bne.s	Over_ResetLvl	; if yes, branch
0000D2D8 11FC 0000 F600             		move.b	#id_Continue,(v_gamemode).w ; set mode to $14 (continue screen)
0000D2DE 4A38 FE18                  		tst.b	(v_continues).w	; do you have any continues?
0000D2E2 6600                       		bne.s	Over_Display	; if yes, branch
0000D2E4 11FC 0000 F600             		move.b	#id_Sega,(v_gamemode).w ; set mode to 0 (Sega screen)
0000D2EA 6000                       		bra.s	Over_Display
0000D2EC                            ; ===========================================================================
0000D2EC                            
0000D2EC                            Over_ResetLvl:
0000D2EC 31FC 0001 FE02             		move.w	#1,(f_restart).w ; restart level
0000D2F2                            
0000D2F2                            Over_Display:
0000D2F2 6000 0000                  		bra.w	DisplaySprite
0000D2F6 4E75                       		rts
0000D2F6 4E75                       		rts
0000D2F8                            		include	"_incObj\3A Got Through Card.asm"
0000D2F8                            ; ---------------------------------------------------------------------------
0000D2F8                            ; Object 3A - "SONIC GOT THROUGH" title	card
0000D2F8                            ; ---------------------------------------------------------------------------
0000D2F8                            
0000D2F8                            GotThroughCard:
0000D2F8 7000                       		moveq	#0,d0
0000D2FA 1028 0024                  		move.b	obRoutine(a0),d0
0000D2FE 323B 0000                  		move.w	Got_Index(pc,d0.w),d1
0000D302 4EFB 1000                  		jmp	Got_Index(pc,d1.w)
0000D306                            ; ===========================================================================
0000D306 0000                       Got_Index:	dc.w Got_ChkPLC-Got_Index
0000D308 0000                       		dc.w Got_Move-Got_Index
0000D30A 0000                       		dc.w Got_Wait-Got_Index
0000D30C 0000                       		dc.w Got_TimeBonus-Got_Index
0000D30E 0000                       		dc.w Got_Wait-Got_Index
0000D310 0000                       		dc.w Got_NextLevel-Got_Index
0000D312 0000                       		dc.w Got_Wait-Got_Index
0000D314 0000                       		dc.w Got_Move2-Got_Index
0000D316 0000                       		dc.w loc_C766-Got_Index
0000D318                            
0000D318 =00000030                  got_mainX:	equ $30		; position for card to display on
0000D318 =00000032                  got_finalX:	equ $32		; position for card to finish on
0000D318                            ; ===========================================================================
0000D318                            
0000D318                            Got_ChkPLC:	; Routine 0
0000D318 4AB8 F680                  		tst.l	(v_plc_buffer).w ; are the pattern load cues empty?
0000D31C 6700                       		beq.s	Got_Main	; if yes, branch
0000D31E 4E75                       		rts	
0000D320                            ; ===========================================================================
0000D320                            
0000D320                            Got_Main:
0000D320 2248                       		movea.l	a0,a1
0000D322 45F9 0000 0000             		lea	(Got_Config).l,a2
0000D328 7206                       		moveq	#6,d1
0000D32A                            
0000D32A                            Got_Loop:
0000D32A 137C 0000 0000             		move.b	#id_GotThroughCard,0(a1)
0000D330 3352 0008                  		move.w	(a2),obX(a1)	; load start x-position
0000D334 335A 0032                  		move.w	(a2)+,got_finalX(a1) ; load finish x-position (same as start)
0000D338 335A 0030                  		move.w	(a2)+,got_mainX(a1) ; load main x-position
0000D33C 335A 000A                  		move.w	(a2)+,obScreenY(a1) ; load y-position
0000D340 135A 0024                  		move.b	(a2)+,obRoutine(a1)
0000D344 101A                       		move.b	(a2)+,d0
0000D346 0C00 0006                  		cmpi.b	#6,d0
0000D34A 6600                       		bne.s	loc_C5CA
0000D34C D038 FE11                  		add.b	(v_act).w,d0	; add act number to frame number
0000D350                            
0000D350                            	loc_C5CA:
0000D350 1340 001A                  		move.b	d0,obFrame(a1)
0000D354 237C 0000 0000 0004        		move.l	#Map_Got,obMap(a1)
0000D35C 337C 857A 0002             		move.w	#$857A,obGfx(a1)
0000D362 137C 0000 0001             		move.b	#0,obRender(a1)
0000D368 43E9 0040                  		lea	$40(a1),a1
0000D36C 51C9 FFBC                  		dbf	d1,Got_Loop	; repeat 6 times
0000D370                            
0000D370                            Got_Move:	; Routine 2
0000D370 7210                       		moveq	#$10,d1		; set horizontal speed
0000D372 3028 0030                  		move.w	got_mainX(a0),d0
0000D376 B068 0008                  		cmp.w	obX(a0),d0	; has item reached its target position?
0000D37A 6700                       		beq.s	loc_C61A	; if yes, branch
0000D37C 6C00                       		bge.s	Got_ChgPos
0000D37E 4441                       		neg.w	d1
0000D380                            
0000D380                            	Got_ChgPos:
0000D380 D368 0008                  		add.w	d1,obX(a0)	; change item's position
0000D384                            
0000D384                            	loc_C5FE:
0000D384 3028 0008                  		move.w	obX(a0),d0
0000D388 6B00                       		bmi.s	locret_C60E
0000D38A 0C40 0200                  		cmpi.w	#$200,d0	; has item moved beyond	$200 on	x-axis?
0000D38E 6400                       		bcc.s	locret_C60E	; if yes, branch
0000D390 6000 0000                  		bra.w	DisplaySprite
0000D394                            ; ===========================================================================
0000D394                            
0000D394                            locret_C60E:
0000D394 4E75                       		rts	
0000D396                            ; ===========================================================================
0000D396                            
0000D396                            loc_C610:
0000D396 117C 000E 0024             		move.b	#$E,obRoutine(a0)
0000D39C 6000 0000                  		bra.w	Got_Move2
0000D3A0                            ; ===========================================================================
0000D3A0                            
0000D3A0                            loc_C61A:
0000D3A0 0C38 000E D724             		cmpi.b	#$E,($FFFFD724).w
0000D3A6 67EE                       		beq.s	loc_C610
0000D3A8 0C28 0004 001A             		cmpi.b	#4,obFrame(a0)
0000D3AE 66D4                       		bne.s	loc_C5FE
0000D3B0 5428 0024                  		addq.b	#2,obRoutine(a0)
0000D3B4 317C 00B4 001E             		move.w	#180,obTimeFrame(a0) ; set time delay to 3 seconds
0000D3BA                            
0000D3BA                            Got_Wait:	; Routine 4, 8, $C
0000D3BA 5368 001E                  		subq.w	#1,obTimeFrame(a0) ; subtract 1 from time delay
0000D3BE 6600                       		bne.s	Got_Display
0000D3C0 5428 0024                  		addq.b	#2,obRoutine(a0)
0000D3C4                            
0000D3C4                            Got_Display:
0000D3C4 6000 0000                  		bra.w	DisplaySprite
0000D3C8                            ; ===========================================================================
0000D3C8                            
0000D3C8                            Got_TimeBonus:	; Routine 6
0000D3C8 6100 0000                  		bsr.w	DisplaySprite
0000D3CC 11FC 0001 F7D6             		move.b	#1,(f_endactbonus).w ; set time/ring bonus update flag
0000D3D2 7000                       		moveq	#0,d0
0000D3D4 4A78 F7D2                  		tst.w	(v_timebonus).w	; is time bonus	= zero?
0000D3D8 6700                       		beq.s	Got_RingBonus	; if yes, branch
0000D3DA 0640 000A                  		addi.w	#10,d0		; add 10 to score
0000D3DE 0478 000A F7D2             		subi.w	#10,(v_timebonus).w ; subtract 10 from time bonus
0000D3E4                            
0000D3E4                            Got_RingBonus:
0000D3E4 4A78 F7D4                  		tst.w	(v_ringbonus).w	; is ring bonus	= zero?
0000D3E8 6700                       		beq.s	Got_ChkBonus	; if yes, branch
0000D3EA 0640 000A                  		addi.w	#10,d0		; add 10 to score
0000D3EE 0478 000A F7D4             		subi.w	#10,(v_ringbonus).w ; subtract 10 from ring bonus
0000D3F4                            
0000D3F4                            Got_ChkBonus:
0000D3F4 4A40                       		tst.w	d0		; is there any bonus?
0000D3F6 6600                       		bne.s	Got_AddBonus	; if yes, branch
0000D402 5428 0024                  		addq.b	#2,obRoutine(a0)
0000D406 0C78 0501 FE10             		cmpi.w	#(id_SBZ<<8)+1,(v_zone).w
0000D40C 6600                       		bne.s	Got_SetDelay
0000D40E 5828 0024                  		addq.b	#4,obRoutine(a0)
0000D412                            
0000D412                            Got_SetDelay:
0000D412 317C 005A 001E             		move.w	#90,obTimeFrame(a0) ; set time delay to 3 seconds
0000D418                            
0000D418                            locret_C692:
0000D418 4E75                       		rts	
0000D41A                            ; ===========================================================================
0000D41A                            
0000D41A                            Got_AddBonus:
0000D41A 4EB9 0000 0000             		jsr	(AddPoints).l
0000D420 1038 FE0F                  		move.b	(v_vbla_byte).w,d0
0000D424 0200 0003                  		andi.b	#3,d0
0000D428 66EE                       		bne.s	locret_C692
0000D434                            ; ===========================================================================
0000D434                            
0000D434                            Got_NextLevel:	; Routine $A
0000D434 1038 FE10                  		move.b	(v_zone).w,d0
0000D438 0240 0007                  		andi.w	#7,d0
0000D43C E748                       		lsl.w	#3,d0
0000D43E 1238 FE11                  		move.b	(v_act).w,d1
0000D442 0241 0003                  		andi.w	#3,d1
0000D446 D241                       		add.w	d1,d1
0000D448 D041                       		add.w	d1,d0
0000D44A 303B 0000                  		move.w	LevelOrder(pc,d0.w),d0 ; load level from level order array
0000D44E 31C0 FE10                  		move.w	d0,(v_zone).w	; set level number
0000D452 4A40                       		tst.w	d0
0000D454 6600                       		bne.s	Got_ChkSS
0000D456 11FC 0024 F600             		move.b	#$24,(v_gamemode).w
0000D45C 6000                       		bra.s	Got_Display2
0000D45E                            ; ===========================================================================
0000D45E                            
0000D45E                            Got_ChkSS:
0000D45E 4238 FE30                  		clr.b	(v_lastlamp).w	; clear	lamppost counter
0000D462 4A38 F7CD                  		tst.b	(f_bigring).w	; has Sonic jumped into	a giant	ring?
0000D466 6700                       		beq.s	VBla_08A	; if not, branch
0000D468 11FC 0000 F600             		move.b	#id_Special,(v_gamemode).w ; set game mode to Special Stage (10)
0000D46E 6000                       		bra.s	Got_Display2
0000D470                            ; ===========================================================================
0000D470                            
0000D470                            VBla_08A:
0000D470 31FC 0001 FE02             		move.w	#1,(f_restart).w ; restart level
0000D476                            
0000D476                            Got_Display2:
0000D476 6000 0000                  		bra.w	DisplaySprite
0000D47A                            ; ===========================================================================
0000D47A                            ; ---------------------------------------------------------------------------
0000D47A                            ; Level	order array
0000D47A                            ; ---------------------------------------------------------------------------
0000D47A                            LevelOrder:
0000D47A                            		; Green Hill Zone
0000D47A 0001                       		dc.b id_GHZ, 1	; Act 1
0000D47C 0002                       		dc.b id_GHZ, 2	; Act 2
0000D47E 0000                       		dc.b 0, 0	; Act 3
0000D480 0000                       		dc.b 0, 0
0000D482                            
0000D482                            		; Labyrinth Zone
0000D482 0202                       		dc.b id_MZ, 2	; Act 1
0000D484 0102                       		dc.b id_LZ, 2	; Act 2
0000D486 0103                       		dc.b id_LZ, 3	; Act 3
0000D488 0200                       		dc.b id_MZ, 0	; Scrap Brain Zone Act 3
0000D48A                            
0000D48A                            		; Marble Zone
0000D48A 0201                       		dc.b id_MZ, 1	; Act 1
0000D48C 0202                       		dc.b id_MZ, 2	; Act 2
0000D48E 0700                       		dc.b 7, 0	; Act 3
0000D490 0000                       		dc.b 0, 0
0000D492                            
0000D492                            		; Star Light Zone
0000D492 0400                       		dc.b id_SYZ, 0	; Act 1
0000D494 0302                       		dc.b id_SLZ, 2	; Act 2
0000D496 0400                       		dc.b id_SYZ, 0	; Act 3
0000D498 0000                       		dc.b 0, 0
0000D49A                            
0000D49A                            		; Spring Yard Zone
0000D49A 0500                       		dc.b id_SBZ, 0	; Act 1
0000D49C 0402                       		dc.b id_SYZ, 2	; Act 2
0000D49E 0500                       		dc.b id_SBZ, 0	; Act 3
0000D4A0 0000                       		dc.b 0, 0
0000D4A2                            
0000D4A2                            		; Scrap Brain Zone
0000D4A2 0501                       		dc.b id_SBZ, 1	; Act 1
0000D4A4 0502                       		dc.b id_SBZ, 2	; Act 2
0000D4A6 0800                       		dc.b 8, 0	; Final Zone
0000D4A8 0000                       		dc.b 0, 0
0000D4AA                            		even
0000D4AA                            		
0000D4AA                            		; Ending (unused)
0000D4AA 0000                       		dc.b 0, 0
0000D4AC 0000                       		dc.b 0, 0
0000D4AE 0000                       		dc.b 0, 0
0000D4B0 0000                       		dc.b 0, 0
0000D4B2                            		
0000D4B2                            		; Ice Mountain Zone
0000D4B2 0300                       		dc.b id_SLZ, 0	; Act 1
0000D4B4 0702                       		dc.b 7, 2	; Act 2
0000D4B6 0300                       		dc.b id_SLZ, 0	; Act 3
0000D4B8 0000                       		dc.b 0, 0
0000D4BA                            		
0000D4BA                            		; Cosmic Space Zone Zone
0000D4BA 0801                       		dc.b 8, 1	; Act 1
0000D4BC 0802                       		dc.b 8, 2	; Act 2
0000D4BE 0000                       		dc.b 0, 0	; Final Zone
0000D4C0 0000                       		dc.b 0, 0
0000D4C2                            ; ===========================================================================
0000D4C2                            
0000D4C2                            Got_Move2:	; Routine $E
0000D4C2 7220                       		moveq	#$20,d1		; set horizontal speed
0000D4C4 3028 0032                  		move.w	got_finalX(a0),d0
0000D4C8 B068 0008                  		cmp.w	obX(a0),d0	; has item reached its finish position?
0000D4CC 6700                       		beq.s	Got_SBZ2	; if yes, branch
0000D4CE 6C00                       		bge.s	Got_ChgPos2
0000D4D0 4441                       		neg.w	d1
0000D4D2                            
0000D4D2                            	Got_ChgPos2:
0000D4D2 D368 0008                  		add.w	d1,obX(a0)	; change item's position
0000D4D6 3028 0008                  		move.w	obX(a0),d0
0000D4DA 6B00                       		bmi.s	locret_C748
0000D4DC 0C40 0200                  		cmpi.w	#$200,d0	; has item moved beyond	$200 on	x-axis?
0000D4E0 6400                       		bcc.s	locret_C748	; if yes, branch
0000D4E2 6000 0000                  		bra.w	DisplaySprite
0000D4E6                            ; ===========================================================================
0000D4E6                            
0000D4E6                            locret_C748:
0000D4E6 4E75                       		rts	
0000D4E8                            ; ===========================================================================
0000D4E8                            
0000D4E8                            Got_SBZ2:
0000D4E8 0C28 0004 001A             		cmpi.b	#4,obFrame(a0)
0000D4EE 6600 0000                  		bne.w	DeleteObject
0000D4F2 5428 0024                  		addq.b	#2,obRoutine(a0)
0000D4F6 4238 F7CC                  		clr.b	(f_lockctrl).w	; unlock controls
0000D504                            ; ===========================================================================
0000D504                            
0000D504                            loc_C766:	; Routine $10
0000D504 5478 F72A                  		addq.w	#2,(v_limitright2).w
0000D508 0C78 2100 F72A             		cmpi.w	#$2100,(v_limitright2).w
0000D50E 6700 0000                  		beq.w	DeleteObject
0000D512 4E75                       		rts	
0000D514                            ; ===========================================================================
0000D514                            		;    x-start,	x-main,	y-main,
0000D514                            		;				routine, frame number
0000D514                            
0000D514 0004 0124 00BC             Got_Config:	dc.w 4,		$124,	$BC			; "SONIC HAS"
0000D51A 0200                       		dc.b 				2,	0
0000D51C                            
0000D51C FEE0 0120 00D0             		dc.w -$120,	$120,	$D0			; "PASSED"
0000D522 0201                       		dc.b 				2,	1
0000D524                            
0000D524 040C 014C 00D6             		dc.w $40C,	$14C,	$D6			; "ACT" 1/2/3
0000D52A 0206                       		dc.b 				2,	6
0000D52C                            
0000D52C 0520 0120 00EC             		dc.w $520,	$120,	$EC			; score
0000D532 0202                       		dc.b 				2,	2
0000D534                            
0000D534 0540 0120 00FC             		dc.w $540,	$120,	$FC			; time bonus
0000D53A 0203                       		dc.b 				2,	3
0000D53C                            
0000D53C 0560 0120 010C             		dc.w $560,	$120,	$10C			; ring bonus
0000D542 0204                       		dc.b 				2,	4
0000D544                            
0000D544 020C 014C 00CC             		dc.w $20C,	$14C,	$CC			; oval
0000D54A 0205                       		dc.b 				2,	5
0000D54A 0205                       		dc.b 				2,	5
0000D54C                            		include	"_incObj\7E Special Stage Results.asm"
0000D54C                            ; ---------------------------------------------------------------------------
0000D54C                            ; Object 7E - special stage results screen
0000D54C                            ; ---------------------------------------------------------------------------
0000D54C                            
0000D54C                            SSResult:
0000D54C 7000                       		moveq	#0,d0
0000D54E 1028 0024                  		move.b	obRoutine(a0),d0
0000D552 323B 0000                  		move.w	SSR_Index(pc,d0.w),d1
0000D556 4EFB 1000                  		jmp	SSR_Index(pc,d1.w)
0000D55A                            ; ===========================================================================
0000D55A 0000                       SSR_Index:	dc.w SSR_ChkPLC-SSR_Index
0000D55C 0000                       		dc.w SSR_Move-SSR_Index
0000D55E 0000                       		dc.w SSR_Wait-SSR_Index
0000D560 0000                       		dc.w SSR_RingBonus-SSR_Index
0000D562 0000                       		dc.w SSR_Wait-SSR_Index
0000D564 0000                       		dc.w SSR_Exit-SSR_Index
0000D566 0000                       		dc.w SSR_Wait-SSR_Index
0000D568 0000                       		dc.w SSR_Continue-SSR_Index
0000D56A 0000                       		dc.w SSR_Wait-SSR_Index
0000D56C 0000                       		dc.w SSR_Exit-SSR_Index
0000D56E 0000                       		dc.w loc_C91A-SSR_Index
0000D570                            
0000D570 =00000030                  ssr_mainX:	equ $30		; position for card to display on
0000D570                            ; ===========================================================================
0000D570                            
0000D570                            SSR_ChkPLC:	; Routine 0
0000D570 4AB8 F680                  		tst.l	(v_plc_buffer).w ; are the pattern load cues empty?
0000D574 6700                       		beq.s	SSR_Main	; if yes, branch
0000D576 4E75                       		rts	
0000D578                            ; ===========================================================================
0000D578                            
0000D578                            SSR_Main:
0000D578 2248                       		movea.l	a0,a1
0000D57A 45F9 0000 0000             		lea	(SSR_Config).l,a2
0000D580 7203                       		moveq	#3,d1
0000D582 0C78 0032 FE20             		cmpi.w	#50,(v_rings).w	; do you have 50 or more rings?
0000D588 6500                       		bcs.s	SSR_Loop	; if no, branch
0000D58A 5241                       		addq.w	#1,d1		; if yes, add 1	to d1 (number of sprites)
0000D58C                            
0000D58C                            	SSR_Loop:
0000D58C 137C 0000 0000             		move.b	#id_SSResult,0(a1)
0000D592 335A 0008                  		move.w	(a2)+,obX(a1)	; load start x-position
0000D596 335A 0030                  		move.w	(a2)+,ssr_mainX(a1) ; load main x-position
0000D59A 335A 000A                  		move.w	(a2)+,obScreenY(a1) ; load y-position
0000D59E 135A 0024                  		move.b	(a2)+,obRoutine(a1)
0000D5A2 135A 001A                  		move.b	(a2)+,obFrame(a1)
0000D5A6 237C 0000 0000 0004        		move.l	#Map_SSR,obMap(a1)
0000D5AE 337C 8580 0002             		move.w	#$8580,obGfx(a1)
0000D5B4 137C 0000 0001             		move.b	#0,obRender(a1)
0000D5BA 43E9 0040                  		lea	$40(a1),a1
0000D5BE 51C9 FFCC                  		dbf	d1,SSR_Loop	; repeat sequence 3 or 4 times
0000D5C2                            
0000D5C2 7007                       		moveq	#7,d0
0000D5C4 1238 FE57                  		move.b	(v_emeralds).w,d1
0000D5C8 6700                       		beq.s	loc_C842
0000D5CA 7000                       		moveq	#0,d0
0000D5CC 0C01 0006                  		cmpi.b	#6,d1		; do you have all chaos	emeralds?
0000D5D0 6600                       		bne.s	loc_C842	; if not, branch
0000D5D2 7008                       		moveq	#8,d0		; load "Sonic got them all" text
0000D5D4 317C 0018 0008             		move.w	#$18,obX(a0)
0000D5DA 317C 0118 0030             		move.w	#$118,ssr_mainX(a0) ; change position of text
0000D5E0                            
0000D5E0                            loc_C842:
0000D5E0 1140 001A                  		move.b	d0,obFrame(a0)
0000D5E4                            
0000D5E4                            SSR_Move:	; Routine 2
0000D5E4 7210                       		moveq	#$10,d1		; set horizontal speed
0000D5E6 3028 0030                  		move.w	ssr_mainX(a0),d0
0000D5EA B068 0008                  		cmp.w	obX(a0),d0	; has item reached its target position?
0000D5EE 6700                       		beq.s	loc_C86C	; if yes, branch
0000D5F0 6C00                       		bge.s	SSR_ChgPos
0000D5F2 4441                       		neg.w	d1
0000D5F4                            
0000D5F4                            SSR_ChgPos:
0000D5F4 D368 0008                  		add.w	d1,obX(a0)	; change item's position
0000D5F8                            
0000D5F8                            loc_C85A:
0000D5F8 3028 0008                  		move.w	obX(a0),d0
0000D5FC 6B00                       		bmi.s	locret_C86A
0000D5FE 0C40 0200                  		cmpi.w	#$200,d0	; has item moved beyond	$200 on	x-axis?
0000D602 6400                       		bcc.s	locret_C86A	; if yes, branch
0000D604 6000 0000                  		bra.w	DisplaySprite
0000D608                            ; ===========================================================================
0000D608                            
0000D608                            locret_C86A:
0000D608 4E75                       		rts	
0000D60A                            ; ===========================================================================
0000D60A                            
0000D60A                            loc_C86C:
0000D60A 0C28 0002 001A             		cmpi.b	#2,obFrame(a0)
0000D610 66E6                       		bne.s	loc_C85A
0000D612 5428 0024                  		addq.b	#2,obRoutine(a0)
0000D616 317C 00B4 001E             		move.w	#180,obTimeFrame(a0) ; set time delay to 3 seconds
0000D61C 11FC 0000 D800             		move.b	#id_SSRChaos,(v_objspace+$800).w ; load chaos emerald object
0000D622                            
0000D622                            SSR_Wait:	; Routine 4, 8, $C, $10
0000D622 5368 001E                  		subq.w	#1,obTimeFrame(a0) ; subtract 1 from time delay
0000D626 6600                       		bne.s	SSR_Display
0000D628 5428 0024                  		addq.b	#2,obRoutine(a0)
0000D62C                            
0000D62C                            SSR_Display:
0000D62C 6000 0000                  		bra.w	DisplaySprite
0000D630                            ; ===========================================================================
0000D630                            
0000D630                            SSR_RingBonus:	; Routine 6
0000D630 6100 0000                  		bsr.w	DisplaySprite
0000D634 11FC 0001 F7D6             		move.b	#1,(f_endactbonus).w ; set ring bonus update flag
0000D63A 4A78 F7D4                  		tst.w	(v_ringbonus).w	; is ring bonus	= zero?
0000D63E 6700                       		beq.s	loc_C8C4	; if yes, branch
0000D640 0478 000A F7D4             		subi.w	#10,(v_ringbonus).w ; subtract 10 from ring bonus
0000D646 700A                       		moveq	#10,d0		; add 10 to score
0000D648 4EB9 0000 0000             		jsr	(AddPoints).l
0000D64E 1038 FE0F                  		move.b	(v_vbla_byte).w,d0
0000D652 0200 0003                  		andi.b	#3,d0
0000D656 6600                       		bne.s	locret_C8EA
0000D662                            ; ===========================================================================
0000D662                            
0000D662                            loc_C8C4:
0000D66C 5428 0024                  		addq.b	#2,obRoutine(a0)
0000D670 317C 00B4 001E             		move.w	#180,obTimeFrame(a0) ; set time delay to 3 seconds
0000D676 0C78 0032 FE20             		cmpi.w	#50,(v_rings).w	; do you have at least 50 rings?
0000D67C 6500                       		bcs.s	locret_C8EA	; if not, branch
0000D67E 317C 003C 001E             		move.w	#60,obTimeFrame(a0) ; set time delay to 1 second
0000D684 5828 0024                  		addq.b	#4,obRoutine(a0) ; goto "SSR_Continue" routine
0000D688                            
0000D688                            locret_C8EA:
0000D688 4E75                       		rts	
0000D68A                            ; ===========================================================================
0000D68A                            
0000D68A                            SSR_Exit:	; Routine $A, $12
0000D68A 31FC 0001 FE02             		move.w	#1,(f_restart).w ; restart level
0000D690 6000 0000                  		bra.w	DisplaySprite
0000D694                            ; ===========================================================================
0000D694                            
0000D694                            SSR_Continue:	; Routine $E
0000D694 11FC 0004 D6DA             		move.b	#4,(v_objspace+$6C0+obFrame).w
0000D69A 11FC 0014 D6E4             		move.b	#$14,(v_objspace+$6C0+obRoutine).w
0000D6AA 5428 0024                  		addq.b	#2,obRoutine(a0)
0000D6AE 317C 0168 001E             		move.w	#360,obTimeFrame(a0) ; set time delay to 6 seconds
0000D6B4 6000 0000                  		bra.w	DisplaySprite
0000D6B8                            ; ===========================================================================
0000D6B8                            
0000D6B8                            loc_C91A:	; Routine $14
0000D6B8 1038 FE0F                  		move.b	(v_vbla_byte).w,d0
0000D6BC 0200 000F                  		andi.b	#$F,d0
0000D6C0 6600                       		bne.s	SSR_Display2
0000D6C2 0868 0000 001A             		bchg	#0,obFrame(a0)
0000D6C8                            
0000D6C8                            SSR_Display2:
0000D6C8 6000 0000                  		bra.w	DisplaySprite
0000D6CC                            ; ===========================================================================
0000D6CC 0020 0120 00C4             SSR_Config:	dc.w $20, $120,	$C4	; start	x-pos, main x-pos, y-pos
0000D6D2 0200                       		dc.b 2,	0		; rountine number, frame number
0000D6D4 0320 0120 0118             		dc.w $320, $120, $118
0000D6DA 0201                       		dc.b 2,	1
0000D6DC 0360 0120 0128             		dc.w $360, $120, $128
0000D6E2 0202                       		dc.b 2,	2
0000D6E4 01EC 011C 00C4             		dc.w $1EC, $11C, $C4
0000D6EA 0203                       		dc.b 2,	3
0000D6EC 03A0 0120 0138             		dc.w $3A0, $120, $138
0000D6F2 0206                       		dc.b 2,	6
0000D6F2 0206                       		dc.b 2,	6
0000D6F4                            		include	"_incObj\7F SS Result Chaos Emeralds.asm"
0000D6F4                            ; ---------------------------------------------------------------------------
0000D6F4                            ; Object 7F - chaos emeralds from the special stage results screen
0000D6F4                            ; ---------------------------------------------------------------------------
0000D6F4                            
0000D6F4                            SSRChaos:
0000D6F4 7000                       		moveq	#0,d0
0000D6F6 1028 0024                  		move.b	obRoutine(a0),d0
0000D6FA 323B 0000                  		move.w	SSRC_Index(pc,d0.w),d1
0000D6FE 4EFB 1000                  		jmp	SSRC_Index(pc,d1.w)
0000D702                            ; ===========================================================================
0000D702 0000                       SSRC_Index:	dc.w SSRC_Main-SSRC_Index
0000D704 0000                       		dc.w SSRC_Flash-SSRC_Index
0000D706                            
0000D706                            ; ---------------------------------------------------------------------------
0000D706                            ; X-axis positions for chaos emeralds
0000D706                            ; ---------------------------------------------------------------------------
0000D706 0110 0128 00F8 0140 00E0+  SSRC_PosData:	dc.w $110, $128, $F8, $140, $E0, $158
0000D712                            ; ===========================================================================
0000D712                            
0000D712                            SSRC_Main:	; Routine 0
0000D712 2248                       		movea.l	a0,a1
0000D714 45F9 0000 D706             		lea	(SSRC_PosData).l,a2
0000D71A 7400                       		moveq	#0,d2
0000D71C 7200                       		moveq	#0,d1
0000D71E 1238 FE57                  		move.b	(v_emeralds).w,d1 ; d1 is number of emeralds
0000D722 5301                       		subq.b	#1,d1		; subtract 1 from d1
0000D724 6500 0000                  		bcs.w	DeleteObject	; if you have 0	emeralds, branch
0000D728                            
0000D728                            	SSRC_Loop:
0000D728 137C 0000 0000             		move.b	#id_SSRChaos,0(a1)
0000D72E 335A 0008                  		move.w	(a2)+,obX(a1)	; set x-position
0000D732 337C 00F0 000A             		move.w	#$F0,obScreenY(a1) ; set y-position
0000D738 47F8 FE58                  		lea	(v_emldlist).w,a3 ; check which emeralds you have
0000D73C 1633 2000                  		move.b	(a3,d2.w),d3
0000D740 1343 001A                  		move.b	d3,obFrame(a1)
0000D744 1343 001C                  		move.b	d3,obAnim(a1)
0000D748 5202                       		addq.b	#1,d2
0000D74A 5429 0024                  		addq.b	#2,obRoutine(a1)
0000D74E 237C 0000 0000 0004        		move.l	#Map_SSRC,obMap(a1)
0000D756 337C 8541 0002             		move.w	#$8541,obGfx(a1)
0000D75C 137C 0000 0001             		move.b	#0,obRender(a1)
0000D762 43E9 0040                  		lea	$40(a1),a1	; next object
0000D766 51C9 FFC0                  		dbf	d1,SSRC_Loop	; loop for d1 number of	emeralds
0000D76A                            
0000D76A                            SSRC_Flash:	; Routine 2
0000D76A 1028 001A                  		move.b	obFrame(a0),d0
0000D76E 117C 0006 001A             		move.b	#6,obFrame(a0)	; load 6th frame (blank)
0000D774 0C00 0006                  		cmpi.b	#6,d0
0000D778 6600                       		bne.s	SSRC_Display
0000D77A 1168 001C 001A             		move.b	obAnim(a0),obFrame(a0) ; load visible frame
0000D780                            
0000D780                            	SSRC_Display:
0000D780 6000 0000                  		bra.w	DisplaySprite
0000D780 6000 0000                  		bra.w	DisplaySprite
0000D784                            
0000D784                            ; ---------------------------------------------------------------------------
0000D784                            ; Sprite mappings - zone title cards
0000D784                            ; ---------------------------------------------------------------------------
0000D784                            Map_Card:	include	"_maps\Title Cards.asm"
0000D784                            ; ================================================================================
0000D784                            ; Sprite Mappings - generated by Flex 2 Sun Mar 28 2021 22:21:50 GMT-0400 (Eastern Daylight Time)
0000D784                            ; ================================================================================
0000D784                            
0000D784                            DATAVB7MU9FC7K:
0000D784 0000 0000                  	dc.w DATAVB7MU9FC7K_0-DATAVB7MU9FC7K, DATAVB7MU9FC7K_1-DATAVB7MU9FC7K
0000D788 0000 0000                  	dc.w DATAVB7MU9FC7K_2-DATAVB7MU9FC7K, DATAVB7MU9FC7K_3-DATAVB7MU9FC7K
0000D78C 0000 0000                  	dc.w DATAVB7MU9FC7K_4-DATAVB7MU9FC7K, DATAVB7MU9FC7K_5-DATAVB7MU9FC7K
0000D790 0000 0000                  	dc.w DATAVB7MU9FC7K_6-DATAVB7MU9FC7K, DATAVB7MU9FC7K_7-DATAVB7MU9FC7K
0000D794 0000 0000                  	dc.w DATAVB7MU9FC7K_8-DATAVB7MU9FC7K, DATAVB7MU9FC7K_9-DATAVB7MU9FC7K
0000D798 0000 0000                  	dc.w DATAVB7MU9FC7K_A-DATAVB7MU9FC7K, DATAVB7MU9FC7K_B-DATAVB7MU9FC7K
0000D79C 0000 0000                  	dc.w DATAVB7MU9FC7K_C-DATAVB7MU9FC7K, DATAVB7MU9FC7K_D-DATAVB7MU9FC7K
0000D7A0 09                         DATAVB7MU9FC7K_0: dc.b $9
0000D7A1 F805 0018 B4               	dc.b $F8, $5, $0, $18, $B4
0000D7A6 F805 003A C4               	dc.b $F8, $5, $0, $3A, $C4
0000D7AB F805 0010 D4               	dc.b $F8, $5, $0, $10, $D4
0000D7B0 F805 0010 E4               	dc.b $F8, $5, $0, $10, $E4
0000D7B5 F805 002E F4               	dc.b $F8, $5, $0, $2E, $F4
0000D7BA F805 001C 14               	dc.b $F8, $5, $0, $1C, $14
0000D7BF F801 0020 24               	dc.b $F8, $1, $0, $20, $24
0000D7C4 F805 0026 2C               	dc.b $F8, $5, $0, $26, $2C
0000D7C9 F805 0026 3C               	dc.b $F8, $5, $0, $26, $3C
0000D7CE 09                         DATAVB7MU9FC7K_1: dc.b $9
0000D7CF F805 0026 BC               	dc.b $F8, $5, $0, $26, $BC
0000D7D4 F805 0000 CC               	dc.b $F8, $5, $0, $0, $CC
0000D7D9 F805 0004 DC               	dc.b $F8, $5, $0, $4, $DC
0000D7DE F805 004A EC               	dc.b $F8, $5, $0, $4A, $EC
0000D7E3 F805 003A FC               	dc.b $F8, $5, $0, $3A, $FC
0000D7E8 F801 0020 0C               	dc.b $F8, $1, $0, $20, $C
0000D7ED F805 002E 14               	dc.b $F8, $5, $0, $2E, $14
0000D7F2 F805 0042 24               	dc.b $F8, $5, $0, $42, $24
0000D7F7 F805 001C 34               	dc.b $F8, $5, $0, $1C, $34
0000D7FC 06                         DATAVB7MU9FC7K_2: dc.b $6
0000D7FD F805 002A CF               	dc.b $F8, $5, $0, $2A, $CF
0000D802 F805 0000 E0               	dc.b $F8, $5, $0, $0, $E0
0000D807 F805 003A F0               	dc.b $F8, $5, $0, $3A, $F0
0000D80C F805 0004 00               	dc.b $F8, $5, $0, $4, $0
0000D811 F805 0026 10               	dc.b $F8, $5, $0, $26, $10
0000D816 F805 0010 20               	dc.b $F8, $5, $0, $10, $20
0000D81B 09                         DATAVB7MU9FC7K_3: dc.b $9
0000D81C F805 003E B4               	dc.b $F8, $5, $0, $3E, $B4
0000D821 F805 0042 C4               	dc.b $F8, $5, $0, $42, $C4
0000D826 F805 0000 D4               	dc.b $F8, $5, $0, $0, $D4
0000D82B F805 003A E4               	dc.b $F8, $5, $0, $3A, $E4
0000D830 F805 0026 04               	dc.b $F8, $5, $0, $26, $4
0000D835 F801 0020 14               	dc.b $F8, $1, $0, $20, $14
0000D83A F805 0018 1C               	dc.b $F8, $5, $0, $18, $1C
0000D83F F805 001C 2C               	dc.b $F8, $5, $0, $1C, $2C
0000D844 F805 0042 3C               	dc.b $F8, $5, $0, $42, $3C
0000D849 09                         DATAVB7MU9FC7K_4: dc.b $9
0000D84A F805 003E C0               	dc.b $F8, $5, $0, $3E, $C0
0000D84F F805 0036 D0               	dc.b $F8, $5, $0, $36, $D0
0000D854 F805 0000 E0               	dc.b $F8, $5, $0, $0, $E0
0000D859 F805 003A F0               	dc.b $F8, $5, $0, $3A, $F0
0000D85E F805 0022 00               	dc.b $F8, $5, $0, $22, $0
0000D863 F805 0026 10               	dc.b $F8, $5, $0, $26, $10
0000D868 F801 0020 20               	dc.b $F8, $1, $0, $20, $20
0000D86D F805 002E 28               	dc.b $F8, $5, $0, $2E, $28
0000D872 F805 0018 38               	dc.b $F8, $5, $0, $18, $38
0000D877 09                         DATAVB7MU9FC7K_5: dc.b $9
0000D878 F805 0008 C0               	dc.b $F8, $5, $0, $8, $C0
0000D87D F805 0026 D0               	dc.b $F8, $5, $0, $26, $D0
0000D882 F805 0032 E0               	dc.b $F8, $5, $0, $32, $E0
0000D887 F805 0008 F0               	dc.b $F8, $5, $0, $8, $F0
0000D88C F805 0022 00               	dc.b $F8, $5, $0, $22, $0
0000D891 F805 0032 30               	dc.b $F8, $5, $0, $32, $30
0000D896 F805 003A 40               	dc.b $F8, $5, $0, $3A, $40
0000D89B F805 0022 50               	dc.b $F8, $5, $0, $22, $50
0000D8A0 F809 0080 18               	dc.b $F8, $9, $0, $80, $18
0000D8A5 04                         DATAVB7MU9FC7K_6: dc.b $4
0000D8A6 F805 004E E0               	dc.b $F8, $5, $0, $4E, $E0
0000D8AB F805 0032 F0               	dc.b $F8, $5, $0, $32, $F0
0000D8B0 F805 002E 00               	dc.b $F8, $5, $0, $2E, $0
0000D8B5 F805 0010 10               	dc.b $F8, $5, $0, $10, $10
0000D8BA 0B                         DATAVB7MU9FC7K_7: dc.b $B
0000D8BB F801 0020 A0               	dc.b $F8, $1, $0, $20, $A0
0000D8C0 F805 0008 A8               	dc.b $F8, $5, $0, $8, $A8
0000D8C5 F805 0010 B8               	dc.b $F8, $5, $0, $10, $B8
0000D8CA F805 002A D8               	dc.b $F8, $5, $0, $2A, $D8
0000D8CF F805 0032 E8               	dc.b $F8, $5, $0, $32, $E8
0000D8D4 F805 0046 F8               	dc.b $F8, $5, $0, $46, $F8
0000D8D9 F805 002E 08               	dc.b $F8, $5, $0, $2E, $8
0000D8DE F805 0042 18               	dc.b $F8, $5, $0, $42, $18
0000D8E3 F805 0000 28               	dc.b $F8, $5, $0, $0, $28
0000D8E8 F801 0020 38               	dc.b $F8, $1, $0, $20, $38
0000D8ED F805 002E 40               	dc.b $F8, $5, $0, $2E, $40
0000D8F2 0B                         DATAVB7MU9FC7K_8: dc.b $B
0000D8F3 F805 0008 9C               	dc.b $F8, $5, $0, $8, $9C
0000D8F8 F805 0032 AC               	dc.b $F8, $5, $0, $32, $AC
0000D8FD F805 003E BC               	dc.b $F8, $5, $0, $3E, $BC
0000D902 F805 002A CC               	dc.b $F8, $5, $0, $2A, $CC
0000D907 F801 0020 DC               	dc.b $F8, $1, $0, $20, $DC
0000D90C F805 0008 E4               	dc.b $F8, $5, $0, $8, $E4
0000D911 F805 003E 04               	dc.b $F8, $5, $0, $3E, $4
0000D916 F805 0036 14               	dc.b $F8, $5, $0, $36, $14
0000D91B F805 0000 24               	dc.b $F8, $5, $0, $0, $24
0000D920 F805 0008 34               	dc.b $F8, $5, $0, $8, $34
0000D925 F805 0010 44               	dc.b $F8, $5, $0, $10, $44
0000D92A 02                         DATAVB7MU9FC7K_9: dc.b $2
0000D92B 040C 0053 EC               	dc.b $4, $C, $0, $53, $EC
0000D930 F402 0057 0C               	dc.b $F4, $2, $0, $57, $C
0000D935 02                         DATAVB7MU9FC7K_A: dc.b $2
0000D936 040C 0053 EC               	dc.b $4, $C, $0, $53, $EC
0000D93B F406 005A 08               	dc.b $F4, $6, $0, $5A, $8
0000D940 02                         DATAVB7MU9FC7K_B: dc.b $2
0000D941 040C 0053 EC               	dc.b $4, $C, $0, $53, $EC
0000D946 F406 0060 08               	dc.b $F4, $6, $0, $60, $8
0000D94B 0D                         DATAVB7MU9FC7K_C: dc.b $D
0000D94C E40C 0070 F4               	dc.b $E4, $C, $0, $70, $F4
0000D951 E402 0074 14               	dc.b $E4, $2, $0, $74, $14
0000D956 EC04 0077 EC               	dc.b $EC, $4, $0, $77, $EC
0000D95B F405 0079 E4               	dc.b $F4, $5, $0, $79, $E4
0000D960 140C 1870 EC               	dc.b $14, $C, $18, $70, $EC
0000D965 0402 1874 E4               	dc.b $4, $2, $18, $74, $E4
0000D96A 0C04 1877 04               	dc.b $C, $4, $18, $77, $4
0000D96F FC05 1879 0C               	dc.b $FC, $5, $18, $79, $C
0000D974 EC08 007D FC               	dc.b $EC, $8, $0, $7D, $FC
0000D979 F40C 007C F4               	dc.b $F4, $C, $0, $7C, $F4
0000D97E FC08 007C F4               	dc.b $FC, $8, $0, $7C, $F4
0000D983 040C 007C EC               	dc.b $4, $C, $0, $7C, $EC
0000D988 0C08 007C EC               	dc.b $C, $8, $0, $7C, $EC
0000D98D 05                         DATAVB7MU9FC7K_D: dc.b $5
0000D98E F805 0014 DC               	dc.b $F8, $5, $0, $14, $DC
0000D993 F801 0020 EC               	dc.b $F8, $1, $0, $20, $EC
0000D998 F805 002E F4               	dc.b $F8, $5, $0, $2E, $F4
0000D99D F805 0000 04               	dc.b $F8, $5, $0, $0, $4
0000D9A2 F805 0026 14               	dc.b $F8, $5, $0, $26, $14
0000D9A8 00                         	even
0000D9A8 00                         	even
0000D9A8                            
0000D9A8                            Map_Over:	include	"_maps\Game Over.asm"
0000D9A8                            ; ================================================================================
0000D9A8                            ; Sprite Mappings - generated by Flex 2 Wed Mar 17 2021 02:15:26 GMT-0400 (Eastern Daylight Time)
0000D9A8                            ; ================================================================================
0000D9A8                            
0000D9A8                            DATAECA7YYLABQ:
0000D9A8 0000 0000                  	dc.w DATAECA7YYLABQ_0-DATAECA7YYLABQ, DATAECA7YYLABQ_1-DATAECA7YYLABQ
0000D9AC 0000 0000                  	dc.w DATAECA7YYLABQ_2-DATAECA7YYLABQ, DATAECA7YYLABQ_3-DATAECA7YYLABQ
0000D9B0 02                         DATAECA7YYLABQ_0: dc.b $2
0000D9B1 F80D 0002 CC               	dc.b $F8, $D, $0, $2, $CC
0000D9B6 F809 000A EC               	dc.b $F8, $9, $0, $A, $EC
0000D9BB 02                         DATAECA7YYLABQ_1: dc.b $2
0000D9BC F80D 0010 05               	dc.b $F8, $D, $0, $10, $5
0000D9C1 F805 0018 25               	dc.b $F8, $5, $0, $18, $25
0000D9C6 02                         DATAECA7YYLABQ_2: dc.b $2
0000D9C7 F809 001C C4               	dc.b $F8, $9, $0, $1C, $C4
0000D9CC F80D 0008 DC               	dc.b $F8, $D, $0, $8, $DC
0000D9D1 02                         DATAECA7YYLABQ_3: dc.b $2
0000D9D2 F80D 0014 0C               	dc.b $F8, $D, $0, $14, $C
0000D9D7 F80D 000C 2C               	dc.b $F8, $D, $0, $C, $2C
0000D9DC                            	even
0000D9DC                            	even
0000D9DC                            
0000D9DC                            ; ---------------------------------------------------------------------------
0000D9DC                            ; Sprite mappings - "SONIC HAS PASSED" title card
0000D9DC                            ; ---------------------------------------------------------------------------
0000D9DC                            Map_Got:	include	"_maps\Got Through Card.asm"
0000D9DC                            ; ================================================================================
0000D9DC                            ; Sprite Mappings - generated by Flex 2 Sat Jun 05 2021 10:49:27 GMT-0400 (Eastern Daylight Time)
0000D9DC                            ; ================================================================================
0000D9DC                            
0000D9DC                            DATAFTMOVHHPR0N:
0000D9DC 0000 0000                  	dc.w DATAFTMOVHHPR0N_0-DATAFTMOVHHPR0N, DATAFTMOVHHPR0N_1-DATAFTMOVHHPR0N
0000D9E0 0000 0000                  	dc.w DATAFTMOVHHPR0N_2-DATAFTMOVHHPR0N, DATAFTMOVHHPR0N_3-DATAFTMOVHHPR0N
0000D9E4 0000 0000                  	dc.w DATAFTMOVHHPR0N_4-DATAFTMOVHHPR0N, DATAFTMOVHHPR0N_5-DATAFTMOVHHPR0N
0000D9E8 0000 0000                  	dc.w DATAFTMOVHHPR0N_6-DATAFTMOVHHPR0N, DATAFTMOVHHPR0N_7-DATAFTMOVHHPR0N
0000D9EC 0000                       	dc.w DATAFTMOVHHPR0N_8-DATAFTMOVHHPR0N
0000D9EE 08                         DATAFTMOVHHPR0N_0: dc.b $8
0000D9EF F805 003E B8               	dc.b $F8, $5, $0, $3E, $B8
0000D9F4 F805 0032 C8               	dc.b $F8, $5, $0, $32, $C8
0000D9F9 F805 002E D8               	dc.b $F8, $5, $0, $2E, $D8
0000D9FE F801 0020 E8               	dc.b $F8, $1, $0, $20, $E8
0000DA03 F805 0008 F0               	dc.b $F8, $5, $0, $8, $F0
0000DA08 F805 001C 10               	dc.b $F8, $5, $0, $1C, $10
0000DA0D F805 0000 20               	dc.b $F8, $5, $0, $0, $20
0000DA12 F805 003E 30               	dc.b $F8, $5, $0, $3E, $30
0000DA17 06                         DATAFTMOVHHPR0N_1: dc.b $6
0000DA18 F805 0036 D0               	dc.b $F8, $5, $0, $36, $D0
0000DA1D F805 0000 E0               	dc.b $F8, $5, $0, $0, $E0
0000DA22 F805 003E F0               	dc.b $F8, $5, $0, $3E, $F0
0000DA27 F805 003E 00               	dc.b $F8, $5, $0, $3E, $0
0000DA2C F805 0010 10               	dc.b $F8, $5, $0, $10, $10
0000DA31 F805 000C 20               	dc.b $F8, $5, $0, $C, $20
0000DA36 08                         DATAFTMOVHHPR0N_2: dc.b $8
0000DA37 F80D 2066 D9               	dc.b $F8, $D, $20, $66, $D9
0000DA3C F801 2150 F9               	dc.b $F8, $1, $21, $50, $F9
0000DA41 F809 016A 18               	dc.b $F8, $9, $1, $6A, $18
0000DA46 F80D 0170 30               	dc.b $F8, $D, $1, $70, $30
0000DA4B F704 006E F6               	dc.b $F7, $4, $0, $6E, $F6
0000DA50 FF04 186E F6               	dc.b $FF, $4, $18, $6E, $F6
0000DA55 F80D 0057 AA               	dc.b $F8, $D, $0, $57, $AA
0000DA5A F801 005F CA               	dc.b $F8, $1, $0, $5F, $CA
0000DA5F 07                         DATAFTMOVHHPR0N_3: dc.b $7
0000DA60 F80D 2160 B0               	dc.b $F8, $D, $21, $60, $B0
0000DA65 F80D 2066 D9               	dc.b $F8, $D, $20, $66, $D9
0000DA6A F801 2150 F9               	dc.b $F8, $1, $21, $50, $F9
0000DA6F F704 006E F6               	dc.b $F7, $4, $0, $6E, $F6
0000DA74 FF04 186E F6               	dc.b $FF, $4, $18, $6E, $F6
0000DA79 F80D FFF6 28               	dc.b $F8, $D, $FF, $F6, $28
0000DA7E F801 0176 48               	dc.b $F8, $1, $1, $76, $48
0000DA83 07                         DATAFTMOVHHPR0N_4: dc.b $7
0000DA84 F80D 2158 B0               	dc.b $F8, $D, $21, $58, $B0
0000DA89 F80D 2066 D9               	dc.b $F8, $D, $20, $66, $D9
0000DA8E F801 2150 F9               	dc.b $F8, $1, $21, $50, $F9
0000DA93 F704 006E F6               	dc.b $F7, $4, $0, $6E, $F6
0000DA98 FF04 186E F6               	dc.b $FF, $4, $18, $6E, $F6
0000DA9D F80D FFFE 28               	dc.b $F8, $D, $FF, $FE, $28
0000DAA2 F801 0176 48               	dc.b $F8, $1, $1, $76, $48
0000DAA7 00                         DATAFTMOVHHPR0N_5: dc.b $0
0000DAA8 00                         DATAFTMOVHHPR0N_6: dc.b $0
0000DAA9 00                         DATAFTMOVHHPR0N_7: dc.b $0
0000DAAA 00                         DATAFTMOVHHPR0N_8: dc.b $0
0000DAAC 00                         	even
0000DAAC 00                         	even
0000DAAC 0D                         M_Card_Oval:	dc.b $D			; Oval
0000DAAD E40C 0070 F4               		dc.b $E4, $C, 0, $70, $F4
0000DAB2 E402 0074 14               		dc.b $E4, 2, 0,	$74, $14
0000DAB7 EC04 0077 EC               		dc.b $EC, 4, 0,	$77, $EC
0000DABC F405 0079 E4               		dc.b $F4, 5, 0,	$79, $E4
0000DAC1 140C 1870 EC               		dc.b $14, $C, $18, $70,	$EC
0000DAC6 0402 1874 E4               		dc.b 4,	2, $18,	$74, $E4
0000DACB 0C04 1877 04               		dc.b $C, 4, $18, $77, 4
0000DAD0 FC05 1879 0C               		dc.b $FC, 5, $18, $79, $C
0000DAD5 EC08 007D FC               		dc.b $EC, 8, 0,	$7D, $FC
0000DADA F40C 007C F4               		dc.b $F4, $C, 0, $7C, $F4
0000DADF FC08 007C F4               		dc.b $FC, 8, 0,	$7C, $F4
0000DAE4 040C 007C EC               		dc.b 4,	$C, 0, $7C, $EC
0000DAE9 0C08 007C EC               		dc.b $C, 8, 0, $7C, $EC
0000DAEE                            		even
0000DAEE                            ; ---------------------------------------------------------------------------
0000DAEE                            ; Sprite mappings - special stage results screen
0000DAEE                            ; ---------------------------------------------------------------------------
0000DAEE                            Map_SSR:	include	"_maps\Special Stage Results.asm"
0000DAEE                            ; ================================================================================
0000DAEE                            ; Sprite Mappings - generated by Flex 2 Sun May 23 2021 15:02:20 GMT-0400 (Eastern Daylight Time)
0000DAEE                            ; ================================================================================
0000DAEE                            
0000DAEE                            DATA76661M3VCCL:
0000DAEE 0000 0000                  	dc.w DATA76661M3VCCL_0-DATA76661M3VCCL, DATA76661M3VCCL_1-DATA76661M3VCCL
0000DAF2 0000 0000                  	dc.w DATA76661M3VCCL_2-DATA76661M3VCCL, DATA76661M3VCCL_3-DATA76661M3VCCL
0000DAF6 0000 0000                  	dc.w DATA76661M3VCCL_4-DATA76661M3VCCL, DATA76661M3VCCL_5-DATA76661M3VCCL
0000DAFA 0000 0000                  	dc.w DATA76661M3VCCL_6-DATA76661M3VCCL, DATA76661M3VCCL_7-DATA76661M3VCCL
0000DAFE 0000                       	dc.w DATA76661M3VCCL_8-DATA76661M3VCCL
0000DB00 04                         DATA76661M3VCCL_0: dc.b $4
0000DB01 F809 0080 DC               	dc.b $F8, $9, $0, $80, $DC
0000DB06 F805 001C F4               	dc.b $F8, $5, $0, $1C, $F4
0000DB0B F805 0000 04               	dc.b $F8, $5, $0, $0, $4
0000DB10 F805 0042 14               	dc.b $F8, $5, $0, $42, $14
0000DB15 06                         DATA76661M3VCCL_1: dc.b $6
0000DB16 E80D 014A B0               	dc.b $E8, $D, $1, $4A, $B0
0000DB1B E801 0162 D0               	dc.b $E8, $1, $1, $62, $D0
0000DB20 E809 0164 18               	dc.b $E8, $9, $1, $64, $18
0000DB25 E80D 016A 30               	dc.b $E8, $D, $1, $6A, $30
0000DB2A E704 006E CD               	dc.b $E7, $4, $0, $6E, $CD
0000DB2F EF04 186E CD               	dc.b $EF, $4, $18, $6E, $CD
0000DB34 07                         DATA76661M3VCCL_2: dc.b $7
0000DB35 F80D 0152 B0               	dc.b $F8, $D, $1, $52, $B0
0000DB3A F80D 0066 D9               	dc.b $F8, $D, $0, $66, $D9
0000DB3F F801 014A F9               	dc.b $F8, $1, $1, $4A, $F9
0000DB44 F704 006E F6               	dc.b $F7, $4, $0, $6E, $F6
0000DB49 FF04 186E F6               	dc.b $FF, $4, $18, $6E, $F6
0000DB4E F80D FFF8 28               	dc.b $F8, $D, $FF, $F8, $28
0000DB53 F801 0170 48               	dc.b $F8, $1, $1, $70, $48
0000DB58 00                         DATA76661M3VCCL_3: dc.b $0
0000DB59 04                         DATA76661M3VCCL_4: dc.b $4
0000DB5A E80D FFD1 B0               	dc.b $E8, $D, $FF, $D1, $B0
0000DB5F E80D FFD9 D0               	dc.b $E8, $D, $FF, $D9, $D0
0000DB64 E801 FFE1 F0               	dc.b $E8, $1, $FF, $E1, $F0
0000DB69 E806 1FE3 40               	dc.b $E8, $6, $1F, $E3, $40
0000DB6E 04                         DATA76661M3VCCL_5: dc.b $4
0000DB6F E80D FFD1 B0               	dc.b $E8, $D, $FF, $D1, $B0
0000DB74 E80D FFD9 D0               	dc.b $E8, $D, $FF, $D9, $D0
0000DB79 E801 FFE1 F0               	dc.b $E8, $1, $FF, $E1, $F0
0000DB7E E806 1FE9 40               	dc.b $E8, $6, $1F, $E9, $40
0000DB83 03                         DATA76661M3VCCL_6: dc.b $3
0000DB84 E80D FFD1 B0               	dc.b $E8, $D, $FF, $D1, $B0
0000DB89 E80D FFD9 D0               	dc.b $E8, $D, $FF, $D9, $D0
0000DB8E E801 FFE1 F0               	dc.b $E8, $1, $FF, $E1, $F0
0000DB93 0A                         DATA76661M3VCCL_7: dc.b $A
0000DB94 F805 003E 08               	dc.b $F8, $5, $0, $3E, $8
0000DB99 F805 0042 18               	dc.b $F8, $5, $0, $42, $18
0000DB9E F805 0000 28               	dc.b $F8, $5, $0, $0, $28
0000DBA3 F805 0018 38               	dc.b $F8, $5, $0, $18, $38
0000DBA8 F805 0010 48               	dc.b $F8, $5, $0, $10, $48
0000DBAD F805 0004 A8               	dc.b $F8, $5, $0, $4, $A8
0000DBB2 F805 0032 B8               	dc.b $F8, $5, $0, $32, $B8
0000DBB7 F805 002E C8               	dc.b $F8, $5, $0, $2E, $C8
0000DBBC F805 0046 D8               	dc.b $F8, $5, $0, $46, $D8
0000DBC1 F805 003E E8               	dc.b $F8, $5, $0, $3E, $E8
0000DBC6 07                         DATA76661M3VCCL_8: dc.b $7
0000DBC7 F809 0080 FC               	dc.b $F8, $9, $0, $80, $FC
0000DBCC F805 001C 14               	dc.b $F8, $5, $0, $1C, $14
0000DBD1 F805 0000 24               	dc.b $F8, $5, $0, $0, $24
0000DBD6 F805 0042 34               	dc.b $F8, $5, $0, $42, $34
0000DBDB F805 004A BD               	dc.b $F8, $5, $0, $4A, $BD
0000DBE0 F805 0032 CD               	dc.b $F8, $5, $0, $32, $CD
0000DBE5 F805 0046 DD               	dc.b $F8, $5, $0, $46, $DD
0000DBEA                            	even
0000DBEA                            	even
0000DBEA                            
0000DBEA                            Map_SSRC:	include	"_maps\SS Result Chaos Emeralds.asm"
0000DBEA                            ; ---------------------------------------------------------------------------
0000DBEA                            ; Sprite mappings - chaos emeralds from	the special stage results screen
0000DBEA                            ; ---------------------------------------------------------------------------
0000DBEA                            Map_SSRC_internal:
0000DBEA 0000                       		dc.w byte_CE02-Map_SSRC_internal
0000DBEC 0000                       		dc.w byte_CE08-Map_SSRC_internal
0000DBEE 0000                       		dc.w byte_CE0E-Map_SSRC_internal
0000DBF0 0000                       		dc.w byte_CE14-Map_SSRC_internal
0000DBF2 0000                       		dc.w byte_CE1A-Map_SSRC_internal
0000DBF4 0000                       		dc.w byte_CE20-Map_SSRC_internal
0000DBF6 0000                       		dc.w byte_CE26-Map_SSRC_internal
0000DBF8 01                         byte_CE02:	dc.b 1
0000DBF9 F805 2004 F8               		dc.b $F8, 5, $20, 4, $F8
0000DBFE 01                         byte_CE08:	dc.b 1
0000DBFF F805 0000 F8               		dc.b $F8, 5, 0,	0, $F8
0000DC04 01                         byte_CE0E:	dc.b 1
0000DC05 F805 4004 F8               		dc.b $F8, 5, $40, 4, $F8
0000DC0A 01                         byte_CE14:	dc.b 1
0000DC0B F805 6004 F8               		dc.b $F8, 5, $60, 4, $F8
0000DC10 01                         byte_CE1A:	dc.b 1
0000DC11 F805 2008 F8               		dc.b $F8, 5, $20, 8, $F8
0000DC16 01                         byte_CE20:	dc.b 1
0000DC17 F805 200C F8               		dc.b $F8, 5, $20, $C, $F8
0000DC1C 00                         byte_CE26:	dc.b 0			; Blank frame
0000DC1E 00                         		even
0000DC1E 00                         		even
0000DC1E                            
0000DC1E                            		include	"_incObj\36 Spikes.asm"
0000DC1E                            ; ---------------------------------------------------------------------------
0000DC1E                            ; Object 36 - spikes
0000DC1E                            ; ---------------------------------------------------------------------------
0000DC1E                            
0000DC1E                            Spikes:
0000DC1E 7000                       		moveq	#0,d0
0000DC20 1028 0024                  		move.b	obRoutine(a0),d0
0000DC24 323B 0000                  		move.w	Spik_Index(pc,d0.w),d1
0000DC28 4EFB 1000                  		jmp	Spik_Index(pc,d1.w)
0000DC2C                            ; ===========================================================================
0000DC2C 0000                       Spik_Index:	dc.w Spik_Main-Spik_Index
0000DC2E 0000                       		dc.w Spik_Solid-Spik_Index
0000DC30                            
0000DC30 =00000030                  spik_origX:	equ $30		; start X position
0000DC30 =00000032                  spik_origY:	equ $32		; start Y position
0000DC30                            
0000DC30 0014                       Spik_Var:	dc.b 0,	$14		; frame	number,	object width
0000DC32 0110                       		dc.b 1,	$10
0000DC34 0204                       		dc.b 2,	4
0000DC36 031C                       		dc.b 3,	$1C
0000DC38 0440                       		dc.b 4,	$40
0000DC3A 0510                       		dc.b 5,	$10
0000DC3C                            ; ===========================================================================
0000DC3C                            
0000DC3C                            Spik_Main:	; Routine 0
0000DC3C 5428 0024                  		addq.b	#2,obRoutine(a0)
0000DC40 217C 0000 0000 0004        		move.l	#Map_Spike,obMap(a0)
0000DC48 317C 051B 0002             		move.w	#$51B,obGfx(a0)
0000DC4E 0028 0004 0001             		ori.b	#4,obRender(a0)
0000DC54 117C 0004 0018             		move.b	#4,obPriority(a0)
0000DC5A 1028 0028                  		move.b	obSubtype(a0),d0
0000DC5E 0228 000F 0028             		andi.b	#$F,obSubtype(a0)
0000DC64 0240 00F0                  		andi.w	#$F0,d0
0000DC68 43F9 0000 DC30             		lea	(Spik_Var).l,a1
0000DC6E E648                       		lsr.w	#3,d0
0000DC70 D2C0                       		adda.w	d0,a1
0000DC72 1159 001A                  		move.b	(a1)+,obFrame(a0)
0000DC76 1159 0019                  		move.b	(a1)+,obActWid(a0)
0000DC7A 3168 0008 0030             		move.w	obX(a0),spik_origX(a0)
0000DC80 3168 000C 0032             		move.w	obY(a0),spik_origY(a0)
0000DC86                            
0000DC86                            Spik_Solid:	; Routine 2
0000DC86 6100 0000                  		bsr.w	Spik_Type0x	; make the object move
0000DC8A 343C 0004                  		move.w	#4,d2
0000DC8E 0C28 0005 001A             		cmpi.b	#5,obFrame(a0)	; is object type $5x ?
0000DC94 6700                       		beq.s	Spik_SideWays	; if yes, branch
0000DC96 0C28 0001 001A             		cmpi.b	#1,obFrame(a0)	; is object type $1x ?
0000DC9C 6600                       		bne.s	Spik_Upright	; if not, branch
0000DC9E 343C 0014                  		move.w	#$14,d2
0000DCA2                            
0000DCA2                            ; Spikes types $1x and $5x face	sideways
0000DCA2                            
0000DCA2                            Spik_SideWays:
0000DCA2 323C 001B                  		move.w	#$1B,d1
0000DCA6 3602                       		move.w	d2,d3
0000DCA8 5243                       		addq.w	#1,d3
0000DCAA 3828 0008                  		move.w	obX(a0),d4
0000DCAE 6100 0000                  		bsr.w	SolidObject
0000DCB2 0828 0003 0022             		btst	#3,obStatus(a0)
0000DCB8 6600                       		bne.s	Spik_Display
0000DCBA 0C44 0001                  		cmpi.w	#1,d4
0000DCBE 6700                       		beq.s	Spik_Hurt
0000DCC0 6000                       		bra.s	Spik_Display
0000DCC2                            ; ===========================================================================
0000DCC2                            
0000DCC2                            ; Spikes types $0x, $2x, $3x and $4x face up or	down
0000DCC2                            
0000DCC2                            Spik_Upright:
0000DCC2 7200                       		moveq	#0,d1
0000DCC4 1228 0019                  		move.b	obActWid(a0),d1
0000DCC8 0641 000B                  		addi.w	#$B,d1
0000DCCC 343C 0010                  		move.w	#$10,d2
0000DCD0 363C 0011                  		move.w	#$11,d3
0000DCD4 3828 0008                  		move.w	obX(a0),d4
0000DCD8 6100 0000                  		bsr.w	SolidObject
0000DCDC 0828 0003 0022             		btst	#3,obStatus(a0)
0000DCE2 6600                       		bne.s	Spik_Hurt
0000DCE4 4A44                       		tst.w	d4
0000DCE6 6A00                       		bpl.s	Spik_Display
0000DCE8                            
0000DCE8                            Spik_Hurt:
0000DCE8 4A38 FE2D                  		tst.b	(v_invinc).w	; is Sonic invincible?
0000DCEC 6600                       		bne.s	Spik_Display	; if yes, branch
0000DCEE 2F08                       		move.l	a0,-(sp)
0000DCF0 2448                       		movea.l	a0,a2
0000DCF2 41F8 D000                  		lea	(v_player).w,a0
0000DCF6 0C28 0004 0024             		cmpi.b	#4,obRoutine(a0)
0000DCFC 6400                       		bcc.s	loc_CF20
0000DCFE 2628 000C                  		move.l	obY(a0),d3
0000DD02 3028 0012                  		move.w	obVelY(a0),d0
0000DD06 48C0                       		ext.l	d0
0000DD08 E180                       		asl.l	#8,d0
0000DD0A 9680                       		sub.l	d0,d3
0000DD0C 2143 000C                  		move.l	d3,obY(a0)
0000DD10 4EB9 0000 0000             		jsr	(HurtSonic).l
0000DD16                            
0000DD16                            loc_CF20:
0000DD16 205F                       		movea.l	(sp)+,a0
0000DD18                            
0000DD18                            Spik_Display:
0000DD18 6100 0000                  		bsr.w	DisplaySprite
0000DD3A 4E75                       		rts	
0000DD3C                            ; ===========================================================================
0000DD3C                            
0000DD3C                            Spik_Type0x:
0000DD3C 7000                       		moveq	#0,d0
0000DD3E 1028 0028                  		move.b	obSubtype(a0),d0
0000DD42 D040                       		add.w	d0,d0
0000DD44 323B 0000                  		move.w	Spik_TypeIndex(pc,d0.w),d1
0000DD48 4EFB 1000                  		jmp	Spik_TypeIndex(pc,d1.w)
0000DD4C                            ; ===========================================================================
0000DD4C 0000                       Spik_TypeIndex:	dc.w Spik_Type00-Spik_TypeIndex
0000DD4E 0000                       		dc.w Spik_Type01-Spik_TypeIndex
0000DD50 0000                       		dc.w Spik_Type02-Spik_TypeIndex
0000DD52                            ; ===========================================================================
0000DD52                            
0000DD52                            Spik_Type00:
0000DD52 4E75                       		rts			; don't move the object
0000DD54                            ; ===========================================================================
0000DD54                            
0000DD54                            Spik_Type01:
0000DD54 6100 0000                  		bsr.w	Spik_Wait
0000DD58 7000                       		moveq	#0,d0
0000DD5A 1028 0034                  		move.b	$34(a0),d0
0000DD5E D068 0032                  		add.w	spik_origY(a0),d0
0000DD62 3140 000C                  		move.w	d0,obY(a0)	; move the object vertically
0000DD66 4E75                       		rts	
0000DD68                            ; ===========================================================================
0000DD68                            
0000DD68                            Spik_Type02:
0000DD68 6100 0000                  		bsr.w	Spik_Wait
0000DD6C 7000                       		moveq	#0,d0
0000DD6E 1028 0034                  		move.b	$34(a0),d0
0000DD72 D068 0030                  		add.w	spik_origX(a0),d0
0000DD76 3140 0008                  		move.w	d0,obX(a0)	; move the object horizontally
0000DD7A 4E75                       		rts	
0000DD7C                            ; ===========================================================================
0000DD7C                            
0000DD7C                            Spik_Wait:
0000DD7C 4A68 0038                  		tst.w	$38(a0)		; is time delay	= zero?
0000DD80 6700                       		beq.s	loc_CFA4	; if yes, branch
0000DD82 5368 0038                  		subq.w	#1,$38(a0)	; subtract 1 from time delay
0000DD86 6600                       		bne.s	locret_CFE6
0000DD88 4A28 0001                  		tst.b	obRender(a0)
0000DD8C 6A00                       		bpl.s	locret_CFE6
0000DD98 6000                       		bra.s	locret_CFE6
0000DD9A                            ; ===========================================================================
0000DD9A                            
0000DD9A                            loc_CFA4:
0000DD9A 4A68 0036                  		tst.w	$36(a0)
0000DD9E 6700                       		beq.s	loc_CFC6
0000DDA0 0468 0800 0034             		subi.w	#$800,$34(a0)
0000DDA6 6400                       		bcc.s	locret_CFE6
0000DDA8 317C 0000 0034             		move.w	#0,$34(a0)
0000DDAE 317C 0000 0036             		move.w	#0,$36(a0)
0000DDB4 317C 003C 0038             		move.w	#60,$38(a0)	; set time delay to 1 second
0000DDBA 6000                       		bra.s	locret_CFE6
0000DDBC                            ; ===========================================================================
0000DDBC                            
0000DDBC                            loc_CFC6:
0000DDBC 0668 0800 0034             		addi.w	#$800,$34(a0)
0000DDC2 0C68 2000 0034             		cmpi.w	#$2000,$34(a0)
0000DDC8 6500                       		bcs.s	locret_CFE6
0000DDCA 317C 2000 0034             		move.w	#$2000,$34(a0)
0000DDD0 317C 0001 0036             		move.w	#1,$36(a0)
0000DDD6 317C 003C 0038             		move.w	#60,$38(a0)	; set time delay to 1 second
0000DDDC                            
0000DDDC                            locret_CFE6:
0000DDDC 4E75                       		rts	
0000DDDC 4E75                       		rts	
0000DDDE                            Map_Spike:	include	"_maps\Spikes.asm"
0000DDDE                            ; ---------------------------------------------------------------------------
0000DDDE                            ; Sprite mappings - spikes
0000DDDE                            ; ---------------------------------------------------------------------------
0000DDDE                            Map_Spike_internal:
0000DDDE 0000                       		dc.w byte_CFF4-Map_Spike_internal
0000DDE0 0000                       		dc.w byte_D004-Map_Spike_internal
0000DDE2 0000                       		dc.w byte_D014-Map_Spike_internal
0000DDE4 0000                       		dc.w byte_D01A-Map_Spike_internal
0000DDE6 0000                       		dc.w byte_D02A-Map_Spike_internal
0000DDE8 0000                       		dc.w byte_D049-Map_Spike_internal
0000DDEA 03                         byte_CFF4:	dc.b 3			; 3 spikes
0000DDEB F003 0004 EC               		dc.b $F0, 3, 0,	4, $EC
0000DDF0 F003 0004 FC               		dc.b $F0, 3, 0,	4, $FC
0000DDF5 F003 0004 0C               		dc.b $F0, 3, 0,	4, $C
0000DDFA 03                         byte_D004:	dc.b 3			; 3 spikes facing sideways
0000DDFB EC0C 0000 F0               		dc.b $EC, $C, 0, 0, $F0
0000DE00 FC0C 0000 F0               		dc.b $FC, $C, 0, 0, $F0
0000DE05 0C0C 0000 F0               		dc.b $C, $C, 0,	0, $F0
0000DE0A 01                         byte_D014:	dc.b 1			; 1 spike
0000DE0B F003 0004 FC               		dc.b $F0, 3, 0,	4, $FC
0000DE10 03                         byte_D01A:	dc.b 3			; 3 spikes widely spaced
0000DE11 F003 0004 E4               		dc.b $F0, 3, 0,	4, $E4
0000DE16 F003 0004 FC               		dc.b $F0, 3, 0,	4, $FC
0000DE1B F003 0004 14               		dc.b $F0, 3, 0,	4, $14
0000DE20 06                         byte_D02A:	dc.b 6			; 6 spikes
0000DE21 F003 0004 C0               		dc.b $F0, 3, 0,	4, $C0
0000DE26 F003 0004 D8               		dc.b $F0, 3, 0,	4, $D8
0000DE2B F003 0004 F0               		dc.b $F0, 3, 0,	4, $F0
0000DE30 F003 0004 08               		dc.b $F0, 3, 0,	4, 8
0000DE35 F003 0004 20               		dc.b $F0, 3, 0,	4, $20
0000DE3A F003 0004 38               		dc.b $F0, 3, 0,	4, $38
0000DE3F 01                         byte_D049:	dc.b 1			; 1 spike facing sideways
0000DE40 FC0C 0000 F0               		dc.b $FC, $C, 0, 0, $F0
0000DE46 00                         		even
0000DE46 00                         		even
0000DE46                            		include	"_incObj\3B Purple Rock.asm"
0000DE46                            ; ---------------------------------------------------------------------------
0000DE46                            ; Object 3B - purple rock (GHZ)
0000DE46                            ; ---------------------------------------------------------------------------
0000DE46                            
0000DE46                            PurpleRock:
0000DE46 7000                       		moveq	#0,d0
0000DE48 1028 0024                  		move.b	obRoutine(a0),d0
0000DE4C 323B 0000                  		move.w	Rock_Index(pc,d0.w),d1
0000DE50 4EFB 1000                  		jmp	Rock_Index(pc,d1.w)
0000DE54                            ; ===========================================================================
0000DE54 0000                       Rock_Index:	dc.w Rock_Main-Rock_Index
0000DE56 0000                       		dc.w Rock_Solid-Rock_Index
0000DE58                            ; ===========================================================================
0000DE58                            
0000DE58                            Rock_Main:	; Routine 0
0000DE58 5428 0024                  		addq.b	#2,obRoutine(a0)
0000DE5C 217C 0000 0000 0004        		move.l	#Map_PRock,obMap(a0)
0000DE64 317C 63D0 0002             		move.w	#$63D0,obGfx(a0)
0000DE6A 117C 0004 0001             		move.b	#4,obRender(a0)
0000DE70 117C 0013 0019             		move.b	#$13,obActWid(a0)
0000DE76 117C 0004 0018             		move.b	#4,obPriority(a0)
0000DE7C                            
0000DE7C                            Rock_Solid:	; Routine 2
0000DE7C 323C 001B                  		move.w	#$1B,d1
0000DE80 343C 0010                  		move.w	#$10,d2
0000DE84 363C 0010                  		move.w	#$10,d3
0000DE88 3828 0008                  		move.w	obX(a0),d4
0000DE8C 6100 0000                  		bsr.w	SolidObject
0000DE90 6100 0000                  		bsr.w	DisplaySprite
0000DEB2 4E75                       		rts	
0000DEB2 4E75                       		rts	
0000DEB4                            		include	"_incObj\49 Waterfall Sound.asm"
0000DEB4                            ; ---------------------------------------------------------------------------
0000DEB4                            ; Object 49 - waterfall	sound effect (GHZ)
0000DEB4                            ; ---------------------------------------------------------------------------
0000DEB4                            
0000DEB4                            WaterSound:
0000DEB4 7000                       		moveq	#0,d0
0000DEB6 1028 0024                  		move.b	obRoutine(a0),d0
0000DEBA 323B 0000                  		move.w	WSnd_Index(pc,d0.w),d1
0000DEBE 4EFB 1000                  		jmp	WSnd_Index(pc,d1.w)
0000DEC2                            ; ===========================================================================
0000DEC2 0000                       WSnd_Index:	dc.w WSnd_Main-WSnd_Index
0000DEC4 0000                       		dc.w WSnd_PlaySnd-WSnd_Index
0000DEC6                            ; ===========================================================================
0000DEC6                            
0000DEC6                            WSnd_Main:	; Routine 0
0000DEC6 5428 0024                  		addq.b	#2,obRoutine(a0)
0000DECA 117C 0004 0001             		move.b	#4,obRender(a0)
0000DED0                            
0000DED0                            WSnd_PlaySnd:	; Routine 2
0000DED0 1038 FE0F                  		move.b	(v_vbla_byte).w,d0 ; get low byte of VBlank counter
0000DED4 0200 003F                  		andi.b	#$3F,d0
0000DED8 6600                       		bne.s	WSnd_ChkDel
0000DEE4                            
0000DEE4                            	WSnd_ChkDel:
0000DF02 4E75                       		rts	
0000DF02 4E75                       		rts	
0000DF04                            		include	"_incObj\10.asm"
0000DF04                            ; ---------------------------------------------------------------------------
0000DF04                            ; Object 10 - You Are Welcome, Everyone!
0000DF04                            ; ---------------------------------------------------------------------------
0000DF04                            
0000DF04                            WelcomeSign:
0000DF04 4E75                       		rts
0000DF06 217C 0000 0000 0004                move.l    #Map_Welcome,obMap(a0)
0000DF0E 317C 0300 0002                     move.w    #$0300,obGfx(a0)
0000DF14 117C 0004 0001                     move.b    #4,obRender(a0)
0000DF1A 117C 0013 0019                     move.b    #$13,obActWid(a0)
0000DF20 117C 0004 0018                     move.b    #4,obPriority(a0)
0000DF26 6100 0000                          bsr.w    DisplaySprite
0000DF2A 4E75                               rts
0000DF2A 4E75                               rts
0000DF2C                            Map_PRock:	include	"_maps\Purple Rock.asm"
0000DF2C                            ; ---------------------------------------------------------------------------
0000DF2C                            ; Sprite mappings - purple rock	(GHZ)
0000DF2C                            ; ---------------------------------------------------------------------------
0000DF2C                            Map_PRock_internal:
0000DF2C 0000                       		dc.w byte_D110-Map_PRock_internal
0000DF2E 02                         byte_D110:	dc.b 2
0000DF2F F00B 0000 E8               		dc.b $F0, $B, 0, 0, $E8
0000DF34 F00B 000C 00               		dc.b $F0, $B, 0, $C, 0
0000DF3A 00                         		even
0000DF3A 00                         		even
0000DF3A                            		include	"_incObj\3C Smashable Wall.asm"
0000DF3A                            ; ---------------------------------------------------------------------------
0000DF3A                            ; Object 3C - smashable	wall (GHZ, SLZ)
0000DF3A                            ; ---------------------------------------------------------------------------
0000DF3A                            
0000DF3A                            SmashWall:
0000DF3A 7000                       		moveq	#0,d0
0000DF3C 1028 0024                  		move.b	obRoutine(a0),d0
0000DF40 323B 0000                  		move.w	Smash_Index(pc,d0.w),d1
0000DF44 4EBB 1000                  		jsr	Smash_Index(pc,d1.w)
0000DF48 6000 0000                  		bra.w	RememberState
0000DF4C                            ; ===========================================================================
0000DF4C 0000                       Smash_Index:	dc.w Smash_Main-Smash_Index
0000DF4E 0000                       		dc.w Smash_Solid-Smash_Index
0000DF50 0000                       		dc.w Smash_FragMove-Smash_Index
0000DF52                            
0000DF52 =00000030                  smash_speed:	equ $30		; Sonic's horizontal speed
0000DF52                            ; ===========================================================================
0000DF52                            
0000DF52                            Smash_Main:	; Routine 0
0000DF52 5428 0024                  		addq.b	#2,obRoutine(a0)
0000DF56 217C 0000 0000 0004        		move.l	#Map_Smash,obMap(a0)
0000DF5E 317C 450F 0002             		move.w	#$450F,obGfx(a0)
0000DF64 117C 0004 0001             		move.b	#4,obRender(a0)
0000DF6A 117C 0010 0019             		move.b	#$10,obActWid(a0)
0000DF70 117C 0004 0018             		move.b	#4,obPriority(a0)
0000DF76 1168 0028 001A             		move.b	obSubtype(a0),obFrame(a0)
0000DF7C                            
0000DF7C                            Smash_Solid:	; Routine 2
0000DF7C 3178 D010 0030             		move.w	(v_player+obVelX).w,smash_speed(a0) ; load Sonic's horizontal speed
0000DF82 323C 001B                  		move.w	#$1B,d1
0000DF86 343C 0020                  		move.w	#$20,d2
0000DF8A 363C 0020                  		move.w	#$20,d3
0000DF8E 3828 0008                  		move.w	obX(a0),d4
0000DF92 6100 0000                  		bsr.w	SolidObject
0000DF96 0828 0005 0022             		btst	#5,obStatus(a0)	; is Sonic pushing against the wall?
0000DF9C 6600                       		bne.s	@chkroll	; if yes, branch
0000DF9E                            
0000DF9E                            @donothing:
0000DF9E 4E75                       		rts	
0000DFA0                            ; ===========================================================================
0000DFA0                            
0000DFA0                            @chkroll:
0000DFA0 0C29 0000 001C             		cmpi.b	#id_Roll,obAnim(a1) ; is Sonic rolling?
0000DFA6 66F6                       		bne.s	@donothing	; if not, branch
0000DFA8 3028 0030                  		move.w	smash_speed(a0),d0
0000DFAC 6A00                       		bpl.s	@chkspeed
0000DFAE 4440                       		neg.w	d0
0000DFB0                            
0000DFB0                            	@chkspeed:
0000DFB0 0C40 0480                  		cmpi.w	#$480,d0	; is Sonic's speed $480 or higher?
0000DFB4 65E8                       		bcs.s	@donothing	; if not, branch
0000DFB6 3368 0030 0010             		move.w	smash_speed(a0),obVelX(a1)
0000DFBC 5069 0008                  		addq.w	#8,obX(a1)
0000DFC0 49F9 0000 0000             		lea	(Smash_FragSpd1).l,a4 ;	use fragments that move	right
0000DFC6 3028 0008                  		move.w	obX(a0),d0
0000DFCA B069 0008                  		cmp.w	obX(a1),d0	; is Sonic to the right	of the block?
0000DFCE 6500                       		bcs.s	@smash		; if yes, branch
0000DFD0 5169 0008                  		subq.w	#8,obX(a1)
0000DFD4 49F9 0000 0000             		lea	(Smash_FragSpd2).l,a4 ;	use fragments that move	left
0000DFDA                            
0000DFDA                            	@smash:
0000DFDA 3369 0010 0014             		move.w	obVelX(a1),obInertia(a1)
0000DFE0 08A8 0005 0022             		bclr	#5,obStatus(a0)
0000DFE6 08A9 0005 0022             		bclr	#5,obStatus(a1)
0000DFEC 7207                       		moveq	#7,d1		; load 8 fragments
0000DFEE 343C 0070                  		move.w	#$70,d2
0000DFF2 6100                       		bsr.s	SmashObject
0000DFF4                            
0000DFF4                            Smash_FragMove:	; Routine 4
0000DFF4 6100 0000                  		bsr.w	SpeedToPos
0000DFF8 0668 0070 0012             		addi.w	#$70,obVelY(a0)	; make fragment	fall faster
0000DFFE 6100 0000                  		bsr.w	DisplaySprite
0000E002 4A28 0001                  		tst.b	obRender(a0)
0000E006 6A00 0000                  		bpl.w	DeleteObject
0000E00A 4E75                       		rts	
0000E00A 4E75                       		rts	
0000E00C                            
0000E00C                            		include	"_incObj\sub SmashObject.asm"
0000E00C                            ; ---------------------------------------------------------------------------
0000E00C                            ; Subroutine to	smash a	block (GHZ walls and MZ	blocks)
0000E00C                            ; ---------------------------------------------------------------------------
0000E00C                            
0000E00C                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000E00C                            
0000E00C                            
0000E00C                            SmashObject:
0000E00C 7000                       		moveq	#0,d0
0000E00E 1028 001A                  		move.b	obFrame(a0),d0
0000E012 D040                       		add.w	d0,d0
0000E014 2668 0004                  		movea.l	obMap(a0),a3
0000E018 D6F3 0000                  		adda.w	(a3,d0.w),a3
0000E01C 524B                       		addq.w	#1,a3
0000E01E 08E8 0005 0001             		bset	#5,obRender(a0)
0000E024 1828 0000                  		move.b	0(a0),d4
0000E028 1A28 0001                  		move.b	obRender(a0),d5
0000E02C 2248                       		movea.l	a0,a1
0000E02E 6000                       		bra.s	@loadfrag
0000E030                            ; ===========================================================================
0000E030                            
0000E030                            	@loop:
0000E030 6100 0000                  		bsr.w	FindFreeObj
0000E034 6600                       		bne.s	@playsnd
0000E036 5A4B                       		addq.w	#5,a3
0000E038                            
0000E038                            @loadfrag:
0000E038 137C 0004 0024             		move.b	#4,obRoutine(a1)
0000E03E 1344 0000                  		move.b	d4,0(a1)
0000E042 234B 0004                  		move.l	a3,obMap(a1)
0000E046 1345 0001                  		move.b	d5,obRender(a1)
0000E04A 3368 0008 0008             		move.w	obX(a0),obX(a1)
0000E050 3368 000C 000C             		move.w	obY(a0),obY(a1)
0000E056 3368 0002 0002             		move.w	obGfx(a0),obGfx(a1)
0000E05C 1368 0018 0018             		move.b	obPriority(a0),obPriority(a1)
0000E062 1368 0019 0019             		move.b	obActWid(a0),obActWid(a1)
0000E068 335C 0010                  		move.w	(a4)+,obVelX(a1)
0000E06C 335C 0012                  		move.w	(a4)+,obVelY(a1)
0000E070 B3C8                       		cmpa.l	a0,a1
0000E072 6400                       		bcc.s	@loc_D268
0000E074 2F08                       		move.l	a0,-(sp)
0000E076 2049                       		movea.l	a1,a0
0000E078 6100 0000                  		bsr.w	SpeedToPos
0000E07C D568 0012                  		add.w	d2,obVelY(a0)
0000E080 205F                       		movea.l	(sp)+,a0
0000E082 6100 0000                  		bsr.w	DisplaySprite1
0000E086                            
0000E086                            	@loc_D268:
0000E086 51C9 FFA8                  		dbf	d1,@loop
0000E08A                            
0000E08A                            	@playsnd:
0000E094                            
0000E094                            ; End of function SmashObject
0000E094                            ; End of function SmashObject
0000E094                            
0000E094                            ; ===========================================================================
0000E094                            ; Smashed block	fragment speeds
0000E094                            ;
0000E094 0400 FB00                  Smash_FragSpd1:	dc.w $400, -$500	; x-move speed,	y-move speed
0000E098 0600 FF00                  		dc.w $600, -$100
0000E09C 0600 0100                  		dc.w $600, $100
0000E0A0 0400 0500                  		dc.w $400, $500
0000E0A4 0600 FA00                  		dc.w $600, -$600
0000E0A8 0800 FE00                  		dc.w $800, -$200
0000E0AC 0800 0200                  		dc.w $800, $200
0000E0B0 0600 0600                  		dc.w $600, $600
0000E0B4                            
0000E0B4 FA00 FA00                  Smash_FragSpd2:	dc.w -$600, -$600
0000E0B8 F800 FE00                  		dc.w -$800, -$200
0000E0BC F800 0200                  		dc.w -$800, $200
0000E0C0 FA00 0600                  		dc.w -$600, $600
0000E0C4 FC00 FB00                  		dc.w -$400, -$500
0000E0C8 FA00 FF00                  		dc.w -$600, -$100
0000E0CC FA00 0100                  		dc.w -$600, $100
0000E0D0 FC00 0500                  		dc.w -$400, $500
0000E0D4                            
0000E0D4                            Map_Smash:	include	"_maps\Smashable Walls.asm"
0000E0D4                            ; ---------------------------------------------------------------------------
0000E0D4                            ; Sprite mappings - smashable walls (GHZ, SLZ)
0000E0D4                            ; ---------------------------------------------------------------------------
0000E0D4                            Map_Smash_internal:
0000E0D4 0000                       		dc.w @left-Map_Smash_internal
0000E0D6 0000                       		dc.w @middle-Map_Smash_internal
0000E0D8 0000                       		dc.w @right-Map_Smash_internal
0000E0DA 08                         @left:		dc.b 8
0000E0DB E005 0000 F0               		dc.b $E0, 5, 0,	0, $F0
0000E0E0 F005 0000 F0               		dc.b $F0, 5, 0,	0, $F0
0000E0E5 0005 0000 F0               		dc.b 0,	5, 0, 0, $F0
0000E0EA 1005 0000 F0               		dc.b $10, 5, 0,	0, $F0
0000E0EF E005 0004 00               		dc.b $E0, 5, 0,	4, 0
0000E0F4 F005 0004 00               		dc.b $F0, 5, 0,	4, 0
0000E0F9 0005 0004 00               		dc.b 0,	5, 0, 4, 0
0000E0FE 1005 0004 00               		dc.b $10, 5, 0,	4, 0
0000E103 08                         @middle:	dc.b 8
0000E104 E005 0004 F0               		dc.b $E0, 5, 0,	4, $F0
0000E109 F005 0004 F0               		dc.b $F0, 5, 0,	4, $F0
0000E10E 0005 0004 F0               		dc.b 0,	5, 0, 4, $F0
0000E113 1005 0004 F0               		dc.b $10, 5, 0,	4, $F0
0000E118 E005 0004 00               		dc.b $E0, 5, 0,	4, 0
0000E11D F005 0004 00               		dc.b $F0, 5, 0,	4, 0
0000E122 0005 0004 00               		dc.b 0,	5, 0, 4, 0
0000E127 1005 0004 00               		dc.b $10, 5, 0,	4, 0
0000E12C 08                         @right:		dc.b 8
0000E12D E005 0004 F0               		dc.b $E0, 5, 0,	4, $F0
0000E132 F005 0004 F0               		dc.b $F0, 5, 0,	4, $F0
0000E137 0005 0004 F0               		dc.b 0,	5, 0, 4, $F0
0000E13C 1005 0004 F0               		dc.b $10, 5, 0,	4, $F0
0000E141 E005 0008 00               		dc.b $E0, 5, 0,	8, 0
0000E146 F005 0008 00               		dc.b $F0, 5, 0,	8, 0
0000E14B 0005 0008 00               		dc.b 0,	5, 0, 8, 0
0000E150 1005 0008 00               		dc.b $10, 5, 0,	8, 0
0000E156 00                         		even
0000E156 00                         		even
0000E156                            
0000E156                            ; ---------------------------------------------------------------------------
0000E156                            ; Object code execution subroutine
0000E156                            ; ---------------------------------------------------------------------------
0000E156                            
0000E156                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000E156                            
0000E156                            
0000E156                            ExecuteObjects:
0000E156 41F8 D000                  		lea	(v_objspace).w,a0 ; set address for object RAM
0000E15A 7E7F                       		moveq	#$7F,d7
0000E15C 7000                       		moveq	#0,d0
0000E15E 0C38 0006 D024             		cmpi.b	#6,(v_player+obRoutine).w
0000E164 6400                       		bhs.s	loc_D362
0000E166                            
0000E166                            loc_D348:
0000E166 1010                       		move.b	(a0),d0		; load object number from RAM
0000E168 6700                       		beq.s	loc_D358
0000E16A D040                       		add.w	d0,d0
0000E16C D040                       		add.w	d0,d0
0000E16E 227B 0000                  		movea.l	Obj_Index-4(pc,d0.w),a1
0000E172 4E91                       		jsr	(a1)		; run the object's code
0000E174 7000                       		moveq	#0,d0
0000E176                            
0000E176                            loc_D358:
0000E176 41E8 0040                  		lea	$40(a0),a0	; next object
0000E17A 51CF FFEA                  		dbf	d7,loc_D348
0000E17E 4E75                       		rts	
0000E180                            ; ===========================================================================
0000E180                            
0000E180                            loc_D362:
0000E180 7E1F                       		moveq	#$1F,d7
0000E182 61E2                       		bsr.s	loc_D348
0000E184 7E5F                       		moveq	#$5F,d7
0000E186                            
0000E186                            loc_D368:
0000E186 7000                       		moveq	#0,d0
0000E188 1010                       		move.b	(a0),d0
0000E18A 6700                       		beq.s	loc_D378
0000E18C 4A28 0001                  		tst.b	obRender(a0)
0000E190 6A00                       		bpl.s	loc_D378
0000E192 6100 0000                  		bsr.w	DisplaySprite
0000E196                            
0000E196                            loc_D378:
0000E196 41E8 0040                  		lea	$40(a0),a0
0000E19A                            
0000E19A                            loc_D37C:
0000E19A 51CF FFEA                  		dbf	d7,loc_D368
0000E19E 4E75                       		rts	
0000E1A0                            ; End of function ExecuteObjects
0000E1A0                            
0000E1A0                            ; ===========================================================================
0000E1A0                            ; ---------------------------------------------------------------------------
0000E1A0                            ; Object pointers
0000E1A0                            ; ---------------------------------------------------------------------------
0000E1A0                            Obj_Index:
0000E1A0                            		include	"_inc\Object Pointers.asm"
0000E1A0                            ; ---------------------------------------------------------------------------
0000E1A0                            ; Object pointers
0000E1A0                            ; ---------------------------------------------------------------------------
0000E1A0 0000 0000                  ptr_SonicPlayer:	dc.l SonicPlayer	; $01
0000E1A4 0000 0000                  ptr_Obj02:		dc.l ForceDebug
0000E1A8 0000 0000                  ptr_Obj03:		dc.l Hacker
0000E1AC 0000 A850                  ptr_Obj04:		dc.l Key
0000E1B0 0000 0000                  ptr_Obj05:		dc.l NullObject
0000E1B4 0000 0000                  ptr_Obj06:		dc.l NullObject
0000E1B8 0000 B9D0                  ptr_Obj07:		dc.l Imp
0000E1BC 0000 0000                  ptr_Splash:		dc.l Splash		; $08
0000E1C0 0000 0000                  ptr_SonicSpecial:	dc.l SonicSpecial
0000E1C4 0000 0000                  ptr_DrownCount:		dc.l DrownCount
0000E1C8 0000 0000                  ptr_Pole:		dc.l Pole
0000E1CC 0000 0000                  ptr_FlapDoor:		dc.l FlapDoor
0000E1D0 0000 0000                  ptr_Signpost:		dc.l Signpost
0000E1D4 0000 B0EA                  ptr_TitleSonic:		dc.l TitleSonic
0000E1D8 0000 B16A                  ptr_PSBTM:		dc.l PSBTM
0000E1DC 0000 DF04                  ptr_Obj10:		dc.l WelcomeSign		; $10
0000E1E0 0000 7962                  ptr_Bridge:		dc.l Bridge
0000E1E4 0000 0000                  ptr_SpinningLight:	dc.l SpinningLight
0000E1E8 0000 0000                  ptr_LavaMaker:		dc.l LavaMaker
0000E1EC 0000 0000                  ptr_LavaBall:		dc.l LavaBall
0000E1F0 0000 7F8C                  ptr_SwingingPlatform:	dc.l SwingingPlatform
0000E1F4 0000 0000                  ptr_Harpoon:		dc.l Harpoon
0000E1F8 0000 82DC                  ptr_Helix:		dc.l Helix
0000E1FC 0000 846C                  ptr_BasicPlatform:	dc.l BasicPlatform	; $18
0000E200 0000 87E2                  ptr_Obj19:		dc.l GHZBoulder
0000E204 0000 8A42                  ptr_CollapseLedge:	dc.l CollapseLedge
0000E208 0000 0000                  ptr_WaterSurface:	dc.l WaterSurface
0000E20C 0000 8FFC                  ptr_Scenery:		dc.l Scenery
0000E210 0000 9090                  ptr_MagicSwitch:	dc.l MagicSwitch
0000E214 0000 937E                  ptr_BallHog:		dc.l BallHog
0000E218 0000 9DD6                  ptr_Crabmeat:		dc.l Crabmeat
0000E21C 0000 94C6                  ptr_Cannonball:		dc.l Cannonball		; $20
0000E220 0000 0000                  ptr_HUD:		dc.l HUD
0000E224 0000 A0C4                  ptr_BuzzBomber:		dc.l BuzzBomber
0000E228 0000 A218                  ptr_Missile:		dc.l Missile
0000E22C 0000 9558                  ptr_MissileDissolve:	dc.l MissileDissolve
0000E230 0000 A426                  ptr_Rings:		dc.l Rings
0000E234 0000 AB5C                  ptr_Monitor:		dc.l Monitor
0000E238 0000 95C8                  ptr_ExplosionItem:	dc.l ExplosionItem
0000E23C 0000 9808                  ptr_Animals:		dc.l Animals		; $28
0000E240 0000 9CF8                  ptr_Points:		dc.l Points
0000E244 0000 9166                  ptr_AutoDoor:		dc.l AutoDoor
0000E248 0000 B694                  ptr_Chopper:		dc.l Chopper
0000E24C 0000 B74E                  ptr_Jaws:		dc.l Jaws
0000E250 0000 B818                  ptr_Burrobot:		dc.l Burrobot
0000E254 0000 AD4C                  ptr_PowerUp:		dc.l PowerUp
0000E258 0000 BC1C                  ptr_LargeGrass:		dc.l LargeGrass
0000E25C 0000 C102                  ptr_GlassBlock:		dc.l GlassBlock		; $30
0000E260 0000 C3E0                  ptr_ChainStomp:		dc.l ChainStomp
0000E264 0000 CA92                  ptr_Button:		dc.l Button
0000E268 0000 CC36                  ptr_PushBlock:		dc.l PushBlock
0000E26C 0000 D06A                  ptr_TitleCard:		dc.l TitleCard
0000E270 0000 BF40                  ptr_GrassFire:		dc.l GrassFire
0000E274 0000 DC1E                  ptr_Spikes:		dc.l Spikes
0000E278 0000 A5B6                  ptr_RingLoss:		dc.l RingLoss
0000E27C 0000 0000                  ptr_ShieldItem:		dc.l ShieldItem		; $38
0000E280 0000 D23C                  ptr_GameOverCard:	dc.l GameOverCard
0000E284 0000 D2F8                  ptr_GotThroughCard:	dc.l GotThroughCard
0000E288 0000 DE46                  ptr_PurpleRock:		dc.l PurpleRock
0000E28C 0000 DF3A                  ptr_SmashWall:		dc.l SmashWall
0000E290 0000 0000                  ptr_BossGreenHill:	dc.l BossGreenHill
0000E294 0000 0000                  ptr_Prison:		dc.l Prison
0000E298 0000 965C                  ptr_ExplosionBomb:	dc.l ExplosionBomb
0000E29C 0000 0000                  ptr_MotoBug:		dc.l MotoBug		; $40
0000E2A0 0000 0000                  ptr_Springs:		dc.l Springs
0000E2A4 0000 0000                  ptr_Newtron:		dc.l Newtron
0000E2A8 0000 0000                  ptr_Roller:		dc.l Roller
0000E2AC 0000 0000                  ptr_EdgeWalls:		dc.l EdgeWalls
0000E2B0 0000 C6FE                  ptr_SideStomp:		dc.l SideStomp
0000E2B4 0000 0000                  ptr_MarbleBrick:	dc.l MarbleBrick
0000E2B8 0000 0000                  ptr_Bumper:		dc.l Bumper
0000E2BC 0000 0000                  ptr_BossBall:		dc.l BossBall		; $48
0000E2C0 0000 DEB4                  ptr_WaterSound:		dc.l WaterSound
0000E2C4 0000 0000                  ptr_VanishSonic:	dc.l VanishSonic
0000E2C8 0000 A6EE                  ptr_GiantRing:		dc.l GiantRing
0000E2CC 0000 0000                  ptr_GeyserMaker:	dc.l GeyserMaker
0000E2D0 0000 0000                  ptr_LavaGeyser:		dc.l LavaGeyser
0000E2D4 0000 0000                  ptr_LavaWall:		dc.l LavaWall
0000E2D8 0000 0000                  ptr_Obj4F:		dc.l Obj4F
0000E2DC 0000 0000                  ptr_Yadrin:		dc.l Yadrin		; $50
0000E2E0 0000 0000                  ptr_SmashBlock:		dc.l SmashBlock
0000E2E4 0000 0000                  ptr_MovingBlock:	dc.l MovingBlock
0000E2E8 0000 8B52                  ptr_CollapseFloor:	dc.l CollapseFloor
0000E2EC 0000 0000                  ptr_LavaTag:		dc.l LavaTag
0000E2F0 0000 0000                  ptr_Basaran:		dc.l Basaran
0000E2F4 0000 0000                  ptr_FloatingBlock:	dc.l FloatingBlock
0000E2F8 0000 0000                  ptr_SpikeBall:		dc.l SpikeBall
0000E2FC 0000 0000                  ptr_BigSpikeBall:	dc.l BigSpikeBall	; $58
0000E300 0000 0000                  ptr_Elevator:		dc.l Elevator
0000E304 0000 0000                  ptr_CirclingPlatform:	dc.l CirclingPlatform
0000E308 0000 0000                  ptr_Staircase:		dc.l Staircase
0000E30C 0000 0000                  ptr_Pylon:		dc.l Pylon
0000E310 0000 0000                  ptr_Fan:		dc.l Fan
0000E314 0000 0000                  ptr_Seesaw:		dc.l Seesaw
0000E318 0000 0000                  ptr_Bomb:		dc.l Bomb
0000E31C 0000 0000                  ptr_Orbinaut:		dc.l Orbinaut		; $60
0000E320 0000 0000                  ptr_LabyrinthBlock:	dc.l LabyrinthBlock
0000E324 0000 0000                  ptr_Gargoyle:		dc.l Gargoyle
0000E328 0000 0000                  ptr_LabyrinthConvey:	dc.l LabyrinthConvey
0000E32C 0000 0000                  ptr_Bubble:		dc.l Bubble
0000E330 0000 0000                  ptr_Waterfall:		dc.l Waterfall
0000E334 0000 0000                  ptr_Junction:		dc.l Junction
0000E338 0000 0000                  ptr_RunningDisc:	dc.l RunningDisc
0000E33C 0000 0000                  ptr_Conveyor:		dc.l Conveyor		; $68
0000E340 0000 0000                  ptr_SpinPlatform:	dc.l SpinPlatform
0000E344 0000 0000                  ptr_Saws:		dc.l Saws
0000E348 0000 0000                  ptr_ScrapStomp:		dc.l ScrapStomp
0000E34C 0000 0000                  ptr_VanishPlatform:	dc.l VanishPlatform
0000E350 0000 0000                  ptr_Flamethrower:	dc.l Flamethrower
0000E354 0000 0000                  ptr_Electro:		dc.l Electro
0000E358 0000 0000                  ptr_SpinConvey:		dc.l SpinConvey
0000E35C 0000 0000                  ptr_Girder:		dc.l Girder		; $70
0000E360 0000 0000                  ptr_Invisibarrier:	dc.l Invisibarrier
0000E364 0000 0000                  ptr_Teleport:		dc.l Teleport
0000E368 0000 0000                  ptr_BossMarble:		dc.l BossMarble
0000E36C 0000 0000                  ptr_BossFire:		dc.l BossFire
0000E370 0000 0000                  ptr_BossSpringYard:	dc.l BossSpringYard
0000E374 0000 0000                  ptr_BossBlock:		dc.l BossBlock
0000E378 0000 0000                  ptr_BossLabyrinth:	dc.l BossLabyrinth
0000E37C 0000 0000                  ptr_Caterkiller:	dc.l Caterkiller	; $78
0000E380 0000 0000                  ptr_Lamppost:		dc.l Lamppost
0000E384 0000 0000                  ptr_BossStarLight:	dc.l BossStarLight
0000E388 0000 0000                  ptr_BossSpikeball:	dc.l BossSpikeball
0000E38C 0000 A7A2                  ptr_RingFlash:		dc.l RingFlash
0000E390 0000 0000                  ptr_HiddenBonus:	dc.l HiddenBonus
0000E394 0000 D54C                  ptr_SSResult:		dc.l SSResult
0000E398 0000 D6F4                  ptr_SSRChaos:		dc.l SSRChaos
0000E39C 0000 4EA2                  ptr_ContScrItem:	dc.l ContScrItem	; $80
0000E3A0 0000 4FBC                  ptr_ContSonic:		dc.l ContSonic
0000E3A4 0000 0000                  ptr_ScrapEggman:	dc.l ScrapEggman
0000E3A8 0000 0000                  ptr_FalseFloor:		dc.l FalseFloor
0000E3AC 0000 0000                  ptr_EggmanCylinder:	dc.l EggmanCylinder
0000E3B0 0000 0000                  ptr_BossFinal:		dc.l BossFinal
0000E3B4 0000 0000                  ptr_BossPlasma:		dc.l BossPlasma
0000E3B8 0000 5442                  ptr_EndSonic:		dc.l EndSonic
0000E3BC 0000 559C                  ptr_EndChaos:		dc.l EndChaos		; $88
0000E3C0 0000 5676                  ptr_EndSTH:		dc.l EndSTH
0000E3C4 0000 0000                  ptr_CreditsText:	dc.l CreditsText
0000E3C8 0000 5BA4                  ptr_EndEggman:		dc.l EndEggman
0000E3CC 0000 5C5E                  ptr_TryChaos:		dc.l TryChaos
0000E3D0                            
0000E3D0                            NullObject:
0000E3D0 4EF9 0000 0000             		jmp	(DeleteObject).l	; It would be safer to have this instruction here, but instead it just falls through to ObjectFall
0000E3D6                            
0000E3D6 =00000001                  id_SonicPlayer:		equ ((ptr_SonicPlayer-Obj_Index)/4)+1		; $01
0000E3D6 =00000002                  id_Obj02:		equ ((ptr_Obj02-Obj_Index)/4)+1
0000E3D6 =00000003                  id_Obj03:		equ ((ptr_Obj03-Obj_Index)/4)+1
0000E3D6 =00000004                  id_Obj04:		equ ((ptr_Obj04-Obj_Index)/4)+1
0000E3D6 =00000005                  id_Obj05:		equ ((ptr_Obj05-Obj_Index)/4)+1
0000E3D6 =00000006                  id_Obj06:		equ ((ptr_Obj06-Obj_Index)/4)+1
0000E3D6 =00000007                  id_Obj07:		equ ((ptr_Obj07-Obj_Index)/4)+1
0000E3D6 =00000008                  id_Splash:		equ ((ptr_Splash-Obj_Index)/4)+1		; $08
0000E3D6 =00000009                  id_SonicSpecial:	equ ((ptr_SonicSpecial-Obj_Index)/4)+1
0000E3D6 =0000000A                  id_DrownCount:		equ ((ptr_DrownCount-Obj_Index)/4)+1
0000E3D6 =0000000B                  id_Pole:		equ ((ptr_Pole-Obj_Index)/4)+1
0000E3D6 =0000000C                  id_FlapDoor:		equ ((ptr_FlapDoor-Obj_Index)/4)+1
0000E3D6 =0000000D                  id_Signpost:		equ ((ptr_Signpost-Obj_Index)/4)+1
0000E3D6 =0000000E                  id_TitleSonic:		equ ((ptr_TitleSonic-Obj_Index)/4)+1
0000E3D6 =0000000F                  id_PSBTM:		equ ((ptr_PSBTM-Obj_Index)/4)+1
0000E3D6 =00000010                  id_Obj10:		equ ((ptr_Obj10-Obj_Index)/4)+1			; $10
0000E3D6 =00000011                  id_Bridge:		equ ((ptr_Bridge-Obj_Index)/4)+1
0000E3D6 =00000012                  id_SpinningLight:	equ ((ptr_SpinningLight-Obj_Index)/4)+1
0000E3D6 =00000013                  id_LavaMaker:		equ ((ptr_LavaMaker-Obj_Index)/4)+1
0000E3D6 =00000014                  id_LavaBall:		equ ((ptr_LavaBall-Obj_Index)/4)+1
0000E3D6 =00000015                  id_SwingingPlatform:	equ ((ptr_SwingingPlatform-Obj_Index)/4)+1
0000E3D6 =00000016                  id_Harpoon:		equ ((ptr_Harpoon-Obj_Index)/4)+1
0000E3D6 =00000017                  id_Helix:		equ ((ptr_Helix-Obj_Index)/4)+1
0000E3D6 =00000018                  id_BasicPlatform:	equ ((ptr_BasicPlatform-Obj_Index)/4)+1		; $18
0000E3D6 =00000019                  id_Obj19:		equ ((ptr_Obj19-Obj_Index)/4)+1
0000E3D6 =0000001A                  id_CollapseLedge:	equ ((ptr_CollapseLedge-Obj_Index)/4)+1
0000E3D6 =0000001B                  id_WaterSurface:	equ ((ptr_WaterSurface-Obj_Index)/4)+1
0000E3D6 =0000001C                  id_Scenery:		equ ((ptr_Scenery-Obj_Index)/4)+1
0000E3D6 =0000001D                  id_MagicSwitch:		equ ((ptr_MagicSwitch-Obj_Index)/4)+1
0000E3D6 =0000001E                  id_BallHog:		equ ((ptr_BallHog-Obj_Index)/4)+1
0000E3D6 =0000001F                  id_Crabmeat:		equ ((ptr_Crabmeat-Obj_Index)/4)+1
0000E3D6 =00000020                  id_Cannonball:		equ ((ptr_Cannonball-Obj_Index)/4)+1		; $20
0000E3D6 =00000021                  id_HUD:			equ ((ptr_HUD-Obj_Index)/4)+1
0000E3D6 =00000022                  id_BuzzBomber:		equ ((ptr_BuzzBomber-Obj_Index)/4)+1
0000E3D6 =00000023                  id_Missile:		equ ((ptr_Missile-Obj_Index)/4)+1
0000E3D6 =00000024                  id_MissileDissolve:	equ ((ptr_MissileDissolve-Obj_Index)/4)+1
0000E3D6 =00000025                  id_Rings:		equ ((ptr_Rings-Obj_Index)/4)+1
0000E3D6 =00000026                  id_Monitor:		equ ((ptr_Monitor-Obj_Index)/4)+1
0000E3D6 =00000027                  id_ExplosionItem:	equ ((ptr_ExplosionItem-Obj_Index)/4)+1
0000E3D6 =00000028                  id_Animals:		equ ((ptr_Animals-Obj_Index)/4)+1		; $28
0000E3D6 =00000029                  id_Points:		equ ((ptr_Points-Obj_Index)/4)+1
0000E3D6 =0000002A                  id_AutoDoor:		equ ((ptr_AutoDoor-Obj_Index)/4)+1
0000E3D6 =0000002B                  id_Chopper:		equ ((ptr_Chopper-Obj_Index)/4)+1
0000E3D6 =0000002C                  id_Jaws:		equ ((ptr_Jaws-Obj_Index)/4)+1
0000E3D6 =0000002D                  id_Burrobot:		equ ((ptr_Burrobot-Obj_Index)/4)+1
0000E3D6 =0000002E                  id_PowerUp:		equ ((ptr_PowerUp-Obj_Index)/4)+1
0000E3D6 =0000002F                  id_LargeGrass:		equ ((ptr_LargeGrass-Obj_Index)/4)+1
0000E3D6 =00000030                  id_GlassBlock:		equ ((ptr_GlassBlock-Obj_Index)/4)+1		; $30
0000E3D6 =00000031                  id_ChainStomp:		equ ((ptr_ChainStomp-Obj_Index)/4)+1
0000E3D6 =00000032                  id_Button:		equ ((ptr_Button-Obj_Index)/4)+1
0000E3D6 =00000033                  id_PushBlock:		equ ((ptr_PushBlock-Obj_Index)/4)+1
0000E3D6 =00000034                  id_TitleCard:		equ ((ptr_TitleCard-Obj_Index)/4)+1
0000E3D6 =00000035                  id_GrassFire:		equ ((ptr_GrassFire-Obj_Index)/4)+1
0000E3D6 =00000036                  id_Spikes:		equ ((ptr_Spikes-Obj_Index)/4)+1
0000E3D6 =00000037                  id_RingLoss:		equ ((ptr_RingLoss-Obj_Index)/4)+1
0000E3D6 =00000038                  id_ShieldItem:		equ ((ptr_ShieldItem-Obj_Index)/4)+1		; $38
0000E3D6 =00000039                  id_GameOverCard:	equ ((ptr_GameOverCard-Obj_Index)/4)+1
0000E3D6 =0000003A                  id_GotThroughCard:	equ ((ptr_GotThroughCard-Obj_Index)/4)+1
0000E3D6 =0000003B                  id_PurpleRock:		equ ((ptr_PurpleRock-Obj_Index)/4)+1
0000E3D6 =0000003C                  id_SmashWall:		equ ((ptr_SmashWall-Obj_Index)/4)+1
0000E3D6 =0000003D                  id_BossGreenHill:	equ ((ptr_BossGreenHill-Obj_Index)/4)+1
0000E3D6 =0000003E                  id_Prison:		equ ((ptr_Prison-Obj_Index)/4)+1
0000E3D6 =0000003F                  id_ExplosionBomb:	equ ((ptr_ExplosionBomb-Obj_Index)/4)+1
0000E3D6 =00000040                  id_MotoBug:		equ ((ptr_MotoBug-Obj_Index)/4)+1		; $40
0000E3D6 =00000041                  id_Springs:		equ ((ptr_Springs-Obj_Index)/4)+1
0000E3D6 =00000042                  id_Newtron:		equ ((ptr_Newtron-Obj_Index)/4)+1
0000E3D6 =00000043                  id_Roller:		equ ((ptr_Roller-Obj_Index)/4)+1
0000E3D6 =00000044                  id_EdgeWalls:		equ ((ptr_EdgeWalls-Obj_Index)/4)+1
0000E3D6 =00000045                  id_SideStomp:		equ ((ptr_SideStomp-Obj_Index)/4)+1
0000E3D6 =00000046                  id_MarbleBrick:		equ ((ptr_MarbleBrick-Obj_Index)/4)+1
0000E3D6 =00000047                  id_Bumper:		equ ((ptr_Bumper-Obj_Index)/4)+1
0000E3D6 =00000048                  id_BossBall:		equ ((ptr_BossBall-Obj_Index)/4)+1		; $48
0000E3D6 =00000049                  id_WaterSound:		equ ((ptr_WaterSound-Obj_Index)/4)+1
0000E3D6 =0000004A                  id_VanishSonic:		equ ((ptr_VanishSonic-Obj_Index)/4)+1
0000E3D6 =0000004B                  id_GiantRing:		equ ((ptr_GiantRing-Obj_Index)/4)+1
0000E3D6 =0000004C                  id_GeyserMaker:		equ ((ptr_GeyserMaker-Obj_Index)/4)+1
0000E3D6 =0000004D                  id_LavaGeyser:		equ ((ptr_LavaGeyser-Obj_Index)/4)+1
0000E3D6 =0000004E                  id_LavaWall:		equ ((ptr_LavaWall-Obj_Index)/4)+1
0000E3D6 =0000004F                  id_Obj4F:		equ ((ptr_Obj4F-Obj_Index)/4)+1
0000E3D6 =00000050                  id_Yadrin:		equ ((ptr_Yadrin-Obj_Index)/4)+1		; $50
0000E3D6 =00000051                  id_SmashBlock:		equ ((ptr_SmashBlock-Obj_Index)/4)+1
0000E3D6 =00000052                  id_MovingBlock:		equ ((ptr_MovingBlock-Obj_Index)/4)+1
0000E3D6 =00000053                  id_CollapseFloor:	equ ((ptr_CollapseFloor-Obj_Index)/4)+1
0000E3D6 =00000054                  id_LavaTag:		equ ((ptr_LavaTag-Obj_Index)/4)+1
0000E3D6 =00000055                  id_Basaran:		equ ((ptr_Basaran-Obj_Index)/4)+1
0000E3D6 =00000056                  id_FloatingBlock:	equ ((ptr_FloatingBlock-Obj_Index)/4)+1
0000E3D6 =00000057                  id_SpikeBall:		equ ((ptr_SpikeBall-Obj_Index)/4)+1
0000E3D6 =00000058                  id_BigSpikeBall:	equ ((ptr_BigSpikeBall-Obj_Index)/4)+1		; $58
0000E3D6 =00000059                  id_Elevator:		equ ((ptr_Elevator-Obj_Index)/4)+1
0000E3D6 =0000005A                  id_CirclingPlatform:	equ ((ptr_CirclingPlatform-Obj_Index)/4)+1
0000E3D6 =0000005B                  id_Staircase:		equ ((ptr_Staircase-Obj_Index)/4)+1
0000E3D6 =0000005C                  id_Pylon:		equ ((ptr_Pylon-Obj_Index)/4)+1
0000E3D6 =0000005D                  id_Fan:			equ ((ptr_Fan-Obj_Index)/4)+1
0000E3D6 =0000005E                  id_Seesaw:		equ ((ptr_Seesaw-Obj_Index)/4)+1
0000E3D6 =0000005F                  id_Bomb:		equ ((ptr_Bomb-Obj_Index)/4)+1
0000E3D6 =00000060                  id_Orbinaut:		equ ((ptr_Orbinaut-Obj_Index)/4)+1		; $60
0000E3D6 =00000061                  id_LabyrinthBlock:	equ ((ptr_LabyrinthBlock-Obj_Index)/4)+1
0000E3D6 =00000062                  id_Gargoyle:		equ ((ptr_Gargoyle-Obj_Index)/4)+1
0000E3D6 =00000063                  id_LabyrinthConvey:	equ ((ptr_LabyrinthConvey-Obj_Index)/4)+1
0000E3D6 =00000064                  id_Bubble:		equ ((ptr_Bubble-Obj_Index)/4)+1
0000E3D6 =00000065                  id_Waterfall:		equ ((ptr_Waterfall-Obj_Index)/4)+1
0000E3D6 =00000066                  id_Junction:		equ ((ptr_Junction-Obj_Index)/4)+1
0000E3D6 =00000067                  id_RunningDisc:		equ ((ptr_RunningDisc-Obj_Index)/4)+1
0000E3D6 =00000068                  id_Conveyor:		equ ((ptr_Conveyor-Obj_Index)/4)+1		; $68
0000E3D6 =00000069                  id_SpinPlatform:	equ ((ptr_SpinPlatform-Obj_Index)/4)+1
0000E3D6 =0000006A                  id_Saws:		equ ((ptr_Saws-Obj_Index)/4)+1
0000E3D6 =0000006B                  id_ScrapStomp:		equ ((ptr_ScrapStomp-Obj_Index)/4)+1
0000E3D6 =0000006C                  id_VanishPlatform:	equ ((ptr_VanishPlatform-Obj_Index)/4)+1
0000E3D6 =0000006D                  id_Flamethrower:	equ ((ptr_Flamethrower-Obj_Index)/4)+1
0000E3D6 =0000006E                  id_Electro:		equ ((ptr_Electro-Obj_Index)/4)+1
0000E3D6 =0000006F                  id_SpinConvey:		equ ((ptr_SpinConvey-Obj_Index)/4)+1
0000E3D6 =00000070                  id_Girder:		equ ((ptr_Girder-Obj_Index)/4)+1		; $70
0000E3D6 =00000071                  id_Invisibarrier:	equ ((ptr_Invisibarrier-Obj_Index)/4)+1
0000E3D6 =00000072                  id_Teleport:		equ ((ptr_Teleport-Obj_Index)/4)+1
0000E3D6 =00000073                  id_BossMarble:		equ ((ptr_BossMarble-Obj_Index)/4)+1
0000E3D6 =00000074                  id_BossFire:		equ ((ptr_BossFire-Obj_Index)/4)+1
0000E3D6 =00000075                  id_BossSpringYard:	equ ((ptr_BossSpringYard-Obj_Index)/4)+1
0000E3D6 =00000076                  id_BossBlock:		equ ((ptr_BossBlock-Obj_Index)/4)+1
0000E3D6 =00000077                  id_BossLabyrinth:	equ ((ptr_BossLabyrinth-Obj_Index)/4)+1
0000E3D6 =00000078                  id_Caterkiller:		equ ((ptr_Caterkiller-Obj_Index)/4)+1		; $78
0000E3D6 =00000079                  id_Lamppost:		equ ((ptr_Lamppost-Obj_Index)/4)+1
0000E3D6 =0000007A                  id_BossStarLight:	equ ((ptr_BossStarLight-Obj_Index)/4)+1
0000E3D6 =0000007B                  id_BossSpikeball:	equ ((ptr_BossSpikeball-Obj_Index)/4)+1
0000E3D6 =0000007C                  id_RingFlash:		equ ((ptr_RingFlash-Obj_Index)/4)+1
0000E3D6 =0000007D                  id_HiddenBonus:		equ ((ptr_HiddenBonus-Obj_Index)/4)+1
0000E3D6 =0000007E                  id_SSResult:		equ ((ptr_SSResult-Obj_Index)/4)+1
0000E3D6 =0000007F                  id_SSRChaos:		equ ((ptr_SSRChaos-Obj_Index)/4)+1
0000E3D6 =00000080                  id_ContScrItem:		equ ((ptr_ContScrItem-Obj_Index)/4)+1		; $80
0000E3D6 =00000081                  id_ContSonic:		equ ((ptr_ContSonic-Obj_Index)/4)+1
0000E3D6 =00000082                  id_ScrapEggman:		equ ((ptr_ScrapEggman-Obj_Index)/4)+1
0000E3D6 =00000083                  id_FalseFloor:		equ ((ptr_FalseFloor-Obj_Index)/4)+1
0000E3D6 =00000084                  id_EggmanCylinder:	equ ((ptr_EggmanCylinder-Obj_Index)/4)+1
0000E3D6 =00000085                  id_BossFinal:		equ ((ptr_BossFinal-Obj_Index)/4)+1
0000E3D6 =00000086                  id_BossPlasma:		equ ((ptr_BossPlasma-Obj_Index)/4)+1
0000E3D6 =00000087                  id_EndSonic:		equ ((ptr_EndSonic-Obj_Index)/4)+1
0000E3D6 =00000088                  id_EndChaos:		equ ((ptr_EndChaos-Obj_Index)/4)+1		; $88
0000E3D6 =00000089                  id_EndSTH:		equ ((ptr_EndSTH-Obj_Index)/4)+1
0000E3D6 =0000008A                  id_CreditsText:		equ ((ptr_CreditsText-Obj_Index)/4)+1
0000E3D6 =0000008B                  id_EndEggman:		equ ((ptr_EndEggman-Obj_Index)/4)+1
0000E3D6 =0000008C                  id_TryChaos:		equ ((ptr_TryChaos-Obj_Index)/4)+1
0000E3D6 =0000008C                  id_TryChaos:		equ ((ptr_TryChaos-Obj_Index)/4)+1
0000E3D6                            
0000E3D6                            		include	"_incObj\sub ObjectFall.asm"
0000E3D6                            ; ---------------------------------------------------------------------------
0000E3D6                            ; Subroutine to	make an	object fall downwards, increasingly fast
0000E3D6                            ; ---------------------------------------------------------------------------
0000E3D6                            
0000E3D6                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000E3D6                            
0000E3D6                            
0000E3D6                            ObjectFall:
0000E3D6 2428 0008                  		move.l	obX(a0),d2
0000E3DA 2628 000C                  		move.l	obY(a0),d3
0000E3DE 3028 0010                  		move.w	obVelX(a0),d0
0000E3E2 48C0                       		ext.l	d0
0000E3E4 E180                       		asl.l	#8,d0
0000E3E6 D480                       		add.l	d0,d2
0000E3E8 3028 0012                  		move.w	obVelY(a0),d0
0000E3EC 0668 0038 0012             		addi.w	#$38,obVelY(a0)	; increase vertical speed
0000E3F2 48C0                       		ext.l	d0
0000E3F4 E180                       		asl.l	#8,d0
0000E3F6 D680                       		add.l	d0,d3
0000E3F8 2142 0008                  		move.l	d2,obX(a0)
0000E3FC 2143 000C                  		move.l	d3,obY(a0)
0000E400 4E75                       		rts	
0000E402                            
0000E402                            ; End of function ObjectFall
0000E402                            ; End of function ObjectFall
0000E402                            		include	"_incObj\sub SpeedToPos.asm"
0000E402                            ; ---------------------------------------------------------------------------
0000E402                            ; Subroutine translating object	speed to update	object position
0000E402                            ; ---------------------------------------------------------------------------
0000E402                            
0000E402                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000E402                            
0000E402                            
0000E402                            SpeedToPos:
0000E402 2428 0008                  		move.l	obX(a0),d2
0000E406 2628 000C                  		move.l	obY(a0),d3
0000E40A 3028 0010                  		move.w	obVelX(a0),d0	; load horizontal speed
0000E40E 48C0                       		ext.l	d0
0000E410 E180                       		asl.l	#8,d0		; multiply speed by $100
0000E412 D480                       		add.l	d0,d2		; add to x-axis	position
0000E414 3028 0012                  		move.w	obVelY(a0),d0	; load vertical	speed
0000E418 48C0                       		ext.l	d0
0000E41A E180                       		asl.l	#8,d0		; multiply by $100
0000E41C D680                       		add.l	d0,d3		; add to y-axis	position
0000E41E 2142 0008                  		move.l	d2,obX(a0)	; update x-axis	position
0000E422 2143 000C                  		move.l	d3,obY(a0)	; update y-axis	position
0000E426 4E75                       		rts	
0000E428                            
0000E428                            ; End of function SpeedToPos
0000E428                            ; End of function SpeedToPos
0000E428                            		include	"_incObj\sub DisplaySprite.asm"
0000E428                            ; ---------------------------------------------------------------------------
0000E428                            ; Subroutine to	display	a sprite/object, when a0 is the	object RAM
0000E428                            ; ---------------------------------------------------------------------------
0000E428                            
0000E428                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000E428                            
0000E428                            
0000E428                            DisplaySprite:
0000E428 43F8 AC00                  		lea	(v_spritequeue).w,a1
0000E42C 3028 0018                  		move.w	obPriority(a0),d0 ; get sprite priority
0000E430 E248                       		lsr.w	#1,d0
0000E432 0240 0380                  		andi.w	#$380,d0
0000E436 D2C0                       		adda.w	d0,a1		; jump to position in queue
0000E438 0C51 007E                  		cmpi.w	#$7E,(a1)	; is this part of the queue full?
0000E43C 6400                       		bcc.s	DSpr_Full	; if yes, branch
0000E43E 5451                       		addq.w	#2,(a1)		; increment sprite count
0000E440 D2D1                       		adda.w	(a1),a1		; jump to empty position
0000E442 3288                       		move.w	a0,(a1)		; insert RAM address for object
0000E444                            
0000E444                            	DSpr_Full:
0000E444 4E75                       		rts	
0000E446                            
0000E446                            ; End of function DisplaySprite
0000E446                            
0000E446                            
0000E446                            ; ---------------------------------------------------------------------------
0000E446                            ; Subroutine to	display	a 2nd sprite/object, when a1 is	the object RAM
0000E446                            ; ---------------------------------------------------------------------------
0000E446                            
0000E446                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000E446                            
0000E446                            
0000E446                            DisplaySprite1:
0000E446 45F8 AC00                  		lea	(v_spritequeue).w,a2
0000E44A 3029 0018                  		move.w	obPriority(a1),d0
0000E44E E248                       		lsr.w	#1,d0
0000E450 0240 0380                  		andi.w	#$380,d0
0000E454 D4C0                       		adda.w	d0,a2
0000E456 0C52 007E                  		cmpi.w	#$7E,(a2)
0000E45A 6400                       		bcc.s	DSpr1_Full
0000E45C 5452                       		addq.w	#2,(a2)
0000E45E D4D2                       		adda.w	(a2),a2
0000E460 3489                       		move.w	a1,(a2)
0000E462                            
0000E462                            	DSpr1_Full:
0000E462 4E75                       		rts	
0000E464                            
0000E464                            ; End of function DisplaySprite1
0000E464                            ; End of function DisplaySprite1
0000E464                            		include	"_incObj\sub DeleteObject.asm"
0000E464                            ; ---------------------------------------------------------------------------
0000E464                            ; Subroutine to	delete an object
0000E464                            ; ---------------------------------------------------------------------------
0000E464                            
0000E464                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000E464                            
0000E464                            
0000E464                            DeleteObject:
0000E464 2248                       		movea.l	a0,a1		; move object RAM address to (a1)
0000E466                            
0000E466                            DeleteChild:				; child objects are already in (a1)
0000E466 7200                       		moveq	#0,d1
0000E468 700F                       		moveq	#$F,d0
0000E46A                            
0000E46A                            	DelObj_Loop:
0000E46A 22C1                       		move.l	d1,(a1)+	; clear	the object RAM
0000E46C 51C8 FFFC                  		dbf	d0,DelObj_Loop	; repeat for length of object RAM
0000E470 4E75                       		rts	
0000E472                            
0000E472                            ; End of function DeleteObject
0000E472                            ; End of function DeleteObject
0000E472                            
0000E472                            ; ===========================================================================
0000E472 0000 0000                  BldSpr_ScrPos:	dc.l 0				; blank
0000E476 00FF F700                  		dc.l v_screenposx&$FFFFFF	; main screen x-position
0000E47A 00FF F708                  		dc.l v_bgscreenposx&$FFFFFF	; background x-position	1
0000E47E 00FF F718                  		dc.l v_bg3screenposx&$FFFFFF	; background x-position	2
0000E482                            ; ---------------------------------------------------------------------------
0000E482                            ; Subroutine to	convert	mappings (etc) to proper Megadrive sprites
0000E482                            ; ---------------------------------------------------------------------------
0000E482                            
0000E482                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000E482                            
0000E482                            
0000E482                            BuildSprites:
0000E482 45F8 F800                  		lea	(v_spritetablebuffer).w,a2 ; set address for sprite table
0000E486 7A00                       		moveq	#0,d5
0000E488 49F8 AC00                  		lea	(v_spritequeue).w,a4
0000E48C 7E07                       		moveq	#7,d7
0000E48E                            
0000E48E                            	@priorityLoop:
0000E48E 4A54                       		tst.w	(a4)	; are there objects left to draw?
0000E490 6700 0000                  		beq.w	@nextPriority	; if not, branch
0000E494 7C02                       		moveq	#2,d6
0000E496                            
0000E496                            	@objectLoop:
0000E496 3074 6000                  		movea.w	(a4,d6.w),a0	; load object ID
0000E49A 4A10                       		tst.b	(a0)		; if null, branch
0000E49C 6700 0000                  		beq.w	@skipObject
0000E4A0 08A8 0007 0001             		bclr	#7,obRender(a0)		; set as not visible
0000E4A6                            
0000E4A6 1028 0001                  		move.b	obRender(a0),d0
0000E4AA 1800                       		move.b	d0,d4
0000E4AC 0240 000C                  		andi.w	#$C,d0		; get drawing coordinates
0000E4B0 6700                       		beq.s	@screenCoords	; branch if 0 (screen coordinates)
0000E4B2 227B 00BE                  		movea.l	BldSpr_ScrPos(pc,d0.w),a1
0000E4B6                            	; check object bounds
0000E4B6 7000                       		moveq	#0,d0
0000E4B8 1028 0019                  		move.b	obActWid(a0),d0
0000E4BC 3628 0008                  		move.w	obX(a0),d3
0000E4C0 9651                       		sub.w	(a1),d3
0000E4C2 3203                       		move.w	d3,d1
0000E4C4 D240                       		add.w	d0,d1
0000E4C6 6B00 0000                  		bmi.w	@skipObject	; left edge out of bounds
0000E4CA 3203                       		move.w	d3,d1
0000E4CC 9240                       		sub.w	d0,d1
0000E4CE 0C41 0140                  		cmpi.w	#320,d1
0000E4D2 6C00                       		bge.s	@skipObject	; right edge out of bounds
0000E4D4 0643 0080                  		addi.w	#128,d3		; VDP sprites start at 128px
0000E4D8                            
0000E4D8 0804 0004                  		btst	#4,d4		; is assume height flag on?
0000E4DC 6700                       		beq.s	@assumeHeight	; if yes, branch
0000E4DE 7000                       		moveq	#0,d0
0000E4E0 1028 0016                  		move.b	obHeight(a0),d0
0000E4E4 3428 000C                  		move.w	obY(a0),d2
0000E4E8 9469 0004                  		sub.w	4(a1),d2
0000E4EC 3202                       		move.w	d2,d1
0000E4EE D240                       		add.w	d0,d1
0000E4F0 6B00                       		bmi.s	@skipObject	; top edge out of bounds
0000E4F2 3202                       		move.w	d2,d1
0000E4F4 9240                       		sub.w	d0,d1
0000E4F6 0C41 00E0                  		cmpi.w	#224,d1
0000E4FA 6C00                       		bge.s	@skipObject
0000E4FC 0642 0080                  		addi.w	#128,d2		; VDP sprites start at 128px
0000E500 6000                       		bra.s	@drawObject
0000E502                            ; ===========================================================================
0000E502                            
0000E502                            	@screenCoords:
0000E502 3428 000A                  		move.w	$A(a0),d2	; special variable for screen Y
0000E506 3628 0008                  		move.w	obX(a0),d3
0000E50A 6000                       		bra.s	@drawObject
0000E50C                            ; ===========================================================================
0000E50C                            
0000E50C                            	@assumeHeight:
0000E50C 3428 000C                  		move.w	obY(a0),d2
0000E510 9469 0004                  		sub.w	obMap(a1),d2
0000E514 0642 0080                  		addi.w	#$80,d2
0000E518 0C42 0060                  		cmpi.w	#$60,d2
0000E51C 6500                       		blo.s	@skipObject
0000E51E 0C42 0180                  		cmpi.w	#$180,d2
0000E522 6400                       		bhs.s	@skipObject
0000E524                            
0000E524                            	@drawObject:
0000E524 2268 0004                  		movea.l	obMap(a0),a1
0000E528 7200                       		moveq	#0,d1
0000E52A 0804 0005                  		btst	#5,d4		; is static mappings flag on?
0000E52E 6600                       		bne.s	@drawFrame	; if yes, branch
0000E530 1228 001A                  		move.b	obFrame(a0),d1
0000E534 D201                       		add.b	d1,d1
0000E536 D2F1 1000                  		adda.w	(a1,d1.w),a1	; get mappings frame address
0000E53A 1219                       		move.b	(a1)+,d1	; number of sprite pieces
0000E53C 5301                       		subq.b	#1,d1
0000E53E 6B00                       		bmi.s	@setVisible
0000E540                            
0000E540                            	@drawFrame:
0000E540 6100 0000                  		bsr.w	BuildSpr_Draw	; write data from sprite pieces to buffer
0000E544                            
0000E544                            	@setVisible:
0000E544 08E8 0007 0001             		bset	#7,obRender(a0)		; set object as visible
0000E54A                            
0000E54A                            	@skipObject:
0000E54A 5446                       		addq.w	#2,d6
0000E54C 5554                       		subq.w	#2,(a4)			; number of objects left
0000E54E 6600 FF46                  		bne.w	@objectLoop
0000E552                            
0000E552                            	@nextPriority:
0000E552 49EC 0080                  		lea	$80(a4),a4
0000E556 51CF FF36                  		dbf	d7,@priorityLoop
0000E55A 11C5 F62C                  		move.b	d5,(v_spritecount).w
0000E55E 0C05 0050                  		cmpi.b	#$50,d5
0000E562 6700                       		beq.s	@spriteLimit
0000E564 24BC 0000 0000             		move.l	#0,(a2)
0000E56A 4E75                       		rts	
0000E56C                            ; ===========================================================================
0000E56C                            
0000E56C                            	@spriteLimit:
0000E56C 157C 0000 FFFB             		move.b	#0,-5(a2)	; set last sprite link
0000E572 4E75                       		rts	
0000E574                            ; End of function BuildSprites
0000E574                            
0000E574                            
0000E574                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000E574                            
0000E574                            
0000E574                            BuildSpr_Draw:
0000E574 3668 0002                  		movea.w	obGfx(a0),a3
0000E578 0804 0000                  		btst	#0,d4
0000E57C 6600                       		bne.s	BuildSpr_FlipX
0000E57E 0804 0001                  		btst	#1,d4
0000E582 6600 0000                  		bne.w	BuildSpr_FlipY
0000E586                            ; End of function BuildSpr_Draw
0000E586                            
0000E586                            
0000E586                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000E586                            
0000E586                            
0000E586                            BuildSpr_Normal:
0000E586 0C05 0050                  		cmpi.b	#$50,d5		; check sprite limit
0000E58A 6700                       		beq.s	@return
0000E58C 1019                       		move.b	(a1)+,d0	; get y-offset
0000E58E 4880                       		ext.w	d0
0000E590 D042                       		add.w	d2,d0		; add y-position
0000E592 34C0                       		move.w	d0,(a2)+	; write to buffer
0000E594 14D9                       		move.b	(a1)+,(a2)+	; write sprite size
0000E596 5205                       		addq.b	#1,d5		; increase sprite counter
0000E598 14C5                       		move.b	d5,(a2)+	; set as sprite link
0000E59A 1019                       		move.b	(a1)+,d0	; get art tile
0000E59C E148                       		lsl.w	#8,d0
0000E59E 1019                       		move.b	(a1)+,d0
0000E5A0 D04B                       		add.w	a3,d0		; add art tile offset
0000E5A2 34C0                       		move.w	d0,(a2)+	; write to buffer
0000E5A4 1019                       		move.b	(a1)+,d0	; get x-offset
0000E5A6 4880                       		ext.w	d0
0000E5A8 D043                       		add.w	d3,d0		; add x-position
0000E5AA 0240 01FF                  		andi.w	#$1FF,d0	; keep within 512px
0000E5AE 6600                       		bne.s	@writeX
0000E5B0 5240                       		addq.w	#1,d0
0000E5B2                            
0000E5B2                            	@writeX:
0000E5B2 34C0                       		move.w	d0,(a2)+	; write to buffer
0000E5B4 51C9 FFD0                  		dbf	d1,BuildSpr_Normal	; process next sprite piece
0000E5B8                            
0000E5B8                            	@return:
0000E5B8 4E75                       		rts	
0000E5BA                            ; End of function BuildSpr_Normal
0000E5BA                            
0000E5BA                            ; ===========================================================================
0000E5BA                            
0000E5BA                            BuildSpr_FlipX:
0000E5BA 0804 0001                  		btst	#1,d4		; is object also y-flipped?
0000E5BE 6600 0000                  		bne.w	BuildSpr_FlipXY	; if yes, branch
0000E5C2                            
0000E5C2                            	@loop:
0000E5C2 0C05 0050                  		cmpi.b	#$50,d5		; check sprite limit
0000E5C6 6700                       		beq.s	@return
0000E5C8 1019                       		move.b	(a1)+,d0	; y position
0000E5CA 4880                       		ext.w	d0
0000E5CC D042                       		add.w	d2,d0
0000E5CE 34C0                       		move.w	d0,(a2)+
0000E5D0 1819                       		move.b	(a1)+,d4	; size
0000E5D2 14C4                       		move.b	d4,(a2)+	
0000E5D4 5205                       		addq.b	#1,d5		; link
0000E5D6 14C5                       		move.b	d5,(a2)+
0000E5D8 1019                       		move.b	(a1)+,d0	; art tile
0000E5DA E148                       		lsl.w	#8,d0
0000E5DC 1019                       		move.b	(a1)+,d0	
0000E5DE D04B                       		add.w	a3,d0
0000E5E0 0A40 0800                  		eori.w	#$800,d0	; toggle flip-x in VDP
0000E5E4 34C0                       		move.w	d0,(a2)+	; write to buffer
0000E5E6 1019                       		move.b	(a1)+,d0	; get x-offset
0000E5E8 4880                       		ext.w	d0
0000E5EA 4440                       		neg.w	d0			; negate it
0000E5EC D804                       		add.b	d4,d4		; calculate flipped position by size
0000E5EE 0244 0018                  		andi.w	#$18,d4
0000E5F2 5044                       		addq.w	#8,d4
0000E5F4 9044                       		sub.w	d4,d0
0000E5F6 D043                       		add.w	d3,d0
0000E5F8 0240 01FF                  		andi.w	#$1FF,d0	; keep within 512px
0000E5FC 6600                       		bne.s	@writeX
0000E5FE 5240                       		addq.w	#1,d0
0000E600                            
0000E600                            	@writeX:
0000E600 34C0                       		move.w	d0,(a2)+	; write to buffer
0000E602 51C9 FFBE                  		dbf	d1,@loop		; process next sprite piece
0000E606                            
0000E606                            	@return:
0000E606 4E75                       		rts	
0000E608                            ; ===========================================================================
0000E608                            
0000E608                            BuildSpr_FlipY:
0000E608 0C05 0050                  		cmpi.b	#$50,d5		; check sprite limit
0000E60C 6700                       		beq.s	@return
0000E60E 1019                       		move.b	(a1)+,d0	; get y-offset
0000E610 1811                       		move.b	(a1),d4		; get size
0000E612 4880                       		ext.w	d0
0000E614 4440                       		neg.w	d0		; negate y-offset
0000E616 E70C                       		lsl.b	#3,d4	; calculate flip offset
0000E618 0244 0018                  		andi.w	#$18,d4
0000E61C 5044                       		addq.w	#8,d4
0000E61E 9044                       		sub.w	d4,d0
0000E620 D042                       		add.w	d2,d0	; add y-position
0000E622 34C0                       		move.w	d0,(a2)+	; write to buffer
0000E624 14D9                       		move.b	(a1)+,(a2)+	; size
0000E626 5205                       		addq.b	#1,d5
0000E628 14C5                       		move.b	d5,(a2)+	; link
0000E62A 1019                       		move.b	(a1)+,d0	; art tile
0000E62C E148                       		lsl.w	#8,d0
0000E62E 1019                       		move.b	(a1)+,d0
0000E630 D04B                       		add.w	a3,d0
0000E632 0A40 1000                  		eori.w	#$1000,d0	; toggle flip-y in VDP
0000E636 34C0                       		move.w	d0,(a2)+
0000E638 1019                       		move.b	(a1)+,d0	; x-position
0000E63A 4880                       		ext.w	d0
0000E63C D043                       		add.w	d3,d0
0000E63E 0240 01FF                  		andi.w	#$1FF,d0
0000E642 6600                       		bne.s	@writeX
0000E644 5240                       		addq.w	#1,d0
0000E646                            
0000E646                            	@writeX:
0000E646 34C0                       		move.w	d0,(a2)+	; write to buffer
0000E648 51C9 FFBE                  		dbf	d1,BuildSpr_FlipY	; process next sprite piece
0000E64C                            
0000E64C                            	@return:
0000E64C 4E75                       		rts	
0000E64E                            ; ===========================================================================
0000E64E                            
0000E64E                            BuildSpr_FlipXY:
0000E64E 0C05 0050                  		cmpi.b	#$50,d5		; check sprite limit
0000E652 6700                       		beq.s	@return
0000E654 1019                       		move.b	(a1)+,d0	; calculated flipped y
0000E656 1811                       		move.b	(a1),d4
0000E658 4880                       		ext.w	d0
0000E65A 4440                       		neg.w	d0
0000E65C E70C                       		lsl.b	#3,d4
0000E65E 0244 0018                  		andi.w	#$18,d4
0000E662 5044                       		addq.w	#8,d4
0000E664 9044                       		sub.w	d4,d0
0000E666 D042                       		add.w	d2,d0
0000E668 34C0                       		move.w	d0,(a2)+	; write to buffer
0000E66A 1819                       		move.b	(a1)+,d4	; size
0000E66C 14C4                       		move.b	d4,(a2)+	; link
0000E66E 5205                       		addq.b	#1,d5
0000E670 14C5                       		move.b	d5,(a2)+	; art tile
0000E672 1019                       		move.b	(a1)+,d0
0000E674 E148                       		lsl.w	#8,d0
0000E676 1019                       		move.b	(a1)+,d0
0000E678 D04B                       		add.w	a3,d0
0000E67A 0A40 1800                  		eori.w	#$1800,d0	; toggle flip-x/y in VDP
0000E67E 34C0                       		move.w	d0,(a2)+
0000E680 1019                       		move.b	(a1)+,d0	; calculate flipped x
0000E682 4880                       		ext.w	d0
0000E684 4440                       		neg.w	d0
0000E686 D804                       		add.b	d4,d4
0000E688 0244 0018                  		andi.w	#$18,d4
0000E68C 5044                       		addq.w	#8,d4
0000E68E 9044                       		sub.w	d4,d0
0000E690 D043                       		add.w	d3,d0
0000E692 0240 01FF                  		andi.w	#$1FF,d0
0000E696 6600                       		bne.s	@writeX
0000E698 5240                       		addq.w	#1,d0
0000E69A                            
0000E69A                            	@writeX:
0000E69A 34C0                       		move.w	d0,(a2)+	; write to buffer
0000E69C 51C9 FFB0                  		dbf	d1,BuildSpr_FlipXY	; process next sprite piece
0000E6A0                            
0000E6A0                            	@return:
0000E6A0 4E75                       		rts	
0000E6A2                            
0000E6A2                            		include	"_incObj\sub ChkObjectVisible.asm"
0000E6A2                            ; ---------------------------------------------------------------------------
0000E6A2                            ; Subroutine to	check if an object is off screen
0000E6A2                            
0000E6A2                            ; output:
0000E6A2                            ;	d0 = flag set if object is off screen
0000E6A2                            ; ---------------------------------------------------------------------------
0000E6A2                            
0000E6A2                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000E6A2                            
0000E6A2                            
0000E6A2                            ChkObjectVisible:
0000E6A2 3028 0008                  		move.w	obX(a0),d0	; get object x-position
0000E6A6 9078 F700                  		sub.w	(v_screenposx).w,d0 ; subtract screen x-position
0000E6AA 6B00                       		bmi.s	@offscreen
0000E6AC 0C40 0140                  		cmpi.w	#320,d0		; is object on the screen?
0000E6B0 6C00                       		bge.s	@offscreen	; if not, branch
0000E6B2                            
0000E6B2 3228 000C                  		move.w	obY(a0),d1	; get object y-position
0000E6B6 9278 F704                  		sub.w	(v_screenposy).w,d1 ; subtract screen y-position
0000E6BA 6B00                       		bmi.s	@offscreen
0000E6BC 0C41 00E0                  		cmpi.w	#224,d1		; is object on the screen?
0000E6C0 6C00                       		bge.s	@offscreen	; if not, branch
0000E6C2                            
0000E6C2 7000                       		moveq	#0,d0		; set flag to 0
0000E6C4 4E75                       		rts	
0000E6C6                            
0000E6C6                            	@offscreen:
0000E6C6 7001                       		moveq	#1,d0		; set flag to 1
0000E6C8 4E75                       		rts	
0000E6CA                            ; End of function ChkObjectVisible
0000E6CA                            
0000E6CA                            ; ---------------------------------------------------------------------------
0000E6CA                            ; Subroutine to	check if an object is off screen
0000E6CA                            ; More precise than above subroutine, taking width into account
0000E6CA                            
0000E6CA                            ; output:
0000E6CA                            ;	d0 = flag set if object is off screen
0000E6CA                            ; ---------------------------------------------------------------------------
0000E6CA                            
0000E6CA                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000E6CA                            
0000E6CA                            
0000E6CA                            ChkPartiallyVisible:
0000E6CA 7200                       		moveq	#0,d1
0000E6CC 1228 0019                  		move.b	obActWid(a0),d1
0000E6D0 3028 0008                  		move.w	obX(a0),d0	; get object x-position
0000E6D4 9078 F700                  		sub.w	(v_screenposx).w,d0 ; subtract screen x-position
0000E6D8 D041                       		add.w	d1,d0		; add object width
0000E6DA 6B00                       		bmi.s	@offscreen2
0000E6DC D241                       		add.w	d1,d1
0000E6DE 9041                       		sub.w	d1,d0
0000E6E0 0C40 0140                  		cmpi.w	#320,d0
0000E6E4 6C00                       		bge.s	@offscreen2
0000E6E6                            
0000E6E6 3228 000C                  		move.w	obY(a0),d1
0000E6EA 9278 F704                  		sub.w	(v_screenposy).w,d1
0000E6EE 6B00                       		bmi.s	@offscreen2
0000E6F0 0C41 00E0                  		cmpi.w	#224,d1
0000E6F4 6C00                       		bge.s	@offscreen2
0000E6F6                            
0000E6F6 7000                       		moveq	#0,d0
0000E6F8 4E75                       		rts	
0000E6FA                            
0000E6FA                            	@offscreen2:
0000E6FA 7001                       		moveq	#1,d0
0000E6FC 4E75                       		rts	
0000E6FE                            ; End of function ChkPartiallyVisible
0000E6FE                            ; End of function ChkPartiallyVisible
0000E6FE                            
0000E6FE                            ; ---------------------------------------------------------------------------
0000E6FE                            ; Subroutine to	load a level's objects
0000E6FE                            ; ---------------------------------------------------------------------------
0000E6FE                            
0000E6FE                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000E6FE                            
0000E6FE                            
0000E6FE                            ObjPosLoad:
0000E6FE 7000                       		moveq	#0,d0
0000E700 1038 F76C                  		move.b	(v_opl_routine).w,d0
0000E704 303B 0000                  		move.w	OPL_Index(pc,d0.w),d0
0000E708 4EFB 0000                  		jmp	OPL_Index(pc,d0.w)
0000E70C                            ; End of function ObjPosLoad
0000E70C                            
0000E70C                            ; ===========================================================================
0000E70C 0000                       OPL_Index:	dc.w OPL_Main-OPL_Index
0000E70E 0000                       		dc.w OPL_Next-OPL_Index
0000E710                            ; ===========================================================================
0000E710                            
0000E710                            OPL_Main:
0000E710 5438 F76C                  		addq.b	#2,(v_opl_routine).w
0000E714 3038 FE10                  		move.w	(v_zone).w,d0
0000E718 ED08                       		lsl.b	#6,d0
0000E71A E848                       		lsr.w	#4,d0
0000E71C 41F9 0000 0000             		lea	(ObjPos_Index).l,a0
0000E722 2248                       		movea.l	a0,a1
0000E724 D0F0 0000                  		adda.w	(a0,d0.w),a0
0000E728 21C8 F770                  		move.l	a0,(v_opl_data).w
0000E72C 21C8 F774                  		move.l	a0,(v_opl_data+4).w
0000E730 D2F1 0002                  		adda.w	2(a1,d0.w),a1
0000E734 21C9 F778                  		move.l	a1,(v_opl_data+8).w
0000E738 21C9 F77C                  		move.l	a1,(v_opl_data+$C).w
0000E73C 45F8 FC00                  		lea	(v_objstate).w,a2
0000E740 34FC 0101                  		move.w	#$101,(a2)+
0000E744 303C 005E                  		move.w	#$5E,d0
0000E748                            
0000E748                            OPL_ClrList:
0000E748 429A                       		clr.l	(a2)+
0000E74A 51C8 FFFC                  		dbf	d0,OPL_ClrList	; clear	pre-destroyed object list
0000E74E                            
0000E74E 45F8 FC00                  		lea	(v_objstate).w,a2
0000E752 7400                       		moveq	#0,d2
0000E754 3C38 F700                  		move.w	(v_screenposx).w,d6
0000E758 0446 0080                  		subi.w	#$80,d6
0000E75C 6400                       		bhs.s	loc_D93C
0000E75E 7C00                       		moveq	#0,d6
0000E760                            
0000E760                            loc_D93C:
0000E760 0246 FF80                  		andi.w	#$FF80,d6
0000E764 2078 F770                  		movea.l	(v_opl_data).w,a0
0000E768                            
0000E768                            loc_D944:
0000E768 BC50                       		cmp.w	(a0),d6
0000E76A 6300                       		bls.s	loc_D956
0000E76C 4A28 0004                  		tst.b	4(a0)
0000E770 6A00                       		bpl.s	loc_D952
0000E772 1412                       		move.b	(a2),d2
0000E774 5212                       		addq.b	#1,(a2)
0000E776                            
0000E776                            loc_D952:
0000E776 5C48                       		addq.w	#6,a0
0000E778 60EE                       		bra.s	loc_D944
0000E77A                            ; ===========================================================================
0000E77A                            
0000E77A                            loc_D956:
0000E77A 21C8 F770                  		move.l	a0,(v_opl_data).w
0000E77E 2078 F774                  		movea.l	(v_opl_data+4).w,a0
0000E782 0446 0080                  		subi.w	#$80,d6
0000E786 6500                       		blo.s	loc_D976
0000E788                            
0000E788                            loc_D964:
0000E788 BC50                       		cmp.w	(a0),d6
0000E78A 6300                       		bls.s	loc_D976
0000E78C 4A28 0004                  		tst.b	4(a0)
0000E790 6A00                       		bpl.s	loc_D972
0000E792 522A 0001                  		addq.b	#1,1(a2)
0000E796                            
0000E796                            loc_D972:
0000E796 5C48                       		addq.w	#6,a0
0000E798 60EE                       		bra.s	loc_D964
0000E79A                            ; ===========================================================================
0000E79A                            
0000E79A                            loc_D976:
0000E79A 21C8 F774                  		move.l	a0,(v_opl_data+4).w
0000E79E 31FC FFFF F76E             		move.w	#-1,(v_opl_screen).w
0000E7A4                            
0000E7A4                            OPL_Next:
0000E7A4 45F8 FC00                  		lea	(v_objstate).w,a2
0000E7A8 7400                       		moveq	#0,d2
0000E7AA 3C38 F700                  		move.w	(v_screenposx).w,d6
0000E7AE 0246 FF80                  		andi.w	#$FF80,d6
0000E7B2 BC78 F76E                  		cmp.w	(v_opl_screen).w,d6
0000E7B6 6700 0000                  		beq.w	locret_DA3A
0000E7BA 6C00                       		bge.s	loc_D9F6
0000E7BC 31C6 F76E                  		move.w	d6,(v_opl_screen).w
0000E7C0 2078 F774                  		movea.l	(v_opl_data+4).w,a0
0000E7C4 0446 0080                  		subi.w	#$80,d6
0000E7C8 6500                       		blo.s	loc_D9D2
0000E7CA                            
0000E7CA                            loc_D9A6:
0000E7CA BC68 FFFA                  		cmp.w	-6(a0),d6
0000E7CE 6C00                       		bge.s	loc_D9D2
0000E7D0 5D48                       		subq.w	#6,a0
0000E7D2 4A28 0004                  		tst.b	4(a0)
0000E7D6 6A00                       		bpl.s	loc_D9BC
0000E7D8 532A 0001                  		subq.b	#1,1(a2)
0000E7DC 142A 0001                  		move.b	1(a2),d2
0000E7E0                            
0000E7E0                            loc_D9BC:
0000E7E0 6100 0000                  		bsr.w	loc_DA3C
0000E7E4 6600                       		bne.s	loc_D9C6
0000E7E6 5D48                       		subq.w	#6,a0
0000E7E8 60E0                       		bra.s	loc_D9A6
0000E7EA                            ; ===========================================================================
0000E7EA                            
0000E7EA                            loc_D9C6:
0000E7EA 4A28 0004                  		tst.b	4(a0)
0000E7EE 6A00                       		bpl.s	loc_D9D0
0000E7F0 522A 0001                  		addq.b	#1,1(a2)
0000E7F4                            
0000E7F4                            loc_D9D0:
0000E7F4 5C48                       		addq.w	#6,a0
0000E7F6                            
0000E7F6                            loc_D9D2:
0000E7F6 21C8 F774                  		move.l	a0,(v_opl_data+4).w
0000E7FA 2078 F770                  		movea.l	(v_opl_data).w,a0
0000E7FE 0646 0300                  		addi.w	#$300,d6
0000E802                            
0000E802                            loc_D9DE:
0000E802 BC68 FFFA                  		cmp.w	-6(a0),d6
0000E806 6E00                       		bgt.s	loc_D9F0
0000E808 4A28 FFFE                  		tst.b	-2(a0)
0000E80C 6A00                       		bpl.s	loc_D9EC
0000E80E 5312                       		subq.b	#1,(a2)
0000E810                            
0000E810                            loc_D9EC:
0000E810 5D48                       		subq.w	#6,a0
0000E812 60EE                       		bra.s	loc_D9DE
0000E814                            ; ===========================================================================
0000E814                            
0000E814                            loc_D9F0:
0000E814 21C8 F770                  		move.l	a0,(v_opl_data).w
0000E818 4E75                       		rts	
0000E81A                            ; ===========================================================================
0000E81A                            
0000E81A                            loc_D9F6:
0000E81A 31C6 F76E                  		move.w	d6,(v_opl_screen).w
0000E81E 2078 F770                  		movea.l	(v_opl_data).w,a0
0000E822 0646 0280                  		addi.w	#$280,d6
0000E826                            
0000E826                            loc_DA02:
0000E826 BC50                       		cmp.w	(a0),d6
0000E828 6300                       		bls.s	loc_DA16
0000E82A 4A28 0004                  		tst.b	4(a0)
0000E82E 6A00                       		bpl.s	loc_DA10
0000E830 1412                       		move.b	(a2),d2
0000E832 5212                       		addq.b	#1,(a2)
0000E834                            
0000E834                            loc_DA10:
0000E834 6100 0000                  		bsr.w	loc_DA3C
0000E838 67EC                       		beq.s	loc_DA02
0000E83A                            
0000E83A                            loc_DA16:
0000E83A 21C8 F770                  		move.l	a0,(v_opl_data).w
0000E83E 2078 F774                  		movea.l	(v_opl_data+4).w,a0
0000E842 0446 0300                  		subi.w	#$300,d6
0000E846 6500                       		blo.s	loc_DA36
0000E848                            
0000E848                            loc_DA24:
0000E848 BC50                       		cmp.w	(a0),d6
0000E84A 6300                       		bls.s	loc_DA36
0000E84C 4A28 0004                  		tst.b	4(a0)
0000E850 6A00                       		bpl.s	loc_DA32
0000E852 522A 0001                  		addq.b	#1,1(a2)
0000E856                            
0000E856                            loc_DA32:
0000E856 5C48                       		addq.w	#6,a0
0000E858 60EE                       		bra.s	loc_DA24
0000E85A                            ; ===========================================================================
0000E85A                            
0000E85A                            loc_DA36:
0000E85A 21C8 F774                  		move.l	a0,(v_opl_data+4).w
0000E85E                            
0000E85E                            locret_DA3A:
0000E85E 4E75                       		rts	
0000E860                            ; ===========================================================================
0000E860                            
0000E860                            loc_DA3C:
0000E860 4A28 0004                  		tst.b	4(a0)
0000E864 6A00                       		bpl.s	OPL_MakeItem
0000E866 08F2 0007 2002             		bset	#7,2(a2,d2.w)
0000E86C 6700                       		beq.s	OPL_MakeItem
0000E86E 5C48                       		addq.w	#6,a0
0000E870 7000                       		moveq	#0,d0
0000E872 4E75                       		rts	
0000E874                            ; ===========================================================================
0000E874                            
0000E874                            OPL_MakeItem:
0000E874 6100 0000                  		bsr.w	FindFreeObj
0000E878 6600                       		bne.s	locret_DA8A
0000E87A 3358 0008                  		move.w	(a0)+,obX(a1)
0000E87E 3018                       		move.w	(a0)+,d0
0000E880 3200                       		move.w	d0,d1
0000E882 0240 0FFF                  		andi.w	#$FFF,d0
0000E886 3340 000C                  		move.w	d0,obY(a1)
0000E88A E559                       		rol.w	#2,d1
0000E88C 0201 0003                  		andi.b	#3,d1
0000E890 1341 0001                  		move.b	d1,obRender(a1)
0000E894 1341 0022                  		move.b	d1,obStatus(a1)
0000E898 1018                       		move.b	(a0)+,d0
0000E89A 6A00                       		bpl.s	loc_DA80
0000E89C 0200 007F                  		andi.b	#$7F,d0
0000E8A0 1342 0023                  		move.b	d2,obRespawnNo(a1)
0000E8A4                            
0000E8A4                            loc_DA80:
0000E8A4 1340 0000                  		move.b	d0,0(a1)
0000E8A8 1358 0028                  		move.b	(a0)+,obSubtype(a1)
0000E8AC 7000                       		moveq	#0,d0
0000E8AE                            
0000E8AE                            locret_DA8A:
0000E8AE 4E75                       		rts	
0000E8B0                            
0000E8B0                            		include	"_incObj\sub FindFreeObj.asm"
0000E8B0                            ; ---------------------------------------------------------------------------
0000E8B0                            ; Subroutine to find a free object space
0000E8B0                            
0000E8B0                            ; output:
0000E8B0                            ;	a1 = free position in object RAM
0000E8B0                            ; ---------------------------------------------------------------------------
0000E8B0                            
0000E8B0                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000E8B0                            
0000E8B0                            
0000E8B0                            FindFreeObj:
0000E8B0 43F8 D800                  		lea	(v_objspace+$800).w,a1 ; start address for object RAM
0000E8B4 303C 005F                  		move.w	#$5F,d0
0000E8B8                            
0000E8B8                            	FFree_Loop:
0000E8B8 4A11                       		tst.b	(a1)		; is object RAM	slot empty?
0000E8BA 6700                       		beq.s	FFree_Found	; if yes, branch
0000E8BC 43E9 0040                  		lea	$40(a1),a1	; goto next object RAM slot
0000E8C0 51C8 FFF6                  		dbf	d0,FFree_Loop	; repeat $5F times
0000E8C4                            
0000E8C4                            	FFree_Found:
0000E8C4 4E75                       		rts	
0000E8C6                            
0000E8C6                            ; End of function FindFreeObj
0000E8C6                            
0000E8C6                            
0000E8C6                            ; ---------------------------------------------------------------------------
0000E8C6                            ; Subroutine to find a free object space AFTER the current one
0000E8C6                            
0000E8C6                            ; output:
0000E8C6                            ;	a1 = free position in object RAM
0000E8C6                            ; ---------------------------------------------------------------------------
0000E8C6                            
0000E8C6                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000E8C6                            
0000E8C6                            
0000E8C6                            FindNextFreeObj:
0000E8C6 2248                       		movea.l	a0,a1
0000E8C8 303C F000                  		move.w	#$F000,d0
0000E8CC 9048                       		sub.w	a0,d0
0000E8CE EC48                       		lsr.w	#6,d0
0000E8D0 5340                       		subq.w	#1,d0
0000E8D2 6500                       		bcs.s	NFree_Found
0000E8D4                            
0000E8D4                            	NFree_Loop:
0000E8D4 4A11                       		tst.b	(a1)
0000E8D6 6700                       		beq.s	NFree_Found
0000E8D8 43E9 0040                  		lea	$40(a1),a1
0000E8DC 51C8 FFF6                  		dbf	d0,NFree_Loop
0000E8E0                            
0000E8E0                            	NFree_Found:
0000E8E0 4E75                       		rts	
0000E8E2                            
0000E8E2                            ; End of function FindNextFreeObj
0000E8E2                            ; End of function FindNextFreeObj
0000E8E2                            		include	"_incObj\41 Springs.asm"
0000E8E2                            ; ---------------------------------------------------------------------------
0000E8E2                            ; Object 41 - springs
0000E8E2                            ; ---------------------------------------------------------------------------
0000E8E2                            
0000E8E2                            Springs:
0000E8E2 7000                       		moveq	#0,d0
0000E8E4 1028 0024                  		move.b	obRoutine(a0),d0
0000E8E8 323B 0000                  		move.w	Spring_Index(pc,d0.w),d1
0000E8EC 4EBB 1000                  		jsr	Spring_Index(pc,d1.w)
0000E8F0 6100 FB36                  		bsr.w	DisplaySprite
0000E912 4E75                       		rts	
0000E914                            ; ===========================================================================
0000E914 0000                       Spring_Index:	dc.w Spring_Main-Spring_Index
0000E916 0000                       		dc.w Spring_Up-Spring_Index
0000E918 0000                       		dc.w Spring_AniUp-Spring_Index
0000E91A 0000                       		dc.w Spring_ResetUp-Spring_Index
0000E91C 0000                       		dc.w Spring_LR-Spring_Index
0000E91E 0000                       		dc.w Spring_AniLR-Spring_Index
0000E920 0000                       		dc.w Spring_ResetLR-Spring_Index
0000E922 0000                       		dc.w Spring_Dwn-Spring_Index
0000E924 0000                       		dc.w Spring_AniDwn-Spring_Index
0000E926 0000                       		dc.w Spring_ResetDwn-Spring_Index
0000E928                            
0000E928 =00000030                  spring_pow:	equ $30			; power of current spring
0000E928                            
0000E928 F000                       Spring_Powers:	dc.w -$1000		; power	of red spring
0000E92A F600                       		dc.w -$A00		; power	of yellow spring
0000E92C                            ; ===========================================================================
0000E92C                            
0000E92C                            Spring_Main:	; Routine 0
0000E92C 5428 0024                  		addq.b	#2,obRoutine(a0)
0000E930 217C 0000 0000 0004        		move.l	#Map_Spring,obMap(a0)
0000E938 317C 0523 0002             		move.w	#$523,obGfx(a0)
0000E93E 0028 0004 0001             		ori.b	#4,obRender(a0)
0000E944 117C 0010 0019             		move.b	#$10,obActWid(a0)
0000E94A 117C 0004 0018             		move.b	#4,obPriority(a0)
0000E950 1028 0028                  		move.b	obSubtype(a0),d0
0000E954 0800 0004                  		btst	#4,d0		; does the spring face left/right?
0000E958 6700                       		beq.s	Spring_NotLR	; if not, branch
0000E95A                            
0000E95A 117C 0008 0024             		move.b	#8,obRoutine(a0) ; use "Spring_LR" routine
0000E960 117C 0001 001C             		move.b	#1,obAnim(a0)
0000E966 117C 0003 001A             		move.b	#3,obFrame(a0)
0000E96C 317C 0533 0002             		move.w	#$533,obGfx(a0)
0000E972 117C 0008 0019             		move.b	#8,obActWid(a0)
0000E978                            
0000E978                            	Spring_NotLR:
0000E978 0800 0005                  		btst	#5,d0		; does the spring face downwards?
0000E97C 6700                       		beq.s	Spring_NotDwn	; if not, branch
0000E97E                            
0000E97E 117C 000E 0024             		move.b	#$E,obRoutine(a0) ; use "Spring_Dwn" routine
0000E984 08E8 0001 0022             		bset	#1,obStatus(a0)
0000E98A                            
0000E98A                            	Spring_NotDwn:
0000E98A 0800 0001                  		btst	#1,d0
0000E98E 6700                       		beq.s	loc_DB72
0000E990 08E8 0005 0002             		bset	#5,obGfx(a0)
0000E996                            
0000E996                            loc_DB72:
0000E996 0240 000F                  		andi.w	#$F,d0
0000E99A 317B 008C 0030             		move.w	Spring_Powers(pc,d0.w),spring_pow(a0)
0000E9A0 4E75                       		rts	
0000E9A2                            ; ===========================================================================
0000E9A2                            
0000E9A2                            Spring_Up:	; Routine 2
0000E9A2 323C 001B                  		move.w	#$1B,d1
0000E9A6 343C 0008                  		move.w	#8,d2
0000E9AA 363C 0010                  		move.w	#$10,d3
0000E9AE 3828 0008                  		move.w	obX(a0),d4
0000E9B2 6100 0000                  		bsr.w	SolidObject
0000E9B6 4A28 0025                  		tst.b	obSolid(a0)	; is Sonic on top of the spring?
0000E9BA 6600                       		bne.s	Spring_BounceUp	; if yes, branch
0000E9BC 4E75                       		rts	
0000E9BE                            ; ===========================================================================
0000E9BE                            
0000E9BE                            Spring_BounceUp:
0000E9BE 5428 0024                  		addq.b	#2,obRoutine(a0)
0000E9C2 5069 000C                  		addq.w	#8,obY(a1)
0000E9C6 3368 0030 0012             		move.w	spring_pow(a0),obVelY(a1) ; move Sonic upwards
0000E9CC 08E9 0001 0022             		bset	#1,obStatus(a1)
0000E9D2 08A9 0003 0022             		bclr	#3,obStatus(a1)
0000E9D8 137C 0000 001C             		move.b	#id_Spring,obAnim(a1) ; use "bouncing" animation
0000E9DE 137C 0002 0024             		move.b	#2,obRoutine(a1)
0000E9E4 08A8 0003 0022             		bclr	#3,obStatus(a0)
0000E9EA 4228 0025                  		clr.b	obSolid(a0)
0000E9F8                            
0000E9F8                            Spring_AniUp:	; Routine 4
0000E9F8 43F9 0000 0000             		lea	(Ani_Spring).l,a1
0000E9FE 6000 C7E6                  		bra.w	AnimateSprite
0000EA02                            ; ===========================================================================
0000EA02                            
0000EA02                            Spring_ResetUp:	; Routine 6
0000EA02 117C 0001 001D             		move.b	#1,obNextAni(a0) ; reset animation
0000EA08 5928 0024                  		subq.b	#4,obRoutine(a0) ; goto "Spring_Up" routine
0000EA0C 4E75                       		rts	
0000EA0E                            ; ===========================================================================
0000EA0E                            
0000EA0E                            Spring_LR:	; Routine 8
0000EA0E 323C 0013                  		move.w	#$13,d1
0000EA12 343C 000E                  		move.w	#$E,d2
0000EA16 363C 000F                  		move.w	#$F,d3
0000EA1A 3828 0008                  		move.w	obX(a0),d4
0000EA1E 6100 0000                  		bsr.w	SolidObject
0000EA22 0C28 0002 0024             		cmpi.b	#2,obRoutine(a0)
0000EA28 6600                       		bne.s	loc_DC0C
0000EA2A 117C 0008 0024             		move.b	#8,obRoutine(a0)
0000EA30                            
0000EA30                            loc_DC0C:
0000EA30 0828 0005 0022             		btst	#5,obStatus(a0)
0000EA36 6600                       		bne.s	Spring_BounceLR
0000EA38 4E75                       		rts	
0000EA3A                            ; ===========================================================================
0000EA3A                            
0000EA3A                            Spring_BounceLR:
0000EA3A 5428 0024                  		addq.b	#2,obRoutine(a0)
0000EA3E 3368 0030 0010             		move.w	spring_pow(a0),obVelX(a1) ; move Sonic to the left
0000EA44 5069 0008                  		addq.w	#8,obX(a1)
0000EA48 0828 0000 0022             		btst	#0,obStatus(a0)	; is object flipped?
0000EA4E 6600                       		bne.s	Spring_Flipped	; if yes, branch
0000EA50 0469 0010 0008             		subi.w	#$10,obX(a1)
0000EA56 4469 0010                  		neg.w	obVelX(a1)	; move Sonic to	the right
0000EA5A                            
0000EA5A                            	Spring_Flipped:
0000EA5A 337C 000F 003E             		move.w	#$F,$3E(a1)
0000EA60 3369 0010 0014             		move.w	obVelX(a1),obInertia(a1)
0000EA66 0869 0000 0022             		bchg	#0,obStatus(a1)
0000EA6C 0829 0002 0022             		btst	#2,obStatus(a1)
0000EA72 6600                       		bne.s	loc_DC56
0000EA74 137C 0000 001C             		move.b	#id_Walk,obAnim(a1)	; use walking animation
0000EA7A                            
0000EA7A                            loc_DC56:
0000EA7A 08A8 0005 0022             		bclr	#5,obStatus(a0)
0000EA80 08A9 0005 0022             		bclr	#5,obStatus(a1)
0000EA90                            
0000EA90                            Spring_AniLR:	; Routine $A
0000EA90 43F9 0000 0000             		lea	(Ani_Spring).l,a1
0000EA96 6000 C74E                  		bra.w	AnimateSprite
0000EA9A                            ; ===========================================================================
0000EA9A                            
0000EA9A                            Spring_ResetLR:	; Routine $C
0000EA9A 117C 0002 001D             		move.b	#2,obNextAni(a0) ; reset animation
0000EAA0 5928 0024                  		subq.b	#4,obRoutine(a0) ; goto "Spring_LR" routine
0000EAA4 4E75                       		rts	
0000EAA6                            ; ===========================================================================
0000EAA6                            
0000EAA6                            Spring_Dwn:	; Routine $E
0000EAA6 323C 001B                  		move.w	#$1B,d1
0000EAAA 343C 0008                  		move.w	#8,d2
0000EAAE 363C 0010                  		move.w	#$10,d3
0000EAB2 3828 0008                  		move.w	obX(a0),d4
0000EAB6 6100 0000                  		bsr.w	SolidObject
0000EABA 0C28 0002 0024             		cmpi.b	#2,obRoutine(a0)
0000EAC0 6600                       		bne.s	loc_DCA4
0000EAC2 117C 000E 0024             		move.b	#$E,obRoutine(a0)
0000EAC8                            
0000EAC8                            loc_DCA4:
0000EAC8 4A28 0025                  		tst.b	obSolid(a0)
0000EACC 6600                       		bne.s	locret_DCAE
0000EACE 4A44                       		tst.w	d4
0000EAD0 6B00                       		bmi.s	Spring_BounceDwn
0000EAD2                            
0000EAD2                            locret_DCAE:
0000EAD2 4E75                       		rts	
0000EAD4                            ; ===========================================================================
0000EAD4                            
0000EAD4                            Spring_BounceDwn:
0000EAD4 5428 0024                  		addq.b	#2,obRoutine(a0)
0000EAD8 5169 000C                  		subq.w	#8,obY(a1)
0000EADC 3368 0030 0012             		move.w	spring_pow(a0),obVelY(a1)
0000EAE2 4469 0012                  		neg.w	obVelY(a1)	; move Sonic downwards
0000EAE6 08E9 0001 0022             		bset	#1,obStatus(a1)
0000EAEC 08A9 0003 0022             		bclr	#3,obStatus(a1)
0000EAF2 137C 0002 0024             		move.b	#2,obRoutine(a1)
0000EAF8 08A8 0003 0022             		bclr	#3,obStatus(a0)
0000EAFE 4228 0025                  		clr.b	obSolid(a0)
0000EB0C                            
0000EB0C                            Spring_AniDwn:	; Routine $10
0000EB0C 43F9 0000 0000             		lea	(Ani_Spring).l,a1
0000EB12 6000 C6D2                  		bra.w	AnimateSprite
0000EB16                            ; ===========================================================================
0000EB16                            
0000EB16                            Spring_ResetDwn:
0000EB16                            		; Routine $12
0000EB16 117C 0001 001D             		move.b	#1,obNextAni(a0) ; reset animation
0000EB1C 5928 0024                  		subq.b	#4,obRoutine(a0) ; goto "Spring_Dwn" routine
0000EB20 4E75                       		rts	
0000EB20 4E75                       		rts	
0000EB22                            		include	"_anim\Springs.asm"
0000EB22                            ; ---------------------------------------------------------------------------
0000EB22                            ; Animation script - springs
0000EB22                            ; ---------------------------------------------------------------------------
0000EB22 0000                       Ani_Spring:	dc.w byte_DD02-Ani_Spring
0000EB24 0000                       		dc.w byte_DD0E-Ani_Spring
0000EB26 0001 0000 0202 0202 0202+  byte_DD02:	dc.b 0,	1, 0, 0, 2, 2, 2, 2, 2,	2, 0, afRoutine
0000EB32 0004 0303 0505 0505 0505+  byte_DD0E:	dc.b 0,	4, 3, 3, 5, 5, 5, 5, 5,	5, 3, afRoutine
0000EB3E                            		even
0000EB3E                            		even
0000EB3E                            Map_Spring:	include	"_maps\Springs.asm"
0000EB3E                            ; ---------------------------------------------------------------------------
0000EB3E                            ; Sprite mappings - springs
0000EB3E                            ; ---------------------------------------------------------------------------
0000EB3E                            Map_Spring_internal:
0000EB3E 0000                       		dc.w M_Spg_Up-Map_Spring_internal
0000EB40 0000                       		dc.w M_Spg_UpFlat-Map_Spring_internal
0000EB42 0000                       		dc.w M_Spg_UpExt-Map_Spring_internal
0000EB44 0000                       		dc.w M_Spg_Left-Map_Spring_internal
0000EB46 0000                       		dc.w M_Spg_LeftFlat-Map_Spring_internal
0000EB48 0000                       		dc.w M_Spg_LeftExt-Map_Spring_internal
0000EB4A 02                         M_Spg_Up:	dc.b 2			; facing up
0000EB4B F80C 0000 F0               		dc.b $F8, $C, 0, 0, $F0
0000EB50 000C 0004 F0               		dc.b 0,	$C, 0, 4, $F0
0000EB55 01                         M_Spg_UpFlat:	dc.b 1			; facing up, flattened
0000EB56 000C 0000 F0               		dc.b 0,	$C, 0, 0, $F0
0000EB5B 03                         M_Spg_UpExt:	dc.b 3			; facing up, extended
0000EB5C E80C 0000 F0               		dc.b $E8, $C, 0, 0, $F0
0000EB61 F005 0008 F8               		dc.b $F0, 5, 0,	8, $F8
0000EB66 000C 000C F0               		dc.b 0,	$C, 0, $C, $F0
0000EB6B 01                         M_Spg_Left:	dc.b 1			; facing left
0000EB6C F007 0000 F8               		dc.b $F0, 7, 0,	0, $F8
0000EB71 01                         M_Spg_LeftFlat:	dc.b 1			; facing left, flattened
0000EB72 F003 0004 F8               		dc.b $F0, 3, 0,	4, $F8
0000EB77 04                         M_Spg_LeftExt:	dc.b 4			; facing left, extended
0000EB78 F003 0004 10               		dc.b $F0, 3, 0,	4, $10
0000EB7D F809 0008 F8               		dc.b $F8, 9, 0,	8, $F8
0000EB82 F000 0000 F8               		dc.b $F0, 0, 0,	0, $F8
0000EB87 0800 0003 F8               		dc.b 8,	0, 0, 3, $F8
0000EB8C                            		even
0000EB8C                            		even
0000EB8C                            
0000EB8C                            		include	"_incObj\42 Newtron.asm"
0000EB8C                            ; ---------------------------------------------------------------------------
0000EB8C                            ; Object 42 - Newtron enemy (GHZ)
0000EB8C                            ; ---------------------------------------------------------------------------
0000EB8C                            
0000EB8C                            Newtron:
0000EB8C 7000                       		moveq	#0,d0
0000EB8E 1028 0024                  		move.b	obRoutine(a0),d0
0000EB92 323B 0000                  		move.w	Newt_Index(pc,d0.w),d1
0000EB96 4EFB 1000                  		jmp	Newt_Index(pc,d1.w)
0000EB9A                            ; ===========================================================================
0000EB9A 0000                       Newt_Index:	dc.w Newt_Main-Newt_Index
0000EB9C 0000                       		dc.w Newt_Action-Newt_Index
0000EB9E 0000                       		dc.w Newt_Delete-Newt_Index
0000EBA0                            ; ===========================================================================
0000EBA0                            
0000EBA0                            Newt_Main:	; Routine 0
0000EBA0 5428 0024                  		addq.b	#2,obRoutine(a0)
0000EBA4 217C 0000 0000 0004        		move.l	#Map_Newt,obMap(a0)
0000EBAC 317C 049B 0002             		move.w	#$49B,obGfx(a0)
0000EBB2 117C 0004 0001             		move.b	#4,obRender(a0)
0000EBB8 117C 0004 0018             		move.b	#4,obPriority(a0)
0000EBBE 117C 0014 0019             		move.b	#$14,obActWid(a0)
0000EBC4 117C 0010 0016             		move.b	#$10,obHeight(a0)
0000EBCA 117C 0008 0017             		move.b	#8,obWidth(a0)
0000EBD0                            
0000EBD0                            Newt_Action:	; Routine 2
0000EBD0 7000                       		moveq	#0,d0
0000EBD2 1028 0025                  		move.b	ob2ndRout(a0),d0
0000EBD6 323B 0000                  		move.w	@index(pc,d0.w),d1
0000EBDA 4EBB 1000                  		jsr	@index(pc,d1.w)
0000EBDE 43F9 0000 0000             		lea	(Ani_Newt).l,a1
0000EBE4 6100 C600                  		bsr.w	AnimateSprite
0000EBE8 6000 0000                  		bra.w	RememberState
0000EBEC                            ; ===========================================================================
0000EBEC 0000                       @index:		dc.w @chkdistance-@index
0000EBEE 0000                       		dc.w @type00-@index
0000EBF0 0000                       		dc.w @matchfloor-@index
0000EBF2 0000                       		dc.w @speed-@index
0000EBF4 0000                       		dc.w @type01-@index
0000EBF6                            ; ===========================================================================
0000EBF6                            
0000EBF6                            @chkdistance:
0000EBF6 08E8 0000 0022             		bset	#0,obStatus(a0)
0000EBFC 3038 D008                  		move.w	(v_player+obX).w,d0
0000EC00 9068 0008                  		sub.w	obX(a0),d0
0000EC04 6400                       		bcc.s	@sonicisright
0000EC06 4440                       		neg.w	d0
0000EC08 08A8 0000 0022             		bclr	#0,obStatus(a0)
0000EC0E                            
0000EC0E                            	@sonicisright:
0000EC0E 0C40 0080                  		cmpi.w	#$80,d0		; is Sonic within $80 pixels of	the newtron?
0000EC12 6400                       		bcc.s	@outofrange	; if not, branch
0000EC14 5428 0025                  		addq.b	#2,ob2ndRout(a0) ; goto @type00 next
0000EC18 117C 0001 001C             		move.b	#1,obAnim(a0)
0000EC1E 4A28 0028                  		tst.b	obSubtype(a0)	; check	object type
0000EC22 6700                       		beq.s	@istype00	; if type is 00, branch
0000EC24                            
0000EC24 317C 249B 0002             		move.w	#$249B,obGfx(a0)
0000EC2A 117C 0008 0025             		move.b	#8,ob2ndRout(a0) ; goto @type01 next
0000EC30 117C 0004 001C             		move.b	#4,obAnim(a0)	; use different	animation
0000EC36                            
0000EC36                            	@outofrange:
0000EC36                            	@istype00:
0000EC36 4E75                       		rts	
0000EC38                            ; ===========================================================================
0000EC38                            
0000EC38                            @type00:
0000EC38 0C28 0004 001A             		cmpi.b	#4,obFrame(a0)	; has "appearing" animation finished?
0000EC3E 6400                       		bcc.s	@fall		; is yes, branch
0000EC40 08E8 0000 0022             		bset	#0,obStatus(a0)
0000EC46 3038 D008                  		move.w	(v_player+obX).w,d0
0000EC4A 9068 0008                  		sub.w	obX(a0),d0
0000EC4E 6400                       		bcc.s	@sonicisright2
0000EC50 08A8 0000 0022             		bclr	#0,obStatus(a0)
0000EC56                            
0000EC56                            	@sonicisright2:
0000EC56 4E75                       		rts	
0000EC58                            ; ===========================================================================
0000EC58                            
0000EC58                            	@fall:
0000EC58 0C28 0001 001A             		cmpi.b	#1,obFrame(a0)
0000EC5E 6600                       		bne.s	@loc_DE42
0000EC60 117C 000C 0020             		move.b	#$C,obColType(a0)
0000EC66                            
0000EC66                            	@loc_DE42:
0000EC66 6100 F76E                  		bsr.w	ObjectFall
0000EC6A 6100 0000                  		bsr.w	ObjFloorDist
0000EC6E 4A41                       		tst.w	d1		; has newtron hit the floor?
0000EC70 6A00                       		bpl.s	@keepfalling	; if not, branch
0000EC72                            
0000EC72 D368 000C                  		add.w	d1,obY(a0)
0000EC76 317C 0000 0012             		move.w	#0,obVelY(a0)	; stop newtron falling
0000EC7C 5428 0025                  		addq.b	#2,ob2ndRout(a0)
0000EC80 117C 0002 001C             		move.b	#2,obAnim(a0)
0000EC86 0828 0005 0002             		btst	#5,obGfx(a0)
0000EC8C 6700                       		beq.s	@pppppppp
0000EC8E 5228 001C                  		addq.b	#1,obAnim(a0)
0000EC92                            
0000EC92                            	@pppppppp:
0000EC92 117C 000D 0020             		move.b	#$D,obColType(a0)
0000EC98 317C 0200 0010             		move.w	#$200,obVelX(a0) ; move newtron horizontally
0000EC9E 0828 0000 0022             		btst	#0,obStatus(a0)
0000ECA4 6600                       		bne.s	@keepfalling
0000ECA6 4468 0010                  		neg.w	obVelX(a0)
0000ECAA                            
0000ECAA                            	@keepfalling:
0000ECAA 4E75                       		rts	
0000ECAC                            ; ===========================================================================
0000ECAC                            
0000ECAC                            @matchfloor:
0000ECAC 6100 F754                  		bsr.w	SpeedToPos
0000ECB0 6100 0000                  		bsr.w	ObjFloorDist
0000ECB4 0C41 FFF8                  		cmpi.w	#-8,d1
0000ECB8 6D00                       		blt.s	@nextroutine
0000ECBA 0C41 000C                  		cmpi.w	#$C,d1
0000ECBE 6C00                       		bge.s	@nextroutine
0000ECC0 D368 000C                  		add.w	d1,obY(a0)	; match	newtron's position with floor
0000ECC4 4E75                       		rts	
0000ECC6                            ; ===========================================================================
0000ECC6                            
0000ECC6                            	@nextroutine:
0000ECC6 5428 0025                  		addq.b	#2,ob2ndRout(a0) ; goto @speed next
0000ECCA 4E75                       		rts	
0000ECCC                            ; ===========================================================================
0000ECCC                            
0000ECCC                            @speed:
0000ECCC 6100 F734                  		bsr.w	SpeedToPos
0000ECD0 4E75                       		rts	
0000ECD2                            ; ===========================================================================
0000ECD2                            
0000ECD2                            @type01:
0000ECD2 0C28 0001 001A             		cmpi.b	#1,obFrame(a0)
0000ECD8 6600                       		bne.s	@firemissile
0000ECDA 117C 000C 0020             		move.b	#$C,obColType(a0)
0000ECE0                            
0000ECE0                            	@firemissile:
0000ECE0 0C28 0002 001A             		cmpi.b	#2,obFrame(a0)
0000ECE6 6600                       		bne.s	@fail
0000ECE8 4A28 0032                  		tst.b	$32(a0)
0000ECEC 6600                       		bne.s	@fail
0000ECEE 117C 0001 0032             		move.b	#1,$32(a0)
0000ECF4 6100 FBBA                  		bsr.w	FindFreeObj
0000ECF8 6600                       		bne.s	@fail
0000ECFA 137C 0023 0000             		move.b	#id_Missile,0(a1) ; load missile object
0000ED00 3368 0008 0008             		move.w	obX(a0),obX(a1)
0000ED06 3368 000C 000C             		move.w	obY(a0),obY(a1)
0000ED0C 5169 000C                  		subq.w	#8,obY(a1)
0000ED10 337C 0200 0010             		move.w	#$200,obVelX(a1)
0000ED16 303C 0014                  		move.w	#$14,d0
0000ED1A 0828 0000 0022             		btst	#0,obStatus(a0)
0000ED20 6600                       		bne.s	@noflip
0000ED22 4440                       		neg.w	d0
0000ED24 4469 0010                  		neg.w	obVelX(a1)
0000ED28                            
0000ED28                            	@noflip:
0000ED28 D169 0008                  		add.w	d0,obX(a1)
0000ED2C 1368 0022 0022             		move.b	obStatus(a0),obStatus(a1)
0000ED32 137C 0001 0028             		move.b	#1,obSubtype(a1)
0000ED38                            
0000ED38                            	@fail:
0000ED38 4E75                       		rts	
0000ED3A                            ; ===========================================================================
0000ED3A                            
0000ED3A                            Newt_Delete:	; Routine 4
0000ED3A 6000 F728                  		bra.w	DeleteObject
0000ED3A 6000 F728                  		bra.w	DeleteObject
0000ED3E                            		include	"_anim\Newtron.asm"
0000ED3E                            ; ---------------------------------------------------------------------------
0000ED3E                            ; Animation script - Newtron enemy
0000ED3E                            ; ---------------------------------------------------------------------------
0000ED3E 0000                       Ani_Newt:	dc.w A_Newt_Blank-Ani_Newt
0000ED40 0000                       		dc.w A_Newt_Drop-Ani_Newt
0000ED42 0000                       		dc.w A_Newt_Fly1-Ani_Newt
0000ED44 0000                       		dc.w A_Newt_Fly2-Ani_Newt
0000ED46 0000                       		dc.w A_Newt_Fires-Ani_Newt
0000ED48 0F0A FF                    A_Newt_Blank:	dc.b $F, $A, afEnd
0000ED4C 00                         		even
0000ED4C 1300 0103 0405 FE01        A_Newt_Drop:	dc.b $13, 0, 1,	3, 4, 5, afBack, 1
0000ED54 0206 07FF                  A_Newt_Fly1:	dc.b 2,	6, 7, afEnd
0000ED58 0208 09FF                  A_Newt_Fly2:	dc.b 2,	8, 9, afEnd
0000ED5C 1300 0101 0201 0100 FC     A_Newt_Fires:	dc.b $13, 0, 1,	1, 2, 1, 1, 0, afRoutine
0000ED66 00                         		even
0000ED66 00                         		even
0000ED66                            Map_Newt:	include	"_maps\Newtron.asm"
0000ED66                            ; ---------------------------------------------------------------------------
0000ED66                            ; Sprite mappings - Newtron enemy (GHZ)
0000ED66                            ; ---------------------------------------------------------------------------
0000ED66                            Map_Newt_internal:
0000ED66 0000                       		dc.w M_Newt_Trans-Map_Newt_internal
0000ED68 0000                       		dc.w M_Newt_Norm-Map_Newt_internal
0000ED6A 0000                       		dc.w M_Newt_Fires-Map_Newt_internal
0000ED6C 0000                       		dc.w M_Newt_Drop1-Map_Newt_internal
0000ED6E 0000                       		dc.w M_Newt_Drop2-Map_Newt_internal
0000ED70 0000                       		dc.w M_Newt_Drop3-Map_Newt_internal
0000ED72 0000                       		dc.w M_Newt_Fly1a-Map_Newt_internal
0000ED74 0000                       		dc.w M_Newt_Fly1b-Map_Newt_internal
0000ED76 0000                       		dc.w M_Newt_Fly2a-Map_Newt_internal
0000ED78 0000                       		dc.w M_Newt_Fly2b-Map_Newt_internal
0000ED7A 0000                       		dc.w M_Newt_Blank-Map_Newt_internal
0000ED7C 03                         M_Newt_Trans:	dc.b 3
0000ED7D EC0D 0000 EC               		dc.b $EC, $D, 0, 0, $EC	; partially visible
0000ED82 F400 0008 0C               		dc.b $F4, 0, 0,	8, $C
0000ED87 FC0E 0009 F4               		dc.b $FC, $E, 0, 9, $F4
0000ED8C 03                         M_Newt_Norm:	dc.b 3
0000ED8D EC06 0015 EC               		dc.b $EC, 6, 0,	$15, $EC ; visible
0000ED92 EC09 001B FC               		dc.b $EC, 9, 0,	$1B, $FC
0000ED97 FC0A 0021 FC               		dc.b $FC, $A, 0, $21, $FC
0000ED9C 03                         M_Newt_Fires:	dc.b 3
0000ED9D EC06 002A EC               		dc.b $EC, 6, 0,	$2A, $EC ; open mouth, firing
0000EDA2 EC09 001B FC               		dc.b $EC, 9, 0,	$1B, $FC
0000EDA7 FC0A 0021 FC               		dc.b $FC, $A, 0, $21, $FC
0000EDAC 04                         M_Newt_Drop1:	dc.b 4
0000EDAD EC06 0030 EC               		dc.b $EC, 6, 0,	$30, $EC ; dropping
0000EDB2 EC09 001B FC               		dc.b $EC, 9, 0,	$1B, $FC
0000EDB7 FC09 0036 FC               		dc.b $FC, 9, 0,	$36, $FC
0000EDBC 0C00 003C 0C               		dc.b $C, 0, 0, $3C, $C
0000EDC1 03                         M_Newt_Drop2:	dc.b 3
0000EDC2 F40D 003D EC               		dc.b $F4, $D, 0, $3D, $EC
0000EDC7 FC00 0020 0C               		dc.b $FC, 0, 0,	$20, $C
0000EDCC 0408 0045 FC               		dc.b 4,	8, 0, $45, $FC
0000EDD1 02                         M_Newt_Drop3:	dc.b 2
0000EDD2 F80D 0048 EC               		dc.b $F8, $D, 0, $48, $EC
0000EDD7 F801 0050 0C               		dc.b $F8, 1, 0,	$50, $C
0000EDDC 03                         M_Newt_Fly1a:	dc.b 3
0000EDDD F80D 0048 EC               		dc.b $F8, $D, 0, $48, $EC ; flying
0000EDE2 F801 0050 0C               		dc.b $F8, 1, 0,	$50, $C
0000EDE7 FE00 0052 14               		dc.b $FE, 0, 0,	$52, $14
0000EDEC 03                         M_Newt_Fly1b:	dc.b 3
0000EDED F80D 0048 EC               		dc.b $F8, $D, 0, $48, $EC
0000EDF2 F801 0050 0C               		dc.b $F8, 1, 0,	$50, $C
0000EDF7 FE04 0053 14               		dc.b $FE, 4, 0,	$53, $14
0000EDFC 03                         M_Newt_Fly2a:	dc.b 3
0000EDFD F80D 0048 EC               		dc.b $F8, $D, 0, $48, $EC
0000EE02 F801 0050 0C               		dc.b $F8, 1, 0,	$50, $C
0000EE07 FE00 E052 14               		dc.b $FE, 0, $E0, $52, $14
0000EE0C 03                         M_Newt_Fly2b:	dc.b 3
0000EE0D F80D 0048 EC               		dc.b $F8, $D, 0, $48, $EC
0000EE12 F801 0050 0C               		dc.b $F8, 1, 0,	$50, $C
0000EE17 FE04 E053 14               		dc.b $FE, 4, $E0, $53, $14
0000EE1C 00                         M_Newt_Blank:	dc.b 0
0000EE1E 00                         		even
0000EE1E 00                         		even
0000EE1E                            		include	"_incObj\43 Roller.asm"
0000EE1E                            ; ---------------------------------------------------------------------------
0000EE1E                            ; Object 43 - Roller enemy (SYZ)
0000EE1E                            ; ---------------------------------------------------------------------------
0000EE1E                            
0000EE1E                            Roller:
0000EE1E 7000                                       moveq   #0,d0
0000EE20 1028 0024                                  move.b  $24(a0),d0
0000EE24 323B 0000                                  move.w  index_bfb8(pc,d0.w),d1
0000EE28 4EFB 1000                                  jmp     index_bfb8(pc,d1.w)
0000EE2C                            ; ---------------------------------------------------------------------------
0000EE2C 0000                       index_bfb8:     dc.w entry_BFBE-*
0000EE2E 0000                                       dc.w entry_c00c-index_bfb8
0000EE30 0000                                       dc.w entry_c0b0-index_bfb8
0000EE32                            ; ---------------------------------------------------------------------------
0000EE32                            
0000EE32                            entry_BFBE:
0000EE32 117C 000E 0016                             move.b  #$E,$16(a0)
0000EE38 117C 0008 0017                             move.b  #8,$17(a0)
0000EE3E 6100 F596                                  bsr.w   ObjectFall
0000EE42 6100 0000                                  bsr.w   ObjFloorDist
0000EE46 4A41                                       tst.w   d1
0000EE48 6A00                                       bpl.s   locret_C00A
0000EE4A D368 000C                                  add.w   d1,$C(a0)
0000EE4E 317C 0000 0012                             move.w  #0,$12(a0)
0000EE54 5428 0024                                  addq.b  #2,$24(a0)
0000EE58 217C 0000 0000 0004                        move.l  #unk_C0CA,4(a0)
0000EE60 317C 24B8 0002                             move.w  #$24B8,2(a0)
0000EE66 117C 0004 0001                             move.b  #4,1(a0)
0000EE6C 117C 0004 0019                             move.b  #4,$19(a0)
0000EE72 117C 0010 0018                             move.b  #$10,$18(a0)
0000EE78 117C 000E 0020             				move.b	#$E,obColType(a0)
0000EE7E                            
0000EE7E                            locret_C00A:
0000EE7E 4E75                                       rts
0000EE80                            ; ---------------------------------------------------------------------------
0000EE80                            
0000EE80                            entry_c00c:
0000EE80 7000                                       moveq   #0,d0
0000EE82 1028 0025                                  move.b  $25(a0),d0
0000EE86 323B 0000                                  move.w  index_c028(pc,d0.w),d1
0000EE8A 4EBB 1000                                  jsr     index_c028(pc,d1.w)
0000EE8E 43F9 0000 0000                             lea     (unk_C0B4).l,a1
0000EE94 6100 C350                                  bsr.w   AnimateSprite
0000EE98 6000 0000                                  bra.w   rememberstate
0000EE9C                            ; ---------------------------------------------------------------------------
0000EE9C 0000                       index_c028:     dc.w entry_C030-*
0000EE9E 0000                                       dc.w entry_c052-index_c028
0000EEA0 0000                                       dc.w entry_c060-index_c028
0000EEA2 0000                                       dc.w entry_c08e-index_c028
0000EEA4                            ; ---------------------------------------------------------------------------
0000EEA4                            
0000EEA4                            entry_C030:
0000EEA4 3038 D008                                  move.w  ($FFFFD008).w,d0
0000EEA8 9068 0008                                  sub.w   8(a0),d0
0000EEAC 6500                                       bcs.s   locret_C050
0000EEAE 0C40 0020                                  cmpi.w  #$20,d0 ; ' '
0000EEB2 6400                                       bcc.s   locret_C050
0000EEB4 5428 0025                                  addq.b  #2,$25(a0)
0000EEB8 117C 0001 001C                             move.b  #1,$1C(a0)
0000EEBE 317C 0400 0010                             move.w  #$400,$10(a0)
0000EEC4 117C 008E 0020             				move.b	#$8E,obColType(a0) ; make Roller invincible
0000EECA                            
0000EECA                            locret_C050:
0000EECA 4E75                                       rts
0000EECC                            ; ---------------------------------------------------------------------------
0000EECC                            
0000EECC                            entry_c052:
0000EECC 0C28 0002 001C                             cmpi.b  #2,$1C(a0)
0000EED2 6600                                       bne.s   locret_C05E
0000EED4 5428 0025                                  addq.b  #2,$25(a0)
0000EED8                            
0000EED8                            locret_C05E:
0000EED8 4E75                                       rts
0000EEDA                            ; ---------------------------------------------------------------------------
0000EEDA                            
0000EEDA                            entry_c060:
0000EEDA 6100 F526                                  bsr.w   SpeedToPos
0000EEDE 6100 0000                                  bsr.w   ObjFloorDist
0000EEE2 0C41 FFF8                                  cmpi.w  #$FFF8,d1
0000EEE6 6D00                                       blt.s   loc_C07A
0000EEE8 0C41 000C                                  cmpi.w  #$C,d1
0000EEEC 6C00                                       bge.s   loc_C07A
0000EEEE D368 000C                                  add.w   d1,$C(a0)
0000EEF2 4E75                                       rts
0000EEF4                            ; ---------------------------------------------------------------------------
0000EEF4                            
0000EEF4                            loc_C07A:
0000EEF4 5428 0025                                  addq.b  #2,$25(a0)
0000EEF8 08E8 0000 0032                             bset    #0,$32(a0)
0000EEFE 6700                                       beq.s   locret_C08C
0000EF00 317C FA00 0012                             move.w  #$FA00,$12(a0)
0000EF06                            
0000EF06                            locret_C08C:
0000EF06 4E75                                       rts
0000EF08                            ; ---------------------------------------------------------------------------
0000EF08                            
0000EF08                            entry_c08e:
0000EF08 6100 F4CC                                  bsr.w   ObjectFall
0000EF0C 4A68 0012                                  tst.w   $12(a0)
0000EF10 6B00                                       bmi.s   locret_C0AE
0000EF12 6100 0000                                  bsr.w   ObjFloorDist
0000EF16 4A41                                       tst.w   d1
0000EF18 6A00                                       bpl.s   locret_C0AE
0000EF1A D368 000C                                  add.w   d1,$C(a0)
0000EF1E 5528 0025                                  subq.b  #2,$25(a0)
0000EF22 317C 0000 0012                             move.w  #0,$12(a0)
0000EF28                            
0000EF28                            locret_C0AE:
0000EF28 4E75                                       rts
0000EF2A                            ; ---------------------------------------------------------------------------
0000EF2A                            
0000EF2A                            entry_c0b0:
0000EF2A 6000 F538                                  bra.w   DeleteObject
0000EF2E                            ; ---------------------------------------------------------------------------
0000EF2E 00                         unk_C0B4:       dc.b   0
0000EF2F 06                                         dc.b   6
0000EF30 00                                         dc.b   0
0000EF31 0A                                         dc.b  $A
0000EF32 00                                         dc.b   0
0000EF33 10                                         dc.b $10
0000EF34 0F                                         dc.b  $F
0000EF35 00                                         dc.b   0
0000EF36 FF                                         dc.b $FF
0000EF37 00                                         dc.b   0
0000EF38 0F                                         dc.b  $F
0000EF39 01                                         dc.b   1
0000EF3A 02                                         dc.b   2
0000EF3B FD                                         dc.b $FD
0000EF3C 02                                         dc.b   2
0000EF3D 00                                         dc.b   0
0000EF3E 03                                         dc.b   3
0000EF3F 02                                         dc.b   2
0000EF40 03                                         dc.b   3
0000EF41 04                                         dc.b   4
0000EF42 FF                                         dc.b $FF
0000EF43 00                                         dc.b   0
0000EF44 00                         unk_C0CA:       dc.b   0
0000EF45 0A                                         dc.b  $A
0000EF46 00                                         dc.b   0
0000EF47 15                                         dc.b $15
0000EF48 00                                         dc.b   0
0000EF49 20                                         dc.b $20
0000EF4A 00                                         dc.b   0
0000EF4B 26                                         dc.b $26 ; &
0000EF4C 00                                         dc.b   0
0000EF4D 2C                                         dc.b $2C ; ,
0000EF4E 02                                         dc.b   2
0000EF4F DE                                         dc.b $DE
0000EF50 0E                                         dc.b  $E
0000EF51 00                                         dc.b   0
0000EF52 00                                         dc.b   0
0000EF53 F0                                         dc.b $F0
0000EF54 F6                                         dc.b $F6
0000EF55 0E                                         dc.b  $E
0000EF56 00                                         dc.b   0
0000EF57 0C                                         dc.b  $C
0000EF58 F0                                         dc.b $F0
0000EF59 02                                         dc.b   2
0000EF5A E6                                         dc.b $E6
0000EF5B 0E                                         dc.b  $E
0000EF5C 00                                         dc.b   0
0000EF5D 00                                         dc.b   0
0000EF5E F0                                         dc.b $F0
0000EF5F FE                                         dc.b $FE
0000EF60 0D                                         dc.b  $D
0000EF61 00                                         dc.b   0
0000EF62 18                                         dc.b $18
0000EF63 F0                                         dc.b $F0
0000EF64 01                                         dc.b   1
0000EF65 F0                                         dc.b $F0
0000EF66 0F                                         dc.b  $F
0000EF67 00                                         dc.b   0
0000EF68 20                                         dc.b $20
0000EF69 F0                                         dc.b $F0
0000EF6A 01                                         dc.b   1
0000EF6B F0                                         dc.b $F0
0000EF6C 0F                                         dc.b  $F
0000EF6D 00                                         dc.b   0
0000EF6E 30                                         dc.b $30 ; 0
0000EF6F F0                                         dc.b $F0
0000EF70 01                                         dc.b   1
0000EF71 F0                                         dc.b $F0
0000EF72 0F                                         dc.b  $F
0000EF73 00                                         dc.b   0
0000EF74 40                                         dc.b $40 ; @
0000EF75 F0                                         dc.b $F0
0000EF76                            ; ---------------------------------------------------------------------------
0000EF76                            ; ---------------------------------------------------------------------------
0000EF76                            		include	"_anim\Roller.asm"
0000EF76                            ; ---------------------------------------------------------------------------
0000EF76                            ; Animation script - Roller enemy
0000EF76                            ; ---------------------------------------------------------------------------
0000EF76 0000                       Ani_Roll:	dc.w A_Roll_Unfold-Ani_Roll
0000EF78 0000                       		dc.w A_Roll_Fold-Ani_Roll
0000EF7A 0000                       		dc.w A_Roll_Roll-Ani_Roll
0000EF7C 0F02 0100 FE01             A_Roll_Unfold:	dc.b $F, 2, 1, 0, afBack, 1
0000EF82 0F01 02FD 02               A_Roll_Fold:	dc.b $F, 1, 2, afChange, 2
0000EF88 00                         		even
0000EF88 0303 0402 FF               A_Roll_Roll:	dc.b 3,	3, 4, 2, afEnd
0000EF8E 00                         		even
0000EF8E 00                         		even
0000EF8E                            Map_Roll:	include	"_maps\Roller.asm"
0000EF8E                            ; ---------------------------------------------------------------------------
0000EF8E                            ; Sprite mappings - Roller enemy (SYZ)
0000EF8E                            ; ---------------------------------------------------------------------------
0000EF8E                            Map_Roll_internal:
0000EF8E 0000                       		dc.w M_Roll_Stand-Map_Roll_internal
0000EF90 0000                       		dc.w M_Roll_Fold-Map_Roll_internal
0000EF92 0000                       		dc.w M_Roll_Roll1-Map_Roll_internal
0000EF94 0000                       		dc.w M_Roll_Roll2-Map_Roll_internal
0000EF96 0000                       		dc.w M_Roll_Roll3-Map_Roll_internal
0000EF98 02                         M_Roll_Stand:	dc.b 2
0000EF99 DE0E 0000 F0               		dc.b $DE, $E, 0, 0, $F0	; standing
0000EF9E F60E 000C F0               		dc.b $F6, $E, 0, $C, $F0
0000EFA3 02                         M_Roll_Fold:	dc.b 2
0000EFA4 E60E 0000 F0               		dc.b $E6, $E, 0, 0, $F0	; folding
0000EFA9 FE0D 0018 F0               		dc.b $FE, $D, 0, $18, $F0
0000EFAE 01                         M_Roll_Roll1:	dc.b 1
0000EFAF F00F 0020 F0               		dc.b $F0, $F, 0, $20, $F0 ; rolling
0000EFB4 01                         M_Roll_Roll2:	dc.b 1
0000EFB5 F00F 0030 F0               		dc.b $F0, $F, 0, $30, $F0 ; rolling
0000EFBA 01                         M_Roll_Roll3:	dc.b 1
0000EFBB F00F 0040 F0               		dc.b $F0, $F, 0, $40, $F0 ; rolling
0000EFC0                            		even
0000EFC0                            		even
0000EFC0                            
0000EFC0                            		include	"_incObj\44 GHZ Edge Walls.asm"
0000EFC0                            ; ---------------------------------------------------------------------------
0000EFC0                            ; Object 44 - edge walls (GHZ)
0000EFC0                            ; ---------------------------------------------------------------------------
0000EFC0                            
0000EFC0                            EdgeWalls:
0000EFC0 7000                       		moveq	#0,d0
0000EFC2 1028 0024                  		move.b	obRoutine(a0),d0
0000EFC6 323B 0000                  		move.w	Edge_Index(pc,d0.w),d1
0000EFCA 4EFB 1000                  		jmp	Edge_Index(pc,d1.w)
0000EFCE                            ; ===========================================================================
0000EFCE 0000                       Edge_Index:	dc.w Edge_Main-Edge_Index
0000EFD0 0000                       		dc.w Edge_Solid-Edge_Index
0000EFD2 0000                       		dc.w Edge_Display-Edge_Index
0000EFD4                            ; ===========================================================================
0000EFD4                            
0000EFD4                            Edge_Main:	; Routine 0
0000EFD4 5428 0024                  		addq.b	#2,obRoutine(a0)
0000EFD8 217C 0000 0000 0004        		move.l	#Map_Edge,obMap(a0)
0000EFE0 317C 434C 0002             		move.w	#$434C,obGfx(a0)
0000EFE6 0028 0004 0001             		ori.b	#4,obRender(a0)
0000EFEC 117C 0008 0019             		move.b	#8,obActWid(a0)
0000EFF2 117C 0006 0018             		move.b	#6,obPriority(a0)
0000EFF8 1168 0028 001A             		move.b	obSubtype(a0),obFrame(a0) ; copy object type number to frame number
0000EFFE 08A8 0004 001A             		bclr	#4,obFrame(a0)	; clear	4th bit	(deduct	$10)
0000F004 6700                       		beq.s	Edge_Solid	; make object solid if 4th bit = 0
0000F006 5428 0024                  		addq.b	#2,obRoutine(a0)
0000F00A 6000                       		bra.s	Edge_Display	; don't make it solid if 4th bit = 1
0000F00C                            ; ===========================================================================
0000F00C                            
0000F00C                            Edge_Solid:	; Routine 2
0000F00C 323C 0013                  		move.w	#$13,d1
0000F010 343C 0028                  		move.w	#$28,d2
0000F014 6100 A27E                  		bsr.w	Obj44_SolidWall
0000F018                            
0000F018                            Edge_Display:	; Routine 4
0000F018 6100 F40E                  		bsr.w	DisplaySprite
0000F03A 4E75                       		rts	
0000F03A 4E75                       		rts	
0000F03C                            Map_Edge:	include	"_maps\GHZ Edge Walls.asm"
0000F03C                            ; ---------------------------------------------------------------------------
0000F03C                            ; Sprite mappings - walls (GHZ)
0000F03C                            ; ---------------------------------------------------------------------------
0000F03C                            Map_Edge_internal:
0000F03C 0000                       		dc.w M_Edge_Shadow-Map_Edge_internal
0000F03E 0000                       		dc.w M_Edge_Light-Map_Edge_internal
0000F040 0000                       		dc.w M_Edge_Dark-Map_Edge_internal
0000F042 04                         M_Edge_Shadow:	dc.b 4
0000F043 E005 0004 F8               		dc.b $E0, 5, 0,	4, $F8	; light with shadow
0000F048 F005 0008 F8               		dc.b $F0, 5, 0,	8, $F8
0000F04D 0005 0008 F8               		dc.b 0,	5, 0, 8, $F8
0000F052 1005 0008 F8               		dc.b $10, 5, 0,	8, $F8
0000F057 04                         M_Edge_Light:	dc.b 4
0000F058 E005 0008 F8               		dc.b $E0, 5, 0,	8, $F8	; light with no shadow
0000F05D F005 0008 F8               		dc.b $F0, 5, 0,	8, $F8
0000F062 0005 0008 F8               		dc.b 0,	5, 0, 8, $F8
0000F067 1005 0008 F8               		dc.b $10, 5, 0,	8, $F8
0000F06C 04                         M_Edge_Dark:	dc.b 4
0000F06D E005 0000 F8               		dc.b $E0, 5, 0,	0, $F8	; all shadow
0000F072 F005 0000 F8               		dc.b $F0, 5, 0,	0, $F8
0000F077 0005 0000 F8               		dc.b 0,	5, 0, 0, $F8
0000F07C 1005 0000 F8               		dc.b $10, 5, 0,	0, $F8
0000F082 00                         		even
0000F082 00                         		even
0000F082                            
0000F082                            		include	"_incObj\13 Lava Ball Maker.asm"
0000F082                            ; ---------------------------------------------------------------------------
0000F082                            ; Object 13 - lava ball	maker (MZ, SLZ)
0000F082                            ; ---------------------------------------------------------------------------
0000F082                            
0000F082                            LavaMaker:
0000F082 7000                       		moveq	#0,d0
0000F084 1028 0024                  		move.b	obRoutine(a0),d0
0000F088 323B 0000                  		move.w	LavaM_Index(pc,d0.w),d1
0000F08C 4EBB 1000                  		jsr	LavaM_Index(pc,d1.w)
0000F090 6000 0000                  		bra.w	LBall_ChkDel
0000F094                            ; ===========================================================================
0000F094 0000                       LavaM_Index:	dc.w LavaM_Main-LavaM_Index
0000F096 0000                       		dc.w LavaM_MakeLava-LavaM_Index
0000F098                            ; ---------------------------------------------------------------------------
0000F098                            ;
0000F098                            ; Lava ball production rates
0000F098                            ;
0000F098 1E3C 5A78 96B4             LavaM_Rates:	dc.b 30, 60, 90, 120, 150, 180
0000F09E                            ; ===========================================================================
0000F09E                            
0000F09E                            LavaM_Main:	; Routine 0
0000F09E 5428 0024                  		addq.b	#2,obRoutine(a0)
0000F0A2 1028 0028                  		move.b	obSubtype(a0),d0
0000F0A6 E848                       		lsr.w	#4,d0
0000F0A8 0240 000F                  		andi.w	#$F,d0
0000F0AC 117B 00EA 001F             		move.b	LavaM_Rates(pc,d0.w),obDelayAni(a0)
0000F0B2 1168 001F 001E             		move.b	obDelayAni(a0),obTimeFrame(a0) ; set time delay for lava balls
0000F0B8 0228 000F 0028             		andi.b	#$F,obSubtype(a0)
0000F0BE                            
0000F0BE                            LavaM_MakeLava:	; Routine 2
0000F0BE 5328 001E                  		subq.b	#1,obTimeFrame(a0) ; subtract 1 from time delay
0000F0C2 6600                       		bne.s	LavaM_Wait	; if time still	remains, branch
0000F0C4 1168 001F 001E             		move.b	obDelayAni(a0),obTimeFrame(a0) ; reset time delay
0000F0CA 6100 F5D6                  		bsr.w	ChkObjectVisible
0000F0CE 6600                       		bne.s	LavaM_Wait
0000F0D0 6100 F7DE                  		bsr.w	FindFreeObj
0000F0D4 6600                       		bne.s	LavaM_Wait
0000F0D6 137C 0014 0000             		move.b	#id_LavaBall,0(a1) ; load lava ball object
0000F0DC 3368 0008 0008             		move.w	obX(a0),obX(a1)
0000F0E2 3368 000C 000C             		move.w	obY(a0),obY(a1)
0000F0E8 1368 0028 0028             		move.b	obSubtype(a0),obSubtype(a1)
0000F0EE                            
0000F0EE                            	LavaM_Wait:
0000F0EE 4E75                       		rts	
0000F0EE 4E75                       		rts	
0000F0F0                            		include	"_incObj\14 Lava Ball.asm"
0000F0F0                            ; ---------------------------------------------------------------------------
0000F0F0                            ; Object 14 - lava balls (MZ, SLZ)
0000F0F0                            ; ---------------------------------------------------------------------------
0000F0F0                            
0000F0F0                            LavaBall:
0000F0F0 7000                       		moveq	#0,d0
0000F0F2 1028 0024                  		move.b	obRoutine(a0),d0
0000F0F6 323B 0000                  		move.w	LBall_Index(pc,d0.w),d1
0000F0FA 4EBB 1000                  		jsr	LBall_Index(pc,d1.w)
0000F0FE 6000 F328                  		bra.w	DisplaySprite
0000F102                            ; ===========================================================================
0000F102 0000                       LBall_Index:	dc.w LBall_Main-LBall_Index
0000F104 0000                       		dc.w LBall_Action-LBall_Index
0000F106 0000                       		dc.w LBall_Delete-LBall_Index
0000F108                            
0000F108 FC00 FB00 FA00 F900 FE00   LBall_Speeds:	dc.w -$400, -$500, -$600, -$700, -$200
0000F112 0200 FE00 0200 0000        		dc.w $200, -$200, $200,	0
0000F11A                            ; ===========================================================================
0000F11A                            
0000F11A                            LBall_Main:	; Routine 0
0000F11A 5428 0024                  		addq.b	#2,obRoutine(a0)
0000F11E 117C 0008 0016             		move.b	#8,obHeight(a0)
0000F124 117C 0008 0017             		move.b	#8,obWidth(a0)
0000F12A 217C 0000 C0D2 0004        		move.l	#Map_Fire,obMap(a0)
0000F132 317C 0345 0002             		move.w	#$345,obGfx(a0)
0000F138 0C38 0003 FE10             		cmpi.b	#3,(v_zone).w	; check if level is SLZ
0000F13E 6600                       		bne.s	@notSLZ
0000F140 317C 0480 0002             		move.w	#$480,obGfx(a0)	; SLZ specific code
0000F146                            
0000F146                            	@notSLZ:
0000F146 117C 0004 0001             		move.b	#4,obRender(a0)
0000F14C 117C 0003 0018             		move.b	#3,obPriority(a0)
0000F152 117C 008B 0020             		move.b	#$8B,obColType(a0)
0000F158 3168 000C 0030             		move.w	obY(a0),$30(a0)
0000F15E 4A28 0029                  		tst.b	$29(a0)
0000F162 6700                       		beq.s	@speed
0000F164 5428 0018                  		addq.b	#2,obPriority(a0)
0000F168                            
0000F168                            	@speed:
0000F168 7000                       		moveq	#0,d0
0000F16A 1028 0028                  		move.b	obSubtype(a0),d0
0000F16E D040                       		add.w	d0,d0
0000F170 317B 0096 0012             		move.w	LBall_Speeds(pc,d0.w),obVelY(a0) ; load object speed (vertical)
0000F176 117C 0008 0019             		move.b	#8,obActWid(a0)
0000F17C 0C28 0006 0028             		cmpi.b	#6,obSubtype(a0) ; is object type below $6 ?
0000F182 6500                       		bcs.s	@sound		; if yes, branch
0000F184                            
0000F184 117C 0010 0019             		move.b	#$10,obActWid(a0)
0000F18A 117C 0002 001C             		move.b	#2,obAnim(a0)	; use horizontal animation
0000F190 3168 0012 0010             		move.w	obVelY(a0),obVelX(a0) ; set horizontal speed
0000F196 317C 0000 0012             		move.w	#0,obVelY(a0)	; delete vertical speed
0000F19C                            
0000F19C                            	@sound:
0000F1A6                            
0000F1A6                            LBall_Action:	; Routine 2
0000F1A6 7000                       		moveq	#0,d0
0000F1A8 1028 0028                  		move.b	obSubtype(a0),d0
0000F1AC D040                       		add.w	d0,d0
0000F1AE 323B 0000                  		move.w	LBall_TypeIndex(pc,d0.w),d1
0000F1B2 4EBB 1000                  		jsr	LBall_TypeIndex(pc,d1.w)
0000F1B6 6100 F24A                  		bsr.w	SpeedToPos
0000F1BA 43F9 0000 0000             		lea	(Ani_Fire).l,a1
0000F1C0 6100 C024                  		bsr.w	AnimateSprite
0000F1C4                            
0000F1C4                            LBall_ChkDel:
0000F1E2 4E75                       		rts	
0000F1E4                            ; ===========================================================================
0000F1E4 0000 0000                  LBall_TypeIndex:dc.w LBall_Type00-LBall_TypeIndex, LBall_Type00-LBall_TypeIndex
0000F1E8 0000 0000                  		dc.w LBall_Type00-LBall_TypeIndex, LBall_Type00-LBall_TypeIndex
0000F1EC 0000 0000                  		dc.w LBall_Type04-LBall_TypeIndex, LBall_Type05-LBall_TypeIndex
0000F1F0 0000 0000                  		dc.w LBall_Type06-LBall_TypeIndex, LBall_Type07-LBall_TypeIndex
0000F1F4 0000                       		dc.w LBall_Type08-LBall_TypeIndex
0000F1F6                            ; ===========================================================================
0000F1F6                            ; lavaball types 00-03 fly up and fall back down
0000F1F6                            
0000F1F6                            LBall_Type00:
0000F1F6 0668 0018 0012             		addi.w	#$18,obVelY(a0)	; increase object's downward speed
0000F1FC 3028 0030                  		move.w	$30(a0),d0
0000F200 B068 000C                  		cmp.w	obY(a0),d0	; has object fallen back to its	original position?
0000F204 6400                       		bcc.s	loc_E41E	; if not, branch
0000F206 5428 0024                  		addq.b	#2,obRoutine(a0)	; goto "LBall_Delete" routine
0000F20A                            
0000F20A                            loc_E41E:
0000F20A 08A8 0001 0022             		bclr	#1,obStatus(a0)
0000F210 4A68 0012                  		tst.w	obVelY(a0)
0000F214 6A00                       		bpl.s	locret_E430
0000F216 08E8 0001 0022             		bset	#1,obStatus(a0)
0000F21C                            
0000F21C                            locret_E430:
0000F21C 4E75                       		rts	
0000F21E                            ; ===========================================================================
0000F21E                            ; lavaball type	04 flies up until it hits the ceiling
0000F21E                            
0000F21E                            LBall_Type04:
0000F21E 08E8 0001 0022             		bset	#1,obStatus(a0)
0000F224 6100 0000                  		bsr.w	ObjHitCeiling
0000F228 4A41                       		tst.w	d1
0000F22A 6A00                       		bpl.s	locret_E452
0000F22C 117C 0008 0028             		move.b	#8,obSubtype(a0)
0000F232 117C 0001 001C             		move.b	#1,obAnim(a0)
0000F238 317C 0000 0012             		move.w	#0,obVelY(a0)	; stop the object when it touches the ceiling
0000F23E                            
0000F23E                            locret_E452:
0000F23E 4E75                       		rts	
0000F240                            ; ===========================================================================
0000F240                            ; lavaball type	05 falls down until it hits the	floor
0000F240                            
0000F240                            LBall_Type05:
0000F240 08A8 0001 0022             		bclr	#1,obStatus(a0)
0000F246 6100 0000                  		bsr.w	ObjFloorDist
0000F24A 4A41                       		tst.w	d1
0000F24C 6A00                       		bpl.s	locret_E474
0000F24E 117C 0008 0028             		move.b	#8,obSubtype(a0)
0000F254 117C 0001 001C             		move.b	#1,obAnim(a0)
0000F25A 317C 0000 0012             		move.w	#0,obVelY(a0)	; stop the object when it touches the floor
0000F260                            
0000F260                            locret_E474:
0000F260 4E75                       		rts	
0000F262                            ; ===========================================================================
0000F262                            ; lavaball types 06-07 move sideways
0000F262                            
0000F262                            LBall_Type06:
0000F262 08E8 0000 0022             		bset	#0,obStatus(a0)
0000F268 76F8                       		moveq	#-8,d3
0000F26A 6100 0000                  		bsr.w	ObjHitWallLeft
0000F26E 4A41                       		tst.w	d1
0000F270 6A00                       		bpl.s	locret_E498
0000F272 117C 0008 0028             		move.b	#8,obSubtype(a0)
0000F278 117C 0003 001C             		move.b	#3,obAnim(a0)
0000F27E 317C 0000 0010             		move.w	#0,obVelX(a0)	; stop object when it touches a	wall
0000F284                            
0000F284                            locret_E498:
0000F284 4E75                       		rts	
0000F286                            ; ===========================================================================
0000F286                            
0000F286                            LBall_Type07:
0000F286 08A8 0000 0022             		bclr	#0,obStatus(a0)
0000F28C 7608                       		moveq	#8,d3
0000F28E 6100 0000                  		bsr.w	ObjHitWallRight
0000F292 4A41                       		tst.w	d1
0000F294 6A00                       		bpl.s	locret_E4BC
0000F296 117C 0008 0028             		move.b	#8,obSubtype(a0)
0000F29C 117C 0003 001C             		move.b	#3,obAnim(a0)
0000F2A2 317C 0000 0010             		move.w	#0,obVelX(a0)	; stop object when it touches a	wall
0000F2A8                            
0000F2A8                            locret_E4BC:
0000F2A8 4E75                       		rts	
0000F2AA                            ; ===========================================================================
0000F2AA                            
0000F2AA                            LBall_Type08:
0000F2AA 4E75                       		rts	
0000F2AC                            ; ===========================================================================
0000F2AC                            
0000F2AC                            LBall_Delete:
0000F2AC 6000 F1B6                  		bra.w	DeleteObject
0000F2AC 6000 F1B6                  		bra.w	DeleteObject
0000F2B0                            		include	"_anim\Fireballs.asm"
0000F2B0                            ; ---------------------------------------------------------------------------
0000F2B0                            ; Animation script - lava balls
0000F2B0                            ; ---------------------------------------------------------------------------
0000F2B0 0000                       Ani_Fire:	dc.w @vertical-Ani_Fire
0000F2B2 0000                       		dc.w @vertcollide-Ani_Fire
0000F2B4 0000                       		dc.w @horizontal-Ani_Fire
0000F2B6 0000                       		dc.w @horicollide-Ani_Fire
0000F2B8 0500 2001 21FF             @vertical:	dc.b 5,	0, $20,	1, $21,	afEnd
0000F2BE 0502 FC                    @vertcollide:	dc.b 5,	2, afRoutine
0000F2C2 00                         		even
0000F2C2 0503 4304 44FF             @horizontal:	dc.b 5,	3, $43,	4, $44,	afEnd
0000F2C8 0505 FC                    @horicollide:	dc.b 5,	5, afRoutine
0000F2CC 00                         		even
0000F2CC 00                         		even
0000F2CC                            
0000F2CC                            		include	"_incObj\6D Flamethrower.asm"
0000F2CC                            ; ---------------------------------------------------------------------------
0000F2CC                            ; Object 6D - flame thrower (SBZ)
0000F2CC                            ; ---------------------------------------------------------------------------
0000F2CC                            
0000F2CC                            Flamethrower:
0000F2CC 7000                       		moveq	#0,d0
0000F2CE 1028 0024                  		move.b	obRoutine(a0),d0
0000F2D2 323B 0000                  		move.w	Flame_Index(pc,d0.w),d1
0000F2D6 4EFB 1000                  		jmp	Flame_Index(pc,d1.w)
0000F2DA                            ; ===========================================================================
0000F2DA 0000                       Flame_Index:	dc.w Flame_Main-Flame_Index
0000F2DC 0000                       		dc.w Flame_Action-Flame_Index
0000F2DE                            ; ===========================================================================
0000F2DE                            
0000F2DE                            Flame_Main:	; Routine 0
0000F2DE 5428 0024                  		addq.b	#2,obRoutine(a0)
0000F2E2 217C 0000 0000 0004        		move.l	#Map_Flame,obMap(a0)
0000F2EA 317C 83D9 0002             		move.w	#$83D9,obGfx(a0)
0000F2F0 0028 0004 0001             		ori.b	#4,obRender(a0)
0000F2F6 117C 0001 0018             		move.b	#1,obPriority(a0)
0000F2FC 3168 000C 0030             		move.w	obY(a0),$30(a0)	; store obY (gets overwritten later though)
0000F302 117C 000C 0019             		move.b	#$C,obActWid(a0)
0000F308 1028 0028                  		move.b	obSubtype(a0),d0
0000F30C 0240 00F0                  		andi.w	#$F0,d0		; read 1st digit of object type
0000F310 D040                       		add.w	d0,d0		; multiply by 2
0000F312 3140 0030                  		move.w	d0,$30(a0)
0000F316 3140 0032                  		move.w	d0,$32(a0)	; set flaming time
0000F31A 1028 0028                  		move.b	obSubtype(a0),d0
0000F31E 0240 000F                  		andi.w	#$F,d0		; read 2nd digit of object type
0000F322 EB48                       		lsl.w	#5,d0		; multiply by $20
0000F324 3140 0034                  		move.w	d0,$34(a0)	; set pause time
0000F328 117C 000A 0036             		move.b	#$A,$36(a0)
0000F32E 0828 0001 0022             		btst	#1,obStatus(a0)
0000F334 6700                       		beq.s	Flame_Action
0000F336 117C 0002 001C             		move.b	#2,obAnim(a0)
0000F33C 117C 0015 0036             		move.b	#$15,$36(a0)
0000F342                            
0000F342                            Flame_Action:	; Routine 2
0000F342 5368 0030                  		subq.w	#1,$30(a0)	; subtract 1 from time
0000F346 6A00                       		bpl.s	loc_E57A	; if time remains, branch
0000F348 3168 0034 0030             		move.w	$34(a0),$30(a0)	; begin	pause time
0000F34E 0868 0000 001C             		bchg	#0,obAnim(a0)
0000F354 6700                       		beq.s	loc_E57A
0000F356 3168 0032 0030             		move.w	$32(a0),$30(a0)	; begin	flaming	time
0000F366                            
0000F366                            loc_E57A:
0000F366 43F9 0000 0000             		lea	(Ani_Flame).l,a1
0000F36C 6100 BE78                  		bsr.w	AnimateSprite
0000F370 117C 0000 0020             		move.b	#0,obColType(a0)
0000F376 1028 0036                  		move.b	$36(a0),d0
0000F37A B028 001A                  		cmp.b	obFrame(a0),d0
0000F37E 6600                       		bne.s	Flame_ChkDel
0000F380 117C 00A3 0020             		move.b	#$A3,obColType(a0)
0000F386                            
0000F386                            Flame_ChkDel:
0000F3A4 6000 F082                  		bra.w	DisplaySprite
0000F3A4 6000 F082                  		bra.w	DisplaySprite
0000F3A8                            		include	"_anim\Flamethrower.asm"
0000F3A8                            ; ---------------------------------------------------------------------------
0000F3A8                            ; Animation script - flamethrower (SBZ)
0000F3A8                            ; ---------------------------------------------------------------------------
0000F3A8 0000                       Ani_Flame:	dc.w @pipe1-Ani_Flame
0000F3AA 0000                       		dc.w @pipe2-Ani_Flame
0000F3AC 0000                       		dc.w @valve1-Ani_Flame
0000F3AE 0000                       		dc.w @valve2-Ani_Flame
0000F3B0 0300 0102 0304 0506 0708+  @pipe1:		dc.b 3,	0, 1, 2, 3, 4, 5, 6, 7,	8, 9, $A, afBack, 2
0000F3BE 0009 0705 0301 00FE 01     @pipe2:		dc.b 0,	9, 7, 5, 3, 1, 0, afBack, 1
0000F3C8 00                         		even
0000F3C8 030B 0C0D 0E0F 1011 1213+  @valve1:	dc.b 3,	$B, $C,	$D, $E,	$F, $10, $11, $12, $13,	$14, $15, afBack, 2
0000F3D6 0014 1211 0F0D 0BFE 01     @valve2:	dc.b 0,	$14, $12, $11, $F, $D, $B, afBack, 1
0000F3E0 00                         		even
0000F3E0 00                         		even
0000F3E0                            Map_Flame:	include	"_maps\Flamethrower.asm"
0000F3E0                            ; ---------------------------------------------------------------------------
0000F3E0                            ; Sprite mappings - flame thrower (SBZ)
0000F3E0                            ; ---------------------------------------------------------------------------
0000F3E0                            Map_Flame_internal:
0000F3E0 0000                       		dc.w @pipe1-Map_Flame_internal
0000F3E2 0000                       		dc.w @pipe2-Map_Flame_internal
0000F3E4 0000                       		dc.w @pipe3-Map_Flame_internal
0000F3E6 0000                       		dc.w @pipe4-Map_Flame_internal
0000F3E8 0000                       		dc.w @pipe5-Map_Flame_internal
0000F3EA 0000                       		dc.w @pipe6-Map_Flame_internal
0000F3EC 0000                       		dc.w @pipe7-Map_Flame_internal
0000F3EE 0000                       		dc.w @pipe8-Map_Flame_internal
0000F3F0 0000                       		dc.w @pipe9-Map_Flame_internal
0000F3F2 0000                       		dc.w @pipe10-Map_Flame_internal
0000F3F4 0000                       		dc.w @pipe11-Map_Flame_internal
0000F3F6 0000                       		dc.w @valve1-Map_Flame_internal
0000F3F8 0000                       		dc.w @valve2-Map_Flame_internal
0000F3FA 0000                       		dc.w @valve3-Map_Flame_internal
0000F3FC 0000                       		dc.w @valve4-Map_Flame_internal
0000F3FE 0000                       		dc.w @valve5-Map_Flame_internal
0000F400 0000                       		dc.w @valve6-Map_Flame_internal
0000F402 0000                       		dc.w @valve7-Map_Flame_internal
0000F404 0000                       		dc.w @valve8-Map_Flame_internal
0000F406 0000                       		dc.w @valve9-Map_Flame_internal
0000F408 0000                       		dc.w @valve10-Map_Flame_internal
0000F40A 0000                       		dc.w @valve11-Map_Flame_internal
0000F40C 01                         @pipe1:		dc.b 1
0000F40D 2805 4014 FB               		dc.b $28, 5, $40, $14, $FB ; broken pipe style flamethrower
0000F412 02                         @pipe2:		dc.b 2
0000F413 2001 0000 FD               		dc.b $20, 1, 0,	0, $FD
0000F418 2805 4014 FB               		dc.b $28, 5, $40, $14, $FB
0000F41D 02                         @pipe3:		dc.b 2
0000F41E 2001 0800 FC               		dc.b $20, 1, 8,	0, $FC
0000F423 2805 4014 FB               		dc.b $28, 5, $40, $14, $FB
0000F428 03                         @pipe4:		dc.b 3
0000F429 1006 0002 F8               		dc.b $10, 6, 0,	2, $F8
0000F42E 2001 0000 FD               		dc.b $20, 1, 0,	0, $FD
0000F433 2805 4014 FB               		dc.b $28, 5, $40, $14, $FB
0000F438 03                         @pipe5:		dc.b 3
0000F439 1006 0802 F8               		dc.b $10, 6, 8,	2, $F8
0000F43E 2001 0800 FC               		dc.b $20, 1, 8,	0, $FC
0000F443 2805 4014 FB               		dc.b $28, 5, $40, $14, $FB
0000F448 04                         @pipe6:		dc.b 4
0000F449 0806 0002 F8               		dc.b 8,	6, 0, 2, $F8
0000F44E 1006 0002 F8               		dc.b $10, 6, 0,	2, $F8
0000F453 2001 0000 FD               		dc.b $20, 1, 0,	0, $FD
0000F458 2805 4014 FB               		dc.b $28, 5, $40, $14, $FB
0000F45D 04                         @pipe7:		dc.b 4
0000F45E 0806 0802 F8               		dc.b 8,	6, 8, 2, $F8
0000F463 1006 0802 F8               		dc.b $10, 6, 8,	2, $F8
0000F468 2001 0800 FC               		dc.b $20, 1, 8,	0, $FC
0000F46D 2805 4014 FB               		dc.b $28, 5, $40, $14, $FB
0000F472 05                         @pipe8:		dc.b 5
0000F473 F80B 0008 F4               		dc.b $F8, $B, 0, 8, $F4
0000F478 0806 0002 F8               		dc.b 8,	6, 0, 2, $F8
0000F47D 1006 0002 F8               		dc.b $10, 6, 0,	2, $F8
0000F482 2001 0000 FD               		dc.b $20, 1, 0,	0, $FD
0000F487 2805 4014 FB               		dc.b $28, 5, $40, $14, $FB
0000F48C 05                         @pipe9:		dc.b 5
0000F48D F80B 0808 F4               		dc.b $F8, $B, 8, 8, $F4
0000F492 0806 0802 F8               		dc.b 8,	6, 8, 2, $F8
0000F497 1006 0802 F8               		dc.b $10, 6, 8,	2, $F8
0000F49C 2001 0800 FC               		dc.b $20, 1, 8,	0, $FC
0000F4A1 2805 4014 FB               		dc.b $28, 5, $40, $14, $FB
0000F4A6 06                         @pipe10:	dc.b 6
0000F4A7 E80B 0008 F4               		dc.b $E8, $B, 0, 8, $F4
0000F4AC F70B 0008 F4               		dc.b $F7, $B, 0, 8, $F4
0000F4B1 0806 0002 F8               		dc.b 8,	6, 0, 2, $F8
0000F4B6 0F06 0002 F8               		dc.b $F, 6, 0, 2, $F8
0000F4BB 2001 0000 FD               		dc.b $20, 1, 0,	0, $FD
0000F4C0 2805 4014 FB               		dc.b $28, 5, $40, $14, $FB
0000F4C5 06                         @pipe11:	dc.b 6
0000F4C6 E70B 0808 F4               		dc.b $E7, $B, 8, 8, $F4
0000F4CB F80B 0808 F4               		dc.b $F8, $B, 8, 8, $F4
0000F4D0 0706 0802 F8               		dc.b 7,	6, 8, 2, $F8
0000F4D5 1006 0802 F8               		dc.b $10, 6, 8,	2, $F8
0000F4DA 2001 0800 FC               		dc.b $20, 1, 8,	0, $FC
0000F4DF 2805 4014 FB               		dc.b $28, 5, $40, $14, $FB
0000F4E4 01                         @valve1:	dc.b 1
0000F4E5 2805 4018 F9               		dc.b $28, 5, $40, $18, $F9 ; valve style flamethrower
0000F4EA 02                         @valve2:	dc.b 2
0000F4EB 2805 4018 F9               		dc.b $28, 5, $40, $18, $F9
0000F4F0 2001 0000 FD               		dc.b $20, 1, 0,	0, $FD
0000F4F5 02                         @valve3:	dc.b 2
0000F4F6 2805 4018 F9               		dc.b $28, 5, $40, $18, $F9
0000F4FB 2001 0800 FC               		dc.b $20, 1, 8,	0, $FC
0000F500 03                         @valve4:	dc.b 3
0000F501 1006 0002 F8               		dc.b $10, 6, 0,	2, $F8
0000F506 2805 4018 F9               		dc.b $28, 5, $40, $18, $F9
0000F50B 2001 0000 FD               		dc.b $20, 1, 0,	0, $FD
0000F510 03                         @valve5:	dc.b 3
0000F511 1006 0802 F8               		dc.b $10, 6, 8,	2, $F8
0000F516 2805 4018 F9               		dc.b $28, 5, $40, $18, $F9
0000F51B 2001 0800 FC               		dc.b $20, 1, 8,	0, $FC
0000F520 04                         @valve6:	dc.b 4
0000F521 0806 0002 F8               		dc.b 8,	6, 0, 2, $F8
0000F526 1006 0002 F8               		dc.b $10, 6, 0,	2, $F8
0000F52B 2805 4018 F9               		dc.b $28, 5, $40, $18, $F9
0000F530 2001 0000 FD               		dc.b $20, 1, 0,	0, $FD
0000F535 04                         @valve7:	dc.b 4
0000F536 0806 0802 F8               		dc.b 8,	6, 8, 2, $F8
0000F53B 1006 0802 F8               		dc.b $10, 6, 8,	2, $F8
0000F540 2805 4018 F9               		dc.b $28, 5, $40, $18, $F9
0000F545 2001 0800 FC               		dc.b $20, 1, 8,	0, $FC
0000F54A 05                         @valve8:	dc.b 5
0000F54B F80B 0008 F4               		dc.b $F8, $B, 0, 8, $F4
0000F550 0806 0002 F8               		dc.b 8,	6, 0, 2, $F8
0000F555 1006 0002 F8               		dc.b $10, 6, 0,	2, $F8
0000F55A 2805 4018 F9               		dc.b $28, 5, $40, $18, $F9
0000F55F 2001 0000 FD               		dc.b $20, 1, 0,	0, $FD
0000F564 05                         @valve9:	dc.b 5
0000F565 F80B 0808 F4               		dc.b $F8, $B, 8, 8, $F4
0000F56A 0806 0802 F8               		dc.b 8,	6, 8, 2, $F8
0000F56F 1006 0802 F8               		dc.b $10, 6, 8,	2, $F8
0000F574 2805 4018 F9               		dc.b $28, 5, $40, $18, $F9
0000F579 2001 0800 FC               		dc.b $20, 1, 8,	0, $FC
0000F57E 06                         @valve10:	dc.b 6
0000F57F E80B 0008 F4               		dc.b $E8, $B, 0, 8, $F4
0000F584 F70B 0008 F4               		dc.b $F7, $B, 0, 8, $F4
0000F589 0806 0002 F8               		dc.b 8,	6, 0, 2, $F8
0000F58E 0F06 0002 F8               		dc.b $F, 6, 0, 2, $F8
0000F593 2805 4018 F9               		dc.b $28, 5, $40, $18, $F9
0000F598 2001 0000 FD               		dc.b $20, 1, 0,	0, $FD
0000F59D 06                         @valve11:	dc.b 6
0000F59E E70B 0808 F4               		dc.b $E7, $B, 8, 8, $F4
0000F5A3 F80B 0808 F4               		dc.b $F8, $B, 8, 8, $F4
0000F5A8 0706 0802 F8               		dc.b 7,	6, 8, 2, $F8
0000F5AD 1006 0802 F8               		dc.b $10, 6, 8,	2, $F8
0000F5B2 2805 4018 F9               		dc.b $28, 5, $40, $18, $F9
0000F5B7 2001 0800 FC               		dc.b $20, 1, 8,	0, $FC
0000F5BC                            		even
0000F5BC                            		even
0000F5BC                            
0000F5BC                            		include	"_incObj\46 MZ Bricks.asm"
0000F5BC                            ; ---------------------------------------------------------------------------
0000F5BC                            ; Object 46 - solid blocks and blocks that fall	from the ceiling (MZ)
0000F5BC                            ; ---------------------------------------------------------------------------
0000F5BC                            
0000F5BC                            MarbleBrick:
0000F5BC 7000                       		moveq	#0,d0
0000F5BE 1028 0024                  		move.b	obRoutine(a0),d0
0000F5C2 323B 0000                  		move.w	Brick_Index(pc,d0.w),d1
0000F5C6 4EFB 1000                  		jmp	Brick_Index(pc,d1.w)
0000F5CA                            ; ===========================================================================
0000F5CA 0000                       Brick_Index:	dc.w Brick_Main-Brick_Index
0000F5CC 0000                       		dc.w Brick_Action-Brick_Index
0000F5CE                            
0000F5CE =00000030                  brick_origY:	equ $30
0000F5CE                            ; ===========================================================================
0000F5CE                            
0000F5CE                            Brick_Main:	; Routine 0
0000F5CE 5428 0024                  		addq.b	#2,obRoutine(a0)
0000F5D2 117C 000F 0016             		move.b	#$F,obHeight(a0)
0000F5D8 117C 000F 0017             		move.b	#$F,obWidth(a0)
0000F5DE 217C 0000 0000 0004        		move.l	#Map_Brick,obMap(a0)
0000F5E6 317C 4000 0002             		move.w	#$4000,obGfx(a0)
0000F5EC 117C 0004 0001             		move.b	#4,obRender(a0)
0000F5F2 117C 0003 0018             		move.b	#3,obPriority(a0)
0000F5F8 117C 0010 0019             		move.b	#$10,obActWid(a0)
0000F5FE 3168 000C 0030             		move.w	obY(a0),brick_origY(a0)
0000F604 317C 05C0 0032             		move.w	#$5C0,$32(a0)
0000F60A                            
0000F60A                            Brick_Action:	; Routine 2
0000F60A 4A28 0001                  		tst.b	obRender(a0)
0000F60E 6A00                       		bpl.s	@chkdel
0000F610 7000                       		moveq	#0,d0
0000F612 1028 0028                  		move.b	obSubtype(a0),d0 ; get object type
0000F616 0240 0007                  		andi.w	#7,d0		; read only the	1st digit
0000F61A D040                       		add.w	d0,d0
0000F61C 323B 0000                  		move.w	Brick_TypeIndex(pc,d0.w),d1
0000F620 4EBB 1000                  		jsr	Brick_TypeIndex(pc,d1.w)
0000F624 323C 001B                  		move.w	#$1B,d1
0000F628 343C 0010                  		move.w	#$10,d2
0000F62C 363C 0011                  		move.w	#$11,d3
0000F630 3828 0008                  		move.w	obX(a0),d4
0000F634 6100 0000                  		bsr.w	SolidObject
0000F638                            
0000F638                            	@chkdel:
0000F638 6100 EDEE                  		bsr.w	DisplaySprite
0000F65A 4E75                       		rts	
0000F65C                            ; ===========================================================================
0000F65C 0000                       Brick_TypeIndex:dc.w Brick_Type00-Brick_TypeIndex
0000F65E 0000                       		dc.w Brick_Type01-Brick_TypeIndex
0000F660 0000                       		dc.w Brick_Type02-Brick_TypeIndex
0000F662 0000                       		dc.w Brick_Type03-Brick_TypeIndex
0000F664 0000                       		dc.w Brick_Type04-Brick_TypeIndex
0000F666                            ; ===========================================================================
0000F666                            
0000F666                            Brick_Type00:
0000F666 4E75                       		rts	
0000F668                            ; ===========================================================================
0000F668                            
0000F668                            Brick_Type02:
0000F668 3038 D008                  		move.w	(v_player+obX).w,d0
0000F66C 9068 0008                  		sub.w	obX(a0),d0
0000F670 6400                       		bcc.s	loc_E888
0000F672 4440                       		neg.w	d0
0000F674                            
0000F674                            loc_E888:
0000F674 0C40 0090                  		cmpi.w	#$90,d0		; is Sonic within $90 pixels of	the block?
0000F678 6400                       		bcc.s	Brick_Type01	; if not, resume wobbling
0000F67A 117C 0003 0028             		move.b	#3,obSubtype(a0)	; if yes, make the block fall
0000F680                            
0000F680                            Brick_Type01:
0000F680 7000                       		moveq	#0,d0
0000F682 1038 FE74                  		move.b	(v_oscillate+$16).w,d0
0000F686 0828 0003 0028             		btst	#3,obSubtype(a0)
0000F68C 6700                       		beq.s	loc_E8A8
0000F68E 4440                       		neg.w	d0
0000F690 0640 0010                  		addi.w	#$10,d0
0000F694                            
0000F694                            loc_E8A8:
0000F694 3228 0030                  		move.w	brick_origY(a0),d1
0000F698 9240                       		sub.w	d0,d1
0000F69A 3141 000C                  		move.w	d1,obY(a0)	; update the block's position to make it wobble
0000F69E 4E75                       		rts	
0000F6A0                            ; ===========================================================================
0000F6A0                            
0000F6A0                            Brick_Type03:
0000F6A0 6100 ED60                  		bsr.w	SpeedToPos
0000F6A4 0668 0018 0012             		addi.w	#$18,obVelY(a0)	; increase falling speed
0000F6AA 6100 0000                  		bsr.w	ObjFloorDist
0000F6AE 4A41                       		tst.w	d1		; has the block	hit the	floor?
0000F6B0 6A00 0000                  		bpl.w	locret_E8EE	; if not, branch
0000F6B4 D368 000C                  		add.w	d1,obY(a0)
0000F6B8 4268 0012                  		clr.w	obVelY(a0)	; stop the block falling
0000F6BC 3168 000C 0030             		move.w	obY(a0),brick_origY(a0)
0000F6C2 117C 0004 0028             		move.b	#4,obSubtype(a0)
0000F6C8 3011                       		move.w	(a1),d0
0000F6CA 0240 03FF                  		andi.w	#$3FF,d0
0000F6CE 0C40 02E8                  		cmpi.w	#$2E8,d0
0000F6D2 6400                       		bcc.s	locret_E8EE
0000F6D4 117C 0000 0028             		move.b	#0,obSubtype(a0)
0000F6DA                            
0000F6DA                            locret_E8EE:
0000F6DA 4E75                       		rts	
0000F6DC                            ; ===========================================================================
0000F6DC                            
0000F6DC                            Brick_Type04:
0000F6DC 7000                       		moveq	#0,d0
0000F6DE 1038 FE70                  		move.b	(v_oscillate+$12).w,d0
0000F6E2 E648                       		lsr.w	#3,d0
0000F6E4 3228 0030                  		move.w	brick_origY(a0),d1
0000F6E8 9240                       		sub.w	d0,d1
0000F6EA 3141 000C                  		move.w	d1,obY(a0)	; make the block wobble
0000F6EE 4E75                       		rts	
0000F6EE 4E75                       		rts	
0000F6F0                            Map_Brick:	include	"_maps\MZ Bricks.asm"
0000F6F0                            ; ---------------------------------------------------------------------------
0000F6F0                            ; Sprite mappings - solid blocks and blocks that fall from the ceiling (MZ)
0000F6F0                            ; ---------------------------------------------------------------------------
0000F6F0                            Map_Brick_internal:
0000F6F0 0000                       		dc.w @brick-Map_Brick_internal
0000F6F2 01                         @brick:		dc.b 1
0000F6F3 F00F 0001 F0               		dc.b $F0, $F, 0, 1, $F0
0000F6F8                            		even
0000F6F8                            		even
0000F6F8                            
0000F6F8                            		include	"_incObj\12 Light.asm"
0000F6F8                            ; ---------------------------------------------------------------------------
0000F6F8                            ; Object 12 - lamp (SYZ)
0000F6F8                            ; ---------------------------------------------------------------------------
0000F6F8                            
0000F6F8                            SpinningLight:
0000F6F8 7000                       		moveq	#0,d0
0000F6FA 1028 0024                  		move.b	obRoutine(a0),d0
0000F6FE 323B 0000                  		move.w	Light_Index(pc,d0.w),d1
0000F702 4EFB 1000                  		jmp	Light_Index(pc,d1.w)
0000F706                            ; ===========================================================================
0000F706 0000                       Light_Index:	dc.w Light_Main-Light_Index
0000F708 0000                       		dc.w Light_Animate-Light_Index
0000F70A                            ; ===========================================================================
0000F70A                            
0000F70A                            Light_Main:	; Routine 0
0000F70A 5428 0024                  		addq.b	#2,obRoutine(a0)
0000F70E 217C 0000 0000 0004        		move.l	#Map_Light,obMap(a0)
0000F716 317C 0000 0002             		move.w	#0,obGfx(a0)
0000F71C 117C 0004 0001             		move.b	#4,obRender(a0)
0000F722 117C 0010 0019             		move.b	#$10,obActWid(a0)
0000F728 117C 0006 0018             		move.b	#6,obPriority(a0)
0000F72E                            
0000F72E                            Light_Animate:	; Routine 2
0000F72E 5328 001E                  		subq.b	#1,obTimeFrame(a0)
0000F732 6A00                       		bpl.s	@chkdel
0000F734 117C 0007 001E             		move.b	#7,obTimeFrame(a0)
0000F73A 5228 001A                  		addq.b	#1,obFrame(a0)
0000F73E 0C28 0006 001A             		cmpi.b	#6,obFrame(a0)
0000F744 6500                       		bcs.s	@chkdel
0000F746 117C 0000 001A             		move.b	#0,obFrame(a0)
0000F74C                            
0000F74C                            	@chkdel:
0000F76A 6000 ECBC                  		bra.w	DisplaySprite
0000F76A 6000 ECBC                  		bra.w	DisplaySprite
0000F76E                            Map_Light	include	"_maps\Light.asm"
0000F76E                            ; ---------------------------------------------------------------------------
0000F76E                            ; Sprite mappings - lamp (SYZ)
0000F76E                            ; ---------------------------------------------------------------------------
0000F76E                            Map_Light_internal:
0000F76E 0000                       		dc.w @0-Map_Light_internal
0000F770 0000                       		dc.w @1-Map_Light_internal
0000F772 0000                       		dc.w @2-Map_Light_internal
0000F774 0000                       		dc.w @3-Map_Light_internal
0000F776 0000                       		dc.w @4-Map_Light_internal
0000F778 0000                       		dc.w @5-Map_Light_internal
0000F77A 02                         @0:		dc.b 2
0000F77B F80C 0031 F0               		dc.b $F8, $C, 0, $31, $F0
0000F780 000C 1031 F0               		dc.b 0,	$C, $10, $31, $F0
0000F785 02                         @1:		dc.b 2
0000F786 F80C 0035 F0               		dc.b $F8, $C, 0, $35, $F0
0000F78B 000C 1035 F0               		dc.b 0,	$C, $10, $35, $F0
0000F790 02                         @2:		dc.b 2
0000F791 F80C 0039 F0               		dc.b $F8, $C, 0, $39, $F0
0000F796 000C 1039 F0               		dc.b 0,	$C, $10, $39, $F0
0000F79B 02                         @3:		dc.b 2
0000F79C F80C 003D F0               		dc.b $F8, $C, 0, $3D, $F0
0000F7A1 000C 103D F0               		dc.b 0,	$C, $10, $3D, $F0
0000F7A6 02                         @4:		dc.b 2
0000F7A7 F80C 0041 F0               		dc.b $F8, $C, 0, $41, $F0
0000F7AC 000C 1041 F0               		dc.b 0,	$C, $10, $41, $F0
0000F7B1 02                         @5:		dc.b 2
0000F7B2 F80C 0045 F0               		dc.b $F8, $C, 0, $45, $F0
0000F7B7 000C 1045 F0               		dc.b 0,	$C, $10, $45, $F0
0000F7BC                            		even
0000F7BC                            		even
0000F7BC                            		include	"_incObj\47 Bumper.asm"
0000F7BC                            ; ---------------------------------------------------------------------------
0000F7BC                            ; Object 47 - pinball bumper (SYZ)
0000F7BC                            ; ---------------------------------------------------------------------------
0000F7BC                            
0000F7BC                            Bumper:
0000F7BC 7000                       		moveq	#0,d0
0000F7BE 1028 0024                  		move.b	obRoutine(a0),d0
0000F7C2 323B 0000                  		move.w	Bump_Index(pc,d0.w),d1
0000F7C6 4EFB 1000                  		jmp	Bump_Index(pc,d1.w)
0000F7CA                            ; ===========================================================================
0000F7CA 0000                       Bump_Index:	dc.w Bump_Main-Bump_Index
0000F7CC 0000                       		dc.w Bump_Hit-Bump_Index
0000F7CE                            ; ===========================================================================
0000F7CE                            
0000F7CE                            Bump_Main:	; Routine 0
0000F7CE 5428 0024                  		addq.b	#2,obRoutine(a0)
0000F7D2 217C 0000 0000 0004        		move.l	#Map_Bump,obMap(a0)
0000F7DA 317C 0380 0002             		move.w	#$380,obGfx(a0)
0000F7E0 117C 0004 0001             		move.b	#4,obRender(a0)
0000F7E6 117C 0010 0019             		move.b	#$10,obActWid(a0)
0000F7EC 117C 0001 0018             		move.b	#1,obPriority(a0)
0000F7F2 117C 00D7 0020             		move.b	#$D7,obColType(a0)
0000F7F8                            
0000F7F8                            Bump_Hit:	; Routine 2
0000F7F8 4A28 0021                  		tst.b	obColProp(a0)	; has Sonic touched the	bumper?
0000F7FC 6700 0000                  		beq.w	@display	; if not, branch
0000F800 4228 0021                  		clr.b	obColProp(a0)
0000F804 43F8 D000                  		lea	(v_player).w,a1
0000F808 3228 0008                  		move.w	obX(a0),d1
0000F80C 3428 000C                  		move.w	obY(a0),d2
0000F810 9269 0008                  		sub.w	obX(a1),d1
0000F814 9469 000C                  		sub.w	obY(a1),d2
0000F818 4EB9 0000 2ABA             		jsr	(CalcAngle).l
0000F81E 4EB9 0000 27EC             		jsr	(CalcSine).l
0000F824 C3FC F900                  		muls.w	#-$700,d1
0000F828 E081                       		asr.l	#8,d1
0000F82A 3341 0010                  		move.w	d1,obVelX(a1)	; bounce Sonic away
0000F82E C1FC F900                  		muls.w	#-$700,d0
0000F832 E080                       		asr.l	#8,d0
0000F834 3340 0012                  		move.w	d0,obVelY(a1)	; bounce Sonic away
0000F838 08E9 0001 0022             		bset	#1,obStatus(a1)
0000F83E 08A9 0004 0022             		bclr	#4,obStatus(a1)
0000F844 08A9 0005 0022             		bclr	#5,obStatus(a1)
0000F84A 4229 003C                  		clr.b	$3C(a1)
0000F84E 117C 0001 001C             		move.b	#1,obAnim(a0)	; use "hit" animation
0000F85E 45F8 FC00                  		lea	(v_objstate).w,a2
0000F862 7000                       		moveq	#0,d0
0000F864 1028 0023                  		move.b	obRespawnNo(a0),d0
0000F868 6700                       		beq.s	@addscore
0000F86A 0C32 008A 0002             		cmpi.b	#$8A,2(a2,d0.w)	; has bumper been hit 10 times?
0000F870 6400                       		bcc.s	@display	; if yes, Sonic	gets no	points
0000F872 5232 0002                  		addq.b	#1,2(a2,d0.w)
0000F876                            
0000F876                            	@addscore:
0000F876 7001                       		moveq	#1,d0
0000F878 4EB9 0000 0000             		jsr	(AddPoints).l	; add 10 to score
0000F87E 6100 F030                  		bsr.w	FindFreeObj
0000F882 6600                       		bne.s	@display
0000F884 137C 0029 0000             		move.b	#id_Points,0(a1) ; load points object
0000F88A 3368 0008 0008             		move.w	obX(a0),obX(a1)
0000F890 3368 000C 000C             		move.w	obY(a0),obY(a1)
0000F896 137C 0004 001A             		move.b	#4,obFrame(a1)
0000F89C                            
0000F89C                            	@display:
0000F89C 43F9 0000 0000             		lea	(Ani_Bump).l,a1
0000F8A2 6100 B942                  		bsr.w	AnimateSprite
0000F8C2 6000 EB64                  		bra.w	DisplaySprite
0000F8C6                            ; ===========================================================================
0000F8C6                            
0000F8C6                            @resetcount:
0000F8C6 45F8 FC00                  		lea	(v_objstate).w,a2
0000F8CA 7000                       		moveq	#0,d0
0000F8CC 1028 0023                  		move.b	obRespawnNo(a0),d0
0000F8D0 6700                       		beq.s	@delete
0000F8D2 08B2 0007 0002             		bclr	#7,2(a2,d0.w)
0000F8D8                            
0000F8D8                            	@delete:
0000F8D8 6000 EB8A                  		bra.w	DeleteObject
0000F8D8 6000 EB8A                  		bra.w	DeleteObject
0000F8DC                            		include	"_anim\Bumper.asm"
0000F8DC                            ; ---------------------------------------------------------------------------
0000F8DC                            ; Animation script - flamethrower (SBZ)
0000F8DC                            ; ---------------------------------------------------------------------------
0000F8DC 0000                       Ani_Bump:	dc.w byte_EAF4-Ani_Bump
0000F8DE 0000                       		dc.w byte_EAF8-Ani_Bump
0000F8E0 0F00 FF                    byte_EAF4:	dc.b $F, 0, afEnd
0000F8E4 00                         		even
0000F8E4 0301 0201 02FD 00          byte_EAF8:	dc.b 3,	1, 2, 1, 2, afChange, 0
0000F8EC 00                         		even
0000F8EC 00                         		even
0000F8EC                            Map_Bump:	include	"_maps\Bumper.asm"
0000F8EC                            ; ---------------------------------------------------------------------------
0000F8EC                            ; Sprite mappings - pinball bumper (SYZ)
0000F8EC                            ; ---------------------------------------------------------------------------
0000F8EC                            Map_Bump_internal:
0000F8EC 0000                       		dc.w @normal-Map_Bump_internal
0000F8EE 0000                       		dc.w @bumped1-Map_Bump_internal
0000F8F0 0000                       		dc.w @bumped2-Map_Bump_internal
0000F8F2 02                         @normal:	dc.b 2
0000F8F3 F007 0000 F0               		dc.b $F0, 7, 0,	0, $F0
0000F8F8 F007 0800 00               		dc.b $F0, 7, 8,	0, 0
0000F8FD 02                         @bumped1:	dc.b 2
0000F8FE F406 0008 F4               		dc.b $F4, 6, 0,	8, $F4
0000F903 F402 0808 04               		dc.b $F4, 2, 8,	8, 4
0000F908 02                         @bumped2:	dc.b 2
0000F909 F007 000E F0               		dc.b $F0, 7, 0,	$E, $F0
0000F90E F007 080E 00               		dc.b $F0, 7, 8,	$E, 0
0000F914 00                         		even
0000F914 00                         		even
0000F914                            
0000F914                            		include	"_incObj\0D Signpost.asm" ; includes "GotThroughAct" subroutine
0000F914                            ; ---------------------------------------------------------------------------
0000F914                            ; Object 0D - signpost at the end of a level
0000F914                            ; ---------------------------------------------------------------------------
0000F914                            
0000F914                            Signpost:
0000F914 7000                       		moveq	#0,d0
0000F916 1028 0024                  		move.b	obRoutine(a0),d0
0000F91A 323B 0000                  		move.w	Sign_Index(pc,d0.w),d1
0000F91E 4EBB 1000                  		jsr	Sign_Index(pc,d1.w)
0000F922 43F9 0000 0000             		lea	(Ani_Sign).l,a1
0000F928 6100 B8BC                  		bsr.w	AnimateSprite
0000F92C 6100 EAFA                  		bsr.w	DisplaySprite
0000F94E 4E75                       		rts	
0000F950                            ; ===========================================================================
0000F950 0000                       Sign_Index:	dc.w Sign_Main-Sign_Index
0000F952 0000                       		dc.w Sign_Touch-Sign_Index
0000F954 0000                       		dc.w Sign_Spin-Sign_Index
0000F956 0000                       		dc.w GotThroughAct-Sign_Index
0000F958 0000                       		dc.w Sign_Exit-Sign_Index
0000F95A                            
0000F95A =00000030                  spintime:	equ $30		; time for signpost to spin
0000F95A =00000032                  sparkletime:	equ $32		; time between sparkles
0000F95A =00000034                  sparkle_id:	equ $34		; counter to keep track of sparkles
0000F95A                            ; ===========================================================================
0000F95A                            
0000F95A                            Sign_Main:	; Routine 0
0000F95A 5428 0024                  		addq.b	#2,obRoutine(a0)
0000F95E 217C 0000 0000 0004        		move.l	#Map_Sign,obMap(a0)
0000F966 317C 0680 0002             		move.w	#$680,obGfx(a0)
0000F96C 117C 0004 0001             		move.b	#4,obRender(a0)
0000F972 117C 0018 0019             		move.b	#$18,obActWid(a0)
0000F978 117C 0004 0018             		move.b	#4,obPriority(a0)
0000F97E                            
0000F97E                            Sign_Touch:	; Routine 2
0000F97E 3038 D008                  		move.w	(v_player+obX).w,d0
0000F982 9068 0008                  		sub.w	obX(a0),d0
0000F986 6500                       		bcs.s	@notouch
0000F988 0C40 0020                  		cmpi.w	#$20,d0		; is Sonic within $20 pixels of	the signpost?
0000F98C 6400                       		bcc.s	@notouch	; if not, branch
0000F98E 11FC 0001 F7AA             		move.b  #1,($FFFFF7AA).w ; Lock the screen
0000F99E 4238 FE1E                  		clr.b	(f_timecount).w	; stop time counter
0000F9A2 31F8 F72A F728             		move.w	(v_limitright2).w,(v_limitleft2).w ; lock screen position
0000F9A8 5428 0024                  		addq.b	#2,obRoutine(a0)
0000F9AC                            
0000F9AC                            	@notouch:
0000F9AC 4E75                       		rts	
0000F9AE                            ; ===========================================================================
0000F9AE                            
0000F9AE                            Sign_Spin:	; Routine 4
0000F9AE 5368 0030                  		subq.w	#1,spintime(a0)	; subtract 1 from spin time
0000F9B2 6A00                       		bpl.s	@chksparkle	; if time remains, branch
0000F9B4 317C 001E 0030             		move.w	#30,spintime(a0) ; set spin cycle time to 1 second
0000F9BA 5228 001C                  		addq.b	#1,obAnim(a0)	; next spin cycle
0000F9BE 0C28 0003 001C             		cmpi.b	#3,obAnim(a0)	; have 3 spin cycles completed?
0000F9C4 6600                       		bne.s	@chksparkle	; if not, branch
0000F9C6 5428 0024                  		addq.b	#2,obRoutine(a0)
0000F9CA                            
0000F9CA                            	@chksparkle:
0000F9CA 5368 0032                  		subq.w	#1,sparkletime(a0) ; subtract 1 from time delay
0000F9CE 6A00                       		bpl.s	@fail		; if time remains, branch
0000F9D0 317C 000B 0032             		move.w	#$B,sparkletime(a0) ; set time between sparkles to $B frames
0000F9D6 7000                       		moveq	#0,d0
0000F9D8 1028 0034                  		move.b	sparkle_id(a0),d0 ; get sparkle id
0000F9DC 5428 0034                  		addq.b	#2,sparkle_id(a0) ; increment sparkle counter
0000F9E0 0228 000E 0034             		andi.b	#$E,sparkle_id(a0)
0000F9E6 45FB 0000                  		lea	Sign_SparkPos(pc,d0.w),a2 ; load sparkle position data
0000F9EA 6100 EEC4                  		bsr.w	FindFreeObj
0000F9EE 6600                       		bne.s	@fail
0000F9F0 137C 0025 0000             		move.b	#id_Rings,0(a1)	; load rings object
0000F9F6 137C 0006 0024             		move.b	#id_Ring_Sparkle,obRoutine(a1) ; jump to ring sparkle subroutine
0000F9FC 101A                       		move.b	(a2)+,d0
0000F9FE 4880                       		ext.w	d0
0000FA00 D068 0008                  		add.w	obX(a0),d0
0000FA04 3340 0008                  		move.w	d0,obX(a1)
0000FA08 101A                       		move.b	(a2)+,d0
0000FA0A 4880                       		ext.w	d0
0000FA0C D068 000C                  		add.w	obY(a0),d0
0000FA10 3340 000C                  		move.w	d0,obY(a1)
0000FA14 237C 0000 A982 0004        		move.l	#Map_Ring,obMap(a1)
0000FA1C 337C 27B2 0002             		move.w	#$27B2,obGfx(a1)
0000FA22 137C 0004 0001             		move.b	#4,obRender(a1)
0000FA28 137C 0002 0018             		move.b	#2,obPriority(a1)
0000FA2E 137C 0008 0019             		move.b	#8,obActWid(a1)
0000FA34                            
0000FA34                            	@fail:
0000FA34 4E75                       		rts	
0000FA36                            ; ===========================================================================
0000FA36 E8F0                       Sign_SparkPos:	dc.b -$18,-$10		; x-position, y-position
0000FA38 0808                       		dc.b	8,   8
0000FA3A F000                       		dc.b -$10,   0
0000FA3C 18F8                       		dc.b  $18,  -8
0000FA3E 00F8                       		dc.b	0,  -8
0000FA40 1000                       		dc.b  $10,   0
0000FA42 E808                       		dc.b -$18,   8
0000FA44 1810                       		dc.b  $18, $10
0000FA46                            ; ===========================================================================
0000FA46                            
0000FA46                            
0000FA46                            ; ---------------------------------------------------------------------------
0000FA46                            ; Subroutine to	set up bonuses at the end of an	act
0000FA46                            ; ---------------------------------------------------------------------------
0000FA46                            
0000FA46                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0000FA46                            
0000FA46                            
0000FA46                            GotThroughAct:
0000FA46 11FC 0001 F5C0             		move.b  #1,($FFFFF5C0).w ; Set victory animation flag
0000FA4C 4A38 D5C0                  		tst.b	(v_objspace+$5C0).w
0000FA50 6600                       		bne.s	locret_ECEE
0000FA52 31F8 F72A F728             		move.w	(v_limitright2).w,(v_limitleft2).w
0000FA58 4238 FE2D                  		clr.b	(v_invinc).w	; disable invincibility
0000FA5C 4238 FE1E                  		clr.b	(f_timecount).w	; stop time counter
0000FA60 11FC 003A D5C0             		move.b	#id_GotThroughCard,(v_objspace+$5C0).w
0000FA66 7000                       		moveq	#plcid_TitleCard,d0
0000FA68 4EB9 0000 13A0             		jsr	(NewPLC).l	; load title card patterns
0000FA6E 11FC 0001 F7D6             		move.b	#1,(f_endactbonus).w
0000FA74 7000                       		moveq	#0,d0
0000FA76 1038 FE23                  		move.b	(v_timemin).w,d0
0000FA7A C0FC 003C                  		mulu.w	#60,d0		; convert minutes to seconds
0000FA7E 7200                       		moveq	#0,d1
0000FA80 1238 FE24                  		move.b	(v_timesec).w,d1
0000FA84 D041                       		add.w	d1,d0		; add up your time
0000FA86 80FC 000F                  		divu.w	#15,d0		; divide by 15
0000FA8A 7214                       		moveq	#$14,d1
0000FA8C B041                       		cmp.w	d1,d0		; is time 5 minutes or higher?
0000FA8E 6500                       		bcs.s	@hastimebonus	; if not, branch
0000FA90 3001                       		move.w	d1,d0		; use minimum time bonus (0)
0000FA92                            
0000FA92                            	@hastimebonus:
0000FA92 D040                       		add.w	d0,d0
0000FA94 31FB 0000 F7D2             		move.w	TimeBonuses(pc,d0.w),(v_timebonus).w ; set time bonus
0000FA9A 3038 FE20                  		move.w	(v_rings).w,d0	; load number of rings
0000FA9E C0FC 000A                  		mulu.w	#10,d0		; multiply by 10
0000FAA2 31C0 F7D4                  		move.w	d0,(v_ringbonus).w ; set ring bonus
0000FAB0                            
0000FAB0                            locret_ECEE:
0000FAB0 4E75                       		rts	
0000FAB2                            ; End of function GotThroughAct
0000FAB2                            
0000FAB2                            ; ===========================================================================
0000FAB2 1388 1388 03E8 01F4 0190+  TimeBonuses:	dc.w 5000, 5000, 1000, 500, 400, 400, 300, 300,	200, 200
0000FAC6 00C8 00C8 0064 0064 0064+  		dc.w 200, 200, 100, 100, 100, 100, 50, 50, 50, 50, 0
0000FADC                            ; ===========================================================================
0000FADC                            
0000FADC                            Sign_Exit:	; Routine 8
0000FADC 4E75                       		rts	
0000FADC 4E75                       		rts	
0000FADE                            		include	"_anim\Signpost.asm"
0000FADE                            ; ---------------------------------------------------------------------------
0000FADE                            ; Animation script - signpost
0000FADE                            ; ---------------------------------------------------------------------------
0000FADE 0000                       Ani_Sign:	dc.w @eggman-Ani_Sign
0000FAE0 0000                       		dc.w @spin1-Ani_Sign
0000FAE2 0000                       		dc.w @spin2-Ani_Sign
0000FAE4 0000                       		dc.w @sonic-Ani_Sign
0000FAE6 0F00 FF                    @eggman:	dc.b $F, 0, afEnd
0000FAEA 00                         		even
0000FAEA 0100 0102 03FF             @spin1:		dc.b 1,	0, 1, 2, 3, afEnd
0000FAF0 0104 0102 03FF             @spin2:		dc.b 1,	4, 1, 2, 3, afEnd
0000FAF6 0F04 FF                    @sonic:		dc.b $F, 4, afEnd
0000FAFA 00                         		even
0000FAFA 00                         		even
0000FAFA                            Map_Sign:	include	"_maps\Signpost.asm"
0000FAFA                            ; ================================================================================
0000FAFA                            ; Sprite Mappings - generated by Flex 2 Sat Jun 05 2021 11:02:58 GMT-0400 (Eastern Daylight Time)
0000FAFA                            ; ================================================================================
0000FAFA                            
0000FAFA                            DATACNJKW3D82BR:
0000FAFA 0000 0000                  	dc.w DATACNJKW3D82BR_0-DATACNJKW3D82BR, DATACNJKW3D82BR_1-DATACNJKW3D82BR
0000FAFE 0000 0000                  	dc.w DATACNJKW3D82BR_2-DATACNJKW3D82BR, DATACNJKW3D82BR_3-DATACNJKW3D82BR
0000FB02 0000                       	dc.w DATACNJKW3D82BR_4-DATACNJKW3D82BR
0000FB04 03                         DATACNJKW3D82BR_0: dc.b $3
0000FB05 F00B 0000 E8               	dc.b $F0, $B, $0, $0, $E8
0000FB0A F00B 0800 00               	dc.b $F0, $B, $8, $0, $0
0000FB0F 1001 0038 FC               	dc.b $10, $1, $0, $38, $FC
0000FB14 02                         DATACNJKW3D82BR_1: dc.b $2
0000FB15 F00F 000C F0               	dc.b $F0, $F, $0, $C, $F0
0000FB1A 1001 0038 FC               	dc.b $10, $1, $0, $38, $FC
0000FB1F 02                         DATACNJKW3D82BR_2: dc.b $2
0000FB20 F003 001C FC               	dc.b $F0, $3, $0, $1C, $FC
0000FB25 1001 0838 FC               	dc.b $10, $1, $8, $38, $FC
0000FB2A 02                         DATACNJKW3D82BR_3: dc.b $2
0000FB2B F00F 080C F0               	dc.b $F0, $F, $8, $C, $F0
0000FB30 1001 0838 FC               	dc.b $10, $1, $8, $38, $FC
0000FB35 03                         DATACNJKW3D82BR_4: dc.b $3
0000FB36 F00B 0020 E8               	dc.b $F0, $B, $0, $20, $E8
0000FB3B F00B 002C 00               	dc.b $F0, $B, $0, $2C, $0
0000FB40 1001 0038 FC               	dc.b $10, $1, $0, $38, $FC
0000FB46 00                         	even
0000FB46 00                         	even
0000FB46                            
0000FB46                            		include	"_incObj\4C & 4D Lava Geyser Maker.asm"
0000FB46                            ; ---------------------------------------------------------------------------
0000FB46                            ; Object 4C - lava geyser / lavafall producer (MZ)
0000FB46                            ; ---------------------------------------------------------------------------
0000FB46                            
0000FB46                            GeyserMaker:
0000FB46 7000                       		moveq	#0,d0
0000FB48 1028 0024                  		move.b	obRoutine(a0),d0
0000FB4C 323B 0000                  		move.w	GMake_Index(pc,d0.w),d1
0000FB50 4EBB 1000                  		jsr	GMake_Index(pc,d1.w)
0000FB54 6000 0000                  		bra.w	Geyser_ChkDel
0000FB58                            ; ===========================================================================
0000FB58 0000                       GMake_Index:	dc.w GMake_Main-GMake_Index
0000FB5A 0000                       		dc.w GMake_Wait-GMake_Index
0000FB5C 0000                       		dc.w GMake_ChkType-GMake_Index
0000FB5E 0000                       		dc.w GMake_MakeLava-GMake_Index
0000FB60 0000                       		dc.w GMake_Display-GMake_Index
0000FB62 0000                       		dc.w GMake_Delete-GMake_Index
0000FB64                            
0000FB64 =00000034                  gmake_time:	equ $34		; time delay (2 bytes)
0000FB64 =00000032                  gmake_timer:	equ $32		; current time remaining (2 bytes)
0000FB64 =0000003C                  gmake_parent:	equ $3C		; address of parent object
0000FB64                            ; ===========================================================================
0000FB64                            
0000FB64                            GMake_Main:	; Routine 0
0000FB64 5428 0024                  		addq.b	#2,obRoutine(a0)
0000FB68 217C 0000 0000 0004        		move.l	#Map_Geyser,obMap(a0)
0000FB70 317C E3A8 0002             		move.w	#$E3A8,obGfx(a0)
0000FB76 117C 0004 0001             		move.b	#4,obRender(a0)
0000FB7C 117C 0001 0018             		move.b	#1,obPriority(a0)
0000FB82 117C 0038 0019             		move.b	#$38,obActWid(a0)
0000FB88 317C 0078 0034             		move.w	#120,gmake_time(a0) ; set time delay to 2 seconds
0000FB8E                            
0000FB8E                            GMake_Wait:	; Routine 2
0000FB8E 5368 0032                  		subq.w	#1,gmake_timer(a0) ; decrement timer
0000FB92 6A00                       		bpl.s	@cancel		; if time remains, branch
0000FB94                            
0000FB94 3168 0034 0032             		move.w	gmake_time(a0),gmake_timer(a0) ; reset timer
0000FB9A 3038 D00C                  		move.w	(v_player+obY).w,d0
0000FB9E 3228 000C                  		move.w	obY(a0),d1
0000FBA2 B041                       		cmp.w	d1,d0
0000FBA4 6400                       		bcc.s	@cancel
0000FBA6 0441 0170                  		subi.w	#$170,d1
0000FBAA B041                       		cmp.w	d1,d0
0000FBAC 6500                       		bcs.s	@cancel
0000FBAE 5428 0024                  		addq.b	#2,obRoutine(a0) ; if Sonic is within range, goto GMake_ChkType
0000FBB2                            
0000FBB2                            	@cancel:
0000FBB2 4E75                       		rts	
0000FBB4                            ; ===========================================================================
0000FBB4                            
0000FBB4                            GMake_MakeLava:	; Routine 6
0000FBB4 5428 0024                  		addq.b	#2,obRoutine(a0)
0000FBB8 6100 ED0C                  		bsr.w	FindNextFreeObj
0000FBBC 6600                       		bne.s	@fail
0000FBBE 137C 004D 0000             		move.b	#id_LavaGeyser,0(a1) ; load lavafall object
0000FBC4 3368 0008 0008             		move.w	obX(a0),obX(a1)
0000FBCA 3368 000C 000C             		move.w	obY(a0),obY(a1)
0000FBD0 1368 0028 0028             		move.b	obSubtype(a0),obSubtype(a1)
0000FBD6 2348 003C                  		move.l	a0,gmake_parent(a1)
0000FBDA                            
0000FBDA                            	@fail:
0000FBDA 117C 0001 001C             		move.b	#1,obAnim(a0)
0000FBE0 4A28 0028                  		tst.b	obSubtype(a0)	; is object type 0 (geyser) ?
0000FBE4 6700                       		beq.s	@isgeyser	; if yes, branch
0000FBE6 117C 0004 001C             		move.b	#4,obAnim(a0)
0000FBEC 6000                       		bra.s	GMake_Display
0000FBEE                            ; ===========================================================================
0000FBEE                            
0000FBEE                            	@isgeyser:
0000FBEE 2268 003C                  		movea.l	gmake_parent(a0),a1 ; get parent object address
0000FBF2 08E9 0001 0022             		bset	#1,obStatus(a1)
0000FBF8 337C FA80 0012             		move.w	#-$580,obVelY(a1)
0000FBFE 6000                       		bra.s	GMake_Display
0000FC00                            ; ===========================================================================
0000FC00                            
0000FC00                            GMake_ChkType:	; Routine 4
0000FC00 4A28 0028                  		tst.b	obSubtype(a0)	; is object type 00 (geyser) ?
0000FC04 6700                       		beq.s	GMake_Display	; if yes, branch
0000FC06 5428 0024                  		addq.b	#2,obRoutine(a0)
0000FC0A 4E75                       		rts	
0000FC0C                            ; ===========================================================================
0000FC0C                            
0000FC0C                            GMake_Display:	; Routine 8
0000FC0C 43F9 0000 0000             		lea	(Ani_Geyser).l,a1
0000FC12 6100 B5D2                  		bsr.w	AnimateSprite
0000FC16 6100 E810                  		bsr.w	DisplaySprite
0000FC1A 4E75                       		rts	
0000FC1C                            ; ===========================================================================
0000FC1C                            
0000FC1C                            GMake_Delete:	; Routine $A
0000FC1C 117C 0000 001C             		move.b	#0,obAnim(a0)
0000FC22 117C 0002 0024             		move.b	#2,obRoutine(a0)
0000FC28 4A28 0028                  		tst.b	obSubtype(a0)
0000FC2C 6700 E836                  		beq.w	DeleteObject
0000FC30 4E75                       		rts	
0000FC32                            
0000FC32                            
0000FC32                            ; ---------------------------------------------------------------------------
0000FC32                            ; Object 4D - lava geyser / lavafall (MZ)
0000FC32                            ; ---------------------------------------------------------------------------
0000FC32                            
0000FC32                            LavaGeyser:
0000FC32 7000                       		moveq	#0,d0
0000FC34 1028 0024                  		move.b	obRoutine(a0),d0
0000FC38 323B 0000                  		move.w	Geyser_Index(pc,d0.w),d1
0000FC3C 4EBB 1000                  		jsr	Geyser_Index(pc,d1.w)
0000FC40 6000 E7E6                  		bra.w	DisplaySprite
0000FC44                            ; ===========================================================================
0000FC44 0000                       Geyser_Index:	dc.w Geyser_Main-Geyser_Index
0000FC46 0000                       		dc.w Geyser_Action-Geyser_Index
0000FC48 0000                       		dc.w loc_EFFC-Geyser_Index
0000FC4A 0000                       		dc.w Geyser_Delete-Geyser_Index
0000FC4C                            
0000FC4C FB00 0000                  Geyser_Speeds:	dc.w $FB00, 0
0000FC50                            ; ===========================================================================
0000FC50                            
0000FC50                            Geyser_Main:	; Routine 0
0000FC50 5428 0024                  		addq.b	#2,obRoutine(a0)
0000FC54 3168 000C 0030             		move.w	obY(a0),$30(a0)
0000FC5A 4A28 0028                  		tst.b	obSubtype(a0)
0000FC5E 6700                       		beq.s	@isgeyser
0000FC60 0468 0250 000C             		subi.w	#$250,obY(a0)
0000FC66                            
0000FC66                            	@isgeyser:
0000FC66 7000                       		moveq	#0,d0
0000FC68 1028 0028                  		move.b	obSubtype(a0),d0
0000FC6C D040                       		add.w	d0,d0
0000FC6E 317B 00DC 0012             		move.w	Geyser_Speeds(pc,d0.w),obVelY(a0)
0000FC74 2248                       		movea.l	a0,a1
0000FC76 7201                       		moveq	#1,d1
0000FC78 6100                       		bsr.s	@makelava
0000FC7A 6000                       		bra.s	@activate
0000FC7C                            ; ===========================================================================
0000FC7C                            
0000FC7C                            	@loop:
0000FC7C 6100 EC48                  		bsr.w	FindNextFreeObj
0000FC80 6600                       		bne.s	@fail
0000FC82                            
0000FC82                            @makelava:
0000FC82 137C 004D 0000             		move.b	#id_LavaGeyser,0(a1)
0000FC88 237C 0000 0000 0004        		move.l	#Map_Geyser,obMap(a1)
0000FC90 337C 63A8 0002             		move.w	#$63A8,obGfx(a1)
0000FC96 137C 0004 0001             		move.b	#4,obRender(a1)
0000FC9C 137C 0020 0019             		move.b	#$20,obActWid(a1)
0000FCA2 3368 0008 0008             		move.w	obX(a0),obX(a1)
0000FCA8 3368 000C 000C             		move.w	obY(a0),obY(a1)
0000FCAE 1368 0028 0028             		move.b	obSubtype(a0),obSubtype(a1)
0000FCB4 137C 0001 0018             		move.b	#1,obPriority(a1)
0000FCBA 137C 0005 001C             		move.b	#5,obAnim(a1)
0000FCC0 4A28 0028                  		tst.b	obSubtype(a0)
0000FCC4 6700                       		beq.s	@fail
0000FCC6 137C 0002 001C             		move.b	#2,obAnim(a1)
0000FCCC                            
0000FCCC                            	@fail:
0000FCCC 51C9 FFAE                  		dbf	d1,@loop
0000FCD0 4E75                       		rts	
0000FCD2                            ; ===========================================================================
0000FCD2                            
0000FCD2                            @activate:
0000FCD2 0669 0060 000C             		addi.w	#$60,obY(a1)
0000FCD8 3368 0030 0030             		move.w	$30(a0),$30(a1)
0000FCDE 0669 0060 0030             		addi.w	#$60,$30(a1)
0000FCE4 137C 0093 0020             		move.b	#$93,obColType(a1)
0000FCEA 137C 0080 0016             		move.b	#$80,obHeight(a1)
0000FCF0 08E9 0004 0001             		bset	#4,obRender(a1)
0000FCF6 5829 0024                  		addq.b	#4,obRoutine(a1)
0000FCFA 2348 003C                  		move.l	a0,$3C(a1)
0000FCFE 4A28 0028                  		tst.b	obSubtype(a0)
0000FD02 6700                       		beq.s	@sound
0000FD04 7200                       		moveq	#0,d1
0000FD06 6100 FF74                  		bsr.w	@loop
0000FD0A 5429 0024                  		addq.b	#2,obRoutine(a1)
0000FD0E 08E9 0004 0002             		bset	#4,obGfx(a1)
0000FD14 0669 0100 000C             		addi.w	#$100,obY(a1)
0000FD1A 137C 0000 0018             		move.b	#0,obPriority(a1)
0000FD20 3368 0030 0030             		move.w	$30(a0),$30(a1)
0000FD26 2368 003C 003C             		move.l	$3C(a0),$3C(a1)
0000FD2C 117C 0000 0028             		move.b	#0,obSubtype(a0)
0000FD32                            
0000FD32                            	@sound:
0000FD3C                            
0000FD3C                            Geyser_Action:	; Routine 2
0000FD3C 7000                       		moveq	#0,d0
0000FD3E 1028 0028                  		move.b	obSubtype(a0),d0
0000FD42 D040                       		add.w	d0,d0
0000FD44 323B 0000                  		move.w	Geyser_Types(pc,d0.w),d1
0000FD48 4EBB 1000                  		jsr	Geyser_Types(pc,d1.w)
0000FD4C 6100 E6B4                  		bsr.w	SpeedToPos
0000FD50 43F9 0000 0000             		lea	(Ani_Geyser).l,a1
0000FD56 6100 B48E                  		bsr.w	AnimateSprite
0000FD5A                            
0000FD5A                            Geyser_ChkDel:
0000FD78 4E75                       		rts	
0000FD7A                            ; ===========================================================================
0000FD7A 0000                       Geyser_Types:	dc.w Geyser_Type00-Geyser_Types
0000FD7C 0000                       		dc.w Geyser_Type01-Geyser_Types
0000FD7E                            ; ===========================================================================
0000FD7E                            
0000FD7E                            Geyser_Type00:
0000FD7E 0668 0018 0012             		addi.w	#$18,obVelY(a0)	; increase object's falling speed
0000FD84 3028 0030                  		move.w	$30(a0),d0
0000FD88 B068 000C                  		cmp.w	obY(a0),d0
0000FD8C 6400                       		bcc.s	locret_EFDA
0000FD8E 5828 0024                  		addq.b	#4,obRoutine(a0)
0000FD92 2268 003C                  		movea.l	$3C(a0),a1
0000FD96 137C 0003 001C             		move.b	#3,obAnim(a1)
0000FD9C                            
0000FD9C                            locret_EFDA:
0000FD9C 4E75                       		rts	
0000FD9E                            ; ===========================================================================
0000FD9E                            
0000FD9E                            Geyser_Type01:
0000FD9E 0668 0018 0012             		addi.w	#$18,obVelY(a0)	; increase object's falling speed
0000FDA4 3028 0030                  		move.w	$30(a0),d0
0000FDA8 B068 000C                  		cmp.w	obY(a0),d0
0000FDAC 6400                       		bcc.s	locret_EFFA
0000FDAE 5828 0024                  		addq.b	#4,obRoutine(a0)
0000FDB2 2268 003C                  		movea.l	$3C(a0),a1
0000FDB6 137C 0001 001C             		move.b	#1,obAnim(a1)
0000FDBC                            
0000FDBC                            locret_EFFA:
0000FDBC 4E75                       		rts	
0000FDBE                            ; ===========================================================================
0000FDBE                            
0000FDBE                            loc_EFFC:	; Routine 4
0000FDBE 2268 003C                  		movea.l	$3C(a0),a1
0000FDC2 0C29 0006 0024             		cmpi.b	#6,obRoutine(a1)
0000FDC8 6700 0000                  		beq.w	Geyser_Delete
0000FDCC 3029 000C                  		move.w	obY(a1),d0
0000FDD0 0640 0060                  		addi.w	#$60,d0
0000FDD4 3140 000C                  		move.w	d0,obY(a0)
0000FDD8 9068 0030                  		sub.w	$30(a0),d0
0000FDDC 4440                       		neg.w	d0
0000FDDE 7208                       		moveq	#8,d1
0000FDE0 0C40 0040                  		cmpi.w	#$40,d0
0000FDE4 6C00                       		bge.s	loc_F026
0000FDE6 720B                       		moveq	#$B,d1
0000FDE8                            
0000FDE8                            loc_F026:
0000FDE8 0C40 0080                  		cmpi.w	#$80,d0
0000FDEC 6F00                       		ble.s	loc_F02E
0000FDEE 720E                       		moveq	#$E,d1
0000FDF0                            
0000FDF0                            loc_F02E:
0000FDF0 5328 001E                  		subq.b	#1,obTimeFrame(a0)
0000FDF4 6A00                       		bpl.s	loc_F04C
0000FDF6 117C 0007 001E             		move.b	#7,obTimeFrame(a0)
0000FDFC 5228 001B                  		addq.b	#1,obAniFrame(a0)
0000FE00 0C28 0002 001B             		cmpi.b	#2,obAniFrame(a0)
0000FE06 6500                       		bcs.s	loc_F04C
0000FE08 117C 0000 001B             		move.b	#0,obAniFrame(a0)
0000FE0E                            
0000FE0E                            loc_F04C:
0000FE0E 1028 001B                  		move.b	obAniFrame(a0),d0
0000FE12 D001                       		add.b	d1,d0
0000FE14 1140 001A                  		move.b	d0,obFrame(a0)
0000FE18 6000 FF40                  		bra.w	Geyser_ChkDel
0000FE1C                            ; ===========================================================================
0000FE1C                            
0000FE1C                            Geyser_Delete:	; Routine 6
0000FE1C 6000 E646                  		bra.w	DeleteObject
0000FE1C 6000 E646                  		bra.w	DeleteObject
0000FE20                            		include	"_incObj\4E Wall of Lava.asm"
0000FE20                            ; ---------------------------------------------------------------------------
0000FE20                            ; Object 4E - advancing	wall of	lava (MZ)
0000FE20                            ; ---------------------------------------------------------------------------
0000FE20                            
0000FE20                            LavaWall:
0000FE20 7000                       		moveq	#0,d0
0000FE22 1028 0024                  		move.b	obRoutine(a0),d0
0000FE26 323B 0000                  		move.w	LWall_Index(pc,d0.w),d1
0000FE2A 4EFB 1000                  		jmp	LWall_Index(pc,d1.w)
0000FE2E                            ; ===========================================================================
0000FE2E 0000                       LWall_Index:	dc.w LWall_Main-LWall_Index
0000FE30 0000                       		dc.w LWall_Solid-LWall_Index
0000FE32 0000                       		dc.w LWall_Action-LWall_Index
0000FE34 0000                       		dc.w LWall_Move-LWall_Index
0000FE36 0000                       		dc.w LWall_Delete-LWall_Index
0000FE38                            
0000FE38 =00000036                  lwall_flag:	equ $36		; flag to start wall moving
0000FE38                            ; ===========================================================================
0000FE38                            
0000FE38                            LWall_Main:	; Routine 0
0000FE38 5828 0024                  		addq.b	#4,obRoutine(a0)
0000FE3C 2248                       		movea.l	a0,a1
0000FE3E 7201                       		moveq	#1,d1
0000FE40 6000                       		bra.s	@make
0000FE42                            ; ===========================================================================
0000FE42                            
0000FE42                            	@loop:
0000FE42 6100 EA82                  		bsr.w	FindNextFreeObj
0000FE46 6600                       		bne.s	@fail
0000FE48                            
0000FE48                            @make:
0000FE48 137C 004E 0000             		move.b	#id_LavaWall,0(a1)	; load object
0000FE4E 237C 0000 0000 0004        		move.l	#Map_LWall,obMap(a1)
0000FE56 337C 63A8 0002             		move.w	#$63A8,obGfx(a1)
0000FE5C 137C 0004 0001             		move.b	#4,obRender(a1)
0000FE62 137C 0050 0019             		move.b	#$50,obActWid(a1)
0000FE68 3368 0008 0008             		move.w	obX(a0),obX(a1)
0000FE6E 3368 000C 000C             		move.w	obY(a0),obY(a1)
0000FE74 137C 0001 0018             		move.b	#1,obPriority(a1)
0000FE7A 137C 0000 001C             		move.b	#0,obAnim(a1)
0000FE80 137C 0094 0020             		move.b	#$94,obColType(a1)
0000FE86 2348 003C                  		move.l	a0,$3C(a1)
0000FE8A                            
0000FE8A                            	@fail:
0000FE8A 51C9 FFB6                  		dbf	d1,@loop	; repeat sequence once
0000FE8E                            
0000FE8E 5C29 0024                  		addq.b	#6,obRoutine(a1)
0000FE92 137C 0004 001A             		move.b	#4,obFrame(a1)
0000FE98                            
0000FE98                            LWall_Action:	; Routine 4
0000FE98 3038 D008                  		move.w	(v_player+obX).w,d0
0000FE9C 9068 0008                  		sub.w	obX(a0),d0
0000FEA0 6400                       		bcc.s	@rangechk
0000FEA2 4440                       		neg.w	d0
0000FEA4                            
0000FEA4                            	@rangechk:
0000FEA4 0C40 00C0                  		cmpi.w	#$C0,d0		; is Sonic within $C0 pixels (x-axis)?
0000FEA8 6400                       		bcc.s	@movewall	; if not, branch
0000FEAA 3038 D00C                  		move.w	(v_player+obY).w,d0
0000FEAE 9068 000C                  		sub.w	obY(a0),d0
0000FEB2 6400                       		bcc.s	@rangechk2
0000FEB4 4440                       		neg.w	d0
0000FEB6                            
0000FEB6                            	@rangechk2:
0000FEB6 0C40 0060                  		cmpi.w	#$60,d0		; is Sonic within $60 pixels (y-axis)?
0000FEBA 6400                       		bcc.s	@movewall	; if not, branch
0000FEBC 117C 0001 0036             		move.b	#1,lwall_flag(a0) ; set object to move
0000FEC2 6000                       		bra.s	LWall_Solid
0000FEC4                            ; ===========================================================================
0000FEC4                            
0000FEC4                            @movewall:
0000FEC4 4A28 0036                  		tst.b	lwall_flag(a0)	; is object set	to move?
0000FEC8 6700                       		beq.s	LWall_Solid	; if not, branch
0000FECA 317C 0180 0010             		move.w	#$180,obVelX(a0) ; set object speed
0000FED0 5528 0024                  		subq.b	#2,$24(a0)
0000FED4                            
0000FED4                            LWall_Solid:	; Routine 2
0000FED4 323C 002B                  		move.w	#$2B,d1
0000FED8 343C 0018                  		move.w	#$18,d2
0000FEDC 3602                       		move.w	d2,d3
0000FEDE 5243                       		addq.w	#1,d3
0000FEE0 3828 0008                  		move.w	obX(a0),d4
0000FEE4 1028 0024                  		move.b	obRoutine(a0),d0
0000FEE8 3F00                       		move.w	d0,-(sp)
0000FEEA 6100 0000                  		bsr.w	SolidObject
0000FEEE 301F                       		move.w	(sp)+,d0
0000FEF0 1140 0024                  		move.b	d0,obRoutine(a0)
0000FEF4 0C68 06A0 0008             		cmpi.w	#$6A0,obX(a0)	; has object reached $6A0 on the x-axis?
0000FEFA 6600                       		bne.s	@animate	; if not, branch
0000FEFC 4268 0010                  		clr.w	obVelX(a0)	; stop object moving
0000FF00 4228 0036                  		clr.b	lwall_flag(a0)
0000FF04                            
0000FF04                            	@animate:
0000FF04 43F9 0000 0000             		lea	(Ani_LWall).l,a1
0000FF0A 6100 B2DA                  		bsr.w	AnimateSprite
0000FF0E 0C38 0004 D024             		cmpi.b	#4,(v_player+obRoutine).w
0000FF14 6400                       		bcc.s	@rangechk
0000FF16 6100 E4EA                  		bsr.w	SpeedToPos
0000FF1A                            
0000FF1A                            	@rangechk:
0000FF1A 6100 E50C                  		bsr.w	DisplaySprite
0000FF1E 4A28 0036                  		tst.b	lwall_flag(a0)	; is wall already moving?
0000FF22 6600                       		bne.s	@moving		; if yes, branch
0000FF40                            
0000FF40                            	@moving:
0000FF40 4E75                       		rts	
0000FF42                            ; ===========================================================================
0000FF42                            
0000FF42                            @chkgone:
0000FF42 45F8 FC00                  		lea	(v_objstate).w,a2
0000FF46 7000                       		moveq	#0,d0
0000FF48 1028 0023                  		move.b	obRespawnNo(a0),d0
0000FF4C 08B2 0007 0002             		bclr	#7,2(a2,d0.w)
0000FF52 117C 0008 0024             		move.b	#8,obRoutine(a0)
0000FF58 4E75                       		rts	
0000FF5A                            ; ===========================================================================
0000FF5A                            
0000FF5A                            LWall_Move:	; Routine 6
0000FF5A 2268 003C                  		movea.l	$3C(a0),a1
0000FF5E 0C29 0008 0024             		cmpi.b	#8,obRoutine(a1)
0000FF64 6700                       		beq.s	LWall_Delete
0000FF66 3169 0008 0008             		move.w	obX(a1),obX(a0)	; move rest of lava wall
0000FF6C 0468 0080 0008             		subi.w	#$80,obX(a0)
0000FF72 6000 E4B4                  		bra.w	DisplaySprite
0000FF76                            ; ===========================================================================
0000FF76                            
0000FF76                            LWall_Delete:	; Routine 8
0000FF76 6000 E4EC                  		bra.w	DeleteObject
0000FF76 6000 E4EC                  		bra.w	DeleteObject
0000FF7A                            		include	"_incObj\54 Lava Tag.asm"
0000FF7A                            ; ---------------------------------------------------------------------------
0000FF7A                            ; Object 54 - invisible	lava tag (MZ)
0000FF7A                            ; ---------------------------------------------------------------------------
0000FF7A                            
0000FF7A                            LavaTag:
0000FF7A 7000                       		moveq	#0,d0
0000FF7C 1028 0024                  		move.b	obRoutine(a0),d0
0000FF80 323B 0000                  		move.w	LTag_Index(pc,d0.w),d1
0000FF84 4EFB 1000                  		jmp	LTag_Index(pc,d1.w)
0000FF88                            ; ===========================================================================
0000FF88 0000                       LTag_Index:	dc.w LTag_Main-LTag_Index
0000FF8A 0000                       		dc.w LTag_ChkDel-LTag_Index
0000FF8C                            
0000FF8C 9694 95                    LTag_ColTypes:	dc.b $96, $94, $95
0000FF90 00                         		even
0000FF90                            ; ===========================================================================
0000FF90                            
0000FF90                            LTag_Main:	; Routine 0
0000FF90 5428 0024                  		addq.b	#2,obRoutine(a0)
0000FF94 7000                       		moveq	#0,d0
0000FF96 1028 0028                  		move.b	obSubtype(a0),d0
0000FF9A 117B 00F0 0020             		move.b	LTag_ColTypes(pc,d0.w),obColType(a0)
0000FFA0 217C 0000 0000 0004        		move.l	#Map_LTag,obMap(a0)
0000FFA8 117C 0084 0001             		move.b	#$84,obRender(a0)
0000FFAE                            
0000FFAE                            LTag_ChkDel:	; Routine 2
0000FFAE 3028 0008                  		move.w	obX(a0),d0
0000FFB2 0240 FF80                  		andi.w	#$FF80,d0
0000FFB6 3238 F700                  		move.w	(v_screenposx).w,d1
0000FFBA 0441 0080                  		subi.w	#$80,d1
0000FFBE 0241 FF80                  		andi.w	#$FF80,d1
0000FFC2 9041                       		sub.w	d1,d0
0000FFC4 6B00 E49E                  		bmi.w	DeleteObject
0000FFC8 0C40 0280                  		cmpi.w	#$280,d0
0000FFCC 6200 E496                  		bhi.w	DeleteObject
0000FFD0 4E75                       		rts	
0000FFD0 4E75                       		rts	
0000FFD2                            Map_LTag:	include	"_maps\Lava Tag.asm"
0000FFD2                            ; ---------------------------------------------------------------------------
0000FFD2                            ; Sprite mappings - invisible lava tag (MZ)
0000FFD2                            ; ---------------------------------------------------------------------------
0000FFD2                            Map_LTag_internal:
0000FFD2 0000                       		dc.w @0-Map_LTag_internal
0000FFD4 00                         @0:		dc.b 0		; no sprite, because the tag is invisible!
0000FFD6 00                         		even
0000FFD6 00                         		even
0000FFD6                            		include	"_anim\Lava Geyser.asm"
0000FFD6                            ; ---------------------------------------------------------------------------
0000FFD6                            ; Animation script - geyser of lava (MZ)
0000FFD6                            ; ---------------------------------------------------------------------------
0000FFD6 0000                       Ani_Geyser:	dc.w @bubble1-Ani_Geyser
0000FFD8 0000                       		dc.w @bubble2-Ani_Geyser
0000FFDA 0000                       		dc.w @end-Ani_Geyser
0000FFDC 0000                       		dc.w @bubble3-Ani_Geyser
0000FFDE 0000                       		dc.w @blank-Ani_Geyser
0000FFE0 0000                       		dc.w @bubble4-Ani_Geyser
0000FFE2 0200 0100 0104 0504 05FC   @bubble1:	dc.b 2,	0, 1, 0, 1, 4, 5, 4, 5,	afRoutine
0000FFEC 0202 03FF                  @bubble2:	dc.b 2,	2, 3, afEnd
0000FFF0 0206 07FF                  @end:		dc.b 2,	6, 7, afEnd
0000FFF4 0202 0300 0100 01FC        @bubble3:	dc.b 2,	2, 3, 0, 1, 0, 1, afRoutine
0000FFFC 0F13 FF                    @blank:		dc.b $F, $13, afEnd
00010000 00                         		even
00010000 0211 12FF                  @bubble4:	dc.b 2,	$11, $12, afEnd
00010004                            		even
00010004                            		even
00010004                            		include	"_anim\Wall of Lava.asm"
00010004                            ; ---------------------------------------------------------------------------
00010004                            ; Animation script - advancing wall of lava (MZ)
00010004                            ; ---------------------------------------------------------------------------
00010004 0000                       Ani_LWall:	dc.w @wall-Ani_LWall
00010006 0900 0102 03FF             @wall:		dc.b 9,	0, 1, 2, 3, afEnd
0001000C                            		even
0001000C                            		even
0001000C                            Map_Geyser:	include	"_maps\Lava Geyser.asm"
0001000C                            ; ---------------------------------------------------------------------------
0001000C                            ; Sprite mappings - lava geyser / lava that falls from the ceiling (MZ)
0001000C                            ; ---------------------------------------------------------------------------
0001000C                            Map_Geyser_internal:
0001000C 0000                       		dc.w @bubble1-Map_Geyser_internal
0001000E 0000                       		dc.w @bubble2-Map_Geyser_internal
00010010 0000                       		dc.w @bubble3-Map_Geyser_internal
00010012 0000                       		dc.w @bubble4-Map_Geyser_internal
00010014 0000                       		dc.w @bubble5-Map_Geyser_internal
00010016 0000                       		dc.w @bubble6-Map_Geyser_internal
00010018 0000                       		dc.w @end1-Map_Geyser_internal
0001001A 0000                       		dc.w @end2-Map_Geyser_internal
0001001C 0000                       		dc.w @medcolumn1-Map_Geyser_internal
0001001E 0000                       		dc.w @medcolumn2-Map_Geyser_internal
00010020 0000                       		dc.w @medcolumn3-Map_Geyser_internal
00010022 0000                       		dc.w @shortcolumn1-Map_Geyser_internal
00010024 0000                       		dc.w @shortcolumn2-Map_Geyser_internal
00010026 0000                       		dc.w @shortcolumn3-Map_Geyser_internal
00010028 0000                       		dc.w @longcolumn1-Map_Geyser_internal
0001002A 0000                       		dc.w @longcolumn2-Map_Geyser_internal
0001002C 0000                       		dc.w @longcolumn3-Map_Geyser_internal
0001002E 0000                       		dc.w @bubble7-Map_Geyser_internal
00010030 0000                       		dc.w @bubble8-Map_Geyser_internal
00010032 0000                       		dc.w @blank-Map_Geyser_internal
00010034 02                         @bubble1:	dc.b 2
00010035 EC0B 0000 E8               		dc.b $EC, $B, 0, 0, $E8
0001003A EC0B 0800 00               		dc.b $EC, $B, 8, 0, 0
0001003F 02                         @bubble2:	dc.b 2
00010040 EC0B 0018 E8               		dc.b $EC, $B, 0, $18, $E8
00010045 EC0B 0818 00               		dc.b $EC, $B, 8, $18, 0
0001004A 04                         @bubble3:	dc.b 4
0001004B EC0B 0000 C8               		dc.b $EC, $B, 0, 0, $C8
00010050 F40E 000C E0               		dc.b $F4, $E, 0, $C, $E0
00010055 F40E 080C 00               		dc.b $F4, $E, 8, $C, 0
0001005A EC0B 0800 20               		dc.b $EC, $B, 8, 0, $20
0001005F 04                         @bubble4:	dc.b 4
00010060 EC0B 0018 C8               		dc.b $EC, $B, 0, $18, $C8
00010065 F40E 0024 E0               		dc.b $F4, $E, 0, $24, $E0
0001006A F40E 0824 00               		dc.b $F4, $E, 8, $24, 0
0001006F EC0B 0818 20               		dc.b $EC, $B, 8, $18, $20
00010074 06                         @bubble5:	dc.b 6
00010075 EC0B 0000 C8               		dc.b $EC, $B, 0, 0, $C8
0001007A F40E 000C E0               		dc.b $F4, $E, 0, $C, $E0
0001007F F40E 080C 00               		dc.b $F4, $E, 8, $C, 0
00010084 EC0B 0800 20               		dc.b $EC, $B, 8, 0, $20
00010089 E80E 0090 E0               		dc.b $E8, $E, 0, $90, $E0
0001008E E80E 0890 00               		dc.b $E8, $E, 8, $90, 0
00010093 06                         @bubble6:	dc.b 6
00010094 EC0B 0018 C8               		dc.b $EC, $B, 0, $18, $C8
00010099 F40E 0024 E0               		dc.b $F4, $E, 0, $24, $E0
0001009E F40E 0824 00               		dc.b $F4, $E, 8, $24, 0
000100A3 EC0B 0818 20               		dc.b $EC, $B, 8, $18, $20
000100A8 E80E 0890 E0               		dc.b $E8, $E, 8, $90, $E0
000100AD E80E 0090 00               		dc.b $E8, $E, 0, $90, 0
000100B2 02                         @end1:		dc.b 2
000100B3 E00F 0030 E0               		dc.b $E0, $F, 0, $30, $E0
000100B8 E00F 0830 00               		dc.b $E0, $F, 8, $30, 0
000100BD 02                         @end2:		dc.b 2
000100BE E00F 0830 E0               		dc.b $E0, $F, 8, $30, $E0
000100C3 E00F 0030 00               		dc.b $E0, $F, 0, $30, 0
000100C8 0A                         @medcolumn1:	dc.b $A
000100C9 900F 0040 E0               		dc.b $90, $F, 0, $40, $E0
000100CE 900F 0840 00               		dc.b $90, $F, 8, $40, 0
000100D3 B00F 0040 E0               		dc.b $B0, $F, 0, $40, $E0
000100D8 B00F 0840 00               		dc.b $B0, $F, 8, $40, 0
000100DD D00F 0040 E0               		dc.b $D0, $F, 0, $40, $E0
000100E2 D00F 0840 00               		dc.b $D0, $F, 8, $40, 0
000100E7 F00F 0040 E0               		dc.b $F0, $F, 0, $40, $E0
000100EC F00F 0840 00               		dc.b $F0, $F, 8, $40, 0
000100F1 100F 0040 E0               		dc.b $10, $F, 0, $40, $E0
000100F6 100F 0840 00               		dc.b $10, $F, 8, $40, 0
000100FB 0A                         @medcolumn2:	dc.b $A
000100FC 900F 0050 E0               		dc.b $90, $F, 0, $50, $E0
00010101 900F 0850 00               		dc.b $90, $F, 8, $50, 0
00010106 B00F 0050 E0               		dc.b $B0, $F, 0, $50, $E0
0001010B B00F 0850 00               		dc.b $B0, $F, 8, $50, 0
00010110 D00F 0050 E0               		dc.b $D0, $F, 0, $50, $E0
00010115 D00F 0850 00               		dc.b $D0, $F, 8, $50, 0
0001011A F00F 0050 E0               		dc.b $F0, $F, 0, $50, $E0
0001011F F00F 0850 00               		dc.b $F0, $F, 8, $50, 0
00010124 100F 0050 E0               		dc.b $10, $F, 0, $50, $E0
00010129 100F 0850 00               		dc.b $10, $F, 8, $50, 0
0001012E 0A                         @medcolumn3:	dc.b $A
0001012F 900F 0060 E0               		dc.b $90, $F, 0, $60, $E0
00010134 900F 0860 00               		dc.b $90, $F, 8, $60, 0
00010139 B00F 0060 E0               		dc.b $B0, $F, 0, $60, $E0
0001013E B00F 0860 00               		dc.b $B0, $F, 8, $60, 0
00010143 D00F 0060 E0               		dc.b $D0, $F, 0, $60, $E0
00010148 D00F 0860 00               		dc.b $D0, $F, 8, $60, 0
0001014D F00F 0060 E0               		dc.b $F0, $F, 0, $60, $E0
00010152 F00F 0860 00               		dc.b $F0, $F, 8, $60, 0
00010157 100F 0060 E0               		dc.b $10, $F, 0, $60, $E0
0001015C 100F 0860 00               		dc.b $10, $F, 8, $60, 0
00010161 06                         @shortcolumn1:	dc.b 6
00010162 900F 0040 E0               		dc.b $90, $F, 0, $40, $E0
00010167 900F 0840 00               		dc.b $90, $F, 8, $40, 0
0001016C B00F 0040 E0               		dc.b $B0, $F, 0, $40, $E0
00010171 B00F 0840 00               		dc.b $B0, $F, 8, $40, 0
00010176 D00F 0040 E0               		dc.b $D0, $F, 0, $40, $E0
0001017B D00F 0840 00               		dc.b $D0, $F, 8, $40, 0
00010180 06                         @shortcolumn2:	dc.b 6
00010181 900F 0050 E0               		dc.b $90, $F, 0, $50, $E0
00010186 900F 0850 00               		dc.b $90, $F, 8, $50, 0
0001018B B00F 0050 E0               		dc.b $B0, $F, 0, $50, $E0
00010190 B00F 0850 00               		dc.b $B0, $F, 8, $50, 0
00010195 D00F 0050 E0               		dc.b $D0, $F, 0, $50, $E0
0001019A D00F 0850 00               		dc.b $D0, $F, 8, $50, 0
0001019F 06                         @shortcolumn3:	dc.b 6
000101A0 900F 0060 E0               		dc.b $90, $F, 0, $60, $E0
000101A5 900F 0860 00               		dc.b $90, $F, 8, $60, 0
000101AA B00F 0060 E0               		dc.b $B0, $F, 0, $60, $E0
000101AF B00F 0860 00               		dc.b $B0, $F, 8, $60, 0
000101B4 D00F 0060 E0               		dc.b $D0, $F, 0, $60, $E0
000101B9 D00F 0860 00               		dc.b $D0, $F, 8, $60, 0
000101BE 10                         @longcolumn1:	dc.b $10
000101BF 900F 0040 E0               		dc.b $90, $F, 0, $40, $E0
000101C4 900F 0840 00               		dc.b $90, $F, 8, $40, 0
000101C9 B00F 0040 E0               		dc.b $B0, $F, 0, $40, $E0
000101CE B00F 0840 00               		dc.b $B0, $F, 8, $40, 0
000101D3 D00F 0040 E0               		dc.b $D0, $F, 0, $40, $E0
000101D8 D00F 0840 00               		dc.b $D0, $F, 8, $40, 0
000101DD F00F 0040 E0               		dc.b $F0, $F, 0, $40, $E0
000101E2 F00F 0840 00               		dc.b $F0, $F, 8, $40, 0
000101E7 100F 0040 E0               		dc.b $10, $F, 0, $40, $E0
000101EC 100F 0840 00               		dc.b $10, $F, 8, $40, 0
000101F1 300F 0040 E0               		dc.b $30, $F, 0, $40, $E0
000101F6 300F 0840 00               		dc.b $30, $F, 8, $40, 0
000101FB 500F 0040 E0               		dc.b $50, $F, 0, $40, $E0
00010200 500F 0840 00               		dc.b $50, $F, 8, $40, 0
00010205 700F 0040 E0               		dc.b $70, $F, 0, $40, $E0
0001020A 700F 0840 00               		dc.b $70, $F, 8, $40, 0
0001020F 10                         @longcolumn2:	dc.b $10
00010210 900F 0050 E0               		dc.b $90, $F, 0, $50, $E0
00010215 900F 0850 00               		dc.b $90, $F, 8, $50, 0
0001021A B00F 0050 E0               		dc.b $B0, $F, 0, $50, $E0
0001021F B00F 0850 00               		dc.b $B0, $F, 8, $50, 0
00010224 D00F 0050 E0               		dc.b $D0, $F, 0, $50, $E0
00010229 D00F 0850 00               		dc.b $D0, $F, 8, $50, 0
0001022E F00F 0050 E0               		dc.b $F0, $F, 0, $50, $E0
00010233 F00F 0850 00               		dc.b $F0, $F, 8, $50, 0
00010238 100F 0050 E0               		dc.b $10, $F, 0, $50, $E0
0001023D 100F 0850 00               		dc.b $10, $F, 8, $50, 0
00010242 300F 0050 E0               		dc.b $30, $F, 0, $50, $E0
00010247 300F 0850 00               		dc.b $30, $F, 8, $50, 0
0001024C 500F 0050 E0               		dc.b $50, $F, 0, $50, $E0
00010251 500F 0850 00               		dc.b $50, $F, 8, $50, 0
00010256 700F 0050 E0               		dc.b $70, $F, 0, $50, $E0
0001025B 700F 0850 00               		dc.b $70, $F, 8, $50, 0
00010260 10                         @longcolumn3:	dc.b $10
00010261 900F 0060 E0               		dc.b $90, $F, 0, $60, $E0
00010266 900F 0860 00               		dc.b $90, $F, 8, $60, 0
0001026B B00F 0060 E0               		dc.b $B0, $F, 0, $60, $E0
00010270 B00F 0860 00               		dc.b $B0, $F, 8, $60, 0
00010275 D00F 0060 E0               		dc.b $D0, $F, 0, $60, $E0
0001027A D00F 0860 00               		dc.b $D0, $F, 8, $60, 0
0001027F F00F 0060 E0               		dc.b $F0, $F, 0, $60, $E0
00010284 F00F 0860 00               		dc.b $F0, $F, 8, $60, 0
00010289 100F 0060 E0               		dc.b $10, $F, 0, $60, $E0
0001028E 100F 0860 00               		dc.b $10, $F, 8, $60, 0
00010293 300F 0060 E0               		dc.b $30, $F, 0, $60, $E0
00010298 300F 0860 00               		dc.b $30, $F, 8, $60, 0
0001029D 500F 0060 E0               		dc.b $50, $F, 0, $60, $E0
000102A2 500F 0860 00               		dc.b $50, $F, 8, $60, 0
000102A7 700F 0060 E0               		dc.b $70, $F, 0, $60, $E0
000102AC 700F 0860 00               		dc.b $70, $F, 8, $60, 0
000102B1 06                         @bubble7:	dc.b 6
000102B2 E00B 0000 C8               		dc.b $E0, $B, 0, 0, $C8
000102B7 E80E 000C E0               		dc.b $E8, $E, 0, $C, $E0
000102BC E80E 080C 00               		dc.b $E8, $E, 8, $C, 0
000102C1 E00B 0800 20               		dc.b $E0, $B, 8, 0, $20
000102C6 D80E 0090 E0               		dc.b $D8, $E, 0, $90, $E0
000102CB D80E 0890 00               		dc.b $D8, $E, 8, $90, 0
000102D0 06                         @bubble8:	dc.b 6
000102D1 E00B 0018 C8               		dc.b $E0, $B, 0, $18, $C8
000102D6 E80E 0024 E0               		dc.b $E8, $E, 0, $24, $E0
000102DB E80E 0824 00               		dc.b $E8, $E, 8, $24, 0
000102E0 E00B 0818 20               		dc.b $E0, $B, 8, $18, $20
000102E5 D80E 0890 E0               		dc.b $D8, $E, 8, $90, $E0
000102EA D80E 0090 00               		dc.b $D8, $E, 0, $90, 0
000102EF 00                         @blank:	dc.b 0
000102F0                            		even
000102F0                            		even
000102F0                            Map_LWall:	include	"_maps\Wall of Lava.asm"
000102F0                            ; ---------------------------------------------------------------------------
000102F0                            ; Sprite mappings - advancing wall of lava (MZ)
000102F0                            ; ---------------------------------------------------------------------------
000102F0                            Map_LWall_internal:
000102F0 0000                       		dc.w byte_F538-Map_LWall_internal
000102F2 0000                       		dc.w byte_F566-Map_LWall_internal
000102F4 0000                       		dc.w byte_F594-Map_LWall_internal
000102F6 0000                       		dc.w byte_F5C2-Map_LWall_internal
000102F8 0000                       		dc.w byte_F5F0-Map_LWall_internal
000102FA 09                         byte_F538:	dc.b 9
000102FB E00F 0060 20               		dc.b $E0, $F, 0, $60, $20
00010300 000F 0070 3C               		dc.b 0,	$F, 0, $70, $3C
00010305 000F FF2A 20               		dc.b 0,	$F, $FF, $2A, $20
0001030A E00F FF2A 00               		dc.b $E0, $F, $FF, $2A,	0
0001030F 000F FF2A 00               		dc.b 0,	$F, $FF, $2A, 0
00010314 E00F FF2A E0               		dc.b $E0, $F, $FF, $2A,	$E0
00010319 000F FF2A E0               		dc.b 0,	$F, $FF, $2A, $E0
0001031E E00F FF2A C0               		dc.b $E0, $F, $FF, $2A,	$C0
00010323 000F FF2A C0               		dc.b 0,	$F, $FF, $2A, $C0
00010328 09                         byte_F566:	dc.b 9
00010329 E00F 0070 20               		dc.b $E0, $F, 0, $70, $20
0001032E 000F 0080 3C               		dc.b 0,	$F, 0, $80, $3C
00010333 000F FF2A 20               		dc.b 0,	$F, $FF, $2A, $20
00010338 E00F FF2A 00               		dc.b $E0, $F, $FF, $2A,	0
0001033D 000F FF2A 00               		dc.b 0,	$F, $FF, $2A, 0
00010342 E00F FF2A E0               		dc.b $E0, $F, $FF, $2A,	$E0
00010347 000F FF2A E0               		dc.b 0,	$F, $FF, $2A, $E0
0001034C E00F FF2A C0               		dc.b $E0, $F, $FF, $2A,	$C0
00010351 000F FF2A C0               		dc.b 0,	$F, $FF, $2A, $C0
00010356 09                         byte_F594:	dc.b 9
00010357 E00F 0080 20               		dc.b $E0, $F, 0, $80, $20
0001035C 000F 0070 3C               		dc.b 0,	$F, 0, $70, $3C
00010361 000F FF2A 20               		dc.b 0,	$F, $FF, $2A, $20
00010366 E00F FF2A 00               		dc.b $E0, $F, $FF, $2A,	0
0001036B 000F FF2A 00               		dc.b 0,	$F, $FF, $2A, 0
00010370 E00F FF2A E0               		dc.b $E0, $F, $FF, $2A,	$E0
00010375 000F FF2A E0               		dc.b 0,	$F, $FF, $2A, $E0
0001037A E00F FF2A C0               		dc.b $E0, $F, $FF, $2A,	$C0
0001037F 000F FF2A C0               		dc.b 0,	$F, $FF, $2A, $C0
00010384 09                         byte_F5C2:	dc.b 9
00010385 E00F 0070 20               		dc.b $E0, $F, 0, $70, $20
0001038A 000F 0060 3C               		dc.b 0,	$F, 0, $60, $3C
0001038F 000F FF2A 20               		dc.b 0,	$F, $FF, $2A, $20
00010394 E00F FF2A 00               		dc.b $E0, $F, $FF, $2A,	0
00010399 000F FF2A 00               		dc.b 0,	$F, $FF, $2A, 0
0001039E E00F FF2A E0               		dc.b $E0, $F, $FF, $2A,	$E0
000103A3 000F FF2A E0               		dc.b 0,	$F, $FF, $2A, $E0
000103A8 E00F FF2A C0               		dc.b $E0, $F, $FF, $2A,	$C0
000103AD 000F FF2A C0               		dc.b 0,	$F, $FF, $2A, $C0
000103B2 08                         byte_F5F0:	dc.b 8
000103B3 E00F FF2A 20               		dc.b $E0, $F, $FF, $2A,	$20
000103B8 000F FF2A 20               		dc.b 0,	$F, $FF, $2A, $20
000103BD E00F FF2A 00               		dc.b $E0, $F, $FF, $2A,	0
000103C2 000F FF2A 00               		dc.b 0,	$F, $FF, $2A, 0
000103C7 E00F FF2A E0               		dc.b $E0, $F, $FF, $2A,	$E0
000103CC 000F FF2A E0               		dc.b 0,	$F, $FF, $2A, $E0
000103D1 E00F FF2A C0               		dc.b $E0, $F, $FF, $2A,	$C0
000103D6 000F FF2A C0               		dc.b 0,	$F, $FF, $2A, $C0
000103DC 00                         		even
000103DC 00                         		even
000103DC                            
000103DC                            		include	"_incObj\40 Moto Bug.asm" ; includes "_incObj\sub RememberState.asm"
000103DC                            ; ---------------------------------------------------------------------------
000103DC                            ; Object 40 - Moto Bug enemy (GHZ)
000103DC                            ; ---------------------------------------------------------------------------
000103DC                            
000103DC                            MotoBug:
000103DC 7000                       		moveq	#0,d0
000103DE 1028 0024                  		move.b	obRoutine(a0),d0
000103E2 323B 0000                  		move.w	Moto_Index(pc,d0.w),d1
000103E6 4EFB 1000                  		jmp	Moto_Index(pc,d1.w)
000103EA                            ; ===========================================================================
000103EA 0000                       Moto_Index:	dc.w Moto_Main-Moto_Index
000103EC 0000                       		dc.w Moto_Action-Moto_Index
000103EE 0000                       		dc.w Moto_Animate-Moto_Index
000103F0 0000                       		dc.w Moto_Delete-Moto_Index
000103F2                            ; ===========================================================================
000103F2                            
000103F2                            Moto_Main:	; Routine 0
000103F2 217C 0000 0000 0004        		move.l	#Map_Moto,obMap(a0)
000103FA 317C 04F0 0002             		move.w	#$4F0,obGfx(a0)
00010400 117C 0004 0001             		move.b	#4,obRender(a0)
00010406 117C 0004 0018             		move.b	#4,obPriority(a0)
0001040C 117C 0014 0019             		move.b	#$14,obActWid(a0)
00010412 4A28 001C                  		tst.b	obAnim(a0)	; is object a smoke trail?
00010416 6600                       		bne.s	@smoke		; if yes, branch
00010418 117C 000E 0016             		move.b	#$E,obHeight(a0)
0001041E 117C 0008 0017             		move.b	#8,obWidth(a0)
00010424 117C 000C 0020             		move.b	#$C,obColType(a0)
0001042A 6100 DFAA                  		bsr.w	ObjectFall
0001042E 4EB9 0000 0000             		jsr	(ObjFloorDist).l
00010434 4A41                       		tst.w	d1
00010436 6A00                       		bpl.s	@notonfloor
00010438 D368 000C                  		add.w	d1,obY(a0)	; match	object's position with the floor
0001043C 317C 0000 0012             		move.w	#0,obVelY(a0)
00010442 5428 0024                  		addq.b	#2,obRoutine(a0) ; goto Moto_Action next
00010446 0868 0000 0022             		bchg	#0,obStatus(a0)
0001044C                            
0001044C                            	@notonfloor:
0001044C 4E75                       		rts	
0001044E                            ; ===========================================================================
0001044E                            
0001044E                            @smoke:
0001044E 5828 0024                  		addq.b	#4,obRoutine(a0) ; goto Moto_Animate next
00010452 6000 0000                  		bra.w	Moto_Animate
00010456                            ; ===========================================================================
00010456                            
00010456                            Moto_Action:	; Routine 2
00010456 7000                       		moveq	#0,d0
00010458 1028 0025                  		move.b	ob2ndRout(a0),d0
0001045C 323B 0000                  		move.w	Moto_ActIndex(pc,d0.w),d1
00010460 4EBB 1000                  		jsr	Moto_ActIndex(pc,d1.w)
00010464 43F9 0000 0000             		lea	(Ani_Moto).l,a1
0001046A 6100 AD7A                  		bsr.w	AnimateSprite
0001046E                            
0001046E                            		include	"_incObj\sub RememberState.asm" ; Moto_Action terminates in this file
0001046E                            ; ---------------------------------------------------------------------------
0001046E                            ; Subroutine to remember whether an object is destroyed/collected
0001046E                            ; ---------------------------------------------------------------------------
0001046E                            
0001046E                            RememberState:
0001048C 6000 DF9A                  		bra.w	DisplaySprite
00010490                            
00010490                            	@offscreen:
00010490 45F8 FC00                  		lea	(v_objstate).w,a2
00010494 7000                       		moveq	#0,d0
00010496 1028 0023                  		move.b	obRespawnNo(a0),d0
0001049A 6700                       		beq.s	@delete
0001049C 08B2 0007 0002             		bclr	#7,2(a2,d0.w)
000104A2                            
000104A2                            	@delete:
000104A2 6000 DFC0                  		bra.w	DeleteObject
000104A2 6000 DFC0                  		bra.w	DeleteObject
000104A6                            
000104A6                            ; ===========================================================================
000104A6 0000                       Moto_ActIndex:	dc.w @move-Moto_ActIndex
000104A8 0000                       		dc.w @findfloor-Moto_ActIndex
000104AA                            
000104AA =00000030                  @time:		equ $30
000104AA =00000033                  @smokedelay:	equ $33
000104AA                            ; ===========================================================================
000104AA                            
000104AA                            @move:
000104AA 5368 0030                  		subq.w	#1,@time(a0)	; subtract 1 from pause	time
000104AE 6A00                       		bpl.s	@wait		; if time remains, branch
000104B0 5428 0025                  		addq.b	#2,ob2ndRout(a0)
000104B4 317C FF00 0010             		move.w	#-$100,obVelX(a0) ; move object to the left
000104BA 117C 0001 001C             		move.b	#1,obAnim(a0)
000104C0 0868 0000 0022             		bchg	#0,obStatus(a0)
000104C6 6600                       		bne.s	@wait
000104C8 4468 0010                  		neg.w	obVelX(a0)	; change direction
000104CC                            
000104CC                            	@wait:
000104CC 4E75                       		rts	
000104CE                            ; ===========================================================================
000104CE                            
000104CE                            @findfloor:
000104CE 6100 DF32                  		bsr.w	SpeedToPos
000104D2 4EB9 0000 0000             		jsr	(ObjFloorDist).l
000104D8 0C41 FFF8                  		cmpi.w	#-8,d1
000104DC 6D00                       		blt.s	@pause
000104DE 0C41 000C                  		cmpi.w	#$C,d1
000104E2 6C00                       		bge.s	@pause
000104E4 D368 000C                  		add.w	d1,obY(a0)	; match	object's position with the floor
000104E8 5328 0033                  		subq.b	#1,@smokedelay(a0)
000104EC 6A00                       		bpl.s	@nosmoke
000104EE 117C 000F 0033             		move.b	#$F,@smokedelay(a0)
000104F4 6100 E3BA                  		bsr.w	FindFreeObj
000104F8 6600                       		bne.s	@nosmoke
000104FA 137C 0040 0000             		move.b	#id_MotoBug,0(a1) ; load exhaust smoke object
00010500 3368 0008 0008             		move.w	obX(a0),obX(a1)
00010506 3368 000C 000C             		move.w	obY(a0),obY(a1)
0001050C 1368 0022 0022             		move.b	obStatus(a0),obStatus(a1)
00010512 137C 0002 001C             		move.b	#2,obAnim(a1)
00010518                            
00010518                            	@nosmoke:
00010518 4E75                       		rts	
0001051A                            
0001051A                            @pause:
0001051A 5528 0025                  		subq.b	#2,ob2ndRout(a0)
0001051E 317C 003B 0030             		move.w	#59,@time(a0)	; set pause time to 1 second
00010524 317C 0000 0010             		move.w	#0,obVelX(a0)	; stop the object moving
0001052A 117C 0000 001C             		move.b	#0,obAnim(a0)
00010530 4E75                       		rts	
00010532                            ; ===========================================================================
00010532                            
00010532                            Moto_Animate:	; Routine 4
00010532 43F9 0000 0000             		lea	(Ani_Moto).l,a1
00010538 6100 ACAC                  		bsr.w	AnimateSprite
0001053C 6000 DEEA                  		bra.w	DisplaySprite
00010540                            ; ===========================================================================
00010540                            
00010540                            Moto_Delete:	; Routine 6
00010540 6000 DF22                  		bra.w	DeleteObject
00010540 6000 DF22                  		bra.w	DeleteObject
00010544                            		include	"_anim\Moto Bug.asm"
00010544                            ; ---------------------------------------------------------------------------
00010544                            ; Animation script - Motobug enemy
00010544                            ; ---------------------------------------------------------------------------
00010544 0000                       Ani_Moto:	dc.w @stand-Ani_Moto
00010546 0000                       		dc.w @walk-Ani_Moto
00010548 0000                       		dc.w @smoke-Ani_Moto
0001054A                            
0001054A 0F02 FF                    @stand:		dc.b $F, 2, afEnd
0001054E 00                         		even
0001054E 0700 0100 02FF             @walk:		dc.b 7,	0, 1, 0, 2, afEnd
00010554 0103 0603 0604 0604 0604+  @smoke:		dc.b 1,	3, 6, 3, 6, 4, 6, 4, 6,	4, 6, 5, afRoutine
00010562 00                         		even
00010562 00                         		even
00010562                            Map_Moto:	include	"_maps\Moto Bug.asm"
00010562                            ; ================================================================================
00010562                            ; Sprite Mappings - generated by Flex 2 Thu Jan 21 2021 03:29:03 GMT-0500 (Eastern Standard Time)
00010562                            ; ================================================================================
00010562                            
00010562                            DATA9YQ60XETCIW:
00010562 0000 0000                  	dc.w DATA9YQ60XETCIW_0-DATA9YQ60XETCIW, DATA9YQ60XETCIW_1-DATA9YQ60XETCIW
00010566 0000 0000                  	dc.w DATA9YQ60XETCIW_2-DATA9YQ60XETCIW, DATA9YQ60XETCIW_3-DATA9YQ60XETCIW
0001056A 0000 0000                  	dc.w DATA9YQ60XETCIW_4-DATA9YQ60XETCIW, DATA9YQ60XETCIW_5-DATA9YQ60XETCIW
0001056E 0000                       	dc.w DATA9YQ60XETCIW_6-DATA9YQ60XETCIW
00010570 04                         DATA9YQ60XETCIW_0: dc.b $4
00010571 F00D 0000 EC               	dc.b $F0, $D, $0, $0, $EC
00010576 000C 0008 EC               	dc.b $0, $C, $0, $8, $EC
0001057B F801 000C 0C               	dc.b $F8, $1, $0, $C, $C
00010580 0808 000E F4               	dc.b $8, $8, $0, $E, $F4
00010585 04                         DATA9YQ60XETCIW_1: dc.b $4
00010586 F10D 0000 EC               	dc.b $F1, $D, $0, $0, $EC
0001058B 010C 0008 EC               	dc.b $1, $C, $0, $8, $EC
00010590 F901 000C 0C               	dc.b $F9, $1, $0, $C, $C
00010595 0908 0011 F4               	dc.b $9, $8, $0, $11, $F4
0001059A 05                         DATA9YQ60XETCIW_2: dc.b $5
0001059B F00D 0000 EC               	dc.b $F0, $D, $0, $0, $EC
000105A0 000C 0014 EC               	dc.b $0, $C, $0, $14, $EC
000105A5 F801 000C 0C               	dc.b $F8, $1, $0, $C, $C
000105AA 0804 0018 EC               	dc.b $8, $4, $0, $18, $EC
000105AF 0804 0012 FC               	dc.b $8, $4, $0, $12, $FC
000105B4 01                         DATA9YQ60XETCIW_3: dc.b $1
000105B5 FA00 001A 10               	dc.b $FA, $0, $0, $1A, $10
000105BA 01                         DATA9YQ60XETCIW_4: dc.b $1
000105BB FA00 001B 10               	dc.b $FA, $0, $0, $1B, $10
000105C0 01                         DATA9YQ60XETCIW_5: dc.b $1
000105C1 FA00 001C 10               	dc.b $FA, $0, $0, $1C, $10
000105C6 00                         DATA9YQ60XETCIW_6: dc.b $0
000105C8 00                         	even
000105C8 00                         	even
000105C8                            		include	"_incObj\4F.asm"
000105C8                            ; ---------------------------------------------------------------------------
000105C8                            ; Object 4F - blank
000105C8                            ; ---------------------------------------------------------------------------
000105C8                            
000105C8                            Obj4F:
000105C8 4E75                       		rts	
000105C8 4E75                       		rts	
000105CA                            
000105CA                            		include	"_incObj\50 Yadrin.asm"
000105CA                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000105CA                            
000105CA                            
000105CA                            Yad_ChkWall:
000105CA 3038 FE04                  		move.w	(v_framecount).w,d0
000105CE D047                       		add.w	d7,d0
000105D0 0240 0003                  		andi.w	#3,d0
000105D4 6600                       		bne.s	loc_F836
000105D6 7600                       		moveq	#0,d3
000105D8 1628 0019                  		move.b	obActWid(a0),d3
000105DC 4A68 0010                  		tst.w	obVelX(a0)
000105E0 6B00                       		bmi.s	loc_F82C
000105E2 6100 0000                  		bsr.w	ObjHitWallRight
000105E6 4A41                       		tst.w	d1
000105E8 6A00                       		bpl.s	loc_F836
000105EA                            
000105EA                            loc_F828:
000105EA 7001                       		moveq	#1,d0
000105EC 4E75                       		rts	
000105EE                            ; ===========================================================================
000105EE                            
000105EE                            loc_F82C:
000105EE 4643                       		not.w	d3
000105F0 6100 0000                  		bsr.w	ObjHitWallLeft
000105F4 4A41                       		tst.w	d1
000105F6 6BF2                       		bmi.s	loc_F828
000105F8                            
000105F8                            loc_F836:
000105F8 7000                       		moveq	#0,d0
000105FA 4E75                       		rts	
000105FC                            ; End of function Yad_ChkWall
000105FC                            
000105FC                            ; ===========================================================================
000105FC                            ; ---------------------------------------------------------------------------
000105FC                            ; Object 50 - Yadrin enemy (SYZ)
000105FC                            ; ---------------------------------------------------------------------------
000105FC                            
000105FC                            Yadrin:
000105FC 7000                       		moveq	#0,d0
000105FE 1028 0024                  		move.b	obRoutine(a0),d0
00010602 323B 0000                  		move.w	Yad_Index(pc,d0.w),d1
00010606 4EFB 1000                  		jmp	Yad_Index(pc,d1.w)
0001060A                            ; ===========================================================================
0001060A 0000                       Yad_Index:	dc.w Yad_Main-Yad_Index
0001060C 0000                       		dc.w Yad_Action-Yad_Index
0001060E                            
0001060E =00000030                  yad_timedelay:	equ $30
0001060E                            ; ===========================================================================
0001060E                            
0001060E                            Yad_Main:	; Routine 0
0001060E 217C 0000 0000 0004        		move.l	#Map_Yad,obMap(a0)
00010616 317C 247B 0002             		move.w	#$247B,obGfx(a0)
0001061C 117C 0004 0001             		move.b	#4,obRender(a0)
00010622 117C 0004 0018             		move.b	#4,obPriority(a0)
00010628 117C 0014 0019             		move.b	#$14,obActWid(a0)
0001062E 117C 0011 0016             		move.b	#$11,obHeight(a0)
00010634 117C 0008 0017             		move.b	#8,obWidth(a0)
0001063A 117C 00CC 0020             		move.b	#$CC,obColType(a0)
00010640 6100 DD94                  		bsr.w	ObjectFall
00010644 6100 0000                  		bsr.w	ObjFloorDist
00010648 4A41                       		tst.w	d1
0001064A 6A00                       		bpl.s	locret_F89E
0001064C D368 000C                  		add.w	d1,obY(a0)	; match	object's position with the floor
00010650 317C 0000 0012             		move.w	#0,obVelY(a0)
00010656 5428 0024                  		addq.b	#2,obRoutine(a0)
0001065A 0868 0000 0022             		bchg	#0,obStatus(a0)
00010660                            
00010660                            	locret_F89E:
00010660 4E75                       		rts	
00010662                            ; ===========================================================================
00010662                            
00010662                            Yad_Action:	; Routine 2
00010662 7000                       		moveq	#0,d0
00010664 1028 0025                  		move.b	ob2ndRout(a0),d0
00010668 323B 0000                  		move.w	Yad_Index2(pc,d0.w),d1
0001066C 4EBB 1000                  		jsr	Yad_Index2(pc,d1.w)
00010670 43F9 0000 0000             		lea	(Ani_Yad).l,a1
00010676 6100 AB6E                  		bsr.w	AnimateSprite
0001067A 6000 FDF2                  		bra.w	RememberState
0001067E                            ; ===========================================================================
0001067E 0000                       Yad_Index2:	dc.w Yad_Move-Yad_Index2
00010680 0000                       		dc.w Yad_FixToFloor-Yad_Index2
00010682                            ; ===========================================================================
00010682                            
00010682                            Yad_Move:
00010682 5368 0030                  		subq.w	#1,yad_timedelay(a0) ; subtract 1 from pause time
00010686 6A00                       		bpl.s	locret_F8E2	; if time remains, branch
00010688 5428 0025                  		addq.b	#2,ob2ndRout(a0)
0001068C 317C FF00 0010             		move.w	#-$100,obVelX(a0) ; move object
00010692 117C 0001 001C             		move.b	#1,obAnim(a0)
00010698 0868 0000 0022             		bchg	#0,obStatus(a0)
0001069E 6600                       		bne.s	locret_F8E2
000106A0 4468 0010                  		neg.w	obVelX(a0)	; change direction
000106A4                            
000106A4                            	locret_F8E2:
000106A4 4E75                       		rts	
000106A6                            ; ===========================================================================
000106A6                            
000106A6                            Yad_FixToFloor:
000106A6 6100 DD5A                  		bsr.w	SpeedToPos
000106AA 6100 0000                  		bsr.w	ObjFloorDist
000106AE 0C41 FFF8                  		cmpi.w	#-8,d1
000106B2 6D00                       		blt.s	Yad_Pause
000106B4 0C41 000C                  		cmpi.w	#$C,d1
000106B8 6C00                       		bge.s	Yad_Pause
000106BA D368 000C                  		add.w	d1,obY(a0)	; match	object's position to the floor
000106BE 6100 FF0A                  		bsr.w	Yad_ChkWall
000106C2 6600                       		bne.s	Yad_Pause
000106C4 4E75                       		rts	
000106C6                            ; ===========================================================================
000106C6                            
000106C6                            Yad_Pause:
000106C6 5528 0025                  		subq.b	#2,ob2ndRout(a0)
000106CA 317C 003B 0030             		move.w	#59,yad_timedelay(a0) ; set pause time to 1 second
000106D0 317C 0000 0010             		move.w	#0,obVelX(a0)
000106D6 117C 0000 001C             		move.b	#0,obAnim(a0)
000106DC 4E75                       		rts	
000106DC 4E75                       		rts	
000106DE                            		include	"_anim\Yadrin.asm"
000106DE                            ; ---------------------------------------------------------------------------
000106DE                            ; Animation script - Yadrin enemy
000106DE                            ; ---------------------------------------------------------------------------
000106DE 0000                       Ani_Yad:	dc.w @stand-Ani_Yad
000106E0 0000                       		dc.w @walk-Ani_Yad
000106E2                            
000106E2 0700 FF                    @stand:		dc.b 7,	0, afEnd
000106E6 00                         		even
000106E6 0700 0301 0400 0302 05FF   @walk:		dc.b 7,	0, 3, 1, 4, 0, 3, 2, 5,	afEnd
000106F0                            		even
000106F0                            		even
000106F0                            Map_Yad:	include	"_maps\Yadrin.asm"
000106F0                            ; ---------------------------------------------------------------------------
000106F0                            ; Sprite mappings - Yadrin enemy (SYZ)
000106F0                            ; ---------------------------------------------------------------------------
000106F0                            Map_Yad_internal:
000106F0 0000                       		dc.w @walk0-Map_Yad_internal
000106F2 0000                       		dc.w @walk1-Map_Yad_internal
000106F4 0000                       		dc.w @walk2-Map_Yad_internal
000106F6 0000                       		dc.w @walk3-Map_Yad_internal
000106F8 0000                       		dc.w @walk4-Map_Yad_internal
000106FA 0000                       		dc.w @walk5-Map_Yad_internal
000106FC 05                         @walk0:		dc.b 5
000106FD F408 0000 F4               		dc.b $F4, 8, 0,	0, $F4
00010702 FC0E 0003 EC               		dc.b $FC, $E, 0, 3, $EC
00010707 EC04 000F FC               		dc.b $EC, 4, 0,	$F, $FC
0001070C F402 0011 0C               		dc.b $F4, 2, 0,	$11, $C
00010711 0409 0031 FC               		dc.b 4,	9, 0, $31, $FC
00010716 05                         @walk1:		dc.b 5
00010717 F408 0014 F4               		dc.b $F4, 8, 0,	$14, $F4
0001071C FC0E 0017 EC               		dc.b $FC, $E, 0, $17, $EC
00010721 EC04 000F FC               		dc.b $EC, 4, 0,	$F, $FC
00010726 F402 0011 0C               		dc.b $F4, 2, 0,	$11, $C
0001072B 0409 0031 FC               		dc.b 4,	9, 0, $31, $FC
00010730 05                         @walk2:		dc.b 5
00010731 F409 0023 F4               		dc.b $F4, 9, 0,	$23, $F4
00010736 040D 0029 EC               		dc.b 4,	$D, 0, $29, $EC
0001073B EC04 000F FC               		dc.b $EC, 4, 0,	$F, $FC
00010740 F402 0011 0C               		dc.b $F4, 2, 0,	$11, $C
00010745 0409 0031 FC               		dc.b 4,	9, 0, $31, $FC
0001074A 05                         @walk3:		dc.b 5
0001074B F408 0000 F4               		dc.b $F4, 8, 0,	0, $F4
00010750 FC0E 0003 EC               		dc.b $FC, $E, 0, 3, $EC
00010755 EC04 000F FC               		dc.b $EC, 4, 0,	$F, $FC
0001075A F402 0011 0C               		dc.b $F4, 2, 0,	$11, $C
0001075F 0409 0037 FC               		dc.b 4,	9, 0, $37, $FC
00010764 05                         @walk4:		dc.b 5
00010765 F408 0014 F4               		dc.b $F4, 8, 0,	$14, $F4
0001076A FC0E 0017 EC               		dc.b $FC, $E, 0, $17, $EC
0001076F EC04 000F FC               		dc.b $EC, 4, 0,	$F, $FC
00010774 F402 0011 0C               		dc.b $F4, 2, 0,	$11, $C
00010779 0409 0037 FC               		dc.b 4,	9, 0, $37, $FC
0001077E 05                         @walk5:		dc.b 5
0001077F F409 0023 F4               		dc.b $F4, 9, 0,	$23, $F4
00010784 040D 0029 EC               		dc.b 4,	$D, 0, $29, $EC
00010789 EC04 000F FC               		dc.b $EC, 4, 0,	$F, $FC
0001078E F402 0011 0C               		dc.b $F4, 2, 0,	$11, $C
00010793 0409 0037 FC               		dc.b 4,	9, 0, $37, $FC
00010798                            		even
00010798                            		even
00010798                            
00010798                            		include	"_incObj\sub SolidObject.asm"
00010798                            ; ---------------------------------------------------------------------------
00010798                            ; Solid	object subroutine (includes spikes, blocks, rocks etc)
00010798                            ;
00010798                            ; input:
00010798                            ;	d1 = width
00010798                            ;	d2 = height / 2 (when jumping)
00010798                            ;	d3 = height / 2 (when walking)
00010798                            ;	d4 = x-axis position
00010798                            ; ---------------------------------------------------------------------------
00010798                            
00010798                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00010798                            
00010798                            
00010798                            SolidObject:
00010798 4A28 0025                  		tst.b	obSolid(a0)	; is Sonic standing on the object?
0001079C 6700 0000                  		beq.w	Solid_ChkEnter	; if not, branch
000107A0 3401                       		move.w	d1,d2
000107A2 D442                       		add.w	d2,d2
000107A4 43F8 D000                  		lea	(v_player).w,a1
000107A8 0829 0001 0022             		btst	#1,obStatus(a1)	; is Sonic in the air?
000107AE 6600                       		bne.s	@leave		; if yes, branch
000107B0 3029 0008                  		move.w	obX(a1),d0
000107B4 9068 0008                  		sub.w	obX(a0),d0
000107B8 D041                       		add.w	d1,d0
000107BA 6B00                       		bmi.s	@leave		; if Sonic moves off the left, branch
000107BC B042                       		cmp.w	d2,d0		; has Sonic moved off the right?
000107BE 6500                       		bcs.s	@stand		; if not, branch
000107C0                            
000107C0                            	@leave:
000107C0 08A9 0003 0022             		bclr	#3,obStatus(a1)	; clear Sonic's standing flag
000107C6 08A8 0003 0022             		bclr	#3,obStatus(a0)	; clear object's standing flag
000107CC 4228 0025                  		clr.b	obSolid(a0)
000107D0 7800                       		moveq	#0,d4
000107D2 4E75                       		rts	
000107D4                            
000107D4                            	@stand:
000107D4 3404                       		move.w	d4,d2
000107D6 6100 0000                  		bsr.w	MvSonicOnPtfmg
000107DA 7800                       		moveq	#0,d4
000107DC 4E75                       		rts	
000107DE                            ; ===========================================================================
000107DE                            
000107DE                            SolidObject71:
000107DE 4A28 0025                  		tst.b	obSolid(a0)
000107E2 6700 0000                  		beq.w	loc_FAD0
000107E6 3401                       		move.w	d1,d2
000107E8 D442                       		add.w	d2,d2
000107EA 43F8 D000                  		lea	(v_player).w,a1
000107EE 0829 0001 0022             		btst	#1,obStatus(a1)
000107F4 6600                       		bne.s	@leave
000107F6 3029 0008                  		move.w	obX(a1),d0
000107FA 9068 0008                  		sub.w	obX(a0),d0
000107FE D041                       		add.w	d1,d0
00010800 6B00                       		bmi.s	@leave
00010802 B042                       		cmp.w	d2,d0
00010804 6500                       		bcs.s	@stand
00010806                            
00010806                            	@leave:
00010806 08A9 0003 0022             		bclr	#3,obStatus(a1)
0001080C 08A8 0003 0022             		bclr	#3,obStatus(a0)
00010812 4228 0025                  		clr.b	obSolid(a0)
00010816 7800                       		moveq	#0,d4
00010818 4E75                       		rts	
0001081A                            
0001081A                            	@stand:
0001081A 3404                       		move.w	d4,d2
0001081C 6100 0000                  		bsr.w	MvSonicOnPtfmg
00010820 7800                       		moveq	#0,d4
00010822 4E75                       		rts	
00010824                            ; ===========================================================================
00010824                            
00010824                            SolidObject2F:
00010824 43F8 D000                  		lea	(v_player).w,a1
00010828 4A28 0001                  		tst.b	obRender(a0)
0001082C 6A00 0000                  		bpl.w	Solid_Ignore
00010830 3029 0008                  		move.w	obX(a1),d0
00010834 9068 0008                  		sub.w	obX(a0),d0
00010838 D041                       		add.w	d1,d0
0001083A 6B00 0000                  		bmi.w	Solid_Ignore
0001083E 3601                       		move.w	d1,d3
00010840 D643                       		add.w	d3,d3
00010842 B043                       		cmp.w	d3,d0
00010844 6200 0000                  		bhi.w	Solid_Ignore
00010848 3A00                       		move.w	d0,d5
0001084A 0828 0000 0001             		btst	#0,obRender(a0)	; is object horizontally flipped?
00010850 6700                       		beq.s	@notflipped	; if not, branch
00010852 4645                       		not.w	d5
00010854 DA43                       		add.w	d3,d5
00010856                            
00010856                            	@notflipped:
00010856 E24D                       		lsr.w	#1,d5
00010858 7600                       		moveq	#0,d3
0001085A 1632 5000                  		move.b	(a2,d5.w),d3
0001085E 9612                       		sub.b	(a2),d3
00010860 3A28 000C                  		move.w	obY(a0),d5
00010864 9A43                       		sub.w	d3,d5
00010866 1629 0016                  		move.b	obHeight(a1),d3
0001086A 4883                       		ext.w	d3
0001086C D443                       		add.w	d3,d2
0001086E 3629 000C                  		move.w	obY(a1),d3
00010872 9645                       		sub.w	d5,d3
00010874 5843                       		addq.w	#4,d3
00010876 D642                       		add.w	d2,d3
00010878 6B00 0000                  		bmi.w	Solid_Ignore
0001087C 3802                       		move.w	d2,d4
0001087E D844                       		add.w	d4,d4
00010880 B644                       		cmp.w	d4,d3
00010882 6400 0000                  		bcc.w	Solid_Ignore
00010886 6000 0000                  		bra.w	loc_FB0E
0001088A                            ; ===========================================================================
0001088A                            
0001088A                            Solid_ChkEnter:
0001088A 4A28 0001                  		tst.b	obRender(a0)
0001088E 6A00 0000                  		bpl.w	Solid_Ignore
00010892                            
00010892                            loc_FAD0:
00010892 43F8 D000                  		lea	(v_player).w,a1
00010896 3029 0008                  		move.w	obX(a1),d0
0001089A 9068 0008                  		sub.w	obX(a0),d0
0001089E D041                       		add.w	d1,d0
000108A0 6B00 0000                  		bmi.w	Solid_Ignore	; if Sonic moves off the left, branch
000108A4 3601                       		move.w	d1,d3
000108A6 D643                       		add.w	d3,d3
000108A8 B043                       		cmp.w	d3,d0		; has Sonic moved off the right?
000108AA 6200 0000                  		bhi.w	Solid_Ignore	; if yes, branch
000108AE 1629 0016                  		move.b	obHeight(a1),d3
000108B2 4883                       		ext.w	d3
000108B4 D443                       		add.w	d3,d2
000108B6 3629 000C                  		move.w	obY(a1),d3
000108BA 9668 000C                  		sub.w	obY(a0),d3
000108BE 5843                       		addq.w	#4,d3
000108C0 D642                       		add.w	d2,d3
000108C2 6B00 0000                  		bmi.w	Solid_Ignore	; if Sonic moves above, branch
000108C6 3802                       		move.w	d2,d4
000108C8 D844                       		add.w	d4,d4
000108CA B644                       		cmp.w	d4,d3		; has Sonic moved below?
000108CC 6400 0000                  		bcc.w	Solid_Ignore	; if yes, branch
000108D0                            
000108D0                            loc_FB0E:
000108D0 4A38 F7C8                  		tst.b	(f_lockmulti).w	; are controls locked?
000108D4 6B00 0000                  		bmi.w	Solid_Ignore	; if yes, branch
000108D8 0C38 0006 D024             		cmpi.b	#6,(v_player+obRoutine).w ; is Sonic dying?
000108DE 6400 0000                  		bcc.w	Solid_Ignore	; if yes, branch
000108E2 4A78 FE08                  		tst.w	(v_debuguse).w	; is debug mode being used?
000108E6 6600 0000                  		bne.w	Solid_Debug	; if yes, branch
000108EA 3A00                       		move.w	d0,d5
000108EC B240                       		cmp.w	d0,d1		; is Sonic right of centre of object?
000108EE 6400                       		bcc.s	@isright	; if yes, branch
000108F0 D241                       		add.w	d1,d1
000108F2 9041                       		sub.w	d1,d0
000108F4 3A00                       		move.w	d0,d5
000108F6 4445                       		neg.w	d5
000108F8                            
000108F8                            	@isright:
000108F8 3203                       		move.w	d3,d1
000108FA B443                       		cmp.w	d3,d2		; is Sonic below centre of object?
000108FC 6400                       		bcc.s	@isbelow	; if yes, branch
000108FE                            
000108FE 5943                       		subq.w	#4,d3
00010900 9644                       		sub.w	d4,d3
00010902 3203                       		move.w	d3,d1
00010904 4441                       		neg.w	d1
00010906                            
00010906                            	@isbelow:
00010906 BA41                       		cmp.w	d1,d5
00010908 6200 0000                  		bhi.w	Solid_TopBottom	; if Sonic hits top or bottom, branch
0001090C 0C41 0004                  		cmpi.w	#4,d1
00010910 6300                       		bls.s	Solid_SideAir
00010912 4A40                       		tst.w	d0		; where is Sonic?
00010914 6700                       		beq.s	Solid_Centre	; if inside the object, branch
00010916 6B00                       		bmi.s	Solid_Right	; if right of the object, branch
00010918 4A69 0010                  		tst.w	obVelX(a1)	; is Sonic moving left?
0001091C 6B00                       		bmi.s	Solid_Centre	; if yes, branch
0001091E 6000                       		bra.s	Solid_Left
00010920                            ; ===========================================================================
00010920                            
00010920                            Solid_Right:
00010920 4A69 0010                  		tst.w	obVelX(a1)	; is Sonic moving right?
00010924 6A00                       		bpl.s	Solid_Centre	; if yes, branch
00010926                            
00010926                            Solid_Left:
00010926 337C 0000 0014             		move.w	#0,obInertia(a1)
0001092C 337C 0000 0010             		move.w	#0,obVelX(a1)	; stop Sonic moving
00010932                            
00010932                            Solid_Centre:
00010932 9169 0008                  		sub.w	d0,obX(a1)	; correct Sonic's position
00010936 0829 0001 0022             		btst	#1,obStatus(a1)	; is Sonic in the air?
0001093C 6600                       		bne.s	Solid_SideAir	; if yes, branch
0001093E 08E9 0005 0022             		bset	#5,obStatus(a1)	; make Sonic push object
00010944 08E8 0005 0022             		bset	#5,obStatus(a0)	; make object be pushed
0001094A 7801                       		moveq	#1,d4		; return side collision
0001094C 4E75                       		rts	
0001094E                            ; ===========================================================================
0001094E                            
0001094E                            Solid_SideAir:
0001094E 6100                       		bsr.s	Solid_NotPushing
00010950 7801                       		moveq	#1,d4		; return side collision
00010952 4E75                       		rts	
00010954                            ; ===========================================================================
00010954                            
00010954                            Solid_Ignore:
00010954 0828 0005 0022             		btst	#5,obStatus(a0)	; is Sonic pushing?
0001095A 6700                       		beq.s	Solid_Debug	; if not, branch
0001095C 337C 0000 001C             		move.w	#id_Run,obAnim(a1) ; use running animation
00010962                            
00010962                            Solid_NotPushing:
00010962 08A8 0005 0022             		bclr	#5,obStatus(a0)	; clear pushing flag
00010968 08A9 0005 0022             		bclr	#5,obStatus(a1)	; clear Sonic's pushing flag
0001096E                            
0001096E                            Solid_Debug:
0001096E 7800                       		moveq	#0,d4		; return no collision
00010970 4E75                       		rts	
00010972                            ; ===========================================================================
00010972                            
00010972                            Solid_TopBottom:
00010972 4A43                       		tst.w	d3		; is Sonic below the object?
00010974 6B00                       		bmi.s	Solid_Below	; if yes, branch
00010976 0C43 0010                  		cmpi.w	#$10,d3		; has Sonic landed on the object?
0001097A 6500                       		bcs.s	Solid_Landed	; if yes, branch
0001097C 60D6                       		bra.s	Solid_Ignore
0001097E                            ; ===========================================================================
0001097E                            
0001097E                            Solid_Below:
0001097E 4A69 0012                  		tst.w	obVelY(a1)	; is Sonic moving vertically?
00010982 6700                       		beq.s	Solid_Squash	; if not, branch
00010984 6A00                       		bpl.s	Solid_TopBtmAir	; if moving downwards, branch
00010986 4A43                       		tst.w	d3		; is Sonic above the object?
00010988 6A00                       		bpl.s	Solid_TopBtmAir	; if yes, branch
0001098A 9769 000C                  		sub.w	d3,obY(a1)	; correct Sonic's position
0001098E 337C 0000 0012             		move.w	#0,obVelY(a1)	; stop Sonic moving
00010994                            
00010994                            Solid_TopBtmAir:
00010994 78FF                       		moveq	#-1,d4
00010996 4E75                       		rts	
00010998                            ; ===========================================================================
00010998                            
00010998                            Solid_Squash:
00010998 0829 0001 0022             		btst	#1,obStatus(a1)	; is Sonic in the air?
0001099E 66F4                       		bne.s	Solid_TopBtmAir	; if yes, branch
000109A0 2F08                       		move.l	a0,-(sp)
000109A2 2049                       		movea.l	a1,a0
000109A4 4EB9 0000 0000             		jsr	(KillSonic).l	; kill Sonic
000109AA 205F                       		movea.l	(sp)+,a0
000109AC 78FF                       		moveq	#-1,d4
000109AE 4E75                       		rts	
000109B0                            ; ===========================================================================
000109B0                            
000109B0                            Solid_Landed:
000109B0 5943                       		subq.w	#4,d3
000109B2 7200                       		moveq	#0,d1
000109B4 1228 0019                  		move.b	obActWid(a0),d1
000109B8 3401                       		move.w	d1,d2
000109BA D442                       		add.w	d2,d2
000109BC D269 0008                  		add.w	obX(a1),d1
000109C0 9268 0008                  		sub.w	obX(a0),d1
000109C4 6B00                       		bmi.s	Solid_Miss	; if Sonic is right of object, branch
000109C6 B242                       		cmp.w	d2,d1		; is Sonic left of object?
000109C8 6400                       		bcc.s	Solid_Miss	; if yes, branch
000109CA 4A69 0012                  		tst.w	obVelY(a1)	; is Sonic moving upwards?
000109CE 6B00                       		bmi.s	Solid_Miss	; if yes, branch
000109D0 9769 000C                  		sub.w	d3,obY(a1)	; correct Sonic's position
000109D4 5369 000C                  		subq.w	#1,obY(a1)
000109D8 6100                       		bsr.s	Solid_ResetFloor
000109DA 117C 0002 0025             		move.b	#2,obSolid(a0) ; set standing flags
000109E0 08E8 0003 0022             		bset	#3,obStatus(a0)
000109E6 78FF                       		moveq	#-1,d4		; return top/bottom collision
000109E8 4E75                       		rts	
000109EA                            ; ===========================================================================
000109EA                            
000109EA                            Solid_Miss:
000109EA 7800                       		moveq	#0,d4
000109EC 4E75                       		rts	
000109EE                            ; End of function SolidObject
000109EE                            
000109EE                            
000109EE                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000109EE                            
000109EE                            
000109EE                            Solid_ResetFloor:
000109EE 0829 0003 0022             		btst	#3,obStatus(a1)	; is Sonic standing on something?
000109F4 6700                       		beq.s	@notonobj	; if not, branch
000109F6                            
000109F6 7000                       		moveq	#0,d0
000109F8 1029 003D                  		move.b	$3D(a1),d0	; get object being stood on
000109FC ED48                       		lsl.w	#6,d0
000109FE 0680 00FF D000             		addi.l	#(v_objspace&$FFFFFF),d0
00010A04 2440                       		movea.l	d0,a2
00010A06 08AA 0003 0022             		bclr	#3,obStatus(a2)	; clear object's standing flags
00010A0C 422A 0025                  		clr.b	obSolid(a2)
00010A10                            
00010A10                            	@notonobj:
00010A10 3008                       		move.w	a0,d0
00010A12 0440 D000                  		subi.w	#$D000,d0
00010A16 EC48                       		lsr.w	#6,d0
00010A18 0240 007F                  		andi.w	#$7F,d0
00010A1C 1340 003D                  		move.b	d0,$3D(a1)	; set object being stood on
00010A20 137C 0000 0026             		move.b	#0,obAngle(a1)	; clear Sonic's angle
00010A26 337C 0000 0012             		move.w	#0,obVelY(a1)	; stop Sonic
00010A2C 3369 0010 0014             		move.w	obVelX(a1),obInertia(a1)
00010A32 0829 0001 0022             		btst	#1,obStatus(a1)	; is Sonic in the air?
00010A38 6700                       		beq.s	@notinair	; if not, branch
00010A3A 2F08                       		move.l	a0,-(sp)
00010A3C 2049                       		movea.l	a1,a0
00010A3E 4EB9 0000 0000             		jsr	(Sonic_ResetOnFloor).l ; reset Sonic as if on floor
00010A44 205F                       		movea.l	(sp)+,a0
00010A46                            
00010A46                            	@notinair:
00010A46 08E9 0003 0022             		bset	#3,obStatus(a1)	; set object standing flag
00010A4C 08E8 0003 0022             		bset	#3,obStatus(a0)	; set Sonic standing on object flag
00010A52 4E75                       		rts	
00010A54                            ; End of function Solid_ResetFloor
00010A54                            
00010A54                            MvSonicOnPtfmG: ;Garbage shit
00010A54 43F8 D000                  		lea	(v_player).w,a1
00010A58 3028 000C                  		move.w	obY(a0),d0
00010A5C 9043                       		sub.w	d3,d0
00010A5E 6000                       		bra.s	MvSonic2G
00010A60                            ; End of function MvSonicOnPtfmg
00010A60                            
00010A60                            ; ---------------------------------------------------------------------------
00010A60                            ; Subroutine to	change Sonic's position with a platform
00010A60                            ; ---------------------------------------------------------------------------
00010A60                            
00010A60                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00010A60                            
00010A60                            
00010A60                            MvSonicOnPtfm2g:
00010A60 43F8 D000                  		lea	(v_player).w,a1
00010A64 3028 000C                  		move.w	obY(a0),d0
00010A68 0440 0009                  		subi.w	#9,d0
00010A6C                            
00010A6C                            MvSonic2G:
00010A6C 4A38 F7C8                  		tst.b	(f_lockmulti).w
00010A70 6B00                       		bmi.s	locret_7B62G
00010A72 0C38 0006 D024             		cmpi.b	#6,(v_player+obRoutine).w
00010A78 6400                       		bhs.s	locret_7B62G
00010A7A 4A78 FE08                  		tst.w	(v_debuguse).w
00010A7E 6600                       		bne.s	locret_7B62G
00010A80 7200                       		moveq	#0,d1
00010A82 1229 0016                  		move.b	obHeight(a1),d1
00010A86 9041                       		sub.w	d1,d0
00010A88 3340 000C                  		move.w	d0,obY(a1)
00010A8C 9468 0008                  		sub.w	obX(a0),d2
00010A90 9569 0008                  		sub.w	d2,obX(a1)
00010A94                            
00010A94                            locret_7B62G:
00010A94 4E75                       		rts	
00010A94 4E75                       		rts	
00010A96                            
00010A96                            		include	"_incObj\51 Smashable Green Block.asm"
00010A96                            ; ---------------------------------------------------------------------------
00010A96                            ; Object 51 - smashable	green block (MZ)
00010A96                            ; ---------------------------------------------------------------------------
00010A96                            
00010A96                            SmashBlock:
00010A96 7000                       		moveq	#0,d0
00010A98 1028 0024                  		move.b	obRoutine(a0),d0
00010A9C 323B 0000                  		move.w	Smab_Index(pc,d0.w),d1
00010AA0 4EBB 1000                  		jsr	Smab_Index(pc,d1.w)
00010AA4 6000 F9C8                  		bra.w	RememberState
00010AA8                            ; ===========================================================================
00010AA8 0000                       Smab_Index:	dc.w Smab_Main-Smab_Index
00010AAA 0000                       		dc.w Smab_Solid-Smab_Index
00010AAC 0000                       		dc.w Smab_Points-Smab_Index
00010AAE                            ; ===========================================================================
00010AAE                            
00010AAE                            Smab_Main:	; Routine 0
00010AAE 5428 0024                  		addq.b	#2,obRoutine(a0)
00010AB2 217C 0000 0000 0004        		move.l	#Map_Smab,obMap(a0)
00010ABA 317C 42B8 0002             		move.w	#$42B8,obGfx(a0)
00010AC0 117C 0004 0001             		move.b	#4,obRender(a0)
00010AC6 117C 0010 0019             		move.b	#$10,obActWid(a0)
00010ACC 117C 0004 0018             		move.b	#4,obPriority(a0)
00010AD2 1168 0028 001A             		move.b	obSubtype(a0),obFrame(a0)
00010AD8                            
00010AD8                            Smab_Solid:	; Routine 2
00010AD8                            
00010AD8 =00000032                  sonicAniFrame:	equ $32		; Sonic's current animation number
00010AD8 =00000034                  @count:		equ $34		; number of blocks hit + previous stuff
00010AD8                            
00010AD8 3178 F7D0 0034             		move.w	(v_itembonus).w,$34(a0)
00010ADE 1178 D01C 0032             		move.b	(v_player+obAnim).w,sonicAniFrame(a0) ; load Sonic's animation number
00010AE4 323C 001B                  		move.w	#$1B,d1
00010AE8 343C 0010                  		move.w	#$10,d2
00010AEC 363C 0011                  		move.w	#$11,d3
00010AF0 3828 0008                  		move.w	obX(a0),d4
00010AF4 6100 FCA2                  		bsr.w	SolidObject
00010AF8 0828 0003 0022             		btst	#3,obStatus(a0)	; has Sonic landed on the block?
00010AFE 6600                       		bne.s	@smash		; if yes, branch
00010B00                            
00010B00                            	@notspinning:
00010B00 4E75                       		rts	
00010B02                            ; ===========================================================================
00010B02                            
00010B02                            @smash:
00010B02 0C28 0000 0032             		cmpi.b	#id_Roll,sonicAniFrame(a0) ; is Sonic rolling/jumping?
00010B08 66F6                       		bne.s	@notspinning	; if not, branch
00010B0A 31E8 0034 F7D0             		move.w	@count(a0),(v_itembonus).w
00010B10 08E9 0002 0022             		bset	#2,obStatus(a1)
00010B16 137C 000E 0016             		move.b	#$E,obHeight(a1)
00010B1C 137C 0007 0017             		move.b	#7,obWidth(a1)
00010B22 137C 0000 001C             		move.b	#id_Roll,obAnim(a1) ; make Sonic roll
00010B28 337C FD00 0012             		move.w	#-$300,obVelY(a1) ; rebound Sonic
00010B2E 08E9 0001 0022             		bset	#1,obStatus(a1)
00010B34 08A9 0003 0022             		bclr	#3,obStatus(a1)
00010B3A 137C 0002 0024             		move.b	#2,obRoutine(a1)
00010B40 08A8 0003 0022             		bclr	#3,obStatus(a0)
00010B46 4228 0025                  		clr.b	obSolid(a0)
00010B4A 117C 0001 001A             		move.b	#1,obFrame(a0)
00010B50 49F9 0000 0000             		lea	(Smab_Speeds).l,a4 ; load broken fragment speed data
00010B56 7203                       		moveq	#3,d1		; set number of	fragments to 4
00010B58 343C 0038                  		move.w	#$38,d2
00010B5C 6100 D4AE                  		bsr.w	SmashObject
00010B60 6100 DD4E                  		bsr.w	FindFreeObj
00010B64 6600                       		bne.s	Smab_Points
00010B66 137C 0029 0000             		move.b	#id_Points,0(a1) ; load points object
00010B6C 3368 0008 0008             		move.w	obX(a0),obX(a1)
00010B72 3368 000C 000C             		move.w	obY(a0),obY(a1)
00010B78 3438 F7D0                  		move.w	(v_itembonus).w,d2
00010B7C 5478 F7D0                  		addq.w	#2,(v_itembonus).w ; increment bonus counter
00010B80 0C42 0006                  		cmpi.w	#6,d2		; have fewer than 3 blocks broken?
00010B84 6500                       		bcs.s	@bonus		; if yes, branch
00010B86 7406                       		moveq	#6,d2		; set cap for points
00010B88                            
00010B88                            	@bonus:
00010B88 7000                       		moveq	#0,d0
00010B8A 303B 2000                  		move.w	Smab_Scores(pc,d2.w),d0
00010B8E 0C78 0020 F7D0             		cmpi.w	#$20,(v_itembonus).w ; have 16 blocks been smashed?
00010B94 6500                       		bcs.s	@givepoints	; if not, branch
00010B96 303C 03E8                  		move.w	#1000,d0	; give higher points for 16th block
00010B9A 740A                       		moveq	#10,d2
00010B9C                            
00010B9C                            	@givepoints:
00010B9C 4EB9 0000 0000             		jsr	(AddPoints).l
00010BA2 E24A                       		lsr.w	#1,d2
00010BA4 1342 001A                  		move.b	d2,obFrame(a1)
00010BA8                            
00010BA8                            Smab_Points:	; Routine 4
00010BA8 6100 D858                  		bsr.w	SpeedToPos
00010BAC 0668 0038 0012             		addi.w	#$38,obVelY(a0)
00010BB2 6100 D874                  		bsr.w	DisplaySprite
00010BB6 4A28 0001                  		tst.b	obRender(a0)
00010BBA 6A00 D8A8                  		bpl.w	DeleteObject
00010BBE 4E75                       		rts	
00010BC0                            ; ===========================================================================
00010BC0 FE00 FE00                  Smab_Speeds:	dc.w -$200, -$200	; x-speed, y-speed
00010BC4 FF00 FF00                  		dc.w -$100, -$100
00010BC8 0200 FE00                  		dc.w $200, -$200
00010BCC 0100 FF00                  		dc.w $100, -$100
00010BD0                            
00010BD0 000A 0014 0032 0064        Smab_Scores:	dc.w 10, 20, 50, 100
00010BD0 000A 0014 0032 0064        Smab_Scores:	dc.w 10, 20, 50, 100
00010BD8                            Map_Smab:	include	"_maps\Smashable Green Block.asm"
00010BD8                            ; ---------------------------------------------------------------------------
00010BD8                            ; Sprite mappings - smashable green block (MZ)
00010BD8                            ; ---------------------------------------------------------------------------
00010BD8                            Map_Smab_internal:
00010BD8 0000                       		dc.w @two-Map_Smab_internal
00010BDA 0000                       		dc.w @four-Map_Smab_internal
00010BDC 02                         @two:		dc.b 2
00010BDD F00D 0000 F0               		dc.b $F0, $D, 0, 0, $F0	; two fragments, arranged vertically
00010BE2 000D 0000 F0               		dc.b 0,	$D, 0, 0, $F0
00010BE7 04                         @four:		dc.b 4
00010BE8 F005 8000 F0               		dc.b $F0, 5, $80, 0, $F0 ; four fragments
00010BED 0005 8000 F0               		dc.b 0,	5, $80,	0, $F0
00010BF2 F005 8000 00               		dc.b $F0, 5, $80, 0, 0
00010BF7 0005 8000 00               		dc.b 0,	5, $80,	0, 0
00010BFC                            		even
00010BFC                            		even
00010BFC                            
00010BFC                            		include	"_incObj\52 Moving Blocks.asm"
00010BFC                            ; ---------------------------------------------------------------------------
00010BFC                            ; Object 52 - moving platform blocks (MZ, LZ, SBZ)
00010BFC                            ; ---------------------------------------------------------------------------
00010BFC                            
00010BFC                            MovingBlock:
00010BFC 7000                       		moveq	#0,d0
00010BFE 1028 0024                  		move.b	obRoutine(a0),d0
00010C02 323B 0000                  		move.w	MBlock_Index(pc,d0.w),d1
00010C06 4EFB 1000                  		jmp	MBlock_Index(pc,d1.w)
00010C0A                            ; ===========================================================================
00010C0A 0000                       MBlock_Index:	dc.w MBlock_Main-MBlock_Index
00010C0C 0000                       		dc.w MBlock_Platform-MBlock_Index
00010C0E 0000                       		dc.w MBlock_StandOn-MBlock_Index
00010C10                            
00010C10 =00000030                  mblock_origX:	equ $30
00010C10 =00000032                  mblock_origY:	equ $32
00010C10                            
00010C10 1000                       MBlock_Var:	dc.b $10, 0		; object width,	frame number
00010C12 2001                       		dc.b $20, 1
00010C14 2002                       		dc.b $20, 2
00010C16 4003                       		dc.b $40, 3
00010C18 3004                       		dc.b $30, 4
00010C1A                            ; ===========================================================================
00010C1A                            
00010C1A                            MBlock_Main:	; Routine 0
00010C1A 5428 0024                  		addq.b	#2,obRoutine(a0)
00010C1E 217C 0000 0000 0004        		move.l	#Map_MBlock,obMap(a0)
00010C26 317C 42B8 0002             		move.w	#$42B8,obGfx(a0)
00010C2C 0C38 0001 FE10             		cmpi.b	#id_LZ,(v_zone).w ; check if level is LZ
00010C32 6600                       		bne.s	loc_FE44
00010C34 217C 0000 0000 0004        		move.l	#Map_MBlockLZ,obMap(a0) ; LZ specific code
00010C3C 317C 43BC 0002             		move.w	#$43BC,obGfx(a0)
00010C42 117C 0007 0016             		move.b	#7,obHeight(a0)
00010C48                            
00010C48                            loc_FE44:
00010C48 0C38 0005 FE10             		cmpi.b	#id_SBZ,(v_zone).w ; check if level is SBZ
00010C4E 6600                       		bne.s	loc_FE60
00010C50 317C 22C0 0002             		move.w	#$22C0,obGfx(a0) ; SBZ specific code (object 5228)
00010C56 0C28 0028 0028             		cmpi.b	#$28,obSubtype(a0) ; is object 5228 ?
00010C5C 6700                       		beq.s	loc_FE60	; if yes, branch
00010C5E 317C 4460 0002             		move.w	#$4460,obGfx(a0) ; SBZ specific code (object 523x)
00010C64                            
00010C64                            loc_FE60:
00010C64 117C 0004 0001             		move.b	#4,obRender(a0)
00010C6A 7000                       		moveq	#0,d0
00010C6C 1028 0028                  		move.b	obSubtype(a0),d0
00010C70 E648                       		lsr.w	#3,d0
00010C72 0240 001E                  		andi.w	#$1E,d0
00010C76 45FB 0098                  		lea	MBlock_Var(pc,d0.w),a2
00010C7A 115A 0019                  		move.b	(a2)+,obActWid(a0)
00010C7E 115A 001A                  		move.b	(a2)+,obFrame(a0)
00010C82 117C 0004 0018             		move.b	#4,obPriority(a0)
00010C88 3168 0008 0030             		move.w	obX(a0),mblock_origX(a0)
00010C8E 3168 000C 0032             		move.w	obY(a0),mblock_origY(a0)
00010C94 0228 000F 0028             		andi.b	#$F,obSubtype(a0)
00010C9A                            
00010C9A                            MBlock_Platform: ; Routine 2
00010C9A 6100 0000                  		bsr.w	MBlock_Move
00010C9E 7200                       		moveq	#0,d1
00010CA0 1228 0019                  		move.b	obActWid(a0),d1
00010CA4 4EB9 0000 7A86             		jsr	(PlatformObject).l
00010CAA 6000                       		bra.s	MBlock_ChkDel
00010CAC                            ; ===========================================================================
00010CAC                            
00010CAC                            MBlock_StandOn:	; Routine 4
00010CAC 7200                       		moveq	#0,d1
00010CAE 1228 0019                  		move.b	obActWid(a0),d1
00010CB2 4EB9 0000 7BFA             		jsr	(ExitPlatform).l
00010CB8 3F28 0008                  		move.w	obX(a0),-(sp)
00010CBC 6100 0000                  		bsr.w	MBlock_Move
00010CC0 341F                       		move.w	(sp)+,d2
00010CC2 4EB9 0000 8168             		jsr	(MvSonicOnPtfm2).l
00010CC8                            
00010CC8                            MBlock_ChkDel:
00010CE6 6000 D740                  		bra.w	DisplaySprite
00010CEA                            ; ===========================================================================
00010CEA                            
00010CEA                            MBlock_Move:
00010CEA 7000                       		moveq	#0,d0
00010CEC 1028 0028                  		move.b	obSubtype(a0),d0
00010CF0 0240 000F                  		andi.w	#$F,d0
00010CF4 D040                       		add.w	d0,d0
00010CF6 323B 0000                  		move.w	MBlock_TypeIndex(pc,d0.w),d1
00010CFA 4EFB 1000                  		jmp	MBlock_TypeIndex(pc,d1.w)
00010CFE                            ; ===========================================================================
00010CFE 0000 0000                  MBlock_TypeIndex:dc.w MBlock_Type00-MBlock_TypeIndex, MBlock_Type01-MBlock_TypeIndex
00010D02 0000 0000                  		dc.w MBlock_Type02-MBlock_TypeIndex, MBlock_Type03-MBlock_TypeIndex
00010D06 0000 0000                  		dc.w MBlock_Type02-MBlock_TypeIndex, MBlock_Type05-MBlock_TypeIndex
00010D0A 0000 0000                  		dc.w MBlock_Type06-MBlock_TypeIndex, MBlock_Type07-MBlock_TypeIndex
00010D0E 0000 0000                  		dc.w MBlock_Type08-MBlock_TypeIndex, MBlock_Type02-MBlock_TypeIndex
00010D12 0000                       		dc.w MBlock_Type0A-MBlock_TypeIndex
00010D14                            ; ===========================================================================
00010D14                            
00010D14                            MBlock_Type00:
00010D14 4E75                       		rts	
00010D16                            ; ===========================================================================
00010D16                            
00010D16                            MBlock_Type01:
00010D16 1038 FE6C                  		move.b	(v_oscillate+$E).w,d0
00010D1A 323C 0060                  		move.w	#$60,d1
00010D1E 0828 0000 0022             		btst	#0,obStatus(a0)
00010D24 6700                       		beq.s	loc_FF26
00010D26 4440                       		neg.w	d0
00010D28 D041                       		add.w	d1,d0
00010D2A                            
00010D2A                            loc_FF26:
00010D2A 3228 0030                  		move.w	mblock_origX(a0),d1
00010D2E 9240                       		sub.w	d0,d1
00010D30 3141 0008                  		move.w	d1,obX(a0)
00010D34 4E75                       		rts	
00010D36                            ; ===========================================================================
00010D36                            
00010D36                            MBlock_Type02:
00010D36 0C28 0004 0024             		cmpi.b	#4,obRoutine(a0) ; is Sonic standing on the platform?
00010D3C 6600                       		bne.s	MBlock_02_Wait
00010D3E 5228 0028                  		addq.b	#1,obSubtype(a0) ; if yes, add 1 to type
00010D42                            
00010D42                            MBlock_02_Wait:
00010D42 4E75                       		rts	
00010D44                            ; ===========================================================================
00010D44                            
00010D44                            MBlock_Type03:
00010D44 7600                       		moveq	#0,d3
00010D46 1628 0019                  		move.b	obActWid(a0),d3
00010D4A 6100 0000                  		bsr.w	ObjHitWallRight
00010D4E 4A41                       		tst.w	d1		; has the platform hit a wall?
00010D50 6B00                       		bmi.s	MBlock_03_End	; if yes, branch
00010D52 5268 0008                  		addq.w	#1,obX(a0)	; move platform	to the right
00010D56 3168 0008 0030             		move.w	obX(a0),mblock_origX(a0)
00010D5C 4E75                       		rts	
00010D5E                            ; ===========================================================================
00010D5E                            
00010D5E                            MBlock_03_End:
00010D5E 4228 0028                  		clr.b	obSubtype(a0)	; change to type 00 (non-moving	type)
00010D62 4E75                       		rts	
00010D64                            ; ===========================================================================
00010D64                            
00010D64                            MBlock_Type05:
00010D64 7600                       		moveq	#0,d3
00010D66 1628 0019                  		move.b	obActWid(a0),d3
00010D6A 6100 0000                  		bsr.w	ObjHitWallRight
00010D6E 4A41                       		tst.w	d1		; has the platform hit a wall?
00010D70 6B00                       		bmi.s	MBlock_05_End	; if yes, branch
00010D72 5268 0008                  		addq.w	#1,obX(a0)	; move platform	to the right
00010D76 3168 0008 0030             		move.w	obX(a0),mblock_origX(a0)
00010D7C 4E75                       		rts	
00010D7E                            ; ===========================================================================
00010D7E                            
00010D7E                            MBlock_05_End:
00010D7E 5228 0028                  		addq.b	#1,obSubtype(a0) ; change to type 06 (falling)
00010D82 4E75                       		rts	
00010D84                            ; ===========================================================================
00010D84                            
00010D84                            MBlock_Type06:
00010D84 6100 D67C                  		bsr.w	SpeedToPos
00010D88 0668 0018 0012             		addi.w	#$18,obVelY(a0)	; make the platform fall
00010D8E 6100 0000                  		bsr.w	ObjFloorDist
00010D92 4A41                       		tst.w	d1		; has platform hit the floor?
00010D94 6A00 0000                  		bpl.w	locret_FFA0	; if not, branch
00010D98 D368 000C                  		add.w	d1,obY(a0)
00010D9C 4268 0012                  		clr.w	obVelY(a0)	; stop platform	falling
00010DA0 4228 0028                  		clr.b	obSubtype(a0)	; change to type 00 (non-moving)
00010DA4                            
00010DA4                            locret_FFA0:
00010DA4 4E75                       		rts	
00010DA6                            ; ===========================================================================
00010DA6                            
00010DA6                            MBlock_Type07:
00010DA6 4A38 F7E2                  		tst.b	(f_switch+2).w	; has switch number 02 been pressed?
00010DAA 6700                       		beq.s	MBlock_07_ChkDel
00010DAC 5728 0028                  		subq.b	#3,obSubtype(a0) ; if yes, change object type to 04
00010DB0                            
00010DB0                            MBlock_07_ChkDel:
00010DB0 588F                       		addq.l	#4,sp
00010DD0 4E75                       		rts	
00010DD2                            ; ===========================================================================
00010DD2                            
00010DD2                            MBlock_Type08:
00010DD2 1038 FE7C                  		move.b	(v_oscillate+$1E).w,d0
00010DD6 323C 0080                  		move.w	#$80,d1
00010DDA 0828 0000 0022             		btst	#0,obStatus(a0)
00010DE0 6700                       		beq.s	loc_FFE2
00010DE2 4440                       		neg.w	d0
00010DE4 D041                       		add.w	d1,d0
00010DE6                            
00010DE6                            loc_FFE2:
00010DE6 3228 0032                  		move.w	mblock_origY(a0),d1
00010DEA 9240                       		sub.w	d0,d1
00010DEC 3141 000C                  		move.w	d1,obY(a0)
00010DF0 4E75                       		rts	
00010DF2                            ; ===========================================================================
00010DF2                            
00010DF2                            MBlock_Type0A:
00010DF2 7600                       		moveq	#0,d3
00010DF4 1628 0019                  		move.b	obActWid(a0),d3
00010DF8 D643                       		add.w	d3,d3
00010DFA 7208                       		moveq	#8,d1
00010DFC 0828 0000 0022             		btst	#0,obStatus(a0)
00010E02 6700                       		beq.s	loc_10004
00010E04 4441                       		neg.w	d1
00010E06 4443                       		neg.w	d3
00010E08                            
00010E08                            loc_10004:
00010E08 4A68 0036                  		tst.w	$36(a0)		; is platform set to move back?
00010E0C 6600                       		bne.s	MBlock_0A_Back	; if yes, branch
00010E0E 3028 0008                  		move.w	obX(a0),d0
00010E12 9068 0030                  		sub.w	mblock_origX(a0),d0
00010E16 B043                       		cmp.w	d3,d0
00010E18 6700                       		beq.s	MBlock_0A_Wait
00010E1A D368 0008                  		add.w	d1,obX(a0)	; move platform
00010E1E 317C 012C 0034             		move.w	#300,$34(a0)	; set time delay to 5 seconds
00010E24 4E75                       		rts	
00010E26                            ; ===========================================================================
00010E26                            
00010E26                            MBlock_0A_Wait:
00010E26 5368 0034                  		subq.w	#1,$34(a0)	; subtract 1 from time delay
00010E2A 6600                       		bne.s	locret_1002E	; if time remains, branch
00010E2C 317C 0001 0036             		move.w	#1,$36(a0)	; set platform to move back to its original position
00010E32                            
00010E32                            locret_1002E:
00010E32 4E75                       		rts	
00010E34                            ; ===========================================================================
00010E34                            
00010E34                            MBlock_0A_Back:
00010E34 3028 0008                  		move.w	obX(a0),d0
00010E38 9068 0030                  		sub.w	mblock_origX(a0),d0
00010E3C 6700                       		beq.s	MBlock_0A_Reset
00010E3E 9368 0008                  		sub.w	d1,obX(a0)	; return platform to its original position
00010E42 4E75                       		rts	
00010E44                            ; ===========================================================================
00010E44                            
00010E44                            MBlock_0A_Reset:
00010E44 4268 0036                  		clr.w	$36(a0)
00010E48 5328 0028                  		subq.b	#1,obSubtype(a0)
00010E4C 4E75                       		rts	
00010E4C 4E75                       		rts	
00010E4E                            Map_MBlock:	include	"_maps\Moving Blocks (MZ and SBZ).asm"
00010E4E                            ; ---------------------------------------------------------------------------
00010E4E                            ; Sprite mappings - moving blocks (MZ, SBZ)
00010E4E                            ; ---------------------------------------------------------------------------
00010E4E                            Map_MBlock_internal:
00010E4E 0000                       		dc.w @mz1-Map_MBlock_internal
00010E50 0000                       		dc.w @mz2-Map_MBlock_internal
00010E52 0000                       		dc.w @sbz-Map_MBlock_internal
00010E54 0000                       		dc.w @sbzwide-Map_MBlock_internal
00010E56 0000                       		dc.w @mz3-Map_MBlock_internal
00010E58 01                         @mz1:		dc.b 1
00010E59 F80F 0008 F0               		dc.b $F8, $F, 0, 8, $F0
00010E5E 02                         @mz2:		dc.b 2
00010E5F F80F 0008 E0               		dc.b $F8, $F, 0, 8, $E0
00010E64 F80F 0008 00               		dc.b $F8, $F, 0, 8, 0
00010E69 04                         @sbz:		dc.b 4
00010E6A F80C 2000 E0               		dc.b $F8, $C, $20, 0, $E0
00010E6F 000D 0004 E0               		dc.b 0,	$D, 0, 4, $E0
00010E74 F80C 2000 00               		dc.b $F8, $C, $20, 0, 0
00010E79 000D 0004 00               		dc.b 0,	$D, 0, 4, 0
00010E7E 04                         @sbzwide:	dc.b 4
00010E7F F80E 0000 C0               		dc.b $F8, $E, 0, 0, $C0
00010E84 F80E 0003 E0               		dc.b $F8, $E, 0, 3, $E0
00010E89 F80E 0003 00               		dc.b $F8, $E, 0, 3, 0
00010E8E F80E 0800 20               		dc.b $F8, $E, 8, 0, $20
00010E93 03                         @mz3:		dc.b 3
00010E94 F80F 0008 D0               		dc.b $F8, $F, 0, 8, $D0
00010E99 F80F 0008 F0               		dc.b $F8, $F, 0, 8, $F0
00010E9E F80F 0008 10               		dc.b $F8, $F, 0, 8, $10
00010EA4 00                         		even
00010EA4 00                         		even
00010EA4                            Map_MBlockLZ:	include	"_maps\Moving Blocks (LZ).asm"
00010EA4                            ; ---------------------------------------------------------------------------
00010EA4                            ; Sprite mappings - moving block (LZ)
00010EA4                            ; ---------------------------------------------------------------------------
00010EA4                            Map_MBlockLZ_internal:
00010EA4 0000                       		dc.w @0-Map_MBlockLZ_internal
00010EA6 01                         @0:		dc.b 1
00010EA7 F80D 0000 F0               		dc.b $F8, $D, 0, 0, $F0
00010EAC                            		even
00010EAC                            		even
00010EAC                            
00010EAC                            		include	"_incObj\55 Basaran.asm"
00010EAC                            ; ---------------------------------------------------------------------------
00010EAC                            ; Object 55 - Basaran enemy (MZ)
00010EAC                            ; ---------------------------------------------------------------------------
00010EAC                            
00010EAC                            Basaran:
00010EAC 7000                       		moveq	#0,d0
00010EAE 1028 0024                  		move.b	obRoutine(a0),d0
00010EB2 323B 0000                  		move.w	Bas_Index(pc,d0.w),d1
00010EB6 4EFB 1000                  		jmp	Bas_Index(pc,d1.w)
00010EBA                            ; ===========================================================================
00010EBA 0000                       Bas_Index:	dc.w Bas_Main-Bas_Index
00010EBC 0000                       		dc.w Bas_Action-Bas_Index
00010EBE                            ; ===========================================================================
00010EBE                            
00010EBE                            Bas_Main:	; Routine 0
00010EBE 5428 0024                  		addq.b	#2,obRoutine(a0)
00010EC2 217C 0000 0000 0004        		move.l	#Map_Bas,obMap(a0)
00010ECA 317C 84B8 0002             		move.w	#$84B8,obGfx(a0)
00010ED0 117C 0004 0001             		move.b	#4,obRender(a0)
00010ED6 117C 000C 0016             		move.b	#$C,obHeight(a0)
00010EDC 117C 0002 0018             		move.b	#2,obPriority(a0)
00010EE2 117C 000B 0020             		move.b	#$B,obColType(a0)
00010EE8 117C 0010 0019             		move.b	#$10,obActWid(a0)
00010EEE                            
00010EEE                            Bas_Action:	; Routine 2
00010EEE 7000                       		moveq	#0,d0
00010EF0 1028 0025                  		move.b	ob2ndRout(a0),d0
00010EF4 323B 0000                  		move.w	@index(pc,d0.w),d1
00010EF8 4EBB 1000                  		jsr	@index(pc,d1.w)
00010EFC 43F9 0000 0000             		lea	(Ani_Bas).l,a1
00010F02 6100 A2E2                  		bsr.w	AnimateSprite
00010F06 6000 F566                  		bra.w	RememberState
00010F0A                            ; ===========================================================================
00010F0A 0000                       @index:		dc.w @dropcheck-@index
00010F0C 0000                       		dc.w @dropfly-@index
00010F0E 0000                       		dc.w @flapsound-@index
00010F10 0000                       		dc.w @flyup-@index
00010F12                            ; ===========================================================================
00010F12                            
00010F12                            @dropcheck:
00010F12 343C 0080                  		move.w	#$80,d2
00010F16 6100 0000                  		bsr.w	@chkdistance	; is Sonic < $80 pixels from basaran?
00010F1A 6400                       		bcc.s	@nodrop		; if not, branch
00010F1C 3038 D00C                  		move.w	(v_player+obY).w,d0
00010F20 3140 0036                  		move.w	d0,$36(a0)
00010F24 9068 000C                  		sub.w	obY(a0),d0
00010F28 6500                       		bcs.s	@nodrop
00010F2A 0C40 0080                  		cmpi.w	#$80,d0		; is Sonic < $80 pixels from basaran?
00010F2E 6400                       		bcc.s	@nodrop		; if not, branch
00010F30 4A78 FE08                  		tst.w	(v_debuguse).w	; is debug mode	on?
00010F34 6600                       		bne.s	@nodrop		; if yes, branch
00010F36                            
00010F36 1038 FE0F                  		move.b	(v_vbla_byte).w,d0
00010F3A D007                       		add.b	d7,d0
00010F3C 0200 0007                  		andi.b	#7,d0
00010F40 6600                       		bne.s	@nodrop
00010F42 117C 0001 001C             		move.b	#1,obAnim(a0)
00010F48 5428 0025                  		addq.b	#2,ob2ndRout(a0)
00010F4C                            
00010F4C                            	@nodrop:
00010F4C 4E75                       		rts	
00010F4E                            ; ===========================================================================
00010F4E                            
00010F4E                            @dropfly:
00010F4E 6100 D4B2                  		bsr.w	SpeedToPos
00010F52 0668 0018 0012             		addi.w	#$18,obVelY(a0)	; make basaran fall
00010F58 343C 0080                  		move.w	#$80,d2
00010F5C 6100 0000                  		bsr.w	@chkdistance
00010F60 3028 0036                  		move.w	$36(a0),d0
00010F64 9068 000C                  		sub.w	obY(a0),d0
00010F68 6500                       		bcs.s	@chkdel
00010F6A 0C40 0010                  		cmpi.w	#$10,d0		; is basaran close to Sonic vertically?
00010F6E 6400                       		bcc.s	@dropmore	; if not, branch
00010F70 3141 0010                  		move.w	d1,obVelX(a0)	; make basaran fly horizontally
00010F74 317C 0000 0012             		move.w	#0,obVelY(a0)	; stop basaran falling
00010F7A 117C 0002 001C             		move.b	#2,obAnim(a0)
00010F80 5428 0025                  		addq.b	#2,ob2ndRout(a0)
00010F84                            
00010F84                            	@dropmore:
00010F84 4E75                       		rts	
00010F86                            
00010F86                            	@chkdel:
00010F86 4A28 0001                  		tst.b	obRender(a0)
00010F8A 6A00 D4D8                  		bpl.w	DeleteObject
00010F8E 4E75                       		rts	
00010F90                            ; ===========================================================================
00010F90                            
00010F90                            @flapsound:
00010F90 1038 FE0F                  		move.b	(v_vbla_byte).w,d0
00010F94 0200 000F                  		andi.b	#$F,d0
00010F98 6600                       		bne.s	@nosound
00010FA4                            
00010FA4                            	@nosound:
00010FA4 6100 D45C                  		bsr.w	SpeedToPos
00010FA8 3038 D008                  		move.w	(v_player+obX).w,d0
00010FAC 9068 0008                  		sub.w	obX(a0),d0
00010FB0 6400                       		bcc.s	@isright	; if Sonic is right of basaran, branch
00010FB2 4440                       		neg.w	d0
00010FB4                            
00010FB4                            	@isright:
00010FB4 0C40 0080                  		cmpi.w	#$80,d0		; is Sonic within $80 pixels of basaran?
00010FB8 6500                       		bcs.s	@dontflyup	; if yes, branch
00010FBA 1038 FE0F                  		move.b	(v_vbla_byte).w,d0
00010FBE D007                       		add.b	d7,d0
00010FC0 0200 0007                  		andi.b	#7,d0
00010FC4 6600                       		bne.s	@dontflyup
00010FC6 5428 0025                  		addq.b	#2,ob2ndRout(a0)
00010FCA                            
00010FCA                            @dontflyup:
00010FCA 4E75                       		rts	
00010FCC                            ; ===========================================================================
00010FCC                            
00010FCC                            @flyup:
00010FCC 6100 D434                  		bsr.w	SpeedToPos
00010FD0 0468 0018 0012             		subi.w	#$18,obVelY(a0)	; make basaran fly upwards
00010FD6 6100 0000                  		bsr.w	ObjHitCeiling
00010FDA 4A41                       		tst.w	d1		; has basaran hit the ceiling?
00010FDC 6A00                       		bpl.s	@noceiling	; if not, branch
00010FDE 9368 000C                  		sub.w	d1,obY(a0)
00010FE2 0268 FFF8 0008             		andi.w	#$FFF8,obX(a0)
00010FE8 4268 0010                  		clr.w	obVelX(a0)	; stop basaran moving
00010FEC 4268 0012                  		clr.w	obVelY(a0)
00010FF0 4228 001C                  		clr.b	obAnim(a0)
00010FF4 4228 0025                  		clr.b	ob2ndRout(a0)
00010FF8                            
00010FF8                            	@noceiling:
00010FF8 4E75                       		rts	
00010FFA                            ; ===========================================================================
00010FFA                            
00010FFA                            ; Subroutine to check Sonic's distance from the basaran
00010FFA                            
00010FFA                            ; input:
00010FFA                            ;	d2 = distance to compare
00010FFA                            
00010FFA                            ; output:
00010FFA                            ;	d0 = distance between Sonic and basaran
00010FFA                            ;	d1 = speed/direction for basaran to fly
00010FFA                            
00010FFA                            @chkdistance:
00010FFA 323C 0100                  		move.w	#$100,d1
00010FFE 08E8 0000 0022             		bset	#0,obStatus(a0)
00011004 3038 D008                  		move.w	(v_player+obX).w,d0
00011008 9068 0008                  		sub.w	obX(a0),d0
0001100C 6400                       		bcc.s	@right		; if Sonic is right of basaran, branch
0001100E 4440                       		neg.w	d0
00011010 4441                       		neg.w	d1
00011012 08A8 0000 0022             		bclr	#0,obStatus(a0)
00011018                            
00011018                            	@right:
00011018 B042                       		cmp.w	d2,d0
0001101A 4E75                       		rts	
0001101C                            ; ===========================================================================
0001101C                            ; unused crap
0001101C 6100 D3E4                  		bsr.w	SpeedToPos
00011020 6100 D406                  		bsr.w	DisplaySprite
00011024 4A28 0001                  		tst.b	obRender(a0)
00011028 6A00 D43A                  		bpl.w	DeleteObject
0001102C 4E75                       		rts	
0001102C 4E75                       		rts	
0001102E                            		include	"_anim\Basaran.asm"
0001102E                            ; ---------------------------------------------------------------------------
0001102E                            ; Animation script - Basaran enemy
0001102E                            ; ---------------------------------------------------------------------------
0001102E 0000                       Ani_Bas:	dc.w @still-Ani_Bas
00011030 0000                       		dc.w @fall-Ani_Bas
00011032 0000                       		dc.w @fly-Ani_Bas
00011034 0F00 FF                    @still:		dc.b $F, 0, afEnd
00011038 00                         		even
00011038 0F01 FF                    @fall:		dc.b $F, 1, afEnd
0001103C 00                         		even
0001103C 0301 0203 02FF             @fly:		dc.b 3,	1, 2, 3, 2, afEnd
00011042                            		even
00011042                            		even
00011042                            Map_Bas:	include	"_maps\Basaran.asm"
00011042                            ; ---------------------------------------------------------------------------
00011042                            ; Sprite mappings - Basaran enemy (MZ)
00011042                            ; ---------------------------------------------------------------------------
00011042                            Map_Bas_internal:
00011042 0000                       		dc.w @still-Map_Bas_internal
00011044 0000                       		dc.w @fly1-Map_Bas_internal
00011046 0000                       		dc.w @fly2-Map_Bas_internal
00011048 0000                       		dc.w @fly3-Map_Bas_internal
0001104A 01                         @still:		dc.b 1
0001104B F406 0000 F8               		dc.b $F4, 6, 0,	0, $F8
00011050 03                         @fly1:		dc.b 3
00011051 F20E 0006 F4               		dc.b $F2, $E, 0, 6, $F4
00011056 0A04 0012 FC               		dc.b $A, 4, 0, $12, $FC
0001105B 0200 0027 0C               		dc.b 2,	0, 0, $27, $C
00011060 04                         @fly2:		dc.b 4
00011061 F804 0014 F8               		dc.b $F8, 4, 0,	$14, $F8
00011066 000C 0016 F0               		dc.b 0,	$C, 0, $16, $F0
0001106B 0804 001A 00               		dc.b 8,	4, 0, $1A, 0
00011070 0000 0028 0C               		dc.b 0,	0, 0, $28, $C
00011075 04                         @fly3:		dc.b 4
00011076 F609 001C F5               		dc.b $F6, 9, 0,	$1C, $F5
0001107B 0608 0022 F4               		dc.b 6,	8, 0, $22, $F4
00011080 0E04 0025 F4               		dc.b $E, 4, 0, $25, $F4
00011085 FE00 0027 0C               		dc.b $FE, 0, 0,	$27, $C
0001108A                            		even
0001108A                            		even
0001108A                            
0001108A                            		include	"_incObj\56 Floating Blocks and Doors.asm"
0001108A                            ; ---------------------------------------------------------------------------
0001108A                            ; Object 56 - floating blocks (SYZ/SLZ), large doors (LZ)
0001108A                            ; ---------------------------------------------------------------------------
0001108A                            
0001108A                            FloatingBlock:
0001108A 7000                       		moveq	#0,d0
0001108C 1028 0024                  		move.b	obRoutine(a0),d0
00011090 323B 0000                  		move.w	FBlock_Index(pc,d0.w),d1
00011094 4EFB 1000                  		jmp	FBlock_Index(pc,d1.w)
00011098                            ; ===========================================================================
00011098 0000                       FBlock_Index:	dc.w FBlock_Main-FBlock_Index
0001109A 0000                       		dc.w FBlock_Action-FBlock_Index
0001109C                            
0001109C =00000034                  fb_origX:	equ $34		; original x-axis position
0001109C =00000030                  fb_origY:	equ $30		; original y-axis position
0001109C =0000003A                  fb_height:	equ $3A		; total object height
0001109C =0000003C                  fb_type:		equ $3C		; subtype (2nd digit only)
0001109C                            
0001109C                            FBlock_Var:	; width/2, height/2
0001109C 1010                       		dc.b  $10, $10	; subtype 0x/8x
0001109E 2020                       		dc.b  $20, $20	; subtype 1x/9x
000110A0 1020                       		dc.b  $10, $20	; subtype 2x/Ax
000110A2 201A                       		dc.b  $20, $1A	; subtype 3x/Bx
000110A4 1027                       		dc.b  $10, $27	; subtype 4x/Cx
000110A6 1010                       		dc.b  $10, $10	; subtype 5x/Dx
000110A8 0820                       		dc.b	8, $20	; subtype 6x/Ex
000110AA 4010                       		dc.b  $40, $10	; subtype 7x/Fx
000110AC                            ; ===========================================================================
000110AC                            
000110AC                            FBlock_Main:	; Routine 0
000110AC 5428 0024                  		addq.b	#2,obRoutine(a0)
000110B0 217C 0000 0000 0004        		move.l	#Map_FBlock,obMap(a0)
000110B8 317C 4000 0002             		move.w	#$4000,obGfx(a0)
000110BE 0C38 0001 FE10             		cmpi.b	#id_LZ,(v_zone).w ; check if level is LZ
000110C4 6600                       		bne.s	@notLZ
000110C6 317C 43C4 0002             		move.w	#$43C4,obGfx(a0) ; LZ specific code
000110CC                            
000110CC                            	@notLZ:
000110CC 117C 0004 0001             		move.b	#4,obRender(a0)
000110D2 117C 0003 0018             		move.b	#3,obPriority(a0)
000110D8 7000                       		moveq	#0,d0
000110DA 1028 0028                  		move.b	obSubtype(a0),d0 ; get subtype
000110DE E648                       		lsr.w	#3,d0
000110E0 0240 000E                  		andi.w	#$E,d0		; read only the 1st digit
000110E4 45FB 00B6                  		lea	FBlock_Var(pc,d0.w),a2 ; get size data
000110E8 115A 0019                  		move.b	(a2)+,obActWid(a0)
000110EC 1152 0016                  		move.b	(a2),obHeight(a0)
000110F0 E248                       		lsr.w	#1,d0
000110F2 1140 001A                  		move.b	d0,obFrame(a0)
000110F6 3168 0008 0034             		move.w	obX(a0),fb_origX(a0)
000110FC 3168 000C 0030             		move.w	obY(a0),fb_origY(a0)
00011102 7000                       		moveq	#0,d0
00011104 1012                       		move.b	(a2),d0
00011106 D040                       		add.w	d0,d0
00011108 3140 003A                  		move.w	d0,fb_height(a0)
0001110C 7000                       		moveq	#0,d0
0001110E 0C38 0001 FE10             		cmpi.b	#id_LZ,(v_zone).w ; check if level is LZ
00011114 6700                       		beq.s	@stillnotLZ
00011116 1028 0028                  		move.b	obSubtype(a0),d0 ; SYZ/SLZ specific code
0001111A 0240 000F                  		andi.w	#$F,d0
0001111E 5140                       		subq.w	#8,d0
00011120 6500                       		bcs.s	@stillnotLZ
00011122 E548                       		lsl.w	#2,d0
00011124 45F8 FE8A                  		lea	(v_oscillate+$2C).w,a2
00011128 45F2 0000                  		lea	(a2,d0.w),a2
0001112C 4A52                       		tst.w	(a2)
0001112E 6A00                       		bpl.s	@stillnotLZ
00011130 0868 0000 0022             		bchg	#0,obStatus(a0)
00011136                            
00011136                            	@stillnotLZ:
00011136 1028 0028                  		move.b	obSubtype(a0),d0
0001113A 6A00                       		bpl.s	FBlock_Action
0001113C 0200 000F                  		andi.b	#$F,d0
00011140 1140 003C                  		move.b	d0,fb_type(a0)
00011144 117C 0005 0028             		move.b	#5,obSubtype(a0)
0001114A 0C28 0007 001A             		cmpi.b	#7,obFrame(a0)
00011150 6600                       		bne.s	@chkstate
00011152 117C 000C 0028             		move.b	#$C,obSubtype(a0)
00011158 317C 0080 003A             		move.w	#$80,fb_height(a0)
0001115E                            
0001115E                            @chkstate:
0001115E 45F8 FC00                  		lea	(v_objstate).w,a2
00011162 7000                       		moveq	#0,d0
00011164 1028 0023                  		move.b	obRespawnNo(a0),d0
00011168 6700                       		beq.s	FBlock_Action
0001116A 08B2 0007 0002             		bclr	#7,2(a2,d0.w)
00011170 0832 0000 0002             		btst	#0,2(a2,d0.w)
00011176 6700                       		beq.s	FBlock_Action
00011178 5228 0028                  		addq.b	#1,obSubtype(a0)
0001117C 4268 003A                  		clr.w	fb_height(a0)
00011180                            
00011180                            FBlock_Action:	; Routine 2
00011180 3F28 0008                  		move.w	obX(a0),-(sp)
00011184 7000                       		moveq	#0,d0
00011186 1028 0028                  		move.b	obSubtype(a0),d0 ; get object subtype
0001118A 0240 000F                  		andi.w	#$F,d0		; read only the	2nd digit
0001118E D040                       		add.w	d0,d0
00011190 323B 0000                  		move.w	@index(pc,d0.w),d1
00011194 4EBB 1000                  		jsr	@index(pc,d1.w)	; move block subroutines
00011198 381F                       		move.w	(sp)+,d4
0001119A 4A28 0001                  		tst.b	obRender(a0)
0001119E 6A00                       		bpl.s	@chkdel
000111A0 7200                       		moveq	#0,d1
000111A2 1228 0019                  		move.b	obActWid(a0),d1
000111A6 0641 000B                  		addi.w	#$B,d1
000111AA 7400                       		moveq	#0,d2
000111AC 1428 0016                  		move.b	obHeight(a0),d2
000111B0 3602                       		move.w	d2,d3
000111B2 5243                       		addq.w	#1,d3
000111B4 6100 F5E2                  		bsr.w	SolidObject
000111B8                            
000111B8                            	@chkdel:
000111D6 6000 D250                  		bra.w	DisplaySprite
000111DA                            ; ===========================================================================
000111DA 0000 0000                  @index:		dc.w @type00-@index, @type01-@index
000111DE 0000 0000                  		dc.w @type02-@index, @type03-@index
000111E2 0000 0000                  		dc.w @type04-@index, @type05-@index
000111E6 0000 0000                  		dc.w @type06-@index, @type07-@index
000111EA 0000 0000                  		dc.w @type08-@index, @type09-@index
000111EE 0000 0000                  		dc.w @type0A-@index, @type0B-@index
000111F2 0000 0000                  		dc.w @type0C-@index, @type0D-@index
000111F6                            ; ===========================================================================
000111F6                            
000111F6                            @type00:
000111F6                            ; doesn't move
000111F6 4E75                       		rts	
000111F8                            ; ===========================================================================
000111F8                            
000111F8                            @type01:
000111F8                            ; moves side-to-side
000111F8 323C 0040                  		move.w	#$40,d1		; set move distance
000111FC 7000                       		moveq	#0,d0
000111FE 1038 FE68                  		move.b	(v_oscillate+$A).w,d0
00011202 6000                       		bra.s	@moveLR
00011204                            ; ===========================================================================
00011204                            
00011204                            @type02:
00011204                            ; moves side-to-side
00011204 323C 0080                  		move.w	#$80,d1		; set move distance
00011208 7000                       		moveq	#0,d0
0001120A 1038 FE7C                  		move.b	(v_oscillate+$1E).w,d0
0001120E                            
0001120E                            	@moveLR:
0001120E 0828 0000 0022             		btst	#0,obStatus(a0)
00011214 6700                       		beq.s	@noflip
00011216 4440                       		neg.w	d0
00011218 D041                       		add.w	d1,d0
0001121A                            
0001121A                            	@noflip:
0001121A 3228 0034                  		move.w	fb_origX(a0),d1
0001121E 9240                       		sub.w	d0,d1
00011220 3141 0008                  		move.w	d1,obX(a0)	; move object horizontally
00011224 4E75                       		rts	
00011226                            ; ===========================================================================
00011226                            
00011226                            @type03:
00011226                            ; moves up/down
00011226 323C 0040                  		move.w	#$40,d1		; set move distance
0001122A 7000                       		moveq	#0,d0
0001122C 1038 FE68                  		move.b	(v_oscillate+$A).w,d0
00011230 6000                       		bra.s	@moveUD
00011232                            ; ===========================================================================
00011232                            
00011232                            @type04:
00011232                            ; moves up/down
00011232 323C 0080                  		move.w	#$80,d1		; set move distance
00011236 7000                       		moveq	#0,d0
00011238 1038 FE7C                  		move.b	(v_oscillate+$1E).w,d0
0001123C                            
0001123C                            	@moveUD:
0001123C 0828 0000 0022             		btst	#0,obStatus(a0)
00011242 6700                       		beq.s	@noflip04
00011244 4440                       		neg.w	d0
00011246 D041                       		add.w	d1,d0
00011248                            
00011248                            	@noflip04:
00011248 3228 0030                  		move.w	fb_origY(a0),d1
0001124C 9240                       		sub.w	d0,d1
0001124E 3141 000C                  		move.w	d1,obY(a0)	; move object vertically
00011252 4E75                       		rts	
00011254                            ; ===========================================================================
00011254                            
00011254                            @type05:
00011254                            ; moves up when a switch is pressed
00011254 4A28 0038                  		tst.b	$38(a0)
00011258 6600                       		bne.s	@loc_104A4
0001125A 0C78 0100 FE10             		cmpi.w	#(id_LZ<<8)+0,(v_zone).w ; is level LZ1 ?
00011260 6600                       		bne.s	@aaa		; if not, branch
00011262 0C28 0003 003C             		cmpi.b	#3,fb_type(a0)
00011268 6600                       		bne.s	@aaa
0001126A 4238 F7C9                  		clr.b	(f_wtunnelallow).w
0001126E 3038 D008                  		move.w	(v_player+obX).w,d0
00011272 B068 0008                  		cmp.w	obX(a0),d0
00011276 6400                       		bcc.s	@aaa
00011278 11FC 0001 F7C9             		move.b	#1,(f_wtunnelallow).w
0001127E                            
0001127E                            	@aaa:
0001127E 45F8 F7E0                  		lea	(f_switch).w,a2
00011282 7000                       		moveq	#0,d0
00011284 1028 003C                  		move.b	fb_type(a0),d0
00011288 0832 0000 0000             		btst	#0,(a2,d0.w)
0001128E 6700                       		beq.s	@loc_104AE
00011290 0C78 0100 FE10             		cmpi.w	#(id_LZ<<8)+0,(v_zone).w ; is level LZ1 ?
00011296 6600                       		bne.s	@loc_1049E	; if not, branch
00011298 0C00 0003                  		cmpi.b	#3,d0
0001129C 6600                       		bne.s	@loc_1049E
0001129E 4238 F7C9                  		clr.b	(f_wtunnelallow).w
000112A2                            
000112A2                            @loc_1049E:
000112A2 117C 0001 0038             		move.b	#1,$38(a0)
000112A8                            
000112A8                            @loc_104A4:
000112A8 4A68 003A                  		tst.w	fb_height(a0)
000112AC 6700                       		beq.s	@loc_104C8
000112AE 5568 003A                  		subq.w	#2,fb_height(a0)
000112B2                            
000112B2                            @loc_104AE:
000112B2 3028 003A                  		move.w	fb_height(a0),d0
000112B6 0828 0000 0022             		btst	#0,$22(a0)
000112BC 6700                       		beq.s	@loc_104BC
000112BE 4440                       		neg.w	d0
000112C0                            
000112C0                            @loc_104BC:
000112C0 3228 0030                  		move.w	fb_origY(a0),d1
000112C4 D240                       		add.w	d0,d1
000112C6 3141 000C                  		move.w	d1,obY(a0)
000112CA 4E75                       		rts	
000112CC                            ; ===========================================================================
000112CC                            
000112CC                            @loc_104C8:
000112CC 5228 0028                  		addq.b	#1,$28(a0)
000112D0 4228 0038                  		clr.b	$38(a0)
000112D4 45F8 FC00                  		lea	(v_objstate).w,a2
000112D8 7000                       		moveq	#0,d0
000112DA 1028 0023                  		move.b	obRespawnNo(a0),d0
000112DE 67D2                       		beq.s	@loc_104AE
000112E0 08F2 0000 0002             		bset	#0,2(a2,d0.w)
000112E6 60CA                       		bra.s	@loc_104AE
000112E8                            ; ===========================================================================
000112E8                            
000112E8                            @type06:
000112E8 4A28 0038                  		tst.b	$38(a0)
000112EC 6600                       		bne.s	@loc_10500
000112EE 45F8 F7E0                  		lea	(f_switch).w,a2
000112F2 7000                       		moveq	#0,d0
000112F4 1028 003C                  		move.b	fb_type(a0),d0
000112F8 4A32 0000                  		tst.b	(a2,d0.w)
000112FC 6A00                       		bpl.s	@loc_10512
000112FE 117C 0001 0038             		move.b	#1,$38(a0)
00011304                            
00011304                            @loc_10500:
00011304 7000                       		moveq	#0,d0
00011306 1028 0016                  		move.b	obHeight(a0),d0
0001130A D040                       		add.w	d0,d0
0001130C B068 003A                  		cmp.w	fb_height(a0),d0
00011310 6700                       		beq.s	@loc_1052C
00011312 5468 003A                  		addq.w	#2,fb_height(a0)
00011316                            
00011316                            @loc_10512:
00011316 3028 003A                  		move.w	fb_height(a0),d0
0001131A 0828 0000 0022             		btst	#0,obStatus(a0)
00011320 6700                       		beq.s	@loc_10520
00011322 4440                       		neg.w	d0
00011324                            
00011324                            @loc_10520:
00011324 3228 0030                  		move.w	fb_origY(a0),d1
00011328 D240                       		add.w	d0,d1
0001132A 3141 000C                  		move.w	d1,obY(a0)
0001132E 4E75                       		rts	
00011330                            ; ===========================================================================
00011330                            
00011330                            @loc_1052C:
00011330 5328 0028                  		subq.b	#1,obSubtype(a0)
00011334 4228 0038                  		clr.b	$38(a0)
00011338 45F8 FC00                  		lea	(v_objstate).w,a2
0001133C 7000                       		moveq	#0,d0
0001133E 1028 0023                  		move.b	obRespawnNo(a0),d0
00011342 67D2                       		beq.s	@loc_10512
00011344 08B2 0000 0002             		bclr	#0,2(a2,d0.w)
0001134A 60CA                       		bra.s	@loc_10512
0001134C                            ; ===========================================================================
0001134C                            
0001134C                            @type07:
0001134C 4A28 0038                  		tst.b	$38(a0)
00011350 6600                       		bne.s	@loc_1055E
00011352 4A38 F7EF                  		tst.b	(f_switch+$F).w	; has switch number $F been pressed?
00011356 6700                       		beq.s	@locret_10578
00011358 117C 0001 0038             		move.b	#1,$38(a0)
0001135E 4268 003A                  		clr.w	fb_height(a0)
00011362                            
00011362                            @loc_1055E:
00011362 5268 0008                  		addq.w	#1,obX(a0)
00011366 3168 0008 0034             		move.w	obX(a0),fb_origX(a0)
0001136C 5268 003A                  		addq.w	#1,fb_height(a0)
00011370 0C68 0380 003A             		cmpi.w	#$380,fb_height(a0)
00011376 6600                       		bne.s	@locret_10578
00011378 4228 0028                  		clr.b	obSubtype(a0)
0001137C                            
0001137C                            @locret_10578:
0001137C 4E75                       		rts	
0001137E                            ; ===========================================================================
0001137E                            
0001137E                            @type0C:
0001137E 4A28 0038                  		tst.b	$38(a0)
00011382 6600                       		bne.s	@loc_10598
00011384 45F8 F7E0                  		lea	(f_switch).w,a2
00011388 7000                       		moveq	#0,d0
0001138A 1028 003C                  		move.b	fb_type(a0),d0
0001138E 0832 0000 0000             		btst	#0,(a2,d0.w)
00011394 6700                       		beq.s	@loc_105A2
00011396 117C 0001 0038             		move.b	#1,$38(a0)
0001139C                            
0001139C                            @loc_10598:
0001139C 4A68 003A                  		tst.w	fb_height(a0)
000113A0 6700                       		beq.s	@loc_105C0
000113A2 5568 003A                  		subq.w	#2,fb_height(a0)
000113A6                            
000113A6                            @loc_105A2:
000113A6 3028 003A                  		move.w	fb_height(a0),d0
000113AA 0828 0000 0022             		btst	#0,obStatus(a0)
000113B0 6700                       		beq.s	@loc_105B4
000113B2 4440                       		neg.w	d0
000113B4 0640 0080                  		addi.w	#$80,d0
000113B8                            
000113B8                            @loc_105B4:
000113B8 3228 0034                  		move.w	fb_origX(a0),d1
000113BC D240                       		add.w	d0,d1
000113BE 3141 0008                  		move.w	d1,obX(a0)
000113C2 4E75                       		rts	
000113C4                            ; ===========================================================================
000113C4                            
000113C4                            @loc_105C0:
000113C4 5228 0028                  		addq.b	#1,obSubtype(a0)
000113C8 4228 0038                  		clr.b	$38(a0)
000113CC 45F8 FC00                  		lea	(v_objstate).w,a2
000113D0 7000                       		moveq	#0,d0
000113D2 1028 0023                  		move.b	obRespawnNo(a0),d0
000113D6 67CE                       		beq.s	@loc_105A2
000113D8 08F2 0000 0002             		bset	#0,2(a2,d0.w)
000113DE 60C6                       		bra.s	@loc_105A2
000113E0                            ; ===========================================================================
000113E0                            
000113E0                            @type0D:
000113E0 4A28 0038                  		tst.b	$38(a0)
000113E4 6600                       		bne.s	@loc_105F8
000113E6 45F8 F7E0                  		lea	(f_switch).w,a2
000113EA 7000                       		moveq	#0,d0
000113EC 1028 003C                  		move.b	fb_type(a0),d0
000113F0 4A32 0000                  		tst.b	(a2,d0.w)
000113F4 6A00                       		bpl.s	@wtf
000113F6 117C 0001 0038             		move.b	#1,$38(a0)
000113FC                            
000113FC                            @loc_105F8:
000113FC 303C 0080                  		move.w	#$80,d0
00011400 B068 003A                  		cmp.w	fb_height(a0),d0
00011404 6700                       		beq.s	@loc_10624
00011406 5468 003A                  		addq.w	#2,fb_height(a0)
0001140A                            
0001140A                            @wtf:
0001140A 3028 003A                  		move.w	fb_height(a0),d0
0001140E 0828 0000 0022             		btst	#0,obStatus(a0)
00011414 6700                       		beq.s	@loc_10618
00011416 4440                       		neg.w	d0
00011418 0640 0080                  		addi.w	#$80,d0
0001141C                            
0001141C                            @loc_10618:
0001141C 3228 0034                  		move.w	fb_origX(a0),d1
00011420 D240                       		add.w	d0,d1
00011422 3141 0008                  		move.w	d1,obX(a0)
00011426 4E75                       		rts	
00011428                            ; ===========================================================================
00011428                            
00011428                            @loc_10624:
00011428 5328 0028                  		subq.b	#1,obSubtype(a0)
0001142C 4228 0038                  		clr.b	$38(a0)
00011430 45F8 FC00                  		lea	(v_objstate).w,a2
00011434 7000                       		moveq	#0,d0
00011436 1028 0023                  		move.b	obRespawnNo(a0),d0
0001143A 67CE                       		beq.s	@wtf
0001143C 08B2 0000 0002             		bclr	#0,2(a2,d0.w)
00011442 60C6                       		bra.s	@wtf
00011444                            ; ===========================================================================
00011444                            
00011444                            @type08:
00011444 323C 0010                  		move.w	#$10,d1
00011448 7000                       		moveq	#0,d0
0001144A 1038 FE88                  		move.b	(v_oscillate+$2A).w,d0
0001144E E248                       		lsr.w	#1,d0
00011450 3638 FE8A                  		move.w	(v_oscillate+$2C).w,d3
00011454 6000                       		bra.s	@square
00011456                            ; ===========================================================================
00011456                            
00011456                            @type09:
00011456 323C 0030                  		move.w	#$30,d1
0001145A 7000                       		moveq	#0,d0
0001145C 1038 FE8C                  		move.b	(v_oscillate+$2E).w,d0
00011460 3638 FE8E                  		move.w	(v_oscillate+$30).w,d3
00011464 6000                       		bra.s	@square
00011466                            ; ===========================================================================
00011466                            
00011466                            @type0A:
00011466 323C 0050                  		move.w	#$50,d1
0001146A 7000                       		moveq	#0,d0
0001146C 1038 FE90                  		move.b	(v_oscillate+$32).w,d0
00011470 3638 FE92                  		move.w	(v_oscillate+$34).w,d3
00011474 6000                       		bra.s	@square
00011476                            ; ===========================================================================
00011476                            
00011476                            @type0B:
00011476 323C 0070                  		move.w	#$70,d1
0001147A 7000                       		moveq	#0,d0
0001147C 1038 FE94                  		move.b	(v_oscillate+$36).w,d0
00011480 3638 FE96                  		move.w	(v_oscillate+$38).w,d3
00011484                            
00011484                            @square:
00011484 4A43                       		tst.w	d3
00011486 6600                       		bne.s	@loc_1068E
00011488 5228 0022                  		addq.b	#1,obStatus(a0)
0001148C 0228 0003 0022             		andi.b	#3,obStatus(a0)
00011492                            
00011492                            @loc_1068E:
00011492 1428 0022                  		move.b	obStatus(a0),d2
00011496 0202 0003                  		andi.b	#3,d2
0001149A 6600                       		bne.s	@loc_106AE
0001149C 9041                       		sub.w	d1,d0
0001149E D068 0034                  		add.w	fb_origX(a0),d0
000114A2 3140 0008                  		move.w	d0,obX(a0)
000114A6 4441                       		neg.w	d1
000114A8 D268 0030                  		add.w	fb_origY(a0),d1
000114AC 3141 000C                  		move.w	d1,obY(a0)
000114B0 4E75                       		rts	
000114B2                            ; ===========================================================================
000114B2                            
000114B2                            @loc_106AE:
000114B2 5302                       		subq.b	#1,d2
000114B4 6600                       		bne.s	@loc_106CC
000114B6 5341                       		subq.w	#1,d1
000114B8 9041                       		sub.w	d1,d0
000114BA 4440                       		neg.w	d0
000114BC D068 0030                  		add.w	fb_origY(a0),d0
000114C0 3140 000C                  		move.w	d0,obY(a0)
000114C4 5241                       		addq.w	#1,d1
000114C6 D268 0034                  		add.w	fb_origX(a0),d1
000114CA 3141 0008                  		move.w	d1,obX(a0)
000114CE 4E75                       		rts	
000114D0                            ; ===========================================================================
000114D0                            
000114D0                            @loc_106CC:
000114D0 5302                       		subq.b	#1,d2
000114D2 6600                       		bne.s	@loc_106EA
000114D4 5341                       		subq.w	#1,d1
000114D6 9041                       		sub.w	d1,d0
000114D8 4440                       		neg.w	d0
000114DA D068 0034                  		add.w	fb_origX(a0),d0
000114DE 3140 0008                  		move.w	d0,obX(a0)
000114E2 5241                       		addq.w	#1,d1
000114E4 D268 0030                  		add.w	fb_origY(a0),d1
000114E8 3141 000C                  		move.w	d1,obY(a0)
000114EC 4E75                       		rts	
000114EE                            ; ===========================================================================
000114EE                            
000114EE                            @loc_106EA:
000114EE 9041                       		sub.w	d1,d0
000114F0 D068 0030                  		add.w	fb_origY(a0),d0
000114F4 3140 000C                  		move.w	d0,obY(a0)
000114F8 4441                       		neg.w	d1
000114FA D268 0034                  		add.w	fb_origX(a0),d1
000114FE 3141 0008                  		move.w	d1,obX(a0)
00011502 4E75                       		rts	
00011502 4E75                       		rts	
00011504                            Map_FBlock:	include	"_maps\Floating Blocks and Doors.asm"
00011504                            ; ---------------------------------------------------------------------------
00011504                            ; Sprite mappings - moving blocks (SYZ/SLZ/LZ)
00011504                            ; ---------------------------------------------------------------------------
00011504                            Map_FBlock_internal:
00011504 0000                       		dc.w @syz1x1-Map_FBlock_internal
00011506 0000                       		dc.w @syz2x2-Map_FBlock_internal
00011508 0000                       		dc.w @syz1x2-Map_FBlock_internal
0001150A 0000                       		dc.w @syzrect2x2-Map_FBlock_internal
0001150C 0000                       		dc.w @syzrect1x3-Map_FBlock_internal
0001150E 0000                       		dc.w @slz-Map_FBlock_internal
00011510 0000                       		dc.w @lzvert-Map_FBlock_internal
00011512 0000                       		dc.w @lzhoriz-Map_FBlock_internal
00011514 01                         @syz1x1:	dc.b 1
00011515 F00F 0061 F0               		dc.b $F0, $F, 0, $61, $F0 ; SYZ - 1x1 square block
0001151A 04                         @syz2x2:	dc.b 4
0001151B E00F 0061 E0               		dc.b $E0, $F, 0, $61, $E0 ; SYZ - 2x2 square blocks
00011520 E00F 0061 00               		dc.b $E0, $F, 0, $61, 0
00011525 000F 0061 E0               		dc.b 0,	$F, 0, $61, $E0
0001152A 000F 0061 00               		dc.b 0,	$F, 0, $61, 0
0001152F 02                         @syz1x2:	dc.b 2
00011530 E00F 0061 F0               		dc.b $E0, $F, 0, $61, $F0 ; SYZ - 1x2 square blocks
00011535 000F 0061 F0               		dc.b 0,	$F, 0, $61, $F0
0001153A 04                         @syzrect2x2:	dc.b 4
0001153B E60F 0081 E0               		dc.b $E6, $F, 0, $81, $E0 ; SYZ - 2x2 rectangular blocks
00011540 E60F 0081 00               		dc.b $E6, $F, 0, $81, 0
00011545 000F 0081 E0               		dc.b 0,	$F, 0, $81, $E0
0001154A 000F 0081 00               		dc.b 0,	$F, 0, $81, 0
0001154F 03                         @syzrect1x3:	dc.b 3
00011550 D90F 0081 F0               		dc.b $D9, $F, 0, $81, $F0 ; SYZ - 1x3 rectangular blocks
00011555 F30F 0081 F0               		dc.b $F3, $F, 0, $81, $F0
0001155A 0D0F 0081 F0               		dc.b $D, $F, 0,	$81, $F0
0001155F 01                         @slz:		dc.b 1
00011560 F00F 0021 F0               		dc.b $F0, $F, 0, $21, $F0 ; SLZ - 1x1 square block
00011565 02                         @lzvert:	dc.b 2
00011566 E007 0000 F8               		dc.b $E0, 7, 0,	0, $F8	; LZ - small vertical door
0001156B 0007 1000 F8               		dc.b 0,	7, $10,	0, $F8
00011570 04                         @lzhoriz:	dc.b 4
00011571 F00F 0022 C0               		dc.b $F0, $F, 0, $22, $C0 ; LZ - large horizontal door
00011576 F00F 0022 E0               		dc.b $F0, $F, 0, $22, $E0
0001157B F00F 0022 00               		dc.b $F0, $F, 0, $22, 0
00011580 F00F 0022 20               		dc.b $F0, $F, 0, $22, $20
00011586 00                         		even
00011586 00                         		even
00011586                            
00011586                            		include	"_incObj\57 Spiked Ball and Chain.asm"
00011586                            ; ---------------------------------------------------------------------------
00011586                            ; Object 57 - spiked balls (SYZ, LZ)
00011586                            ; ---------------------------------------------------------------------------
00011586                            
00011586                            SpikeBall:
00011586 7000                       		moveq	#0,d0
00011588 1028 0024                  		move.b	obRoutine(a0),d0
0001158C 323B 0000                  		move.w	SBall_Index(pc,d0.w),d1
00011590 4EFB 1000                  		jmp	SBall_Index(pc,d1.w)
00011594                            ; ===========================================================================
00011594 0000                       SBall_Index:	dc.w SBall_Main-SBall_Index
00011596 0000                       		dc.w SBall_Move-SBall_Index
00011598 0000                       		dc.w SBall_Display-SBall_Index
0001159A                            
0001159A =00000029                  sball_childs:	equ $29		; number of child objects (1 byte)
0001159A                            		; $30-$37	; object RAM numbers of childs (1 byte each)
0001159A =0000003A                  sball_origX:	equ $3A		; centre x-axis position (2 bytes)
0001159A =00000038                  sball_origY:	equ $38		; centre y-axis position (2 bytes)
0001159A =0000003C                  sball_radius:	equ $3C		; radius (1 byte)
0001159A =0000003E                  sball_speed:	equ $3E		; rate of spin (2 bytes)
0001159A                            ; ===========================================================================
0001159A                            
0001159A                            SBall_Main:	; Routine 0
0001159A 5428 0024                  		addq.b	#2,obRoutine(a0)
0001159E 217C 0000 0000 0004        		move.l	#Map_SBall,obMap(a0)
000115A6 317C 03BA 0002             		move.w	#$3BA,obGfx(a0)
000115AC 117C 0004 0001             		move.b	#4,obRender(a0)
000115B2 117C 0004 0018             		move.b	#4,obPriority(a0)
000115B8 117C 0008 0019             		move.b	#8,obActWid(a0)
000115BE 3168 0008 003A             		move.w	obX(a0),sball_origX(a0)
000115C4 3168 000C 0038             		move.w	obY(a0),sball_origY(a0)
000115CA 117C 0098 0020             		move.b	#$98,obColType(a0) ; SYZ specific code (chain hurts Sonic)
000115D0 0C38 0001 FE10             		cmpi.b	#id_LZ,(v_zone).w ; check if level is LZ
000115D6 6600                       		bne.s	@notlz
000115D8                            
000115D8 117C 0000 0020             		move.b	#0,obColType(a0) ; LZ specific code (chain doesn't hurt)
000115DE 317C 0310 0002             		move.w	#$310,obGfx(a0)
000115E4 217C 0000 0000 0004        		move.l	#Map_SBall2,obMap(a0)
000115EC                            
000115EC                            	@notlz:
000115EC 1228 0028                  		move.b	obSubtype(a0),d1 ; get object type
000115F0 0201 00F0                  		andi.b	#$F0,d1		; read only the	1st digit
000115F4 4881                       		ext.w	d1
000115F6 E741                       		asl.w	#3,d1		; multiply by 8
000115F8 3141 003E                  		move.w	d1,sball_speed(a0) ; set object twirl speed
000115FC 1028 0022                  		move.b	obStatus(a0),d0
00011600 E418                       		ror.b	#2,d0
00011602 0200 00C0                  		andi.b	#$C0,d0
00011606 1140 0026                  		move.b	d0,obAngle(a0)
0001160A 45E8 0029                  		lea	sball_childs(a0),a2
0001160E 1228 0028                  		move.b	obSubtype(a0),d1 ; get object type
00011612 0241 0007                  		andi.w	#7,d1		; read only the	2nd digit
00011616 14FC 0000                  		move.b	#0,(a2)+
0001161A 3601                       		move.w	d1,d3
0001161C E94B                       		lsl.w	#4,d3
0001161E 1143 003C                  		move.b	d3,sball_radius(a0)
00011622 5341                       		subq.w	#1,d1		; set chain length (type-1)
00011624 6500                       		bcs.s	@fail
00011626 0828 0003 0028             		btst	#3,obSubtype(a0)
0001162C 6700                       		beq.s	@makechain
0001162E 5341                       		subq.w	#1,d1
00011630 6500                       		bcs.s	@fail
00011632                            
00011632                            @makechain:
00011632 6100 D27C                  		bsr.w	FindFreeObj
00011636 6600                       		bne.s	@fail
00011638 5228 0029                  		addq.b	#1,sball_childs(a0) ; increment child object counter
0001163C 3A09                       		move.w	a1,d5		; get child object RAM address
0001163E 0445 D000                  		subi.w	#$D000,d5	; subtract $D000
00011642 EC4D                       		lsr.w	#6,d5		; divide by $40
00011644 0245 007F                  		andi.w	#$7F,d5
00011648 14C5                       		move.b	d5,(a2)+	; copy child RAM number
0001164A 137C 0004 0024             		move.b	#4,obRoutine(a1)
00011650 1368 0000 0000             		move.b	0(a0),0(a1)
00011656 2368 0004 0004             		move.l	obMap(a0),obMap(a1)
0001165C 3368 0002 0002             		move.w	obGfx(a0),obGfx(a1)
00011662 1368 0001 0001             		move.b	obRender(a0),obRender(a1)
00011668 1368 0018 0018             		move.b	obPriority(a0),obPriority(a1)
0001166E 1368 0019 0019             		move.b	obActWid(a0),obActWid(a1)
00011674 1368 0020 0020             		move.b	obColType(a0),obColType(a1)
0001167A 0403 0010                  		subi.b	#$10,d3
0001167E 1343 003C                  		move.b	d3,sball_radius(a1)
00011682 0C38 0001 FE10             		cmpi.b	#id_LZ,(v_zone).w ; check if level is LZ
00011688 6600                       		bne.s	@notlzagain
0001168A                            
0001168A 4A03                       		tst.b	d3
0001168C 6600                       		bne.s	@notlzagain
0001168E 137C 0002 001A             		move.b	#2,obFrame(a1)	; use different frame for LZ chain
00011694                            
00011694                            	@notlzagain:
00011694 51C9 FF9C                  		dbf	d1,@makechain ; repeat for length of chain
00011698                            
00011698                            	@fail:
00011698 3A08                       		move.w	a0,d5
0001169A 0445 D000                  		subi.w	#$D000,d5
0001169E EC4D                       		lsr.w	#6,d5
000116A0 0245 007F                  		andi.w	#$7F,d5
000116A4 14C5                       		move.b	d5,(a2)+
000116A6 0C38 0001 FE10             		cmpi.b	#id_LZ,(v_zone).w ; check if level is LZ
000116AC 6600                       		bne.s	SBall_Move
000116AE                            
000116AE 117C 008B 0020             		move.b	#$8B,obColType(a0) ; if yes, make last spikeball larger
000116B4 117C 0001 001A             		move.b	#1,obFrame(a0)	; use different	frame
000116BA                            
000116BA                            SBall_Move:	; Routine 2
000116BA 6100 0000                  		bsr.w	@movesub
000116BE 6000 0000                  		bra.w	@chkdel
000116C2                            ; ===========================================================================
000116C2                            
000116C2                            @movesub:
000116C2 3028 003E                  		move.w	sball_speed(a0),d0
000116C6 D168 0026                  		add.w	d0,obAngle(a0)
000116CA 1028 0026                  		move.b	obAngle(a0),d0
000116CE 4EB9 0000 27EC             		jsr	(CalcSine).l
000116D4 3428 0038                  		move.w	sball_origY(a0),d2
000116D8 3628 003A                  		move.w	sball_origX(a0),d3
000116DC 45E8 0029                  		lea	sball_childs(a0),a2
000116E0 7C00                       		moveq	#0,d6
000116E2 1C1A                       		move.b	(a2)+,d6
000116E4                            
000116E4                            	@loop:
000116E4 7800                       		moveq	#0,d4
000116E6 181A                       		move.b	(a2)+,d4
000116E8 ED4C                       		lsl.w	#6,d4
000116EA 0684 00FF D000             		addi.l	#v_objspace&$FFFFFF,d4
000116F0 2244                       		movea.l	d4,a1
000116F2 7800                       		moveq	#0,d4
000116F4 1829 003C                  		move.b	sball_radius(a1),d4
000116F8 2A04                       		move.l	d4,d5
000116FA C9C0                       		muls.w	d0,d4
000116FC E084                       		asr.l	#8,d4
000116FE CBC1                       		muls.w	d1,d5
00011700 E085                       		asr.l	#8,d5
00011702 D842                       		add.w	d2,d4
00011704 DA43                       		add.w	d3,d5
00011706 3344 000C                  		move.w	d4,obY(a1)
0001170A 3345 0008                  		move.w	d5,obX(a1)
0001170E 51CE FFD4                  		dbf	d6,@loop
00011712 4E75                       		rts	
00011714                            ; ===========================================================================
00011714                            
00011714                            @chkdel:
00011732 6000 CCF4                  		bra.w	DisplaySprite
00011736                            ; ===========================================================================
00011736                            
00011736                            @delete:
00011736 7400                       		moveq	#0,d2
00011738 45E8 0029                  		lea	sball_childs(a0),a2
0001173C 141A                       		move.b	(a2)+,d2
0001173E                            
0001173E                            	@deleteloop:
0001173E 7000                       		moveq	#0,d0
00011740 101A                       		move.b	(a2)+,d0
00011742 ED48                       		lsl.w	#6,d0
00011744 0680 00FF D000             		addi.l	#v_objspace&$FFFFFF,d0
0001174A 2240                       		movea.l	d0,a1
0001174C 6100 CD18                  		bsr.w	DeleteChild
00011750 51CA FFEC                  		dbf	d2,@deleteloop ; delete all pieces of	chain
00011754                            
00011754 4E75                       		rts	
00011756                            ; ===========================================================================
00011756                            
00011756                            SBall_Display:	; Routine 4
00011756 6000 CCD0                  		bra.w	DisplaySprite
00011756 6000 CCD0                  		bra.w	DisplaySprite
0001175A                            Map_SBall:	include	"_maps\Spiked Ball and Chain (SYZ).asm"
0001175A                            ; ---------------------------------------------------------------------------
0001175A                            ; Sprite mappings - chain of spiked balls (SYZ)
0001175A                            ; ---------------------------------------------------------------------------
0001175A                            Map_SBall_internal:
0001175A 0000                       		dc.w @0-Map_SBall_internal
0001175C 01                         @0:		dc.b 1
0001175D F805 0000 F8               		dc.b $F8, 5, 0,	0, $F8
00011762                            		even
00011762                            		even
00011762                            Map_SBall2:	include	"_maps\Spiked Ball and Chain (LZ).asm"
00011762                            ; ---------------------------------------------------------------------------
00011762                            ; Sprite mappings - spiked ball	on a chain (LZ)
00011762                            ; ---------------------------------------------------------------------------
00011762                            Map_SBall2_internal:
00011762 0000                       		dc.w @chain-Map_SBall2_internal
00011764 0000                       		dc.w @spikeball-Map_SBall2_internal
00011766 0000                       		dc.w @base-Map_SBall2_internal
00011768 01                         @chain:		dc.b 1
00011769 F805 0000 F8               		dc.b $F8, 5, 0,	0, $F8	; chain link
0001176E 01                         @spikeball:	dc.b 1
0001176F F00F 0004 F0               		dc.b $F0, $F, 0, 4, $F0	; spikeball
00011774 01                         @base:		dc.b 1
00011775 F805 0014 F8               		dc.b $F8, 5, 0,	$14, $F8 ; wall attachment
0001177A                            		even
0001177A                            		even
0001177A                            		include	"_incObj\58 Big Spiked Ball.asm"
0001177A                            ; ---------------------------------------------------------------------------
0001177A                            ; Object 58 - giant spiked balls (SYZ)
0001177A                            ; ---------------------------------------------------------------------------
0001177A                            
0001177A                            BigSpikeBall:
0001177A 7000                       		moveq	#0,d0
0001177C 1028 0024                  		move.b	obRoutine(a0),d0
00011780 323B 0000                  		move.w	BBall_Index(pc,d0.w),d1
00011784 4EFB 1000                  		jmp	BBall_Index(pc,d1.w)
00011788                            ; ===========================================================================
00011788 0000                       BBall_Index:	dc.w BBall_Main-BBall_Index
0001178A 0000                       		dc.w BBall_Move-BBall_Index
0001178C                            
0001178C =0000003A                  bball_origX:	equ $3A		; original x-axis position
0001178C =00000038                  bball_origY:	equ $38		; original y-axis position
0001178C =0000003C                  bball_radius:	equ $3C		; radius of circle
0001178C =0000003E                  bball_speed:	equ $3E		; speed
0001178C                            ; ===========================================================================
0001178C                            
0001178C                            BBall_Main:	; Routine 0
0001178C 5428 0024                  		addq.b	#2,obRoutine(a0)
00011790 217C 0000 0000 0004        		move.l	#Map_BBall,obMap(a0)
00011798 317C 0396 0002             		move.w	#$396,obGfx(a0)
0001179E 117C 0004 0001             		move.b	#4,obRender(a0)
000117A4 117C 0004 0018             		move.b	#4,obPriority(a0)
000117AA 117C 0018 0019             		move.b	#$18,obActWid(a0)
000117B0 3168 0008 003A             		move.w	obX(a0),bball_origX(a0)
000117B6 3168 000C 0038             		move.w	obY(a0),bball_origY(a0)
000117BC 117C 0086 0020             		move.b	#$86,obColType(a0)
000117C2 1228 0028                  		move.b	obSubtype(a0),d1 ; get object type
000117C6 0201 00F0                  		andi.b	#$F0,d1		; read only the	1st digit
000117CA 4881                       		ext.w	d1
000117CC E741                       		asl.w	#3,d1		; multiply by 8
000117CE 3141 003E                  		move.w	d1,bball_speed(a0) ; set object speed
000117D2 1028 0022                  		move.b	obStatus(a0),d0
000117D6 E418                       		ror.b	#2,d0
000117D8 0200 00C0                  		andi.b	#$C0,d0
000117DC 1140 0026                  		move.b	d0,obAngle(a0)
000117E0 117C 0050 003C             		move.b	#$50,bball_radius(a0) ; set radius of circle motion
000117E6                            
000117E6                            BBall_Move:	; Routine 2
000117E6 7000                       		moveq	#0,d0
000117E8 1028 0028                  		move.b	obSubtype(a0),d0 ; get object type
000117EC 0240 0007                  		andi.w	#7,d0		; read only the	2nd digit
000117F0 D040                       		add.w	d0,d0
000117F2 323B 0000                  		move.w	@index(pc,d0.w),d1
000117F6 4EBB 1000                  		jsr	@index(pc,d1.w)
00011818 6000 CC0E                  		bra.w	DisplaySprite
0001181C                            ; ===========================================================================
0001181C 0000                       @index:		dc.w @type00-@index
0001181E 0000                       		dc.w @type01-@index
00011820 0000                       		dc.w @type02-@index
00011822 0000                       		dc.w @type03-@index
00011824                            ; ===========================================================================
00011824                            
00011824                            @type00:
00011824 4E75                       		rts	
00011826                            ; ===========================================================================
00011826                            
00011826                            @type01:
00011826 323C 0060                  		move.w	#$60,d1
0001182A 7000                       		moveq	#0,d0
0001182C 1038 FE6C                  		move.b	(v_oscillate+$E).w,d0
00011830 0828 0000 0022             		btst	#0,obStatus(a0)
00011836 6700                       		beq.s	@noflip1
00011838 4440                       		neg.w	d0
0001183A D041                       		add.w	d1,d0
0001183C                            
0001183C                            	@noflip1:
0001183C 3228 003A                  		move.w	bball_origX(a0),d1
00011840 9240                       		sub.w	d0,d1
00011842 3141 0008                  		move.w	d1,obX(a0)	; move object horizontally
00011846 4E75                       		rts	
00011848                            ; ===========================================================================
00011848                            
00011848                            @type02:
00011848 323C 0060                  		move.w	#$60,d1
0001184C 7000                       		moveq	#0,d0
0001184E 1038 FE6C                  		move.b	(v_oscillate+$E).w,d0
00011852 0828 0000 0022             		btst	#0,obStatus(a0)
00011858 6700                       		beq.s	@noflip2
0001185A 4440                       		neg.w	d0
0001185C 0640 0080                  		addi.w	#$80,d0
00011860                            
00011860                            	@noflip2:
00011860 3228 0038                  		move.w	bball_origY(a0),d1
00011864 9240                       		sub.w	d0,d1
00011866 3141 000C                  		move.w	d1,obY(a0)	; move object vertically
0001186A 4E75                       		rts	
0001186C                            ; ===========================================================================
0001186C                            
0001186C                            @type03:
0001186C 3028 003E                  		move.w	bball_speed(a0),d0
00011870 D168 0026                  		add.w	d0,obAngle(a0)
00011874 1028 0026                  		move.b	obAngle(a0),d0
00011878 4EB9 0000 27EC             		jsr	(CalcSine).l
0001187E 3428 0038                  		move.w	bball_origY(a0),d2
00011882 3628 003A                  		move.w	bball_origX(a0),d3
00011886 7800                       		moveq	#0,d4
00011888 1828 003C                  		move.b	bball_radius(a0),d4
0001188C 2A04                       		move.l	d4,d5
0001188E C9C0                       		muls.w	d0,d4
00011890 E084                       		asr.l	#8,d4
00011892 CBC1                       		muls.w	d1,d5
00011894 E085                       		asr.l	#8,d5
00011896 D842                       		add.w	d2,d4
00011898 DA43                       		add.w	d3,d5
0001189A 3144 000C                  		move.w	d4,obY(a0)	; move object circularly
0001189E 3145 0008                  		move.w	d5,obX(a0)
000118A2 4E75                       		rts	
000118A2 4E75                       		rts	
000118A4                            Map_BBall:	include	"_maps\Big Spiked Ball.asm"
000118A4                            ; ---------------------------------------------------------------------------
000118A4                            ; Sprite mappings - spiked ball on a chain (SBZ) and big spiked ball (SYZ)
000118A4                            ; ---------------------------------------------------------------------------
000118A4                            Map_BBall_internal:
000118A4 0000                       		dc.w @ball-Map_BBall_internal
000118A6 0000                       		dc.w @chain-Map_BBall_internal
000118A8 0000                       		dc.w @anchor-Map_BBall_internal
000118AA 05                         @ball:		dc.b 5
000118AB E804 0000 F8               		dc.b $E8, 4, 0,	0, $F8	; big spiked ball
000118B0 F00F 0002 F0               		dc.b $F0, $F, 0, 2, $F0
000118B5 F801 0012 E8               		dc.b $F8, 1, 0,	$12, $E8
000118BA F801 0014 10               		dc.b $F8, 1, 0,	$14, $10
000118BF 1004 0016 F8               		dc.b $10, 4, 0,	$16, $F8
000118C4 01                         @chain:		dc.b 1
000118C5 F805 0020 F8               		dc.b $F8, 5, 0,	$20, $F8 ; chain link (SBZ)
000118CA 02                         @anchor:	dc.b 2
000118CB F80D 0018 F0               		dc.b $F8, $D, 0, $18, $F0 ; anchor at base of chain (SBZ)
000118D0 E80D 1018 F0               		dc.b $E8, $D, $10, $18,	$F0
000118D6 00                         		even
000118D6 00                         		even
000118D6                            		include	"_incObj\59 SLZ Elevators.asm"
000118D6                            ; ---------------------------------------------------------------------------
000118D6                            ; Object 59 - platforms	that move when you stand on them (SLZ)
000118D6                            ; ---------------------------------------------------------------------------
000118D6                            
000118D6                            Elevator:
000118D6 7000                       		moveq	#0,d0
000118D8 1028 0024                  		move.b	obRoutine(a0),d0
000118DC 323B 0000                  		move.w	Elev_Index(pc,d0.w),d1
000118E0 4EBB 1000                  		jsr	Elev_Index(pc,d1.w)
00011902 6000 CB24                  		bra.w	DisplaySprite
00011906                            ; ===========================================================================
00011906 0000                       Elev_Index:	dc.w Elev_Main-Elev_Index
00011908 0000                       		dc.w Elev_Platform-Elev_Index
0001190A 0000                       		dc.w Elev_Action-Elev_Index
0001190C 0000                       		dc.w Elev_MakeMulti-Elev_Index
0001190E                            
0001190E =00000032                  elev_origX:	equ $32		; original x-axis position
0001190E =00000030                  elev_origY:	equ $30		; original y-axis position
0001190E =0000003C                  elev_dist:	equ $3C		; distance to move (2 bytes)
0001190E                            
0001190E 2800                       Elev_Var1:	dc.b $28, 0		; width, frame number
00011910                            
00011910 1001                       Elev_Var2:	dc.b $10, 1		; distance to move, action type
00011912 2001                       		dc.b $20, 1
00011914 3401                       		dc.b $34, 1
00011916 1003                       		dc.b $10, 3
00011918 2003                       		dc.b $20, 3
0001191A 3403                       		dc.b $34, 3
0001191C 1401                       		dc.b $14, 1
0001191E 2401                       		dc.b $24, 1
00011920 2C01                       		dc.b $2C, 1
00011922 1403                       		dc.b $14, 3
00011924 2403                       		dc.b $24, 3
00011926 2C03                       		dc.b $2C, 3
00011928 2005                       		dc.b $20, 5
0001192A 2007                       		dc.b $20, 7
0001192C 3009                       		dc.b $30, 9
0001192E                            ; ===========================================================================
0001192E                            
0001192E                            Elev_Main:	; Routine 0
0001192E 5428 0024                  		addq.b	#2,obRoutine(a0)
00011932 7000                       		moveq	#0,d0
00011934 1028 0028                  		move.b	obSubtype(a0),d0
00011938 6A00                       		bpl.s	@normal		; branch for types 00-7F
0001193A 5828 0024                  		addq.b	#4,obRoutine(a0) ; goto Elev_MakeMulti next
0001193E 0240 007F                  		andi.w	#$7F,d0
00011942 C0FC 0006                  		mulu.w	#6,d0
00011946 3140 003C                  		move.w	d0,elev_dist(a0)
0001194A 3140 003E                  		move.w	d0,$3E(a0)
0001194E 588F                       		addq.l	#4,sp
00011950 4E75                       		rts	
00011952                            ; ===========================================================================
00011952                            
00011952                            	@normal:
00011952 E648                       		lsr.w	#3,d0
00011954 0240 001E                  		andi.w	#$1E,d0
00011958 45FB 00B4                  		lea	Elev_Var1(pc,d0.w),a2
0001195C 115A 0019                  		move.b	(a2)+,obActWid(a0) ; set width
00011960 115A 001A                  		move.b	(a2)+,obFrame(a0) ; set frame
00011964 7000                       		moveq	#0,d0
00011966 1028 0028                  		move.b	obSubtype(a0),d0
0001196A D040                       		add.w	d0,d0
0001196C 0240 001E                  		andi.w	#$1E,d0
00011970 45FB 009E                  		lea	Elev_Var2(pc,d0.w),a2
00011974 101A                       		move.b	(a2)+,d0
00011976 E548                       		lsl.w	#2,d0
00011978 3140 003C                  		move.w	d0,elev_dist(a0)	; set distance to move
0001197C 115A 0028                  		move.b	(a2)+,obSubtype(a0)	; set type
00011980 217C 0000 0000 0004        		move.l	#Map_Elev,obMap(a0)
00011988 317C 4000 0002             		move.w	#$4000,obGfx(a0)
0001198E 117C 0004 0001             		move.b	#4,obRender(a0)
00011994 117C 0004 0018             		move.b	#4,obPriority(a0)
0001199A 3168 0008 0032             		move.w	obX(a0),elev_origX(a0)
000119A0 3168 000C 0030             		move.w	obY(a0),elev_origY(a0)
000119A6                            
000119A6                            Elev_Platform:	; Routine 2
000119A6 7200                       		moveq	#0,d1
000119A8 1228 0019                  		move.b	obActWid(a0),d1
000119AC 4EB9 0000 7A86             		jsr	(PlatformObject).l
000119B2 6000 0000                  		bra.w	Elev_Types
000119B6                            ; ===========================================================================
000119B6                            
000119B6                            Elev_Action:	; Routine 4
000119B6 7200                       		moveq	#0,d1
000119B8 1228 0019                  		move.b	obActWid(a0),d1
000119BC 4EB9 0000 7BFA             		jsr	(ExitPlatform).l
000119C2 3F28 0008                  		move.w	obX(a0),-(sp)
000119C6 6100 0000                  		bsr.w	Elev_Types
000119CA 341F                       		move.w	(sp)+,d2
000119CC 4A28 0000                  		tst.b	0(a0)
000119D0 6700                       		beq.s	@deleted
000119D2 4EF9 0000 8168             		jmp	(MvSonicOnPtfm2).l
000119D8                            
000119D8                            	@deleted:
000119D8 4E75                       		rts	
000119DA                            ; ===========================================================================
000119DA                            
000119DA                            Elev_Types:
000119DA 7000                       		moveq	#0,d0
000119DC 1028 0028                  		move.b	obSubtype(a0),d0
000119E0 0240 000F                  		andi.w	#$F,d0
000119E4 D040                       		add.w	d0,d0
000119E6 323B 0000                  		move.w	@index(pc,d0.w),d1
000119EA 4EFB 1000                  		jmp	@index(pc,d1.w)
000119EE                            ; ===========================================================================
000119EE 0000 0000                  @index:		dc.w @type00-@index, @type01-@index
000119F2 0000 0000                  		dc.w @type02-@index, @type01-@index
000119F6 0000 0000                  		dc.w @type04-@index, @type01-@index
000119FA 0000 0000                  		dc.w @type06-@index, @type01-@index
000119FE 0000 0000                  		dc.w @type08-@index, @type09-@index
00011A02                            ; ===========================================================================
00011A02                            
00011A02                            @type00:
00011A02 4E75                       		rts	
00011A04                            ; ===========================================================================
00011A04                            
00011A04                            @type01:
00011A04 0C28 0004 0024             		cmpi.b	#4,obRoutine(a0) ; check if Sonic is standing on the object
00011A0A 6600                       		bne.s	@notstanding
00011A0C 5228 0028                  		addq.b	#1,obSubtype(a0) ; if yes, add 1 to type
00011A10                            
00011A10                            	@notstanding:
00011A10 4E75                       		rts	
00011A12                            ; ===========================================================================
00011A12                            
00011A12                            @type02:
00011A12 6100 0000                  		bsr.w	Elev_Move
00011A16 3028 0034                  		move.w	$34(a0),d0
00011A1A 4440                       		neg.w	d0
00011A1C D068 0030                  		add.w	elev_origY(a0),d0
00011A20 3140 000C                  		move.w	d0,obY(a0)
00011A24 4E75                       		rts	
00011A26                            ; ===========================================================================
00011A26                            
00011A26                            @type04:
00011A26 6100 0000                  		bsr.w	Elev_Move
00011A2A 3028 0034                  		move.w	$34(a0),d0
00011A2E D068 0030                  		add.w	elev_origY(a0),d0
00011A32 3140 000C                  		move.w	d0,obY(a0)
00011A36 4E75                       		rts	
00011A38                            ; ===========================================================================
00011A38                            
00011A38                            @type06:
00011A38 6100 0000                  		bsr.w	Elev_Move
00011A3C 3028 0034                  		move.w	$34(a0),d0
00011A40 E240                       		asr.w	#1,d0
00011A42 4440                       		neg.w	d0
00011A44 D068 0030                  		add.w	elev_origY(a0),d0
00011A48 3140 000C                  		move.w	d0,obY(a0)
00011A4C 3028 0034                  		move.w	$34(a0),d0
00011A50 D068 0032                  		add.w	elev_origX(a0),d0
00011A54 3140 0008                  		move.w	d0,obX(a0)
00011A58 4E75                       		rts	
00011A5A                            ; ===========================================================================
00011A5A                            
00011A5A                            @type08:
00011A5A 6100 0000                  		bsr.w	Elev_Move
00011A5E 3028 0034                  		move.w	$34(a0),d0
00011A62 E240                       		asr.w	#1,d0
00011A64 D068 0030                  		add.w	elev_origY(a0),d0
00011A68 3140 000C                  		move.w	d0,obY(a0)
00011A6C 3028 0034                  		move.w	$34(a0),d0
00011A70 4440                       		neg.w	d0
00011A72 D068 0032                  		add.w	elev_origX(a0),d0
00011A76 3140 0008                  		move.w	d0,obX(a0)
00011A7A 4E75                       		rts	
00011A7C                            ; ===========================================================================
00011A7C                            
00011A7C                            @type09:
00011A7C 6100 0000                  		bsr.w	Elev_Move
00011A80 3028 0034                  		move.w	$34(a0),d0
00011A84 4440                       		neg.w	d0
00011A86 D068 0030                  		add.w	elev_origY(a0),d0
00011A8A 3140 000C                  		move.w	d0,obY(a0)
00011A8E 4A28 0028                  		tst.b	obSubtype(a0)
00011A92 6700 0000                  		beq.w	@typereset
00011A96 4E75                       		rts	
00011A98                            ; ===========================================================================
00011A98                            
00011A98                            	@typereset:
00011A98 0828 0003 0022             		btst	#3,obStatus(a0)
00011A9E 6700                       		beq.s	@delete
00011AA0 08E9 0001 0022             		bset	#1,obStatus(a1)
00011AA6 08A9 0003 0022             		bclr	#3,obStatus(a1)
00011AAC 137C 0002 0024             		move.b	#2,obRoutine(a1)
00011AB2                            
00011AB2                            	@delete:
00011AB2 6000 C9B0                  		bra.w	DeleteObject
00011AB6                            
00011AB6                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00011AB6                            
00011AB6                            
00011AB6                            Elev_Move:
00011AB6 3028 0038                  		move.w	$38(a0),d0
00011ABA 4A28 003A                  		tst.b	$3A(a0)
00011ABE 6600                       		bne.s	loc_10CC8
00011AC0 0C40 0800                  		cmpi.w	#$800,d0
00011AC4 6400                       		bcc.s	loc_10CD0
00011AC6 0640 0010                  		addi.w	#$10,d0
00011ACA 6000                       		bra.s	loc_10CD0
00011ACC                            ; ===========================================================================
00011ACC                            
00011ACC                            loc_10CC8:
00011ACC 4A40                       		tst.w	d0
00011ACE 6700                       		beq.s	loc_10CD0
00011AD0 0440 0010                  		subi.w	#$10,d0
00011AD4                            
00011AD4                            loc_10CD0:
00011AD4 3140 0038                  		move.w	d0,$38(a0)
00011AD8 48C0                       		ext.l	d0
00011ADA E180                       		asl.l	#8,d0
00011ADC D0A8 0034                  		add.l	$34(a0),d0
00011AE0 2140 0034                  		move.l	d0,$34(a0)
00011AE4 4840                       		swap	d0
00011AE6 3428 003C                  		move.w	elev_dist(a0),d2
00011AEA B042                       		cmp.w	d2,d0
00011AEC 6300                       		bls.s	loc_10CF0
00011AEE 117C 0001 003A             		move.b	#1,$3A(a0)
00011AF4                            
00011AF4                            loc_10CF0:
00011AF4 D442                       		add.w	d2,d2
00011AF6 B042                       		cmp.w	d2,d0
00011AF8 6600                       		bne.s	locret_10CFA
00011AFA 4228 0028                  		clr.b	obSubtype(a0)
00011AFE                            
00011AFE                            locret_10CFA:
00011AFE 4E75                       		rts	
00011B00                            ; End of function Elev_Move
00011B00                            
00011B00                            ; ===========================================================================
00011B00                            
00011B00                            Elev_MakeMulti:	; Routine 6
00011B00 5368 003C                  		subq.w	#1,elev_dist(a0)
00011B04 6600                       		bne.s	@chkdel
00011B06 3168 003E 003C             		move.w	$3E(a0),elev_dist(a0)
00011B0C 6100 CDA2                  		bsr.w	FindFreeObj
00011B10 6600                       		bne.s	@chkdel
00011B12 137C 0059 0000             		move.b	#id_Elevator,0(a1) ; duplicate the object
00011B18 3368 0008 0008             		move.w	obX(a0),obX(a1)
00011B1E 3368 000C 000C             		move.w	obY(a0),obY(a1)
00011B24 137C 000E 0028             		move.b	#$E,obSubtype(a1)
00011B2A                            
00011B2A                            @chkdel:
00011B2A 588F                       		addq.l	#4,sp
00011B4A 4E75                       		rts	
00011B4A 4E75                       		rts	
00011B4C                            Map_Elev:	include	"_maps\SLZ Elevators.asm"
00011B4C                            ; ---------------------------------------------------------------------------
00011B4C                            ; Sprite mappings - platforms that move	when you stand on them (SLZ)
00011B4C                            ; ---------------------------------------------------------------------------
00011B4C                            Map_Elev_internal:
00011B4C 0000                       		dc.w @elevator-Map_Elev_internal
00011B4E 03                         @elevator:	dc.b 3
00011B4F F80F 0041 D8               		dc.b $F8, $F, 0, $41, $D8
00011B54 F80F 0041 F8               		dc.b $F8, $F, 0, $41, $F8
00011B59 F807 0041 18               		dc.b $F8, 7, 0,	$41, $18
00011B5E                            		even
00011B5E                            		even
00011B5E                            		include	"_incObj\5A SLZ Circling Platform.asm"
00011B5E                            ; ---------------------------------------------------------------------------
00011B5E                            ; Object 5A - platforms	moving in circles (SLZ)
00011B5E                            ; ---------------------------------------------------------------------------
00011B5E                            
00011B5E                            CirclingPlatform:
00011B5E 7000                       		moveq	#0,d0
00011B60 1028 0024                  		move.b	obRoutine(a0),d0
00011B64 323B 0000                  		move.w	Circ_Index(pc,d0.w),d1
00011B68 4EBB 1000                  		jsr	Circ_Index(pc,d1.w)
00011B8A 6000 C89C                  		bra.w	DisplaySprite
00011B8E                            ; ===========================================================================
00011B8E 0000                       Circ_Index:	dc.w Circ_Main-Circ_Index
00011B90 0000                       		dc.w Circ_Platform-Circ_Index
00011B92 0000                       		dc.w Circ_Action-Circ_Index
00011B94                            
00011B94 =00000032                  circ_origX:	equ $32		; original x-axis position
00011B94 =00000030                  circ_origY:	equ $30		; original y-axis position
00011B94                            ; ===========================================================================
00011B94                            
00011B94                            Circ_Main:	; Routine 0
00011B94 5428 0024                  		addq.b	#2,obRoutine(a0)
00011B98 217C 0000 0000 0004        		move.l	#Map_Circ,obMap(a0)
00011BA0 317C 4000 0002             		move.w	#$4000,obGfx(a0)
00011BA6 117C 0004 0001             		move.b	#4,obRender(a0)
00011BAC 117C 0004 0018             		move.b	#4,obPriority(a0)
00011BB2 117C 0018 0019             		move.b	#$18,obActWid(a0)
00011BB8 3168 0008 0032             		move.w	obX(a0),circ_origX(a0)
00011BBE 3168 000C 0030             		move.w	obY(a0),circ_origY(a0)
00011BC4                            
00011BC4                            Circ_Platform:	; Routine 2
00011BC4 7200                       		moveq	#0,d1
00011BC6 1228 0019                  		move.b	obActWid(a0),d1
00011BCA 4EB9 0000 7A86             		jsr	(PlatformObject).l
00011BD0 6000 0000                  		bra.w	Circ_Types
00011BD4                            ; ===========================================================================
00011BD4                            
00011BD4                            Circ_Action:	; Routine 4
00011BD4 7200                       		moveq	#0,d1
00011BD6 1228 0019                  		move.b	obActWid(a0),d1
00011BDA 4EB9 0000 7BFA             		jsr	(ExitPlatform).l
00011BE0 3F28 0008                  		move.w	obX(a0),-(sp)
00011BE4 6100 0000                  		bsr.w	Circ_Types
00011BE8 341F                       		move.w	(sp)+,d2
00011BEA 4EF9 0000 8168             		jmp	(MvSonicOnPtfm2).l
00011BF0                            ; ===========================================================================
00011BF0                            
00011BF0                            Circ_Types:
00011BF0 7000                       		moveq	#0,d0
00011BF2 1028 0028                  		move.b	obSubtype(a0),d0
00011BF6 0240 000C                  		andi.w	#$C,d0
00011BFA E248                       		lsr.w	#1,d0
00011BFC 323B 0000                  		move.w	@index(pc,d0.w),d1
00011C00 4EFB 1000                  		jmp	@index(pc,d1.w)
00011C04                            ; ===========================================================================
00011C04 0000                       @index:		dc.w @type00-@index
00011C06 0000                       		dc.w @type04-@index
00011C08                            ; ===========================================================================
00011C08                            
00011C08                            @type00:
00011C08 1238 FE80                  		move.b	(v_oscillate+$22).w,d1 ; get rotating value
00011C0C 0401 0050                  		subi.b	#$50,d1		; set radius of circle
00011C10 4881                       		ext.w	d1
00011C12 1438 FE84                  		move.b	(v_oscillate+$26).w,d2
00011C16 0402 0050                  		subi.b	#$50,d2
00011C1A 4882                       		ext.w	d2
00011C1C 0828 0000 0028             		btst	#0,obSubtype(a0)
00011C22 6700                       		beq.s	@noshift00a
00011C24 4441                       		neg.w	d1
00011C26 4442                       		neg.w	d2
00011C28                            
00011C28                            	@noshift00a:
00011C28 0828 0001 0028             		btst	#1,obSubtype(a0)
00011C2E 6700                       		beq.s	@noshift00b
00011C30 4441                       		neg.w	d1
00011C32 C342                       		exg	d1,d2
00011C34                            
00011C34                            	@noshift00b:
00011C34 D268 0032                  		add.w	circ_origX(a0),d1
00011C38 3141 0008                  		move.w	d1,obX(a0)
00011C3C D468 0030                  		add.w	circ_origY(a0),d2
00011C40 3142 000C                  		move.w	d2,obY(a0)
00011C44 4E75                       		rts	
00011C46                            ; ===========================================================================
00011C46                            
00011C46                            @type04:
00011C46 1238 FE80                  		move.b	(v_oscillate+$22).w,d1
00011C4A 0401 0050                  		subi.b	#$50,d1
00011C4E 4881                       		ext.w	d1
00011C50 1438 FE84                  		move.b	(v_oscillate+$26).w,d2
00011C54 0402 0050                  		subi.b	#$50,d2
00011C58 4882                       		ext.w	d2
00011C5A 0828 0000 0028             		btst	#0,obSubtype(a0)
00011C60 6700                       		beq.s	@noshift04a
00011C62 4441                       		neg.w	d1
00011C64 4442                       		neg.w	d2
00011C66                            
00011C66                            	@noshift04a:
00011C66 0828 0001 0028             		btst	#1,obSubtype(a0)
00011C6C 6700                       		beq.s	@noshift04b
00011C6E 4441                       		neg.w	d1
00011C70 C342                       		exg	d1,d2
00011C72                            
00011C72                            	@noshift04b:
00011C72 4441                       		neg.w	d1
00011C74 D268 0032                  		add.w	circ_origX(a0),d1
00011C78 3141 0008                  		move.w	d1,obX(a0)
00011C7C D468 0030                  		add.w	circ_origY(a0),d2
00011C80 3142 000C                  		move.w	d2,obY(a0)
00011C84 4E75                       		rts	
00011C84 4E75                       		rts	
00011C86                            Map_Circ:	include	"_maps\SLZ Circling Platform.asm"
00011C86                            ; ---------------------------------------------------------------------------
00011C86                            ; Sprite mappings - platforms that move	in circles (SLZ)
00011C86                            ; ---------------------------------------------------------------------------
00011C86                            Map_Circ_internal:
00011C86 0000                       		dc.w @platform-Map_Circ_internal
00011C88 02                         @platform:	dc.b 2
00011C89 F809 0051 E8               		dc.b $F8, 9, 0,	$51, $E8
00011C8E F809 0851 00               		dc.b $F8, 9, 8,	$51, 0
00011C94 00                         		even
00011C94 00                         		even
00011C94                            		include	"_incObj\5B Staircase.asm"
00011C94                            ; ---------------------------------------------------------------------------
00011C94                            ; Object 5B - blocks that form a staircase (SLZ)
00011C94                            ; ---------------------------------------------------------------------------
00011C94                            
00011C94                            Staircase:
00011C94 7000                       		moveq	#0,d0
00011C96 1028 0024                  		move.b	obRoutine(a0),d0
00011C9A 323B 0000                  		move.w	Stair_Index(pc,d0.w),d1
00011C9E 4EBB 1000                  		jsr	Stair_Index(pc,d1.w)
00011CC0 6000 C766                  		bra.w	DisplaySprite
00011CC4                            ; ===========================================================================
00011CC4 0000                       Stair_Index:	dc.w Stair_Main-Stair_Index
00011CC6 0000                       		dc.w Stair_Move-Stair_Index
00011CC8 0000                       		dc.w Stair_Solid-Stair_Index
00011CCA                            
00011CCA =00000030                  stair_origX:	equ $30		; original x-axis position
00011CCA =00000032                  stair_origY:	equ $32		; original y-axis position
00011CCA                            
00011CCA =0000003C                  stair_parent:	equ $3C		; address of parent object (4 bytes)
00011CCA                            ; ===========================================================================
00011CCA                            
00011CCA                            Stair_Main:	; Routine 0
00011CCA 5428 0024                  		addq.b	#2,obRoutine(a0)
00011CCE 7638                       		moveq	#$38,d3
00011CD0 7801                       		moveq	#1,d4
00011CD2 0828 0000 0022             		btst	#0,obStatus(a0)	; is object flipped?
00011CD8 6700                       		beq.s	@notflipped	; if not, branch
00011CDA 763B                       		moveq	#$3B,d3
00011CDC 78FF                       		moveq	#-1,d4
00011CDE                            
00011CDE                            	@notflipped:
00011CDE 3428 0008                  		move.w	obX(a0),d2
00011CE2 2248                       		movea.l	a0,a1
00011CE4 7203                       		moveq	#3,d1
00011CE6 6000                       		bra.s	@makeblocks
00011CE8                            ; ===========================================================================
00011CE8                            
00011CE8                            @loop:
00011CE8 6100 CBDC                  		bsr.w	FindNextFreeObj
00011CEC 6600 0000                  		bne.w	@fail
00011CF0 137C 0004 0024             		move.b	#4,obRoutine(a1)
00011CF6                            
00011CF6                            @makeblocks:
00011CF6 137C 005B 0000             		move.b	#id_Staircase,0(a1) ; load another block object
00011CFC 237C 0000 0000 0004        		move.l	#Map_Stair,obMap(a1)
00011D04 337C 4000 0002             		move.w	#$4000,obGfx(a1)
00011D0A 137C 0004 0001             		move.b	#4,obRender(a1)
00011D10 137C 0003 0018             		move.b	#3,obPriority(a1)
00011D16 137C 0010 0019             		move.b	#$10,obActWid(a1)
00011D1C 1368 0028 0028             		move.b	obSubtype(a0),obSubtype(a1)
00011D22 3342 0008                  		move.w	d2,obX(a1)
00011D26 3368 000C 000C             		move.w	obY(a0),obY(a1)
00011D2C 3368 0008 0030             		move.w	obX(a0),stair_origX(a1)
00011D32 3369 000C 0032             		move.w	obY(a1),stair_origY(a1)
00011D38 0642 0020                  		addi.w	#$20,d2
00011D3C 1343 0037                  		move.b	d3,$37(a1)
00011D40 2348 003C                  		move.l	a0,stair_parent(a1)
00011D44 D604                       		add.b	d4,d3
00011D46 51C9 FFA0                  		dbf	d1,@loop	; repeat sequence 3 times
00011D4A                            
00011D4A                            	@fail:
00011D4A                            
00011D4A                            Stair_Move:	; Routine 2
00011D4A 7000                       		moveq	#0,d0
00011D4C 1028 0028                  		move.b	obSubtype(a0),d0
00011D50 0240 0007                  		andi.w	#7,d0
00011D54 D040                       		add.w	d0,d0
00011D56 323B 0000                  		move.w	Stair_TypeIndex(pc,d0.w),d1
00011D5A 4EBB 1000                  		jsr	Stair_TypeIndex(pc,d1.w)
00011D5E                            
00011D5E                            Stair_Solid:	; Routine 4
00011D5E 2468 003C                  		movea.l	stair_parent(a0),a2
00011D62 7000                       		moveq	#0,d0
00011D64 1028 0037                  		move.b	$37(a0),d0
00011D68 1032 0000                  		move.b	(a2,d0.w),d0
00011D6C D068 0032                  		add.w	stair_origY(a0),d0
00011D70 3140 000C                  		move.w	d0,obY(a0)
00011D74 7200                       		moveq	#0,d1
00011D76 1228 0019                  		move.b	obActWid(a0),d1
00011D7A 0641 000B                  		addi.w	#$B,d1
00011D7E 343C 0010                  		move.w	#$10,d2
00011D82 363C 0011                  		move.w	#$11,d3
00011D86 3828 0008                  		move.w	obX(a0),d4
00011D8A 6100 EA0C                  		bsr.w	SolidObject
00011D8E 4A04                       		tst.b	d4
00011D90 6A00                       		bpl.s	loc_10F92
00011D92 1544 0036                  		move.b	d4,$36(a2)
00011D96                            
00011D96                            loc_10F92:
00011D96 0828 0003 0022             		btst	#3,obStatus(a0)
00011D9C 6700                       		beq.s	locret_10FA0
00011D9E 157C 0001 0036             		move.b	#1,$36(a2)
00011DA4                            
00011DA4                            locret_10FA0:
00011DA4 4E75                       		rts	
00011DA6                            ; ===========================================================================
00011DA6 0000                       Stair_TypeIndex:dc.w Stair_Type00-Stair_TypeIndex
00011DA8 0000                       		dc.w Stair_Type01-Stair_TypeIndex
00011DAA 0000                       		dc.w Stair_Type02-Stair_TypeIndex
00011DAC 0000                       		dc.w Stair_Type01-Stair_TypeIndex
00011DAE                            ; ===========================================================================
00011DAE                            
00011DAE                            Stair_Type00:
00011DAE 4A68 0034                  		tst.w	$34(a0)
00011DB2 6600                       		bne.s	loc_10FC0
00011DB4 0C28 0001 0036             		cmpi.b	#1,$36(a0)
00011DBA 6600                       		bne.s	locret_10FBE
00011DBC 317C 001E 0034             		move.w	#$1E,$34(a0)
00011DC2                            
00011DC2                            locret_10FBE:
00011DC2 4E75                       		rts	
00011DC4                            ; ===========================================================================
00011DC4                            
00011DC4                            loc_10FC0:
00011DC4 5368 0034                  		subq.w	#1,$34(a0)
00011DC8 66F8                       		bne.s	locret_10FBE
00011DCA 5228 0028                  		addq.b	#1,obSubtype(a0) ; add 1 to type
00011DCE 4E75                       		rts	
00011DD0                            ; ===========================================================================
00011DD0                            
00011DD0                            Stair_Type02:
00011DD0 4A68 0034                  		tst.w	$34(a0)
00011DD4 6600                       		bne.s	loc_10FE0
00011DD6 4A28 0036                  		tst.b	$36(a0)
00011DDA 6A00                       		bpl.s	locret_10FDE
00011DDC 317C 003C 0034             		move.w	#$3C,$34(a0)
00011DE2                            
00011DE2                            locret_10FDE:
00011DE2 4E75                       		rts	
00011DE4                            ; ===========================================================================
00011DE4                            
00011DE4                            loc_10FE0:
00011DE4 5368 0034                  		subq.w	#1,$34(a0)
00011DE8 6600                       		bne.s	loc_10FEC
00011DEA 5228 0028                  		addq.b	#1,obSubtype(a0) ; add 1 to type
00011DEE 4E75                       		rts	
00011DF0                            ; ===========================================================================
00011DF0                            
00011DF0                            loc_10FEC:
00011DF0 43E8 0038                  		lea	$38(a0),a1
00011DF4 3028 0034                  		move.w	$34(a0),d0
00011DF8 E408                       		lsr.b	#2,d0
00011DFA 0200 0001                  		andi.b	#1,d0
00011DFE 12C0                       		move.b	d0,(a1)+
00011E00 0A00 0001                  		eori.b	#1,d0
00011E04 12C0                       		move.b	d0,(a1)+
00011E06 0A00 0001                  		eori.b	#1,d0
00011E0A 12C0                       		move.b	d0,(a1)+
00011E0C 0A00 0001                  		eori.b	#1,d0
00011E10 12C0                       		move.b	d0,(a1)+
00011E12 4E75                       		rts	
00011E14                            ; ===========================================================================
00011E14                            
00011E14                            Stair_Type01:
00011E14 43E8 0038                  		lea	$38(a0),a1
00011E18 0C11 0080                  		cmpi.b	#$80,(a1)
00011E1C 6700                       		beq.s	locret_11038
00011E1E 5211                       		addq.b	#1,(a1)
00011E20 7200                       		moveq	#0,d1
00011E22 1219                       		move.b	(a1)+,d1
00011E24 4841                       		swap	d1
00011E26 E289                       		lsr.l	#1,d1
00011E28 2401                       		move.l	d1,d2
00011E2A E289                       		lsr.l	#1,d1
00011E2C 2601                       		move.l	d1,d3
00011E2E D682                       		add.l	d2,d3
00011E30 4841                       		swap	d1
00011E32 4842                       		swap	d2
00011E34 4843                       		swap	d3
00011E36 12C3                       		move.b	d3,(a1)+
00011E38 12C2                       		move.b	d2,(a1)+
00011E3A 12C1                       		move.b	d1,(a1)+
00011E3C                            
00011E3C                            locret_11038:
00011E3C 4E75                       		rts	
00011E3E 4E75                       		rts	
00011E3E 4E75                       		rts	
00011E40                            Map_Stair:	include	"_maps\Staircase.asm"
00011E40                            ; ---------------------------------------------------------------------------
00011E40                            ; Sprite mappings - blocks that	form a staircase (SLZ)
00011E40                            ; ---------------------------------------------------------------------------
00011E40                            Map_Stair_internal:
00011E40 0000                       		dc.w @block-Map_Stair_internal
00011E42 01                         @block:		dc.b 1
00011E43 F00F 0021 F0               		dc.b $F0, $F, 0, $21, $F0
00011E48                            		even
00011E48                            		even
00011E48                            		include	"_incObj\5C Pylon.asm"
00011E48                            ; ---------------------------------------------------------------------------
00011E48                            ; Object 5C - metal pylons in foreground (SLZ)
00011E48                            ; ---------------------------------------------------------------------------
00011E48                            
00011E48                            Pylon:
00011E48 7000                       		moveq	#0,d0
00011E4A 1028 0024                  		move.b	obRoutine(a0),d0
00011E4E 323B 0000                  		move.w	Pyl_Index(pc,d0.w),d1
00011E52 4EFB 1000                  		jmp	Pyl_Index(pc,d1.w)
00011E56                            ; ===========================================================================
00011E56 0000                       Pyl_Index:	dc.w Pyl_Main-Pyl_Index
00011E58 0000                       		dc.w Pyl_Display-Pyl_Index
00011E5A                            ; ===========================================================================
00011E5A                            
00011E5A                            Pyl_Main:	; Routine 0
00011E5A 5428 0024                  		addq.b	#2,obRoutine(a0)
00011E5E 217C 0000 0000 0004        		move.l	#Map_Pylon,obMap(a0)
00011E66                            	;	move.w	#$83CC,obGfx(a0)
00011E66 317C 0000 0002             		move.w	#$0000,obGfx(a0)
00011E6C 117C 0010 0019             		move.b	#$10,obActWid(a0)
00011E72                            
00011E72                            Pyl_Display:	; Routine 2
00011E72 2238 F700                  		move.l	(v_screenposx).w,d1 ; start x
00011E76 D281                       		add.l	d1,d1
00011E78 4841                       		swap	d1
00011E7A 4441                       		neg.w	d1
00011E7C 3141 0008                  		move.w	d1,obX(a0)
00011E80 2238 F704                  		move.l	(v_screenposy).w,d1 ; start y
00011E84 D281                       		add.l	d1,d1
00011E86 4841                       		swap	d1
00011E88                            	;	andi.w	#$3F,d1 ; how far up before reset to bottom of screen
00011E88 4441                       		neg.w	d1
00011E8A 0641 0100                  		addi.w	#$100,d1 ; offset default spawn value
00011E8E 3141 000A                  		move.w	d1,obScreenY(a0)
00011E92 6000 C594                  		bra.w	DisplaySprite
00011E92 6000 C594                  		bra.w	DisplaySprite
00011E96                            Map_Pylon:	include	"_maps\Pylon.asm"
00011E96                            ; ================================================================================
00011E96                            ; Sprite Mappings - generated by Flex 2 Thu Mar 18 2021 01:27:38 GMT-0400 (Eastern Daylight Time)
00011E96                            ; ================================================================================
00011E96                            
00011E96                            DATAGQG9HTRV6OB:
00011E96 0000                       	dc.w DATAGQG9HTRV6OB_0-DATAGQG9HTRV6OB
00011E98 12                         DATAGQG9HTRV6OB_0: dc.b $12
00011E99 E80F 0000 C4               	dc.b $E8, $F, $0, $0, $C4
00011E9E E00F 0010 E4               	dc.b $E0, $F, $0, $10, $E4
00011EA3 E000 0020 04               	dc.b $E0, $0, $0, $20, $4
00011EA8 080D 0021 C4               	dc.b $8, $D, $0, $21, $C4
00011EAD 000B 0029 E4               	dc.b $0, $B, $0, $29, $E4
00011EB2 F802 0035 04               	dc.b $F8, $2, $0, $35, $4
00011EB7 1800 0038 D4               	dc.b $18, $0, $0, $38, $D4
00011EBC 2001 0039 E4               	dc.b $20, $1, $0, $39, $E4
00011EC1 3001 0039 E4               	dc.b $30, $1, $0, $39, $E4
00011EC6 4001 0039 E4               	dc.b $40, $1, $0, $39, $E4
00011ECB 5001 0039 E4               	dc.b $50, $1, $0, $39, $E4
00011ED0 270F 0000 F4               	dc.b $27, $F, $0, $0, $F4
00011ED5 1F0F 0010 14               	dc.b $1F, $F, $0, $10, $14
00011EDA 1F00 0020 34               	dc.b $1F, $0, $0, $20, $34
00011EDF 470D 0021 F4               	dc.b $47, $D, $0, $21, $F4
00011EE4 3F0B 0029 14               	dc.b $3F, $B, $0, $29, $14
00011EE9 3702 0035 34               	dc.b $37, $2, $0, $35, $34
00011EEE 5700 0038 04               	dc.b $57, $0, $0, $38, $4
00011EF4 00                         	even
00011EF4 00                         	even
00011EF4                            
00011EF4                            		include	"_incObj\1B Water Surface.asm"
00011EF4                            ; ---------------------------------------------------------------------------
00011EF4                            ; Object 1B - water surface (LZ)
00011EF4                            ; ---------------------------------------------------------------------------
00011EF4                            
00011EF4                            WaterSurface:
00011EF4 7000                       		moveq	#0,d0
00011EF6 1028 0024                  		move.b	obRoutine(a0),d0
00011EFA 323B 0000                  		move.w	Surf_Index(pc,d0.w),d1
00011EFE 4EFB 1000                  		jmp	Surf_Index(pc,d1.w)
00011F02                            ; ===========================================================================
00011F02 0000                       Surf_Index:	dc.w Surf_Main-Surf_Index
00011F04 0000                       		dc.w Surf_Action-Surf_Index
00011F06                            
00011F06 =00000030                  surf_origX:	equ $30		; original x-axis position
00011F06 =00000032                  surf_freeze:	equ $32		; flag to freeze animation
00011F06                            ; ===========================================================================
00011F06                            
00011F06                            Surf_Main:	; Routine 0
00011F06 5428 0024                  		addq.b	#2,obRoutine(a0)
00011F0A 217C 0000 0000 0004        		move.l	#Map_Surf,obMap(a0)
00011F12 317C C300 0002             		move.w	#$C300,obGfx(a0)
00011F18 117C 0004 0001             		move.b	#4,obRender(a0)
00011F1E 117C 0080 0019             		move.b	#$80,obActWid(a0)
00011F24 3168 0008 0030             		move.w	obX(a0),surf_origX(a0)
00011F2A                            
00011F2A                            Surf_Action:	; Routine 2
00011F2A 3238 F700                  		move.w	(v_screenposx).w,d1
00011F2E 0241 FFE0                  		andi.w	#$FFE0,d1
00011F32 D268 0030                  		add.w	surf_origX(a0),d1
00011F36 0838 0000 FE05             		btst	#0,(v_framebyte).w
00011F3C 6700                       		beq.s	@even		; branch on even frames
00011F3E 0641 0020                  		addi.w	#$20,d1
00011F42                            
00011F42                            	@even:
00011F42 3141 0008                  		move.w	d1,obX(a0)	; match	obj x-position to screen position
00011F46 3238 F646                  		move.w	(v_waterpos1).w,d1
00011F4A 3141 000C                  		move.w	d1,obY(a0)	; match	obj y-position to water	height
00011F4E 4A28 0032                  		tst.b	surf_freeze(a0)
00011F52 6600                       		bne.s	@stopped
00011F54 0838 0007 F605             		btst	#bitStart,(v_jpadpress1).w ; is Start button pressed?
00011F5A 6700                       		beq.s	@animate	; if not, branch
00011F5C 5628 001A                  		addq.b	#3,obFrame(a0)	; use different	frames
00011F60 117C 0001 0032             		move.b	#1,surf_freeze(a0) ; stop animation
00011F66 6000                       		bra.s	@display
00011F68                            ; ===========================================================================
00011F68                            
00011F68                            @stopped:
00011F68 4A78 F63A                  		tst.w	(f_pause).w	; is the game paused?
00011F6C 6600                       		bne.s	@display	; if yes, branch
00011F6E 117C 0000 0032             		move.b	#0,surf_freeze(a0) ; resume animation
00011F74 5728 001A                  		subq.b	#3,obFrame(a0)	; use normal frames
00011F78                            
00011F78                            @animate:
00011F78 5328 001E                  		subq.b	#1,obTimeFrame(a0)
00011F7C 6A00                       		bpl.s	@display
00011F7E 117C 0007 001E             		move.b	#7,obTimeFrame(a0)
00011F84 5228 001A                  		addq.b	#1,obFrame(a0)
00011F88 0C28 0003 001A             		cmpi.b	#3,obFrame(a0)
00011F8E 6500                       		bcs.s	@display
00011F90 117C 0000 001A             		move.b	#0,obFrame(a0)
00011F96                            
00011F96                            @display:
00011F96 6000 C490                  		bra.w	DisplaySprite
00011F96 6000 C490                  		bra.w	DisplaySprite
00011F9A                            Map_Surf:	include	"_maps\Water Surface.asm"
00011F9A                            ; ---------------------------------------------------------------------------
00011F9A                            ; Sprite mappings - water surface (LZ)
00011F9A                            ; ---------------------------------------------------------------------------
00011F9A                            Map_Surf_internal:
00011F9A 0000                       		dc.w @normal1-Map_Surf_internal
00011F9C 0000                       		dc.w @normal2-Map_Surf_internal
00011F9E 0000                       		dc.w @normal3-Map_Surf_internal
00011FA0 0000                       		dc.w @paused1-Map_Surf_internal
00011FA2 0000                       		dc.w @paused2-Map_Surf_internal
00011FA4 0000                       		dc.w @paused3-Map_Surf_internal
00011FA6 03                         @normal1:	dc.b 3
00011FA7 FD0D 0000 A0               		dc.b $FD, $D, 0, 0, $A0
00011FAC FD0D 0000 E0               		dc.b $FD, $D, 0, 0, $E0
00011FB1 FD0D 0000 20               		dc.b $FD, $D, 0, 0, $20
00011FB6 03                         @normal2:	dc.b 3
00011FB7 FD0D 0008 A0               		dc.b $FD, $D, 0, 8, $A0
00011FBC FD0D 0008 E0               		dc.b $FD, $D, 0, 8, $E0
00011FC1 FD0D 0008 20               		dc.b $FD, $D, 0, 8, $20
00011FC6 03                         @normal3:	dc.b 3
00011FC7 FD0D 0800 A0               		dc.b $FD, $D, 8, 0, $A0
00011FCC FD0D 0800 E0               		dc.b $FD, $D, 8, 0, $E0
00011FD1 FD0D 0800 20               		dc.b $FD, $D, 8, 0, $20
00011FD6 06                         @paused1:	dc.b 6
00011FD7 FD0D 0000 A0               		dc.b $FD, $D, 0, 0, $A0
00011FDC FD0D 0000 C0               		dc.b $FD, $D, 0, 0, $C0
00011FE1 FD0D 0000 E0               		dc.b $FD, $D, 0, 0, $E0
00011FE6 FD0D 0000 00               		dc.b $FD, $D, 0, 0, 0
00011FEB FD0D 0000 20               		dc.b $FD, $D, 0, 0, $20
00011FF0 FD0D 0000 40               		dc.b $FD, $D, 0, 0, $40
00011FF5 06                         @paused2:	dc.b 6
00011FF6 FD0D 0008 A0               		dc.b $FD, $D, 0, 8, $A0
00011FFB FD0D 0008 C0               		dc.b $FD, $D, 0, 8, $C0
00012000 FD0D 0008 E0               		dc.b $FD, $D, 0, 8, $E0
00012005 FD0D 0008 00               		dc.b $FD, $D, 0, 8, 0
0001200A FD0D 0008 20               		dc.b $FD, $D, 0, 8, $20
0001200F FD0D 0008 40               		dc.b $FD, $D, 0, 8, $40
00012014 06                         @paused3:	dc.b 6
00012015 FD0D 0800 A0               		dc.b $FD, $D, 8, 0, $A0
0001201A FD0D 0800 C0               		dc.b $FD, $D, 8, 0, $C0
0001201F FD0D 0800 E0               		dc.b $FD, $D, 8, 0, $E0
00012024 FD0D 0800 00               		dc.b $FD, $D, 8, 0, 0
00012029 FD0D 0800 20               		dc.b $FD, $D, 8, 0, $20
0001202E FD0D 0800 40               		dc.b $FD, $D, 8, 0, $40
00012034 00                         		even
00012034 00                         		even
00012034                            		include	"_incObj\0B Pole that Breaks.asm"
00012034                            ; ---------------------------------------------------------------------------
00012034                            ; Object 0B - pole that	breaks (LZ)
00012034                            ; ---------------------------------------------------------------------------
00012034                            
00012034                            Pole:
00012034 7000                       		moveq	#0,d0
00012036 1028 0024                  		move.b	obRoutine(a0),d0
0001203A 323B 0000                  		move.w	Pole_Index(pc,d0.w),d1
0001203E 4EFB 1000                  		jmp	Pole_Index(pc,d1.w)
00012042                            ; ===========================================================================
00012042 0000                       Pole_Index:	dc.w Pole_Main-Pole_Index
00012044 0000                       		dc.w Pole_Action-Pole_Index
00012046 0000                       		dc.w Pole_Display-Pole_Index
00012048                            
00012048 =00000030                  pole_time:	equ $30		; time between grabbing the pole & breaking
00012048 =00000032                  pole_grabbed:	equ $32		; flag set when Sonic grabs the pole
00012048                            ; ===========================================================================
00012048                            
00012048                            Pole_Main:	; Routine 0
00012048 5428 0024                  		addq.b	#2,obRoutine(a0)
0001204C 217C 0000 0000 0004        		move.l	#Map_Pole,obMap(a0)
00012054 317C 43DE 0002             		move.w	#$43DE,obGfx(a0)
0001205A 117C 0004 0001             		move.b	#4,obRender(a0)
00012060 117C 0008 0019             		move.b	#8,obActWid(a0)
00012066 117C 0004 0018             		move.b	#4,obPriority(a0)
0001206C 117C 00E1 0020             		move.b	#$E1,obColType(a0)
00012072 7000                       		moveq	#0,d0
00012074 1028 0028                  		move.b	obSubtype(a0),d0 ; get object type
00012078 C0FC 003C                  		mulu.w	#60,d0		; multiply by 60 (1 second)
0001207C 3140 0030                  		move.w	d0,pole_time(a0) ; set breakage time
00012080                            
00012080                            Pole_Action:	; Routine 2
00012080 4A28 0032                  		tst.b	pole_grabbed(a0) ; has pole already been grabbed?
00012084 6700                       		beq.s	@grab		; if not, branch
00012086 4A68 0030                  		tst.w	pole_time(a0)
0001208A 6700                       		beq.s	@moveup
0001208C 5368 0030                  		subq.w	#1,pole_time(a0) ; decrement time until break
00012090 6600                       		bne.s	@moveup
00012092 117C 0001 001A             		move.b	#1,obFrame(a0)	; break	the pole
00012098 6000                       		bra.s	@release
0001209A                            ; ===========================================================================
0001209A                            
0001209A                            @moveup:
0001209A 43F8 D000                  		lea	(v_player).w,a1
0001209E 3028 000C                  		move.w	obY(a0),d0
000120A2 0440 0018                  		subi.w	#$18,d0
000120A6 0838 0000 F604             		btst	#bitUp,(v_jpadhold1).w ; is "up" pressed?
000120AC 6700                       		beq.s	@movedown	; if not, branch
000120AE 5369 000C                  		subq.w	#1,obY(a1)	; move Sonic up
000120B2 B069 000C                  		cmp.w	obY(a1),d0
000120B6 6500                       		bcs.s	@movedown
000120B8 3340 000C                  		move.w	d0,obY(a1)
000120BC                            
000120BC                            @movedown:
000120BC 0640 0024                  		addi.w	#$24,d0
000120C0 0838 0001 F604             		btst	#bitDn,(v_jpadhold1).w ; is "down" pressed?
000120C6 6700                       		beq.s	@letgo		; if not, branch
000120C8 5269 000C                  		addq.w	#1,obY(a1)	; move Sonic down
000120CC B069 000C                  		cmp.w	obY(a1),d0
000120D0 6400                       		bcc.s	@letgo
000120D2 3340 000C                  		move.w	d0,obY(a1)
000120D6                            
000120D6                            @letgo:
000120D6 1038 F603                  		move.b	(v_jpadpress2).w,d0
000120DA 0240 0070                  		andi.w	#btnABC,d0	; is A/B/C pressed?
000120DE 6700                       		beq.s	Pole_Display	; if not, branch
000120E0                            
000120E0                            @release:
000120E0 4228 0020                  		clr.b	obColType(a0)
000120E4 5428 0024                  		addq.b	#2,obRoutine(a0) ; goto Pole_Display next
000120E8 4238 F7C8                  		clr.b	(f_lockmulti).w
000120EC 4238 F7C9                  		clr.b	(f_wtunnelallow).w
000120F0 4228 0032                  		clr.b	pole_grabbed(a0)
000120F4 6000                       		bra.s	Pole_Display
000120F6                            ; ===========================================================================
000120F6                            
000120F6                            @grab:
000120F6 4A28 0021                  		tst.b	obColProp(a0)	; has Sonic touched the	pole?
000120FA 6700                       		beq.s	Pole_Display	; if not, branch
000120FC 43F8 D000                  		lea	(v_player).w,a1
00012100 3028 0008                  		move.w	obX(a0),d0
00012104 0640 0014                  		addi.w	#$14,d0
00012108 B069 0008                  		cmp.w	obX(a1),d0
0001210C 6400                       		bcc.s	Pole_Display
0001210E 4228 0021                  		clr.b	obColProp(a0)
00012112 0C29 0004 0024             		cmpi.b	#4,obRoutine(a1)
00012118 6400                       		bcc.s	Pole_Display
0001211A 4269 0010                  		clr.w	obVelX(a1)	; stop Sonic moving
0001211E 4269 0012                  		clr.w	obVelY(a1)	; stop Sonic moving
00012122 3028 0008                  		move.w	obX(a0),d0
00012126 0640 0014                  		addi.w	#$14,d0
0001212A 3340 0008                  		move.w	d0,obX(a1)
0001212E 08A9 0000 0022             		bclr	#0,obStatus(a1)
00012134 137C 0000 001C             		move.b	#id_Hang,obAnim(a1) ; set Sonic's animation to "hanging" ($11)
0001213A 11FC 0001 F7C8             		move.b	#1,(f_lockmulti).w ; lock controls
00012140 11FC 0001 F7C9             		move.b	#1,(f_wtunnelallow).w ; disable wind tunnel
00012146 117C 0001 0032             		move.b	#1,pole_grabbed(a0) ; begin countdown to breakage
0001214C                            
0001214C                            Pole_Display:	; Routine 4
0001214C 6000 E320                  		bra.w	RememberState
0001214C 6000 E320                  		bra.w	RememberState
00012150                            Map_Pole:	include	"_maps\Pole that Breaks.asm"
00012150                            ; ---------------------------------------------------------------------------
00012150                            ; Sprite mappings - pole that breaks (LZ)
00012150                            ; ---------------------------------------------------------------------------
00012150                            Map_Pole_internal:
00012150 0000                       		dc.w @normal-Map_Pole_internal
00012152 0000                       		dc.w @broken-Map_Pole_internal
00012154 02                         @normal:	dc.b 2			; normal pole
00012155 E003 0000 FC               		dc.b $E0, 3, 0,	0, $FC
0001215A 0003 1000 FC               		dc.b 0,	3, $10,	0, $FC
0001215F 04                         @broken:	dc.b 4			; broken pole
00012160 E001 0000 FC               		dc.b $E0, 1, 0,	0, $FC
00012165 F005 0004 FC               		dc.b $F0, 5, 0,	4, $FC
0001216A 0005 1004 FC               		dc.b 0,	5, $10,	4, $FC
0001216F 1001 1000 FC               		dc.b $10, 1, $10, 0, $FC
00012174                            		even
00012174                            		even
00012174                            		include	"_incObj\0C Flapping Door.asm"
00012174                            ; ---------------------------------------------------------------------------
00012174                            ; Object 0C - flapping door (LZ)
00012174                            ; ---------------------------------------------------------------------------
00012174                            
00012174                            FlapDoor:
00012174 7000                       		moveq	#0,d0
00012176 1028 0024                  		move.b	obRoutine(a0),d0
0001217A 323B 0000                  		move.w	Flap_Index(pc,d0.w),d1
0001217E 4EFB 1000                  		jmp	Flap_Index(pc,d1.w)
00012182                            ; ===========================================================================
00012182 0000                       Flap_Index:	dc.w Flap_Main-Flap_Index
00012184 0000                       		dc.w Flap_OpenClose-Flap_Index
00012186                            
00012186 =00000032                  flap_time:	equ $32		; time between opening/closing
00012186 =00000030                  flap_wait:	equ $30		; time until change
00012186                            ; ===========================================================================
00012186                            
00012186                            Flap_Main:	; Routine 0
00012186 5428 0024                  		addq.b	#2,obRoutine(a0)
0001218A 217C 0000 0000 0004        		move.l	#Map_Flap,obMap(a0)
00012192 317C 4328 0002             		move.w	#$4328,obGfx(a0)
00012198 0028 0004 0001             		ori.b	#4,obRender(a0)
0001219E 117C 0028 0019             		move.b	#$28,obActWid(a0)
000121A4 7000                       		moveq	#0,d0
000121A6 1028 0028                  		move.b	obSubtype(a0),d0 ; get object type
000121AA C0FC 003C                  		mulu.w	#60,d0		; multiply by 60 (1 second)
000121AE 3140 0032                  		move.w	d0,flap_time(a0) ; set flap delay time
000121B2                            
000121B2                            Flap_OpenClose:	; Routine 2
000121B2 5368 0030                  		subq.w	#1,flap_wait(a0) ; decrement time delay
000121B6 6A00                       		bpl.s	@wait		; if time remains, branch
000121B8 3168 0032 0030             		move.w	flap_time(a0),flap_wait(a0) ; reset time delay
000121BE 0868 0000 001C             		bchg	#0,obAnim(a0)	; open/close door
000121C4 4A28 0001                  		tst.b	obRender(a0)
000121C8 6A00                       		bpl.s	@nosound
000121D4                            
000121D4                            	@wait:
000121D4                            	@nosound:
000121D4 43F9 0000 0000             		lea	(Ani_Flap).l,a1
000121DA 6100 900A                  		bsr.w	AnimateSprite
000121DE 4238 F7C9                  		clr.b	(f_wtunnelallow).w ; enable wind tunnel
000121E2 4A28 001A                  		tst.b	obFrame(a0)	; is the door open?
000121E6 6600                       		bne.s	@display	; if yes, branch
000121E8 3038 D008                  		move.w	(v_player+obX).w,d0
000121EC B068 0008                  		cmp.w	obX(a0),d0	; has Sonic passed through the door?
000121F0 6400                       		bcc.s	@display	; if yes, branch
000121F2 11FC 0001 F7C9             		move.b	#1,(f_wtunnelallow).w ; disable wind tunnel
000121F8 323C 0013                  		move.w	#$13,d1
000121FC 343C 0020                  		move.w	#$20,d2
00012200 3602                       		move.w	d2,d3
00012202 5243                       		addq.w	#1,d3
00012204 3828 0008                  		move.w	obX(a0),d4
00012208 6100 E58E                  		bsr.w	SolidObject	; make the door	solid
0001220C                            
0001220C                            	@display:
0001220C 6000 E260                  		bra.w	RememberState
0001220C 6000 E260                  		bra.w	RememberState
00012210                            		include	"_anim\Flapping Door.asm"
00012210                            ; ---------------------------------------------------------------------------
00012210                            ; Animation script - flapping door (LZ)
00012210                            ; ---------------------------------------------------------------------------
00012210 0000                       Ani_Flap:	dc.w @opening-Ani_Flap
00012212 0000                       		dc.w @closing-Ani_Flap
00012214 0300 0102 FE01             @opening:	dc.b 3,	0, 1, 2, afBack, 1
0001221A 0302 0100 FE01             @closing:	dc.b 3,	2, 1, 0, afBack, 1
00012220                            		even
00012220                            		even
00012220                            Map_Flap:	include	"_maps\Flapping Door.asm"
00012220                            ; ---------------------------------------------------------------------------
00012220                            ; Sprite mappings - flapping door (LZ)
00012220                            ; ---------------------------------------------------------------------------
00012220                            Map_Flap_internal:
00012220 0000                       		dc.w @closed-Map_Flap_internal
00012222 0000                       		dc.w @halfway-Map_Flap_internal
00012224 0000                       		dc.w @open-Map_Flap_internal
00012226 02                         @closed:	dc.b 2
00012227 E007 0000 F8               		dc.b $E0, 7, 0,	0, $F8
0001222C 0007 1000 F8               		dc.b 0,	7, $10,	0, $F8
00012231 02                         @halfway:	dc.b 2
00012232 DA0F 0008 FB               		dc.b $DA, $F, 0, 8, $FB
00012237 060F 1008 FB               		dc.b 6,	$F, $10, 8, $FB
0001223C 02                         @open:		dc.b 2
0001223D D80D 0018 00               		dc.b $D8, $D, 0, $18, 0
00012242 180D 1018 00               		dc.b $18, $D, $10, $18,	0
00012248 00                         		even
00012248 00                         		even
00012248                            
00012248                            		include	"_incObj\71 Invisible Barriers.asm"
00012248                            ; ---------------------------------------------------------------------------
00012248                            ; Object 71 - invisible	solid barriers
00012248                            ; ---------------------------------------------------------------------------
00012248                            
00012248                            Invisibarrier:
00012248 7000                       		moveq	#0,d0
0001224A 1028 0024                  		move.b	obRoutine(a0),d0
0001224E 323B 0000                  		move.w	Invis_Index(pc,d0.w),d1
00012252 4EFB 1000                  		jmp	Invis_Index(pc,d1.w)
00012256                            ; ===========================================================================
00012256 0000                       Invis_Index:	dc.w Invis_Main-Invis_Index
00012258 0000                       		dc.w Invis_Solid-Invis_Index
0001225A                            
0001225A =00000016                  invis_height:	equ $16		; height in pixels
0001225A                            ; ===========================================================================
0001225A                            
0001225A                            Invis_Main:	; Routine 0
0001225A 5428 0024                  		addq.b	#2,obRoutine(a0)
0001225E 217C 0000 0000 0004        		move.l	#Map_Invis,obMap(a0)
00012266 317C 8680 0002             		move.w	#$8680,obGfx(a0)
0001226C 0028 0004 0001             		ori.b	#4,obRender(a0)
00012272 1028 0028                  		move.b	obSubtype(a0),d0 ; get object type
00012276 1200                       		move.b	d0,d1
00012278 0240 00F0                  		andi.w	#$F0,d0		; read only the	1st byte
0001227C 0640 0010                  		addi.w	#$10,d0
00012280 E248                       		lsr.w	#1,d0
00012282 1140 0019                  		move.b	d0,obActWid(a0)	; set object width
00012286 0241 000F                  		andi.w	#$F,d1		; read only the	2nd byte
0001228A 5241                       		addq.w	#1,d1
0001228C E749                       		lsl.w	#3,d1
0001228E 1141 0016                  		move.b	d1,invis_height(a0) ; set object height
00012292                            
00012292                            Invis_Solid:	; Routine 2
00012292 6100 C40E                  		bsr.w	ChkObjectVisible
00012296 6600                       		bne.s	@chkdel
00012298 7200                       		moveq	#0,d1
0001229A 1228 0019                  		move.b	obActWid(a0),d1
0001229E 0641 000B                  		addi.w	#$B,d1
000122A2 7400                       		moveq	#0,d2
000122A4 1428 0016                  		move.b	invis_height(a0),d2
000122A8 3602                       		move.w	d2,d3
000122AA 5243                       		addq.w	#1,d3
000122AC 3828 0008                  		move.w	obX(a0),d4
000122B0 6100 E52C                  		bsr.w	SolidObject71
000122B4                            
000122B4                            @chkdel:
000122D0 4A78 FE08                  		tst.w	(v_debuguse).w	; are you using	debug mode?
000122D4 6700                       		beq.s	@nodisplay	; if not, branch
000122D6 4EF9 0000 E428             		jmp	(DisplaySprite).l	; if yes, display the object
000122DC                            
000122DC                            	@nodisplay:
000122DC 4E75                       		rts	
000122DE                            
000122DE                            	@delete:
000122DE 4EF9 0000 E464             		jmp	(DeleteObject).l
000122DE 4EF9 0000 E464             		jmp	(DeleteObject).l
000122E4                            Map_Invis:	include	"_maps\Invisible Barriers.asm"
000122E4                            ; ---------------------------------------------------------------------------
000122E4                            ; Sprite mappings - invisible solid blocks
000122E4                            ; ---------------------------------------------------------------------------
000122E4                            Map_Invis_internal:
000122E4 0000                       		dc.w @solid-Map_Invis_internal
000122E6 0000                       		dc.w @unused1-Map_Invis_internal
000122E8 0000                       		dc.w @unused2-Map_Invis_internal
000122EA 04                         @solid:		dc.b 4
000122EB F005 0018 F0               		dc.b $F0, 5, 0,	$18, $F0
000122F0 F005 0018 00               		dc.b $F0, 5, 0,	$18, 0
000122F5 0005 0018 F0               		dc.b 0,	5, 0, $18, $F0
000122FA 0005 0018 00               		dc.b 0,	5, 0, $18, 0
000122FF 04                         @unused1:	dc.b 4
00012300 E005 0018 C0               		dc.b $E0, 5, 0,	$18, $C0
00012305 E005 0018 30               		dc.b $E0, 5, 0,	$18, $30
0001230A 1005 0018 C0               		dc.b $10, 5, 0,	$18, $C0
0001230F 1005 0018 30               		dc.b $10, 5, 0,	$18, $30
00012314 04                         @unused2:	dc.b 4
00012315 E005 0018 80               		dc.b $E0, 5, 0,	$18, $80
0001231A E005 0018 70               		dc.b $E0, 5, 0,	$18, $70
0001231F 1005 0018 80               		dc.b $10, 5, 0,	$18, $80
00012324 1005 0018 70               		dc.b $10, 5, 0,	$18, $70
0001232A 00                         		even
0001232A 00                         		even
0001232A                            
0001232A                            		include	"_incObj\5D Fan.asm"
0001232A                            ; ---------------------------------------------------------------------------
0001232A                            ; Object 5D - fans (SLZ)
0001232A                            ; ---------------------------------------------------------------------------
0001232A                            
0001232A                            Fan:
0001232A 7000                       		moveq	#0,d0
0001232C 1028 0024                  		move.b	obRoutine(a0),d0
00012330 323B 0000                  		move.w	Fan_Index(pc,d0.w),d1
00012334 4EFB 1000                  		jmp	Fan_Index(pc,d1.w)
00012338                            ; ===========================================================================
00012338 0000                       Fan_Index:	dc.w Fan_Main-Fan_Index
0001233A 0000                       		dc.w Fan_Delay-Fan_Index
0001233C                            
0001233C =00000030                  fan_time:	equ $30		; time between switching on/off
0001233C =00000032                  fan_switch:	equ $32		; on/off switch
0001233C                            ; ===========================================================================
0001233C                            
0001233C                            Fan_Main:	; Routine 0
0001233C 5428 0024                  		addq.b	#2,obRoutine(a0)
00012340 217C 0000 0000 0004        		move.l	#Map_Fan,obMap(a0)
00012348 317C 43A0 0002             		move.w	#$43A0,obGfx(a0)
0001234E 0028 0004 0001             		ori.b	#4,obRender(a0)
00012354 117C 0010 0019             		move.b	#$10,obActWid(a0)
0001235A 117C 0004 0018             		move.b	#4,obPriority(a0)
00012360                            
00012360                            Fan_Delay:	; Routine 2
00012360 0828 0001 0028             		btst	#1,obSubtype(a0) ; is object type 02/03 (always on)?
00012366 6600                       		bne.s	@blow		; if yes, branch
00012368 5368 0030                  		subq.w	#1,fan_time(a0)	; subtract 1 from time delay
0001236C 6A00                       		bpl.s	@blow		; if time remains, branch
0001236E 317C 0077 0030             		move.w	#119,fan_time(a0) ; set delay to 2 seconds
00012374 0868 0000 0032             		bchg	#0,fan_switch(a0) ; switch fan on/off
0001237A 6700                       		beq.s	@blow		; if fan is off, branch
0001237C 317C 00B4 0030             		move.w	#180,fan_time(a0) ; set delay to 3 seconds
00012382                            
00012382                            @blow:
00012382 4A28 0032                  		tst.b	fan_switch(a0)	; is fan switched on?
00012386 6600 0000                  		bne.w	@chkdel		; if not, branch
0001238A 43F8 D000                  		lea	(v_player).w,a1
0001238E 3029 0008                  		move.w	obX(a1),d0
00012392 9068 0008                  		sub.w	obX(a0),d0
00012396 0828 0000 0022             		btst	#0,obStatus(a0)	; is fan facing right?
0001239C 6600                       		bne.s	@chksonic	; if yes, branch
0001239E 4440                       		neg.w	d0
000123A0                            
000123A0                            @chksonic:
000123A0 0640 0050                  		addi.w	#$50,d0
000123A4 0C40 00F0                  		cmpi.w	#$F0,d0		; is Sonic more	than $A0 pixels	from the fan?
000123A8 6400                       		bcc.s	@animate	; if yes, branch
000123AA 3229 000C                  		move.w	obY(a1),d1
000123AE 0641 0060                  		addi.w	#$60,d1
000123B2 9268 000C                  		sub.w	obY(a0),d1
000123B6 6500                       		bcs.s	@animate	; branch if Sonic is too low
000123B8 0C41 0070                  		cmpi.w	#$70,d1
000123BC 6400                       		bcc.s	@animate	; branch if Sonic is too high
000123BE 0440 0050                  		subi.w	#$50,d0		; is Sonic more than $50 pixels from the fan?
000123C2 6400                       		bcc.s	@faraway	; if yes, branch
000123C4 4640                       		not.w	d0
000123C6 D040                       		add.w	d0,d0
000123C8                            
000123C8                            	@faraway:
000123C8 0640 0060                  		addi.w	#$60,d0
000123CC 0828 0000 0022             		btst	#0,obStatus(a0)	; is fan facing right?
000123D2 6600                       		bne.s	@right		; if yes, branch
000123D4 4440                       		neg.w	d0
000123D6                            
000123D6                            	@right:
000123D6 4400                       		neg.b	d0
000123D8 E840                       		asr.w	#4,d0
000123DA 0828 0000 0028             		btst	#0,obSubtype(a0)
000123E0 6700                       		beq.s	@movesonic
000123E2 4440                       		neg.w	d0
000123E4                            
000123E4                            	@movesonic:
000123E4 D169 0008                  		add.w	d0,obX(a1)	; push Sonic away from the fan
000123E8                            
000123E8                            @animate:
000123E8 5328 001E                  		subq.b	#1,obTimeFrame(a0)
000123EC 6A00                       		bpl.s	@chkdel
000123EE 117C 0000 001E             		move.b	#0,obTimeFrame(a0)
000123F4 5228 001B                  		addq.b	#1,obAniFrame(a0)
000123F8 0C28 0004 001B             		cmpi.b	#4,obAniFrame(a0)
000123FE 6500                       		bcs.s	@noreset
00012400 117C 0001 001B             		move.b	#1,obAniFrame(a0) ; reset after 4 frames
00012406                            
00012406                            	@noreset:
00012406 7000                       		moveq	#0,d0
00012408 0828 0000 0028             		btst	#0,obSubtype(a0)
0001240E 6700                       		beq.s	@noflip
00012410 7002                       		moveq	#2,d0
00012412                            
00012412                            	@noflip:
00012412 D028 001B                  		add.b	obAniFrame(a0),d0
00012416 1140 001A                  		move.b	d0,obFrame(a0)
0001241A                            
0001241A                            @chkdel:
0001241A 6100 C00C                  		bsr.w	DisplaySprite
0001243C 4E75                       		rts	
0001243C 4E75                       		rts	
0001243E                            Map_Fan:	include	"_maps\Fan.asm"
0001243E                            ; ================================================================================
0001243E                            ; Sprite Mappings - generated by Flex 2 Wed Jun 23 2021 22:53:21 GMT-0400 (Eastern Daylight Time)
0001243E                            ; ================================================================================
0001243E                            
0001243E                            DATA75B3EPD7DND:
0001243E 0000 0000                  	dc.w DATA75B3EPD7DND_0-DATA75B3EPD7DND, DATA75B3EPD7DND_1-DATA75B3EPD7DND
00012442 0000 0000                  	dc.w DATA75B3EPD7DND_2-DATA75B3EPD7DND, DATA75B3EPD7DND_3-DATA75B3EPD7DND
00012446 03                         DATA75B3EPD7DND_0: dc.b $3
00012447 000D 0005 F0               	dc.b $0, $D, $0, $5, $F0
0001244C F005 0000 F8               	dc.b $F0, $5, $0, $0, $F8
00012451 F800 0004 08               	dc.b $F8, $0, $0, $4, $8
00012456 02                         DATA75B3EPD7DND_1: dc.b $2
00012457 F00D 000D F0               	dc.b $F0, $D, $0, $D, $F0
0001245C 000D 0015 F0               	dc.b $0, $D, $0, $15, $F0
00012461 03                         DATA75B3EPD7DND_2: dc.b $3
00012462 F00D 001D F0               	dc.b $F0, $D, $0, $1D, $F0
00012467 0009 0025 F8               	dc.b $0, $9, $0, $25, $F8
0001246C 0000 002B F0               	dc.b $0, $0, $0, $2B, $F0
00012471 03                         DATA75B3EPD7DND_3: dc.b $3
00012472 F009 002C F8               	dc.b $F0, $9, $0, $2C, $F8
00012477 000D 0032 F0               	dc.b $0, $D, $0, $32, $F0
0001247C F001 003A F0               	dc.b $F0, $1, $0, $3A, $F0
00012482 00                         	even
00012482 00                         	even
00012482                            		include	"_incObj\5E Seesaw.asm"
00012482                            ; ---------------------------------------------------------------------------
00012482                            ; Object 5E - seesaws (SLZ)
00012482                            ; ---------------------------------------------------------------------------
00012482                            
00012482                            Seesaw:
00012482 7000                       		moveq	#0,d0
00012484 1028 0024                  		move.b	obRoutine(a0),d0
00012488 323B 0000                  		move.w	See_Index(pc,d0.w),d1
0001248C 4EBB 1000                  		jsr	See_Index(pc,d1.w)
00012490 3028 0000                  		move.w	see_origX(a0),d0
00012494 0240 FF80                  		andi.w	#$FF80,d0
00012498 3238 F700                  		move.w	(v_screenposx).w,d1
0001249C 0441 0080                  		subi.w	#$80,d1
000124A0 0241 FF80                  		andi.w	#$FF80,d1
000124A4 9041                       		sub.w	d1,d0
000124A6 6B00 BFBC                  		bmi.w	DeleteObject
000124AA 0C40 0280                  		cmpi.w	#$280,d0
000124AE 6200 BFB4                  		bhi.w	DeleteObject
000124B2 6000 BF74                  		bra.w	DisplaySprite
000124B6                            ; ===========================================================================
000124B6 0000                       See_Index:	dc.w See_Main-See_Index
000124B8 0000                       		dc.w See_Slope-See_Index
000124BA 0000                       		dc.w See_Slope2-See_Index
000124BC 0000                       		dc.w See_Spikeball-See_Index
000124BE 0000                       		dc.w See_MoveSpike-See_Index
000124C0 0000                       		dc.w See_SpikeFall-See_Index
000124C2                            
000124C2 =00000030                  see_origX:	equ $30		; original x-axis position
000124C2 =00000034                  see_origY:	equ $34		; original y-axis position
000124C2 =00000038                  see_speed:	equ $38		; speed of collision
000124C2 =0000003A                  see_frame:	equ $3A		; 
000124C2 =0000003C                  see_parent:	equ $3C		; RAM address of parent object
000124C2                            ; ===========================================================================
000124C2                            
000124C2                            See_Main:	; Routine 0
000124C2 5428 0024                  		addq.b	#2,obRoutine(a0)
000124C6 217C 0000 0000 0004        		move.l	#Map_Seesaw,obMap(a0)
000124CE 317C 0374 0002             		move.w	#$374,obGfx(a0)
000124D4 0028 0004 0001             		ori.b	#4,obRender(a0)
000124DA 117C 0004 0018             		move.b	#4,obPriority(a0)
000124E0 117C 0030 0019             		move.b	#$30,obActWid(a0)
000124E6 3168 0008 0030             		move.w	obX(a0),see_origX(a0)
000124EC 4A28 0028                  		tst.b	obSubtype(a0)	; is object type 00 ?
000124F0 6600                       		bne.s	@noball		; if not, branch
000124F2                            
000124F2 6100 C3D2                  		bsr.w	FindNextFreeObj
000124F6 6600                       		bne.s	@noball
000124F8 137C 005E 0000             		move.b	#id_Seesaw,0(a1) ; load spikeball object
000124FE 5C29 0024                  		addq.b	#6,obRoutine(a1) ; use See_Spikeball routine
00012502 3368 0008 0008             		move.w	obX(a0),obX(a1)
00012508 3368 000C 000C             		move.w	obY(a0),obY(a1)
0001250E 1368 0022 0022             		move.b	obStatus(a0),obStatus(a1)
00012514 2348 003C                  		move.l	a0,see_parent(a1)
00012518                            
00012518                            	@noball:
00012518 0828 0000 0022             		btst	#0,obStatus(a0)	; is seesaw flipped?
0001251E 6700                       		beq.s	@noflip		; if not, branch
00012520 117C 0002 001A             		move.b	#2,obFrame(a0)	; use different frame
00012526                            
00012526                            	@noflip:
00012526 1168 001A 003A             		move.b	obFrame(a0),see_frame(a0)
0001252C                            
0001252C                            See_Slope:	; Routine 2
0001252C 1228 003A                  		move.b	see_frame(a0),d1
00012530 6100 0000                  		bsr.w	See_ChgFrame
00012534 45F9 0000 0000             		lea	(See_DataSlope).l,a2
0001253A 0828 0000 001A             		btst	#0,obFrame(a0)	; is seesaw flat?
00012540 6700                       		beq.s	@notflat	; if not, branch
00012542 45F9 0000 0000             		lea	(See_DataFlat).l,a2
00012548                            
00012548                            	@notflat:
00012548 43F8 D000                  		lea	(v_player).w,a1
0001254C 3169 0012 0038             		move.w	obVelY(a1),see_speed(a0)
00012552 323C 0030                  		move.w	#$30,d1
00012556 4EB9 0000 7B5A             		jsr	(SlopeObject).l
0001255C 4E75                       		rts	
0001255E                            ; ===========================================================================
0001255E                            
0001255E                            See_Slope2:	; Routine 4
0001255E 6100 0000                  		bsr.w	See_ChkSide
00012562 45F9 0000 0000             		lea	(See_DataSlope).l,a2
00012568 0828 0000 001A             		btst	#0,obFrame(a0)	; is seesaw flat?
0001256E 6700                       		beq.s	@notflat	; if not, branch
00012570 45F9 0000 0000             		lea	(See_DataFlat).l,a2
00012576                            
00012576                            	@notflat:
00012576 323C 0030                  		move.w	#$30,d1
0001257A 4EB9 0000 7BFA             		jsr	(ExitPlatform).l
00012580 323C 0030                  		move.w	#$30,d1
00012584 3428 0008                  		move.w	obX(a0),d2
00012588 4EB9 0000 8D5C             		jsr	(SlopeObject2).l
0001258E 4E75                       		rts	
00012590                            ; ===========================================================================
00012590                            
00012590                            See_ChkSide:
00012590 7202                       		moveq	#2,d1
00012592 43F8 D000                  		lea	(v_player).w,a1
00012596 3028 0008                  		move.w	obX(a0),d0
0001259A 9069 0008                  		sub.w	obX(a1),d0	; is Sonic on the left side of the seesaw?
0001259E 6400                       		bcc.s	@leftside	; if yes, branch
000125A0 4440                       		neg.w	d0
000125A2 7200                       		moveq	#0,d1
000125A4                            
000125A4                            	@leftside:
000125A4 0C40 0008                  		cmpi.w	#8,d0
000125A8 6400                       		bcc.s	See_ChgFrame
000125AA 7201                       		moveq	#1,d1
000125AC                            
000125AC                            See_ChgFrame:
000125AC 1028 001A                  		move.b	obFrame(a0),d0
000125B0 B001                       		cmp.b	d1,d0		; does frame need to change?
000125B2 6700                       		beq.s	@noflip		; if not, branch
000125B4 6400                       		bcc.s	@loc_11772
000125B6 5400                       		addq.b	#2,d0
000125B8                            
000125B8                            	@loc_11772:
000125B8 5300                       		subq.b	#1,d0
000125BA 1140 001A                  		move.b	d0,obFrame(a0)
000125BE 1141 003A                  		move.b	d1,see_frame(a0)
000125C2 08A8 0000 0001             		bclr	#0,obRender(a0)
000125C8 0828 0001 001A             		btst	#1,obFrame(a0)
000125CE 6700                       		beq.s	@noflip
000125D0 08E8 0000 0001             		bset	#0,obRender(a0)
000125D6                            
000125D6                            	@noflip:
000125D6 4E75                       		rts	
000125D8                            ; ===========================================================================
000125D8                            
000125D8                            See_Spikeball:	; Routine 6
000125D8 5428 0024                  		addq.b	#2,obRoutine(a0)
000125DC 217C 0000 0000 0004        		move.l	#Map_SSawBall,obMap(a0)
000125E4 317C 04F0 0002             		move.w	#$4F0,obGfx(a0)
000125EA 0028 0004 0001             		ori.b	#4,obRender(a0)
000125F0 117C 0004 0018             		move.b	#4,obPriority(a0)
000125F6 117C 008B 0020             		move.b	#$8B,obColType(a0)
000125FC 117C 000C 0019             		move.b	#$C,obActWid(a0)
00012602 3168 0008 0030             		move.w	obX(a0),see_origX(a0)
00012608 0668 0028 0008             		addi.w	#$28,obX(a0)
0001260E 3168 000C 0034             		move.w	obY(a0),see_origY(a0)
00012614 117C 0001 001A             		move.b	#1,obFrame(a0)
0001261A 0828 0000 0022             		btst	#0,obStatus(a0)	; is seesaw flipped?
00012620 6700                       		beq.s	See_MoveSpike	; if not, branch
00012622 0468 0050 0008             		subi.w	#$50,obX(a0)	; move spikeball to the other side
00012628 117C 0002 003A             		move.b	#2,see_frame(a0)
0001262E                            
0001262E                            See_MoveSpike:	; Routine 8
0001262E 2268 003C                  		movea.l	see_parent(a0),a1
00012632 7000                       		moveq	#0,d0
00012634 1028 003A                  		move.b	see_frame(a0),d0
00012638 9029 003A                  		sub.b	see_frame(a1),d0
0001263C 6700                       		beq.s	loc_1183E
0001263E 6400                       		bcc.s	loc_117FC
00012640 4400                       		neg.b	d0
00012642                            
00012642                            loc_117FC:
00012642 323C F7E8                  		move.w	#-$818,d1
00012646 343C FEEC                  		move.w	#-$114,d2
0001264A 0C00 0001                  		cmpi.b	#1,d0
0001264E 6700                       		beq.s	loc_11822
00012650 323C F510                  		move.w	#-$AF0,d1
00012654 343C FF34                  		move.w	#-$CC,d2
00012658 0C69 0A00 0038             		cmpi.w	#$A00,$38(a1)
0001265E 6D00                       		blt.s	loc_11822
00012660 323C F200                  		move.w	#-$E00,d1
00012664 343C FF60                  		move.w	#-$A0,d2
00012668                            
00012668                            loc_11822:
00012668 3141 0012                  		move.w	d1,obVelY(a0)
0001266C 3142 0010                  		move.w	d2,obVelX(a0)
00012670 3028 0008                  		move.w	obX(a0),d0
00012674 9068 0030                  		sub.w	see_origX(a0),d0
00012678 6400                       		bcc.s	loc_11838
0001267A 4468 0010                  		neg.w	obVelX(a0)
0001267E                            
0001267E                            loc_11838:
0001267E 5428 0024                  		addq.b	#2,obRoutine(a0)
00012682 6000                       		bra.s	See_SpikeFall
00012684                            ; ===========================================================================
00012684                            
00012684                            loc_1183E:
00012684 45F9 0000 0000             		lea	(See_Speeds).l,a2
0001268A 7000                       		moveq	#0,d0
0001268C 1029 001A                  		move.b	obFrame(a1),d0
00012690 343C 0028                  		move.w	#$28,d2
00012694 3228 0008                  		move.w	obX(a0),d1
00012698 9268 0030                  		sub.w	see_origX(a0),d1
0001269C 6400                       		bcc.s	loc_1185C
0001269E 4442                       		neg.w	d2
000126A0 5440                       		addq.w	#2,d0
000126A2                            
000126A2                            loc_1185C:
000126A2 D040                       		add.w	d0,d0
000126A4 3228 0034                  		move.w	see_origY(a0),d1
000126A8 D272 0000                  		add.w	(a2,d0.w),d1
000126AC 3141 000C                  		move.w	d1,obY(a0)
000126B0 D468 0030                  		add.w	see_origX(a0),d2
000126B4 3142 0008                  		move.w	d2,obX(a0)
000126B8 4268 000E                  		clr.w	obY+2(a0)
000126BC 4268 000A                  		clr.w	obX+2(a0)
000126C0 4E75                       		rts	
000126C2                            ; ===========================================================================
000126C2                            
000126C2                            See_SpikeFall:	; Routine $A
000126C2 4A68 0012                  		tst.w	obVelY(a0)	; is spikeball falling down?
000126C6 6A00                       		bpl.s	loc_1189A	; if yes, branch
000126C8 6100 BD0C                  		bsr.w	ObjectFall
000126CC 3028 0034                  		move.w	see_origY(a0),d0
000126D0 0440 002F                  		subi.w	#$2F,d0
000126D4 B068 000C                  		cmp.w	obY(a0),d0
000126D8 6E00                       		bgt.s	locret_11898
000126DA 6100 BCFA                  		bsr.w	ObjectFall
000126DE                            
000126DE                            locret_11898:
000126DE 4E75                       		rts	
000126E0                            ; ===========================================================================
000126E0                            
000126E0                            loc_1189A:
000126E0 6100 BCF4                  		bsr.w	ObjectFall
000126E4 2268 003C                  		movea.l	see_parent(a0),a1
000126E8 45F9 0000 0000             		lea	(See_Speeds).l,a2
000126EE 7000                       		moveq	#0,d0
000126F0 1029 001A                  		move.b	obFrame(a1),d0
000126F4 3228 0008                  		move.w	obX(a0),d1
000126F8 9268 0030                  		sub.w	see_origX(a0),d1
000126FC 6400                       		bcc.s	loc_118BA
000126FE 5440                       		addq.w	#2,d0
00012700                            
00012700                            loc_118BA:
00012700 D040                       		add.w	d0,d0
00012702 3228 0034                  		move.w	see_origY(a0),d1
00012706 D272 0000                  		add.w	(a2,d0.w),d1
0001270A B268 000C                  		cmp.w	obY(a0),d1
0001270E 6E00                       		bgt.s	locret_11938
00012710 2268 003C                  		movea.l	see_parent(a0),a1
00012714 7202                       		moveq	#2,d1
00012716 4A68 0010                  		tst.w	obVelX(a0)
0001271A 6B00                       		bmi.s	See_Spring
0001271C 7200                       		moveq	#0,d1
0001271E                            
0001271E                            See_Spring:
0001271E 1341 003A                  		move.b	d1,$3A(a1)
00012722 1141 003A                  		move.b	d1,see_frame(a0)
00012726 B229 001A                  		cmp.b	obFrame(a1),d1
0001272A 6700                       		beq.s	loc_1192C
0001272C 08A9 0003 0022             		bclr	#3,obStatus(a1)
00012732 6700                       		beq.s	loc_1192C
00012734 4229 0025                  		clr.b	ob2ndRout(a1)
00012738 137C 0002 0024             		move.b	#2,obRoutine(a1)
0001273E 45F8 D000                  		lea	(v_player).w,a2
00012742 3568 0012 0012             		move.w	obVelY(a0),obVelY(a2)
00012748 446A 0012                  		neg.w	obVelY(a2)
0001274C 08EA 0001 0022             		bset	#1,obStatus(a2)
00012752 08AA 0003 0022             		bclr	#3,obStatus(a2)
00012758 422A 003C                  		clr.b	$3C(a2)
0001275C 157C 0000 001C             		move.b	#id_Spring,obAnim(a2) ; change Sonic's animation to "spring" ($10)
00012762 157C 0002 0024             		move.b	#2,obRoutine(a2)
00012772                            
00012772                            loc_1192C:
00012772 4268 0010                  		clr.w	obVelX(a0)
00012776 4268 0012                  		clr.w	obVelY(a0)
0001277A 5528 0024                  		subq.b	#2,obRoutine(a0)
0001277E                            
0001277E                            locret_11938:
0001277E 4E75                       		rts	
00012780                            ; ===========================================================================
00012780 FFF8 FFE4 FFD1 FFE4 FFF8   See_Speeds:	dc.w -8, -$1C, -$2F, -$1C, -8
0001278A                            
0001278A                            See_DataSlope:	incbin	"misc\slzssaw1.bin"
000127BA                            		even
000127BA                            See_DataFlat:	incbin	"misc\slzssaw2.bin"
000127EA                            		even
000127EA                            		even
000127EA                            Map_Seesaw:	include	"_maps\Seesaw.asm"
000127EA                            ; ---------------------------------------------------------------------------
000127EA                            ; Sprite mappings - seesaws (SLZ)
000127EA                            ; ---------------------------------------------------------------------------
000127EA                            Map_Seesaw_internal:
000127EA 0000                       		dc.w @sloping-Map_Seesaw_internal
000127EC 0000                       		dc.w @flat-Map_Seesaw_internal
000127EE 0000                       		dc.w @sloping-Map_Seesaw_internal
000127F0 0000                       		dc.w @flat-Map_Seesaw_internal
000127F2 07                         @sloping:	dc.b 7
000127F3 D406 0000 D3               		dc.b $D4, 6, 0,	0, $D3
000127F8 DC06 0006 E3               		dc.b $DC, 6, 0,	6, $E3
000127FD E404 000C F3               		dc.b $E4, 4, 0,	$C, $F3
00012802 EC0D 000E F3               		dc.b $EC, $D, 0, $E, $F3
00012807 FC08 0016 FB               		dc.b $FC, 8, 0,	$16, $FB
0001280C F406 0006 13               		dc.b $F4, 6, 0,	6, $13
00012811 FC05 0019 23               		dc.b $FC, 5, 0,	$19, $23
00012816 04                         @flat:		dc.b 4
00012817 E60A 001D D0               		dc.b $E6, $A, 0, $1D, $D0
0001281C E60A 0023 E8               		dc.b $E6, $A, 0, $23, $E8
00012821 E60A 0823 00               		dc.b $E6, $A, 8, $23, 0
00012826 E60A 081D 18               		dc.b $E6, $A, 8, $1D, $18
0001282C 00                         		even
0001282C 00                         		even
0001282C                            Map_SSawBall:	include	"_maps\Seesaw Ball.asm"
0001282C                            ; ---------------------------------------------------------------------------
0001282C                            ; Sprite mappings - spiked balls on the	seesaws	(SLZ)
0001282C                            ; ---------------------------------------------------------------------------
0001282C                            Map_SSawBall_internal:
0001282C 0000                       		dc.w @red-Map_SSawBall_internal
0001282E 0000                       		dc.w @silver-Map_SSawBall_internal
00012830 01                         @red:		dc.b 1
00012831 F40A 0000 F4               		dc.b $F4, $A, 0, 0, $F4
00012836 01                         @silver:	dc.b 1
00012837 F40A 0009 F4               		dc.b $F4, $A, 0, 9, $F4
0001283C                            		even
0001283C                            		even
0001283C                            		include	"_incObj\5F Bomb Enemy.asm"
0001283C                            ; ---------------------------------------------------------------------------
0001283C                            ; Object 5F - walking bomb enemy (SLZ, SBZ)
0001283C                            ; ---------------------------------------------------------------------------
0001283C                            
0001283C                            Bomb:
0001283C 7000                       		moveq	#0,d0
0001283E 1028 0024                  		move.b	obRoutine(a0),d0
00012842 323B 0000                  		move.w	Bom_Index(pc,d0.w),d1
00012846 4EFB 1000                  		jmp	Bom_Index(pc,d1.w)
0001284A                            ; ===========================================================================
0001284A 0000                       Bom_Index:	dc.w Bom_Main-Bom_Index
0001284C 0000                       		dc.w Bom_Action-Bom_Index
0001284E 0000                       		dc.w Bom_Display-Bom_Index
00012850 0000                       		dc.w Bom_End-Bom_Index
00012852                            
00012852 =00000030                  bom_time:	equ $30		; time of fuse
00012852 =00000034                  bom_origY:	equ $34		; original y-axis position
00012852 =0000003C                  bom_parent:	equ $3C		; address of parent object
00012852                            ; ===========================================================================
00012852                            
00012852                            Bom_Main:	; Routine 0
00012852 5428 0024                  		addq.b	#2,obRoutine(a0)
00012856 217C 0000 0000 0004        		move.l	#Map_Bomb,obMap(a0)
0001285E 317C 0400 0002             		move.w	#$400,obGfx(a0)
00012864 0028 0004 0001             		ori.b	#4,obRender(a0)
0001286A 117C 0003 0018             		move.b	#3,obPriority(a0)
00012870 117C 000C 0019             		move.b	#$C,obActWid(a0)
00012876 1028 0028                  		move.b	obSubtype(a0),d0
0001287A 6700                       		beq.s	loc_11A3C
0001287C 1140 0024                  		move.b	d0,obRoutine(a0)
00012880 4E75                       		rts	
00012882                            ; ===========================================================================
00012882                            
00012882                            loc_11A3C:
00012882 117C 009A 0020             		move.b	#$9A,obColType(a0)
00012888 0868 0000 0022             		bchg	#0,obStatus(a0)
0001288E                            
0001288E                            Bom_Action:	; Routine 2
0001288E 7000                       		moveq	#0,d0
00012890 1028 0025                  		move.b	ob2ndRout(a0),d0
00012894 323B 0000                  		move.w	@index(pc,d0.w),d1
00012898 4EBB 1000                  		jsr	@index(pc,d1.w)
0001289C 43F9 0000 0000             		lea	(Ani_Bomb).l,a1
000128A2 6100 8942                  		bsr.w	AnimateSprite
000128A6 6000 DBC6                  		bra.w	RememberState
000128AA                            ; ===========================================================================
000128AA 0000                       @index:		dc.w @walk-@index
000128AC 0000                       		dc.w @wait-@index
000128AE 0000                       		dc.w @explode-@index
000128B0                            ; ===========================================================================
000128B0                            
000128B0                            @walk:
000128B0 6100 0000                  		bsr.w	@chksonic
000128B4 5368 0030                  		subq.w	#1,bom_time(a0)	; subtract 1 from time delay
000128B8 6A00                       		bpl.s	@noflip		; if time remains, branch
000128BA 5428 0025                  		addq.b	#2,ob2ndRout(a0) ; goto @wait
000128BE 317C 05FF 0030             		move.w	#1535,bom_time(a0) ; set time delay to 25 seconds
000128C4 317C 0010 0010             		move.w	#$10,obVelX(a0)
000128CA 117C 0001 001C             		move.b	#1,obAnim(a0)	; use walking animation
000128D0 0868 0000 0022             		bchg	#0,obStatus(a0)
000128D6 6700                       		beq.s	@noflip
000128D8 4468 0010                  		neg.w	obVelX(a0)	; change direction
000128DC                            
000128DC                            	@noflip:
000128DC 4E75                       		rts	
000128DE                            ; ===========================================================================
000128DE                            
000128DE                            @wait:
000128DE 6100 0000                  		bsr.w	@chksonic
000128E2 5368 0030                  		subq.w	#1,bom_time(a0)	; subtract 1 from time delay
000128E6 6B00                       		bmi.s	@stopwalking	; if time expires, branch
000128E8 6100 BB18                  		bsr.w	SpeedToPos
000128EC 4E75                       		rts	
000128EE                            ; ===========================================================================
000128EE                            
000128EE                            	@stopwalking:
000128EE 5528 0025                  		subq.b	#2,ob2ndRout(a0)
000128F2 317C 00B3 0030             		move.w	#179,bom_time(a0) ; set time delay to 3 seconds
000128F8 4268 0010                  		clr.w	obVelX(a0)	; stop walking
000128FC 117C 0000 001C             		move.b	#0,obAnim(a0)	; use waiting animation
00012902 4E75                       		rts	
00012904                            ; ===========================================================================
00012904                            
00012904                            @explode:
00012904 5368 0030                  		subq.w	#1,bom_time(a0)	; subtract 1 from time delay
00012908 6A00                       		bpl.s	@noexplode	; if time remains, branch
0001290A 117C 003F 0000             		move.b	#id_ExplosionBomb,0(a0) ; change bomb into an explosion
00012910 117C 0000 0024             		move.b	#0,obRoutine(a0)
00012916                            
00012916                            	@noexplode:
00012916 4E75                       		rts	
00012918                            ; ===========================================================================
00012918                            
00012918                            @chksonic:
00012918 3038 D008                  		move.w	(v_player+obX).w,d0
0001291C 9068 0008                  		sub.w	obX(a0),d0
00012920 6400                       		bcc.s	@isleft
00012922 4440                       		neg.w	d0
00012924                            
00012924                            	@isleft:
00012924 0C40 0060                  		cmpi.w	#$60,d0		; is Sonic within $60 pixels?
00012928 6400                       		bcc.s	@outofrange	; if not, branch
0001292A 3038 D00C                  		move.w	(v_player+obY).w,d0
0001292E 9068 000C                  		sub.w	obY(a0),d0
00012932 6400                       		bcc.s	@isabove
00012934 4440                       		neg.w	d0
00012936                            
00012936                            	@isabove:
00012936 0C40 0060                  		cmpi.w	#$60,d0
0001293A 6400                       		bcc.s	@outofrange
0001293C 4A78 FE08                  		tst.w	(v_debuguse).w
00012940 6600                       		bne.s	@outofrange
00012942                            
00012942 117C 0004 0025             		move.b	#4,ob2ndRout(a0)
00012948 317C 008F 0030             		move.w	#143,bom_time(a0) ; set fuse time
0001294E 4268 0010                  		clr.w	obVelX(a0)
00012952 117C 0002 001C             		move.b	#2,obAnim(a0)	; use activated animation
00012958 6100 BF6C                  		bsr.w	FindNextFreeObj
0001295C 6600                       		bne.s	@outofrange
0001295E 137C 005F 0000             		move.b	#id_Bomb,0(a1)	; load fuse object
00012964 3368 0008 0008             		move.w	obX(a0),obX(a1)
0001296A 3368 000C 000C             		move.w	obY(a0),obY(a1)
00012970 3368 000C 0034             		move.w	obY(a0),bom_origY(a1)
00012976 1368 0022 0022             		move.b	obStatus(a0),obStatus(a1)
0001297C 137C 0004 0028             		move.b	#4,obSubtype(a1)
00012982 137C 0003 001C             		move.b	#3,obAnim(a1)
00012988 337C 0010 0012             		move.w	#$10,obVelY(a1)
0001298E 0828 0001 0022             		btst	#1,obStatus(a0)	; is bomb upside-down?
00012994 6700                       		beq.s	@normal		; if not, branch
00012996 4469 0012                  		neg.w	obVelY(a1)	; reverse direction for fuse
0001299A                            
0001299A                            	@normal:
0001299A 337C 008F 0030             		move.w	#143,bom_time(a1) ; set fuse time
000129A0 2348 003C                  		move.l	a0,bom_parent(a1)
000129A4                            
000129A4                            @outofrange:
000129A4 4E75                       		rts	
000129A6                            ; ===========================================================================
000129A6                            
000129A6                            Bom_Display:	; Routine 4
000129A6 6100                       		bsr.s	loc_11B70
000129A8 43F9 0000 0000             		lea	(Ani_Bomb).l,a1
000129AE 6100 8836                  		bsr.w	AnimateSprite
000129B2 6000 DABA                  		bra.w	RememberState
000129B6                            ; ===========================================================================
000129B6                            
000129B6                            loc_11B70:
000129B6 5368 0030                  		subq.w	#1,bom_time(a0)
000129BA 6B00                       		bmi.s	loc_11B7C
000129BC 6100 BA44                  		bsr.w	SpeedToPos
000129C0 4E75                       		rts	
000129C2                            ; ===========================================================================
000129C2                            
000129C2                            loc_11B7C:
000129C2 4268 0030                  		clr.w	bom_time(a0)
000129C6 4228 0024                  		clr.b	obRoutine(a0)
000129CA 3168 0034 000C             		move.w	bom_origY(a0),obY(a0)
000129D0 7203                       		moveq	#3,d1
000129D2 2248                       		movea.l	a0,a1
000129D4 45F9 0000 0000             		lea	(Bom_ShrSpeed).l,a2 ; load shrapnel speed data
000129DA 6000                       		bra.s	@makeshrapnel
000129DC                            ; ===========================================================================
000129DC                            
000129DC                            	@loop:
000129DC 6100 BEE8                  		bsr.w	FindNextFreeObj
000129E0 6600                       		bne.s	@fail
000129E2                            
000129E2                            @makeshrapnel:
000129E2 137C 005F 0000             		move.b	#id_Bomb,0(a1)	; load shrapnel	object
000129E8 3368 0008 0008             		move.w	obX(a0),obX(a1)
000129EE 3368 000C 000C             		move.w	obY(a0),obY(a1)
000129F4 137C 0006 0028             		move.b	#6,obSubtype(a1)
000129FA 137C 0004 001C             		move.b	#4,obAnim(a1)
00012A00 335A 0010                  		move.w	(a2)+,obVelX(a1)
00012A04 335A 0012                  		move.w	(a2)+,obVelY(a1)
00012A08 137C 0098 0020             		move.b	#$98,obColType(a1)
00012A0E 08E9 0007 0001             		bset	#7,obRender(a1)
00012A14                            
00012A14                            	@fail:
00012A14 51C9 FFC6                  		dbf	d1,@loop	; repeat 3 more	times
00012A18                            
00012A18 117C 0006 0024             		move.b	#6,obRoutine(a0)
00012A1E                            
00012A1E                            Bom_End:	; Routine 6
00012A1E 6100 B9E2                  		bsr.w	SpeedToPos
00012A22 0668 0018 0012             		addi.w	#$18,obVelY(a0)
00012A28 43F9 0000 0000             		lea	(Ani_Bomb).l,a1
00012A2E 6100 87B6                  		bsr.w	AnimateSprite
00012A32 4A28 0001                  		tst.b	obRender(a0)
00012A36 6A00 BA2C                  		bpl.w	DeleteObject
00012A3A 6000 B9EC                  		bra.w	DisplaySprite
00012A3E                            ; ===========================================================================
00012A3E FE00 FD00 FF00 FE00 0200+  Bom_ShrSpeed:	dc.w -$200, -$300, -$100, -$200, $200, -$300, $100, -$200
00012A3E FE00 FD00 FF00 FE00 0200+  Bom_ShrSpeed:	dc.w -$200, -$300, -$100, -$200, $200, -$300, $100, -$200
00012A4E                            		include	"_anim\Bomb Enemy.asm"
00012A4E                            ; ---------------------------------------------------------------------------
00012A4E                            ; Animation script - Bomb enemy
00012A4E                            ; ---------------------------------------------------------------------------
00012A4E 0000                       Ani_Bomb:	dc.w @stand-Ani_Bomb
00012A50 0000                       		dc.w @walk-Ani_Bomb
00012A52 0000                       		dc.w @activated-Ani_Bomb
00012A54 0000                       		dc.w @fuse-Ani_Bomb
00012A56 0000                       		dc.w @shrapnel-Ani_Bomb
00012A58 1301 00FF                  @stand:		dc.b $13, 1, 0,	afEnd
00012A5C 1305 0403 02FF             @walk:		dc.b $13, 5, 4,	3, 2, afEnd
00012A62 1307 06FF                  @activated:	dc.b $13, 7, 6,	afEnd
00012A66 0308 09FF                  @fuse:		dc.b 3,	8, 9, afEnd
00012A6A 030A 0BFF                  @shrapnel:	dc.b 3,	$A, $B,	afEnd
00012A6E                            		even
00012A6E                            		even
00012A6E                            Map_Bomb:	include	"_maps\Bomb Enemy.asm"
00012A6E                            ; ---------------------------------------------------------------------------
00012A6E                            ; Sprite mappings - walking bomb enemy (SLZ, SBZ)
00012A6E                            ; ---------------------------------------------------------------------------
00012A6E                            Map_Bomb_internal:
00012A6E 0000                       		dc.w @stand1-Map_Bomb_internal
00012A70 0000                       		dc.w @stand2-Map_Bomb_internal
00012A72 0000                       		dc.w @walk1-Map_Bomb_internal
00012A74 0000                       		dc.w @walk2-Map_Bomb_internal
00012A76 0000                       		dc.w @walk3-Map_Bomb_internal
00012A78 0000                       		dc.w @walk4-Map_Bomb_internal
00012A7A 0000                       		dc.w @activate1-Map_Bomb_internal
00012A7C 0000                       		dc.w @activate2-Map_Bomb_internal
00012A7E 0000                       		dc.w @fuse1-Map_Bomb_internal
00012A80 0000                       		dc.w @fuse2-Map_Bomb_internal
00012A82 0000                       		dc.w @shrapnel1-Map_Bomb_internal
00012A84 0000                       		dc.w @shrapnel2-Map_Bomb_internal
00012A86 03                         @stand1:	dc.b 3
00012A87 F10A 0000 F4               		dc.b $F1, $A, 0, 0, $F4	; bomb standing still
00012A8C 0908 0012 F4               		dc.b 9,	8, 0, $12, $F4
00012A91 E701 0021 FC               		dc.b $E7, 1, 0,	$21, $FC
00012A96 03                         @stand2:	dc.b 3
00012A97 F10A 0009 F4               		dc.b $F1, $A, 0, 9, $F4
00012A9C 0908 0012 F4               		dc.b 9,	8, 0, $12, $F4
00012AA1 E701 0021 FC               		dc.b $E7, 1, 0,	$21, $FC
00012AA6 03                         @walk1:		dc.b 3
00012AA7 F00A 0000 F4               		dc.b $F0, $A, 0, 0, $F4	; bomb walking
00012AAC 0808 0015 F4               		dc.b 8,	8, 0, $15, $F4
00012AB1 E601 0021 FC               		dc.b $E6, 1, 0,	$21, $FC
00012AB6 03                         @walk2:		dc.b 3
00012AB7 F10A 0009 F4               		dc.b $F1, $A, 0, 9, $F4
00012ABC 0908 0018 F4               		dc.b 9,	8, 0, $18, $F4
00012AC1 E701 0021 FC               		dc.b $E7, 1, 0,	$21, $FC
00012AC6 03                         @walk3:		dc.b 3
00012AC7 F00A 0000 F4               		dc.b $F0, $A, 0, 0, $F4
00012ACC 0808 001B F4               		dc.b 8,	8, 0, $1B, $F4
00012AD1 E601 0021 FC               		dc.b $E6, 1, 0,	$21, $FC
00012AD6 03                         @walk4:		dc.b 3
00012AD7 F10A 0009 F4               		dc.b $F1, $A, 0, 9, $F4
00012ADC 0908 001E F4               		dc.b 9,	8, 0, $1E, $F4
00012AE1 E701 0021 FC               		dc.b $E7, 1, 0,	$21, $FC
00012AE6 02                         @activate1:	dc.b 2
00012AE7 F10A 0000 F4               		dc.b $F1, $A, 0, 0, $F4	; bomb during detonation countdown
00012AEC 0908 0012 F4               		dc.b 9,	8, 0, $12, $F4
00012AF1 02                         @activate2:	dc.b 2
00012AF2 F10A 0009 F4               		dc.b $F1, $A, 0, 9, $F4
00012AF7 0908 0012 F4               		dc.b 9,	8, 0, $12, $F4
00012AFC 01                         @fuse1:		dc.b 1
00012AFD E701 0023 FC               		dc.b $E7, 1, 0,	$23, $FC ; fuse	(just before it	explodes)
00012B02 01                         @fuse2:		dc.b 1
00012B03 E701 0025 FC               		dc.b $E7, 1, 0,	$25, $FC
00012B08 01                         @shrapnel1:	dc.b 1
00012B09 FC00 0027 FC               		dc.b $FC, 0, 0,	$27, $FC ; shrapnel (after it exploded)
00012B0E 01                         @shrapnel2:	dc.b 1
00012B0F FC00 0028 FC               		dc.b $FC, 0, 0,	$28, $FC
00012B14                            		even
00012B14                            		even
00012B14                            
00012B14                            		include	"_incObj\60 Orbinaut.asm"
00012B14                            ; ---------------------------------------------------------------------------
00012B14                            ; Object 60 - Orbinaut enemy (LZ, SLZ, SBZ)
00012B14                            ; ---------------------------------------------------------------------------
00012B14                            
00012B14                            Orbinaut:
00012B14 7000                       		moveq	#0,d0
00012B16 1028 0024                  		move.b	obRoutine(a0),d0
00012B1A 323B 0000                  		move.w	Orb_Index(pc,d0.w),d1
00012B1E 4EFB 1000                  		jmp	Orb_Index(pc,d1.w)
00012B22                            ; ===========================================================================
00012B22 0000                       Orb_Index:	dc.w Orb_Main-Orb_Index
00012B24 0000                       		dc.w Orb_ChkSonic-Orb_Index
00012B26 0000                       		dc.w Orb_Display-Orb_Index
00012B28 0000                       		dc.w Orb_MoveOrb-Orb_Index
00012B2A 0000                       		dc.w Orb_ChkDel2-Orb_Index
00012B2C                            
00012B2C =0000003C                  orb_parent:	equ $3C		; address of parent object
00012B2C                            ; ===========================================================================
00012B2C                            
00012B2C                            Orb_Main:	; Routine 0
00012B2C 217C 0000 0000 0004        		move.l	#Map_Orb,obMap(a0)
00012B34 317C 0429 0002             		move.w	#$429,obGfx(a0)	; SBZ specific code
00012B3A 0C38 0005 FE10             		cmpi.b	#id_SBZ,(v_zone).w ; check if level is SBZ
00012B40 6700                       		beq.s	@isscrap
00012B42 317C 2429 0002             		move.w	#$2429,obGfx(a0) ; SLZ specific code
00012B48                            
00012B48                            	@isscrap:
00012B48 0C38 0001 FE10             		cmpi.b	#id_LZ,(v_zone).w ; check if level is LZ
00012B4E 6600                       		bne.s	@notlabyrinth
00012B50 317C 0467 0002             		move.w	#$467,obGfx(a0)	; LZ specific code
00012B56                            
00012B56                            	@notlabyrinth:
00012B56 0028 0004 0001             		ori.b	#4,obRender(a0)
00012B5C 117C 0004 0018             		move.b	#4,obPriority(a0)
00012B62 117C 000B 0020             		move.b	#$B,obColType(a0)
00012B68 117C 000C 0019             		move.b	#$C,obActWid(a0)
00012B6E 7400                       		moveq	#0,d2
00012B70 45E8 0037                  		lea	$37(a0),a2
00012B74 264A                       		movea.l	a2,a3
00012B76 524A                       		addq.w	#1,a2
00012B78 7203                       		moveq	#3,d1
00012B7A                            
00012B7A                            @makesatellites:
00012B7A 6100 BD4A                  		bsr.w	FindNextFreeObj
00012B7E 6600                       		bne.s	@fail
00012B80 5213                       		addq.b	#1,(a3)
00012B82 3A09                       		move.w	a1,d5
00012B84 0445 D000                  		subi.w	#$D000,d5
00012B88 EC4D                       		lsr.w	#6,d5
00012B8A 0245 007F                  		andi.w	#$7F,d5
00012B8E 14C5                       		move.b	d5,(a2)+
00012B90 1368 0000 0000             		move.b	0(a0),0(a1)	; load spiked orb object
00012B96 137C 0006 0024             		move.b	#6,obRoutine(a1) ; use Orb_MoveOrb routine
00012B9C 2368 0004 0004             		move.l	obMap(a0),obMap(a1)
00012BA2 3368 0002 0002             		move.w	obGfx(a0),obGfx(a1)
00012BA8 0029 0004 0001             		ori.b	#4,obRender(a1)
00012BAE 137C 0004 0018             		move.b	#4,obPriority(a1)
00012BB4 137C 0008 0019             		move.b	#8,obActWid(a1)
00012BBA 137C 0003 001A             		move.b	#3,obFrame(a1)
00012BC0 137C 0098 0020             		move.b	#$98,obColType(a1)
00012BC6 1342 0026                  		move.b	d2,obAngle(a1)
00012BCA 0602 0040                  		addi.b	#$40,d2
00012BCE 2348 003C                  		move.l	a0,orb_parent(a1)
00012BD2 51C9 FFA6                  		dbf	d1,@makesatellites ; repeat sequence 3 more times
00012BD6                            
00012BD6                            	@fail:
00012BD6 7001                       		moveq	#1,d0
00012BD8 0828 0000 0022             		btst	#0,obStatus(a0)	; is orbinaut facing left?
00012BDE 6700                       		beq.s	@noflip		; if not, branch
00012BE0 4440                       		neg.w	d0
00012BE2                            
00012BE2                            	@noflip:
00012BE2 1140 0036                  		move.b	d0,$36(a0)
00012BE6 1168 0028 0024             		move.b	obSubtype(a0),obRoutine(a0) ; if type is 02, skip Orb_ChkSonic
00012BEC 5428 0024                  		addq.b	#2,obRoutine(a0)
00012BF0 317C FFC0 0010             		move.w	#-$40,obVelX(a0) ; move orbinaut to the left
00012BF6 0828 0000 0022             		btst	#0,obStatus(a0)	; is orbinaut facing left??
00012BFC 6700                       		beq.s	@noflip2	; if not, branch
00012BFE 4468 0010                  		neg.w	obVelX(a0)	; move orbinaut	to the right
00012C02                            
00012C02                            	@noflip2:
00012C02 4E75                       		rts	
00012C04                            ; ===========================================================================
00012C04                            
00012C04                            Orb_ChkSonic:	; Routine 2
00012C04 3038 D008                  		move.w	(v_player+obX).w,d0
00012C08 9068 0008                  		sub.w	obX(a0),d0	; is Sonic to the right of the orbinaut?
00012C0C 6400                       		bcc.s	@isright	; if yes, branch
00012C0E 4440                       		neg.w	d0
00012C10                            
00012C10                            	@isright:
00012C10 0C40 00A0                  		cmpi.w	#$A0,d0		; is Sonic within $A0 pixels of	orbinaut?
00012C14 6400                       		bcc.s	@animate	; if not, branch
00012C16 3038 D00C                  		move.w	(v_player+obY).w,d0
00012C1A 9068 000C                  		sub.w	obY(a0),d0	; is Sonic above the orbinaut?
00012C1E 6400                       		bcc.s	@isabove	; if yes, branch
00012C20 4440                       		neg.w	d0
00012C22                            
00012C22                            	@isabove:
00012C22 0C40 0050                  		cmpi.w	#$50,d0		; is Sonic within $50 pixels of	orbinaut?
00012C26 6400                       		bcc.s	@animate	; if not, branch
00012C28 4A78 FE08                  		tst.w	(v_debuguse).w	; is debug mode	on?
00012C2C 6600                       		bne.s	@animate	; if yes, branch
00012C2E 117C 0001 001C             		move.b	#1,obAnim(a0)	; use "angry" animation
00012C34                            
00012C34                            @animate:
00012C34 43F9 0000 0000             		lea	(Ani_Orb).l,a1
00012C3A 6100 85AA                  		bsr.w	AnimateSprite
00012C3E 6000 0000                  		bra.w	Orb_ChkDel
00012C42                            ; ===========================================================================
00012C42                            
00012C42                            Orb_Display:	; Routine 4
00012C42 6100 B7BE                  		bsr.w	SpeedToPos
00012C46                            
00012C46                            Orb_ChkDel:
00012C64 6000 B7C2                  		bra.w	DisplaySprite
00012C68                            
00012C68                            @chkgone:
00012C68 45F8 FC00                  		lea	(v_objstate).w,a2
00012C6C 7000                       		moveq	#0,d0
00012C6E 1028 0023                  		move.b	obRespawnNo(a0),d0
00012C72 6700                       		beq.s	loc_11E34
00012C74 08B2 0007 0002             		bclr	#7,2(a2,d0.w)
00012C7A                            
00012C7A                            loc_11E34:
00012C7A 45E8 0037                  		lea	$37(a0),a2
00012C7E 7400                       		moveq	#0,d2
00012C80 141A                       		move.b	(a2)+,d2
00012C82 5342                       		subq.w	#1,d2
00012C84 6500                       		bcs.s	Orb_Delete
00012C86                            
00012C86                            loc_11E40:
00012C86 7000                       		moveq	#0,d0
00012C88 101A                       		move.b	(a2)+,d0
00012C8A ED48                       		lsl.w	#6,d0
00012C8C 0680 00FF D000             		addi.l	#v_objspace&$FFFFFF,d0
00012C92 2240                       		movea.l	d0,a1
00012C94 6100 B7D0                  		bsr.w	DeleteChild
00012C98 51CA FFEC                  		dbf	d2,loc_11E40
00012C9C                            
00012C9C                            Orb_Delete:
00012C9C 6000 B7C6                  		bra.w	DeleteObject
00012CA0                            ; ===========================================================================
00012CA0                            
00012CA0                            Orb_MoveOrb:	; Routine 6
00012CA0 2268 003C                  		movea.l	orb_parent(a0),a1
00012CA4 0C29 0060 0000             		cmpi.b	#id_Orbinaut,0(a1) ; does parent object still exist?
00012CAA 6600 B7B8                  		bne.w	DeleteObject	; if not, delete
00012CAE 0C29 0002 001A             		cmpi.b	#2,obFrame(a1)	; is orbinaut angry?
00012CB4 6600                       		bne.s	@circle		; if not, branch
00012CB6 0C28 0040 0026             		cmpi.b	#$40,obAngle(a0) ; is spikeorb directly under the orbinaut?
00012CBC 6600                       		bne.s	@circle		; if not, branch
00012CBE 5428 0024                  		addq.b	#2,obRoutine(a0)
00012CC2 5329 0037                  		subq.b	#1,$37(a1)
00012CC6 6600                       		bne.s	@fire
00012CC8 5429 0024                  		addq.b	#2,obRoutine(a1)
00012CCC                            
00012CCC                            	@fire:
00012CCC 317C FE00 0010             		move.w	#-$200,obVelX(a0) ; move orb to the left (quickly)
00012CD2 0829 0000 0022             		btst	#0,obStatus(a1)
00012CD8 6700                       		beq.s	@noflip
00012CDA 4468 0010                  		neg.w	obVelX(a0)
00012CDE                            
00012CDE                            	@noflip:
00012CDE 6000 B748                  		bra.w	DisplaySprite
00012CE2                            ; ===========================================================================
00012CE2                            
00012CE2                            @circle:
00012CE2 1028 0026                  		move.b	obAngle(a0),d0
00012CE6 4EB9 0000 27EC             		jsr	(CalcSine).l
00012CEC E841                       		asr.w	#4,d1
00012CEE D269 0008                  		add.w	obX(a1),d1
00012CF2 3141 0008                  		move.w	d1,obX(a0)
00012CF6 E840                       		asr.w	#4,d0
00012CF8 D069 000C                  		add.w	obY(a1),d0
00012CFC 3140 000C                  		move.w	d0,obY(a0)
00012D00 1029 0036                  		move.b	$36(a1),d0
00012D04 D128 0026                  		add.b	d0,obAngle(a0)
00012D08 6000 B71E                  		bra.w	DisplaySprite
00012D0C                            ; ===========================================================================
00012D0C                            
00012D0C                            Orb_ChkDel2:	; Routine 8
00012D0C 6100 B6F4                  		bsr.w	SpeedToPos
00012D10 4A28 0001                  		tst.b	obRender(a0)
00012D14 6A00 B74E                  		bpl.w	DeleteObject
00012D18 6000 B70E                  		bra.w	DisplaySprite
00012D18 6000 B70E                  		bra.w	DisplaySprite
00012D1C                            		include	"_anim\Orbinaut.asm"
00012D1C                            ; ---------------------------------------------------------------------------
00012D1C                            ; Animation script - Orbinaut enemy
00012D1C                            ; ---------------------------------------------------------------------------
00012D1C 0000                       Ani_Orb:	dc.w @normal-Ani_Orb
00012D1E 0000                       		dc.w @angers-Ani_Orb
00012D20 0F00 FF                    @normal:	dc.b $F, 0, afEnd
00012D24 00                         		even
00012D24 0F01 02FE 01               @angers:	dc.b $F, 1, 2, afBack, 1
00012D2A 00                         		even
00012D2A 00                         		even
00012D2A                            Map_Orb:	include	"_maps\Orbinaut.asm"
00012D2A                            ; ---------------------------------------------------------------------------
00012D2A                            ; Sprite mappings - Orbinaut enemy (LZ,	SLZ, SBZ)
00012D2A                            ; ---------------------------------------------------------------------------
00012D2A                            Map_Orb_internal:
00012D2A 0000                       		dc.w @normal-Map_Orb_internal
00012D2C 0000                       		dc.w @medium-Map_Orb_internal
00012D2E 0000                       		dc.w @angry-Map_Orb_internal
00012D30 0000                       		dc.w @spikeball-Map_Orb_internal
00012D32 01                         @normal:	dc.b 1
00012D33 F40A 0000 F4               		dc.b $F4, $A, 0, 0, $F4
00012D38 01                         @medium:	dc.b 1
00012D39 F40A 2009 F4               		dc.b $F4, $A, $20, 9, $F4
00012D3E 01                         @angry:		dc.b 1
00012D3F F40A 0012 F4               		dc.b $F4, $A, 0, $12, $F4
00012D44 01                         @spikeball:	dc.b 1
00012D45 F805 001B F8               		dc.b $F8, 5, 0,	$1B, $F8
00012D4A                            		even
00012D4A                            		even
00012D4A                            
00012D4A                            		include	"_incObj\16 Harpoon.asm"
00012D4A                            ; ---------------------------------------------------------------------------
00012D4A                            ; Object 16 - harpoon (LZ)
00012D4A                            ; ---------------------------------------------------------------------------
00012D4A                            
00012D4A                            Harpoon:
00012D4A 7000                       		moveq	#0,d0
00012D4C 1028 0024                  		move.b	obRoutine(a0),d0
00012D50 323B 0000                  		move.w	Harp_Index(pc,d0.w),d1
00012D54 4EFB 1000                  		jmp	Harp_Index(pc,d1.w)
00012D58                            ; ===========================================================================
00012D58 0000                       Harp_Index:	dc.w Harp_Main-Harp_Index
00012D5A 0000                       		dc.w Harp_Move-Harp_Index
00012D5C 0000                       		dc.w Harp_Wait-Harp_Index
00012D5E                            
00012D5E =00000030                  harp_time:	equ $30		; time between stabbing/retracting
00012D5E                            ; ===========================================================================
00012D5E                            
00012D5E                            Harp_Main:	; Routine 0
00012D5E 5428 0024                  		addq.b	#2,obRoutine(a0)
00012D62 217C 0000 0000 0004        		move.l	#Map_Harp,obMap(a0)
00012D6A 317C 03CC 0002             		move.w	#$3CC,obGfx(a0)
00012D70 0028 0004 0001             		ori.b	#4,obRender(a0)
00012D76 117C 0004 0018             		move.b	#4,obPriority(a0)
00012D7C 1168 0028 001C             		move.b	obSubtype(a0),obAnim(a0) ; get type (vert/horiz)
00012D82 117C 0014 0019             		move.b	#$14,obActWid(a0)
00012D88 317C 003C 0030             		move.w	#60,harp_time(a0) ; set time to 1 second
00012D8E                            
00012D8E                            Harp_Move:	; Routine 2
00012D8E 43F9 0000 0000             		lea	(Ani_Harp).l,a1
00012D94 6100 8450                  		bsr.w	AnimateSprite
00012D98 7000                       		moveq	#0,d0
00012D9A 1028 001A                  		move.b	obFrame(a0),d0	; get frame number
00012D9E 117B 0000 0020             		move.b	@types(pc,d0.w),obColType(a0) ; get collision type
00012DA4 6000 D6C8                  		bra.w	RememberState
00012DA8                            
00012DA8                            	@types:
00012DA8 9B9C 9D9E 9FA0             		dc.b $9B, $9C, $9D, $9E, $9F, $A0
00012DAE                            		even
00012DAE                            
00012DAE                            Harp_Wait:	; Routine 4
00012DAE 5368 0030                  		subq.w	#1,harp_time(a0) ; decrement timer
00012DB2 6A00                       		bpl.s	@chkdel		; branch if time remains
00012DB4 317C 003C 0030             		move.w	#60,harp_time(a0) ; reset timer
00012DBA 5528 0024                  		subq.b	#2,obRoutine(a0) ; run "Harp_Move" subroutine
00012DBE 0868 0000 001C             		bchg	#0,obAnim(a0)	; reverse animation
00012DC4                            
00012DC4                            	@chkdel:
00012DC4 6000 D6A8                  		bra.w	RememberState
00012DC4 6000 D6A8                  		bra.w	RememberState
00012DC8                            		include	"_anim\Harpoon.asm"
00012DC8                            ; ---------------------------------------------------------------------------
00012DC8                            ; Animation script - harpoon (LZ)
00012DC8                            ; ---------------------------------------------------------------------------
00012DC8 0000                       Ani_Harp:	dc.w @h_extending-Ani_Harp
00012DCA 0000                       		dc.w @h_retracting-Ani_Harp
00012DCC 0000                       		dc.w @v_extending-Ani_Harp
00012DCE 0000                       		dc.w @v_retracting-Ani_Harp
00012DD0 0301 02FC                  @h_extending:	dc.b 3,	1, 2, afRoutine
00012DD4 0301 00FC                  @h_retracting:	dc.b 3,	1, 0, afRoutine
00012DD8 0304 05FC                  @v_extending:	dc.b 3,	4, 5, afRoutine
00012DDC 0304 03FC                  @v_retracting:	dc.b 3,	4, 3, afRoutine
00012DE0                            		even
00012DE0                            		even
00012DE0                            Map_Harp:	include	"_maps\Harpoon.asm"
00012DE0                            ; ---------------------------------------------------------------------------
00012DE0                            ; Sprite mappings - harpoon (LZ)
00012DE0                            ; ---------------------------------------------------------------------------
00012DE0                            Map_Harp_internal:
00012DE0 0000                       		dc.w @h_retracted-Map_Harp_internal
00012DE2 0000                       		dc.w @h_middle-Map_Harp_internal
00012DE4 0000                       		dc.w @h_extended-Map_Harp_internal
00012DE6 0000                       		dc.w @v_retracted-Map_Harp_internal
00012DE8 0000                       		dc.w @v_middle-Map_Harp_internal
00012DEA 0000                       		dc.w @v_extended-Map_Harp_internal
00012DEC 01                         @h_retracted:	dc.b 1
00012DED FC04 0000 F8               		dc.b $FC, 4, 0,	0, $F8
00012DF2 01                         @h_middle:	dc.b 1
00012DF3 FC0C 0002 F8               		dc.b $FC, $C, 0, 2, $F8
00012DF8 02                         @h_extended:	dc.b 2
00012DF9 FC08 0006 F8               		dc.b $FC, 8, 0,	6, $F8
00012DFE FC08 0003 10               		dc.b $FC, 8, 0,	3, $10
00012E03 01                         @v_retracted:	dc.b 1
00012E04 F801 0009 FC               		dc.b $F8, 1, 0,	9, $FC
00012E09 01                         @v_middle:	dc.b 1
00012E0A E803 000B FC               		dc.b $E8, 3, 0,	$B, $FC
00012E0F 02                         @v_extended:	dc.b 2
00012E10 D802 000B FC               		dc.b $D8, 2, 0,	$B, $FC
00012E15 F002 000F FC               		dc.b $F0, 2, 0,	$F, $FC
00012E1A                            		even
00012E1A                            		even
00012E1A                            		include	"_incObj\61 LZ Blocks.asm"
00012E1A                            ; ---------------------------------------------------------------------------
00012E1A                            ; Object 61 - blocks (LZ)
00012E1A                            ; ---------------------------------------------------------------------------
00012E1A                            
00012E1A                            LabyrinthBlock:
00012E1A 7000                       		moveq	#0,d0
00012E1C 1028 0024                  		move.b	obRoutine(a0),d0
00012E20 323B 0000                  		move.w	LBlk_Index(pc,d0.w),d1
00012E24 4EFB 1000                  		jmp	LBlk_Index(pc,d1.w)
00012E28                            ; ===========================================================================
00012E28 0000                       LBlk_Index:	dc.w LBlk_Main-LBlk_Index
00012E2A 0000                       		dc.w LBlk_Action-LBlk_Index
00012E2C                            
00012E2C 1010                       LBlk_Var:	dc.b $10, $10		; width, height
00012E2E 200C                       		dc.b $20, $C
00012E30 1010                       		dc.b $10, $10
00012E32 1010                       		dc.b $10, $10
00012E34                            
00012E34 =00000016                  lblk_height:	equ $16		; block height
00012E34 =00000034                  lblk_origX:	equ $34		; original x-axis position
00012E34 =00000030                  lblk_origY:	equ $30		; original y-axis position
00012E34 =00000036                  lblk_time:	equ $36		; time delay for block movement
00012E34 =00000038                  lblk_untouched:	equ $38		; flag block as untouched
00012E34                            ; ===========================================================================
00012E34                            
00012E34                            LBlk_Main:	; Routine 0
00012E34 5428 0024                  		addq.b	#2,obRoutine(a0)
00012E38 217C 0000 0000 0004        		move.l	#Map_LBlock,obMap(a0)
00012E40 317C 43E6 0002             		move.w	#$43E6,obGfx(a0)
00012E46 117C 0004 0001             		move.b	#4,obRender(a0)
00012E4C 117C 0003 0018             		move.b	#3,obPriority(a0)
00012E52 7000                       		moveq	#0,d0
00012E54 1028 0028                  		move.b	obSubtype(a0),d0 ; get block type
00012E58 E648                       		lsr.w	#3,d0		; read only the 1st digit
00012E5A 0240 000E                  		andi.w	#$E,d0
00012E5E 45FB 00CC                  		lea	LBlk_Var(pc,d0.w),a2
00012E62 115A 0019                  		move.b	(a2)+,obActWid(a0) ; set width
00012E66 1152 0016                  		move.b	(a2),lblk_height(a0) ; set height
00012E6A E248                       		lsr.w	#1,d0
00012E6C 1140 001A                  		move.b	d0,obFrame(a0)
00012E70 3168 0008 0034             		move.w	obX(a0),lblk_origX(a0)
00012E76 3168 000C 0030             		move.w	obY(a0),lblk_origY(a0)
00012E7C 1028 0028                  		move.b	obSubtype(a0),d0 ; get block type
00012E80 0200 000F                  		andi.b	#$F,d0		; read only the 2nd digit
00012E84 6700                       		beq.s	LBlk_Action	; branch if 0
00012E86 0C00 0007                  		cmpi.b	#7,d0
00012E8A 6700                       		beq.s	LBlk_Action	; branch if 7
00012E8C 117C 0001 0038             		move.b	#1,lblk_untouched(a0)
00012E92                            
00012E92                            LBlk_Action:	; Routine 2
00012E92 3F28 0008                  		move.w	obX(a0),-(sp)
00012E96 7000                       		moveq	#0,d0
00012E98 1028 0028                  		move.b	obSubtype(a0),d0
00012E9C 0240 000F                  		andi.w	#$F,d0
00012EA0 D040                       		add.w	d0,d0
00012EA2 323B 0000                  		move.w	@index(pc,d0.w),d1
00012EA6 4EBB 1000                  		jsr	@index(pc,d1.w)
00012EAA 381F                       		move.w	(sp)+,d4
00012EAC 4A28 0001                  		tst.b	obRender(a0)
00012EB0 6A00                       		bpl.s	@chkdel
00012EB2 7200                       		moveq	#0,d1
00012EB4 1228 0019                  		move.b	obActWid(a0),d1
00012EB8 0641 000B                  		addi.w	#$B,d1
00012EBC 7400                       		moveq	#0,d2
00012EBE 1428 0016                  		move.b	lblk_height(a0),d2
00012EC2 3602                       		move.w	d2,d3
00012EC4 5243                       		addq.w	#1,d3
00012EC6 6100 D8D0                  		bsr.w	SolidObject
00012ECA 1144 003F                  		move.b	d4,$3F(a0)
00012ECE 6100 0000                  		bsr.w	loc_12180
00012ED2                            
00012ED2                            @chkdel:
00012EF0 6000 B536                  		bra.w	DisplaySprite
00012EF4                            ; ===========================================================================
00012EF4 0000 0000                  @index:		dc.w @type00-@index, @type01-@index
00012EF8 0000 0000                  		dc.w @type02-@index, @type03-@index
00012EFC 0000 0000                  		dc.w @type04-@index, @type05-@index
00012F00 0000 0000                  		dc.w @type06-@index, @type07-@index
00012F04                            ; ===========================================================================
00012F04                            
00012F04                            @type00:
00012F04 4E75                       		rts	
00012F06                            ; ===========================================================================
00012F06                            
00012F06                            @type01:
00012F06                            @type03:
00012F06 4A68 0036                  		tst.w	lblk_time(a0)	; does time remain?
00012F0A 6600                       		bne.s	@wait01		; if yes, branch
00012F0C 0828 0003 0022             		btst	#3,obStatus(a0)	; is Sonic standing on the object?
00012F12 6700                       		beq.s	@donothing01	; if not, branch
00012F14 317C 001E 0036             		move.w	#30,lblk_time(a0) ; wait for half second
00012F1A                            
00012F1A                            	@donothing01:
00012F1A 4E75                       		rts	
00012F1C                            ; ===========================================================================
00012F1C                            
00012F1C                            	@wait01:
00012F1C 5368 0036                  		subq.w	#1,lblk_time(a0); decrement waiting time
00012F20 66F8                       		bne.s	@donothing01	; if time remains, branch
00012F22 5228 0028                  		addq.b	#1,obSubtype(a0) ; goto @type02 or @type04
00012F26 4228 0038                  		clr.b	lblk_untouched(a0) ; flag block as touched
00012F2A 4E75                       		rts	
00012F2C                            ; ===========================================================================
00012F2C                            
00012F2C                            @type02:
00012F2C                            @type06:
00012F2C 6100 B4D4                  		bsr.w	SpeedToPos
00012F30 5068 0012                  		addq.w	#8,obVelY(a0)	; make block fall
00012F34 6100 0000                  		bsr.w	ObjFloorDist
00012F38 4A41                       		tst.w	d1		; has block hit the floor?
00012F3A 6A00 0000                  		bpl.w	@nofloor02	; if not, branch
00012F3E 5241                       		addq.w	#1,d1
00012F40 D368 000C                  		add.w	d1,obY(a0)
00012F44 4268 0012                  		clr.w	obVelY(a0)	; stop when it touches the floor
00012F48 4228 0028                  		clr.b	obSubtype(a0)	; set type to 00 (non-moving type)
00012F4C                            
00012F4C                            	@nofloor02:
00012F4C 4E75                       		rts	
00012F4E                            ; ===========================================================================
00012F4E                            
00012F4E                            @type04:
00012F4E 6100 B4B2                  		bsr.w	SpeedToPos
00012F52 5168 0012                  		subq.w	#8,obVelY(a0)	; make block rise
00012F56 6100 0000                  		bsr.w	ObjHitCeiling
00012F5A 4A41                       		tst.w	d1		; has block hit the ceiling?
00012F5C 6A00 0000                  		bpl.w	@noceiling04	; if not, branch
00012F60 9368 000C                  		sub.w	d1,obY(a0)
00012F64 4268 0012                  		clr.w	obVelY(a0)	; stop when it touches the ceiling
00012F68 4228 0028                  		clr.b	obSubtype(a0)	; set type to 00 (non-moving type)
00012F6C                            
00012F6C                            	@noceiling04:
00012F6C 4E75                       		rts	
00012F6E                            ; ===========================================================================
00012F6E                            
00012F6E                            @type05:
00012F6E 0C28 0001 003F             		cmpi.b	#1,$3F(a0)	; is Sonic touching the	block?
00012F74 6600                       		bne.s	@notouch05	; if not, branch
00012F76 5228 0028                  		addq.b	#1,obSubtype(a0) ; goto @type06
00012F7A 4228 0038                  		clr.b	lblk_untouched(a0)
00012F7E                            
00012F7E                            	@notouch05:
00012F7E 4E75                       		rts	
00012F80                            ; ===========================================================================
00012F80                            
00012F80                            @type07:
00012F80 3038 F646                  		move.w	(v_waterpos1).w,d0
00012F84 9068 000C                  		sub.w	obY(a0),d0	; is block level with water?
00012F88 6700                       		beq.s	@stop07		; if yes, branch
00012F8A 6400                       		bcc.s	@fall07		; branch if block is above water
00012F8C 0C40 FFFE                  		cmpi.w	#-2,d0
00012F90 6C00                       		bge.s	@loc_1214E
00012F92 70FE                       		moveq	#-2,d0
00012F94                            
00012F94                            	@loc_1214E:
00012F94 D168 000C                  		add.w	d0,obY(a0)	; make the block rise with water level
00012F98 6100 0000                  		bsr.w	ObjHitCeiling
00012F9C 4A41                       		tst.w	d1		; has block hit the ceiling?
00012F9E 6A00 0000                  		bpl.w	@noceiling07	; if not, branch
00012FA2 9368 000C                  		sub.w	d1,obY(a0)	; stop block
00012FA6                            
00012FA6                            	@noceiling07:
00012FA6 4E75                       		rts	
00012FA8                            ; ===========================================================================
00012FA8                            
00012FA8                            @fall07:
00012FA8 0C40 0002                  		cmpi.w	#2,d0
00012FAC 6F00                       		ble.s	@loc_1216A
00012FAE 7002                       		moveq	#2,d0
00012FB0                            
00012FB0                            	@loc_1216A:
00012FB0 D168 000C                  		add.w	d0,obY(a0)	; make the block sink with water level
00012FB4 6100 0000                  		bsr.w	ObjFloorDist
00012FB8 4A41                       		tst.w	d1
00012FBA 6A00 0000                  		bpl.w	@stop07
00012FBE 5241                       		addq.w	#1,d1
00012FC0 D368 000C                  		add.w	d1,obY(a0)
00012FC4                            
00012FC4                            	@stop07:
00012FC4 4E75                       		rts	
00012FC6                            ; ===========================================================================
00012FC6                            
00012FC6                            loc_12180:
00012FC6 4A28 0038                  		tst.b	lblk_untouched(a0) ; has block been stood on or touched?
00012FCA 6700                       		beq.s	locret_121C0	; if yes, branch
00012FCC 0828 0003 0022             		btst	#3,obStatus(a0)	; is Sonic standing on it now?
00012FD2 6600                       		bne.s	loc_1219A	; if yes, branch
00012FD4 4A28 003E                  		tst.b	$3E(a0)
00012FD8 6700                       		beq.s	locret_121C0
00012FDA 5928 003E                  		subq.b	#4,$3E(a0)
00012FDE 6000                       		bra.s	loc_121A6
00012FE0                            ; ===========================================================================
00012FE0                            
00012FE0                            loc_1219A:
00012FE0 0C28 0040 003E             		cmpi.b	#$40,$3E(a0)
00012FE6 6700                       		beq.s	locret_121C0
00012FE8 5828 003E                  		addq.b	#4,$3E(a0)
00012FEC                            
00012FEC                            loc_121A6:
00012FEC 1028 003E                  		move.b	$3E(a0),d0
00012FF0 4EB9 0000 27EC             		jsr	(CalcSine).l
00012FF6 323C 0400                  		move.w	#$400,d1
00012FFA C1C1                       		muls.w	d1,d0
00012FFC 4840                       		swap	d0
00012FFE D068 0030                  		add.w	lblk_origY(a0),d0
00013002 3140 000C                  		move.w	d0,obY(a0)
00013006                            
00013006                            locret_121C0:
00013006 4E75                       		rts	
00013006 4E75                       		rts	
00013008                            Map_LBlock:	include	"_maps\LZ Blocks.asm"
00013008                            ; ---------------------------------------------------------------------------
00013008                            ; Sprite mappings - blocks (LZ)
00013008                            ; ---------------------------------------------------------------------------
00013008                            Map_LBlock_internal:
00013008 0000                       		dc.w @sinkblock-Map_LBlock_internal
0001300A 0000                       		dc.w @riseplatform-Map_LBlock_internal
0001300C 0000                       		dc.w @cork-Map_LBlock_internal
0001300E 0000                       		dc.w @block-Map_LBlock_internal
00013010 01                         @sinkblock:	dc.b 1
00013011 F00F 0000 F0               		dc.b $F0, $F, 0, 0, $F0	; block, sinks when stood on
00013016 02                         @riseplatform:	dc.b 2
00013017 F40E 0069 E0               		dc.b $F4, $E, 0, $69, $E0 ; platform, rises when stood on
0001301C F40E 0075 00               		dc.b $F4, $E, 0, $75, 0
00013021 01                         @cork:		dc.b 1
00013022 F00F 011A F0               		dc.b $F0, $F, 1, $1A, $F0 ; cork, floats on water
00013027 01                         @block:		dc.b 1
00013028 F00F FDFA F0               		dc.b $F0, $F, $FD, $FA,	$F0 ; block
0001302E 00                         		even
0001302E 00                         		even
0001302E                            		include	"_incObj\62 Gargoyle.asm"
0001302E                            ; ---------------------------------------------------------------------------
0001302E                            ; Object 62 - gargoyle head (LZ)
0001302E                            ; ---------------------------------------------------------------------------
0001302E                            
0001302E                            Gargoyle:
0001302E 7000                       		moveq	#0,d0
00013030 1028 0024                  		move.b	obRoutine(a0),d0
00013034 323B 0000                  		move.w	Gar_Index(pc,d0.w),d1
00013038 4EBB 1000                  		jsr	Gar_Index(pc,d1.w)
0001303C 6000 D430                  		bra.w	RememberState
00013040                            ; ===========================================================================
00013040 0000                       Gar_Index:	dc.w Gar_Main-Gar_Index
00013042 0000                       		dc.w Gar_MakeFire-Gar_Index
00013044 0000                       		dc.w Gar_FireBall-Gar_Index
00013046 0000                       		dc.w Gar_AniFire-Gar_Index
00013048                            
00013048 1E3C 5A78 96B4 D2F0        Gar_SpitRate:	dc.b 30, 60, 90, 120, 150, 180,	210, 240
00013050                            ; ===========================================================================
00013050                            
00013050                            Gar_Main:	; Routine 0
00013050 5428 0024                  		addq.b	#2,obRoutine(a0)
00013054 217C 0000 0000 0004        		move.l	#Map_Gar,obMap(a0)
0001305C 317C 42E9 0002             		move.w	#$42E9,obGfx(a0)
00013062 0028 0004 0001             		ori.b	#4,obRender(a0)
00013068 117C 0003 0018             		move.b	#3,obPriority(a0)
0001306E 117C 0010 0019             		move.b	#$10,obActWid(a0)
00013074 1028 0028                  		move.b	obSubtype(a0),d0 ; get object type
00013078 0240 000F                  		andi.w	#$F,d0		; read only the	2nd digit
0001307C 117B 00CA 001F             		move.b	Gar_SpitRate(pc,d0.w),obDelayAni(a0) ; set fireball spit rate
00013082 1168 001F 001E             		move.b	obDelayAni(a0),obTimeFrame(a0)
00013088 0228 000F 0028             		andi.b	#$F,obSubtype(a0)
0001308E                            
0001308E                            Gar_MakeFire:	; Routine 2
0001308E 5328 001E                  		subq.b	#1,obTimeFrame(a0) ; decrement timer
00013092 6600                       		bne.s	@nofire		; if time remains, branch
00013094                            
00013094 1168 001F 001E             		move.b	obDelayAni(a0),obTimeFrame(a0) ; reset timer
0001309A 6100 B606                  		bsr.w	ChkObjectVisible
0001309E 6600                       		bne.s	@nofire
000130A0 6100 B80E                  		bsr.w	FindFreeObj
000130A4 6600                       		bne.s	@nofire
000130A6 137C 0062 0000             		move.b	#id_Gargoyle,0(a1) ; load fireball object
000130AC 5829 0024                  		addq.b	#4,obRoutine(a1) ; use Gar_FireBall routine
000130B0 3368 0008 0008             		move.w	obX(a0),obX(a1)
000130B6 3368 000C 000C             		move.w	obY(a0),obY(a1)
000130BC 1368 0001 0001             		move.b	obRender(a0),obRender(a1)
000130C2 1368 0022 0022             		move.b	obStatus(a0),obStatus(a1)
000130C8                            
000130C8                            	@nofire:
000130C8 4E75                       		rts	
000130CA                            ; ===========================================================================
000130CA                            
000130CA                            Gar_FireBall:	; Routine 4
000130CA 5428 0024                  		addq.b	#2,obRoutine(a0)
000130CE 117C 0008 0016             		move.b	#8,obHeight(a0)
000130D4 117C 0008 0017             		move.b	#8,obWidth(a0)
000130DA 217C 0000 0000 0004        		move.l	#Map_Gar,obMap(a0)
000130E2 317C 02E9 0002             		move.w	#$2E9,obGfx(a0)
000130E8 0028 0004 0001             		ori.b	#4,obRender(a0)
000130EE 117C 0004 0018             		move.b	#4,obPriority(a0)
000130F4 117C 0098 0020             		move.b	#$98,obColType(a0)
000130FA 117C 0008 0019             		move.b	#8,obActWid(a0)
00013100 117C 0002 001A             		move.b	#2,obFrame(a0)
00013106 5068 000C                  		addq.w	#8,obY(a0)
0001310A 317C 0200 0010             		move.w	#$200,obVelX(a0)
00013110 0828 0000 0022             		btst	#0,obStatus(a0)	; is gargoyle facing left?
00013116 6600                       		bne.s	@noflip		; if not, branch
00013118 4468 0010                  		neg.w	obVelX(a0)
0001311C                            
0001311C                            	@noflip:
00013126                            
00013126                            Gar_AniFire:	; Routine 6
00013126 1038 FE05                  		move.b	(v_framebyte).w,d0
0001312A 0200 0007                  		andi.b	#7,d0
0001312E 6600                       		bne.s	@nochg
00013130 0868 0000 001A             		bchg	#0,obFrame(a0)	; change every 8 frames
00013136                            
00013136                            	@nochg:
00013136 6100 B2CA                  		bsr.w	SpeedToPos
0001313A 0828 0000 0022             		btst	#0,obStatus(a0) ; is fireball moving left?
00013140 6600                       		bne.s	@isright	; if not, branch
00013142 76F8                       		moveq	#-8,d3
00013144 6100 0000                  		bsr.w	ObjHitWallLeft
00013148 4A41                       		tst.w	d1
0001314A 6B00 B318                  		bmi.w	DeleteObject	; delete if the	fireball hits a	wall
0001314E 4E75                       		rts	
00013150                            
00013150                            	@isright:
00013150 7608                       		moveq	#8,d3
00013152 6100 0000                  		bsr.w	ObjHitWallRight
00013156 4A41                       		tst.w	d1
00013158 6B00 B30A                  		bmi.w	DeleteObject
0001315C 4E75                       		rts	
0001315C 4E75                       		rts	
0001315E                            Map_Gar:	include	"_maps\Gargoyle.asm"
0001315E                            ; ---------------------------------------------------------------------------
0001315E                            ; Sprite mappings - gargoyle head (LZ)
0001315E                            ; ---------------------------------------------------------------------------
0001315E                            Map_Gar_internal:
0001315E 0000                       		dc.w @head-Map_Gar_internal
00013160 0000                       		dc.w @head-Map_Gar_internal
00013162 0000                       		dc.w @fireball1-Map_Gar_internal
00013164 0000                       		dc.w @fireball2-Map_Gar_internal
00013166 03                         @head:		dc.b 3
00013167 F004 0000 00               		dc.b $F0, 4, 0,	0, 0
0001316C F80D 0002 F0               		dc.b $F8, $D, 0, 2, $F0
00013171 0808 000A F8               		dc.b 8,	8, 0, $A, $F8
00013176 01                         @fireball1:	dc.b 1
00013177 FC04 000D F8               		dc.b $FC, 4, 0,	$D, $F8
0001317C 01                         @fireball2:	dc.b 1
0001317D FC04 000F F8               		dc.b $FC, 4, 0,	$F, $F8
00013182                            		even
00013182                            		even
00013182                            		include	"_incObj\63 LZ Conveyor.asm"
00013182                            ; ---------------------------------------------------------------------------
00013182                            ; Object 63 - platforms	on a conveyor belt (LZ)
00013182                            ; ---------------------------------------------------------------------------
00013182                            
00013182                            LabyrinthConvey:
00013182 7000                       		moveq	#0,d0
00013184 1028 0024                  		move.b	obRoutine(a0),d0
00013188 323B 0000                  		move.w	LCon_Index(pc,d0.w),d1
0001318C 4EBB 1000                  		jsr	LCon_Index(pc,d1.w)
000131AC                            
000131AC                            LCon_Display:
000131AC 6000 B27A                  		bra.w	DisplaySprite
000131B0                            ; ===========================================================================
000131B0                            
000131B0                            loc_1236A:
000131B0 0C38 0002 FE11             		cmpi.b	#2,(v_act).w
000131B6 6600                       		bne.s	loc_12378
000131B8 0C40 FF80                  		cmpi.w	#-$80,d0
000131BC 64EE                       		bcc.s	LCon_Display
000131BE                            
000131BE                            loc_12378:
000131BE 1028 002F                  		move.b	$2F(a0),d0
000131C2 6A00 B2A0                  		bpl.w	DeleteObject
000131C6 0240 007F                  		andi.w	#$7F,d0
000131CA 45F8 F7C1                  		lea	(v_obj63).w,a2
000131CE 08B2 0000 0000             		bclr	#0,(a2,d0.w)
000131D4 6000 B28E                  		bra.w	DeleteObject
000131D8                            ; ===========================================================================
000131D8 0000                       LCon_Index:	dc.w LCon_Main-LCon_Index
000131DA 0000                       		dc.w loc_124B2-LCon_Index
000131DC 0000                       		dc.w loc_124C2-LCon_Index
000131DE 0000                       		dc.w loc_124DE-LCon_Index
000131E0                            ; ===========================================================================
000131E0                            
000131E0                            LCon_Main:	; Routine 0
000131E0 1028 0028                  		move.b	obSubtype(a0),d0
000131E4 6B00 0000                  		bmi.w	loc_12460
000131E8 5428 0024                  		addq.b	#2,obRoutine(a0)
000131EC 217C 0000 0000 0004        		move.l	#Map_LConv,obMap(a0)
000131F4 317C 43F6 0002             		move.w	#$43F6,obGfx(a0)
000131FA 0028 0004 0001             		ori.b	#4,obRender(a0)
00013200 117C 0010 0019             		move.b	#$10,obActWid(a0)
00013206 117C 0004 0018             		move.b	#4,obPriority(a0)
0001320C 0C28 007F 0028             		cmpi.b	#$7F,obSubtype(a0)
00013212 6600                       		bne.s	loc_123E2
00013214 5828 0024                  		addq.b	#4,obRoutine(a0)
00013218 317C 03F6 0002             		move.w	#$3F6,obGfx(a0)
0001321E 117C 0001 0018             		move.b	#1,obPriority(a0)
00013224 6000 0000                  		bra.w	loc_124DE
00013228                            ; ===========================================================================
00013228                            
00013228                            loc_123E2:
00013228 117C 0004 001A             		move.b	#4,obFrame(a0)
0001322E 7000                       		moveq	#0,d0
00013230 1028 0028                  		move.b	obSubtype(a0),d0
00013234 3200                       		move.w	d0,d1
00013236 E648                       		lsr.w	#3,d0
00013238 0240 001E                  		andi.w	#$1E,d0
0001323C 45FA 0000                  		lea	LCon_Data(pc),a2
00013240 D4F2 0000                  		adda.w	(a2,d0.w),a2
00013244 315A 0038                  		move.w	(a2)+,$38(a0)
00013248 315A 0030                  		move.w	(a2)+,$30(a0)
0001324C 214A 003C                  		move.l	a2,$3C(a0)
00013250 0241 000F                  		andi.w	#$F,d1
00013254 E549                       		lsl.w	#2,d1
00013256 1141 0038                  		move.b	d1,$38(a0)
0001325A 117C 0004 003A             		move.b	#4,$3A(a0)
00013260 4A38 F7C0                  		tst.b	(f_conveyrev).w
00013264 6700                       		beq.s	loc_1244C
00013266 117C 0001 003B             		move.b	#1,$3B(a0)
0001326C 4428 003A                  		neg.b	$3A(a0)
00013270 7200                       		moveq	#0,d1
00013272 1228 0038                  		move.b	$38(a0),d1
00013276 D228 003A                  		add.b	$3A(a0),d1
0001327A B228 0039                  		cmp.b	$39(a0),d1
0001327E 6500                       		bcs.s	loc_12448
00013280 1001                       		move.b	d1,d0
00013282 7200                       		moveq	#0,d1
00013284 4A00                       		tst.b	d0
00013286 6A00                       		bpl.s	loc_12448
00013288 1228 0039                  		move.b	$39(a0),d1
0001328C 5901                       		subq.b	#4,d1
0001328E                            
0001328E                            loc_12448:
0001328E 1141 0038                  		move.b	d1,$38(a0)
00013292                            
00013292                            loc_1244C:
00013292 3172 1000 0034             		move.w	(a2,d1.w),$34(a0)
00013298 3172 1002 0036             		move.w	2(a2,d1.w),$36(a0)
0001329E 6100 0000                  		bsr.w	LCon_ChangeDir
000132A2 6000 0000                  		bra.w	loc_124B2
000132A6                            ; ===========================================================================
000132A6                            
000132A6                            loc_12460:
000132A6 1140 002F                  		move.b	d0,$2F(a0)
000132AA 0240 007F                  		andi.w	#$7F,d0
000132AE 45F8 F7C1                  		lea	(v_obj63).w,a2
000132B2 08F2 0000 0000             		bset	#0,(a2,d0.w)
000132B8 6600 B1AA                  		bne.w	DeleteObject
000132BC D040                       		add.w	d0,d0
000132BE 0240 001E                  		andi.w	#$1E,d0
000132C2 0640 0000                  		addi.w	#ObjPosLZPlatform_Index-ObjPos_Index,d0
000132C6 45F9 0000 0000             		lea	(ObjPos_Index).l,a2
000132CC D4F2 0000                  		adda.w	(a2,d0.w),a2
000132D0 321A                       		move.w	(a2)+,d1
000132D2 2248                       		movea.l	a0,a1
000132D4 6000                       		bra.s	LCon_MakePtfms
000132D6                            ; ===========================================================================
000132D6                            
000132D6                            LCon_Loop:
000132D6 6100 B5D8                  		bsr.w	FindFreeObj
000132DA 6600                       		bne.s	loc_124AA
000132DC                            
000132DC                            LCon_MakePtfms:
000132DC 137C 0063 0000             		move.b	#id_LabyrinthConvey,0(a1)
000132E2 335A 0008                  		move.w	(a2)+,obX(a1)
000132E6 335A 000C                  		move.w	(a2)+,obY(a1)
000132EA 301A                       		move.w	(a2)+,d0
000132EC 1340 0028                  		move.b	d0,obSubtype(a1)
000132F0                            
000132F0                            loc_124AA:
000132F0 51C9 FFE4                  		dbf	d1,LCon_Loop
000132F4                            
000132F4 588F                       		addq.l	#4,sp
000132F6 4E75                       		rts	
000132F8                            ; ===========================================================================
000132F8                            
000132F8                            loc_124B2:	; Routine 2
000132F8 7200                       		moveq	#0,d1
000132FA 1228 0019                  		move.b	obActWid(a0),d1
000132FE 4EB9 0000 7A86             		jsr	(PlatformObject).l
00013304 6000 0000                  		bra.w	sub_12502
00013308                            ; ===========================================================================
00013308                            
00013308                            loc_124C2:	; Routine 4
00013308 7200                       		moveq	#0,d1
0001330A 1228 0019                  		move.b	obActWid(a0),d1
0001330E 4EB9 0000 7BFA             		jsr	(ExitPlatform).l
00013314 3F28 0008                  		move.w	obX(a0),-(sp)
00013318 6100 0000                  		bsr.w	sub_12502
0001331C 341F                       		move.w	(sp)+,d2
0001331E 4EF9 0000 8168             		jmp	(MvSonicOnPtfm2).l
00013324                            ; ===========================================================================
00013324                            
00013324                            loc_124DE:	; Routine 6
00013324 3038 FE04                  		move.w	(v_framecount).w,d0
00013328 0240 0003                  		andi.w	#3,d0
0001332C 6600                       		bne.s	loc_124FC
0001332E 7201                       		moveq	#1,d1
00013330 4A38 F7C0                  		tst.b	(f_conveyrev).w
00013334 6700                       		beq.s	loc_124F2
00013336 4401                       		neg.b	d1
00013338                            
00013338                            loc_124F2:
00013338 D328 001A                  		add.b	d1,obFrame(a0)
0001333C 0228 0003 001A             		andi.b	#3,obFrame(a0)
00013342                            
00013342                            loc_124FC:
00013342 588F                       		addq.l	#4,sp
00013344 6000 D128                  		bra.w	RememberState
00013348                            
00013348                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00013348                            
00013348                            
00013348                            sub_12502:
00013348 4A38 F7EE                  		tst.b	(f_switch+$E).w
0001334C 6700                       		beq.s	loc_12520
0001334E 4A28 003B                  		tst.b	$3B(a0)
00013352 6600                       		bne.s	loc_12520
00013354 117C 0001 003B             		move.b	#1,$3B(a0)
0001335A 11FC 0001 F7C0             		move.b	#1,(f_conveyrev).w
00013360 4428 003A                  		neg.b	$3A(a0)
00013364 6000                       		bra.s	loc_12534
00013366                            ; ===========================================================================
00013366                            
00013366                            loc_12520:
00013366 3028 0008                  		move.w	obX(a0),d0
0001336A B068 0034                  		cmp.w	$34(a0),d0
0001336E 6600                       		bne.s	loc_1256A
00013370 3028 000C                  		move.w	obY(a0),d0
00013374 B068 0036                  		cmp.w	$36(a0),d0
00013378 6600                       		bne.s	loc_1256A
0001337A                            
0001337A                            loc_12534:
0001337A 7200                       		moveq	#0,d1
0001337C 1228 0038                  		move.b	$38(a0),d1
00013380 D228 003A                  		add.b	$3A(a0),d1
00013384 B228 0039                  		cmp.b	$39(a0),d1
00013388 6500                       		bcs.s	loc_12552
0001338A 1001                       		move.b	d1,d0
0001338C 7200                       		moveq	#0,d1
0001338E 4A00                       		tst.b	d0
00013390 6A00                       		bpl.s	loc_12552
00013392 1228 0039                  		move.b	$39(a0),d1
00013396 5901                       		subq.b	#4,d1
00013398                            
00013398                            loc_12552:
00013398 1141 0038                  		move.b	d1,$38(a0)
0001339C 2268 003C                  		movea.l	$3C(a0),a1
000133A0 3171 1000 0034             		move.w	(a1,d1.w),$34(a0)
000133A6 3171 1002 0036             		move.w	2(a1,d1.w),$36(a0)
000133AC 6100 0000                  		bsr.w	LCon_ChangeDir
000133B0                            
000133B0                            loc_1256A:
000133B0 6100 B050                  		bsr.w	SpeedToPos
000133B4 4E75                       		rts	
000133B6                            ; End of function sub_12502
000133B6                            
000133B6                            
000133B6                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000133B6                            
000133B6                            
000133B6                            LCon_ChangeDir:
000133B6 7000                       		moveq	#0,d0
000133B8 343C FF00                  		move.w	#-$100,d2
000133BC 3028 0008                  		move.w	obX(a0),d0
000133C0 9068 0034                  		sub.w	$34(a0),d0
000133C4 6400                       		bcc.s	loc_12584
000133C6 4440                       		neg.w	d0
000133C8 4442                       		neg.w	d2
000133CA                            
000133CA                            loc_12584:
000133CA 7200                       		moveq	#0,d1
000133CC 363C FF00                  		move.w	#-$100,d3
000133D0 3228 000C                  		move.w	obY(a0),d1
000133D4 9268 0036                  		sub.w	$36(a0),d1
000133D8 6400                       		bcc.s	loc_12598
000133DA 4441                       		neg.w	d1
000133DC 4443                       		neg.w	d3
000133DE                            
000133DE                            loc_12598:
000133DE B240                       		cmp.w	d0,d1
000133E0 6500                       		bcs.s	loc_125C2
000133E2 3028 0008                  		move.w	obX(a0),d0
000133E6 9068 0034                  		sub.w	$34(a0),d0
000133EA 6700                       		beq.s	loc_125AE
000133EC 48C0                       		ext.l	d0
000133EE E180                       		asl.l	#8,d0
000133F0 81C1                       		divs.w	d1,d0
000133F2 4440                       		neg.w	d0
000133F4                            
000133F4                            loc_125AE:
000133F4 3140 0010                  		move.w	d0,obVelX(a0)
000133F8 3143 0012                  		move.w	d3,obVelY(a0)
000133FC 4840                       		swap	d0
000133FE 3140 000A                  		move.w	d0,obX+2(a0)
00013402 4268 000E                  		clr.w	obY+2(a0)
00013406 4E75                       		rts	
00013408                            ; ===========================================================================
00013408                            
00013408                            loc_125C2:
00013408 3228 000C                  		move.w	obY(a0),d1
0001340C 9268 0036                  		sub.w	$36(a0),d1
00013410 6700                       		beq.s	loc_125D4
00013412 48C1                       		ext.l	d1
00013414 E181                       		asl.l	#8,d1
00013416 83C0                       		divs.w	d0,d1
00013418 4441                       		neg.w	d1
0001341A                            
0001341A                            loc_125D4:
0001341A 3141 0012                  		move.w	d1,obVelY(a0)
0001341E 3142 0010                  		move.w	d2,obVelX(a0)
00013422 4841                       		swap	d1
00013424 3141 000E                  		move.w	d1,obY+2(a0)
00013428 4268 000A                  		clr.w	obX+2(a0)
0001342C 4E75                       		rts	
0001342E                            ; End of function LCon_ChangeDir
0001342E                            
0001342E                            ; ===========================================================================
0001342E 0000                       LCon_Data:	dc.w word_125F4-LCon_Data
00013430 0000                       		dc.w word_12610-LCon_Data
00013432 0000                       		dc.w word_12628-LCon_Data
00013434 0000                       		dc.w word_1263C-LCon_Data
00013436 0000                       		dc.w word_12650-LCon_Data
00013438 0000                       		dc.w word_12668-LCon_Data
0001343A 0018 1070 1078 021A 10BE+  word_125F4:	dc.w $18, $1070, $1078,	$21A, $10BE, $260, $10BE, $393
0001344A 108C 03C5 1022 0390 1022+  		dc.w $108C, $3C5, $1022, $390, $1022, $244
00013456 0014 1280 127E 0280 12CE+  word_12610:	dc.w $14, $1280, $127E,	$280, $12CE, $2D0, $12CE, $46E
00013466 1232 0420 1232 02CC        		dc.w $1232, $420, $1232, $2CC
0001346E 0010 0D68 0D22 0482 0D22+  word_12628:	dc.w $10, $D68,	$D22, $482, $D22, $5DE,	$DAE, $5DE, $DAE, $482
00013482 0010 0DA0 0D62 03A2 0DEE+  word_1263C:	dc.w $10, $DA0,	$D62, $3A2, $DEE, $3A2,	$DEE, $4DE, $D62, $4DE
00013496 0014 0D00 0CAC 0242 0DDE+  word_12650:	dc.w $14, $D00,	$CAC, $242, $DDE, $242,	$DDE, $3DE, $C52, $3DE,	$C52, $29C
000134AE 0010 1300 1252 020A 13DE+  word_12668:	dc.w $10, $1300, $1252,	$20A, $13DE, $20A, $13DE, $2BE,	$1252, $2BE
000134AE 0010 1300 1252 020A 13DE+  word_12668:	dc.w $10, $1300, $1252,	$20A, $13DE, $20A, $13DE, $2BE,	$1252, $2BE
000134C2                            Map_LConv:	include	"_maps\LZ Conveyor.asm"
000134C2                            ; ---------------------------------------------------------------------------
000134C2                            ; Sprite mappings - platforms on a conveyor belt (LZ)
000134C2                            ; ---------------------------------------------------------------------------
000134C2                            Map_LConv_internal:
000134C2 0000                       		dc.w @wheel1-Map_LConv_internal
000134C4 0000                       		dc.w @wheel2-Map_LConv_internal
000134C6 0000                       		dc.w @wheel3-Map_LConv_internal
000134C8 0000                       		dc.w @wheel4-Map_LConv_internal
000134CA 0000                       		dc.w @platform-Map_LConv_internal
000134CC 01                         @wheel1:	dc.b 1
000134CD F00F 0000 F0               		dc.b $F0, $F, 0, 0, $F0
000134D2 01                         @wheel2:	dc.b 1
000134D3 F00F 0010 F0               		dc.b $F0, $F, 0, $10, $F0
000134D8 01                         @wheel3:	dc.b 1
000134D9 F00F 0020 F0               		dc.b $F0, $F, 0, $20, $F0
000134DE 01                         @wheel4:	dc.b 1
000134DF F00F 0030 F0               		dc.b $F0, $F, 0, $30, $F0
000134E4 01                         @platform:	dc.b 1
000134E5 F80D 0040 F0               		dc.b $F8, $D, 0, $40, $F0
000134EA                            		even
000134EA                            		even
000134EA                            		include	"_incObj\64 Bubbles.asm"
000134EA                            ; ---------------------------------------------------------------------------
000134EA                            ; Object 64 - bubbles (LZ)
000134EA                            ; ---------------------------------------------------------------------------
000134EA                            
000134EA                            Bubble:
000134EA 7000                       		moveq	#0,d0
000134EC 1028 0024                  		move.b	obRoutine(a0),d0
000134F0 323B 0000                  		move.w	Bub_Index(pc,d0.w),d1
000134F4 4EFB 1000                  		jmp	Bub_Index(pc,d1.w)
000134F8                            ; ===========================================================================
000134F8 0000                       Bub_Index:	dc.w Bub_Main-Bub_Index
000134FA 0000                       		dc.w Bub_Animate-Bub_Index
000134FC 0000                       		dc.w Bub_ChkWater-Bub_Index
000134FE 0000                       		dc.w Bub_Display-Bub_Index
00013500 0000                       		dc.w Bub_Delete-Bub_Index
00013502 0000                       		dc.w Bub_BblMaker-Bub_Index
00013504                            
00013504 =0000002E                  bub_inhalable:	equ $2E		; flag set when bubble is collectable
00013504 =00000030                  bub_origX:	equ $30		; original x-axis position
00013504 =00000032                  bub_time:	equ $32		; time until next bubble spawn
00013504 =00000033                  bub_freq:	equ $33		; frequency of bubble spawn
00013504                            ; ===========================================================================
00013504                            
00013504                            Bub_Main:	; Routine 0
00013504 5428 0024                  		addq.b	#2,obRoutine(a0)
00013508 217C 0000 0000 0004        		move.l	#Map_Bub,obMap(a0)
00013510 317C 8348 0002             		move.w	#$8348,obGfx(a0)
00013516 117C 0084 0001             		move.b	#$84,obRender(a0)
0001351C 117C 0010 0019             		move.b	#$10,obActWid(a0)
00013522 117C 0001 0018             		move.b	#1,obPriority(a0)
00013528 1028 0028                  		move.b	obSubtype(a0),d0 ; get bubble type
0001352C 6A00                       		bpl.s	@bubble		; if type is $0-$7F, branch
0001352E                            
0001352E 5028 0024                  		addq.b	#8,obRoutine(a0) ; goto Bub_BblMaker next
00013532 0240 007F                  		andi.w	#$7F,d0		; read only last 7 bits	(deduct	$80)
00013536 1140 0032                  		move.b	d0,bub_time(a0)
0001353A 1140 0033                  		move.b	d0,bub_freq(a0)	; set bubble frequency
0001353E 117C 0006 001C             		move.b	#6,obAnim(a0)
00013544 6000 0000                  		bra.w	Bub_BblMaker
00013548                            ; ===========================================================================
00013548                            
00013548                            @bubble:
00013548 1140 001C                  		move.b	d0,obAnim(a0)
0001354C 3168 0008 0030             		move.w	obX(a0),bub_origX(a0)
00013552 317C FF78 0012             		move.w	#-$88,obVelY(a0) ; float bubble upwards
00013558 4EB9 0000 27C6             		jsr	(RandomNumber).l
0001355E 1140 0026                  		move.b	d0,obAngle(a0)
00013562                            
00013562                            Bub_Animate:	; Routine 2
00013562 43F9 0000 0000             		lea	(Ani_Bub).l,a1
00013568 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
0001356E 0C28 0006 001A             		cmpi.b	#6,obFrame(a0)	; is bubble full-size?
00013574 6600                       		bne.s	Bub_ChkWater	; if not, branch
00013576                            
00013576 117C 0001 002E             		move.b	#1,bub_inhalable(a0) ; set "inhalable" flag
0001357C                            
0001357C                            Bub_ChkWater:	; Routine 4
0001357C 3038 F646                  		move.w	(v_waterpos1).w,d0
00013580 B068 000C                  		cmp.w	obY(a0),d0	; is bubble underwater?
00013584 6500                       		bcs.s	@wobble		; if yes, branch
00013586                            
00013586                            @burst:
00013586 117C 0006 0024             		move.b	#6,obRoutine(a0) ; goto Bub_Display next
0001358C 5628 001C                  		addq.b	#3,obAnim(a0)	; run "bursting" animation
00013590 6000 0000                  		bra.w	Bub_Display
00013594                            ; ===========================================================================
00013594                            
00013594                            @wobble:
00013594 1028 0026                  		move.b	obAngle(a0),d0
00013598 5228 0026                  		addq.b	#1,obAngle(a0)
0001359C 0240 007F                  		andi.w	#$7F,d0
000135A0 43F9 0000 0000             		lea	(Drown_WobbleData).l,a1
000135A6 1031 0000                  		move.b	(a1,d0.w),d0
000135AA 4880                       		ext.w	d0
000135AC D068 0030                  		add.w	bub_origX(a0),d0
000135B0 3140 0008                  		move.w	d0,obX(a0)	; change bubble's x-axis position
000135B4 4A28 002E                  		tst.b	bub_inhalable(a0)
000135B8 6700                       		beq.s	@display
000135BA 6100 0000                  		bsr.w	Bub_ChkSonic	; has Sonic touched the	bubble?
000135BE 6700                       		beq.s	@display	; if not, branch
000135C0                            
000135C0 6100 0000                  		bsr.w	ResumeMusic	; cancel countdown music
000135C4                            	;	sfx	sfx_Bubble,0,0,0	; play collecting bubble sound
000135C4 43F8 D000                  		lea	(v_player).w,a1
000135C8                            	;	clr.w	obVelX(a1)
000135C8                            	;	clr.w	obVelY(a1)
000135C8                            	;	clr.w	obInertia(a1)	; stop Sonic
000135C8 137C 0000 001C             		move.b	#id_GetAir,obAnim(a1) ; use bubble-collecting animation
000135CE 337C 0023 003E             		move.w	#$23,$3E(a1)
000135D4 137C 0000 003C             		move.b	#0,$3C(a1)
000135DA 08A9 0005 0022             		bclr	#5,obStatus(a1)
000135E0 08A9 0004 0022             		bclr	#4,obStatus(a1)
000135E6 0829 0002 0022             		btst	#2,obStatus(a1)
000135EC 6700 FF98                  		beq.w	@burst
000135F0 08A9 0002 0022             		bclr	#2,obStatus(a1)
000135F6 137C 0013 0016             		move.b	#$13,obHeight(a1)
000135FC 137C 0009 0017             		move.b	#9,obWidth(a1)
00013602 5B69 000C                  		subq.w	#5,obY(a1)
00013606 6000 FF7E                  		bra.w	@burst
0001360A                            ; ===========================================================================
0001360A                            
0001360A                            @display:
0001360A 6100 ADF6                  		bsr.w	SpeedToPos
0001360E 4A28 0001                  		tst.b	obRender(a0)
00013612 6A00                       		bpl.s	@delete
00013614 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001361A                            
0001361A                            	@delete:
0001361A 4EF9 0000 E464             		jmp	(DeleteObject).l
00013620                            ; ===========================================================================
00013620                            
00013620                            Bub_Display:	; Routine 6
00013620 43F9 0000 0000             		lea	(Ani_Bub).l,a1
00013626 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
0001362C 4A28 0001                  		tst.b	obRender(a0)
00013630 6A00                       		bpl.s	@delete
00013632 4EF9 0000 E428             		jmp	(DisplaySprite).l
00013638                            
00013638                            	@delete:
00013638 4EF9 0000 E464             		jmp	(DeleteObject).l
0001363E                            ; ===========================================================================
0001363E                            
0001363E                            Bub_Delete:	; Routine 8
0001363E 6000 AE24                  		bra.w	DeleteObject
00013642                            ; ===========================================================================
00013642                            
00013642                            Bub_BblMaker:	; Routine $A
00013642 4A68 0036                  		tst.w	$36(a0)
00013646 6600                       		bne.s	@loc_12874
00013648 3038 F646                  		move.w	(v_waterpos1).w,d0
0001364C B068 000C                  		cmp.w	obY(a0),d0	; is bubble maker underwater?
00013650 6400 0000                  		bcc.w	@chkdel		; if not, branch
00013654 4A28 0001                  		tst.b	obRender(a0)
00013658 6A00 0000                  		bpl.w	@chkdel
0001365C 5368 0038                  		subq.w	#1,$38(a0)
00013660 6A00 0000                  		bpl.w	@loc_12914
00013664 317C 0001 0036             		move.w	#1,$36(a0)
0001366A                            
0001366A                            	@tryagain:
0001366A 4EB9 0000 27C6             		jsr	(RandomNumber).l
00013670 3200                       		move.w	d0,d1
00013672 0240 0007                  		andi.w	#7,d0
00013676 0C40 0006                  		cmpi.w	#6,d0		; random number over 6?
0001367A 64EE                       		bcc.s	@tryagain	; if yes, branch
0001367C                            
0001367C 1140 0034                  		move.b	d0,$34(a0)
00013680 0241 000C                  		andi.w	#$C,d1
00013684 43F9 0000 0000             		lea	(Bub_BblTypes).l,a1
0001368A D2C1                       		adda.w	d1,a1
0001368C 2149 003C                  		move.l	a1,$3C(a0)
00013690 5328 0032                  		subq.b	#1,bub_time(a0)
00013694 6A00                       		bpl.s	@loc_12872
00013696 1168 0033 0032             		move.b	bub_freq(a0),bub_time(a0)
0001369C 08E8 0007 0036             		bset	#7,$36(a0)
000136A2                            
000136A2                            @loc_12872:
000136A2 6000                       		bra.s	@loc_1287C
000136A4                            ; ===========================================================================
000136A4                            
000136A4                            @loc_12874:
000136A4 5368 0038                  		subq.w	#1,$38(a0)
000136A8 6A00 0000                  		bpl.w	@loc_12914
000136AC                            
000136AC                            @loc_1287C:
000136AC 4EB9 0000 27C6             		jsr	(RandomNumber).l
000136B2 0240 001F                  		andi.w	#$1F,d0
000136B6 3140 0038                  		move.w	d0,$38(a0)
000136BA 6100 B1F4                  		bsr.w	FindFreeObj
000136BE 6600                       		bne.s	@fail
000136C0 137C 0064 0000             		move.b	#id_Bubble,0(a1) ; load bubble object
000136C6 3368 0008 0008             		move.w	obX(a0),obX(a1)
000136CC 4EB9 0000 27C6             		jsr	(RandomNumber).l
000136D2 0240 000F                  		andi.w	#$F,d0
000136D6 5140                       		subq.w	#8,d0
000136D8 D169 0008                  		add.w	d0,obX(a1)
000136DC 3368 000C 000C             		move.w	obY(a0),obY(a1)
000136E2 7000                       		moveq	#0,d0
000136E4 1028 0034                  		move.b	$34(a0),d0
000136E8 2468 003C                  		movea.l	$3C(a0),a2
000136EC 1372 0000 0028             		move.b	(a2,d0.w),obSubtype(a1)
000136F2 0828 0007 0036             		btst	#7,$36(a0)
000136F8 6700                       		beq.s	@fail
000136FA 4EB9 0000 27C6             		jsr	(RandomNumber).l
00013700 0240 0003                  		andi.w	#3,d0
00013704 6600                       		bne.s	@loc_buh
00013706 08E8 0006 0036             		bset	#6,$36(a0)
0001370C 6600                       		bne.s	@fail
0001370E 137C 0002 0028             		move.b	#2,obSubtype(a1)
00013714                            
00013714                            @loc_buh:
00013714 4A28 0034                  		tst.b	$34(a0)
00013718 6600                       		bne.s	@fail
0001371A 08E8 0006 0036             		bset	#6,$36(a0)
00013720 6600                       		bne.s	@fail
00013722 137C 0002 0028             		move.b	#2,obSubtype(a1)
00013728                            
00013728                            	@fail:
00013728 5328 0034                  		subq.b	#1,$34(a0)
0001372C 6A00                       		bpl.s	@loc_12914
0001372E 4EB9 0000 27C6             		jsr	(RandomNumber).l
00013734 0240 007F                  		andi.w	#$7F,d0
00013738 0640 0080                  		addi.w	#$80,d0
0001373C D168 0038                  		add.w	d0,$38(a0)
00013740 4268 0036                  		clr.w	$36(a0)
00013744                            
00013744                            @loc_12914:
00013744 43F9 0000 0000             		lea	(Ani_Bub).l,a1
0001374A 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
00013750                            
00013750                            @chkdel:
0001376E 3038 F646                  		move.w	(v_waterpos1).w,d0
00013772 B068 000C                  		cmp.w	obY(a0),d0
00013776 6500 ACB0                  		bcs.w	DisplaySprite
0001377A 4E75                       		rts	
0001377C                            ; ===========================================================================
0001377C                            ; bubble production sequence
0001377C                            
0001377C                            ; 0 = small bubble, 1 =	large bubble
0001377C                            
0001377C 0001 0000 0100 0100 0001+  Bub_BblTypes:	dc.b 0,	1, 0, 0, 1, 0, 1, 0, 0,	1, 0, 1, 0, 1, 0, 0, 1,	0
0001378E                            
0001378E                            ; ===========================================================================
0001378E                            
0001378E                            Bub_ChkSonic:
0001378E 4A38 F7C8                  		tst.b	(f_lockmulti).w
00013792 6B00                       		bmi.s	@loc_12998
00013794 43F8 D000                  		lea	(v_player).w,a1
00013798 3029 0008                  		move.w	obX(a1),d0
0001379C 3228 0008                  		move.w	obX(a0),d1
000137A0 0441 0010                  		subi.w	#$10,d1
000137A4 B240                       		cmp.w	d0,d1
000137A6 6400                       		bcc.s	@loc_12998
000137A8 0641 0020                  		addi.w	#$20,d1
000137AC B240                       		cmp.w	d0,d1
000137AE 6500                       		bcs.s	@loc_12998
000137B0 3029 000C                  		move.w	obY(a1),d0
000137B4 3228 000C                  		move.w	obY(a0),d1
000137B8 B240                       		cmp.w	d0,d1
000137BA 6400                       		bcc.s	@loc_12998
000137BC 0641 0010                  		addi.w	#$10,d1
000137C0 B240                       		cmp.w	d0,d1
000137C2 6500                       		bcs.s	@loc_12998
000137C4 7001                       		moveq	#1,d0
000137C6 4E75                       		rts	
000137C8                            ; ===========================================================================
000137C8                            
000137C8                            @loc_12998:
000137C8 7000                       		moveq	#0,d0
000137CA 4E75                       		rts	
000137CA 4E75                       		rts	
000137CC                            		include	"_anim\Bubbles.asm"
000137CC                            ; ---------------------------------------------------------------------------
000137CC                            ; Animation script - bubbles (LZ)
000137CC                            ; ---------------------------------------------------------------------------
000137CC 0000                       Ani_Bub:	dc.w @small-Ani_Bub
000137CE 0000                       		dc.w @medium-Ani_Bub
000137D0 0000                       		dc.w @large-Ani_Bub
000137D2 0000                       		dc.w @incroutine-Ani_Bub
000137D4 0000                       		dc.w @incroutine-Ani_Bub
000137D6 0000                       		dc.w @burst-Ani_Bub
000137D8 0000                       		dc.w @bubmaker-Ani_Bub
000137DA 0E00 0102 FC               @small:		dc.b $E, 0, 1, 2, afRoutine ; small bubble forming
000137E0 00                         		even
000137E0 0E01 0203 04FC             @medium:	dc.b $E, 1, 2, 3, 4, afRoutine ; medium bubble forming
000137E6 0702 0304 0506 FC          @large:		dc.b $7, 2, 3, 4, 5, 6,	afRoutine ; full size bubble forming
000137EE 00                         		even
000137EE 04FC                       @incroutine:	dc.b 4,	afRoutine	; increment routine counter (no animation)
000137F0 0406 0708 FC               @burst:		dc.b 4,	6, 7, 8, afRoutine ; large bubble bursts
000137F6 00                         		even
000137F6 0F13 1415 FF               @bubmaker:	dc.b $F, $13, $14, $15,	afEnd ; bubble maker on the floor
000137FC 00                         		even
000137FC 00                         		even
000137FC                            Map_Bub:	include	"_maps\Bubbles.asm"
000137FC                            ; ---------------------------------------------------------------------------
000137FC                            ; Sprite mappings - bubbles (LZ)
000137FC                            ; ---------------------------------------------------------------------------
000137FC                            Map_Bub_internal:
000137FC 0000                       		dc.w @bubble1-Map_Bub_internal
000137FE 0000                       		dc.w @bubble2-Map_Bub_internal
00013800 0000                       		dc.w @bubble3-Map_Bub_internal
00013802 0000                       		dc.w @bubble4-Map_Bub_internal
00013804 0000                       		dc.w @bubble5-Map_Bub_internal
00013806 0000                       		dc.w @bubble6-Map_Bub_internal
00013808 0000                       		dc.w @bubblefull-Map_Bub_internal
0001380A 0000                       		dc.w @burst1-Map_Bub_internal
0001380C 0000                       		dc.w @burst2-Map_Bub_internal
0001380E 0000                       		dc.w @zero_sm-Map_Bub_internal
00013810 0000                       		dc.w @five_sm-Map_Bub_internal
00013812 0000                       		dc.w @three_sm-Map_Bub_internal
00013814 0000                       		dc.w @one_sm-Map_Bub_internal
00013816 0000                       		dc.w @zero-Map_Bub_internal
00013818 0000                       		dc.w @five-Map_Bub_internal
0001381A 0000                       		dc.w @four-Map_Bub_internal
0001381C 0000                       		dc.w @three-Map_Bub_internal
0001381E 0000                       		dc.w @two-Map_Bub_internal
00013820 0000                       		dc.w @one-Map_Bub_internal
00013822 0000                       		dc.w @bubmaker1-Map_Bub_internal
00013824 0000                       		dc.w @bubmaker2-Map_Bub_internal
00013826 0000                       		dc.w @bubmaker3-Map_Bub_internal
00013828 0000                       		dc.w @blank-Map_Bub_internal
0001382A 01                         @bubble1:	dc.b 1
0001382B FC00 0000 FC               		dc.b $FC, 0, 0,	0, $FC	; bubbles, increasing in size
00013830 01                         @bubble2:	dc.b 1
00013831 FC00 0001 FC               		dc.b $FC, 0, 0,	1, $FC
00013836 01                         @bubble3:	dc.b 1
00013837 FC00 0002 FC               		dc.b $FC, 0, 0,	2, $FC
0001383C 01                         @bubble4:	dc.b 1
0001383D F805 0003 F8               		dc.b $F8, 5, 0,	3, $F8
00013842 01                         @bubble5:	dc.b 1
00013843 F805 0007 F8               		dc.b $F8, 5, 0,	7, $F8
00013848 01                         @bubble6:	dc.b 1
00013849 F40A 000B F4               		dc.b $F4, $A, 0, $B, $F4
0001384E 01                         @bubblefull:	dc.b 1
0001384F F00F 0014 F0               		dc.b $F0, $F, 0, $14, $F0
00013854 04                         @burst1:	dc.b 4
00013855 F005 0024 F0               		dc.b $F0, 5, 0,	$24, $F0 ; large bubble bursting
0001385A F005 0824 00               		dc.b $F0, 5, 8,	$24, 0
0001385F 0005 1024 F0               		dc.b 0,	5, $10,	$24, $F0
00013864 0005 1824 00               		dc.b 0,	5, $18,	$24, 0
00013869 04                         @burst2:	dc.b 4
0001386A F005 0028 F0               		dc.b $F0, 5, 0,	$28, $F0
0001386F F005 0828 00               		dc.b $F0, 5, 8,	$28, 0
00013874 0005 1028 F0               		dc.b 0,	5, $10,	$28, $F0
00013879 0005 1828 00               		dc.b 0,	5, $18,	$28, 0
0001387E 01                         @zero_sm:	dc.b 1
0001387F F406 002C F8               		dc.b $F4, 6, 0,	$2C, $F8 ; small, partially-formed countdown numbers
00013884 01                         @five_sm:	dc.b 1
00013885 F406 0032 F8               		dc.b $F4, 6, 0,	$32, $F8
0001388A 01                         @three_sm:	dc.b 1
0001388B F406 0038 F8               		dc.b $F4, 6, 0,	$38, $F8
00013890 01                         @one_sm:	dc.b 1
00013891 F406 003E F8               		dc.b $F4, 6, 0,	$3E, $F8
00013896 01                         @zero:		dc.b 1
00013897 F406 2044 F8               		dc.b $F4, 6, $20, $44, $F8 ; fully-formed countdown numbers
0001389C 01                         @five:		dc.b 1
0001389D F406 204A F8               		dc.b $F4, 6, $20, $4A, $F8
000138A2 01                         @four:		dc.b 1
000138A3 F406 2050 F8               		dc.b $F4, 6, $20, $50, $F8
000138A8 01                         @three:		dc.b 1
000138A9 F406 2056 F8               		dc.b $F4, 6, $20, $56, $F8
000138AE 01                         @two:		dc.b 1
000138AF F406 205C F8               		dc.b $F4, 6, $20, $5C, $F8
000138B4 01                         @one:		dc.b 1
000138B5 F406 2062 F8               		dc.b $F4, 6, $20, $62, $F8
000138BA 01                         @bubmaker1:	dc.b 1
000138BB F805 0068 F8               		dc.b $F8, 5, 0,	$68, $F8
000138C0 01                         @bubmaker2:	dc.b 1
000138C1 F805 006C F8               		dc.b $F8, 5, 0,	$6C, $F8
000138C6 01                         @bubmaker3:	dc.b 1
000138C7 F805 0070 F8               		dc.b $F8, 5, 0,	$70, $F8
000138CC 00                         @blank:		dc.b 0
000138CE 00                         		even
000138CE 00                         		even
000138CE                            		include	"_incObj\65 Waterfalls.asm"
000138CE                            ; ---------------------------------------------------------------------------
000138CE                            ; Object 65 - waterfalls (LZ)
000138CE                            ; ---------------------------------------------------------------------------
000138CE                            
000138CE                            Waterfall:
000138CE 7000                       		moveq	#0,d0
000138D0 1028 0024                  		move.b	obRoutine(a0),d0
000138D4 323B 0000                  		move.w	WFall_Index(pc,d0.w),d1
000138D8 4EFB 1000                  		jmp	WFall_Index(pc,d1.w)
000138DC                            ; ===========================================================================
000138DC 0000                       WFall_Index:	dc.w WFall_Main-WFall_Index
000138DE 0000                       		dc.w WFall_Animate-WFall_Index
000138E0 0000                       		dc.w WFall_ChkDel-WFall_Index
000138E2 0000                       		dc.w WFall_OnWater-WFall_Index
000138E4 0000                       		dc.w loc_12B36-WFall_Index
000138E6                            ; ===========================================================================
000138E6                            
000138E6                            WFall_Main:	; Routine 0
000138E6 5828 0024                  		addq.b	#4,obRoutine(a0)
000138EA 217C 0000 0000 0004        		move.l	#Map_WFall,obMap(a0)
000138F2 317C 4259 0002             		move.w	#$4259,obGfx(a0)
000138F8 0028 0004 0001             		ori.b	#4,obRender(a0)
000138FE 117C 0018 0019             		move.b	#$18,obActWid(a0)
00013904 117C 0001 0018             		move.b	#1,obPriority(a0)
0001390A 1028 0028                  		move.b	obSubtype(a0),d0 ; get object type
0001390E 6A00                       		bpl.s	@under80	; branch if $00-$7F
00013910 08E8 0007 0002             		bset	#7,obGfx(a0)
00013916                            
00013916                            	@under80:
00013916 0200 000F                  		andi.b	#$F,d0		; read only the	2nd digit
0001391A 1140 001A                  		move.b	d0,obFrame(a0)	; set frame number
0001391E 0C00 0009                  		cmpi.b	#9,d0		; is object type $x9 ?
00013922 6600                       		bne.s	WFall_ChkDel	; if not, branch
00013924                            
00013924 4228 0018                  		clr.b	obPriority(a0)	; object is in front of Sonic
00013928 5528 0024                  		subq.b	#2,obRoutine(a0) ; goto WFall_Animate next
0001392C 0828 0006 0028             		btst	#6,obSubtype(a0) ; is object type $49 ?
00013932 6700                       		beq.s	@not49		; if not, branch
00013934                            
00013934 117C 0006 0024             		move.b	#6,obRoutine(a0) ; goto WFall_OnWater next
0001393A                            
0001393A                            	@not49:
0001393A 0828 0005 0028             		btst	#5,obSubtype(a0) ; is object type $A9 ?
00013940 6700                       		beq.s	WFall_Animate	; if not, branch
00013942 117C 0008 0024             		move.b	#8,obRoutine(a0) ; goto loc_12B36 next
00013948                            
00013948                            WFall_Animate:	; Routine 2
00013948 43F9 0000 0000             		lea	(Ani_WFall).l,a1
0001394E 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
00013954                            
00013954                            WFall_ChkDel:	; Routine 4
00013954 6000 CB18                  		bra.w	RememberState
00013958                            ; ===========================================================================
00013958                            
00013958                            WFall_OnWater:	; Routine 6
00013958 3038 F646                  		move.w	(v_waterpos1).w,d0
0001395C 0440 0010                  		subi.w	#$10,d0
00013960 3140 000C                  		move.w	d0,obY(a0)	; match	object position	to water height
00013964 60E2                       		bra.s	WFall_Animate
00013966                            ; ===========================================================================
00013966                            
00013966                            loc_12B36:	; Routine 8
00013966 08A8 0007 0002             		bclr	#7,obGfx(a0)
0001396C 0C38 0007 A506             		cmpi.b	#7,(v_lvllayout+$106).w
00013972 6600                       		bne.s	@animate
00013974 08E8 0007 0002             		bset	#7,obGfx(a0)
0001397A                            
0001397A                            	@animate:
0001397A 60CC                       		bra.s	WFall_Animate
0001397A 60CC                       		bra.s	WFall_Animate
0001397C                            		include	"_anim\Waterfalls.asm"
0001397C                            ; ---------------------------------------------------------------------------
0001397C                            ; Animation script - waterfall (LZ)
0001397C                            ; ---------------------------------------------------------------------------
0001397C 0000                       Ani_WFall:	dc.w @splash-Ani_WFall
0001397E 0509 0A0B FF               @splash:	dc.b 5,	9, $A, $B, afEnd
00013984 00                         		even
00013984 00                         		even
00013984                            Map_WFall	include	"_maps\Waterfalls.asm"
00013984                            ; ---------------------------------------------------------------------------
00013984                            ; Sprite mappings - waterfalls (LZ)
00013984                            ; ---------------------------------------------------------------------------
00013984                            Map_WFall_internal:
00013984 0000                       		dc.w @vertnarrow-Map_WFall_internal
00013986 0000                       		dc.w @cornerwide-Map_WFall_internal
00013988 0000                       		dc.w @cornermedium-Map_WFall_internal
0001398A 0000                       		dc.w @cornernarrow-Map_WFall_internal
0001398C 0000                       		dc.w @cornermedium2-Map_WFall_internal
0001398E 0000                       		dc.w @cornernarrow2-Map_WFall_internal
00013990 0000                       		dc.w @cornernarrow3-Map_WFall_internal
00013992 0000                       		dc.w @vertwide-Map_WFall_internal
00013994 0000                       		dc.w @diagonal-Map_WFall_internal
00013996 0000                       		dc.w @splash1-Map_WFall_internal
00013998 0000                       		dc.w @splash2-Map_WFall_internal
0001399A 0000                       		dc.w @splash3-Map_WFall_internal
0001399C 01                         @vertnarrow:	dc.b 1
0001399D F007 0000 F8               		dc.b $F0, 7, 0,	0, $F8
000139A2 02                         @cornerwide:	dc.b 2
000139A3 F804 0008 FC               		dc.b $F8, 4, 0,	8, $FC
000139A8 0008 000A F4               		dc.b 0,	8, 0, $A, $F4
000139AD 02                         @cornermedium:	dc.b 2
000139AE F800 0008 00               		dc.b $F8, 0, 0,	8, 0
000139B3 0004 000D F8               		dc.b 0,	4, 0, $D, $F8
000139B8 01                         @cornernarrow:	dc.b 1
000139B9 F801 000F 00               		dc.b $F8, 1, 0,	$F, 0
000139BE 02                         @cornermedium2:	dc.b 2
000139BF F800 0008 00               		dc.b $F8, 0, 0,	8, 0
000139C4 0004 000D F8               		dc.b 0,	4, 0, $D, $F8
000139C9 01                         @cornernarrow2:	dc.b 1
000139CA F801 0011 00               		dc.b $F8, 1, 0,	$11, 0
000139CF 01                         @cornernarrow3:	dc.b 1
000139D0 F801 0013 00               		dc.b $F8, 1, 0,	$13, 0
000139D5 01                         @vertwide:	dc.b 1
000139D6 F007 0015 F8               		dc.b $F0, 7, 0,	$15, $F8
000139DB 02                         @diagonal:	dc.b 2
000139DC F80C 001D F6               		dc.b $F8, $C, 0, $1D, $F6
000139E1 000C 0021 E8               		dc.b 0,	$C, 0, $21, $E8
000139E6 02                         @splash1:	dc.b 2
000139E7 F00B 0025 E8               		dc.b $F0, $B, 0, $25, $E8
000139EC F00B 0031 00               		dc.b $F0, $B, 0, $31, 0
000139F1 02                         @splash2:	dc.b 2
000139F2 F00B 003D E8               		dc.b $F0, $B, 0, $3D, $E8
000139F7 F00B 0049 00               		dc.b $F0, $B, 0, $49, 0
000139FC 02                         @splash3:	dc.b 2
000139FD F00B 0055 E8               		dc.b $F0, $B, 0, $55, $E8
00013A02 F00B 0061 00               		dc.b $F0, $B, 0, $61, 0
00013A08 00                         		even
00013A08 00                         		even
00013A08                            
00013A08                            ; ===========================================================================
00013A08                            ; ---------------------------------------------------------------------------
00013A08                            ; Object 01 - Sonic
00013A08                            ; ---------------------------------------------------------------------------
00013A08                            
00013A08                            SonicPlayer:
00013A08 4A78 FE08                  		tst.w	(v_debuguse).w	; is debug mode	being used?
00013A0C 6700                       		beq.s	Sonic_Normal	; if not, branch
00013A0E 4EF9 0000 0000             		jmp	(DebugMode).l
00013A14                            ; ===========================================================================
00013A14                            
00013A14                            Sonic_Normal:
00013A14 7000                       		moveq	#0,d0
00013A16 1028 0024                  		move.b	obRoutine(a0),d0
00013A1A 323B 0000                  		move.w	Sonic_Index(pc,d0.w),d1
00013A1E 4EFB 1000                  		jmp	Sonic_Index(pc,d1.w)
00013A22                            ; ===========================================================================
00013A22 0000                       Sonic_Index:	dc.w Sonic_Main-Sonic_Index
00013A24 0000                       		dc.w Sonic_Control-Sonic_Index
00013A26 0000                       		dc.w Sonic_Hurt-Sonic_Index
00013A28 0000                       		dc.w Sonic_Death-Sonic_Index
00013A2A 0000                       		dc.w Sonic_ResetLevel-Sonic_Index
00013A2C                            ; ===========================================================================
00013A2C                            
00013A2C                            Sonic_Main:	; Routine 0
00013A2C 5428 0024                  		addq.b	#2,obRoutine(a0)
00013A30 117C 0013 0016             		move.b	#$13,obHeight(a0)
00013A36 117C 0009 0017             		move.b	#9,obWidth(a0)
00013A3C 217C 0000 0000 0004        		move.l	#Map_Sonic,obMap(a0)
00013A44 317C 0780 0002             		move.w	#$780,obGfx(a0)
00013A4A 117C 0002 0018             		move.b	#2,obPriority(a0)
00013A50 117C 0018 0019             		move.b	#$18,obActWid(a0)
00013A56 117C 0004 0001             		move.b	#4,obRender(a0)
00013A5C 31FC 0600 F760             		move.w	#$600,(v_sonspeedmax).w ; Sonic's top speed
00013A62 31FC 000C F762             		move.w	#$C,(v_sonspeedacc).w ; Sonic's acceleration
00013A68 31FC 0080 F764             		move.w	#$80,(v_sonspeeddec).w ; Sonic's deceleration
00013A6E                            
00013A6E                            Sonic_Control:	; Routine 2
00013A6E 4A78 FFFA                  		tst.w	(f_debugmode).w	; is debug cheat enabled?
00013A72 6700                       		beq.s	loc_12C58	; if not, branch
00013A74 0838 0004 F605             		btst	#bitB,(v_jpadpress1).w ; is button B pressed?
00013A7A 6700                       		beq.s	loc_12C58	; if not, branch
00013A7C 31FC 0001 FE08             		move.w	#1,(v_debuguse).w ; change Sonic into a ring/item
00013A82 4238 F7CC                  		clr.b	(f_lockctrl).w
00013A86 4E75                       		rts	
00013A88                            ; ===========================================================================
00013A88                            
00013A88                            loc_12C58:
00013A88 4A38 F7CC                  		tst.b	(f_lockctrl).w	; are controls locked?
00013A8C 6600                       		bne.s	loc_12C64	; if yes, branch
00013A8E 31F8 F604 F602             		move.w	(v_jpadhold1).w,(v_jpadhold2).w ; enable joypad control
00013A94                            
00013A94                            loc_12C64:
00013A94 0838 0000 F7C8             		btst	#0,(f_lockmulti).w ; are controls locked?
00013A9A 6600                       		bne.s	loc_12C7E	; if yes, branch
00013A9C 7000                       		moveq	#0,d0
00013A9E 1028 0022                  		move.b	obStatus(a0),d0
00013AA2 0240 0006                  		andi.w	#6,d0
00013AA6 323B 0000                  		move.w	Sonic_Modes(pc,d0.w),d1
00013AAA 4EBB 1000                  		jsr	Sonic_Modes(pc,d1.w)
00013AAE                            
00013AAE                            loc_12C7E:
00013AAE 6100                       		bsr.s	Sonic_Display
00013AB0 6100 0000                  		bsr.w	Sonic_RecordPosition
00013AB4 6100 0000                  		bsr.w	Sonic_Water
00013AB8 1178 F768 0036             		move.b	(v_anglebuffer).w,$36(a0)
00013ABE 1178 F76A 0037             		move.b	($FFFFF76A).w,$37(a0)
00013AC4 4A38 F7C7                  		tst.b	(f_wtunnelmode).w
00013AC8 6700                       		beq.s	loc_12CA6
00013ACA 4A28 001C                  		tst.b	obAnim(a0)
00013ACE 6600                       		bne.s	loc_12CA6
00013AD0 1168 001D 001C             		move.b	obNextAni(a0),obAnim(a0)
00013AD6                            
00013AD6                            loc_12CA6:
00013AD6 6100 0000                  		bsr.w	Sonic_Animate
00013ADA 4A38 F7C8                  		tst.b	(f_lockmulti).w
00013ADE 6B00                       		bmi.s	loc_12CB6
00013AE0 4EB9 0000 0000             		jsr	(ReactToItem).l
00013AE6                            
00013AE6                            loc_12CB6:
00013AE6 6100 0000                  		bsr.w	Sonic_Loops
00013AEA 6100 0000                  		bsr.w	Sonic_LoadGfx
00013AEE 4E75                       		rts	
00013AF0                            ; ===========================================================================
00013AF0 0000                       Sonic_Modes:	dc.w Sonic_MdNormal-Sonic_Modes
00013AF2 0000                       		dc.w Sonic_MdJump-Sonic_Modes
00013AF4 0000                       		dc.w Sonic_MdRoll-Sonic_Modes
00013AF6 0000                       		dc.w Sonic_MdJump2-Sonic_Modes
00013AF8                            ; ---------------------------------------------------------------------------
00013AF8                            ; Music	to play	after invincibility wears off
00013AF8                            ; ---------------------------------------------------------------------------
00013AF8                            MusicList2:
00013AF8 00                         		dc.b bgm_GHZ
00013AF9 00                         		dc.b bgm_LZ
00013AFA 00                         		dc.b bgm_MZ
00013AFB 00                         		dc.b bgm_SLZ
00013AFC 00                         		dc.b bgm_SYZ
00013AFD 00                         		dc.b bgm_SBZ
00013AFE                            		; The ending doesn't get an entry
00013AFE                            		even
00013AFE                            
00013AFE                            		include	"_incObj\Sonic Display.asm"
00013AFE                            ; ---------------------------------------------------------------------------
00013AFE                            ; Subroutine to display Sonic and set music
00013AFE                            ; ---------------------------------------------------------------------------
00013AFE                            
00013AFE                            Sonic_Display:
00013AFE 3028 0030                  		move.w	flashtime(a0),d0
00013B02 6700                       		beq.s	@display
00013B04 5368 0030                  		subq.w	#1,flashtime(a0)
00013B08 E648                       		lsr.w	#3,d0
00013B0A 6400                       		bcc.s	@chkinvincible
00013B0C                            
00013B0C                            	@display:
00013B0C 4EB9 0000 E428             		jsr	(DisplaySprite).l
00013B12                            
00013B12                            	@chkinvincible:
00013B12 4A38 FE2D                  		tst.b	(v_invinc).w	; does Sonic have invincibility?
00013B16 6700                       		beq.s	@chkshoes	; if not, branch
00013B18 4A68 0032                  		tst.w	invtime(a0)	; check	time remaining for invinciblity
00013B1C 6700                       		beq.s	@chkshoes	; if no	time remains, branch
00013B1E 5368 0032                  		subq.w	#1,invtime(a0)	; subtract 1 from time
00013B22 6600                       		bne.s	@chkshoes
00013B24 4A38 F7AA                  		tst.b	(f_lockscreen).w
00013B28 6600                       		bne.s	@removeinvincible
00013B2A 0C78 000C FE14             		cmpi.w	#$C,(v_air).w
00013B30 6500                       		bcs.s	@removeinvincible
00013B32 7000                       		moveq	#0,d0
00013B34 1038 FE10                  		move.b	(v_zone).w,d0
00013B38 0C78 0103 FE10             		cmpi.w	#(id_LZ<<8)+3,(v_zone).w ; check if level is SBZ3
00013B3E 6600                       		bne.s	@music
00013B40 7005                       		moveq	#5,d0		; play SBZ music
00013B42                            
00013B42                            	@music:
00013B42 43F9 0001 3AF8             		lea	(MusicList2).l,a1
00013B48 1031 0000                  		move.b	(a1,d0.w),d0
00013B4C 4EB9 0000 1184             		jsr	(PlaySound).l	; play normal music
00013B52                            
00013B52                            	@removeinvincible:
00013B52 11FC 0000 FE2D             		move.b	#0,(v_invinc).w ; cancel invincibility
00013B58                            
00013B58                            	@chkshoes:
00013B58 4A38 FE2E                  		tst.b	(v_shoes).w	; does Sonic have speed	shoes?
00013B5C 6700                       		beq.s	@exit		; if not, branch
00013B5E 4A68 0034                  		tst.w	shoetime(a0)	; check	time remaining
00013B62 6700                       		beq.s	@exit
00013B64 5368 0034                  		subq.w	#1,shoetime(a0)	; subtract 1 from time
00013B68 6600                       		bne.s	@exit
00013B6A 31FC 0600 F760             		move.w	#$600,(v_sonspeedmax).w ; restore Sonic's speed
00013B70 31FC 000C F762             		move.w	#$C,(v_sonspeedacc).w ; restore Sonic's acceleration
00013B76 31FC 0080 F764             		move.w	#$80,(v_sonspeeddec).w ; restore Sonic's deceleration
00013B7C 11FC 0000 FE2E             		move.b	#0,(v_shoes).w	; cancel speed shoes
00013B8C                            
00013B8C                            	@exit:
00013B8C 4E75                       		rts	
00013B8C 4E75                       		rts	
00013B8E                            		include	"_incObj\Sonic RecordPosition.asm"
00013B8E                            ; ---------------------------------------------------------------------------
00013B8E                            ; Subroutine to	record Sonic's previous positions for invincibility stars
00013B8E                            ; ---------------------------------------------------------------------------
00013B8E                            
00013B8E                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00013B8E                            
00013B8E                            
00013B8E                            Sonic_RecordPosition:
00013B8E 3038 F7A8                  		move.w	(v_trackpos).w,d0
00013B92 43F8 CB00                  		lea	(v_tracksonic).w,a1
00013B96 43F1 0000                  		lea	(a1,d0.w),a1
00013B9A 32E8 0008                  		move.w	obX(a0),(a1)+
00013B9E 32E8 000C                  		move.w	obY(a0),(a1)+
00013BA2 5838 F7A9                  		addq.b	#4,(v_trackbyte).w
00013BA6 4E75                       		rts	
00013BA8                            ; End of function Sonic_RecordPosition
00013BA8                            ; End of function Sonic_RecordPosition
00013BA8                            		include	"_incObj\Sonic Water.asm"
00013BA8                            ; ---------------------------------------------------------------------------
00013BA8                            ; Subroutine for Sonic when he's underwater
00013BA8                            ; ---------------------------------------------------------------------------
00013BA8                            
00013BA8                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00013BA8                            
00013BA8                            
00013BA8                            Sonic_Water:
00013BA8 0C38 0001 FE10             		cmpi.b	#1,(v_zone).w	; is level LZ?
00013BAE 6700                       		beq.s	@islabyrinth	; if yes, branch
00013BB0                            
00013BB0                            	@exit:
00013BB0 4E75                       		rts	
00013BB2                            ; ===========================================================================
00013BB2                            
00013BB2                            	@islabyrinth:
00013BB2 3038 F646                  		move.w	(v_waterpos1).w,d0
00013BB6 B068 000C                  		cmp.w	obY(a0),d0	; is Sonic above the water?
00013BBA 6C00                       		bge.s	@abovewater	; if yes, branch
00013BBC 08E8 0006 0022             		bset	#6,obStatus(a0)
00013BC2 66EC                       		bne.s	@exit
00013BC4                            	;	bsr.w	ResumeMusic
00013BC4 11FC 000A D340             		move.b	#id_DrownCount,(v_objspace+$340).w ; load bubbles object from Sonic's mouth
00013BCA 11FC 0081 D368             		move.b	#$81,(v_objspace+$340+obSubtype).w
00013BD0 31FC 0300 F760             		move.w	#$300,(v_sonspeedmax).w ; change Sonic's top speed
00013BD6 31FC 0006 F762             		move.w	#6,(v_sonspeedacc).w ; change Sonic's acceleration
00013BDC 31FC 0040 F764             		move.w	#$40,(v_sonspeeddec).w ; change Sonic's deceleration
00013BE2 E0E8 0010                  		asr	obVelX(a0)
00013BE6 E0E8 0012                  		asr	obVelY(a0)
00013BEA E0E8 0012                  		asr	obVelY(a0)	; slow Sonic
00013BEE 67C0                       		beq.s	@exit		; branch if Sonic stops moving
00013BF0 11FC 0008 D300             		move.b	#id_Splash,(v_objspace+$300).w ; load splash object
00013C00                            ; ===========================================================================
00013C00                            
00013C00                            @abovewater:
00013C00 08A8 0006 0022             		bclr	#6,obStatus(a0)
00013C06 67A8                       		beq.s	@exit
00013C08                            	;	bsr.w	ResumeMusic
00013C08 31FC 0600 F760             		move.w	#$600,(v_sonspeedmax).w ; restore Sonic's speed
00013C0E 31FC 000C F762             		move.w	#$C,(v_sonspeedacc).w ; restore Sonic's acceleration
00013C14 31FC 0080 F764             		move.w	#$80,(v_sonspeeddec).w ; restore Sonic's deceleration
00013C1A E1E8 0012                  		asl	obVelY(a0)
00013C1E 6700 FF90                  		beq.w	@exit
00013C22 11FC 0008 D300             		move.b	#id_Splash,(v_objspace+$300).w ; load splash object
00013C28 0C68 F000 0012             		cmpi.w	#-$1000,obVelY(a0)
00013C2E 6E00                       		bgt.s	@belowmaxspeed
00013C30 317C F000 0012             		move.w	#-$1000,obVelY(a0) ; set maximum speed on leaving water
00013C36                            
00013C36                            	@belowmaxspeed:
00013C40                            ; End of function Sonic_Water
00013C40                            ; End of function Sonic_Water
00013C40                            
00013C40                            ; ===========================================================================
00013C40                            ; ---------------------------------------------------------------------------
00013C40                            ; Modes	for controlling	Sonic
00013C40                            ; ---------------------------------------------------------------------------
00013C40                            
00013C40                            Sonic_MdNormal:
00013C40 6100 0000                  		bsr.w	Sonic_Dash
00013C44 6100 0000                  		bsr.w	Sonic_Jump
00013C48 6100 0000                  		bsr.w	Sonic_SlopeResist
00013C4C 6100 0000                  		bsr.w	Sonic_Move
00013C50 6100 0000                  		bsr.w	Sonic_Roll
00013C54 6100 0000                  		bsr.w	Sonic_LevelBound
00013C58 4EB9 0000 E402             		jsr	(SpeedToPos).l
00013C5E 6100 0000                  		bsr.w	Sonic_AnglePos
00013C62 6100 0000                  		bsr.w	Sonic_SlopeRepel
00013C66 4E75                       		rts	
00013C68                            ; ===========================================================================
00013C68                            
00013C68                            Sonic_MdJump:
00013C68 6100 0000                  		bsr.w	Sonic_JumpHeight
00013C6C 6100 0000                  		bsr.w	Sonic_JumpDirection
00013C70 6100 0000                  		bsr.w	Sonic_LevelBound
00013C74 4EB9 0000 E3D6             		jsr	(ObjectFall).l
00013C7A 0828 0006 0022             		btst	#6,obStatus(a0)
00013C80 6700                       		beq.s	loc_12E5C
00013C82 0468 0028 0012             		subi.w	#$28,obVelY(a0)
00013C88                            
00013C88                            loc_12E5C:
00013C88 6100 0000                  		bsr.w	Sonic_JumpAngle
00013C8C 6100 0000                  		bsr.w	Sonic_Floor
00013C90 4E75                       		rts	
00013C92                            ; ===========================================================================
00013C92                            
00013C92                            Sonic_AirRoll:
00013C92 0C28 0013 001C                     cmpi.b  #$13,$1C(a0)      ; are we already in rolling animation
00013C98 0C28 0002 001C                     cmpi.b  #2,$1C(a0)      ; are we already in rolling animation
00013C9E 6700                               beq.s   AirRoll_Return   ; if yes, branch
00013CA0                            		
00013CA0                            AirRoll_CheckBtn:
00013CA0 1038 F603                          move.b ($FFFFF603).w,d0 ; Move $FFFFF603 to d0
00013CA4 0200 0070                          andi.b #$70,d0 ; Has A/B/C been pressed?
00013CA8 6700                               beq.s  AirRoll_Return
00013CAA                            		
00013CAA 117C 0020 001C                     move.b #$20,$1C(a0) ; Set Sonic's animation to rolling.
00013CB0 303C 00A5                          move.w    #$A5,d0
00013CB4 4EB9 0000 118A                     jsr    (PlaySound_Special).l ;    play Sonic rolling sound
00013CBA                            		
00013CBA                            AirRoll_Return:
00013CBA 4E75                               rts
00013CBC                            
00013CBC                            Sonic_MdRoll:
00013CBC 6100 0000                  		bsr.w	Sonic_Jump
00013CC0 6100 0000                  		bsr.w	Sonic_RollRepel
00013CC4 6100 0000                  		bsr.w	Sonic_RollSpeed
00013CC8 6100 0000                  		bsr.w	Sonic_LevelBound
00013CCC 4EB9 0000 E402             		jsr	(SpeedToPos).l
00013CD2 6100 0000                  		bsr.w	Sonic_AnglePos
00013CD6 6100 0000                  		bsr.w	Sonic_SlopeRepel
00013CDA 4E75                       		rts	
00013CDC                            ; ===========================================================================
00013CDC                            
00013CDC                            Sonic_MdJump2:
00013CDC 6100 FFB4                  		bsr.w   Sonic_AirRoll
00013CE0 6100 0000                  		bsr.w	Sonic_JumpHeight
00013CE4 6100 0000                  		bsr.w	Sonic_JumpDirection
00013CE8 6100 0000                  		bsr.w	Sonic_LevelBound
00013CEC 4EB9 0000 E3D6             		jsr	(ObjectFall).l
00013CF2 0828 0006 0022             		btst	#6,obStatus(a0)
00013CF8 6700                       		beq.s	loc_12EA6
00013CFA 0468 0028 0012             		subi.w	#$28,obVelY(a0)
00013D00                            
00013D00                            loc_12EA6:
00013D00 6100 0000                  		bsr.w	Sonic_JumpAngle
00013D04 6100 0000                  		bsr.w	Sonic_Floor
00013D08 4E75                       		rts	
00013D0A                            
00013D0A                            		include	"_incObj\Sonic Move.asm"
00013D0A                            ; ---------------------------------------------------------------------------
00013D0A                            ; Subroutine to	make Sonic walk/run
00013D0A                            ; ---------------------------------------------------------------------------
00013D0A                            
00013D0A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00013D0A                            
00013D0A                            
00013D0A                            Sonic_Move:
00013D0A 3C38 F760                  		move.w	(v_sonspeedmax).w,d6
00013D0E 3A38 F762                  		move.w	(v_sonspeedacc).w,d5
00013D12 3838 F764                  		move.w	(v_sonspeeddec).w,d4
00013D16 4A38 F7CA                  		tst.b	(f_jumponly).w
00013D1A 6600 0000                  		bne.w	loc_12FEE
00013D1E 4A68 003E                  		tst.w	$3E(a0)
00013D22 6600 0000                  		bne.w	Sonic_ResetScr
00013D26 0838 0002 F602             		btst	#bitL,(v_jpadhold2).w ; is left being pressed?
00013D2C 6700                       		beq.s	@notleft	; if not, branch
00013D2E 6100 0000                  		bsr.w	Sonic_MoveLeft
00013D32                            
00013D32                            	@notleft:
00013D32 0838 0003 F602             		btst	#bitR,(v_jpadhold2).w ; is right being pressed?
00013D38 6700                       		beq.s	@notright	; if not, branch
00013D3A 6100 0000                  		bsr.w	Sonic_MoveRight
00013D3E                            
00013D3E                            	@notright:
00013D3E 1028 0026                  		move.b	obAngle(a0),d0
00013D42 0600 0020                  		addi.b	#$20,d0
00013D46 0200 00C0                  		andi.b	#$C0,d0		; is Sonic on a	slope?
00013D4A 6600 0000                  		bne.w	Sonic_ResetScr	; if yes, branch
00013D4E 4A68 0014                  		tst.w	obInertia(a0)	; is Sonic moving?
00013D52 6600 0000                  		bne.w	Sonic_ResetScr	; if yes, branch
00013D56 08A8 0005 0022             		bclr	#5,obStatus(a0)
00013D5C 117C 0000 001C             		move.b	#id_Wait,obAnim(a0) ; use "standing" animation
00013D62 0828 0003 0022             		btst	#3,obStatus(a0)
00013D68 6700                       		beq.s	Sonic_Balance
00013D6A 7000                       		moveq	#0,d0
00013D6C 1028 003D                  		move.b	$3D(a0),d0
00013D70 ED48                       		lsl.w	#6,d0
00013D72 43F8 D000                  		lea	(v_objspace).w,a1
00013D76 43F1 0000                  		lea	(a1,d0.w),a1
00013D7A 4A29 0022                  		tst.b	obStatus(a1)
00013D7E 6B00                       		bmi.s	Sonic_LookUp
00013D80 7200                       		moveq	#0,d1
00013D82 1229 0019                  		move.b	obActWid(a1),d1
00013D86 3401                       		move.w	d1,d2
00013D88 D442                       		add.w	d2,d2
00013D8A 5942                       		subq.w	#4,d2
00013D8C D268 0008                  		add.w	obX(a0),d1
00013D90 9269 0008                  		sub.w	obX(a1),d1
00013D94 0C41 0004                  		cmpi.w	#4,d1
00013D98 6D00                       		blt.s	loc_12F6A
00013D9A B242                       		cmp.w	d2,d1
00013D9C 6C00                       		bge.s	loc_12F5A
00013D9E 6000                       		bra.s	Sonic_LookUp
00013DA0                            ; ===========================================================================
00013DA0                            
00013DA0                            Sonic_Balance:
00013DA0 4EB9 0000 0000             		jsr	(ObjFloorDist).l
00013DA6 0C41 000C                  		cmpi.w	#$C,d1
00013DAA 6D00                       		blt.s	Sonic_LookUp
00013DAC 0C28 0003 0036             		cmpi.b	#3,$36(a0)
00013DB2 6600                       		bne.s	loc_12F62
00013DB4                            
00013DB4                            loc_12F5A:
00013DB4 08A8 0000 0022             		bclr	#0,obStatus(a0)
00013DBA 6000                       		bra.s	loc_12F70
00013DBC                            ; ===========================================================================
00013DBC                            
00013DBC                            loc_12F62:
00013DBC 0C28 0003 0037             		cmpi.b	#3,$37(a0)
00013DC2 6600                       		bne.s	Sonic_LookUp
00013DC4                            
00013DC4                            loc_12F6A:
00013DC4 08E8 0000 0022             		bset	#0,obStatus(a0)
00013DCA                            
00013DCA                            loc_12F70:
00013DCA 117C 0000 001C             		move.b	#id_Balance,obAnim(a0) ; use "balancing" animation
00013DD0 6000                       		bra.s	Sonic_ResetScr
00013DD2                            ; ===========================================================================
00013DD2                            
00013DD2                            Sonic_LookUp:
00013DD2 0838 0000 F602             		btst	#bitUp,(v_jpadhold2).w ; is up being pressed?
00013DD8 6700                       		beq.s	Sonic_Duck	; if not, branch
00013DDA 117C 0000 001C             		move.b	#id_LookUp,obAnim(a0) ; use "looking up" animation
00013DE0 0C78 00C8 F73E             		cmpi.w	#$C8,(v_lookshift).w
00013DE6 6700                       		beq.s	loc_12FC2
00013DE8 5478 F73E                  		addq.w	#2,(v_lookshift).w
00013DEC 6000                       		bra.s	loc_12FC2
00013DEE                            ; ===========================================================================
00013DEE                            
00013DEE                            Sonic_Duck:
00013DEE 0838 0001 F602             		btst	#bitDn,(v_jpadhold2).w ; is down being pressed?
00013DF4 6700                       		beq.s	Sonic_ResetScr	; if not, branch
00013DF6 117C 0000 001C             		move.b	#id_Duck,obAnim(a0) ; use "ducking" animation
00013DFC 0C78 0008 F73E             		cmpi.w	#8,(v_lookshift).w
00013E02 6700                       		beq.s	loc_12FC2
00013E04 5578 F73E                  		subq.w	#2,(v_lookshift).w
00013E08 6000                       		bra.s	loc_12FC2
00013E0A                            ; ===========================================================================
00013E0A                            
00013E0A                            Sonic_ResetScr:
00013E0A 0C78 0060 F73E             		cmpi.w	#$60,(v_lookshift).w ; is screen in its default position?
00013E10 6700                       		beq.s	loc_12FC2	; if yes, branch
00013E12 6400                       		bcc.s	loc_12FBE
00013E14 5878 F73E                  		addq.w	#4,(v_lookshift).w ; move screen back to default
00013E18                            
00013E18                            loc_12FBE:
00013E18 5578 F73E                  		subq.w	#2,(v_lookshift).w ; move screen back to default
00013E1C                            
00013E1C                            loc_12FC2:
00013E1C 1038 F602                  		move.b	(v_jpadhold2).w,d0
00013E20 0200 000C                  		andi.b	#btnL+btnR,d0	; is left/right	pressed?
00013E24 6600                       		bne.s	loc_12FEE	; if yes, branch
00013E26 3028 0014                  		move.w	obInertia(a0),d0
00013E2A 6700                       		beq.s	loc_12FEE
00013E2C 6B00                       		bmi.s	loc_12FE2
00013E2E 9045                       		sub.w	d5,d0
00013E30 6400                       		bcc.s	loc_12FDC
00013E32 303C 0000                  		move.w	#0,d0
00013E36                            
00013E36                            loc_12FDC:
00013E36 3140 0014                  		move.w	d0,obInertia(a0)
00013E3A 6000                       		bra.s	loc_12FEE
00013E3C                            ; ===========================================================================
00013E3C                            
00013E3C                            loc_12FE2:
00013E3C D045                       		add.w	d5,d0
00013E3E 6400                       		bcc.s	loc_12FEA
00013E40 303C 0000                  		move.w	#0,d0
00013E44                            
00013E44                            loc_12FEA:
00013E44 3140 0014                  		move.w	d0,obInertia(a0)
00013E48                            
00013E48                            loc_12FEE:
00013E48 1028 0026                  		move.b	obAngle(a0),d0
00013E4C 4EB9 0000 27EC             		jsr	(CalcSine).l
00013E52 C3E8 0014                  		muls.w	obInertia(a0),d1
00013E56 E081                       		asr.l	#8,d1
00013E58 3141 0010                  		move.w	d1,obVelX(a0)
00013E5C C1E8 0014                  		muls.w	obInertia(a0),d0
00013E60 E080                       		asr.l	#8,d0
00013E62 3140 0012                  		move.w	d0,obVelY(a0)
00013E66                            
00013E66                            loc_1300C:
00013E66 1028 0026                  		move.b	obAngle(a0),d0
00013E6A 0600 0040                  		addi.b	#$40,d0
00013E6E 6B00                       		bmi.s	locret_1307C
00013E70 123C 0040                  		move.b	#$40,d1
00013E74 4A68 0014                  		tst.w	obInertia(a0)
00013E78 6700                       		beq.s	locret_1307C
00013E7A 6B00                       		bmi.s	loc_13024
00013E7C 4441                       		neg.w	d1
00013E7E                            
00013E7E                            loc_13024:
00013E7E 1028 0026                  		move.b	obAngle(a0),d0
00013E82 D001                       		add.b	d1,d0
00013E84 3F00                       		move.w	d0,-(sp)
00013E86 6100 0000                  		bsr.w	Sonic_WalkSpeed
00013E8A 301F                       		move.w	(sp)+,d0
00013E8C 4A41                       		tst.w	d1
00013E8E 6A00                       		bpl.s	locret_1307C
00013E90 E141                       		asl.w	#8,d1
00013E92 0600 0020                  		addi.b	#$20,d0
00013E96 0200 00C0                  		andi.b	#$C0,d0
00013E9A 6700                       		beq.s	loc_13078
00013E9C 0C00 0040                  		cmpi.b	#$40,d0
00013EA0 6700                       		beq.s	loc_13066
00013EA2 0C00 0080                  		cmpi.b	#$80,d0
00013EA6 6700                       		beq.s	loc_13060
00013EA8 D368 0010                  		add.w	d1,obVelX(a0)
00013EAC 08E8 0005 0022             		bset	#5,obStatus(a0)
00013EB2 317C 0000 0014             		move.w	#0,obInertia(a0)
00013EB8 4E75                       		rts	
00013EBA                            ; ===========================================================================
00013EBA                            
00013EBA                            loc_13060:
00013EBA 9368 0012                  		sub.w	d1,obVelY(a0)
00013EBE 4E75                       		rts	
00013EC0                            ; ===========================================================================
00013EC0                            
00013EC0                            loc_13066:
00013EC0 9368 0010                  		sub.w	d1,obVelX(a0)
00013EC4 08E8 0005 0022             		bset	#5,obStatus(a0)
00013ECA 317C 0000 0014             		move.w	#0,obInertia(a0)
00013ED0 4E75                       		rts	
00013ED2                            ; ===========================================================================
00013ED2                            
00013ED2                            loc_13078:
00013ED2 D368 0012                  		add.w	d1,obVelY(a0)
00013ED6                            
00013ED6                            locret_1307C:
00013ED6 4E75                       		rts	
00013ED8                            ; End of function Sonic_Move
00013ED8                            
00013ED8                            
00013ED8                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00013ED8                            
00013ED8                            
00013ED8                            Sonic_MoveLeft:
00013ED8 3028 0014                  		move.w	obInertia(a0),d0
00013EDC 6700                       		beq.s	loc_13086
00013EDE 6A00                       		bpl.s	loc_130B2
00013EE0                            
00013EE0                            loc_13086:
00013EE0 08E8 0000 0022             		bset	#0,obStatus(a0)
00013EE6 6600                       		bne.s	loc_1309A
00013EE8 08A8 0005 0022             		bclr	#5,obStatus(a0)
00013EEE 117C 0001 001D             		move.b	#1,obNextAni(a0)
00013EF4                            
00013EF4                            loc_1309A:
00013EF4 9045                       		sub.w	d5,d0
00013EF6 3206                       		move.w	d6,d1
00013EF8 4441                       		neg.w	d1
00013EFA B041                       		cmp.w	d1,d0
00013EFC 6E00                       		bgt.s	loc_130A6
00013EFE 3001                       		move.w	d1,d0
00013F00                            
00013F00                            loc_130A6:
00013F00 3140 0014                  		move.w	d0,obInertia(a0)
00013F04 117C 0000 001C             		move.b	#id_Walk,obAnim(a0) ; use walking animation
00013F0A 4E75                       		rts	
00013F0C                            ; ===========================================================================
00013F0C                            
00013F0C                            loc_130B2:
00013F0C 9044                       		sub.w	d4,d0
00013F0E 6400                       		bcc.s	loc_130BA
00013F10 303C FF80                  		move.w	#-$80,d0
00013F14                            
00013F14                            loc_130BA:
00013F14 3140 0014                  		move.w	d0,obInertia(a0)
00013F18 1028 0026                  		move.b	obAngle(a0),d0
00013F1C 0600 0020                  		addi.b	#$20,d0
00013F20 0200 00C0                  		andi.b	#$C0,d0
00013F24 6600                       		bne.s	locret_130E8
00013F26 0C40 0400                  		cmpi.w	#$400,d0
00013F2A 6D00                       		blt.s	locret_130E8
00013F2C 117C 0000 001C             		move.b	#id_Stop,obAnim(a0) ; use "stopping" animation
00013F32 08A8 0000 0022             		bclr	#0,obStatus(a0)
00013F42                            
00013F42                            locret_130E8:
00013F42 4E75                       		rts	
00013F44                            ; End of function Sonic_MoveLeft
00013F44                            
00013F44                            
00013F44                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00013F44                            
00013F44                            
00013F44                            Sonic_MoveRight:
00013F44 3028 0014                  		move.w	obInertia(a0),d0
00013F48 6B00                       		bmi.s	loc_13118
00013F4A 08A8 0000 0022             		bclr	#0,obStatus(a0)
00013F50 6700                       		beq.s	loc_13104
00013F52 08A8 0005 0022             		bclr	#5,obStatus(a0)
00013F58 117C 0001 001D             		move.b	#1,obNextAni(a0)
00013F5E                            
00013F5E                            loc_13104:
00013F5E D045                       		add.w	d5,d0
00013F60 B046                       		cmp.w	d6,d0
00013F62 6D00                       		blt.s	loc_1310C
00013F64 3006                       		move.w	d6,d0
00013F66                            
00013F66                            loc_1310C:
00013F66 3140 0014                  		move.w	d0,obInertia(a0)
00013F6A 117C 0000 001C             		move.b	#id_Walk,obAnim(a0) ; use walking animation
00013F70 4E75                       		rts	
00013F72                            ; ===========================================================================
00013F72                            
00013F72                            loc_13118:
00013F72 D044                       		add.w	d4,d0
00013F74 6400                       		bcc.s	loc_13120
00013F76 303C 0080                  		move.w	#$80,d0
00013F7A                            
00013F7A                            loc_13120:
00013F7A 3140 0014                  		move.w	d0,obInertia(a0)
00013F7E 1028 0026                  		move.b	obAngle(a0),d0
00013F82 0600 0020                  		addi.b	#$20,d0
00013F86 0200 00C0                  		andi.b	#$C0,d0
00013F8A 6600                       		bne.s	locret_1314E
00013F8C 0C40 FC00                  		cmpi.w	#-$400,d0
00013F90 6E00                       		bgt.s	locret_1314E
00013F92 117C 0000 001C             		move.b	#id_Stop,obAnim(a0) ; use "stopping" animation
00013F98 08E8 0000 0022             		bset	#0,obStatus(a0)
00013FA8                            
00013FA8                            locret_1314E:
00013FA8 4E75                       		rts	
00013FAA                            ; End of function Sonic_MoveRight
00013FAA                            ; End of function Sonic_MoveRight
00013FAA                            		include	"_incObj\Sonic Dash.asm"
00013FAA                            Sonic_Dash:				; CODE XREF: ROM:Obj01_MdNormalp
00013FAA 4A28 0039                  		tst.b	$39(a0)
00013FAE 6600                       		bne.s	loc_10396
00013FB0 0C28 0000 001C             		cmpi.b	#id_LookUp,$1C(a0)
00013FB6 6600                       		bne.s	locret_10394
00013FB8 1038 F603                  		move.b	($FFFFF603).w,d0
00013FBC 0200 0070                  		andi.b	#$70,d0	; 'p'
00013FC0 6700 0000                  		beq.w	locret_10394
00013FC4 117C 0000 001C             		move.b	#id_Dash,$1C(a0)
00013FCA 303C 00A9                  		move.w	#$A9,d0	; ''
00013FCE 4EB9 0000 118A             		jsr	(PlaySound_Special).l
00013FD4 588F                       		addq.l	#4,sp
00013FD6 117C 0001 0039             		move.b	#1,$39(a0)
00013FDC                            
00013FDC                            locret_10394:				; CODE XREF: Sonic_Spindash+Cj
00013FDC                            					; Sonic_Spindash+16j
00013FDC 4E75                       		rts
00013FDE                            ; 
00013FDE                            
00013FDE                            loc_10396:				; CODE XREF: Sonic_Spindash+4j
00013FDE 1038 F602                  		move.b	($FFFFF602).w,d0
00013FE2 0800 0001                  		btst	#1,d0
00013FE6 6600                       		bne.s	loc_103DC
00013FE8                            	;	move.b	#$E,$16(a0)
00013FE8 117C 0007 0017             		move.b	#7,$17(a0)
00013FEE 117C 0001 001C             		move.b	#1,$1C(a0)
00013FF4 5A68 000C                  		addq.w	#5,$C(a0)
00013FF8 117C 0000 0039             		move.b	#0,$39(a0)
00013FFE 31FC 2000 EED0             		move.w	#$2000,($FFFFEED0).w
00014004 317C 0800 0014             		move.w	#$800,$14(a0)
0001400A 0828 0000 0022             		btst	#0,$22(a0)
00014010 6700                       		beq.s	loc_103D4
00014012 4468 0014                  		neg.w	$14(a0)
00014016                            
00014016                            loc_103D4:				; CODE XREF: Sonic_Spindash+6Cj
00014016 08E8 0001 0022             		bset	#1,$22(a0)
0001401C 4E75                       		rts
0001401E                            ; 
0001401E                            
0001401E                            loc_103DC:				; CODE XREF: Sonic_Spindash+3Cj
0001401E 1038 F603                  		move.b	($FFFFF603).w,d0
00014022 0200 0070                  		andi.b	#$70,d0	; 'p'
00014026 6700 0000                  		beq.w	loc_103EA
0001402A 4E71                       		nop
0001402C                            
0001402C                            loc_103EA:				; CODE XREF: Sonic_Spindash+82j
0001402C 588F                       		addq.l	#4,sp
0001402E 4E75                       		rts
00014030                            ; End of function Sonic_Spindash
00014030                            ; End of function Sonic_Spindash
00014030                            		include	"_incObj\Sonic RollSpeed.asm"
00014030                            ; ---------------------------------------------------------------------------
00014030                            ; Subroutine to	change Sonic's speed as he rolls
00014030                            ; ---------------------------------------------------------------------------
00014030                            
00014030                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00014030                            
00014030                            
00014030                            Sonic_RollSpeed:
00014030 3C38 F760                  		move.w	(v_sonspeedmax).w,d6
00014034 E346                       		asl.w	#1,d6
00014036 3A38 F762                  		move.w	(v_sonspeedacc).w,d5
0001403A E245                       		asr.w	#1,d5
0001403C 3838 F764                  		move.w	(v_sonspeeddec).w,d4
00014040 E444                       		asr.w	#2,d4
00014042 4A38 F7CA                  		tst.b	(f_jumponly).w
00014046 6600 0000                  		bne.w	loc_131CC
0001404A 4A68 003E                  		tst.w	$3E(a0)
0001404E 6600                       		bne.s	@notright
00014050 0838 0002 F602             		btst	#bitL,(v_jpadhold2).w ; is left being pressed?
00014056 6700                       		beq.s	@notleft	; if not, branch
00014058 6100 0000                  		bsr.w	Sonic_RollLeft
0001405C                            
0001405C                            	@notleft:
0001405C 0838 0003 F602             		btst	#bitR,(v_jpadhold2).w ; is right being pressed?
00014062 6700                       		beq.s	@notright	; if not, branch
00014064 6100 0000                  		bsr.w	Sonic_RollRight
00014068                            
00014068                            	@notright:
00014068 3028 0014                  		move.w	obInertia(a0),d0
0001406C 6700                       		beq.s	loc_131AA
0001406E 6B00                       		bmi.s	loc_1319E
00014070 9045                       		sub.w	d5,d0
00014072 6400                       		bcc.s	loc_13198
00014074 303C 0000                  		move.w	#0,d0
00014078                            
00014078                            loc_13198:
00014078 3140 0014                  		move.w	d0,obInertia(a0)
0001407C 6000                       		bra.s	loc_131AA
0001407E                            ; ===========================================================================
0001407E                            
0001407E                            loc_1319E:
0001407E D045                       		add.w	d5,d0
00014080 6400                       		bcc.s	loc_131A6
00014082 303C 0000                  		move.w	#0,d0
00014086                            
00014086                            loc_131A6:
00014086 3140 0014                  		move.w	d0,obInertia(a0)
0001408A                            
0001408A                            loc_131AA:
0001408A 4A68 0014                  		tst.w	obInertia(a0)	; is Sonic moving?
0001408E 6600                       		bne.s	loc_131CC	; if yes, branch
00014090 08A8 0002 0022             		bclr	#2,obStatus(a0)
00014096 117C 0013 0016             		move.b	#$13,obHeight(a0)
0001409C 117C 0009 0017             		move.b	#9,obWidth(a0)
000140A2 117C 0000 001C             		move.b	#id_Wait,obAnim(a0) ; use "standing" animation
000140A8 5B68 000C                  		subq.w	#5,obY(a0)
000140AC                            
000140AC                            loc_131CC:
000140AC 1028 0026                  		move.b	obAngle(a0),d0
000140B0 4EB9 0000 27EC             		jsr	(CalcSine).l
000140B6 C1E8 0014                  		muls.w	obInertia(a0),d0
000140BA E080                       		asr.l	#8,d0
000140BC 3140 0012                  		move.w	d0,obVelY(a0)
000140C0 C3E8 0014                  		muls.w	obInertia(a0),d1
000140C4 E081                       		asr.l	#8,d1
000140C6 0C41 1000                  		cmpi.w	#$1000,d1
000140CA 6F00                       		ble.s	loc_131F0
000140CC 323C 1000                  		move.w	#$1000,d1
000140D0                            
000140D0                            loc_131F0:
000140D0 0C41 F000                  		cmpi.w	#-$1000,d1
000140D4 6C00                       		bge.s	loc_131FA
000140D6 323C F000                  		move.w	#-$1000,d1
000140DA                            
000140DA                            loc_131FA:
000140DA 3141 0010                  		move.w	d1,obVelX(a0)
000140DE 6000 FD86                  		bra.w	loc_1300C
000140E2                            ; End of function Sonic_RollSpeed
000140E2                            
000140E2                            
000140E2                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000140E2                            
000140E2                            
000140E2                            Sonic_RollLeft:
000140E2 3028 0014                  		move.w	obInertia(a0),d0
000140E6 6700                       		beq.s	loc_1320A
000140E8 6A00                       		bpl.s	loc_13218
000140EA                            
000140EA                            loc_1320A:
000140EA 08E8 0000 0022             		bset	#0,obStatus(a0)
000140F0 117C 0000 001C             		move.b	#id_Roll,obAnim(a0) ; use "rolling" animation
000140F6 4E75                       		rts	
000140F8                            ; ===========================================================================
000140F8                            
000140F8                            loc_13218:
000140F8 9044                       		sub.w	d4,d0
000140FA 6400                       		bcc.s	loc_13220
000140FC 303C FF80                  		move.w	#-$80,d0
00014100                            
00014100                            loc_13220:
00014100 3140 0014                  		move.w	d0,obInertia(a0)
00014104 4E75                       		rts	
00014106                            ; End of function Sonic_RollLeft
00014106                            
00014106                            
00014106                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00014106                            
00014106                            
00014106                            Sonic_RollRight:
00014106 3028 0014                  		move.w	obInertia(a0),d0
0001410A 6B00                       		bmi.s	loc_1323A
0001410C 08A8 0000 0022             		bclr	#0,obStatus(a0)
00014112 117C 0000 001C             		move.b	#id_Roll,obAnim(a0) ; use "rolling" animation
00014118 4E75                       		rts	
0001411A                            ; ===========================================================================
0001411A                            
0001411A                            loc_1323A:
0001411A D044                       		add.w	d4,d0
0001411C 6400                       		bcc.s	loc_13242
0001411E 303C 0080                  		move.w	#$80,d0
00014122                            
00014122                            loc_13242:
00014122 3140 0014                  		move.w	d0,obInertia(a0)
00014126 4E75                       		rts	
00014128                            ; End of function Sonic_RollRight
00014128                            ; End of function Sonic_RollRight
00014128                            		include	"_incObj\Sonic JumpDirection.asm"
00014128                            ; ---------------------------------------------------------------------------
00014128                            ; Subroutine to	change Sonic's direction while jumping
00014128                            ; ---------------------------------------------------------------------------
00014128                            
00014128                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00014128                            
00014128                            
00014128                            Sonic_JumpDirection:
00014128 3C38 F760                  		move.w	(v_sonspeedmax).w,d6
0001412C 3A38 F762                  		move.w	(v_sonspeedacc).w,d5
00014130 E345                       		asl.w	#1,d5
00014132 0828 0004 0022             		btst	#4,obStatus(a0)
00014138 6600                       		bne.s	Obj01_ResetScr2
0001413A 3028 0010                  		move.w	obVelX(a0),d0
0001413E 0838 0002 F602             		btst	#bitL,(v_jpadhold2).w ; is left being pressed?
00014144 6700                       		beq.s	loc_13278	; if not, branch
00014146 08E8 0000 0022             		bset	#0,obStatus(a0)
0001414C 9045                       		sub.w	d5,d0
0001414E 3206                       		move.w	d6,d1
00014150 4441                       		neg.w	d1
00014152 B041                       		cmp.w	d1,d0
00014154 6E00                       		bgt.s	loc_13278
00014156 3001                       		move.w	d1,d0
00014158                            
00014158                            loc_13278:
00014158 0838 0003 F602             		btst	#bitR,(v_jpadhold2).w ; is right being pressed?
0001415E 6700                       		beq.s	Obj01_JumpMove	; if not, branch
00014160 08A8 0000 0022             		bclr	#0,obStatus(a0)
00014166 D045                       		add.w	d5,d0
00014168 B046                       		cmp.w	d6,d0
0001416A 6D00                       		blt.s	Obj01_JumpMove
0001416C 3006                       		move.w	d6,d0
0001416E                            
0001416E                            Obj01_JumpMove:
0001416E 3140 0010                  		move.w	d0,obVelX(a0)	; change Sonic's horizontal speed
00014172                            
00014172                            Obj01_ResetScr2:
00014172 0C78 0060 F73E             		cmpi.w	#$60,(v_lookshift).w ; is the screen in its default position?
00014178 6700                       		beq.s	loc_132A4	; if yes, branch
0001417A 6400                       		bcc.s	loc_132A0
0001417C 5878 F73E                  		addq.w	#4,(v_lookshift).w
00014180                            
00014180                            loc_132A0:
00014180 5578 F73E                  		subq.w	#2,(v_lookshift).w
00014184                            
00014184                            loc_132A4:
00014184 0C68 FC00 0012             		cmpi.w	#-$400,obVelY(a0) ; is Sonic moving faster than -$400 upwards?
0001418A 6500                       		bcs.s	locret_132D2	; if yes, branch
0001418C 3028 0010                  		move.w	obVelX(a0),d0
00014190 3200                       		move.w	d0,d1
00014192 EA41                       		asr.w	#5,d1
00014194 6700                       		beq.s	locret_132D2
00014196 6B00                       		bmi.s	loc_132C6
00014198 9041                       		sub.w	d1,d0
0001419A 6400                       		bcc.s	loc_132C0
0001419C 303C 0000                  		move.w	#0,d0
000141A0                            
000141A0                            loc_132C0:
000141A0 3140 0010                  		move.w	d0,obVelX(a0)
000141A4 4E75                       		rts	
000141A6                            ; ===========================================================================
000141A6                            
000141A6                            loc_132C6:
000141A6 9041                       		sub.w	d1,d0
000141A8 6500                       		bcs.s	loc_132CE
000141AA 303C 0000                  		move.w	#0,d0
000141AE                            
000141AE                            loc_132CE:
000141AE 3140 0010                  		move.w	d0,obVelX(a0)
000141B2                            
000141B2                            locret_132D2:
000141B2 4E75                       		rts	
000141B4                            ; End of function Sonic_JumpDirection
000141B4                            ; End of function Sonic_JumpDirection
000141B4                            
000141B4                            ; ===========================================================================
000141B4                            ; ---------------------------------------------------------------------------
000141B4                            ; Unused subroutine to squash Sonic
000141B4                            ; ---------------------------------------------------------------------------
000141B4 1028 0026                  		move.b	obAngle(a0),d0
000141B8 0600 0020                  		addi.b	#$20,d0
000141BC 0200 00C0                  		andi.b	#$C0,d0
000141C0 6600                       		bne.s	locret_13302
000141C2 6100 0000                  		bsr.w	Sonic_DontRunOnWalls
000141C6 4A41                       		tst.w	d1
000141C8 6A00                       		bpl.s	locret_13302
000141CA 317C 0000 0014             		move.w	#0,obInertia(a0) ; stop Sonic moving
000141D0 317C 0000 0010             		move.w	#0,obVelX(a0)
000141D6 317C 0000 0012             		move.w	#0,obVelY(a0)
000141DC 117C 0000 001C             		move.b	#id_Warp3,obAnim(a0) ; use "warping" animation
000141E2                            
000141E2                            locret_13302:
000141E2 4E75                       		rts	
000141E4                            
000141E4                            		include	"_incObj\Sonic LevelBound.asm"
000141E4                            ; ---------------------------------------------------------------------------
000141E4                            ; Subroutine to	prevent	Sonic leaving the boundaries of	a level
000141E4                            ; ---------------------------------------------------------------------------
000141E4                            
000141E4                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000141E4                            
000141E4                            
000141E4                            Sonic_LevelBound:
000141E4 2228 0008                  		move.l	obX(a0),d1
000141E8 3028 0010                  		move.w	obVelX(a0),d0
000141EC 48C0                       		ext.l	d0
000141EE E180                       		asl.l	#8,d0
000141F0 D280                       		add.l	d0,d1
000141F2 4841                       		swap	d1
000141F4 3038 F728                  		move.w	(v_limitleft2).w,d0
000141F8 0640 0010                  		addi.w	#$10,d0
000141FC B041                       		cmp.w	d1,d0		; has Sonic touched the	side boundary?
000141FE 6200                       		bhi.s	@sides		; if yes, branch
00014200 3038 F72A                  		move.w	(v_limitright2).w,d0
00014204 0640 0128                  		addi.w	#$128,d0
00014208 4A38 F7AA                  		tst.b	(f_lockscreen).w
0001420C 6600                       		bne.s	@screenlocked
0001420E 0640 0040                  		addi.w	#$40,d0
00014212                            
00014212                            	@screenlocked:
00014212 B041                       		cmp.w	d1,d0		; has Sonic touched the	side boundary?
00014214 6300                       		bls.s	@sides		; if yes, branch
00014216                            
00014216                            	@chkbottom:
00014216 3038 F72E                  		move.w	(v_limitbtm2).w,d0
0001421A 0640 00E0                  		addi.w	#$E0,d0
0001421E B068 000C                  		cmp.w	obY(a0),d0	; has Sonic touched the	bottom boundary?
00014222 6D00                       		blt.s	@bottom		; if yes, branch
00014224 4E75                       		rts	
00014226                            ; ===========================================================================
00014226                            
00014226                            @bottom:
00014226 3038 F726                  		move.w (v_limitbtm1).w,d0
0001422A 3238 F72E                  		move.w (v_limitbtm2).w,d1
0001422E B240                       		cmp.w d0,d1
00014230 6D00                       		blt.s @cont
00014232 0C78 0501 FE10             		cmpi.w	#(id_SBZ<<8)+1,(v_zone).w ; is level SBZ2 ?
00014238 6600 0000                  		bne.w	KillSonic	; if not, kill Sonic
0001423C 0C78 2000 D008             		cmpi.w	#$2000,(v_player+obX).w
00014242 6500 0000                  		bcs.w	KillSonic
00014246 4238 FE30                  		clr.b	(v_lastlamp).w	; clear	lamppost counter
0001424A 31FC 0001 FE02             		move.w	#1,(f_restart).w ; restart the level
00014250 31FC 0103 FE10             		move.w	#(id_LZ<<8)+3,(v_zone).w ; set level to SBZ3 (LZ4)
00014256 4E75                       		rts	
00014258                            		
00014258                            	@cont:
00014258 4E75                       		rts
0001425A                            ; ===========================================================================
0001425A                            
0001425A                            @sides:
0001425A 3140 0008                  		move.w	d0,obX(a0)
0001425E 317C 0000 000A             		move.w	#0,obX+2(a0)
00014264 317C 0000 0010             		move.w	#0,obVelX(a0)	; stop Sonic moving
0001426A 317C 0000 0014             		move.w	#0,obInertia(a0)
00014270 60A4                       		bra.s	@chkbottom
00014272                            ; End of function Sonic_LevelBound
00014272                            ; End of function Sonic_LevelBound
00014272                            		include	"_incObj\Sonic Roll.asm"
00014272                            ; ---------------------------------------------------------------------------
00014272                            ; Subroutine allowing Sonic to roll when he's moving
00014272                            ; ---------------------------------------------------------------------------
00014272                            
00014272                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00014272                            
00014272                            
00014272                            Sonic_Roll:
00014272 4A38 F7CA                  		tst.b	(f_jumponly).w
00014276 6600                       		bne.s	@noroll
00014278 3028 0014                  		move.w	obInertia(a0),d0
0001427C 6A00                       		bpl.s	@ispositive
0001427E 4440                       		neg.w	d0
00014280                            
00014280                            	@ispositive:
00014280 0C40 0080                  		cmpi.w	#$80,d0		; is Sonic moving at $80 speed or faster?
00014284 6500                       		bcs.s	@noroll		; if not, branch
00014286 1038 F602                  		move.b	(v_jpadhold2).w,d0
0001428A 0200 000C                  		andi.b	#btnL+btnR,d0	; is left/right	being pressed?
0001428E 6600                       		bne.s	@noroll		; if yes, branch
00014290 0838 0001 F602             		btst	#bitDn,(v_jpadhold2).w ; is down being pressed?
00014296 6600                       		bne.s	Sonic_ChkRoll	; if yes, branch
00014298                            
00014298                            	@noroll:
00014298 4E75                       		rts	
0001429A                            ; ===========================================================================
0001429A                            
0001429A                            Sonic_ChkRoll:
0001429A 0828 0002 0022             		btst	#2,obStatus(a0)	; is Sonic already rolling?
000142A0 6700                       		beq.s	@roll		; if not, branch
000142A2 4E75                       		rts	
000142A4                            ; ===========================================================================
000142A4                            
000142A4                            @roll:
000142A4 08E8 0002 0022             		bset	#2,obStatus(a0)
000142AA 117C 000E 0016             		move.b	#$E,obHeight(a0)
000142B0 117C 0007 0017             		move.b	#7,obWidth(a0)
000142B6 117C 0000 001C             		move.b	#id_Roll,obAnim(a0) ; use "rolling" animation
000142BC 5A68 000C                  		addq.w	#5,obY(a0)
000142CA 4A68 0014                  		tst.w	obInertia(a0)
000142CE 6600                       		bne.s	@ismoving
000142D0 317C 0200 0014             		move.w	#$200,obInertia(a0) ; set inertia if 0
000142D6                            
000142D6                            	@ismoving:
000142D6 4E75                       		rts	
000142D8                            ; End of function Sonic_Roll
000142D8                            ; End of function Sonic_Roll
000142D8                            		include	"_incObj\Sonic Jump.asm"
000142D8                            ; ---------------------------------------------------------------------------
000142D8                            ; Subroutine allowing Sonic to jump
000142D8                            ; ---------------------------------------------------------------------------
000142D8                            
000142D8                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000142D8                            
000142D8                            
000142D8                            Sonic_Jump:
000142D8 1038 F603                  		move.b	(v_jpadpress2).w,d0
000142DC 0200 0070                  		andi.b	#btnABC,d0	; is A, B or C pressed?
000142E0 6700 0000                  		beq.w	locret_1348E	; if not, branch
000142E4 7000                       		moveq	#0,d0
000142E6 1028 0026                  		move.b	obAngle(a0),d0
000142EA 0600 0080                  		addi.b	#$80,d0
000142EE 6100 0000                  		bsr.w	sub_14D48
000142F2 0C41 0006                  		cmpi.w	#6,d1
000142F6 6D00 0000                  		blt.w	locret_1348E
000142FA 343C 0680                  		move.w	#$680,d2
000142FE 0828 0006 0022             		btst	#6,obStatus(a0)
00014304 6700                       		beq.s	loc_1341C
00014306 343C 0380                  		move.w	#$380,d2
0001430A                            
0001430A                            loc_1341C:
0001430A 7000                       		moveq	#0,d0
0001430C 1028 0026                  		move.b	obAngle(a0),d0
00014310 0400 0040                  		subi.b	#$40,d0
00014314 4EB9 0000 27EC             		jsr	(CalcSine).l
0001431A C3C2                       		muls.w	d2,d1
0001431C E081                       		asr.l	#8,d1
0001431E D368 0010                  		add.w	d1,obVelX(a0)	; make Sonic jump
00014322 C1C2                       		muls.w	d2,d0
00014324 E080                       		asr.l	#8,d0
00014326 D168 0012                  		add.w	d0,obVelY(a0)	; make Sonic jump
0001432A 08E8 0001 0022             		bset	#1,obStatus(a0)
00014330 08A8 0005 0022             		bclr	#5,obStatus(a0)
00014336 588F                       		addq.l	#4,sp
00014338 117C 0001 003C             		move.b	#1,$3C(a0)
0001433E 4228 0038                  		clr.b	$38(a0)
0001434C 117C 0013 0016             		move.b	#$13,obHeight(a0)
00014352 117C 0009 0017             		move.b	#9,obWidth(a0)
00014358 0828 0002 0022             		btst	#2,obStatus(a0)
0001435E 6600                       		bne.s	loc_13490
00014360 117C 000E 0016             		move.b	#$E,obHeight(a0)
00014366                            	;	move.b	#7,obWidth(a0)
00014366 117C 0000 001C             		move.b	#id_Jump,obAnim(a0) ; use "jumping" animation
0001436C 08E8 0002 0022             		bset	#2,obStatus(a0)
00014372 5A68 000C                  		addq.w	#5,obY(a0)
00014376                            Result_Check:
00014376 4A38 F5C0                          tst.b   ($FFFFF5C0).w ; Has the victory animation flag been set?
0001437A 6700                               beq.s   NormalJump ; If not, branch
0001437C 117C 0000 001C             		move.b	#id_Leap2,obAnim(a0) ; use "jumping" animation
00014382 6000                               bra.s   cont ; Continue
00014384                            NormalJump:
00014384 117C 0000 001C             		move.b	#id_Jump,obAnim(a0) ; use "jumping" animation
0001438A                            cont:
0001438A                            		
0001438A                            locret_1348E:
0001438A 4E75                       		rts	
0001438C                            ; ===========================================================================
0001438C                            
0001438C                            loc_13490:
0001438C 08E8 0004 0022             		bset	#4,obStatus(a0)
00014392 4E75                       		rts	
00014394                            ; End of function Sonic_Jump
00014394                            ; End of function Sonic_Jump
00014394                            		include	"_incObj\Sonic JumpHeight.asm"
00014394                            ; ---------------------------------------------------------------------------
00014394                            ; Subroutine controlling Sonic's jump height/duration
00014394                            ; ---------------------------------------------------------------------------
00014394                            
00014394                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00014394                            
00014394                            
00014394                            Sonic_JumpHeight:
00014394 4A28 003C                  		tst.b	$3C(a0)
00014398 6700                       		beq.s	loc_134C4
0001439A 323C FC00                  		move.w	#-$400,d1
0001439E 0828 0006 0022             		btst	#6,obStatus(a0)
000143A4 6700                       		beq.s	loc_134AE
000143A6 323C FE00                  		move.w	#-$200,d1
000143AA                            
000143AA                            loc_134AE:
000143AA B268 0012                  		cmp.w	obVelY(a0),d1
000143AE 6F00                       		ble.s	locret_134C2
000143B0 1038 F602                  		move.b	(v_jpadhold2).w,d0
000143B4 0200 0070                  		andi.b	#btnABC,d0	; is A, B or C pressed?
000143B8 6600                       		bne.s	locret_134C2	; if yes, branch
000143BA 3141 0012                  		move.w	d1,obVelY(a0)
000143BE                            		
000143BE                            VictoryAnimTest:
000143BE 4A38 F5C0                          tst.b   ($FFFFF5C0).w ; Has the victory animation flag been set?
000143C2 6700                               beq.s   JumpFall ; If not, branch
000143C4 117C 0000 001C             		move.b	#id_Leap2,obAnim(a0) ; use "victory" animation
000143CA                            
000143CA                            locret_134C2:
000143CA 4E75                       		rts	
000143CC                            		
000143CC                            JumpFall:
000143CC 117C 0000 001C             		move.b	#id_Fall,obAnim(a0) ; use "falling" animation
000143D2                            ; ===========================================================================
000143D2                            
000143D2                            loc_134C4:
000143D2 0C68 F040 0012             		cmpi.w	#-$FC0,obVelY(a0)
000143D8 6C00                       		bge.s	locret_134D2
000143DA 317C F040 0012             		move.w	#-$FC0,obVelY(a0)
000143E0                            
000143E0                            locret_134D2:
000143E0 4E75                       		rts	
000143E2                            ; End of function Sonic_JumpHeight
000143E2                            ; End of function Sonic_JumpHeight
000143E2                            		include	"_incObj\Sonic SlopeResist.asm"
000143E2                            ; ---------------------------------------------------------------------------
000143E2                            ; Subroutine to	slow Sonic walking up a	slope
000143E2                            ; ---------------------------------------------------------------------------
000143E2                            
000143E2                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000143E2                            
000143E2                            
000143E2                            Sonic_SlopeResist:
000143E2 1028 0026                  		move.b	obAngle(a0),d0
000143E6 0600 0060                  		addi.b	#$60,d0
000143EA 0C00 00C0                  		cmpi.b	#$C0,d0
000143EE 6400                       		bcc.s	locret_13508
000143F0 1028 0026                  		move.b	obAngle(a0),d0
000143F4 4EB9 0000 27EC             		jsr	(CalcSine).l
000143FA C1FC 0020                  		muls.w	#$20,d0
000143FE E080                       		asr.l	#8,d0
00014400 4A68 0014                  		tst.w	obInertia(a0)
00014404 6700                       		beq.s	locret_13508
00014406 6B00                       		bmi.s	loc_13504
00014408 4A40                       		tst.w	d0
0001440A 6700                       		beq.s	locret_13502
0001440C D168 0014                  		add.w	d0,obInertia(a0) ; change Sonic's inertia
00014410                            
00014410                            locret_13502:
00014410 4E75                       		rts	
00014412                            ; ===========================================================================
00014412                            
00014412                            loc_13504:
00014412 D168 0014                  		add.w	d0,obInertia(a0)
00014416                            
00014416                            locret_13508:
00014416 4E75                       		rts	
00014418                            ; End of function Sonic_SlopeResist
00014418                            ; End of function Sonic_SlopeResist
00014418                            		include	"_incObj\Sonic RollRepel.asm"
00014418                            ; ---------------------------------------------------------------------------
00014418                            ; Subroutine to	push Sonic down	a slope	while he's rolling
00014418                            ; ---------------------------------------------------------------------------
00014418                            
00014418                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00014418                            
00014418                            
00014418                            Sonic_RollRepel:
00014418 1028 0026                  		move.b	obAngle(a0),d0
0001441C 0600 0060                  		addi.b	#$60,d0
00014420 0C00 00C0                  		cmpi.b	#-$40,d0
00014424 6400                       		bcc.s	locret_13544
00014426 1028 0026                  		move.b	obAngle(a0),d0
0001442A 4EB9 0000 27EC             		jsr	(CalcSine).l
00014430 C1FC 0050                  		muls.w	#$50,d0
00014434 E080                       		asr.l	#8,d0
00014436 4A68 0014                  		tst.w	obInertia(a0)
0001443A 6B00                       		bmi.s	loc_1353A
0001443C 4A40                       		tst.w	d0
0001443E 6A00                       		bpl.s	loc_13534
00014440 E480                       		asr.l	#2,d0
00014442                            
00014442                            loc_13534:
00014442 D168 0014                  		add.w	d0,obInertia(a0)
00014446 4E75                       		rts	
00014448                            ; ===========================================================================
00014448                            
00014448                            loc_1353A:
00014448 4A40                       		tst.w	d0
0001444A 6B00                       		bmi.s	loc_13540
0001444C E480                       		asr.l	#2,d0
0001444E                            
0001444E                            loc_13540:
0001444E D168 0014                  		add.w	d0,obInertia(a0)
00014452                            
00014452                            locret_13544:
00014452 4E75                       		rts	
00014454                            ; End of function Sonic_RollRepel
00014454                            ; End of function Sonic_RollRepel
00014454                            		include	"_incObj\Sonic SlopeRepel.asm"
00014454                            ; ---------------------------------------------------------------------------
00014454                            ; Subroutine to	push Sonic down	a slope
00014454                            ; ---------------------------------------------------------------------------
00014454                            
00014454                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00014454                            
00014454                            
00014454                            Sonic_SlopeRepel:
00014454 4E71                       		nop	
00014456 4A28 0038                  		tst.b	$38(a0)
0001445A 6600                       		bne.s	locret_13580
0001445C 4A68 003E                  		tst.w	$3E(a0)
00014460 6600                       		bne.s	loc_13582
00014462 1028 0026                  		move.b	obAngle(a0),d0
00014466 0600 0020                  		addi.b	#$20,d0
0001446A 0200 00C0                  		andi.b	#$C0,d0
0001446E 6700                       		beq.s	locret_13580
00014470 3028 0014                  		move.w	obInertia(a0),d0
00014474 6A00                       		bpl.s	loc_1356A
00014476 4440                       		neg.w	d0
00014478                            
00014478                            loc_1356A:
00014478 0C40 0280                  		cmpi.w	#$280,d0
0001447C 6400                       		bcc.s	locret_13580
0001447E 4268 0014                  		clr.w	obInertia(a0)
00014482 08E8 0001 0022             		bset	#1,obStatus(a0)
00014488 317C 001E 003E             		move.w	#$1E,$3E(a0)
0001448E                            
0001448E                            locret_13580:
0001448E 4E75                       		rts	
00014490                            ; ===========================================================================
00014490                            
00014490                            loc_13582:
00014490 5368 003E                  		subq.w	#1,$3E(a0)
00014494 4E75                       		rts	
00014496                            ; End of function Sonic_SlopeRepel
00014496                            ; End of function Sonic_SlopeRepel
00014496                            		include	"_incObj\Sonic JumpAngle.asm"
00014496                            ; ---------------------------------------------------------------------------
00014496                            ; Subroutine to	return Sonic's angle to 0 as he jumps
00014496                            ; ---------------------------------------------------------------------------
00014496                            
00014496                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00014496                            
00014496                            
00014496                            Sonic_JumpAngle:
00014496 1028 0026                  		move.b	obAngle(a0),d0	; get Sonic's angle
0001449A 6700                       		beq.s	locret_135A2	; if already 0,	branch
0001449C 6A00                       		bpl.s	loc_13598	; if higher than 0, branch
0001449E                            
0001449E 5400                       		addq.b	#2,d0		; increase angle
000144A0 6400                       		bcc.s	loc_13596
000144A2 7000                       		moveq	#0,d0
000144A4                            
000144A4                            loc_13596:
000144A4 6000                       		bra.s	loc_1359E
000144A6                            ; ===========================================================================
000144A6                            
000144A6                            loc_13598:
000144A6 5500                       		subq.b	#2,d0		; decrease angle
000144A8 6400                       		bcc.s	loc_1359E
000144AA 7000                       		moveq	#0,d0
000144AC                            
000144AC                            loc_1359E:
000144AC 1140 0026                  		move.b	d0,obAngle(a0)
000144B0                            
000144B0                            locret_135A2:
000144B0 4E75                       		rts	
000144B2                            ; End of function Sonic_JumpAngle
000144B2                            ; End of function Sonic_JumpAngle
000144B2                            		include	"_incObj\Sonic Floor.asm"
000144B2                            ; ---------------------------------------------------------------------------
000144B2                            ; Subroutine for Sonic to interact with	the floor after	jumping/falling
000144B2                            ; ---------------------------------------------------------------------------
000144B2                            
000144B2                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000144B2                            
000144B2                            
000144B2                            Sonic_Floor:
000144B2 3228 0010                  		move.w	obVelX(a0),d1
000144B6 3428 0012                  		move.w	obVelY(a0),d2
000144BA 4EB9 0000 2ABA             		jsr	(CalcAngle).l
000144C0 11C0 FFEC                  		move.b	d0,($FFFFFFEC).w
000144C4 0400 0020                  		subi.b	#$20,d0
000144C8 11C0 FFED                  		move.b	d0,($FFFFFFED).w
000144CC 0200 00C0                  		andi.b	#$C0,d0
000144D0 11C0 FFEE                  		move.b	d0,($FFFFFFEE).w
000144D4 0C00 0040                  		cmpi.b	#$40,d0
000144D8 6700 0000                  		beq.w	loc_13680
000144DC 0C00 0080                  		cmpi.b	#$80,d0
000144E0 6700 0000                  		beq.w	loc_136E2
000144E4 0C00 00C0                  		cmpi.b	#$C0,d0
000144E8 6700 0000                  		beq.w	loc_1373E
000144EC 6100 0000                  		bsr.w	Sonic_HitWall
000144F0 4A41                       		tst.w	d1
000144F2 6A00                       		bpl.s	loc_135F0
000144F4 9368 0008                  		sub.w	d1,obX(a0)
000144F8 317C 0000 0010             		move.w	#0,obVelX(a0)
000144FE                            
000144FE                            loc_135F0:
000144FE 6100 0000                  		bsr.w	sub_14EB4
00014502 4A41                       		tst.w	d1
00014504 6A00                       		bpl.s	loc_13602
00014506 D368 0008                  		add.w	d1,obX(a0)
0001450A 317C 0000 0010             		move.w	#0,obVelX(a0)
00014510                            
00014510                            loc_13602:
00014510 6100 0000                  		bsr.w	Sonic_HitFloor
00014514 11C1 FFEF                  		move.b	d1,($FFFFFFEF).w
00014518 4A41                       		tst.w	d1
0001451A 6A00                       		bpl.s	locret_1367E
0001451C 1428 0012                  		move.b	obVelY(a0),d2
00014520 5002                       		addq.b	#8,d2
00014522 4402                       		neg.b	d2
00014524 B202                       		cmp.b	d2,d1
00014526 6C00                       		bge.s	loc_1361E
00014528 B002                       		cmp.b	d2,d0
0001452A 6D00                       		blt.s	locret_1367E
0001452C                            
0001452C                            loc_1361E:
0001452C D368 000C                  		add.w	d1,obY(a0)
00014530 1143 0026                  		move.b	d3,obAngle(a0)
00014534 6100 0000                  		bsr.w	Sonic_ResetOnFloor
00014538 117C 0000 001C             		move.b	#id_Walk,obAnim(a0)
0001453E 1003                       		move.b	d3,d0
00014540 0600 0020                  		addi.b	#$20,d0
00014544 0200 0040                  		andi.b	#$40,d0
00014548 6600                       		bne.s	loc_1365C
0001454A 1003                       		move.b	d3,d0
0001454C 0600 0010                  		addi.b	#$10,d0
00014550 0200 0020                  		andi.b	#$20,d0
00014554 6700                       		beq.s	loc_1364E
00014556 E0E8 0012                  		asr	obVelY(a0)
0001455A 6000                       		bra.s	loc_13670
0001455C                            ; ===========================================================================
0001455C                            
0001455C                            loc_1364E:
0001455C 317C 0000 0012             		move.w	#0,obVelY(a0)
00014562 3168 0010 0014             		move.w	obVelX(a0),obInertia(a0)
00014568 4E75                       		rts	
0001456A                            ; ===========================================================================
0001456A                            
0001456A                            loc_1365C:
0001456A 317C 0000 0010             		move.w	#0,obVelX(a0)
00014570 0C68 0FC0 0012             		cmpi.w	#$FC0,obVelY(a0)
00014576 6F00                       		ble.s	loc_13670
00014578 317C 0FC0 0012             		move.w	#$FC0,obVelY(a0)
0001457E                            
0001457E                            loc_13670:
0001457E 3168 0012 0014             		move.w	obVelY(a0),obInertia(a0)
00014584 4A03                       		tst.b	d3
00014586 6A00                       		bpl.s	locret_1367E
00014588 4468 0014                  		neg.w	obInertia(a0)
0001458C                            
0001458C                            locret_1367E:
0001458C 4E75                       		rts	
0001458E                            ; ===========================================================================
0001458E                            
0001458E                            loc_13680:
0001458E 6100 0000                  		bsr.w	Sonic_HitWall
00014592 4A41                       		tst.w	d1
00014594 6A00                       		bpl.s	loc_1369A
00014596 9368 0008                  		sub.w	d1,obX(a0)
0001459A 317C 0000 0010             		move.w	#0,obVelX(a0)
000145A0 3168 0012 0014             		move.w	obVelY(a0),obInertia(a0)
000145A6 4E75                       		rts	
000145A8                            ; ===========================================================================
000145A8                            
000145A8                            loc_1369A:
000145A8 6100 0000                  		bsr.w	Sonic_DontRunOnWalls
000145AC 4A41                       		tst.w	d1
000145AE 6A00                       		bpl.s	loc_136B4
000145B0 9368 000C                  		sub.w	d1,obY(a0)
000145B4 4A68 0012                  		tst.w	obVelY(a0)
000145B8 6A00                       		bpl.s	locret_136B2
000145BA 317C 0000 0012             		move.w	#0,obVelY(a0)
000145C0                            
000145C0                            locret_136B2:
000145C0 4E75                       		rts	
000145C2                            ; ===========================================================================
000145C2                            
000145C2                            loc_136B4:
000145C2 4A68 0012                  		tst.w	obVelY(a0)
000145C6 6B00                       		bmi.s	locret_136E0
000145C8 6100 0000                  		bsr.w	Sonic_HitFloor
000145CC 4A41                       		tst.w	d1
000145CE 6A00                       		bpl.s	locret_136E0
000145D0 D368 000C                  		add.w	d1,obY(a0)
000145D4 1143 0026                  		move.b	d3,obAngle(a0)
000145D8 6100 0000                  		bsr.w	Sonic_ResetOnFloor
000145DC 117C 0000 001C             		move.b	#id_Walk,obAnim(a0)
000145E2 317C 0000 0012             		move.w	#0,obVelY(a0)
000145E8 3168 0010 0014             		move.w	obVelX(a0),obInertia(a0)
000145EE                            
000145EE                            locret_136E0:
000145EE 4E75                       		rts	
000145F0                            ; ===========================================================================
000145F0                            
000145F0                            loc_136E2:
000145F0 6100 0000                  		bsr.w	Sonic_HitWall
000145F4 4A41                       		tst.w	d1
000145F6 6A00                       		bpl.s	loc_136F4
000145F8 9368 0008                  		sub.w	d1,obX(a0)
000145FC 317C 0000 0010             		move.w	#0,obVelX(a0)
00014602                            
00014602                            loc_136F4:
00014602 6100 0000                  		bsr.w	sub_14EB4
00014606 4A41                       		tst.w	d1
00014608 6A00                       		bpl.s	loc_13706
0001460A D368 0008                  		add.w	d1,obX(a0)
0001460E 317C 0000 0010             		move.w	#0,obVelX(a0)
00014614                            
00014614                            loc_13706:
00014614 6100 0000                  		bsr.w	Sonic_DontRunOnWalls
00014618 4A41                       		tst.w	d1
0001461A 6A00                       		bpl.s	locret_1373C
0001461C 9368 000C                  		sub.w	d1,obY(a0)
00014620 1003                       		move.b	d3,d0
00014622 0600 0020                  		addi.b	#$20,d0
00014626 0200 0040                  		andi.b	#$40,d0
0001462A 6600                       		bne.s	loc_13726
0001462C 317C 0000 0012             		move.w	#0,obVelY(a0)
00014632 4E75                       		rts	
00014634                            ; ===========================================================================
00014634                            
00014634                            loc_13726:
00014634 1143 0026                  		move.b	d3,obAngle(a0)
00014638 6100 0000                  		bsr.w	Sonic_ResetOnFloor
0001463C 3168 0012 0014             		move.w	obVelY(a0),obInertia(a0)
00014642 4A03                       		tst.b	d3
00014644 6A00                       		bpl.s	locret_1373C
00014646 4468 0014                  		neg.w	obInertia(a0)
0001464A                            
0001464A                            locret_1373C:
0001464A 4E75                       		rts	
0001464C                            ; ===========================================================================
0001464C                            
0001464C                            loc_1373E:
0001464C 6100 0000                  		bsr.w	sub_14EB4
00014650 4A41                       		tst.w	d1
00014652 6A00                       		bpl.s	loc_13758
00014654 D368 0008                  		add.w	d1,obX(a0)
00014658 317C 0000 0010             		move.w	#0,obVelX(a0)
0001465E 3168 0012 0014             		move.w	obVelY(a0),obInertia(a0)
00014664 4E75                       		rts	
00014666                            ; ===========================================================================
00014666                            
00014666                            loc_13758:
00014666 6100 0000                  		bsr.w	Sonic_DontRunOnWalls
0001466A 4A41                       		tst.w	d1
0001466C 6A00                       		bpl.s	loc_13772
0001466E 9368 000C                  		sub.w	d1,obY(a0)
00014672 4A68 0012                  		tst.w	obVelY(a0)
00014676 6A00                       		bpl.s	locret_13770
00014678 317C 0000 0012             		move.w	#0,obVelY(a0)
0001467E                            
0001467E                            locret_13770:
0001467E 4E75                       		rts	
00014680                            ; ===========================================================================
00014680                            
00014680                            loc_13772:
00014680 4A68 0012                  		tst.w	obVelY(a0)
00014684 6B00                       		bmi.s	locret_1379E
00014686 6100 0000                  		bsr.w	Sonic_HitFloor
0001468A 4A41                       		tst.w	d1
0001468C 6A00                       		bpl.s	locret_1379E
0001468E D368 000C                  		add.w	d1,obY(a0)
00014692 1143 0026                  		move.b	d3,obAngle(a0)
00014696 6100 0000                  		bsr.w	Sonic_ResetOnFloor
0001469A 117C 0000 001C             		move.b	#id_Walk,obAnim(a0)
000146A0 317C 0000 0012             		move.w	#0,obVelY(a0)
000146A6 3168 0010 0014             		move.w	obVelX(a0),obInertia(a0)
000146AC                            
000146AC                            locret_1379E:
000146AC 4E75                       		rts	
000146AE                            ; End of function Sonic_Floor
000146AE                            ; End of function Sonic_Floor
000146AE                            		include	"_incObj\Sonic ResetOnFloor.asm"
000146AE                            ; ---------------------------------------------------------------------------
000146AE                            ; Subroutine to	reset Sonic's mode when he lands on the floor
000146AE                            ; ---------------------------------------------------------------------------
000146AE                            
000146AE                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000146AE                            
000146AE                            
000146AE                            Sonic_ResetOnFloor:
000146AE 0828 0004 0022             		btst	#4,obStatus(a0)
000146B4 6700                       		beq.s	loc_137AE
000146B6 4E71                       		nop	
000146B8 4E71                       		nop	
000146BA 4E71                       		nop	
000146BC                            
000146BC                            loc_137AE:
000146BC 08A8 0005 0022             		bclr	#5,obStatus(a0)
000146C2 08A8 0001 0022             		bclr	#1,obStatus(a0)
000146C8 08A8 0004 0022             		bclr	#4,obStatus(a0)
000146CE 0828 0002 0022             		btst	#2,obStatus(a0)
000146D4 6700                       		beq.s	loc_137E4
000146D6 08A8 0002 0022             		bclr	#2,obStatus(a0)
000146DC 117C 0013 0016             		move.b	#$13,obHeight(a0)
000146E2 117C 0009 0017             		move.b	#9,obWidth(a0)
000146E8 117C 0000 001C             		move.b	#id_Walk,obAnim(a0) ; use running/walking animation
000146EE 5B68 000C                  		subq.w	#5,obY(a0)
000146F2                            
000146F2                            loc_137E4:
000146F2 117C 0000 003C             		move.b	#0,$3C(a0)
000146F8 31FC 0000 F7D0             		move.w	#0,(v_itembonus).w
000146FE 4E75                       		rts	
00014700                            ; End of function Sonic_ResetOnFloor
00014700                            ; End of function Sonic_ResetOnFloor
00014700                            		include	"_incObj\Sonic (part 2).asm"
00014700                            ; ---------------------------------------------------------------------------
00014700                            ; Sonic	when he	gets hurt
00014700                            ; ---------------------------------------------------------------------------
00014700                            
00014700                            Sonic_Hurt:	; Routine 4
00014700 4EB9 0000 E402             		jsr	(SpeedToPos).l
00014706 0668 0030 0012             		addi.w	#$30,obVelY(a0)
0001470C 0828 0006 0022             		btst	#6,obStatus(a0)
00014712 6700                       		beq.s	loc_1380C
00014714 0468 0020 0012             		subi.w	#$20,obVelY(a0)
0001471A                            
0001471A                            loc_1380C:
0001471A 6100 0000                  		bsr.w	Sonic_HurtStop
0001471E 6100 FAC4                  		bsr.w	Sonic_LevelBound
00014722 6100 F46A                  		bsr.w	Sonic_RecordPosition
00014726 6100 0000                  		bsr.w	Sonic_Animate
0001472A 6100 0000                  		bsr.w	Sonic_LoadGfx
0001472E 4EF9 0000 E428             		jmp	(DisplaySprite).l
00014734                            
00014734                            ; ---------------------------------------------------------------------------
00014734                            ; Subroutine to	stop Sonic falling after he's been hurt
00014734                            ; ---------------------------------------------------------------------------
00014734                            
00014734                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00014734                            
00014734                            
00014734                            Sonic_HurtStop:
00014734 3038 F72E                  		move.w	(v_limitbtm2).w,d0
00014738 0640 00E0                  		addi.w	#$E0,d0
0001473C B068 000C                  		cmp.w	obY(a0),d0
00014740 6500 0000                  		bcs.w	KillSonic
00014744 6100 FD6C                  		bsr.w	Sonic_Floor
00014748 0828 0001 0022             		btst	#1,obStatus(a0)
0001474E 6600                       		bne.s	locret_13860
00014750 7000                       		moveq	#0,d0
00014752 3140 0012                  		move.w	d0,obVelY(a0)
00014756 3140 0010                  		move.w	d0,obVelX(a0)
0001475A 3140 0014                  		move.w	d0,obInertia(a0)
0001475E 117C 0000 001C             		move.b	#id_Walk,obAnim(a0)
00014764 5528 0024                  		subq.b	#2,obRoutine(a0)
00014768 317C 0078 0030             		move.w	#$78,$30(a0)
0001476E                            
0001476E                            locret_13860:
0001476E 4E75                       		rts	
00014770                            ; End of function Sonic_HurtStop
00014770                            
00014770                            ; ---------------------------------------------------------------------------
00014770                            ; Sonic	when he	dies
00014770                            ; ---------------------------------------------------------------------------
00014770                            
00014770                            Sonic_Death:	; Routine 6
00014770 6100 0000                  		bsr.w	GameOver
00014774 4EB9 0000 E3D6             		jsr	(ObjectFall).l
0001477A 6100 F412                  		bsr.w	Sonic_RecordPosition
0001477E 6100 0000                  		bsr.w	Sonic_Animate
00014782 6100 0000                  		bsr.w	Sonic_LoadGfx
00014786 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001478C                            
0001478C                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001478C                            
0001478C                            
0001478C                            GameOver:
0001478C 3038 F72E                  		move.w	(v_limitbtm2).w,d0
00014790 0640 0100                  		addi.w	#$100,d0
00014794 B068 000C                  		cmp.w	obY(a0),d0
00014798 6400 0000                  		bcc.w	locret_13900
0001479C 317C FFC8 0012             		move.w	#-$38,obVelY(a0)
000147A2 5428 0024                  		addq.b	#2,obRoutine(a0)
000147A6 4238 FE1E                  		clr.b	(f_timecount).w	; stop time counter
000147AA 5238 FE1C                  		addq.b	#1,(f_lifecount).w ; update lives counter
000147AE 5338 FE12                  		subq.b	#1,(v_lives).w	; subtract 1 from number of lives
000147B2 6600                       		bne.s	loc_138D4
000147B4 317C 0000 003A             		move.w	#0,$3A(a0)
000147BA 11FC 0039 D080             		move.b	#id_GameOverCard,(v_objspace+$80).w ; load GAME object
000147C0 11FC 0039 D0C0             		move.b	#id_GameOverCard,(v_objspace+$C0).w ; load OVER object
000147C6 11FC 0001 D0DA             		move.b	#1,(v_objspace+$C0+obFrame).w ; set OVER object to correct frame
000147CC 4238 FE1A                  		clr.b	(f_timeover).w
000147D0                            
000147D0                            loc_138C2:
000147DA 7003                       		moveq	#3,d0
000147DC 4EF9 0000 136E             		jmp	(AddPLC).l	; load game over patterns
000147E2                            ; ===========================================================================
000147E2                            
000147E2                            loc_138D4:
000147E2 317C 003C 003A             		move.w	#60,$3A(a0)	; set time delay to 1 second
000147E8 4A38 FE1A                  		tst.b	(f_timeover).w	; is TIME OVER tag set?
000147EC 6700                       		beq.s	locret_13900	; if not, branch
000147EE 317C 0000 003A             		move.w	#0,$3A(a0)
000147F4 11FC 0039 D080             		move.b	#id_GameOverCard,(v_objspace+$80).w ; load TIME object
000147FA 11FC 0039 D0C0             		move.b	#id_GameOverCard,(v_objspace+$C0).w ; load OVER object
00014800 11FC 0002 D09A             		move.b	#2,(v_objspace+$80+obFrame).w
00014806 11FC 0003 D0DA             		move.b	#3,(v_objspace+$C0+obFrame).w
0001480C 60C2                       		bra.s	loc_138C2
0001480E                            ; ===========================================================================
0001480E                            
0001480E                            locret_13900:
0001480E 4E75                       		rts	
00014810                            ; End of function GameOver
00014810                            
00014810                            ; ---------------------------------------------------------------------------
00014810                            ; Sonic	when the level is restarted
00014810                            ; ---------------------------------------------------------------------------
00014810                            
00014810                            Sonic_ResetLevel:; Routine 8
00014810 4A68 003A                  		tst.w	$3A(a0)
00014814 6700                       		beq.s	locret_13914
00014816 5368 003A                  		subq.w	#1,$3A(a0)	; subtract 1 from time delay
0001481A 6600                       		bne.s	locret_13914
0001481C 31FC 0001 FE02             		move.w	#1,(f_restart).w ; restart the level
00014822                            
00014822                            	locret_13914:
00014822 4E75                       		rts	
00014822 4E75                       		rts	
00014824                            		include	"_incObj\Sonic Loops.asm"
00014824                            ; ---------------------------------------------------------------------------
00014824                            ; Subroutine to	make Sonic run around loops (GHZ/SLZ)
00014824                            ; ---------------------------------------------------------------------------
00014824                            
00014824                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00014824                            
00014824                            
00014824                            Sonic_Loops:
00014824 0C38 0003 FE10             		cmpi.b	#id_SLZ,(v_zone).w ; is level SLZ ?
0001482A 6700                       		beq.s	@isstarlight	; if yes, branch
0001482C 4A38 FE10                  		tst.b	(v_zone).w	; is level GHZ ?
00014830 6600 0000                  		bne.w	@noloops	; if not, branch
00014834                            
00014834                            	@isstarlight:
00014834 3028 000C                  		move.w	obY(a0),d0
00014838 E248                       		lsr.w	#1,d0
0001483A 0240 0380                  		andi.w	#$380,d0
0001483E 1228 0008                  		move.b	obX(a0),d1
00014842 0241 007F                  		andi.w	#$7F,d1
00014846 D041                       		add.w	d1,d0
00014848 43F8 A400                  		lea	(v_lvllayout).w,a1
0001484C 1231 0000                  		move.b	(a1,d0.w),d1	; d1 is	the 256x256 tile Sonic is currently on
00014850                            
00014850 B238 F7AE                  		cmp.b	(v_256roll1).w,d1 ; is Sonic on a "roll tunnel" tile?
00014854 6700 FA44                  		beq.w	Sonic_ChkRoll	; if yes, branch
00014858 B238 F7AF                  		cmp.b	(v_256roll2).w,d1
0001485C 6700 FA3C                  		beq.w	Sonic_ChkRoll
00014860                            
00014860 B238 F7AC                  		cmp.b	(v_256loop1).w,d1 ; is Sonic on a loop tile?
00014864 6700                       		beq.s	@chkifleft	; if yes, branch
00014866 B238 F7AD                  		cmp.b	(v_256loop2).w,d1
0001486A 6700                       		beq.s	@chkifinair
0001486C 08A8 0006 0001             		bclr	#6,obRender(a0) ; return Sonic to high plane
00014872 4E75                       		rts	
00014874                            ; ===========================================================================
00014874                            
00014874                            @chkifinair:
00014874 0828 0001 0022             		btst	#1,obStatus(a0)	; is Sonic in the air?
0001487A 6700                       		beq.s	@chkifleft	; if not, branch
0001487C                            
0001487C 08A8 0006 0001             		bclr	#6,obRender(a0)	; return Sonic to high plane
00014882 4E75                       		rts	
00014884                            ; ===========================================================================
00014884                            
00014884                            @chkifleft:
00014884 3428 0008                  		move.w	obX(a0),d2
00014888 0C02 002C                  		cmpi.b	#$2C,d2
0001488C 6400                       		bcc.s	@chkifright
0001488E                            
0001488E 08A8 0006 0001             		bclr	#6,obRender(a0)	; return Sonic to high plane
00014894 4E75                       		rts	
00014896                            ; ===========================================================================
00014896                            
00014896                            @chkifright:
00014896 0C02 00E0                  		cmpi.b	#$E0,d2
0001489A 6500                       		bcs.s	@chkangle1
0001489C                            
0001489C 08E8 0006 0001             		bset	#6,obRender(a0)	; send Sonic to	low plane
000148A2 4E75                       		rts	
000148A4                            ; ===========================================================================
000148A4                            
000148A4                            @chkangle1:
000148A4 0828 0006 0001             		btst	#6,obRender(a0) ; is Sonic on low plane?
000148AA 6600                       		bne.s	@chkangle2	; if yes, branch
000148AC                            
000148AC 1228 0026                  		move.b	obAngle(a0),d1
000148B0 6700                       		beq.s	@done
000148B2 0C01 0080                  		cmpi.b	#$80,d1		; is Sonic upside-down?
000148B6 6200                       		bhi.s	@done		; if yes, branch
000148B8 08E8 0006 0001             		bset	#6,obRender(a0)	; send Sonic to	low plane
000148BE 4E75                       		rts	
000148C0                            ; ===========================================================================
000148C0                            
000148C0                            @chkangle2:
000148C0 1228 0026                  		move.b	obAngle(a0),d1
000148C4 0C01 0080                  		cmpi.b	#$80,d1		; is Sonic upright?
000148C8 6300                       		bls.s	@done		; if yes, branch
000148CA 08A8 0006 0001             		bclr	#6,obRender(a0)	; send Sonic to	high plane
000148D0                            
000148D0                            @noloops:
000148D0                            @done:
000148D0 4E75                       		rts	
000148D2                            ; End of function Sonic_Loops
000148D2                            ; End of function Sonic_Loops
000148D2                            		include	"_incObj\Sonic Animate.asm"
000148D2                            ; ---------------------------------------------------------------------------
000148D2                            ; Subroutine to	animate	Sonic's sprites
000148D2                            ; ---------------------------------------------------------------------------
000148D2                            
000148D2                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000148D2                            
000148D2                            
000148D2                            Sonic_Animate:
000148D2 43F9 0000 0000             		lea	(Ani_Sonic).l,a1
000148D8 7000                       		moveq	#0,d0
000148DA 1028 001C                  		move.b	obAnim(a0),d0
000148DE B028 001D                  		cmp.b	obNextAni(a0),d0 ; is animation set to restart?
000148E2 6700                       		beq.s	@do		; if not, branch
000148E4 1140 001D                  		move.b	d0,obNextAni(a0) ; set to "no restart"
000148E8 117C 0000 001B             		move.b	#0,obAniFrame(a0) ; reset animation
000148EE 117C 0000 001E             		move.b	#0,obTimeFrame(a0) ; reset frame duration
000148F4                            
000148F4                            	@do:
000148F4 D040                       		add.w	d0,d0
000148F6 D2F1 0000                  		adda.w	(a1,d0.w),a1	; jump to appropriate animation	script
000148FA 1011                       		move.b	(a1),d0
000148FC 6B00                       		bmi.s	@walkrunroll	; if animation is walk/run/roll/jump, branch
000148FE 1228 0022                  		move.b	obStatus(a0),d1
00014902 0201 0001                  		andi.b	#1,d1
00014906 0228 00FC 0001             		andi.b	#$FC,obRender(a0)
0001490C 8328 0001                  		or.b	d1,obRender(a0)
00014910 5328 001E                  		subq.b	#1,obTimeFrame(a0) ; subtract 1 from frame duration
00014914 6A00                       		bpl.s	@delay		; if time remains, branch
00014916 1140 001E                  		move.b	d0,obTimeFrame(a0) ; load frame duration
0001491A                            
0001491A                            @loadframe:
0001491A 7200                       		moveq	#0,d1
0001491C 1228 001B                  		move.b	obAniFrame(a0),d1 ; load current frame number
00014920 1031 1001                  		move.b	1(a1,d1.w),d0	; read sprite number from script
00014924 6B00                       		bmi.s	@end_FF		; if animation is complete, branch
00014926                            
00014926                            	@next:
00014926 1140 001A                  		move.b	d0,obFrame(a0)	; load sprite number
0001492A 5228 001B                  		addq.b	#1,obAniFrame(a0) ; next frame number
0001492E                            
0001492E                            	@delay:
0001492E 4E75                       		rts	
00014930                            ; ===========================================================================
00014930                            
00014930                            @end_FF:
00014930 5200                       		addq.b	#1,d0		; is the end flag = $FF	?
00014932 6600                       		bne.s	@end_FE		; if not, branch
00014934 117C 0000 001B             		move.b	#0,obAniFrame(a0) ; restart the animation
0001493A 1029 0001                  		move.b	1(a1),d0	; read sprite number
0001493E 60E6                       		bra.s	@next
00014940                            ; ===========================================================================
00014940                            
00014940                            @end_FE:
00014940 5200                       		addq.b	#1,d0		; is the end flag = $FE	?
00014942 6600                       		bne.s	@end_FD		; if not, branch
00014944 1031 1002                  		move.b	2(a1,d1.w),d0	; read the next	byte in	the script
00014948 9128 001B                  		sub.b	d0,obAniFrame(a0) ; jump back d0 bytes in the script
0001494C 9200                       		sub.b	d0,d1
0001494E 1031 1001                  		move.b	1(a1,d1.w),d0	; read sprite number
00014952 60D2                       		bra.s	@next
00014954                            ; ===========================================================================
00014954                            
00014954                            @end_FD:
00014954 5200                       		addq.b	#1,d0		; is the end flag = $FD	?
00014956 6600                       		bne.s	@end		; if not, branch
00014958 1171 1002 001C             		move.b	2(a1,d1.w),obAnim(a0) ; read next byte, run that animation
0001495E                            
0001495E                            	@end:
0001495E 4E75                       		rts	
00014960                            ; ===========================================================================
00014960                            
00014960                            @walkrunroll:
00014960 5328 001E                  		subq.b	#1,obTimeFrame(a0) ; subtract 1 from frame duration
00014964 6AC8                       		bpl.s	@delay		; if time remains, branch
00014966 5200                       		addq.b	#1,d0		; is animation walking/running?
00014968 6600 0000                  		bne.w	@rolljump	; if not, branch
0001496C 7200                       		moveq	#0,d1
0001496E 1028 0026                  		move.b	obAngle(a0),d0	; get Sonic's angle
00014972 1428 0022                  		move.b	obStatus(a0),d2
00014976 0202 0001                  		andi.b	#1,d2		; is Sonic mirrored horizontally?
0001497A 6600                       		bne.s	@flip		; if yes, branch
0001497C 4600                       		not.b	d0		; reverse angle
0001497E                            
0001497E                            	@flip:
0001497E 0600 0010                  		addi.b	#$10,d0		; add $10 to angle
00014982 6A00                       		bpl.s	@noinvert	; if angle is $0-$7F, branch
00014984 7203                       		moveq	#3,d1
00014986                            
00014986                            	@noinvert:
00014986 0228 00FC 0001             		andi.b	#$FC,obRender(a0)
0001498C B302                       		eor.b	d1,d2
0001498E 8528 0001                  		or.b	d2,obRender(a0)
00014992 0828 0005 0022             		btst	#5,obStatus(a0)	; is Sonic pushing something?
00014998 6600 0000                  		bne.w	@push		; if yes, branch
0001499C                            
0001499C E808                       		lsr.b	#4,d0		; divide angle by $10
0001499E 0200 0006                  		andi.b	#6,d0		; angle	must be	0, 2, 4	or 6
000149A2 3428 0014                  		move.w	obInertia(a0),d2 ; get Sonic's speed
000149A6 6A00                       		bpl.s	@nomodspeed
000149A8 4442                       		neg.w	d2		; modulus speed
000149AA                            
000149AA                            	@nomodspeed:
000149AA 43F9 0000 0000             		lea	(SonAni_Run).l,a1 ; use	running	animation
000149B0 0C42 0600                  		cmpi.w	#$600,d2	; is Sonic at running speed?
000149B4 6400                       		bcc.s	@running	; if yes, branch
000149B6                            
000149B6 43F9 0000 0000             		lea	(SonAni_Walk).l,a1 ; use walking animation
000149BC 1200                       		move.b	d0,d1
000149BE E209                       		lsr.b	#1,d1
000149C0 D001                       		add.b	d1,d0
000149C2                            
000149C2                            	@running:
000149C2 D000                       		add.b	d0,d0
000149C4 1600                       		move.b	d0,d3
000149C6 4442                       		neg.w	d2
000149C8 0642 0800                  		addi.w	#$800,d2
000149CC 6A00                       		bpl.s	@belowmax
000149CE 7400                       		moveq	#0,d2		; max animation speed
000149D0                            
000149D0                            	@belowmax:
000149D0 E04A                       		lsr.w	#8,d2
000149D2 1142 001E                  		move.b	d2,obTimeFrame(a0) ; modify frame duration
000149D6 6100 FF42                  		bsr.w	@loadframe
000149DA D728 001A                  		add.b	d3,obFrame(a0)	; modify frame number
000149DE 4E75                       		rts	
000149E0                            ; ===========================================================================
000149E0                            
000149E0                            @rolljump:
000149E0 5200                       		addq.b	#1,d0		; is animation rolling/jumping?
000149E2 6600                       		bne.s	@push		; if not, branch
000149E4 3428 0014                  		move.w	obInertia(a0),d2 ; get Sonic's speed
000149E8 6A00                       		bpl.s	@nomodspeed2
000149EA 4442                       		neg.w	d2
000149EC                            
000149EC                            	@nomodspeed2:
000149EC 43F9 0000 0000             		lea	(SonAni_Roll2).l,a1 ; use fast animation
000149F2 0C42 0600                  		cmpi.w	#$600,d2	; is Sonic moving fast?
000149F6 6400                       		bcc.s	@rollfast	; if yes, branch
000149F8 43F9 0000 0000             		lea	(SonAni_Roll).l,a1 ; use slower	animation
000149FE                            
000149FE                            	@rollfast:
000149FE 4442                       		neg.w	d2
00014A00 0642 0400                  		addi.w	#$400,d2
00014A04 6A00                       		bpl.s	@belowmax2
00014A06 7400                       		moveq	#0,d2
00014A08                            
00014A08                            	@belowmax2:
00014A08 E04A                       		lsr.w	#8,d2
00014A0A 1142 001E                  		move.b	d2,obTimeFrame(a0) ; modify frame duration
00014A0E 1228 0022                  		move.b	obStatus(a0),d1
00014A12 0201 0001                  		andi.b	#1,d1
00014A16 0228 00FC 0001             		andi.b	#$FC,obRender(a0)
00014A1C 8328 0001                  		or.b	d1,obRender(a0)
00014A20 6000 FEF8                  		bra.w	@loadframe
00014A24                            ; ===========================================================================
00014A24                            
00014A24                            @push:
00014A24 3428 0014                  		move.w	obInertia(a0),d2 ; get Sonic's speed
00014A28 6B00                       		bmi.s	@negspeed
00014A2A 4442                       		neg.w	d2
00014A2C                            
00014A2C                            	@negspeed:
00014A2C 0642 0800                  		addi.w	#$800,d2
00014A30 6A00                       		bpl.s	@belowmax3	
00014A32 7400                       		moveq	#0,d2
00014A34                            
00014A34                            	@belowmax3:
00014A34 EC4A                       		lsr.w	#6,d2
00014A36 1142 001E                  		move.b	d2,obTimeFrame(a0) ; modify frame duration
00014A3A 43F9 0000 0000             		lea	(SonAni_Push).l,a1
00014A40 1228 0022                  		move.b	obStatus(a0),d1
00014A44 0201 0001                  		andi.b	#1,d1
00014A48 0228 00FC 0001             		andi.b	#$FC,obRender(a0)
00014A4E 8328 0001                  		or.b	d1,obRender(a0)
00014A52 6000 FEC6                  		bra.w	@loadframe
00014A56                            
00014A56                            ; End of function Sonic_Animate
00014A56                            ; End of function Sonic_Animate
00014A56                            		include	"_anim\Sonic.asm"
00014A56                            ; ---------------------------------------------------------------------------
00014A56                            ; Animation script - Sonic
00014A56                            ; ---------------------------------------------------------------------------
00014A56                            Ani_Sonic:
00014A56                            
00014A56 0000                       ptr_Walk:	dc.w SonAni_Walk-Ani_Sonic
00014A58 0000                       ptr_Run:	dc.w SonAni_Run-Ani_Sonic
00014A5A 0000                       ptr_Roll:	dc.w SonAni_Roll-Ani_Sonic
00014A5C 0000                       ptr_Roll2:	dc.w SonAni_Roll2-Ani_Sonic
00014A5E 0000                       ptr_Push:	dc.w SonAni_Push-Ani_Sonic
00014A60 0000                       ptr_Wait:	dc.w SonAni_Wait-Ani_Sonic
00014A62 0000                       ptr_Balance:	dc.w SonAni_Balance-Ani_Sonic
00014A64 0000                       ptr_LookUp:	dc.w SonAni_LookUp-Ani_Sonic
00014A66 0000                       ptr_Duck:	dc.w SonAni_Duck-Ani_Sonic
00014A68 0000                       ptr_Warp1:	dc.w SonAni_Warp1-Ani_Sonic
00014A6A 0000                       ptr_Warp2:	dc.w SonAni_Wait-Ani_Sonic
00014A6C 0000                       ptr_Warp3:	dc.w SonAni_Wait-Ani_Sonic
00014A6E 0000                       ptr_Warp4:	dc.w SonAni_Wait-Ani_Sonic
00014A70 0000                       ptr_Stop:	dc.w SonAni_Stop-Ani_Sonic
00014A72 0000                       ptr_Float1:	dc.w SonAni_Float1-Ani_Sonic
00014A74 0000                       ptr_Float2:	dc.w SonAni_Float2-Ani_Sonic
00014A76 0000                       ptr_Spring:	dc.w SonAni_Jump-Ani_Sonic
00014A78 0000                       ptr_Hang:	dc.w SonAni_Wait-Ani_Sonic
00014A7A 0000                       ptr_Leap1:	dc.w SonAni_Leap1-Ani_Sonic
00014A7C 0000                       ptr_Leap2:	dc.w SonAni_Leap2-Ani_Sonic
00014A7E 0000                       ptr_Surf:	dc.w SonAni_Wait-Ani_Sonic
00014A80 0000                       ptr_GetAir:	dc.w SonAni_GetAir-Ani_Sonic
00014A82 0000                       ptr_Burnt:	dc.w SonAni_Burnt-Ani_Sonic
00014A84 0000                       ptr_Drown:	dc.w SonAni_Drown-Ani_Sonic
00014A86 0000                       ptr_Death:	dc.w SonAni_Death-Ani_Sonic
00014A88 0000                       ptr_Shrink:	dc.w SonAni_Wait-Ani_Sonic
00014A8A 0000                       ptr_Hurt:	dc.w SonAni_Hurt-Ani_Sonic
00014A8C 0000                       ptr_WaterSlide:	dc.w SonAni_Hurt-Ani_Sonic
00014A8E 0000                       ptr_Null:	dc.w SonAni_Null-Ani_Sonic
00014A90 0000                       ptr_Float3:	dc.w SonAni_Float2-Ani_Sonic
00014A92 0000                       ptr_Float4:	dc.w SonAni_Float4-Ani_Sonic
00014A94 0000                       ptr_Jump:	dc.w SonAni_Jump-Ani_Sonic
00014A96 0000                       ptr_Jump2Roll:	dc.w SonAni_Jump2Roll-Ani_Sonic
00014A98 0000                       ptr_Fall:	dc.w SonAni_Fall-Ani_Sonic
00014A9A 0000                       ptr_Dash:	dc.w SonAni_dash-Ani_Sonic
00014A9C                            
00014A9C FF02 0304 0506 07FF        SonAni_Walk:	dc.b $FF, 2, 3,	4, 5,	6, 7, afEnd
00014AA4                            		even
00014AA4 FF1A 1B1C 1DFF FFFF        SonAni_Run:	dc.b $FF, $1A, $1B, $1C, $1D, afEnd, afEnd, afEnd
00014AAC                            		even
00014AAC FE2B 2A2C 2A2D 2A2E FFFF   SonAni_Roll:	dc.b $FE,  $2B,  $2A,  $2C,  $2A,  $2D,	$2A,	$2E,	afEnd, afEnd
00014AB6                            		even
00014AB6 FE2B 2A2C 2A2D 2A2E FFFF   SonAni_Roll2:	dc.b $FE,  $2B,  $2A,  $2C,  $2A,  $2D,	$2A,	$2E,	afEnd, afEnd
00014AC0                            		even
00014AC0 FD4D 4E4F 50FF FFFF        SonAni_Push:	dc.b $FD, $4D, $4E, $4F, $50, afEnd, afEnd, afEnd
00014AC8                            		even
00014AC8 0701 0101 0101 0101 0101+  SonAni_Wait:	dc.b   7,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1 ; big block of frames, someone please tell me how to optimize this - MCT
00014AD8 0101 0101 0101 0101 0101+  		dc.b   1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1         ; im screaming into a void
00014AE8 4646 4646 4646 4646 4646+  		dc.b   $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46 ; he stare
00014AF8 4746 4646 4646 4646 4646+  		dc.b   $47,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46
00014B08 4646 4646 4646 4646 4646+  		dc.b   $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46
00014B18 4746 4646 4646 4646 4646+  		dc.b   $47,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46
00014B28 4646 4646 4646 4646 4646+  		dc.b   $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46,  $46
00014B38 4848 4949 FE04             		dc.b   $48,  $48,  $49,  $49,  afBack, 4
00014B3E                            		even
00014B3E 1F4A 4BFF                  SonAni_Balance:	dc.b $1F, $4A, $4B, afEnd
00014B42                            		even
00014B42 1751 FE01                  SonAni_LookUp:	dc.b $17, $51, afBack, 1
00014B46                            		even
00014B46 1752 FF                    SonAni_Duck:	dc.b $17, $52, afEnd
00014B4A 00                         		even
00014B4A 3F4F FF                    SonAni_Warp1:	dc.b $3F, $4F, afEnd
00014B4E 00                         		even
00014B4E 3F34 FF                    SonAni_Warp2:	dc.b $3F, fr_warp2, afEnd
00014B52 00                         		even
00014B52 3F35 FF                    SonAni_Warp3:	dc.b $3F, fr_warp3, afEnd
00014B56 00                         		even
00014B56 3F36 FF                    SonAni_Warp4:	dc.b $3F, fr_warp4, afEnd
00014B5A 00                         		even
00014B5A 053D 53FE 01               SonAni_Stop:	dc.b 5,	$3D, $53, afBack, 1
00014B60 00                         		even
00014B60 073C 3FFF                  SonAni_Float1:	dc.b 7,	fr_float1, fr_float4, afEnd
00014B64                            		even
00014B64 073E 3F40 4142 FF          SonAni_Float2:	dc.b 7,	$3E, $3F, $40, $41, $42, afEnd
00014B6C 00                         		even
00014B6C 2F40 FD00                  SonAni_Spring:	dc.b $2F, fr_spring, afChange, id_Walk
00014B70                            		even
00014B70 0441 42FF                  SonAni_Hang:	dc.b 4,	fr_hang1, fr_hang2, afEnd
00014B74                            		even
00014B74 0F35 3535 FE01             SonAni_Leap1:	dc.b $F, $35, $35, $35,	afBack, 1
00014B7A                            		even
00014B7A 0F35 36FE 01               SonAni_Leap2:	dc.b $F, $35, $36, afBack, 1
00014B80 00                         		even
00014B80 3F49 FF                    SonAni_Surf:	dc.b $3F, fr_surf, afEnd
00014B84 00                         		even
00014B84 0B45 4505 0607 FD00        SonAni_GetAir:	dc.b $B, $45, $45, 5, 6, 7, afChange, id_Walk
00014B8C                            		even
00014B8C 2030 FF                    SonAni_Burnt:	dc.b $20, $30, afEnd
00014B90 00                         		even
00014B90 1743 44FE 01               SonAni_Drown:	dc.b $17, $43, $44, afBack, 1
00014B96 00                         		even
00014B96 0F2F FE01                  SonAni_Death:	dc.b $F,	$2F, afBack, 1
00014B9A                            		even
00014B9A 034E 4F50 5152 00FE 01     SonAni_Shrink:	dc.b 3,	fr_shrink1, fr_shrink2, fr_shrink3, fr_shrink4, fr_shrink5, fr_null, afBack, 1
00014BA4 00                         		even
00014BA4 043C 3A31 FE01             SonAni_Hurt:	dc.b 4, $3C, $3A, $31, afBack, 1
00014BAA                            		even
00014BAA                            SonAni_WaterSlide:
00014BAA 0731 FF                    		dc.b 7, $31, afEnd
00014BAE 00                         		even
00014BAE 7700 FD00                  SonAni_Null:	dc.b $77, fr_null, afChange, id_Walk
00014BB2                            		even
00014BB2 033C 3D53 3E54 FF          SonAni_Float3:	dc.b 3,	fr_float1, fr_float2, fr_float5, fr_float3, fr_float6, afEnd
00014BBA 00                         		even
00014BBA 033C FD00                  SonAni_Float4:	dc.b 3,	fr_float1, afChange, id_Walk
00014BBE                            		even
00014BBE 0437 3737 37FD 00          SonAni_Jump:	dc.b 4, $37, $37, $37, $37, afChange, id_Fall
00014BC6 00                         		even
00014BC6 023B FD00                  SonAni_Jump2Roll:	dc.b $2, $3B, afChange, id_Roll
00014BCA                            		even
00014BCA 0738 393A 3A3A 3A3A 3A3A+  SonAni_Fall:	dc.b $7, $38, $39, $3A, $3A, $3A, $3A, $3A, $3A, $3A, $3A, afChange, id_Jump2Roll
00014BD8 00                         		even
00014BD8 0754 55FE 01               SonAni_Dash:	dc.b $7, $54, $55, afBack, 1
00014BDE 00                         		even
00014BDE                            
00014BDE =00000000                  id_Walk:	equ (ptr_Walk-Ani_Sonic)/2	; 0
00014BDE =00000001                  id_Run:		equ (ptr_Run-Ani_Sonic)/2	; 1
00014BDE =00000002                  id_Roll:	equ (ptr_Roll-Ani_Sonic)/2	; 2
00014BDE =00000003                  id_Roll2:	equ (ptr_Roll2-Ani_Sonic)/2	; 3
00014BDE =00000004                  id_Push:	equ (ptr_Push-Ani_Sonic)/2	; 4
00014BDE =00000005                  id_Wait:	equ (ptr_Wait-Ani_Sonic)/2	; 5
00014BDE =00000006                  id_Balance:	equ (ptr_Balance-Ani_Sonic)/2	; 6
00014BDE =00000007                  id_LookUp:	equ (ptr_LookUp-Ani_Sonic)/2	; 7
00014BDE =00000008                  id_Duck:	equ (ptr_Duck-Ani_Sonic)/2	; 8
00014BDE =00000009                  id_Warp1:	equ (ptr_Warp1-Ani_Sonic)/2	; 9
00014BDE =0000000A                  id_Warp2:	equ (ptr_Warp2-Ani_Sonic)/2	; $A
00014BDE =0000000B                  id_Warp3:	equ (ptr_Warp3-Ani_Sonic)/2	; $B
00014BDE =0000000C                  id_Warp4:	equ (ptr_Warp4-Ani_Sonic)/2	; $C
00014BDE =0000000D                  id_Stop:	equ (ptr_Stop-Ani_Sonic)/2	; $D
00014BDE =0000000E                  id_Float1:	equ (ptr_Float1-Ani_Sonic)/2	; $E
00014BDE =0000000F                  id_Float2:	equ (ptr_Float2-Ani_Sonic)/2	; $F
00014BDE =00000010                  id_Spring:	equ (ptr_Spring-Ani_Sonic)/2	; $10
00014BDE =00000011                  id_Hang:	equ (ptr_Hang-Ani_Sonic)/2	; $11
00014BDE =00000012                  id_Leap1:	equ (ptr_Leap1-Ani_Sonic)/2	; $12
00014BDE =00000013                  id_Leap2:	equ (ptr_Leap2-Ani_Sonic)/2	; $13
00014BDE =00000014                  id_Surf:	equ (ptr_Surf-Ani_Sonic)/2	; $14
00014BDE =00000015                  id_GetAir:	equ (ptr_GetAir-Ani_Sonic)/2	; $15
00014BDE =00000016                  id_Burnt:	equ (ptr_Burnt-Ani_Sonic)/2	; $16
00014BDE =00000017                  id_Drown:	equ (ptr_Drown-Ani_Sonic)/2	; $17
00014BDE =00000018                  id_Death:	equ (ptr_Death-Ani_Sonic)/2	; $18
00014BDE =00000019                  id_Shrink:	equ (ptr_Shrink-Ani_Sonic)/2	; $19
00014BDE =0000001A                  id_Hurt:	equ (ptr_Hurt-Ani_Sonic)/2	; $1A
00014BDE =0000001B                  id_WaterSlide:	equ (ptr_WaterSlide-Ani_Sonic)/2 ; $1B
00014BDE =0000001C                  id_Null:	equ (ptr_Null-Ani_Sonic)/2	; $3A
00014BDE =0000001D                  id_Float3:	equ (ptr_Float3-Ani_Sonic)/2	; $1D
00014BDE =0000001E                  id_Float4:	equ (ptr_Float4-Ani_Sonic)/2	; $1E
00014BDE =0000001F                  id_Jump:	equ	(ptr_Jump-Ani_Sonic)/2	;1F
00014BDE =00000020                  id_Jump2Roll:	equ	(ptr_Jump2Roll-Ani_Sonic)/2	;20
00014BDE =00000021                  id_Fall:	equ	(ptr_Fall-Ani_Sonic)/2	;21
00014BDE =00000022                  id_Dash:	equ	(ptr_Dash-Ani_Sonic)/2	;22
00014BDE =00000022                  id_Dash:	equ	(ptr_Dash-Ani_Sonic)/2	;22
00014BDE                            		include	"_incObj\Sonic LoadGfx.asm"
00014BDE                            ; ---------------------------------------------------------------------------
00014BDE                            ; Sonic	graphics loading subroutine
00014BDE                            ; ---------------------------------------------------------------------------
00014BDE                            
00014BDE                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00014BDE                            
00014BDE                            
00014BDE                            Sonic_LoadGfx:
00014BDE 7000                       		moveq	#0,d0
00014BE0 1028 001A                  		move.b	obFrame(a0),d0	; load frame number
00014BE4 B038 F766                  		cmp.b	(v_sonframenum).w,d0 ; has frame changed?
00014BE8 6700                       		beq.s	@nochange	; if not, branch
00014BEA                            
00014BEA 11C0 F766                  		move.b	d0,(v_sonframenum).w
00014BEE 45F9 0000 0000             		lea	(SonicDynPLC).l,a2 ; load PLC script
00014BF4 D040                       		add.w	d0,d0
00014BF6 D4F2 0000                  		adda.w	(a2,d0.w),a2
00014BFA 7200                       		moveq	#0,d1
00014BFC 121A                       		move.b	(a2)+,d1	; read "number of entries" value
00014BFE 5301                       		subq.b	#1,d1
00014C00 6B00                       		bmi.s	@nochange	; if zero, branch
00014C02 47F8 C800                  		lea	(v_sgfx_buffer).w,a3
00014C06 11FC 0001 F767             		move.b	#1,(f_sonframechg).w ; set flag for Sonic graphics DMA
00014C0C                            
00014C0C                            	@readentry:
00014C0C 7400                       		moveq	#0,d2
00014C0E 141A                       		move.b	(a2)+,d2
00014C10 3002                       		move.w	d2,d0
00014C12 E808                       		lsr.b	#4,d0
00014C14 E14A                       		lsl.w	#8,d2
00014C16 141A                       		move.b	(a2)+,d2
00014C18 EB4A                       		lsl.w	#5,d2
00014C1A 43F9 0000 0000             		lea	(Art_Sonic).l,a1
00014C20 D3C2                       		adda.l	d2,a1
00014C22                            
00014C22                            	@loadtile:
00014C22 4CD9 707C                  		movem.l	(a1)+,d2-d6/a4-a6
00014C26 48D3 707C                  		movem.l	d2-d6/a4-a6,(a3)
00014C2A 47EB 0020                  		lea	$20(a3),a3	; next tile
00014C2E 51C8 FFF2                  		dbf	d0,@loadtile	; repeat for number of tiles
00014C32                            
00014C32 51C9 FFD8                  		dbf	d1,@readentry	; repeat for number of entries
00014C36                            
00014C36                            	@nochange:
00014C36 4E75                       		rts	
00014C38                            
00014C38                            ; End of function Sonic_LoadGfx
00014C38                            ; End of function Sonic_LoadGfx
00014C38                            
00014C38                            		include	"_incObj\0A Drowning Countdown.asm"
00014C38                            ; ---------------------------------------------------------------------------
00014C38                            ; Object 0A - drowning countdown numbers and small bubbles that float out of
00014C38                            ; Sonic's mouth (LZ)
00014C38                            ; ---------------------------------------------------------------------------
00014C38                            
00014C38                            DrownCount:
00014C38 7000                       		moveq	#0,d0
00014C3A 1028 0024                  		move.b	obRoutine(a0),d0
00014C3E 323B 0000                  		move.w	Drown_Index(pc,d0.w),d1
00014C42 4EFB 1000                  		jmp	Drown_Index(pc,d1.w)
00014C46                            ; ===========================================================================
00014C46                            Drown_Index:
00014C46 0000                       ptr_Drown_Main:		dc.w Drown_Main-Drown_Index
00014C48 0000                       ptr_Drown_Animate:	dc.w Drown_Animate-Drown_Index
00014C4A 0000                       ptr_Drown_ChkWater:	dc.w Drown_ChkWater-Drown_Index
00014C4C 0000                       ptr_Drown_Display:	dc.w Drown_Display-Drown_Index
00014C4E 0000                       ptr_Drown_Delete:	dc.w Drown_Delete-Drown_Index
00014C50 0000                       ptr_Drown_Countdown:	dc.w Drown_Countdown-Drown_Index
00014C52 0000                       ptr_Drown_AirLeft:	dc.w Drown_AirLeft-Drown_Index
00014C54 0000                       			dc.w Drown_Display-Drown_Index
00014C56 0000                       			dc.w Drown_Delete-Drown_Index
00014C58                            
00014C58 =00000030                  drown_origX:		equ $30		; original x-axis position
00014C58 =00000038                  drown_time:		equ $38		; time between each number changes
00014C58                            
00014C58 =00000000                  id_Drown_Main:		equ ptr_Drown_Main-Drown_Index		; 0
00014C58 =00000002                  id_Drown_Animate:	equ ptr_Drown_Animate-Drown_Index		; 2
00014C58 =00000004                  id_Drown_ChkWater:	equ ptr_Drown_ChkWater-Drown_Index	; 4
00014C58 =00000006                  id_Drown_Display:	equ ptr_Drown_Display-Drown_Index		; 6
00014C58 =00000008                  id_Drown_Delete:		equ ptr_Drown_Delete-Drown_Index		; 8
00014C58 =0000000A                  id_Drown_Countdown:	equ ptr_Drown_Countdown-Drown_Index	; $A
00014C58 =0000000C                  id_Drown_AirLeft:	equ ptr_Drown_AirLeft-Drown_Index		; $C
00014C58                            ; ===========================================================================
00014C58                            
00014C58                            Drown_Main:	; Routine 0
00014C58 5428 0024                  		addq.b	#2,obRoutine(a0)
00014C5C 217C 0001 37FC 0004        		move.l	#Map_Bub,obMap(a0)
00014C64 317C 8348 0002             		move.w	#$8348,obGfx(a0)
00014C6A 117C 0084 0001             		move.b	#$84,obRender(a0)
00014C70 117C 0010 0019             		move.b	#$10,obActWid(a0)
00014C76 117C 0001 0018             		move.b	#1,obPriority(a0)
00014C7C 1028 0028                  		move.b	obSubtype(a0),d0 ; get bubble type
00014C80 6A00                       		bpl.s	@smallbubble	; branch if $00-$7F
00014C82                            
00014C82 5028 0024                  		addq.b	#8,obRoutine(a0) ; goto Drown_Countdown next
00014C86 217C 0000 0000 0004        		move.l	#Map_Drown,obMap(a0)
00014C8E 317C 0440 0002             		move.w	#$440,obGfx(a0)
00014C94 0240 007F                  		andi.w	#$7F,d0
00014C98 1140 0033                  		move.b	d0,$33(a0)
00014C9C 6000 0000                  		bra.w	Drown_Countdown
00014CA0                            ; ===========================================================================
00014CA0                            
00014CA0                            @smallbubble:
00014CA0 1140 001C                  		move.b	d0,obAnim(a0)
00014CA4 3168 0008 0030             		move.w	obX(a0),drown_origX(a0)
00014CAA 317C FF78 0012             		move.w	#-$88,obVelY(a0)
00014CB0                            
00014CB0                            Drown_Animate:	; Routine 2
00014CB0 43F9 0000 0000             		lea	(Ani_Drown).l,a1
00014CB6 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
00014CBC                            
00014CBC                            Drown_ChkWater:	; Routine 4
00014CBC 3038 F646                  		move.w	(v_waterpos1).w,d0
00014CC0 B068 000C                  		cmp.w	obY(a0),d0	; has bubble reached the water surface?
00014CC4 6500                       		bcs.s	@wobble		; if not, branch
00014CC6                            
00014CC6 117C 0006 0024             		move.b	#id_Drown_Display,obRoutine(a0) ; goto Drown_Display next
00014CCC 5E28 001C                  		addq.b	#7,obAnim(a0)
00014CD0 0C28 000D 001C             		cmpi.b	#$D,obAnim(a0)
00014CD6 6700                       		beq.s	Drown_Display
00014CD8 6000                       		bra.s	Drown_Display
00014CDA                            ; ===========================================================================
00014CDA                            
00014CDA                            @wobble:
00014CDA 4A38 F7C7                  		tst.b	(f_wtunnelmode).w ; is Sonic in a water tunnel?
00014CDE 6700                       		beq.s	@notunnel	; if not, branch
00014CE0 5868 0030                  		addq.w	#4,drown_origX(a0)
00014CE4                            
00014CE4                            	@notunnel:
00014CE4 1028 0026                  		move.b	obAngle(a0),d0
00014CE8 5228 0026                  		addq.b	#1,obAngle(a0)
00014CEC 0240 007F                  		andi.w	#$7F,d0
00014CF0 43F9 0000 0000             		lea	(Drown_WobbleData).l,a1
00014CF6 1031 0000                  		move.b	(a1,d0.w),d0
00014CFA 4880                       		ext.w	d0
00014CFC D068 0030                  		add.w	drown_origX(a0),d0
00014D00 3140 0008                  		move.w	d0,obX(a0)
00014D04 6100                       		bsr.s	Drown_ShowNumber
00014D06 4EB9 0000 E402             		jsr	(SpeedToPos).l
00014D0C 4A28 0001                  		tst.b	obRender(a0)
00014D10 6A00                       		bpl.s	@delete
00014D12 4EF9 0000 E428             		jmp	(DisplaySprite).l
00014D18                            
00014D18                            	@delete:
00014D18 4EF9 0000 E464             		jmp	(DeleteObject).l
00014D1E                            ; ===========================================================================
00014D1E                            
00014D1E                            Drown_Display:	; Routine 6, Routine $E
00014D1E 6100                       		bsr.s	Drown_ShowNumber
00014D20 43F9 0000 0000             		lea	(Ani_Drown).l,a1
00014D26 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
00014D2C 4EF9 0000 E428             		jmp	(DisplaySprite).l
00014D32                            ; ===========================================================================
00014D32                            
00014D32                            Drown_Delete:	; Routine 8, Routine $10
00014D32 4EF9 0000 E464             		jmp	(DeleteObject).l
00014D38                            ; ===========================================================================
00014D38                            
00014D38                            Drown_AirLeft:	; Routine $C
00014D38 0C78 000C FE14             		cmpi.w	#$C,(v_air).w	; check air remaining
00014D3E 6200                       		bhi.s	Drown_AirLeft_Delete		; if higher than $C, branch
00014D40 5368 0038                  		subq.w	#1,drown_time(a0)
00014D44 6600                       		bne.s	@display
00014D46 117C 000E 0024             		move.b	#id_Drown_Display+8,obRoutine(a0) ; goto Drown_Display next
00014D4C 5E28 001C                  		addq.b	#7,obAnim(a0)
00014D50 60CC                       		bra.s	Drown_Display
00014D52                            ; ===========================================================================
00014D52                            
00014D52                            	@display:
00014D52 43F9 0000 0000             		lea	(Ani_Drown).l,a1
00014D58 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
00014D5E 4A28 0001                  		tst.b	obRender(a0)
00014D62 6A00                       		bpl.s	Drown_AirLeft_Delete
00014D64 4EF9 0000 E428             		jmp	(DisplaySprite).l
00014D6A                            
00014D6A                            Drown_AirLeft_Delete:	
00014D6A 4EF9 0000 E464             		jmp	(DeleteObject).l
00014D70                            ; ===========================================================================
00014D70                            
00014D70                            Drown_ShowNumber:
00014D70 4A68 0038                  		tst.w	drown_time(a0)
00014D74 6700                       		beq.s	@nonumber
00014D76 5368 0038                  		subq.w	#1,drown_time(a0)	; decrement timer
00014D7A 6600                       		bne.s	@nonumber	; if time remains, branch
00014D7C 0C28 0007 001C             		cmpi.b	#7,obAnim(a0)
00014D82 6400                       		bcc.s	@nonumber
00014D84                            
00014D84 317C 000F 0038             		move.w	#15,drown_time(a0)
00014D8A 4268 0012                  		clr.w	obVelY(a0)
00014D8E 117C 0080 0001             		move.b	#$80,obRender(a0)
00014D94 3028 0008                  		move.w	obX(a0),d0
00014D98 9078 F700                  		sub.w	(v_screenposx).w,d0
00014D9C 0640 0080                  		addi.w	#$80,d0
00014DA0 3140 0008                  		move.w	d0,obX(a0)
00014DA4 3028 000C                  		move.w	obY(a0),d0
00014DA8 9078 F704                  		sub.w	(v_screenposy).w,d0
00014DAC 0640 0080                  		addi.w	#$80,d0
00014DB0 3140 000A                  		move.w	d0,obScreenY(a0)
00014DB4 117C 000C 0024             		move.b	#id_Drown_AirLeft,obRoutine(a0) ; goto Drown_AirLeft next
00014DBA                            
00014DBA                            	@nonumber:
00014DBA 4E75                       		rts	
00014DBC                            ; ===========================================================================
00014DBC                            Drown_WobbleData:
00014DBC 0000 0000 0000 0101 0101+  		dc.b 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2
00014DCC 0202 0303 0303 0303 0303+  		dc.b 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3
00014DDC 0403 0303 0303 0303 0303+  		dc.b 4, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 2
00014DEC 0202 0202 0202 0101 0101+  		dc.b 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0
00014DFC 00FF FFFF FFFF FEFE FEFE+  		dc.b 0, -1, -1, -1, -1, -1, -2, -2, -2, -2, -2, -3, -3, -3, -3, -3
00014E0C FDFD FCFC FCFC FCFC FCFC+  		dc.b -3, -3, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4
00014E1C FCFC FCFC FCFC FCFC FCFC+  		dc.b -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -3
00014E2C FDFD FDFD FDFD FEFE FEFE+  		dc.b -3, -3, -3, -3, -3, -3, -2, -2, -2, -2, -2, -1, -1, -1, -1, -1
00014E3C                            ; ===========================================================================
00014E3C                            
00014E3C                            Drown_Countdown:; Routine $A
00014E3C 4A68 002C                  		tst.w	$2C(a0)
00014E40 6600 0000                  		bne.w	@loc_13F86
00014E44 0C38 0006 D024             		cmpi.b	#6,(v_player+obRoutine).w
00014E4A 6400 0000                  		bcc.w	@nocountdown
00014E4E 0838 0006 D022             		btst	#6,(v_player+obStatus).w ; is Sonic underwater?
00014E54 6700 0000                  		beq.w	@nocountdown	; if not, branch
00014E58                            
00014E58 5368 0038                  		subq.w	#1,drown_time(a0)	; decrement timer
00014E5C 6A00 0000                  		bpl.w	@nochange	; branch if time remains
00014E60 317C 0027 0038             		move.w	#39,drown_time(a0)
00014E66 317C 0001 0036             		move.w	#1,$36(a0)
00014E6C 4EB9 0000 27C6             		jsr	(RandomNumber).l
00014E72 0240 0001                  		andi.w	#1,d0
00014E76 1140 0034                  		move.b	d0,$34(a0)
00014E7A 3038 FE14                  		move.w	(v_air).w,d0	; check air remaining
00014E7E 0C40 000F                  		cmpi.w	#15,d0
00014E82 6700                       		beq.s	@warnsound	; play sound if	air is 25
00014E84                            	;	cmpi.w	#20,d0
00014E84                            	;	beq.s	@warnsound
00014E84                            	;	cmpi.w	#15,d0
00014E84                            	;	beq.s	@warnsound
00014E84 0C40 000C                  		cmpi.w	#12,d0
00014E88 6200                       		bhi.s	@reduceair	; if air is above 12, branch
00014E8A                            
00014E8A                            	;	bne.s	@skipmusic	; if air is less than 12, branch
00014E8A                            	;	music	bgm_Drowning,0,0,0	; play countdown music
00014E8A                            
00014E8A                            	@skipmusic:
00014E8A 5328 0032                  		subq.b	#1,$32(a0)
00014E8E 6A00                       		bpl.s	@reduceair
00014E90 1168 0033 0032             		move.b	$33(a0),$32(a0)
00014E96 08E8 0007 0036             		bset	#7,$36(a0)
00014E9C                            	;	bra.s	@reduceair
00014E9C                            ; ===========================================================================
00014E9C                            
00014E9C                            @warnsound:
00014E9C                            	;	sfx	sfx_Warning,0,0,0	; play "ding-ding" warning sound
00014E9C                            
00014E9C                            @reduceair:
00014E9C 5378 FE14                  		subq.w	#1,(v_air).w	; subtract 1 from air remaining
00014EA0 6400 0000                  		bcc.w	@gotomakenum	; if air is above 0, branch
00014EA4                            
00014EA4                            		; Sonic drowns here
00014EA4                            	;	bsr.w	ResumeMusic
00014EA4 11FC 0081 F7C8             		move.b	#$81,(f_lockmulti).w ; lock controls
00014EB4 117C 000A 0034             		move.b	#$A,$34(a0)
00014EBA 317C 0001 0036             		move.w	#1,$36(a0)
00014EC0 317C 0078 002C             		move.w	#$78,$2C(a0)
00014EC6 2F08                       		move.l	a0,-(sp)
00014EC8 41F8 D000                  		lea	(v_player).w,a0
00014ECC 6100 F7E0                  		bsr.w	Sonic_ResetOnFloor
00014ED0 117C 0017 001C             		move.b	#id_Drown,obAnim(a0)	; use Sonic's drowning animation
00014ED6 08E8 0001 0022             		bset	#1,obStatus(a0)
00014EDC 08E8 0007 0002             		bset	#7,obGfx(a0)
00014EE2 317C 0000 0012             		move.w	#0,obVelY(a0)
00014EE8 317C 0000 0010             		move.w	#0,obVelX(a0)
00014EEE 317C 0000 0014             		move.w	#0,obInertia(a0)
00014EF4 11FC 0001 F744             		move.b	#1,(f_nobgscroll).w
00014EFA 205F                       		movea.l	(sp)+,a0
00014EFC 4E75                       		rts	
00014EFE                            ; ===========================================================================
00014EFE                            
00014EFE                            @loc_13F86:
00014EFE 5368 002C                  		subq.w	#1,$2C(a0)
00014F02 6600                       		bne.s	@loc_13F94
00014F04 11FC 0006 D024             		move.b	#6,(v_player+obRoutine).w
00014F0A 4E75                       		rts	
00014F0C                            ; ===========================================================================
00014F0C                            
00014F0C                            	@loc_13F94:
00014F0C 2F08                       		move.l	a0,-(sp)
00014F0E 41F8 D000                  		lea	(v_player).w,a0
00014F12 4EB9 0000 E402             		jsr	(SpeedToPos).l
00014F18 0668 0010 0012             		addi.w	#$10,obVelY(a0)
00014F1E 205F                       		movea.l	(sp)+,a0
00014F20 6000                       		bra.s	@nochange
00014F22                            ; ===========================================================================
00014F22                            
00014F22                            @gotomakenum:
00014F22 6000                       		bra.s	@makenum
00014F24                            ; ===========================================================================
00014F24                            
00014F24                            @nochange:
00014F24 4A68 0036                  		tst.w	$36(a0)
00014F28 6700 0000                  		beq.w	@nocountdown
00014F2C 5368 003A                  		subq.w	#1,$3A(a0)
00014F30 6A00 0000                  		bpl.w	@nocountdown
00014F34                            
00014F34                            @makenum:
00014F34 4EB9 0000 27C6             		jsr	(RandomNumber).l
00014F3A 0240 000F                  		andi.w	#$F,d0
00014F3E 3140 003A                  		move.w	d0,$3A(a0)
00014F42 4EB9 0000 E8B0             		jsr	(FindFreeObj).l
00014F48 6600 0000                  		bne.w	@nocountdown
00014F4C 137C 000A 0000             		move.b	#id_DrownCount,0(a1) ; load object
00014F52 3378 D008 0008             		move.w	(v_player+obX).w,obX(a1) ; match X position to Sonic
00014F58 7006                       		moveq	#6,d0
00014F5A 0838 0000 D022             		btst	#0,(v_player+obStatus).w
00014F60 6700                       		beq.s	@noflip
00014F62 4440                       		neg.w	d0
00014F64 137C 0040 0026             		move.b	#$40,obAngle(a1)
00014F6A                            
00014F6A                            	@noflip:
00014F6A D169 0008                  		add.w	d0,obX(a1)
00014F6E 3378 D00C 000C             		move.w	(v_player+obY).w,obY(a1)
00014F74 137C 0006 0028             		move.b	#6,obSubtype(a1)
00014F7A 4A68 002C                  		tst.w	$2C(a0)
00014F7E 6700 0000                  		beq.w	@loc_1403E
00014F82 0268 0007 003A             		andi.w	#7,$3A(a0)
00014F88 0668 0000 003A             		addi.w	#0,$3A(a0)
00014F8E 3038 D00C                  		move.w	(v_player+obY).w,d0
00014F92 0440 000C                  		subi.w	#$C,d0
00014F96 3340 000C                  		move.w	d0,obY(a1)
00014F9A 4EB9 0000 27C6             		jsr	(RandomNumber).l
00014FA0 1340 0026                  		move.b	d0,obAngle(a1)
00014FA4 3038 FE04                  		move.w	(v_framecount).w,d0
00014FA8 0200 0003                  		andi.b	#3,d0
00014FAC 6600                       		bne.s	@loc_14082
00014FAE 137C 000E 0028             		move.b	#$E,obSubtype(a1)
00014FB4 6000                       		bra.s	@loc_14082
00014FB6                            ; ===========================================================================
00014FB6                            
00014FB6                            @loc_1403E:
00014FB6 0828 0007 0036             		btst	#7,$36(a0)
00014FBC 6700                       		beq.s	@loc_14082
00014FBE 3438 FE14                  		move.w	(v_air).w,d2
00014FC2 E24A                       		lsr.w	#1,d2
00014FC4 4EB9 0000 27C6             		jsr	(RandomNumber).l
00014FCA 0240 0003                  		andi.w	#3,d0
00014FCE 6600                       		bne.s	@loc_1406A
00014FD0 08E8 0006 0036             		bset	#6,$36(a0)
00014FD6 6600                       		bne.s	@loc_14082
00014FD8 1342 0028                  		move.b	d2,obSubtype(a1)
00014FDC 337C 001C 0038             		move.w	#$1C,drown_time(a1)
00014FE2                            
00014FE2                            	@loc_1406A:
00014FE2 4A28 0034                  		tst.b	$34(a0)
00014FE6 6600                       		bne.s	@loc_14082
00014FE8 08E8 0006 0036             		bset	#6,$36(a0)
00014FEE 6600                       		bne.s	@loc_14082
00014FF0 1342 0028                  		move.b	d2,obSubtype(a1)
00014FF4 337C 001C 0038             		move.w	#$1C,drown_time(a1)
00014FFA                            
00014FFA                            @loc_14082:
00014FFA 5328 0034                  		subq.b	#1,$34(a0)
00014FFE 6A00                       		bpl.s	@nocountdown
00015000 4268 0036                  		clr.w	$36(a0)
00015004                            
00015004                            @nocountdown:
00015004 4E75                       		rts	
00015004 4E75                       		rts	
00015006                            
00015006                            
00015006                            ; ---------------------------------------------------------------------------
00015006                            ; Subroutine to	play music for LZ/SBZ3 after a countdown
00015006                            ; ---------------------------------------------------------------------------
00015006                            
00015006                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00015006                            
00015006                            
00015006                            ResumeMusic:
00015006 0C78 000C FE14             		cmpi.w	#12,(v_air).w	; more than 12 seconds of air left?
0001500C 6200                       		bhi.s	@over12		; if yes, branch
0001500E 303C 0000                  		move.w	#bgm_LZ,d0	; play LZ music
00015012 0C78 0103 FE10             		cmpi.w	#(id_LZ<<8)+3,(v_zone).w ; check if level is 0103 (SBZ3)
00015018 6600                       		bne.s	@notsbz
0001501A 303C 0000                  		move.w	#bgm_SBZ,d0	; play SBZ music
0001501E                            
0001501E                            	@notsbz:
0001501E                            
0001501E 4EB9 0000 1184             		jsr	(PlaySound).l
00015024                            
00015024                            	@over12:
00015024 31FC 001E FE14             		move.w	#30,(v_air).w	; reset air to 30 seconds
0001502A 4238 D372                  		clr.b	(v_objspace+$340+$32).w
0001502E 4E75                       		rts	
00015030                            ; End of function ResumeMusic
00015030                            
00015030                            ; ===========================================================================
00015030                            
00015030                            		include	"_anim\Drowning Countdown.asm"
00015030                            ; ---------------------------------------------------------------------------
00015030                            ; Animation script - countdown numbers and bubbles (LZ)
00015030                            ; ---------------------------------------------------------------------------
00015030 0000                       Ani_Drown:	dc.w @zeroappear-Ani_Drown
00015032 0000                       		dc.w @oneappear-Ani_Drown
00015034 0000                       		dc.w @twoappear-Ani_Drown
00015036 0000                       		dc.w @threeappear-Ani_Drown
00015038 0000                       		dc.w @fourappear-Ani_Drown
0001503A 0000                       		dc.w @fiveappear-Ani_Drown
0001503C 0000                       		dc.w @smallbubble-Ani_Drown
0001503E 0000                       		dc.w @zeroflash-Ani_Drown
00015040 0000                       		dc.w @oneflash-Ani_Drown
00015042 0000                       		dc.w @twoflash-Ani_Drown
00015044 0000                       		dc.w @threeflash-Ani_Drown
00015046 0000                       		dc.w @fourflash-Ani_Drown
00015048 0000                       		dc.w @fiveflash-Ani_Drown
0001504A 0000                       		dc.w @blank-Ani_Drown
0001504C 0000                       		dc.w @mediumbubble-Ani_Drown
0001504E 0500 0102 0304 090D FC     @zeroappear:	dc.b 5,	0, 1, 2, 3, 4, 9, $D, afRoutine
00015058 00                         		even
00015058 0500 0102 0304 0C12 FC     @oneappear:	dc.b 5,	0, 1, 2, 3, 4, $C, $12,	afRoutine
00015062 00                         		even
00015062 0500 0102 0304 0C11 FC     @twoappear:	dc.b 5,	0, 1, 2, 3, 4, $C, $11,	afRoutine
0001506C 00                         		even
0001506C 0500 0102 0304 0B10 FC     @threeappear:	dc.b 5,	0, 1, 2, 3, 4, $B, $10,	afRoutine
00015076 00                         		even
00015076 0500 0102 0304 090F FC     @fourappear:	dc.b 5,	0, 1, 2, 3, 4, 9, $F, afRoutine
00015080 00                         		even
00015080 0500 0102 0304 0A0E FC     @fiveappear:	dc.b 5,	0, 1, 2, 3, 4, $A, $E, afRoutine
0001508A 00                         		even
0001508A 0E00 0102 FC               @smallbubble:	dc.b $E, 0, 1, 2, afRoutine
00015090 00                         		even
00015090 0716 0D16 0D16 0DFC        @zeroflash:	dc.b 7,	$16, $D, $16, $D, $16, $D, afRoutine
00015098 0716 1216 1216 12FC        @oneflash:	dc.b 7,	$16, $12, $16, $12, $16, $12, afRoutine
000150A0 0716 1116 1116 11FC        @twoflash:	dc.b 7,	$16, $11, $16, $11, $16, $11, afRoutine
000150A8 0716 1016 1016 10FC        @threeflash:	dc.b 7,	$16, $10, $16, $10, $16, $10, afRoutine
000150B0 0716 0F16 0F16 0FFC        @fourflash:	dc.b 7,	$16, $F, $16, $F, $16, $F, afRoutine
000150B8 0716 0E16 0E16 0EFC        @fiveflash:	dc.b 7,	$16, $E, $16, $E, $16, $E, afRoutine
000150C0 0EFC                       @blank:		dc.b $E, afRoutine
000150C2 0E01 0203 04FC             @mediumbubble:	dc.b $E, 1, 2, 3, 4, afRoutine
000150C8                            		even
000150C8                            		even
000150C8                            Map_Drown:	include	"_maps\Drowning Countdown.asm"
000150C8                            ; ---------------------------------------------------------------------------
000150C8                            ; Sprite mappings - drowning countdown numbers (LZ)
000150C8                            ; ---------------------------------------------------------------------------
000150C8                            Map_Drown_internal:
000150C8 0000                       		dc.w @num-Map_Drown_internal
000150CA 01                         @num:		dc.b 1
000150CB E80E 0000 F2               		dc.b $E8, $E, 0, 0, $F2
000150D0                            		even
000150D0                            		even
000150D0                            
000150D0                            		include	"_incObj\38 Shield and Invincibility.asm"
000150D0                            ; ---------------------------------------------------------------------------
000150D0                            ; Object 38 - shield and invincibility stars
000150D0                            ; ---------------------------------------------------------------------------
000150D0                            
000150D0                            ShieldItem:
000150D0 7000                       		moveq	#0,d0
000150D2 1028 0024                  		move.b	obRoutine(a0),d0
000150D6 323B 0000                  		move.w	Shi_Index(pc,d0.w),d1
000150DA 4EFB 1000                  		jmp	Shi_Index(pc,d1.w)
000150DE                            ; ===========================================================================
000150DE 0000                       Shi_Index:	dc.w Shi_Main-Shi_Index
000150E0 0000                       		dc.w Shi_Shield-Shi_Index
000150E2 0000                       		dc.w Shi_Stars-Shi_Index
000150E4                            ; ===========================================================================
000150E4                            
000150E4                            Shi_Main:	; Routine 0
000150E4 5428 0024                  		addq.b	#2,obRoutine(a0)
000150E8 217C 0000 0000 0004        		move.l	#Map_Shield,obMap(a0)
000150F0 117C 0004 0001             		move.b	#4,obRender(a0)
000150F6 117C 0001 0018             		move.b	#1,obPriority(a0)
000150FC 117C 0010 0019             		move.b	#$10,obActWid(a0)
00015102 4A28 001C                  		tst.b	obAnim(a0)	; is object a shield?
00015106 6600                       		bne.s	@stars		; if not, branch
00015108 317C 0541 0002             		move.w	#$541,obGfx(a0)	; shield specific code
0001510E 4E75                       		rts	
00015110                            ; ===========================================================================
00015110                            
00015110                            @stars:
00015110 5428 0024                  		addq.b	#2,obRoutine(a0) ; goto Shi_Stars next
00015114 317C 055C 0002             		move.w	#$55C,obGfx(a0)
0001511A 4E75                       		rts	
0001511C                            ; ===========================================================================
0001511C                            
0001511C                            Shi_Shield:	; Routine 2
0001511C 4A38 FE2D                  		tst.b	(v_invinc).w	; does Sonic have invincibility?
00015120 6600                       		bne.s	@remove		; if yes, branch
00015122 4A38 FE2C                  		tst.b	(v_shield).w	; does Sonic have shield?
00015126 6700                       		beq.s	@delete		; if not, branch
00015128 3178 D008 0008             		move.w	(v_player+obX).w,obX(a0)
0001512E 3178 D00C 000C             		move.w	(v_player+obY).w,obY(a0)
00015134 1178 D022 0022             		move.b	(v_player+obStatus).w,obStatus(a0)
0001513A 43F9 0000 0000             		lea	(Ani_Shield).l,a1
00015140 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
00015146 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001514C                            
0001514C                            	@remove:
0001514C 4E75                       		rts	
0001514E                            
0001514E                            	@delete:
0001514E 4EF9 0000 E464             		jmp	(DeleteObject).l
00015154                            ; ===========================================================================
00015154                            
00015154                            Shi_Stars:	; Routine 4
00015154 4A38 FE2D                  		tst.b	(v_invinc).w	; does Sonic have invincibility?
00015158 6700                       		beq.s	Shi_Start_Delete		; if not, branch
0001515A 3038 F7A8                  		move.w	(v_trackpos).w,d0 ; get index value for tracking data
0001515E 1228 001C                  		move.b	obAnim(a0),d1
00015162 5301                       		subq.b	#1,d1
00015164 6000                       		bra.s	@trail
00015166                            ; ===========================================================================
00015166 E909                       		lsl.b	#4,d1
00015168 5801                       		addq.b	#4,d1
0001516A 9001                       		sub.b	d1,d0
0001516C 1228 0030                  		move.b	$30(a0),d1
00015170 9001                       		sub.b	d1,d0
00015172 5801                       		addq.b	#4,d1
00015174 0201 000F                  		andi.b	#$F,d1
00015178 1141 0030                  		move.b	d1,$30(a0)
0001517C 6000                       		bra.s	@b
0001517E                            ; ===========================================================================
0001517E                            
0001517E                            @trail:
0001517E E709                       		lsl.b	#3,d1		; multiply animation number by 8
00015180 1401                       		move.b	d1,d2
00015182 D201                       		add.b	d1,d1
00015184 D202                       		add.b	d2,d1		; multiply by 3
00015186 5801                       		addq.b	#4,d1
00015188 9001                       		sub.b	d1,d0
0001518A 1228 0030                  		move.b	$30(a0),d1
0001518E 9001                       		sub.b	d1,d0		; use earlier tracking data to create trail
00015190 5801                       		addq.b	#4,d1
00015192 0C01 0018                  		cmpi.b	#$18,d1
00015196 6500                       		bcs.s	@a
00015198 7200                       		moveq	#0,d1
0001519A                            
0001519A                            	@a:
0001519A 1141 0030                  		move.b	d1,$30(a0)
0001519E                            
0001519E                            	@b:
0001519E 43F8 CB00                  		lea	(v_tracksonic).w,a1
000151A2 43F1 0000                  		lea	(a1,d0.w),a1
000151A6 3159 0008                  		move.w	(a1)+,obX(a0)
000151AA 3159 000C                  		move.w	(a1)+,obY(a0)
000151AE 1178 D022 0022             		move.b	(v_player+obStatus).w,obStatus(a0)
000151B4 43F9 0000 0000             		lea	(Ani_Shield).l,a1
000151BA 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
000151C0 4EF9 0000 E428             		jmp	(DisplaySprite).l
000151C6                            ; ===========================================================================
000151C6                            
000151C6                            Shi_Start_Delete:	
000151C6 4EF9 0000 E464             		jmp	(DeleteObject).l
000151C6 4EF9 0000 E464             		jmp	(DeleteObject).l
000151CC                            		include	"_incObj\4A Special Stage Entry (Unused).asm"
000151CC                            ; ---------------------------------------------------------------------------
000151CC                            ; Object 4A - special stage entry from beta
000151CC                            ; ---------------------------------------------------------------------------
000151CC                            
000151CC                            VanishSonic:
000151CC 7000                       		moveq	#0,d0
000151CE 1028 0024                  		move.b	obRoutine(a0),d0
000151D2 323B 0000                  		move.w	Van_Index(pc,d0.w),d1
000151D6 4EFB 1000                  		jmp	Van_Index(pc,d1.w)
000151DA                            ; ===========================================================================
000151DA 0000                       Van_Index:	dc.w Van_Main-Van_Index
000151DC 0000                       		dc.w Van_RmvSonic-Van_Index
000151DE 0000                       		dc.w Van_LoadSonic-Van_Index
000151E0                            
000151E0 =00000030                  van_time:	equ $30		; time for Sonic to disappear
000151E0                            ; ===========================================================================
000151E0                            
000151E0                            Van_Main:	; Routine 0
000151E0 4AB8 F680                  		tst.l	(v_plc_buffer).w ; are pattern load cues empty?
000151E4 6700                       		beq.s	@isempty	; if yes, branch
000151E6 4E75                       		rts	
000151E8                            
000151E8                            	@isempty:
000151E8 5428 0024                  		addq.b	#2,obRoutine(a0)
000151EC 217C 0000 0000 0004        		move.l	#Map_Vanish,obMap(a0)
000151F4 117C 0004 0001             		move.b	#4,obRender(a0)
000151FA 117C 0001 0018             		move.b	#1,obPriority(a0)
00015200 117C 0038 0019             		move.b	#$38,obActWid(a0)
00015206 317C 0541 0002             		move.w	#$541,obGfx(a0)
0001520C 317C 0078 0030             		move.w	#120,van_time(a0) ; set time for Sonic's disappearance to 2 seconds
00015212                            
00015212                            Van_RmvSonic:	; Routine 2
00015212 3178 D008 0008             		move.w	(v_player+obX).w,obX(a0)
00015218 3178 D00C 000C             		move.w	(v_player+obY).w,obY(a0)
0001521E 1178 D022 0022             		move.b	(v_player+obStatus).w,obStatus(a0)
00015224 43F9 0000 0000             		lea	(Ani_Vanish).l,a1
0001522A 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
00015230 0C28 0002 001A             		cmpi.b	#2,obFrame(a0)
00015236 6600                       		bne.s	@display
00015238 4A38 D000                  		tst.b	(v_player).w
0001523C 6700                       		beq.s	@display
0001523E 11FC 0000 D000             		move.b	#0,(v_player).w	; remove Sonic
0001524E                            
0001524E                            	@display:
0001524E 4EF9 0000 E428             		jmp	(DisplaySprite).l
00015254                            ; ===========================================================================
00015254                            
00015254                            Van_LoadSonic:	; Routine 4
00015254 5368 0030                  		subq.w	#1,van_time(a0)	; subtract 1 from time
00015258 6600                       		bne.s	@wait		; if time remains, branch
0001525A 11FC 0000 F600             		move.b	#id_Special,(v_gamemode).w ; set screen mode to $10 (Special Stage)
00015260 11FC 0001 D000             		move.b	#id_SonicPlayer,(v_player).w ; load Sonic object
00015266 4EF9 0000 E464             		jmp	(DeleteObject).l
0001526C                            
0001526C                            	@wait:
0001526C 4E75                       		rts	
0001526C 4E75                       		rts	
0001526E                            		include	"_incObj\08 Water Splash.asm"
0001526E                            ; ---------------------------------------------------------------------------
0001526E                            ; Object 08 - water splash (LZ)
0001526E                            ; ---------------------------------------------------------------------------
0001526E                            
0001526E                            Splash:
0001526E 7000                       		moveq	#0,d0
00015270 1028 0024                  		move.b	obRoutine(a0),d0
00015274 323B 0000                  		move.w	Spla_Index(pc,d0.w),d1
00015278 4EFB 1000                  		jmp	Spla_Index(pc,d1.w)
0001527C                            ; ===========================================================================
0001527C 0000                       Spla_Index:	dc.w Spla_Main-Spla_Index
0001527E 0000                       		dc.w Spla_Display-Spla_Index
00015280 0000                       		dc.w Spla_Delete-Spla_Index
00015282                            ; ===========================================================================
00015282                            
00015282                            Spla_Main:	; Routine 0
00015282 5428 0024                  		addq.b	#2,obRoutine(a0)
00015286 217C 0000 0000 0004        		move.l	#Map_Splash,obMap(a0)
0001528E 0028 0004 0001             		ori.b	#4,obRender(a0)
00015294 117C 0001 0018             		move.b	#1,obPriority(a0)
0001529A 117C 0010 0019             		move.b	#$10,obActWid(a0)
000152A0 317C 4259 0002             		move.w	#$4259,obGfx(a0)
000152A6 3178 D008 0008             		move.w	(v_player+obX).w,obX(a0) ; copy x-position from Sonic
000152AC                            
000152AC                            Spla_Display:	; Routine 2
000152AC 3178 F646 000C             		move.w	(v_waterpos1).w,obY(a0) ; copy y-position from water height
000152B2 43F9 0000 0000             		lea	(Ani_Splash).l,a1
000152B8 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
000152BE 4EF9 0000 E428             		jmp	(DisplaySprite).l
000152C4                            ; ===========================================================================
000152C4                            
000152C4                            Spla_Delete:	; Routine 4
000152C4 4EF9 0000 E464             		jmp	(DeleteObject).l	; delete when animation	is complete
000152C4 4EF9 0000 E464             		jmp	(DeleteObject).l	; delete when animation	is complete
000152CA                            		include	"_anim\Shield and Invincibility.asm"
000152CA                            ; ---------------------------------------------------------------------------
000152CA                            ; Animation script - shield and invincibility stars
000152CA                            ; ---------------------------------------------------------------------------
000152CA 0000                       Ani_Shield:	dc.w @shield-Ani_Shield
000152CC 0000                       		dc.w @stars1-Ani_Shield
000152CE 0000                       		dc.w @stars2-Ani_Shield
000152D0 0000                       		dc.w @stars3-Ani_Shield
000152D2 0000                       		dc.w @stars4-Ani_Shield
000152D4 0501 0203 0405 06FF        @shield:	dc.b 5,	1, 2, 3, 4, 5, 6, afEnd
000152DC 0507 08FF                  @stars1:	dc.b 5,	7, 8, afEnd
000152E0 0507 08FF                  @stars2:	dc.b 5,	7, 8, afEnd
000152E4 0507 08FF                  @stars3:	dc.b 5,	7, 8, afEnd
000152E8 0507 08FF                  @stars4:	dc.b 5,	7, 8, afEnd
000152EC                            		even
000152EC                            		even
000152EC                            Map_Shield:	include	"_maps\Shield and Invincibility.asm"
000152EC                            ; ================================================================================
000152EC                            ; Sprite Mappings - generated by Flex 2 Fri Jan 15 2021 01:21:34 GMT-0500 (Eastern Standard Time)
000152EC                            ; ================================================================================
000152EC                            
000152EC                            DATARTKOU3C84U:
000152EC 0000 0000                  	dc.w $0, DATARTKOU3C84U_1-DATARTKOU3C84U
000152F0 0000 0000                  	dc.w DATARTKOU3C84U_2-DATARTKOU3C84U, DATARTKOU3C84U_3-DATARTKOU3C84U
000152F4 0000 0000                  	dc.w DATARTKOU3C84U_4-DATARTKOU3C84U, DATARTKOU3C84U_5-DATARTKOU3C84U
000152F8 0000 0000                  	dc.w DATARTKOU3C84U_6-DATARTKOU3C84U, DATARTKOU3C84U_7-DATARTKOU3C84U
000152FC 0000                       	dc.w DATARTKOU3C84U_8-DATARTKOU3C84U
000152FE 03                         DATARTKOU3C84U_1: dc.b $3
000152FF FE00 0022 0F               	dc.b $FE, $0, $0, $22, $F
00015304 F400 0024 0E               	dc.b $F4, $0, $0, $24, $E
00015309 ED00 0026 05               	dc.b $ED, $0, $0, $26, $5
0001530E 03                         DATARTKOU3C84U_2: dc.b $3
0001530F E900 0026 FB               	dc.b $E9, $0, $0, $26, $FB
00015314 ED00 0024 05               	dc.b $ED, $0, $0, $24, $5
00015319 F500 0025 0D               	dc.b $F5, $0, $0, $25, $D
0001531E 03                         DATARTKOU3C84U_3: dc.b $3
0001531F F000 0026 F0               	dc.b $F0, $0, $0, $26, $F0
00015324 E900 0024 FB               	dc.b $E9, $0, $0, $24, $FB
00015329 EE00 0025 04               	dc.b $EE, $0, $0, $25, $4
0001532E 03                         DATARTKOU3C84U_4: dc.b $3
0001532F E900 0022 F9               	dc.b $E9, $0, $0, $22, $F9
00015334 F000 0024 F0               	dc.b $F0, $0, $0, $24, $F0
00015339 FD00 0026 E9               	dc.b $FD, $0, $0, $26, $E9
0001533E 03                         DATARTKOU3C84U_5: dc.b $3
0001533F F000 0022 EE               	dc.b $F0, $0, $0, $22, $EE
00015344 FD00 0024 E9               	dc.b $FD, $0, $0, $24, $E9
00015349 FE00 0026 11               	dc.b $FE, $0, $0, $26, $11
0001534E 03                         DATARTKOU3C84U_6: dc.b $3
0001534F FD00 0022 E7               	dc.b $FD, $0, $0, $22, $E7
00015354 FE00 0024 11               	dc.b $FE, $0, $0, $24, $11
00015359 F400 0026 0E               	dc.b $F4, $0, $0, $26, $E
0001535E 08                         DATARTKOU3C84U_7: dc.b $8
0001535F E800 0026 FD               	dc.b $E8, $0, $0, $26, $FD
00015364 EF00 0026 F2               	dc.b $EF, $0, $0, $26, $F2
00015369 FA00 0026 E9               	dc.b $FA, $0, $0, $26, $E9
0001536E F000 0026 08               	dc.b $F0, $0, $0, $26, $8
00015373 FB00 0026 10               	dc.b $FB, $0, $0, $26, $10
00015378 0600 0026 09               	dc.b $6, $0, $0, $26, $9
0001537D 0F00 0026 FD               	dc.b $F, $0, $0, $26, $FD
00015382 0500 0026 F2               	dc.b $5, $0, $0, $26, $F2
00015387 08                         DATARTKOU3C84U_8: dc.b $8
00015388 E900 0026 F8               	dc.b $E9, $0, $0, $26, $F8
0001538D F200 0026 EE               	dc.b $F2, $0, $0, $26, $EE
00015392 FE00 0026 EC               	dc.b $FE, $0, $0, $26, $EC
00015397 E900 0026 05               	dc.b $E9, $0, $0, $26, $5
0001539C F300 0026 0E               	dc.b $F3, $0, $0, $26, $E
000153A1 0400 0026 0F               	dc.b $4, $0, $0, $26, $F
000153A6 0F00 0026 04               	dc.b $F, $0, $0, $26, $4
000153AB 0C00 0026 F5               	dc.b $C, $0, $0, $26, $F5
000153B0                            	even
000153B0                            	even
000153B0                            		include	"_anim\Special Stage Entry (Unused).asm"
000153B0                            ; ---------------------------------------------------------------------------
000153B0                            ; Animation script - special stage entry effect from beta
000153B0                            ; ---------------------------------------------------------------------------
000153B0 0000                       Ani_Vanish:	dc.w @vanish-Ani_Vanish
000153B2 0500 0100 0100 0701 0702+  @vanish:	dc.b 5,	0, 1, 0, 1, 0, 7, 1, 7,	2, 7, 3, 7, 4, 7, 5, 7, 6, 7, afRoutine
000153C6                            		even
000153C6                            		even
000153C6                            Map_Vanish:	include	"_maps\Special Stage Entry (Unused).asm"
000153C6                            ; ---------------------------------------------------------------------------
000153C6                            ; Sprite mappings - special stage entry	from beta
000153C6                            ; ---------------------------------------------------------------------------
000153C6                            Map_Vanish_internal:
000153C6 0000                       		dc.w @flash1-Map_Vanish_internal
000153C8 0000                       		dc.w @flash2-Map_Vanish_internal
000153CA 0000                       		dc.w @flash3-Map_Vanish_internal
000153CC 0000                       		dc.w @sparkle1-Map_Vanish_internal
000153CE 0000                       		dc.w @sparkle2-Map_Vanish_internal
000153D0 0000                       		dc.w @sparkle3-Map_Vanish_internal
000153D2 0000                       		dc.w @sparkle4-Map_Vanish_internal
000153D4 0000                       		dc.w @blank-Map_Vanish_internal
000153D6 03                         @flash1:	dc.b 3
000153D7 F800 0000 08               		dc.b $F8, 0, 0,	0, 8
000153DC 0004 0001 00               		dc.b 0,	4, 0, 1, 0
000153E1 0800 1000 08               		dc.b 8,	0, $10,	0, 8
000153E6 03                         @flash2:	dc.b 3
000153E7 F00D 0003 F0               		dc.b $F0, $D, 0, 3, $F0
000153EC 000C 000B F0               		dc.b 0,	$C, 0, $B, $F0
000153F1 080D 1003 F0               		dc.b 8,	$D, $10, 3, $F0
000153F6 05                         @flash3:	dc.b 5
000153F7 E40E 000F F4               		dc.b $E4, $E, 0, $F, $F4
000153FC EC02 001B EC               		dc.b $EC, 2, 0,	$1B, $EC
00015401 FC0C 001E F4               		dc.b $FC, $C, 0, $1E, $F4
00015406 040E 100F F4               		dc.b 4,	$E, $10, $F, $F4
0001540B 0401 101B EC               		dc.b 4,	1, $10,	$1B, $EC
00015410 09                         @sparkle1:	dc.b 9
00015411 F008 0022 F8               		dc.b $F0, 8, 0,	$22, $F8
00015416 F80E 0025 F0               		dc.b $F8, $E, 0, $25, $F0
0001541B 1008 0031 F0               		dc.b $10, 8, 0,	$31, $F0
00015420 0005 0034 10               		dc.b 0,	5, 0, $34, $10
00015425 F800 0825 10               		dc.b $F8, 0, 8,	$25, $10
0001542A F000 1836 18               		dc.b $F0, 0, $18, $36, $18
0001542F F800 1825 20               		dc.b $F8, 0, $18, $25, $20
00015434 0000 0825 28               		dc.b 0,	0, 8, $25, $28
00015439 F800 0025 30               		dc.b $F8, 0, 0,	$25, $30
0001543E 12                         @sparkle2:	dc.b $12
0001543F 0000 1825 F0               		dc.b 0,	0, $18,	$25, $F0
00015444 F804 0038 F8               		dc.b $F8, 4, 0,	$38, $F8
00015449 F000 0026 08               		dc.b $F0, 0, 0,	$26, 8
0001544E 0000 0025 00               		dc.b 0,	0, 0, $25, 0
00015453 0800 1825 F8               		dc.b 8,	0, $18,	$25, $F8
00015458 1000 1026 00               		dc.b $10, 0, $10, $26, 0
0001545D 0800 1038 08               		dc.b 8,	0, $10,	$38, 8
00015462 F800 0029 10               		dc.b $F8, 0, 0,	$29, $10
00015467 0000 0026 10               		dc.b 0,	0, 0, $26, $10
0001546C 0000 002D 18               		dc.b 0,	0, 0, $2D, $18
00015471 0800 0826 18               		dc.b 8,	0, 8, $26, $18
00015476 0800 0029 20               		dc.b 8,	0, 0, $29, $20
0001547B F800 0026 20               		dc.b $F8, 0, 0,	$26, $20
00015480 F800 002D 28               		dc.b $F8, 0, 0,	$2D, $28
00015485 0000 003A 28               		dc.b 0,	0, 0, $3A, $28
0001548A F800 1826 30               		dc.b $F8, 0, $18, $26, $30
0001548F 0000 1025 38               		dc.b 0,	0, $10,	$25, $38
00015494 F800 1025 40               		dc.b $F8, 0, $10, $25, $40
00015499 11                         @sparkle3:	dc.b $11
0001549A F800 0825 00               		dc.b $F8, 0, 8,	$25, 0
0001549F F000 0038 10               		dc.b $F0, 0, 0,	$38, $10
000154A4 1000 0825 00               		dc.b $10, 0, 8,	$25, 0
000154A9 0000 1825 10               		dc.b 0,	0, $18,	$25, $10
000154AE 0800 1025 18               		dc.b 8,	0, $10,	$25, $18
000154B3 F800 1825 20               		dc.b $F8, 0, $18, $25, $20
000154B8 0000 1026 28               		dc.b 0,	0, $10,	$26, $28
000154BD F800 1025 30               		dc.b $F8, 0, $10, $25, $30
000154C2 0000 0025 30               		dc.b 0,	0, 0, $25, $30
000154C7 0800 0825 30               		dc.b 8,	0, 8, $25, $30
000154CC 0000 0826 38               		dc.b 0,	0, 8, $26, $38
000154D1 0800 0029 38               		dc.b 8,	0, 0, $29, $38
000154D6 F800 0826 40               		dc.b $F8, 0, 8,	$26, $40
000154DB 0000 002D 40               		dc.b 0,	0, 0, $2D, $40
000154E0 F800 0825 48               		dc.b $F8, 0, 8,	$25, $48
000154E5 0000 0025 48               		dc.b 0,	0, 0, $25, $48
000154EA 0000 1025 50               		dc.b 0,	0, $10,	$25, $50
000154EF 09                         @sparkle4:	dc.b 9
000154F0 FC00 0826 30               		dc.b $FC, 0, 8,	$26, $30
000154F5 0400 0825 28               		dc.b 4,	0, 8, $25, $28
000154FA 0400 1027 38               		dc.b 4,	0, $10,	$27, $38
000154FF 0400 0826 40               		dc.b 4,	0, 8, $26, $40
00015504 FC00 1025 40               		dc.b $FC, 0, $10, $25, $40
00015509 FC00 1026 48               		dc.b $FC, 0, $10, $26, $48
0001550E 0C00 0827 48               		dc.b $C, 0, 8, $27, $48
00015513 0400 1826 50               		dc.b 4,	0, $18,	$26, $50
00015518 04                         		dc.b 4
00015519 0008 2758 00               @blank:		dc.b 0,	8, $27,	$58, 0
0001551E                            		even
0001551E                            		even
0001551E                            		include	"_anim\Water Splash.asm"
0001551E                            ; ---------------------------------------------------------------------------
0001551E                            ; Animation script - water splash (LZ)
0001551E                            ; ---------------------------------------------------------------------------
0001551E 0000                       Ani_Splash:	dc.w @splash-Ani_Splash
00015520 0400 0102 FC               @splash:	dc.b 4,	0, 1, 2, afRoutine
00015526 00                         		even
00015526 00                         		even
00015526                            Map_Splash:	include	"_maps\Water Splash.asm"
00015526                            ; ---------------------------------------------------------------------------
00015526                            ; Sprite mappings - water splash (LZ)
00015526                            ; ---------------------------------------------------------------------------
00015526                            Map_Splash_internal:
00015526 0000                       		dc.w @splash1-Map_Splash_internal
00015528 0000                       		dc.w @splash2-Map_Splash_internal
0001552A 0000                       		dc.w @splash3-Map_Splash_internal
0001552C 02                         @splash1:	dc.b 2
0001552D F204 006D F8               		dc.b $F2, 4, 0,	$6D, $F8
00015532 FA0C 006F F0               		dc.b $FA, $C, 0, $6F, $F0
00015537 02                         @splash2:	dc.b 2
00015538 E200 0073 F8               		dc.b $E2, 0, 0,	$73, $F8
0001553D EA0E 0074 F0               		dc.b $EA, $E, 0, $74, $F0
00015542 01                         @splash3:	dc.b 1
00015543 E20F 0080 F0               		dc.b $E2, $F, 0, $80, $F0
00015548                            		even
00015548                            		even
00015548                            
00015548                            		include	"_incObj\Sonic AnglePos.asm"
00015548                            ; ---------------------------------------------------------------------------
00015548                            ; Subroutine to	change Sonic's angle & position as he walks along the floor
00015548                            ; ---------------------------------------------------------------------------
00015548                            
00015548                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00015548                            
00015548                            
00015548                            Sonic_AnglePos:
00015548 0828 0003 0022             		btst	#3,obStatus(a0)
0001554E 6700                       		beq.s	loc_14602
00015550 7000                       		moveq	#0,d0
00015552 11C0 F768                  		move.b	d0,($FFFFF768).w
00015556 11C0 F76A                  		move.b	d0,($FFFFF76A).w
0001555A 4E75                       		rts	
0001555C                            ; ===========================================================================
0001555C                            
0001555C                            loc_14602:
0001555C 7003                       		moveq	#3,d0
0001555E 11C0 F768                  		move.b	d0,($FFFFF768).w
00015562 11C0 F76A                  		move.b	d0,($FFFFF76A).w
00015566 1028 0026                  		move.b	obAngle(a0),d0
0001556A 0600 0020                  		addi.b	#$20,d0
0001556E 6A00                       		bpl.s	loc_14624
00015570 1028 0026                  		move.b	obAngle(a0),d0
00015574 6A00                       		bpl.s	loc_1461E
00015576 5300                       		subq.b	#1,d0
00015578                            
00015578                            loc_1461E:
00015578 0600 0020                  		addi.b	#$20,d0
0001557C 6000                       		bra.s	loc_14630
0001557E                            ; ===========================================================================
0001557E                            
0001557E                            loc_14624:
0001557E 1028 0026                  		move.b	obAngle(a0),d0
00015582 6A00                       		bpl.s	loc_1462C
00015584 5200                       		addq.b	#1,d0
00015586                            
00015586                            loc_1462C:
00015586 0600 001F                  		addi.b	#$1F,d0
0001558A                            
0001558A                            loc_14630:
0001558A 0200 00C0                  		andi.b	#$C0,d0
0001558E 0C00 0040                  		cmpi.b	#$40,d0
00015592 6700 0000                  		beq.w	Sonic_WalkVertL
00015596 0C00 0080                  		cmpi.b	#$80,d0
0001559A 6700 0000                  		beq.w	Sonic_WalkCeiling
0001559E 0C00 00C0                  		cmpi.b	#$C0,d0
000155A2 6700 0000                  		beq.w	Sonic_WalkVertR
000155A6 3428 000C                  		move.w	obY(a0),d2
000155AA 3628 0008                  		move.w	obX(a0),d3
000155AE 7000                       		moveq	#0,d0
000155B0 1028 0016                  		move.b	obHeight(a0),d0
000155B4 4880                       		ext.w	d0
000155B6 D440                       		add.w	d0,d2
000155B8 1028 0017                  		move.b	obWidth(a0),d0
000155BC 4880                       		ext.w	d0
000155BE D640                       		add.w	d0,d3
000155C0 49F8 F768                  		lea	($FFFFF768).w,a4
000155C4 367C 0010                  		movea.w	#$10,a3
000155C8 3C3C 0000                  		move.w	#0,d6
000155CC 7A0D                       		moveq	#$D,d5
000155CE 6100 0000                  		bsr.w	FindFloor
000155D2 3F01                       		move.w	d1,-(sp)
000155D4 3428 000C                  		move.w	obY(a0),d2
000155D8 3628 0008                  		move.w	obX(a0),d3
000155DC 7000                       		moveq	#0,d0
000155DE 1028 0016                  		move.b	obHeight(a0),d0
000155E2 4880                       		ext.w	d0
000155E4 D440                       		add.w	d0,d2
000155E6 1028 0017                  		move.b	obWidth(a0),d0
000155EA 4880                       		ext.w	d0
000155EC 4440                       		neg.w	d0
000155EE D640                       		add.w	d0,d3
000155F0 49F8 F76A                  		lea	($FFFFF76A).w,a4
000155F4 367C 0010                  		movea.w	#$10,a3
000155F8 3C3C 0000                  		move.w	#0,d6
000155FC 7A0D                       		moveq	#$D,d5
000155FE 6100 0000                  		bsr.w	FindFloor
00015602 301F                       		move.w	(sp)+,d0
00015604 6100 0000                  		bsr.w	Sonic_Angle
00015608 4A41                       		tst.w	d1
0001560A 6700                       		beq.s	locret_146BE
0001560C 6A00                       		bpl.s	loc_146C0
0001560E 0C41 FFF2                  		cmpi.w	#-$E,d1
00015612 6D00                       		blt.s	locret_146E6
00015614 D368 000C                  		add.w	d1,obY(a0)
00015618                            
00015618                            locret_146BE:
00015618 4E75                       		rts	
0001561A                            ; ===========================================================================
0001561A                            
0001561A                            loc_146C0:
0001561A 0C41 000E                  		cmpi.w	#$E,d1
0001561E 6E00                       		bgt.s	loc_146CC
00015620                            
00015620                            loc_146C6:
00015620 D368 000C                  		add.w	d1,obY(a0)
00015624 4E75                       		rts	
00015626                            ; ===========================================================================
00015626                            
00015626                            loc_146CC:
00015626 4A28 0038                  		tst.b	$38(a0)
0001562A 66F4                       		bne.s	loc_146C6
0001562C 08E8 0001 0022             		bset	#1,obStatus(a0)
00015632 08A8 0005 0022             		bclr	#5,obStatus(a0)
00015638 117C 0001 001D             		move.b	#1,obNextAni(a0)
0001563E 4E75                       		rts	
00015640                            ; ===========================================================================
00015640                            
00015640                            locret_146E6:
00015640 4E75                       		rts	
00015642                            ; End of function Sonic_AnglePos
00015642                            
00015642                            ; ===========================================================================
00015642 2428 0008                  		move.l	obX(a0),d2
00015646 3028 0010                  		move.w	obVelX(a0),d0
0001564A 48C0                       		ext.l	d0
0001564C E180                       		asl.l	#8,d0
0001564E 9480                       		sub.l	d0,d2
00015650 2142 0008                  		move.l	d2,obX(a0)
00015654 303C 0038                  		move.w	#$38,d0
00015658 48C0                       		ext.l	d0
0001565A E180                       		asl.l	#8,d0
0001565C 9680                       		sub.l	d0,d3
0001565E 2143 000C                  		move.l	d3,obY(a0)
00015662 4E75                       		rts	
00015664                            ; ===========================================================================
00015664                            
00015664                            locret_1470A:
00015664 4E75                       		rts	
00015666                            ; ===========================================================================
00015666 2628 000C                  		move.l	obY(a0),d3
0001566A 3028 0012                  		move.w	obVelY(a0),d0
0001566E 0440 0038                  		subi.w	#$38,d0
00015672 3140 0012                  		move.w	d0,obVelY(a0)
00015676 48C0                       		ext.l	d0
00015678 E180                       		asl.l	#8,d0
0001567A 9680                       		sub.l	d0,d3
0001567C 2143 000C                  		move.l	d3,obY(a0)
00015680 4E75                       		rts	
00015682 4E75                       		rts	
00015684                            ; ===========================================================================
00015684 2428 0008                  		move.l	obX(a0),d2
00015688 2628 000C                  		move.l	obY(a0),d3
0001568C 3028 0010                  		move.w	obVelX(a0),d0
00015690 48C0                       		ext.l	d0
00015692 E180                       		asl.l	#8,d0
00015694 9480                       		sub.l	d0,d2
00015696 3028 0012                  		move.w	obVelY(a0),d0
0001569A 48C0                       		ext.l	d0
0001569C E180                       		asl.l	#8,d0
0001569E 9680                       		sub.l	d0,d3
000156A0 2142 0008                  		move.l	d2,obX(a0)
000156A4 2143 000C                  		move.l	d3,obY(a0)
000156A8 4E75                       		rts	
000156AA                            
000156AA                            ; ---------------------------------------------------------------------------
000156AA                            ; Subroutine to	change Sonic's angle as he walks along the floor
000156AA                            ; ---------------------------------------------------------------------------
000156AA                            
000156AA                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000156AA                            
000156AA                            
000156AA                            Sonic_Angle:
000156AA 1438 F76A                  		move.b	($FFFFF76A).w,d2
000156AE B240                       		cmp.w	d0,d1
000156B0 6F00                       		ble.s	loc_1475E
000156B2 1438 F768                  		move.b	($FFFFF768).w,d2
000156B6 3200                       		move.w	d0,d1
000156B8                            
000156B8                            loc_1475E:
000156B8 0802 0000                  		btst	#0,d2
000156BC 6600                       		bne.s	loc_1476A
000156BE 1142 0026                  		move.b	d2,obAngle(a0)
000156C2 4E75                       		rts	
000156C4                            ; ===========================================================================
000156C4                            
000156C4                            loc_1476A:
000156C4 1428 0026                  		move.b	obAngle(a0),d2
000156C8 0602 0020                  		addi.b	#$20,d2
000156CC 0202 00C0                  		andi.b	#$C0,d2
000156D0 1142 0026                  		move.b	d2,obAngle(a0)
000156D4 4E75                       		rts	
000156D6                            ; End of function Sonic_Angle
000156D6                            
000156D6                            ; ---------------------------------------------------------------------------
000156D6                            ; Subroutine allowing Sonic to walk up a vertical slope/wall to	his right
000156D6                            ; ---------------------------------------------------------------------------
000156D6                            
000156D6                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000156D6                            
000156D6                            
000156D6                            Sonic_WalkVertR:
000156D6 3428 000C                  		move.w	obY(a0),d2
000156DA 3628 0008                  		move.w	obX(a0),d3
000156DE 7000                       		moveq	#0,d0
000156E0 1028 0017                  		move.b	obWidth(a0),d0
000156E4 4880                       		ext.w	d0
000156E6 4440                       		neg.w	d0
000156E8 D440                       		add.w	d0,d2
000156EA 1028 0016                  		move.b	obHeight(a0),d0
000156EE 4880                       		ext.w	d0
000156F0 D640                       		add.w	d0,d3
000156F2 49F8 F768                  		lea	($FFFFF768).w,a4
000156F6 367C 0010                  		movea.w	#$10,a3
000156FA 3C3C 0000                  		move.w	#0,d6
000156FE 7A0D                       		moveq	#$D,d5
00015700 6100 0000                  		bsr.w	FindWall
00015704 3F01                       		move.w	d1,-(sp)
00015706 3428 000C                  		move.w	obY(a0),d2
0001570A 3628 0008                  		move.w	obX(a0),d3
0001570E 7000                       		moveq	#0,d0
00015710 1028 0017                  		move.b	obWidth(a0),d0
00015714 4880                       		ext.w	d0
00015716 D440                       		add.w	d0,d2
00015718 1028 0016                  		move.b	obHeight(a0),d0
0001571C 4880                       		ext.w	d0
0001571E D640                       		add.w	d0,d3
00015720 49F8 F76A                  		lea	($FFFFF76A).w,a4
00015724 367C 0010                  		movea.w	#$10,a3
00015728 3C3C 0000                  		move.w	#0,d6
0001572C 7A0D                       		moveq	#$D,d5
0001572E 6100 0000                  		bsr.w	FindWall
00015732 301F                       		move.w	(sp)+,d0
00015734 6100 FF74                  		bsr.w	Sonic_Angle
00015738 4A41                       		tst.w	d1
0001573A 6700                       		beq.s	locret_147F0
0001573C 6A00                       		bpl.s	loc_147F2
0001573E 0C41 FFF2                  		cmpi.w	#-$E,d1
00015742 6D00 FF20                  		blt.w	locret_1470A
00015746 D368 0008                  		add.w	d1,obX(a0)
0001574A                            
0001574A                            locret_147F0:
0001574A 4E75                       		rts	
0001574C                            ; ===========================================================================
0001574C                            
0001574C                            loc_147F2:
0001574C 0C41 000E                  		cmpi.w	#$E,d1
00015750 6E00                       		bgt.s	loc_147FE
00015752                            
00015752                            loc_147F8:
00015752 D368 0008                  		add.w	d1,obX(a0)
00015756 4E75                       		rts	
00015758                            ; ===========================================================================
00015758                            
00015758                            loc_147FE:
00015758 4A28 0038                  		tst.b	$38(a0)
0001575C 66F4                       		bne.s	loc_147F8
0001575E 08E8 0001 0022             		bset	#1,obStatus(a0)
00015764 08A8 0005 0022             		bclr	#5,obStatus(a0)
0001576A 117C 0001 001D             		move.b	#1,obNextAni(a0)
00015770 4E75                       		rts	
00015772                            ; End of function Sonic_WalkVertR
00015772                            
00015772                            ; ---------------------------------------------------------------------------
00015772                            ; Subroutine allowing Sonic to walk upside-down
00015772                            ; ---------------------------------------------------------------------------
00015772                            
00015772                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00015772                            
00015772                            
00015772                            Sonic_WalkCeiling:
00015772 3428 000C                  		move.w	obY(a0),d2
00015776 3628 0008                  		move.w	obX(a0),d3
0001577A 7000                       		moveq	#0,d0
0001577C 1028 0016                  		move.b	obHeight(a0),d0
00015780 4880                       		ext.w	d0
00015782 9440                       		sub.w	d0,d2
00015784 0A42 000F                  		eori.w	#$F,d2
00015788 1028 0017                  		move.b	obWidth(a0),d0
0001578C 4880                       		ext.w	d0
0001578E D640                       		add.w	d0,d3
00015790 49F8 F768                  		lea	($FFFFF768).w,a4
00015794 367C FFF0                  		movea.w	#-$10,a3
00015798 3C3C 1000                  		move.w	#$1000,d6
0001579C 7A0D                       		moveq	#$D,d5
0001579E 6100 0000                  		bsr.w	FindFloor
000157A2 3F01                       		move.w	d1,-(sp)
000157A4 3428 000C                  		move.w	obY(a0),d2
000157A8 3628 0008                  		move.w	obX(a0),d3
000157AC 7000                       		moveq	#0,d0
000157AE 1028 0016                  		move.b	obHeight(a0),d0
000157B2 4880                       		ext.w	d0
000157B4 9440                       		sub.w	d0,d2
000157B6 0A42 000F                  		eori.w	#$F,d2
000157BA 1028 0017                  		move.b	obWidth(a0),d0
000157BE 4880                       		ext.w	d0
000157C0 9640                       		sub.w	d0,d3
000157C2 49F8 F76A                  		lea	($FFFFF76A).w,a4
000157C6 367C FFF0                  		movea.w	#-$10,a3
000157CA 3C3C 1000                  		move.w	#$1000,d6
000157CE 7A0D                       		moveq	#$D,d5
000157D0 6100 0000                  		bsr.w	FindFloor
000157D4 301F                       		move.w	(sp)+,d0
000157D6 6100 FED2                  		bsr.w	Sonic_Angle
000157DA 4A41                       		tst.w	d1
000157DC 6700                       		beq.s	locret_14892
000157DE 6A00                       		bpl.s	loc_14894
000157E0 0C41 FFF2                  		cmpi.w	#-$E,d1
000157E4 6D00 FE5A                  		blt.w	locret_146E6
000157E8 9368 000C                  		sub.w	d1,obY(a0)
000157EC                            
000157EC                            locret_14892:
000157EC 4E75                       		rts	
000157EE                            ; ===========================================================================
000157EE                            
000157EE                            loc_14894:
000157EE 0C41 000E                  		cmpi.w	#$E,d1
000157F2 6E00                       		bgt.s	loc_148A0
000157F4                            
000157F4                            loc_1489A:
000157F4 9368 000C                  		sub.w	d1,obY(a0)
000157F8 4E75                       		rts	
000157FA                            ; ===========================================================================
000157FA                            
000157FA                            loc_148A0:
000157FA 4A28 0038                  		tst.b	$38(a0)
000157FE 66F4                       		bne.s	loc_1489A
00015800 08E8 0001 0022             		bset	#1,obStatus(a0)
00015806 08A8 0005 0022             		bclr	#5,obStatus(a0)
0001580C 117C 0001 001D             		move.b	#1,obNextAni(a0)
00015812 4E75                       		rts	
00015814                            ; End of function Sonic_WalkCeiling
00015814                            
00015814                            ; ---------------------------------------------------------------------------
00015814                            ; Subroutine allowing Sonic to walk up a vertical slope/wall to	his left
00015814                            ; ---------------------------------------------------------------------------
00015814                            
00015814                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00015814                            
00015814                            
00015814                            Sonic_WalkVertL:
00015814 3428 000C                  		move.w	obY(a0),d2
00015818 3628 0008                  		move.w	obX(a0),d3
0001581C 7000                       		moveq	#0,d0
0001581E 1028 0017                  		move.b	obWidth(a0),d0
00015822 4880                       		ext.w	d0
00015824 9440                       		sub.w	d0,d2
00015826 1028 0016                  		move.b	obHeight(a0),d0
0001582A 4880                       		ext.w	d0
0001582C 9640                       		sub.w	d0,d3
0001582E 0A43 000F                  		eori.w	#$F,d3
00015832 49F8 F768                  		lea	($FFFFF768).w,a4
00015836 367C FFF0                  		movea.w	#-$10,a3
0001583A 3C3C 0800                  		move.w	#$800,d6
0001583E 7A0D                       		moveq	#$D,d5
00015840 6100 0000                  		bsr.w	FindWall
00015844 3F01                       		move.w	d1,-(sp)
00015846 3428 000C                  		move.w	obY(a0),d2
0001584A 3628 0008                  		move.w	obX(a0),d3
0001584E 7000                       		moveq	#0,d0
00015850 1028 0017                  		move.b	obWidth(a0),d0
00015854 4880                       		ext.w	d0
00015856 D440                       		add.w	d0,d2
00015858 1028 0016                  		move.b	obHeight(a0),d0
0001585C 4880                       		ext.w	d0
0001585E 9640                       		sub.w	d0,d3
00015860 0A43 000F                  		eori.w	#$F,d3
00015864 49F8 F76A                  		lea	($FFFFF76A).w,a4
00015868 367C FFF0                  		movea.w	#-$10,a3
0001586C 3C3C 0800                  		move.w	#$800,d6
00015870 7A0D                       		moveq	#$D,d5
00015872 6100 0000                  		bsr.w	FindWall
00015876 301F                       		move.w	(sp)+,d0
00015878 6100 FE30                  		bsr.w	Sonic_Angle
0001587C 4A41                       		tst.w	d1
0001587E 6700                       		beq.s	locret_14934
00015880 6A00                       		bpl.s	loc_14936
00015882 0C41 FFF2                  		cmpi.w	#-$E,d1
00015886 6D00 FDDC                  		blt.w	locret_1470A
0001588A 9368 0008                  		sub.w	d1,obX(a0)
0001588E                            
0001588E                            locret_14934:
0001588E 4E75                       		rts	
00015890                            ; ===========================================================================
00015890                            
00015890                            loc_14936:
00015890 0C41 000E                  		cmpi.w	#$E,d1
00015894 6E00                       		bgt.s	loc_14942
00015896                            
00015896                            loc_1493C:
00015896 9368 0008                  		sub.w	d1,obX(a0)
0001589A 4E75                       		rts	
0001589C                            ; ===========================================================================
0001589C                            
0001589C                            loc_14942:
0001589C 4A28 0038                  		tst.b	$38(a0)
000158A0 66F4                       		bne.s	loc_1493C
000158A2 08E8 0001 0022             		bset	#1,obStatus(a0)
000158A8 08A8 0005 0022             		bclr	#5,obStatus(a0)
000158AE 117C 0001 001D             		move.b	#1,obNextAni(a0)
000158B4 4E75                       		rts	
000158B6                            ; End of function Sonic_WalkVertL
000158B6                            ; End of function Sonic_WalkVertL
000158B6                            
000158B6                            		include	"_incObj\sub FindNearestTile.asm"
000158B6                            ; ---------------------------------------------------------------------------
000158B6                            ; Subroutine to	find which tile	the object is standing on
000158B6                            
000158B6                            ; input:
000158B6                            ;	d2 = y-position of object's bottom edge
000158B6                            ;	d3 = x-position of object
000158B6                            
000158B6                            ; output:
000158B6                            ;	a1 = address within 256x256 mappings where object is standing
000158B6                            ;	     (refers to a 16x16 tile number)
000158B6                            ; ---------------------------------------------------------------------------
000158B6                            
000158B6                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000158B6                            
000158B6                            
000158B6                            FindNearestTile:
000158B6 3002                       		move.w	d2,d0		; get y-pos. of bottom edge of object
000158B8 E248                       		lsr.w	#1,d0
000158BA 0240 0380                  		andi.w	#$380,d0
000158BE 3203                       		move.w	d3,d1		; get x-pos. of object
000158C0 E049                       		lsr.w	#8,d1
000158C2 0241 007F                  		andi.w	#$7F,d1
000158C6 D041                       		add.w	d1,d0		; combine
000158C8 72FF                       		moveq	#-1,d1
000158CA 43F8 A400                  		lea	(v_lvllayout).w,a1
000158CE 1231 0000                  		move.b	(a1,d0.w),d1	; get 256x256 tile number
000158D2 6700                       		beq.s	@blanktile	; branch if 0
000158D4 6B00                       		bmi.s	@specialtile	; branch if >$7F
000158D6 5301                       		subq.b	#1,d1
000158D8 4881                       		ext.w	d1
000158DA EE59                       		ror.w	#7,d1
000158DC 3002                       		move.w	d2,d0
000158DE D040                       		add.w	d0,d0
000158E0 0240 01E0                  		andi.w	#$1E0,d0
000158E4 D240                       		add.w	d0,d1
000158E6 3003                       		move.w	d3,d0
000158E8 E648                       		lsr.w	#3,d0
000158EA 0240 001E                  		andi.w	#$1E,d0
000158EE D240                       		add.w	d0,d1
000158F0                            
000158F0                            @blanktile:
000158F0 2241                       		movea.l	d1,a1
000158F2 4E75                       		rts	
000158F4                            ; ===========================================================================
000158F4                            
000158F4                            @specialtile:
000158F4 0241 007F                  		andi.w	#$7F,d1
000158F8 0828 0006 0001             		btst	#6,obRender(a0) ; is object "behind a loop"?
000158FE 6700                       		beq.s	@treatasnormal	; if not, branch
00015900 5241                       		addq.w	#1,d1
00015902 0C41 0029                  		cmpi.w	#$29,d1
00015906 6600                       		bne.s	@treatasnormal
00015908 323C 0051                  		move.w	#$51,d1
0001590C                            
0001590C                            	@treatasnormal:
0001590C 5301                       		subq.b	#1,d1
0001590E EE59                       		ror.w	#7,d1
00015910 3002                       		move.w	d2,d0
00015912 D040                       		add.w	d0,d0
00015914 0240 01E0                  		andi.w	#$1E0,d0
00015918 D240                       		add.w	d0,d1
0001591A 3003                       		move.w	d3,d0
0001591C E648                       		lsr.w	#3,d0
0001591E 0240 001E                  		andi.w	#$1E,d0
00015922 D240                       		add.w	d0,d1
00015924 2241                       		movea.l	d1,a1
00015926 4E75                       		rts	
00015928                            ; End of function FindNearestTile
00015928                            ; End of function FindNearestTile
00015928                            		include	"_incObj\sub FindFloor.asm"
00015928                            ; ---------------------------------------------------------------------------
00015928                            ; Subroutine to	find the floor
00015928                            
00015928                            ; input:
00015928                            ;	d2 = y-position of object's bottom edge
00015928                            ;	d3 = x-position of object
00015928                            ;	d5 = bit to test for solidness
00015928                            
00015928                            ; output:
00015928                            ;	d1 = distance to the floor
00015928                            ;	a1 = address within 256x256 mappings where object is standing
00015928                            ;	     (refers to a 16x16 tile number)
00015928                            ;	(a4) = floor angle
00015928                            ; ---------------------------------------------------------------------------
00015928                            
00015928                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00015928                            
00015928                            
00015928                            FindFloor:
00015928 618C                       		bsr.s	FindNearestTile
0001592A 3011                       		move.w	(a1),d0		; get value for solidness, orientation and 16x16 tile number
0001592C 3800                       		move.w	d0,d4
0001592E 0240 07FF                  		andi.w	#$7FF,d0
00015932 6700                       		beq.s	@isblank	; branch if tile is blank
00015934 0B04                       		btst	d5,d4		; is the tile solid?
00015936 6600                       		bne.s	@issolid	; if yes, branch
00015938                            
00015938                            @isblank:
00015938 D44B                       		add.w	a3,d2
0001593A 6100 0000                  		bsr.w	FindFloor2	; try tile below the nearest
0001593E 944B                       		sub.w	a3,d2
00015940 0641 0010                  		addi.w	#$10,d1		; return distance to floor
00015944 4E75                       		rts	
00015946                            ; ===========================================================================
00015946                            
00015946                            @issolid:
00015946 2478 F796                  		movea.l	(v_collindex).w,a2
0001594A 1032 0000                  		move.b	(a2,d0.w),d0	; get collision block number
0001594E 0240 00FF                  		andi.w	#$FF,d0
00015952 67E4                       		beq.s	@isblank	; branch if 0
00015954 45F9 0000 0000             		lea	(AngleMap).l,a2
0001595A 18B2 0000                  		move.b	(a2,d0.w),(a4)	; get collision angle value
0001595E E948                       		lsl.w	#4,d0
00015960 3203                       		move.w	d3,d1		; get x-pos. of object
00015962 0804 000B                  		btst	#$B,d4		; is block flipped horizontally?
00015966 6700                       		beq.s	@noflip		; if not, branch
00015968 4641                       		not.w	d1
0001596A 4414                       		neg.b	(a4)
0001596C                            
0001596C                            	@noflip:
0001596C 0804 000C                  		btst	#$C,d4		; is block flipped vertically?
00015970 6700                       		beq.s	@noflip2	; if not, branch
00015972 0614 0040                  		addi.b	#$40,(a4)
00015976 4414                       		neg.b	(a4)
00015978 0414 0040                  		subi.b	#$40,(a4)
0001597C                            
0001597C                            	@noflip2:
0001597C 0241 000F                  		andi.w	#$F,d1
00015980 D240                       		add.w	d0,d1		; (block num. * $10) + x-pos. = place in array
00015982 45F9 0000 0000             		lea	(CollArray1).l,a2
00015988 1032 1000                  		move.b	(a2,d1.w),d0	; get collision height
0001598C 4880                       		ext.w	d0
0001598E BD44                       		eor.w	d6,d4
00015990 0804 000C                  		btst	#$C,d4		; is block flipped vertically?
00015994 6700                       		beq.s	@noflip3	; if not, branch
00015996 4440                       		neg.w	d0
00015998                            
00015998                            	@noflip3:
00015998 4A40                       		tst.w	d0
0001599A 679C                       		beq.s	@isblank	; branch if height is 0
0001599C 6B00                       		bmi.s	@negfloor	; branch if height is negative
0001599E 0C00 0010                  		cmpi.b	#$10,d0
000159A2 6700                       		beq.s	@maxfloor	; branch if height is $10 (max)
000159A4 3202                       		move.w	d2,d1		; get y-pos. of object
000159A6 0241 000F                  		andi.w	#$F,d1
000159AA D041                       		add.w	d1,d0
000159AC 323C 000F                  		move.w	#$F,d1
000159B0 9240                       		sub.w	d0,d1		; return distance to floor
000159B2 4E75                       		rts	
000159B4                            ; ===========================================================================
000159B4                            
000159B4                            @negfloor:
000159B4 3202                       		move.w	d2,d1
000159B6 0241 000F                  		andi.w	#$F,d1
000159BA D041                       		add.w	d1,d0
000159BC 6A00 FF7A                  		bpl.w	@isblank
000159C0                            
000159C0                            @maxfloor:
000159C0 944B                       		sub.w	a3,d2
000159C2 6100 0000                  		bsr.w	FindFloor2	; try tile above the nearest
000159C6 D44B                       		add.w	a3,d2
000159C8 0441 0010                  		subi.w	#$10,d1		; return distance to floor
000159CC 4E75                       		rts	
000159CE                            ; End of function FindFloor
000159CE                            
000159CE                            
000159CE                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000159CE                            
000159CE                            
000159CE                            FindFloor2:
000159CE 6100 FEE6                  		bsr.w	FindNearestTile
000159D2 3011                       		move.w	(a1),d0
000159D4 3800                       		move.w	d0,d4
000159D6 0240 07FF                  		andi.w	#$7FF,d0
000159DA 6700                       		beq.s	@isblank2
000159DC 0B04                       		btst	d5,d4
000159DE 6600                       		bne.s	@issolid
000159E0                            
000159E0                            @isblank2:
000159E0 323C 000F                  		move.w	#$F,d1
000159E4 3002                       		move.w	d2,d0
000159E6 0240 000F                  		andi.w	#$F,d0
000159EA 9240                       		sub.w	d0,d1
000159EC 4E75                       		rts	
000159EE                            ; ===========================================================================
000159EE                            
000159EE                            @issolid:
000159EE 2478 F796                  		movea.l	(v_collindex).w,a2
000159F2 1032 0000                  		move.b	(a2,d0.w),d0
000159F6 0240 00FF                  		andi.w	#$FF,d0
000159FA 67E4                       		beq.s	@isblank2
000159FC 45F9 0000 0000             		lea	(AngleMap).l,a2
00015A02 18B2 0000                  		move.b	(a2,d0.w),(a4)
00015A06 E948                       		lsl.w	#4,d0
00015A08 3203                       		move.w	d3,d1
00015A0A 0804 000B                  		btst	#$B,d4
00015A0E 6700                       		beq.s	@noflip
00015A10 4641                       		not.w	d1
00015A12 4414                       		neg.b	(a4)
00015A14                            
00015A14                            	@noflip:
00015A14 0804 000C                  		btst	#$C,d4
00015A18 6700                       		beq.s	@noflip2
00015A1A 0614 0040                  		addi.b	#$40,(a4)
00015A1E 4414                       		neg.b	(a4)
00015A20 0414 0040                  		subi.b	#$40,(a4)
00015A24                            
00015A24                            	@noflip2:
00015A24 0241 000F                  		andi.w	#$F,d1
00015A28 D240                       		add.w	d0,d1
00015A2A 45F9 0000 0000             		lea	(CollArray1).l,a2
00015A30 1032 1000                  		move.b	(a2,d1.w),d0
00015A34 4880                       		ext.w	d0
00015A36 BD44                       		eor.w	d6,d4
00015A38 0804 000C                  		btst	#$C,d4
00015A3C 6700                       		beq.s	@noflip3
00015A3E 4440                       		neg.w	d0
00015A40                            
00015A40                            	@noflip3:
00015A40 4A40                       		tst.w	d0
00015A42 679C                       		beq.s	@isblank2
00015A44 6B00                       		bmi.s	@negfloor
00015A46 3202                       		move.w	d2,d1
00015A48 0241 000F                  		andi.w	#$F,d1
00015A4C D041                       		add.w	d1,d0
00015A4E 323C 000F                  		move.w	#$F,d1
00015A52 9240                       		sub.w	d0,d1
00015A54 4E75                       		rts	
00015A56                            ; ===========================================================================
00015A56                            
00015A56                            @negfloor:
00015A56 3202                       		move.w	d2,d1
00015A58 0241 000F                  		andi.w	#$F,d1
00015A5C D041                       		add.w	d1,d0
00015A5E 6A00 FF80                  		bpl.w	@isblank2
00015A62 4641                       		not.w	d1
00015A64 4E75                       		rts	
00015A66                            ; End of function FindFloor2
00015A66                            ; End of function FindFloor2
00015A66                            		include	"_incObj\sub FindWall.asm"
00015A66                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00015A66                            
00015A66                            
00015A66                            FindWall:
00015A66 6100 FE4E                  		bsr.w	FindNearestTile
00015A6A 3011                       		move.w	(a1),d0
00015A6C 3800                       		move.w	d0,d4
00015A6E 0240 07FF                  		andi.w	#$7FF,d0
00015A72 6700                       		beq.s	loc_14B1E
00015A74 0B04                       		btst	d5,d4
00015A76 6600                       		bne.s	loc_14B2C
00015A78                            
00015A78                            loc_14B1E:
00015A78 D64B                       		add.w	a3,d3
00015A7A 6100 0000                  		bsr.w	FindWall2
00015A7E 964B                       		sub.w	a3,d3
00015A80 0641 0010                  		addi.w	#$10,d1
00015A84 4E75                       		rts	
00015A86                            ; ===========================================================================
00015A86                            
00015A86                            loc_14B2C:
00015A86 2478 F796                  		movea.l	(v_collindex).w,a2
00015A8A 1032 0000                  		move.b	(a2,d0.w),d0
00015A8E 0240 00FF                  		andi.w	#$FF,d0
00015A92 67E4                       		beq.s	loc_14B1E
00015A94 45F9 0000 0000             		lea	(AngleMap).l,a2
00015A9A 18B2 0000                  		move.b	(a2,d0.w),(a4)
00015A9E E948                       		lsl.w	#4,d0
00015AA0 3202                       		move.w	d2,d1
00015AA2 0804 000C                  		btst	#$C,d4
00015AA6 6700                       		beq.s	loc_14B5A
00015AA8 4641                       		not.w	d1
00015AAA 0614 0040                  		addi.b	#$40,(a4)
00015AAE 4414                       		neg.b	(a4)
00015AB0 0414 0040                  		subi.b	#$40,(a4)
00015AB4                            
00015AB4                            loc_14B5A:
00015AB4 0804 000B                  		btst	#$B,d4
00015AB8 6700                       		beq.s	loc_14B62
00015ABA 4414                       		neg.b	(a4)
00015ABC                            
00015ABC                            loc_14B62:
00015ABC 0241 000F                  		andi.w	#$F,d1
00015AC0 D240                       		add.w	d0,d1
00015AC2 45F9 0000 0000             		lea	(CollArray2).l,a2
00015AC8 1032 1000                  		move.b	(a2,d1.w),d0
00015ACC 4880                       		ext.w	d0
00015ACE BD44                       		eor.w	d6,d4
00015AD0 0804 000B                  		btst	#$B,d4
00015AD4 6700                       		beq.s	loc_14B7E
00015AD6 4440                       		neg.w	d0
00015AD8                            
00015AD8                            loc_14B7E:
00015AD8 4A40                       		tst.w	d0
00015ADA 679C                       		beq.s	loc_14B1E
00015ADC 6B00                       		bmi.s	loc_14B9A
00015ADE 0C00 0010                  		cmpi.b	#$10,d0
00015AE2 6700                       		beq.s	loc_14BA6
00015AE4 3203                       		move.w	d3,d1
00015AE6 0241 000F                  		andi.w	#$F,d1
00015AEA D041                       		add.w	d1,d0
00015AEC 323C 000F                  		move.w	#$F,d1
00015AF0 9240                       		sub.w	d0,d1
00015AF2 4E75                       		rts	
00015AF4                            ; ===========================================================================
00015AF4                            
00015AF4                            loc_14B9A:
00015AF4 3203                       		move.w	d3,d1
00015AF6 0241 000F                  		andi.w	#$F,d1
00015AFA D041                       		add.w	d1,d0
00015AFC 6A00 FF7A                  		bpl.w	loc_14B1E
00015B00                            
00015B00                            loc_14BA6:
00015B00 964B                       		sub.w	a3,d3
00015B02 6100 0000                  		bsr.w	FindWall2
00015B06 D64B                       		add.w	a3,d3
00015B08 0441 0010                  		subi.w	#$10,d1
00015B0C 4E75                       		rts	
00015B0E                            ; End of function FindWall
00015B0E                            
00015B0E                            
00015B0E                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00015B0E                            
00015B0E                            
00015B0E                            FindWall2:
00015B0E 6100 FDA6                  		bsr.w	FindNearestTile
00015B12 3011                       		move.w	(a1),d0
00015B14 3800                       		move.w	d0,d4
00015B16 0240 07FF                  		andi.w	#$7FF,d0
00015B1A 6700                       		beq.s	loc_14BC6
00015B1C 0B04                       		btst	d5,d4
00015B1E 6600                       		bne.s	loc_14BD4
00015B20                            
00015B20                            loc_14BC6:
00015B20 323C 000F                  		move.w	#$F,d1
00015B24 3003                       		move.w	d3,d0
00015B26 0240 000F                  		andi.w	#$F,d0
00015B2A 9240                       		sub.w	d0,d1
00015B2C 4E75                       		rts	
00015B2E                            ; ===========================================================================
00015B2E                            
00015B2E                            loc_14BD4:
00015B2E 2478 F796                  		movea.l	(v_collindex).w,a2
00015B32 1032 0000                  		move.b	(a2,d0.w),d0
00015B36 0240 00FF                  		andi.w	#$FF,d0
00015B3A 67E4                       		beq.s	loc_14BC6
00015B3C 45F9 0000 0000             		lea	(AngleMap).l,a2
00015B42 18B2 0000                  		move.b	(a2,d0.w),(a4)
00015B46 E948                       		lsl.w	#4,d0
00015B48 3202                       		move.w	d2,d1
00015B4A 0804 000C                  		btst	#$C,d4
00015B4E 6700                       		beq.s	loc_14C02
00015B50 4641                       		not.w	d1
00015B52 0614 0040                  		addi.b	#$40,(a4)
00015B56 4414                       		neg.b	(a4)
00015B58 0414 0040                  		subi.b	#$40,(a4)
00015B5C                            
00015B5C                            loc_14C02:
00015B5C 0804 000B                  		btst	#$B,d4
00015B60 6700                       		beq.s	loc_14C0A
00015B62 4414                       		neg.b	(a4)
00015B64                            
00015B64                            loc_14C0A:
00015B64 0241 000F                  		andi.w	#$F,d1
00015B68 D240                       		add.w	d0,d1
00015B6A 45F9 0000 0000             		lea	(CollArray2).l,a2
00015B70 1032 1000                  		move.b	(a2,d1.w),d0
00015B74 4880                       		ext.w	d0
00015B76 BD44                       		eor.w	d6,d4
00015B78 0804 000B                  		btst	#$B,d4
00015B7C 6700                       		beq.s	loc_14C26
00015B7E 4440                       		neg.w	d0
00015B80                            
00015B80                            loc_14C26:
00015B80 4A40                       		tst.w	d0
00015B82 679C                       		beq.s	loc_14BC6
00015B84 6B00                       		bmi.s	loc_14C3C
00015B86 3203                       		move.w	d3,d1
00015B88 0241 000F                  		andi.w	#$F,d1
00015B8C D041                       		add.w	d1,d0
00015B8E 323C 000F                  		move.w	#$F,d1
00015B92 9240                       		sub.w	d0,d1
00015B94 4E75                       		rts	
00015B96                            ; ===========================================================================
00015B96                            
00015B96                            loc_14C3C:
00015B96 3203                       		move.w	d3,d1
00015B98 0241 000F                  		andi.w	#$F,d1
00015B9C D041                       		add.w	d1,d0
00015B9E 6A00 FF80                  		bpl.w	loc_14BC6
00015BA2 4641                       		not.w	d1
00015BA4 4E75                       		rts	
00015BA6                            ; End of function FindWall2
00015BA6                            ; End of function FindWall2
00015BA6                            
00015BA6                            ; ---------------------------------------------------------------------------
00015BA6                            ; Unused floor/wall subroutine - logs something	to do with collision
00015BA6                            ; ---------------------------------------------------------------------------
00015BA6                            
00015BA6                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00015BA6                            
00015BA6                            
00015BA6                            FloorLog_Unk:
00015BA6 4E75                       		rts	
00015BA8                            
00015BA8 43F9 0000 0000             		lea	(CollArray1).l,a1
00015BAE 45F9 0000 0000             		lea	(CollArray1).l,a2
00015BB4 363C 00FF                  		move.w	#$FF,d3
00015BB8                            
00015BB8                            loc_14C5E:
00015BB8 7A10                       		moveq	#$10,d5
00015BBA 343C 000F                  		move.w	#$F,d2
00015BBE                            
00015BBE                            loc_14C64:
00015BBE 7800                       		moveq	#0,d4
00015BC0 323C 000F                  		move.w	#$F,d1
00015BC4                            
00015BC4                            loc_14C6A:
00015BC4 3019                       		move.w	(a1)+,d0
00015BC6 EAA8                       		lsr.l	d5,d0
00015BC8 D944                       		addx.w	d4,d4
00015BCA 51C9 FFF8                  		dbf	d1,loc_14C6A
00015BCE                            
00015BCE 34C4                       		move.w	d4,(a2)+
00015BD0 92FC 0020                  		suba.w	#$20,a1
00015BD4 5345                       		subq.w	#1,d5
00015BD6 51CA FFE6                  		dbf	d2,loc_14C64
00015BDA                            
00015BDA D2FC 0020                  		adda.w	#$20,a1
00015BDE 51CB FFD8                  		dbf	d3,loc_14C5E
00015BE2                            
00015BE2 43F9 0000 0000             		lea	(CollArray1).l,a1
00015BE8 45F9 0000 0000             		lea	(CollArray2).l,a2
00015BEE 6100                       		bsr.s	FloorLog_Unk2
00015BF0 43F9 0000 0000             		lea	(CollArray1).l,a1
00015BF6 45F9 0000 0000             		lea	(CollArray1).l,a2
00015BFC                            
00015BFC                            ; End of function FloorLog_Unk
00015BFC                            
00015BFC                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00015BFC                            
00015BFC                            
00015BFC                            FloorLog_Unk2:
00015BFC 363C 0FFF                  		move.w	#$FFF,d3
00015C00                            
00015C00                            loc_14CA6:
00015C00 7400                       		moveq	#0,d2
00015C02 323C 000F                  		move.w	#$F,d1
00015C06 3019                       		move.w	(a1)+,d0
00015C08 6700                       		beq.s	loc_14CD4
00015C0A 6B00                       		bmi.s	loc_14CBE
00015C0C                            
00015C0C                            loc_14CB2:
00015C0C E248                       		lsr.w	#1,d0
00015C0E 6400                       		bhs.s	loc_14CB8
00015C10 5202                       		addq.b	#1,d2
00015C12                            
00015C12                            loc_14CB8:
00015C12 51C9 FFF8                  		dbf	d1,loc_14CB2
00015C16                            
00015C16 6000                       		bra.s	loc_14CD6
00015C18                            ; ===========================================================================
00015C18                            
00015C18                            loc_14CBE:
00015C18 0C40 FFFF                  		cmpi.w	#-1,d0
00015C1C 6700                       		beq.s	loc_14CD0
00015C1E                            
00015C1E                            loc_14CC4:
00015C1E E348                       		lsl.w	#1,d0
00015C20 6400                       		bhs.s	loc_14CCA
00015C22 5302                       		subq.b	#1,d2
00015C24                            
00015C24                            loc_14CCA:
00015C24 51C9 FFF8                  		dbf	d1,loc_14CC4
00015C28                            
00015C28 6000                       		bra.s	loc_14CD6
00015C2A                            ; ===========================================================================
00015C2A                            
00015C2A                            loc_14CD0:
00015C2A 303C 0010                  		move.w	#$10,d0
00015C2E                            
00015C2E                            loc_14CD4:
00015C2E 3400                       		move.w	d0,d2
00015C30                            
00015C30                            loc_14CD6:
00015C30 14C2                       		move.b	d2,(a2)+
00015C32 51CB FFCC                  		dbf	d3,loc_14CA6
00015C36                            
00015C36 4E75                       		rts	
00015C38                            
00015C38                            ; End of function FloorLog_Unk2
00015C38                            
00015C38                            
00015C38                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00015C38                            
00015C38                            
00015C38                            Sonic_WalkSpeed:
00015C38 2628 0008                  		move.l	obX(a0),d3
00015C3C 2428 000C                  		move.l	obY(a0),d2
00015C40 3228 0010                  		move.w	obVelX(a0),d1
00015C44 48C1                       		ext.l	d1
00015C46 E181                       		asl.l	#8,d1
00015C48 D681                       		add.l	d1,d3
00015C4A 3228 0012                  		move.w	obVelY(a0),d1
00015C4E 48C1                       		ext.l	d1
00015C50 E181                       		asl.l	#8,d1
00015C52 D481                       		add.l	d1,d2
00015C54 4842                       		swap	d2
00015C56 4843                       		swap	d3
00015C58 11C0 F768                  		move.b	d0,(v_anglebuffer).w
00015C5C 11C0 F76A                  		move.b	d0,($FFFFF76A).w
00015C60 1200                       		move.b	d0,d1
00015C62 0600 0020                  		addi.b	#$20,d0
00015C66 6A00                       		bpl.s	loc_14D1A
00015C68 1001                       		move.b	d1,d0
00015C6A 6A00                       		bpl.s	loc_14D14
00015C6C 5300                       		subq.b	#1,d0
00015C6E                            
00015C6E                            loc_14D14:
00015C6E 0600 0020                  		addi.b	#$20,d0
00015C72 6000                       		bra.s	loc_14D24
00015C74                            ; ===========================================================================
00015C74                            
00015C74                            loc_14D1A:
00015C74 1001                       		move.b	d1,d0
00015C76 6A00                       		bpl.s	loc_14D20
00015C78 5200                       		addq.b	#1,d0
00015C7A                            
00015C7A                            loc_14D20:
00015C7A 0600 001F                  		addi.b	#$1F,d0
00015C7E                            
00015C7E                            loc_14D24:
00015C7E 0200 00C0                  		andi.b	#$C0,d0
00015C82 6700 0000                  		beq.w	loc_14DF0
00015C86 0C00 0080                  		cmpi.b	#$80,d0
00015C8A 6700 0000                  		beq.w	loc_14F7C
00015C8E 0201 0038                  		andi.b	#$38,d1
00015C92 6600                       		bne.s	loc_14D3C
00015C94 5042                       		addq.w	#8,d2
00015C96                            
00015C96                            loc_14D3C:
00015C96 0C00 0040                  		cmpi.b	#$40,d0
00015C9A 6700 0000                  		beq.w	loc_1504A
00015C9E 6000 0000                  		bra.w	loc_14EBC
00015CA2                            
00015CA2                            ; End of function Sonic_WalkSpeed
00015CA2                            
00015CA2                            
00015CA2                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00015CA2                            
00015CA2                            
00015CA2                            sub_14D48:
00015CA2 11C0 F768                  		move.b	d0,(v_anglebuffer).w
00015CA6 11C0 F76A                  		move.b	d0,($FFFFF76A).w
00015CAA 0600 0020                  		addi.b	#$20,d0
00015CAE 0200 00C0                  		andi.b	#$C0,d0
00015CB2 0C00 0040                  		cmpi.b	#$40,d0
00015CB6 6700 0000                  		beq.w	loc_14FD6
00015CBA 0C00 0080                  		cmpi.b	#$80,d0
00015CBE 6700 0000                  		beq.w	Sonic_DontRunOnWalls
00015CC2 0C00 00C0                  		cmpi.b	#$C0,d0
00015CC6 6700 0000                  		beq.w	sub_14E50
00015CCA                            
00015CCA                            ; End of function sub_14D48
00015CCA                            
00015CCA                            ; ---------------------------------------------------------------------------
00015CCA                            ; Subroutine to	make Sonic land	on the floor after jumping
00015CCA                            ; ---------------------------------------------------------------------------
00015CCA                            
00015CCA                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00015CCA                            
00015CCA                            
00015CCA                            Sonic_HitFloor:
00015CCA 3428 000C                  		move.w	obY(a0),d2
00015CCE 3628 0008                  		move.w	obX(a0),d3
00015CD2 7000                       		moveq	#0,d0
00015CD4 1028 0016                  		move.b	obHeight(a0),d0
00015CD8 4880                       		ext.w	d0
00015CDA D440                       		add.w	d0,d2
00015CDC 1028 0017                  		move.b	obWidth(a0),d0
00015CE0 4880                       		ext.w	d0
00015CE2 D640                       		add.w	d0,d3
00015CE4 49F8 F768                  		lea	(v_anglebuffer).w,a4
00015CE8 367C 0010                  		movea.w	#$10,a3
00015CEC 3C3C 0000                  		move.w	#0,d6
00015CF0 7A0D                       		moveq	#$D,d5
00015CF2 6100 FC34                  		bsr.w	FindFloor
00015CF6 3F01                       		move.w	d1,-(sp)
00015CF8 3428 000C                  		move.w	obY(a0),d2
00015CFC 3628 0008                  		move.w	obX(a0),d3
00015D00 7000                       		moveq	#0,d0
00015D02 1028 0016                  		move.b	obHeight(a0),d0
00015D06 4880                       		ext.w	d0
00015D08 D440                       		add.w	d0,d2
00015D0A 1028 0017                  		move.b	obWidth(a0),d0
00015D0E 4880                       		ext.w	d0
00015D10 9640                       		sub.w	d0,d3
00015D12 49F8 F76A                  		lea	($FFFFF76A).w,a4
00015D16 367C 0010                  		movea.w	#$10,a3
00015D1A 3C3C 0000                  		move.w	#0,d6
00015D1E 7A0D                       		moveq	#$D,d5
00015D20 6100 FC06                  		bsr.w	FindFloor
00015D24 301F                       		move.w	(sp)+,d0
00015D26 143C 0000                  		move.b	#0,d2
00015D2A                            
00015D2A                            loc_14DD0:
00015D2A 1638 F76A                  		move.b	($FFFFF76A).w,d3
00015D2E B240                       		cmp.w	d0,d1
00015D30 6F00                       		ble.s	loc_14DDE
00015D32 1638 F768                  		move.b	(v_anglebuffer).w,d3
00015D36 C141                       		exg	d0,d1
00015D38                            
00015D38                            loc_14DDE:
00015D38 0803 0000                  		btst	#0,d3
00015D3C 6700                       		beq.s	locret_14DE6
00015D3E 1602                       		move.b	d2,d3
00015D40                            
00015D40                            locret_14DE6:
00015D40 4E75                       		rts	
00015D42                            
00015D42                            ; End of function Sonic_HitFloor
00015D42                            
00015D42                            ; ===========================================================================
00015D42 3428 000C                  		move.w	obY(a0),d2
00015D46 3628 0008                  		move.w	obX(a0),d3
00015D4A                            
00015D4A                            loc_14DF0:
00015D4A 0642 000A                  		addi.w	#$A,d2
00015D4E 49F8 F768                  		lea	(v_anglebuffer).w,a4
00015D52 367C 0010                  		movea.w	#$10,a3
00015D56 3C3C 0000                  		move.w	#0,d6
00015D5A 7A0E                       		moveq	#$E,d5
00015D5C 6100 FBCA                  		bsr.w	FindFloor
00015D60 143C 0000                  		move.b	#0,d2
00015D64                            
00015D64                            loc_14E0A:
00015D64 1638 F768                  		move.b	(v_anglebuffer).w,d3
00015D68 0803 0000                  		btst	#0,d3
00015D6C 6700                       		beq.s	locret_14E16
00015D6E 1602                       		move.b	d2,d3
00015D70                            
00015D70                            locret_14E16:
00015D70 4E75                       		rts	
00015D72                            
00015D72                            		include	"_incObj\sub ObjFloorDist.asm"
00015D72                            ; ---------------------------------------------------------------------------
00015D72                            ; Subroutine to find the distance of an object to the floor
00015D72                            
00015D72                            ; input:
00015D72                            ;	d3 = x-pos. of object (ObjFloorDist2 only)
00015D72                            
00015D72                            ; output:
00015D72                            ;	d1 = distance to the floor
00015D72                            ;	d3 = floor angle
00015D72                            ;	a1 = address within 256x256 mappings where object is standing
00015D72                            ;	     (refers to a 16x16 tile number)
00015D72                            ;	(a4) = floor angle
00015D72                            ; ---------------------------------------------------------------------------
00015D72                            
00015D72                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00015D72                            
00015D72                            
00015D72                            ObjFloorDist:
00015D72 3628 0008                  		move.w	obX(a0),d3
00015D76                            
00015D76                            
00015D76                            ObjFloorDist2:
00015D76 3428 000C                  		move.w	obY(a0),d2
00015D7A 7000                       		moveq	#0,d0
00015D7C 1028 0016                  		move.b	obHeight(a0),d0
00015D80 4880                       		ext.w	d0
00015D82 D440                       		add.w	d0,d2
00015D84 49F8 F768                  		lea	(v_anglebuffer).w,a4
00015D88 18BC 0000                  		move.b	#0,(a4)
00015D8C 367C 0010                  		movea.w	#$10,a3		; height of a 16x16 tile
00015D90 3C3C 0000                  		move.w	#0,d6
00015D94 7A0D                       		moveq	#$D,d5		; bit to test for solidness
00015D96 6100 FB90                  		bsr.w	FindFloor
00015D9A 1638 F768                  		move.b	(v_anglebuffer).w,d3
00015D9E 0803 0000                  		btst	#0,d3
00015DA2 6700                       		beq.s	locret_14E4E
00015DA4 163C 0000                  		move.b	#0,d3
00015DA8                            
00015DA8                            	locret_14E4E:
00015DA8 4E75                       		rts	
00015DAA                            
00015DAA                            ; End of function ObjFloorDist2
00015DAA                            ; End of function ObjFloorDist2
00015DAA                            
00015DAA                            
00015DAA                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00015DAA                            
00015DAA                            
00015DAA                            sub_14E50:
00015DAA 3428 000C                  		move.w	obY(a0),d2
00015DAE 3628 0008                  		move.w	obX(a0),d3
00015DB2 7000                       		moveq	#0,d0
00015DB4 1028 0017                  		move.b	obWidth(a0),d0
00015DB8 4880                       		ext.w	d0
00015DBA 9440                       		sub.w	d0,d2
00015DBC 1028 0016                  		move.b	obHeight(a0),d0
00015DC0 4880                       		ext.w	d0
00015DC2 D640                       		add.w	d0,d3
00015DC4 49F8 F768                  		lea	(v_anglebuffer).w,a4
00015DC8 367C 0010                  		movea.w	#$10,a3
00015DCC 3C3C 0000                  		move.w	#0,d6
00015DD0 7A0E                       		moveq	#$E,d5
00015DD2 6100 FC92                  		bsr.w	FindWall
00015DD6 3F01                       		move.w	d1,-(sp)
00015DD8 3428 000C                  		move.w	obY(a0),d2
00015DDC 3628 0008                  		move.w	obX(a0),d3
00015DE0 7000                       		moveq	#0,d0
00015DE2 1028 0017                  		move.b	obWidth(a0),d0
00015DE6 4880                       		ext.w	d0
00015DE8 D440                       		add.w	d0,d2
00015DEA 1028 0016                  		move.b	obHeight(a0),d0
00015DEE 4880                       		ext.w	d0
00015DF0 D640                       		add.w	d0,d3
00015DF2 49F8 F76A                  		lea	($FFFFF76A).w,a4
00015DF6 367C 0010                  		movea.w	#$10,a3
00015DFA 3C3C 0000                  		move.w	#0,d6
00015DFE 7A0E                       		moveq	#$E,d5
00015E00 6100 FC64                  		bsr.w	FindWall
00015E04 301F                       		move.w	(sp)+,d0
00015E06 143C 00C0                  		move.b	#-$40,d2
00015E0A 6000 FF1E                  		bra.w	loc_14DD0
00015E0E                            
00015E0E                            ; End of function sub_14E50
00015E0E                            
00015E0E                            
00015E0E                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00015E0E                            
00015E0E                            
00015E0E                            sub_14EB4:
00015E0E 3428 000C                  		move.w	obY(a0),d2
00015E12 3628 0008                  		move.w	obX(a0),d3
00015E16                            
00015E16                            loc_14EBC:
00015E16 0643 000A                  		addi.w	#$A,d3
00015E1A 49F8 F768                  		lea	(v_anglebuffer).w,a4
00015E1E 367C 0010                  		movea.w	#$10,a3
00015E22 3C3C 0000                  		move.w	#0,d6
00015E26 7A0E                       		moveq	#$E,d5
00015E28 6100 FC3C                  		bsr.w	FindWall
00015E2C 143C 00C0                  		move.b	#-$40,d2
00015E30 6000 FF32                  		bra.w	loc_14E0A
00015E34                            
00015E34                            ; End of function sub_14EB4
00015E34                            
00015E34                            ; ---------------------------------------------------------------------------
00015E34                            ; Subroutine to	detect when an object hits a wall to its right
00015E34                            ; ---------------------------------------------------------------------------
00015E34                            
00015E34                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00015E34                            
00015E34                            
00015E34                            ObjHitWallRight:
00015E34 D668 0008                  		add.w	obX(a0),d3
00015E38 3428 000C                  		move.w	obY(a0),d2
00015E3C 49F8 F768                  		lea	(v_anglebuffer).w,a4
00015E40 18BC 0000                  		move.b	#0,(a4)
00015E44 367C 0010                  		movea.w	#$10,a3
00015E48 3C3C 0000                  		move.w	#0,d6
00015E4C 7A0E                       		moveq	#$E,d5
00015E4E 6100 FC16                  		bsr.w	FindWall
00015E52 1638 F768                  		move.b	(v_anglebuffer).w,d3
00015E56 0803 0000                  		btst	#0,d3
00015E5A 6700                       		beq.s	locret_14F06
00015E5C 163C 00C0                  		move.b	#-$40,d3
00015E60                            
00015E60                            locret_14F06:
00015E60 4E75                       		rts	
00015E62                            
00015E62                            ; End of function ObjHitWallRight
00015E62                            
00015E62                            ; ---------------------------------------------------------------------------
00015E62                            ; Subroutine preventing	Sonic from running on walls and	ceilings when he
00015E62                            ; touches them
00015E62                            ; ---------------------------------------------------------------------------
00015E62                            
00015E62                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00015E62                            
00015E62                            
00015E62                            Sonic_DontRunOnWalls:
00015E62 3428 000C                  		move.w	obY(a0),d2
00015E66 3628 0008                  		move.w	obX(a0),d3
00015E6A 7000                       		moveq	#0,d0
00015E6C 1028 0016                  		move.b	obHeight(a0),d0
00015E70 4880                       		ext.w	d0
00015E72 9440                       		sub.w	d0,d2
00015E74 0A42 000F                  		eori.w	#$F,d2
00015E78 1028 0017                  		move.b	obWidth(a0),d0
00015E7C 4880                       		ext.w	d0
00015E7E D640                       		add.w	d0,d3
00015E80 49F8 F768                  		lea	(v_anglebuffer).w,a4
00015E84 367C FFF0                  		movea.w	#-$10,a3
00015E88 3C3C 1000                  		move.w	#$1000,d6
00015E8C 7A0E                       		moveq	#$E,d5
00015E8E 6100 FA98                  		bsr.w	FindFloor
00015E92 3F01                       		move.w	d1,-(sp)
00015E94 3428 000C                  		move.w	obY(a0),d2
00015E98 3628 0008                  		move.w	obX(a0),d3
00015E9C 7000                       		moveq	#0,d0
00015E9E 1028 0016                  		move.b	obHeight(a0),d0
00015EA2 4880                       		ext.w	d0
00015EA4 9440                       		sub.w	d0,d2
00015EA6 0A42 000F                  		eori.w	#$F,d2
00015EAA 1028 0017                  		move.b	obWidth(a0),d0
00015EAE 4880                       		ext.w	d0
00015EB0 9640                       		sub.w	d0,d3
00015EB2 49F8 F76A                  		lea	($FFFFF76A).w,a4
00015EB6 367C FFF0                  		movea.w	#-$10,a3
00015EBA 3C3C 1000                  		move.w	#$1000,d6
00015EBE 7A0E                       		moveq	#$E,d5
00015EC0 6100 FA66                  		bsr.w	FindFloor
00015EC4 301F                       		move.w	(sp)+,d0
00015EC6 143C 0080                  		move.b	#-$80,d2
00015ECA 6000 FE5E                  		bra.w	loc_14DD0
00015ECE                            ; End of function Sonic_DontRunOnWalls
00015ECE                            
00015ECE                            ; ===========================================================================
00015ECE 3428 000C                  		move.w	obY(a0),d2
00015ED2 3628 0008                  		move.w	obX(a0),d3
00015ED6                            
00015ED6                            loc_14F7C:
00015ED6 0442 000A                  		subi.w	#$A,d2
00015EDA 0A42 000F                  		eori.w	#$F,d2
00015EDE 49F8 F768                  		lea	(v_anglebuffer).w,a4
00015EE2 367C FFF0                  		movea.w	#-$10,a3
00015EE6 3C3C 1000                  		move.w	#$1000,d6
00015EEA 7A0E                       		moveq	#$E,d5
00015EEC 6100 FA3A                  		bsr.w	FindFloor
00015EF0 143C 0080                  		move.b	#-$80,d2
00015EF4 6000 FE6E                  		bra.w	loc_14E0A
00015EF8                            
00015EF8                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00015EF8                            
00015EF8                            
00015EF8                            ObjHitCeiling:
00015EF8 3428 000C                  		move.w	obY(a0),d2
00015EFC 3628 0008                  		move.w	obX(a0),d3
00015F00 7000                       		moveq	#0,d0
00015F02 1028 0016                  		move.b	obHeight(a0),d0
00015F06 4880                       		ext.w	d0
00015F08 9440                       		sub.w	d0,d2
00015F0A 0A42 000F                  		eori.w	#$F,d2
00015F0E 49F8 F768                  		lea	(v_anglebuffer).w,a4
00015F12 367C FFF0                  		movea.w	#-$10,a3
00015F16 3C3C 1000                  		move.w	#$1000,d6
00015F1A 7A0E                       		moveq	#$E,d5
00015F1C 6100 FA0A                  		bsr.w	FindFloor
00015F20 1638 F768                  		move.b	(v_anglebuffer).w,d3
00015F24 0803 0000                  		btst	#0,d3
00015F28 6700                       		beq.s	locret_14FD4
00015F2A 163C 0080                  		move.b	#-$80,d3
00015F2E                            
00015F2E                            locret_14FD4:
00015F2E 4E75                       		rts	
00015F30                            ; End of function ObjHitCeiling
00015F30                            
00015F30                            ; ===========================================================================
00015F30                            
00015F30                            loc_14FD6:
00015F30 3428 000C                  		move.w	obY(a0),d2
00015F34 3628 0008                  		move.w	obX(a0),d3
00015F38 7000                       		moveq	#0,d0
00015F3A 1028 0017                  		move.b	obWidth(a0),d0
00015F3E 4880                       		ext.w	d0
00015F40 9440                       		sub.w	d0,d2
00015F42 1028 0016                  		move.b	obHeight(a0),d0
00015F46 4880                       		ext.w	d0
00015F48 9640                       		sub.w	d0,d3
00015F4A 0A43 000F                  		eori.w	#$F,d3
00015F4E 49F8 F768                  		lea	(v_anglebuffer).w,a4
00015F52 367C FFF0                  		movea.w	#-$10,a3
00015F56 3C3C 0800                  		move.w	#$800,d6
00015F5A 7A0E                       		moveq	#$E,d5
00015F5C 6100 FB08                  		bsr.w	FindWall
00015F60 3F01                       		move.w	d1,-(sp)
00015F62 3428 000C                  		move.w	obY(a0),d2
00015F66 3628 0008                  		move.w	obX(a0),d3
00015F6A 7000                       		moveq	#0,d0
00015F6C 1028 0017                  		move.b	obWidth(a0),d0
00015F70 4880                       		ext.w	d0
00015F72 D440                       		add.w	d0,d2
00015F74 1028 0016                  		move.b	obHeight(a0),d0
00015F78 4880                       		ext.w	d0
00015F7A 9640                       		sub.w	d0,d3
00015F7C 0A43 000F                  		eori.w	#$F,d3
00015F80 49F8 F76A                  		lea	($FFFFF76A).w,a4
00015F84 367C FFF0                  		movea.w	#-$10,a3
00015F88 3C3C 0800                  		move.w	#$800,d6
00015F8C 7A0E                       		moveq	#$E,d5
00015F8E 6100 FAD6                  		bsr.w	FindWall
00015F92 301F                       		move.w	(sp)+,d0
00015F94 143C 0040                  		move.b	#$40,d2
00015F98 6000 FD90                  		bra.w	loc_14DD0
00015F9C                            
00015F9C                            ; ---------------------------------------------------------------------------
00015F9C                            ; Subroutine to	stop Sonic when	he jumps at a wall
00015F9C                            ; ---------------------------------------------------------------------------
00015F9C                            
00015F9C                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00015F9C                            
00015F9C                            
00015F9C                            Sonic_HitWall:
00015F9C 3428 000C                  		move.w	obY(a0),d2
00015FA0 3628 0008                  		move.w	obX(a0),d3
00015FA4                            
00015FA4                            loc_1504A:
00015FA4 0443 000A                  		subi.w	#$A,d3
00015FA8 0A43 000F                  		eori.w	#$F,d3
00015FAC 49F8 F768                  		lea	(v_anglebuffer).w,a4
00015FB0 367C FFF0                  		movea.w	#-$10,a3
00015FB4 3C3C 0800                  		move.w	#$800,d6
00015FB8 7A0E                       		moveq	#$E,d5
00015FBA 6100 FAAA                  		bsr.w	FindWall
00015FBE 143C 0040                  		move.b	#$40,d2
00015FC2 6000 FDA0                  		bra.w	loc_14E0A
00015FC6                            ; End of function Sonic_HitWall
00015FC6                            
00015FC6                            ; ---------------------------------------------------------------------------
00015FC6                            ; Subroutine to	detect when an object hits a wall to its left
00015FC6                            ; ---------------------------------------------------------------------------
00015FC6                            
00015FC6                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00015FC6                            
00015FC6                            
00015FC6                            ObjHitWallLeft:
00015FC6 D668 0008                  		add.w	obX(a0),d3
00015FCA 3428 000C                  		move.w	obY(a0),d2
00015FCE                            		; Engine bug: colliding with left walls is erratic with this function.
00015FCE                            		; The cause is this: a missing instruction to flip collision on the found
00015FCE                            		; 16x16 block; this one:
00015FCE                            		;eori.w	#$F,d3
00015FCE 49F8 F768                  		lea	(v_anglebuffer).w,a4
00015FD2 18BC 0000                  		move.b	#0,(a4)
00015FD6 367C FFF0                  		movea.w	#-$10,a3
00015FDA 3C3C 0800                  		move.w	#$800,d6
00015FDE 7A0E                       		moveq	#$E,d5
00015FE0 6100 FA84                  		bsr.w	FindWall
00015FE4 1638 F768                  		move.b	(v_anglebuffer).w,d3
00015FE8 0803 0000                  		btst	#0,d3
00015FEC 6700                       		beq.s	locret_15098
00015FEE 163C 0040                  		move.b	#$40,d3
00015FF2                            
00015FF2                            locret_15098:
00015FF2 4E75                       		rts	
00015FF4                            ; End of function ObjHitWallLeft
00015FF4                            
00015FF4                            ; ===========================================================================
00015FF4                            
00015FF4                            		include	"_incObj\66 Rotating Junction.asm"
00015FF4                            ; ---------------------------------------------------------------------------
00015FF4                            ; Object 66 - rotating disc junction that grabs Sonic (SBZ)
00015FF4                            ; ---------------------------------------------------------------------------
00015FF4                            
00015FF4                            Junction:
00015FF4 7000                       		moveq	#0,d0
00015FF6 1028 0024                  		move.b	obRoutine(a0),d0
00015FFA 323B 0000                  		move.w	Jun_Index(pc,d0.w),d1
00015FFE 4EFB 1000                  		jmp	Jun_Index(pc,d1.w)
00016002                            ; ===========================================================================
00016002 0000                       Jun_Index:	dc.w Jun_Main-Jun_Index
00016004 0000                       		dc.w Jun_Action-Jun_Index
00016006 0000                       		dc.w Jun_Display-Jun_Index
00016008 0000                       		dc.w Jun_Release-Jun_Index
0001600A                            
0001600A =00000034                  jun_frame:	equ $34		; current frame
0001600A =00000036                  jun_reverse:	equ $36		; flag set when switch is pressed
0001600A =00000038                  jun_switch:	equ $38		; which switch will reverse the disc
0001600A                            ; ===========================================================================
0001600A                            
0001600A                            Jun_Main:	; Routine 0
0001600A 5428 0024                  		addq.b	#2,obRoutine(a0)
0001600E 323C 0001                  		move.w	#1,d1
00016012 2248                       		movea.l	a0,a1
00016014 6000                       		bra.s	@makeitem
00016016                            ; ===========================================================================
00016016                            
00016016                            	@repeat:
00016016 6100 8898                  		bsr.w	FindFreeObj
0001601A 6600                       		bne.s	@fail
0001601C 137C 0066 0000             		move.b	#id_Junction,0(a1)
00016022 5829 0024                  		addq.b	#4,obRoutine(a1) ; goto Jun_Display next
00016026 3368 0008 0008             		move.w	obX(a0),obX(a1)
0001602C 3368 000C 000C             		move.w	obY(a0),obY(a1)
00016032 137C 0003 0018             		move.b	#3,obPriority(a1)
00016038 137C 0010 001A             		move.b	#$10,obFrame(a1) ; use large circular sprite
0001603E                            
0001603E                            @makeitem:
0001603E 237C 0000 0000 0004        		move.l	#Map_Jun,obMap(a1)
00016046 337C 4348 0002             		move.w	#$4348,obGfx(a1)
0001604C 0029 0004 0001             		ori.b	#4,obRender(a1)
00016052 137C 0038 0019             		move.b	#$38,obActWid(a1)
00016058                            
00016058                            	@fail:
00016058 51C9 FFBC                  		dbf	d1,@repeat
0001605C                            
0001605C 117C 0030 0019             		move.b	#$30,obActWid(a0)
00016062 117C 0004 0018             		move.b	#4,obPriority(a0)
00016068 317C 003C 0030             		move.w	#$3C,$30(a0)
0001606E 117C 0001 0034             		move.b	#1,jun_frame(a0)
00016074 1168 0028 0038             		move.b	obSubtype(a0),jun_switch(a0)
0001607A                            
0001607A                            Jun_Action:	; Routine 2
0001607A 6100 0000                  		bsr.w	Jun_ChkSwitch
0001607E 4A28 0001                  		tst.b	obRender(a0)
00016082 6A00 0000                  		bpl.w	Jun_Display
00016086 323C 0030                  		move.w	#$30,d1
0001608A 3401                       		move.w	d1,d2
0001608C 3602                       		move.w	d2,d3
0001608E 5243                       		addq.w	#1,d3
00016090 3828 0008                  		move.w	obX(a0),d4
00016094 6100 A702                  		bsr.w	SolidObject
00016098 0828 0005 0022             		btst	#5,obStatus(a0)	; is Sonic pushing the disc?
0001609E 6700 0000                  		beq.w	Jun_Display	; if not, branch
000160A2                            
000160A2 43F8 D000                  		lea	(v_player).w,a1
000160A6 720E                       		moveq	#$E,d1
000160A8 3029 0008                  		move.w	obX(a1),d0
000160AC B068 0008                  		cmp.w	obX(a0),d0	; is Sonic to the left of the disc?
000160B0 6500                       		bcs.s	@isleft		; if yes, branch
000160B2 7207                       		moveq	#7,d1		
000160B4                            
000160B4                            	@isleft:
000160B4 B228 001A                  		cmp.b	obFrame(a0),d1	; is the gap next to Sonic?
000160B8 6600                       		bne.s	Jun_Display	; if not, branch
000160BA                            
000160BA 1141 0032                  		move.b	d1,$32(a0)
000160BE 5828 0024                  		addq.b	#4,obRoutine(a0) ; goto Jun_Release next
000160C2 11FC 0001 F7C8             		move.b	#1,(f_lockmulti).w ; lock controls
000160C8 137C 0002 001C             		move.b	#id_Roll,obAnim(a1) ; make Sonic use "rolling" animation
000160CE 337C 0800 0014             		move.w	#$800,obInertia(a1)
000160D4 337C 0000 0010             		move.w	#0,obVelX(a1)
000160DA 337C 0000 0012             		move.w	#0,obVelY(a1)
000160E0 08A8 0005 0022             		bclr	#5,obStatus(a0)
000160E6 08A9 0005 0022             		bclr	#5,obStatus(a1)
000160EC 08E9 0001 0022             		bset	#1,obStatus(a1)
000160F2 3429 0008                  		move.w	obX(a1),d2
000160F6 3629 000C                  		move.w	obY(a1),d3
000160FA 6100 0000                  		bsr.w	Jun_ChgPos
000160FE D569 0008                  		add.w	d2,obX(a1)
00016102 D769 000C                  		add.w	d3,obY(a1)
00016106 E0E9 0008                  		asr	obX(a1)
0001610A E0E9 000C                  		asr	obY(a1)
0001610E                            
0001610E                            Jun_Display:	; Routine 4
0001610E 6000 A35E                  		bra.w	RememberState
00016112                            ; ===========================================================================
00016112                            
00016112                            Jun_Release:	; Routine 6
00016112 1028 001A                  		move.b	obFrame(a0),d0
00016116 0C00 0004                  		cmpi.b	#4,d0		; is gap pointing down?
0001611A 6700                       		beq.s	@release	; if yes, branch
0001611C 0C00 0007                  		cmpi.b	#7,d0		; is gap pointing right?
00016120 6600                       		bne.s	@dontrelease	; if not, branch
00016122                            
00016122                            	@release:
00016122 B028 0032                  		cmp.b	$32(a0),d0
00016126 6700                       		beq.s	@dontrelease
00016128 43F8 D000                  		lea	(v_player).w,a1
0001612C 337C 0000 0010             		move.w	#0,obVelX(a1)
00016132 337C 0800 0012             		move.w	#$800,obVelY(a1)
00016138 0C00 0004                  		cmpi.b	#4,d0
0001613C 6700                       		beq.s	@isdown
0001613E 337C 0800 0010             		move.w	#$800,obVelX(a1)
00016144 337C 0800 0012             		move.w	#$800,obVelY(a1)
0001614A                            
0001614A                            	@isdown:
0001614A 4238 F7C8                  		clr.b	(f_lockmulti).w	; unlock controls
0001614E 5928 0024                  		subq.b	#4,obRoutine(a0)
00016152                            
00016152                            	@dontrelease:
00016152 6100                       		bsr.s	Jun_ChkSwitch
00016154 6100                       		bsr.s	Jun_ChgPos
00016156 6000 A316                  		bra.w	RememberState
0001615A                            
0001615A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001615A                            
0001615A                            
0001615A                            Jun_ChkSwitch:
0001615A 45F8 F7E0                  		lea	(f_switch).w,a2
0001615E 7000                       		moveq	#0,d0
00016160 1028 0038                  		move.b	jun_switch(a0),d0
00016164 0832 0000 0000             		btst	#0,(a2,d0.w)	; is switch pressed?
0001616A 6700                       		beq.s	@unpressed	; if not, branch
0001616C                            
0001616C 4A28 0036                  		tst.b	jun_reverse(a0)	; has switch previously	been pressed?
00016170 6600                       		bne.s	@animate	; if yes, branch
00016172 4428 0034                  		neg.b	jun_frame(a0)
00016176 117C 0001 0036             		move.b	#1,jun_reverse(a0) ; set to "previously pressed"
0001617C 6000                       		bra.s	@animate
0001617E                            ; ===========================================================================
0001617E                            
0001617E                            @unpressed:
0001617E 4228 0036                  		clr.b	jun_reverse(a0)	; set to "not yet pressed"
00016182                            
00016182                            @animate:
00016182 5328 001E                  		subq.b	#1,obTimeFrame(a0) ; decrement frame timer
00016186 6A00                       		bpl.s	@nochange	; if time remains, branch
00016188 117C 0007 001E             		move.b	#7,obTimeFrame(a0)
0001618E 1228 0034                  		move.b	jun_frame(a0),d1
00016192 1028 001A                  		move.b	obFrame(a0),d0
00016196 D001                       		add.b	d1,d0
00016198 0200 000F                  		andi.b	#$F,d0
0001619C 1140 001A                  		move.b	d0,obFrame(a0)	; update frame
000161A0                            
000161A0                            	@nochange:
000161A0 4E75                       		rts	
000161A2                            ; End of function Jun_ChkSwitch
000161A2                            
000161A2                            
000161A2                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000161A2                            
000161A2                            
000161A2                            Jun_ChgPos:
000161A2 43F8 D000                  		lea	(v_player).w,a1
000161A6 7000                       		moveq	#0,d0
000161A8 1028 001A                  		move.b	obFrame(a0),d0
000161AC D040                       		add.w	d0,d0
000161AE 45FB 0000                  		lea	@data(pc,d0.w),a2
000161B2 101A                       		move.b	(a2)+,d0
000161B4 4880                       		ext.w	d0
000161B6 D068 0008                  		add.w	obX(a0),d0
000161BA 3340 0008                  		move.w	d0,obX(a1)
000161BE 101A                       		move.b	(a2)+,d0
000161C0 4880                       		ext.w	d0
000161C2 D068 000C                  		add.w	obY(a0),d0
000161C6 3340 000C                  		move.w	d0,obY(a1)
000161CA 4E75                       		rts	
000161CC                            
000161CC                            
000161CC E000 E20E                  @data:		dc.b -$20,    0, -$1E,   $E ; disc x-pos, Sonic x-pos, disc y-pos, Sonic y-pos
000161D0 E818 F21E                  		dc.b -$18,  $18,  -$E,  $1E
000161D4 0020 0E1E                  		dc.b    0,  $20,   $E,  $1E
000161D8 1818 1E0E                  		dc.b  $18,  $18,  $1E,   $E
000161DC 2000 1EF2                  		dc.b  $20,    0,  $1E,  -$E
000161E0 18E8 0EE2                  		dc.b  $18, -$18,   $E, -$1E
000161E4 00E0 F2E2                  		dc.b    0, -$20,  -$E, -$1E
000161E8 E8E8 E2F2                  		dc.b -$18, -$18, -$1E,  -$E
000161E8 E8E8 E2F2                  		dc.b -$18, -$18, -$1E,  -$E
000161EC                            Map_Jun:	include	"_maps\Rotating Junction.asm"
000161EC                            ; ---------------------------------------------------------------------------
000161EC                            ; Sprite mappings - rotating disc that grabs Sonic (SBZ)
000161EC                            ; ---------------------------------------------------------------------------
000161EC                            Map_Jun_internal:
000161EC 0000                       		dc.w @gap0-Map_Jun_internal
000161EE 0000                       		dc.w @gap1-Map_Jun_internal
000161F0 0000                       		dc.w @gap2-Map_Jun_internal
000161F2 0000                       		dc.w @gap3-Map_Jun_internal
000161F4 0000                       		dc.w @gap4-Map_Jun_internal
000161F6 0000                       		dc.w @gap5-Map_Jun_internal
000161F8 0000                       		dc.w @gap6-Map_Jun_internal
000161FA 0000                       		dc.w @gap7-Map_Jun_internal
000161FC 0000                       		dc.w @gap8-Map_Jun_internal
000161FE 0000                       		dc.w @gap9-Map_Jun_internal
00016200 0000                       		dc.w @gapA-Map_Jun_internal
00016202 0000                       		dc.w @gapB-Map_Jun_internal
00016204 0000                       		dc.w @gapC-Map_Jun_internal
00016206 0000                       		dc.w @gapD-Map_Jun_internal
00016208 0000                       		dc.w @gapE-Map_Jun_internal
0001620A 0000                       		dc.w @gapF-Map_Jun_internal
0001620C 0000                       		dc.w @circle-Map_Jun_internal
0001620E 06                         @gap0:		dc.b 6
0001620F E805 0022 D0               		dc.b $E8, 5, 0,	$22, $D0
00016214 0805 1022 D0               		dc.b 8,	5, $10,	$22, $D0
00016219 E80A 0000 C8               		dc.b $E8, $A, 0, 0, $C8
0001621E E80A 0800 E0               		dc.b $E8, $A, 8, 0, $E0
00016223 000A 1000 C8               		dc.b 0,	$A, $10, 0, $C8
00016228 000A 1800 E0               		dc.b 0,	$A, $18, 0, $E0
0001622D 06                         @gap1:		dc.b 6
0001622E F803 0026 D0               		dc.b $F8, 3, 0,	$26, $D0
00016233 1805 002A D8               		dc.b $18, 5, 0,	$2A, $D8
00016238 F60A 0000 CA               		dc.b $F6, $A, 0, 0, $CA
0001623D F60A 0800 E2               		dc.b $F6, $A, 8, 0, $E2
00016242 0E0A 1000 CA               		dc.b $E, $A, $10, 0, $CA
00016247 0E0A 1800 E2               		dc.b $E, $A, $18, 0, $E2
0001624C 06                         @gap2:		dc.b 6
0001624D 0006 002E D0               		dc.b 0,	6, 0, $2E, $D0
00016252 2009 0034 E8               		dc.b $20, 9, 0,	$34, $E8
00016257 000A 0000 D0               		dc.b 0,	$A, 0, 0, $D0
0001625C 000A 0800 E8               		dc.b 0,	$A, 8, 0, $E8
00016261 180A 1000 D0               		dc.b $18, $A, $10, 0, $D0
00016266 180A 1800 E8               		dc.b $18, $A, $18, 0, $E8
0001626B 06                         @gap3:		dc.b 6
0001626C 0807 003A D8               		dc.b 8,	7, 0, $3A, $D8
00016271 2808 0042 F0               		dc.b $28, 8, 0,	$42, $F0
00016276 060A 0000 DA               		dc.b 6,	$A, 0, 0, $DA
0001627B 060A 0800 F2               		dc.b 6,	$A, 8, 0, $F2
00016280 1E0A 1000 DA               		dc.b $1E, $A, $10, 0, $DA
00016285 1E0A 1800 F2               		dc.b $1E, $A, $18, 0, $F2
0001628A 06                         @gap4:		dc.b 6
0001628B 2005 0045 E8               		dc.b $20, 5, 0,	$45, $E8
00016290 2005 0845 08               		dc.b $20, 5, 8,	$45, 8
00016295 080A 0000 E8               		dc.b 8,	$A, 0, 0, $E8
0001629A 080A 0800 00               		dc.b 8,	$A, 8, 0, 0
0001629F 200A 1000 E8               		dc.b $20, $A, $10, 0, $E8
000162A4 200A 1800 00               		dc.b $20, $A, $18, 0, 0
000162A9 06                         @gap5:		dc.b 6
000162AA 2808 0842 F8               		dc.b $28, 8, 8,	$42, $F8
000162AF 0807 083A 18               		dc.b 8,	7, 8, $3A, $18
000162B4 060A 0000 F6               		dc.b 6,	$A, 0, 0, $F6
000162B9 060A 0800 0E               		dc.b 6,	$A, 8, 0, $E
000162BE 1E0A 1000 F6               		dc.b $1E, $A, $10, 0, $F6
000162C3 1E0A 1800 0E               		dc.b $1E, $A, $18, 0, $E
000162C8 06                         @gap6:		dc.b 6
000162C9 2009 0834 00               		dc.b $20, 9, 8,	$34, 0
000162CE 0006 082E 20               		dc.b 0,	6, 8, $2E, $20
000162D3 000A 0000 00               		dc.b 0,	$A, 0, 0, 0
000162D8 000A 0800 18               		dc.b 0,	$A, 8, 0, $18
000162DD 180A 1000 00               		dc.b $18, $A, $10, 0, 0
000162E2 180A 1800 18               		dc.b $18, $A, $18, 0, $18
000162E7 06                         @gap7:		dc.b 6
000162E8 1805 082A 18               		dc.b $18, 5, 8,	$2A, $18
000162ED F803 0826 28               		dc.b $F8, 3, 8,	$26, $28
000162F2 F60A 0000 06               		dc.b $F6, $A, 0, 0, 6
000162F7 F60A 0800 1E               		dc.b $F6, $A, 8, 0, $1E
000162FC 0E0A 1000 06               		dc.b $E, $A, $10, 0, 6
00016301 0E0A 1800 1E               		dc.b $E, $A, $18, 0, $1E
00016306 06                         @gap8:		dc.b 6
00016307 E805 0822 20               		dc.b $E8, 5, 8,	$22, $20
0001630C 0805 1822 20               		dc.b 8,	5, $18,	$22, $20
00016311 E80A 0000 08               		dc.b $E8, $A, 0, 0, 8
00016316 E80A 0800 20               		dc.b $E8, $A, 8, 0, $20
0001631B 000A 1000 08               		dc.b 0,	$A, $10, 0, 8
00016320 000A 1800 20               		dc.b 0,	$A, $18, 0, $20
00016325 06                         @gap9:		dc.b 6
00016326 D805 182A 18               		dc.b $D8, 5, $18, $2A, $18
0001632B E803 1826 28               		dc.b $E8, 3, $18, $26, $28
00016330 DA0A 0000 06               		dc.b $DA, $A, 0, 0, 6
00016335 DA0A 0800 1E               		dc.b $DA, $A, 8, 0, $1E
0001633A F20A 1000 06               		dc.b $F2, $A, $10, 0, 6
0001633F F20A 1800 1E               		dc.b $F2, $A, $18, 0, $1E
00016344 06                         @gapA:		dc.b 6
00016345 D009 1834 00               		dc.b $D0, 9, $18, $34, 0
0001634A E806 182E 20               		dc.b $E8, 6, $18, $2E, $20
0001634F D00A 0000 00               		dc.b $D0, $A, 0, 0, 0
00016354 D00A 0800 18               		dc.b $D0, $A, 8, 0, $18
00016359 E80A 1000 00               		dc.b $E8, $A, $10, 0, 0
0001635E E80A 1800 18               		dc.b $E8, $A, $18, 0, $18
00016363 06                         @gapB:		dc.b 6
00016364 D008 1842 F8               		dc.b $D0, 8, $18, $42, $F8
00016369 D807 183A 18               		dc.b $D8, 7, $18, $3A, $18
0001636E CA0A 0000 F6               		dc.b $CA, $A, 0, 0, $F6
00016373 CA0A 0800 0E               		dc.b $CA, $A, 8, 0, $E
00016378 E20A 1000 F6               		dc.b $E2, $A, $10, 0, $F6
0001637D E20A 1800 0E               		dc.b $E2, $A, $18, 0, $E
00016382 06                         @gapC:		dc.b 6
00016383 D005 1045 E8               		dc.b $D0, 5, $10, $45, $E8
00016388 D005 1845 08               		dc.b $D0, 5, $18, $45, 8
0001638D C80A 0000 E8               		dc.b $C8, $A, 0, 0, $E8
00016392 C80A 0800 00               		dc.b $C8, $A, 8, 0, 0
00016397 E00A 1000 E8               		dc.b $E0, $A, $10, 0, $E8
0001639C E00A 1800 00               		dc.b $E0, $A, $18, 0, 0
000163A1 06                         @gapD:		dc.b 6
000163A2 D807 103A D8               		dc.b $D8, 7, $10, $3A, $D8
000163A7 D008 1042 F0               		dc.b $D0, 8, $10, $42, $F0
000163AC CA0A 0000 DA               		dc.b $CA, $A, 0, 0, $DA
000163B1 CA0A 0800 F2               		dc.b $CA, $A, 8, 0, $F2
000163B6 E20A 1000 DA               		dc.b $E2, $A, $10, 0, $DA
000163BB E20A 1800 F2               		dc.b $E2, $A, $18, 0, $F2
000163C0 06                         @gapE:		dc.b 6
000163C1 E806 102E D0               		dc.b $E8, 6, $10, $2E, $D0
000163C6 D009 1034 E8               		dc.b $D0, 9, $10, $34, $E8
000163CB D00A 0000 D0               		dc.b $D0, $A, 0, 0, $D0
000163D0 D00A 0800 E8               		dc.b $D0, $A, 8, 0, $E8
000163D5 E80A 1000 D0               		dc.b $E8, $A, $10, 0, $D0
000163DA E80A 1800 E8               		dc.b $E8, $A, $18, 0, $E8
000163DF 06                         @gapF:		dc.b 6
000163E0 E803 1026 D0               		dc.b $E8, 3, $10, $26, $D0
000163E5 D805 102A D8               		dc.b $D8, 5, $10, $2A, $D8
000163EA DA0A 0000 CA               		dc.b $DA, $A, 0, 0, $CA
000163EF DA0A 0800 E2               		dc.b $DA, $A, 8, 0, $E2
000163F4 F20A 1000 CA               		dc.b $F2, $A, $10, 0, $CA
000163F9 F20A 1800 E2               		dc.b $F2, $A, $18, 0, $E2
000163FE 0C                         @circle:	dc.b $C
000163FF C80D 0009 E0               		dc.b $C8, $D, 0, 9, $E0
00016404 D00A 0011 D0               		dc.b $D0, $A, 0, $11, $D0
00016409 E007 001A C8               		dc.b $E0, 7, 0,	$1A, $C8
0001640E C80D 0809 00               		dc.b $C8, $D, 8, 9, 0
00016413 D00A 0811 18               		dc.b $D0, $A, 8, $11, $18
00016418 E007 081A 28               		dc.b $E0, 7, 8,	$1A, $28
0001641D 0007 101A C8               		dc.b 0,	7, $10,	$1A, $C8
00016422 180A 1011 D0               		dc.b $18, $A, $10, $11,	$D0
00016427 280D 1009 E0               		dc.b $28, $D, $10, 9, $E0
0001642C 280D 1809 00               		dc.b $28, $D, $18, 9, 0
00016431 180A 1811 18               		dc.b $18, $A, $18, $11,	$18
00016436 0007 181A 28               		dc.b 0,	7, $18,	$1A, $28
0001643C 00                         		even
0001643C 00                         		even
0001643C                            		include	"_incObj\67 Running Disc.asm"
0001643C                            ; ---------------------------------------------------------------------------
0001643C                            ; Object 67 - disc that	you run	around (SBZ)
0001643C                            ; ---------------------------------------------------------------------------
0001643C                            
0001643C                            RunningDisc:
0001643C 7000                       		moveq	#0,d0
0001643E 1028 0024                  		move.b	obRoutine(a0),d0
00016442 323B 0000                  		move.w	Disc_Index(pc,d0.w),d1
00016446 4EFB 1000                  		jmp	Disc_Index(pc,d1.w)
0001644A                            ; ===========================================================================
0001644A 0000                       Disc_Index:	dc.w Disc_Main-Disc_Index
0001644C 0000                       		dc.w Disc_Action-Disc_Index
0001644E                            
0001644E =00000032                  disc_origX:	equ $32		; original x-axis position
0001644E =00000030                  disc_origY:	equ $30		; original y-axis position
0001644E                            ; ===========================================================================
0001644E                            
0001644E                            Disc_Main:	; Routine 0
0001644E 5428 0024                  		addq.b	#2,obRoutine(a0)
00016452 217C 0000 0000 0004        		move.l	#Map_Disc,obMap(a0)
0001645A 317C C344 0002             		move.w	#$C344,obGfx(a0)
00016460 117C 0004 0001             		move.b	#4,obRender(a0)
00016466 117C 0004 0018             		move.b	#4,obPriority(a0)
0001646C 117C 0008 0019             		move.b	#8,obActWid(a0)
00016472 3168 0008 0032             		move.w	obX(a0),disc_origX(a0)
00016478 3168 000C 0030             		move.w	obY(a0),disc_origY(a0)
0001647E 117C 0018 0034             		move.b	#$18,$34(a0)
00016484 117C 0048 0038             		move.b	#$48,$38(a0)
0001648A 1228 0028                  		move.b	obSubtype(a0),d1 ; get object type
0001648E 0201 000F                  		andi.b	#$F,d1		; read only the	2nd digit
00016492 6700                       		beq.s	@typeis0	; branch if 0
00016494 117C 0010 0034             		move.b	#$10,$34(a0)
0001649A 117C 0038 0038             		move.b	#$38,$38(a0)
000164A0                            
000164A0                            	@typeis0:
000164A0 1228 0028                  		move.b	obSubtype(a0),d1 ; get object type
000164A4 0201 00F0                  		andi.b	#$F0,d1		; read only the	1st digit
000164A8 4881                       		ext.w	d1
000164AA E741                       		asl.w	#3,d1
000164AC 3141 0036                  		move.w	d1,$36(a0)
000164B0 1028 0022                  		move.b	obStatus(a0),d0
000164B4 E418                       		ror.b	#2,d0
000164B6 0200 00C0                  		andi.b	#$C0,d0
000164BA 1140 0026                  		move.b	d0,obAngle(a0)
000164BE                            
000164BE                            Disc_Action:	; Routine 2
000164BE 6100 0000                  		bsr.w	Disc_MoveSonic
000164C2 6100 0000                  		bsr.w	Disc_MoveSpot
000164C6 6000 0000                  		bra.w	Disc_ChkDel
000164CA                            ; ===========================================================================
000164CA                            
000164CA                            Disc_MoveSonic:
000164CA 7400                       		moveq	#0,d2
000164CC 1428 0038                  		move.b	$38(a0),d2
000164D0 3602                       		move.w	d2,d3
000164D2 D643                       		add.w	d3,d3
000164D4 43F8 D000                  		lea	(v_player).w,a1
000164D8 3029 0008                  		move.w	obX(a1),d0
000164DC 9068 0032                  		sub.w	disc_origX(a0),d0
000164E0 D042                       		add.w	d2,d0
000164E2 B043                       		cmp.w	d3,d0
000164E4 6400                       		bcc.s	loc_155A8
000164E6 3229 000C                  		move.w	obY(a1),d1
000164EA 9268 0030                  		sub.w	disc_origY(a0),d1
000164EE D242                       		add.w	d2,d1
000164F0 B243                       		cmp.w	d3,d1
000164F2 6400                       		bcc.s	loc_155A8
000164F4 0829 0001 0022             		btst	#1,obStatus(a1)
000164FA 6700                       		beq.s	loc_155B8
000164FC 4228 003A                  		clr.b	$3A(a0)
00016500 4E75                       		rts	
00016502                            ; ===========================================================================
00016502                            
00016502                            loc_155A8:
00016502 4A28 003A                  		tst.b	$3A(a0)
00016506 6700                       		beq.s	locret_155B6
00016508 4229 0038                  		clr.b	$38(a1)
0001650C 4228 003A                  		clr.b	$3A(a0)
00016510                            
00016510                            locret_155B6:
00016510 4E75                       		rts	
00016512                            ; ===========================================================================
00016512                            
00016512                            loc_155B8:
00016512 4A28 003A                  		tst.b	$3A(a0)
00016516 6600                       		bne.s	loc_155E2
00016518 117C 0001 003A             		move.b	#1,$3A(a0)
0001651E 0829 0002 0022             		btst	#2,obStatus(a1)
00016524 6600                       		bne.s	loc_155D0
00016526 4229 001C                  		clr.b	obAnim(a1)
0001652A                            
0001652A                            loc_155D0:
0001652A 08A9 0005 0022             		bclr	#5,obStatus(a1)
00016530 137C 0001 001D             		move.b	#1,obNextAni(a1)
00016536 137C 0001 0038             		move.b	#1,$38(a1)
0001653C                            
0001653C                            loc_155E2:
0001653C 3029 0014                  		move.w	obInertia(a1),d0
00016540 4A68 0036                  		tst.w	$36(a0)
00016544 6A00                       		bpl.s	loc_15608
00016546 0C40 FC00                  		cmpi.w	#-$400,d0
0001654A 6F00                       		ble.s	loc_155FA
0001654C 337C FC00 0014             		move.w	#-$400,obInertia(a1)
00016552 4E75                       		rts	
00016554                            ; ===========================================================================
00016554                            
00016554                            loc_155FA:
00016554 0C40 F100                  		cmpi.w	#-$F00,d0
00016558 6C00                       		bge.s	locret_15606
0001655A 337C F100 0014             		move.w	#-$F00,obInertia(a1)
00016560                            
00016560                            locret_15606:
00016560 4E75                       		rts	
00016562                            ; ===========================================================================
00016562                            
00016562                            loc_15608:
00016562 0C40 0400                  		cmpi.w	#$400,d0
00016566 6C00                       		bge.s	loc_15616
00016568 337C 0400 0014             		move.w	#$400,obInertia(a1)
0001656E 4E75                       		rts	
00016570                            ; ===========================================================================
00016570                            
00016570                            loc_15616:
00016570 0C40 0F00                  		cmpi.w	#$F00,d0
00016574 6F00                       		ble.s	locret_15622
00016576 337C 0F00 0014             		move.w	#$F00,obInertia(a1)
0001657C                            
0001657C                            locret_15622:
0001657C 4E75                       		rts	
0001657E                            ; ===========================================================================
0001657E                            
0001657E                            Disc_MoveSpot:
0001657E 3028 0036                  		move.w	$36(a0),d0
00016582 D168 0026                  		add.w	d0,obAngle(a0)
00016586 1028 0026                  		move.b	obAngle(a0),d0
0001658A 4EB9 0000 27EC             		jsr	(CalcSine).l
00016590 3428 0030                  		move.w	disc_origY(a0),d2
00016594 3628 0032                  		move.w	disc_origX(a0),d3
00016598 7800                       		moveq	#0,d4
0001659A 1828 0034                  		move.b	$34(a0),d4
0001659E E14C                       		lsl.w	#8,d4
000165A0 2A04                       		move.l	d4,d5
000165A2 C9C0                       		muls.w	d0,d4
000165A4 4844                       		swap	d4
000165A6 CBC1                       		muls.w	d1,d5
000165A8 4845                       		swap	d5
000165AA D842                       		add.w	d2,d4
000165AC DA43                       		add.w	d3,d5
000165AE 3144 000C                  		move.w	d4,obY(a0)
000165B2 3145 0008                  		move.w	d5,obX(a0)
000165B6 4E75                       		rts	
000165B8                            ; ===========================================================================
000165B8                            
000165B8                            Disc_ChkDel:
000165D4 4EF9 0000 E428             		jmp	(DisplaySprite).l
000165DA                            
000165DA                            	@delete:
000165DA 4EF9 0000 E464             		jmp	(DeleteObject).l
000165DA 4EF9 0000 E464             		jmp	(DeleteObject).l
000165E0                            Map_Disc:	include	"_maps\Running Disc.asm"
000165E0                            ; ---------------------------------------------------------------------------
000165E0                            ; Sprite mappings - disc that you run around (SBZ)
000165E0                            ; (It's just a small blob that moves around in a circle. The disc itself is
000165E0                            ; part of the level tiles.)
000165E0                            ; ---------------------------------------------------------------------------
000165E0                            Map_Disc_internal:
000165E0 0000                       		dc.w @spot-Map_Disc_internal
000165E2 01                         @spot:		dc.b 1
000165E3 F805 0000 F8               		dc.b $F8, 5, 0,	0, $F8
000165E8                            		even
000165E8                            		even
000165E8                            		include	"_incObj\68 Conveyor Belt.asm"
000165E8                            ; ---------------------------------------------------------------------------
000165E8                            ; Object 68 - conveyor belts (SBZ)
000165E8                            ; ---------------------------------------------------------------------------
000165E8                            
000165E8                            Conveyor:
000165E8 7000                       		moveq	#0,d0
000165EA 1028 0024                  		move.b	obRoutine(a0),d0
000165EE 323B 0000                  		move.w	Conv_Index(pc,d0.w),d1
000165F2 4EFB 1000                  		jmp	Conv_Index(pc,d1.w)
000165F6                            ; ===========================================================================
000165F6 0000                       Conv_Index:	dc.w Conv_Main-Conv_Index
000165F8 0000                       		dc.w Conv_Action-Conv_Index
000165FA                            
000165FA =00000036                  conv_speed:	equ $36
000165FA =00000038                  conv_width:	equ $38
000165FA                            ; ===========================================================================
000165FA                            
000165FA                            Conv_Main:	; Routine 0
000165FA 5428 0024                  		addq.b	#2,obRoutine(a0)
000165FE 117C 0080 0038             		move.b	#128,conv_width(a0) ; set width to 128 pixels
00016604 1228 0028                  		move.b	obSubtype(a0),d1 ; get object type
00016608 0201 000F                  		andi.b	#$F,d1		; read only the	2nd digit
0001660C 6700                       		beq.s	@typeis0	; if zero, branch
0001660E 117C 0038 0038             		move.b	#56,conv_width(a0) ; set width to 56 pixels
00016614                            
00016614                            	@typeis0:
00016614 1228 0028                  		move.b	obSubtype(a0),d1 ; get object type
00016618 0201 00F0                  		andi.b	#$F0,d1		; read only the	1st digit
0001661C 4881                       		ext.w	d1
0001661E E841                       		asr.w	#4,d1
00016620 3141 0036                  		move.w	d1,conv_speed(a0) ; set belt speed
00016624                            
00016624                            Conv_Action:	; Routine 2
00016624 6100                       		bsr.s	@movesonic
00016642 4E75                       		rts	
00016644                            
00016644                            	@delete:
00016644 4EF9 0000 E464             		jmp	(DeleteObject).l
0001664A                            ; ===========================================================================
0001664A                            
0001664A                            @movesonic:
0001664A 7400                       		moveq	#0,d2
0001664C 1428 0038                  		move.b	conv_width(a0),d2
00016650 3602                       		move.w	d2,d3
00016652 D643                       		add.w	d3,d3
00016654 43F8 D000                  		lea	(v_player).w,a1
00016658 3029 0008                  		move.w	obX(a1),d0
0001665C 9068 0008                  		sub.w	obX(a0),d0
00016660 D042                       		add.w	d2,d0
00016662 B043                       		cmp.w	d3,d0
00016664 6400                       		bcc.s	@notonconveyor
00016666 3229 000C                  		move.w	obY(a1),d1
0001666A 9268 000C                  		sub.w	obY(a0),d1
0001666E 0641 0030                  		addi.w	#$30,d1
00016672 0C41 0030                  		cmpi.w	#$30,d1
00016676 6400                       		bcc.s	@notonconveyor
00016678 0829 0001 0022             		btst	#1,obStatus(a1)
0001667E 6600                       		bne.s	@notonconveyor
00016680 3028 0036                  		move.w	conv_speed(a0),d0
00016684 D169 0008                  		add.w	d0,obX(a1)
00016688                            
00016688                            	@notonconveyor:
00016688 4E75                       		rts	
00016688 4E75                       		rts	
0001668A                            		include	"_incObj\69 SBZ Spinning Platforms.asm"
0001668A                            ; ---------------------------------------------------------------------------
0001668A                            ; Object 69 - spinning platforms and trapdoors (SBZ)
0001668A                            ; ---------------------------------------------------------------------------
0001668A                            
0001668A                            SpinPlatform:
0001668A 7000                       		moveq	#0,d0
0001668C 1028 0024                  		move.b	obRoutine(a0),d0
00016690 323B 0000                  		move.w	Spin_Index(pc,d0.w),d1
00016694 4EFB 1000                  		jmp	Spin_Index(pc,d1.w)
00016698                            ; ===========================================================================
00016698 0000                       Spin_Index:	dc.w Spin_Main-Spin_Index
0001669A 0000                       		dc.w Spin_Trapdoor-Spin_Index
0001669C 0000                       		dc.w Spin_Spinner-Spin_Index
0001669E                            
0001669E =00000030                  spin_timer:	equ $30		; time counter until change
0001669E =00000032                  spin_timelen:	equ $32		; time between changes (general)
0001669E                            ; ===========================================================================
0001669E                            
0001669E                            Spin_Main:	; Routine 0
0001669E 5428 0024                  		addq.b	#2,obRoutine(a0)
000166A2 217C 0000 0000 0004        		move.l	#Map_Trap,obMap(a0)
000166AA 317C 4492 0002             		move.w	#$4492,obGfx(a0)
000166B0 0028 0004 0001             		ori.b	#4,obRender(a0)
000166B6 117C 0080 0019             		move.b	#$80,obActWid(a0)
000166BC 7000                       		moveq	#0,d0
000166BE 1028 0028                  		move.b	obSubtype(a0),d0
000166C2 0240 000F                  		andi.w	#$F,d0
000166C6 C0FC 003C                  		mulu.w	#$3C,d0
000166CA 3140 0032                  		move.w	d0,spin_timelen(a0)
000166CE 4A28 0028                  		tst.b	obSubtype(a0)	; is subtype $8x?
000166D2 6A00                       		bpl.s	Spin_Trapdoor	; if not, branch
000166D4                            
000166D4 5428 0024                  		addq.b	#2,obRoutine(a0) ; goto Spin_Spinner next
000166D8 217C 0000 0000 0004        		move.l	#Map_Spin,obMap(a0)
000166E0 317C 04DF 0002             		move.w	#$4DF,obGfx(a0)
000166E6 117C 0010 0019             		move.b	#$10,obActWid(a0)
000166EC 117C 0002 001C             		move.b	#2,obAnim(a0)
000166F2 7000                       		moveq	#0,d0
000166F4 1028 0028                  		move.b	obSubtype(a0),d0 ; get object type
000166F8 3200                       		move.w	d0,d1
000166FA 0240 000F                  		andi.w	#$F,d0		; read only the	2nd digit
000166FE C0FC 0006                  		mulu.w	#6,d0		; multiply by 6
00016702 3140 0030                  		move.w	d0,spin_timer(a0)
00016706 3140 0032                  		move.w	d0,spin_timelen(a0) ; set time delay
0001670A 0241 0070                  		andi.w	#$70,d1
0001670E 0641 0010                  		addi.w	#$10,d1
00016712 E549                       		lsl.w	#2,d1
00016714 5341                       		subq.w	#1,d1
00016716 3141 0036                  		move.w	d1,$36(a0)
0001671A 6000                       		bra.s	Spin_Spinner
0001671C                            ; ===========================================================================
0001671C                            
0001671C                            Spin_Trapdoor:	; Routine 2
0001671C 5368 0030                  		subq.w	#1,spin_timer(a0) ; decrement timer
00016720 6A00                       		bpl.s	@animate	; if time remains, branch
00016722                            
00016722 3168 0032 0030             		move.w	spin_timelen(a0),spin_timer(a0)
00016728 0868 0000 001C             		bchg	#0,obAnim(a0)
0001672E 4A28 0001                  		tst.b	obRender(a0)
00016732 6A00                       		bpl.s	@animate
0001673E                            
0001673E                            	@animate:
0001673E 43F9 0000 0000             		lea	(Ani_Spin).l,a1
00016744 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
0001674A 4A28 001A                  		tst.b	obFrame(a0)	; is frame number 0 displayed?
0001674E 6600                       		bne.s	@notsolid	; if not, branch
00016750 323C 004B                  		move.w	#$4B,d1
00016754 343C 000C                  		move.w	#$C,d2
00016758 3602                       		move.w	d2,d3
0001675A 5243                       		addq.w	#1,d3
0001675C 3828 0008                  		move.w	obX(a0),d4
00016760 6100 A036                  		bsr.w	SolidObject
00016764 6000 9D08                  		bra.w	RememberState
00016768                            ; ===========================================================================
00016768                            
00016768                            @notsolid:
00016768 0828 0003 0022             		btst	#3,obStatus(a0) ; is Sonic standing on the trapdoor?
0001676E 6700                       		beq.s	@display	; if not, branch
00016770 43F8 D000                  		lea	(v_player).w,a1
00016774 08A9 0003 0022             		bclr	#3,obStatus(a1)
0001677A 08A8 0003 0022             		bclr	#3,obStatus(a0)
00016780 4228 0025                  		clr.b	obSolid(a0)
00016784                            
00016784                            	@display:
00016784 6000 9CE8                  		bra.w	RememberState
00016788                            ; ===========================================================================
00016788                            
00016788                            Spin_Spinner:	; Routine 4
00016788 3038 FE04                  		move.w	(v_framecount).w,d0
0001678C C068 0036                  		and.w	$36(a0),d0
00016790 6600                       		bne.s	@delay
00016792 117C 0001 0034             		move.b	#1,$34(a0)
00016798                            
00016798                            	@delay:
00016798 4A28 0034                  		tst.b	$34(a0)
0001679C 6700                       		beq.s	@animate
0001679E 5368 0030                  		subq.w	#1,spin_timer(a0)
000167A2 6A00                       		bpl.s	@animate
000167A4 3168 0032 0030             		move.w	spin_timelen(a0),spin_timer(a0)
000167AA 4228 0034                  		clr.b	$34(a0)
000167AE 0868 0000 001C             		bchg	#0,obAnim(a0)
000167B4                            
000167B4                            	@animate:
000167B4 43F9 0000 0000             		lea	(Ani_Spin).l,a1
000167BA 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
000167C0 4A28 001A                  		tst.b	obFrame(a0)	; check	if frame number	0 is displayed
000167C4 6600                       		bne.s	@notsolid2	; if not, branch
000167C6 323C 001B                  		move.w	#$1B,d1
000167CA 343C 0007                  		move.w	#7,d2
000167CE 3602                       		move.w	d2,d3
000167D0 5243                       		addq.w	#1,d3
000167D2 3828 0008                  		move.w	obX(a0),d4
000167D6 6100 9FC0                  		bsr.w	SolidObject
000167DA 6000 9C92                  		bra.w	RememberState
000167DE                            ; ===========================================================================
000167DE                            
000167DE                            @notsolid2:
000167DE 0828 0003 0022             		btst	#3,obStatus(a0)
000167E4 6700                       		beq.s	@display
000167E6 43F8 D000                  		lea	(v_player).w,a1
000167EA 08A9 0003 0022             		bclr	#3,obStatus(a1)
000167F0 08A8 0003 0022             		bclr	#3,obStatus(a0)
000167F6 4228 0025                  		clr.b	obSolid(a0)
000167FA                            
000167FA                            	@display:
000167FA 6000 9C72                  		bra.w	RememberState
000167FA 6000 9C72                  		bra.w	RememberState
000167FE                            		include	"_anim\SBZ Spinning Platforms.asm"
000167FE                            ; ---------------------------------------------------------------------------
000167FE                            ; Animation script - trapdoor (SBZ)
000167FE                            ; ---------------------------------------------------------------------------
000167FE 0000                       Ani_Spin:	dc.w @trapopen-Ani_Spin
00016800 0000                       		dc.w @trapclose-Ani_Spin
00016802 0000                       		dc.w @spin1-Ani_Spin
00016804 0000                       		dc.w @spin2-Ani_Spin
00016806 0300 0102 FE01             @trapopen:	dc.b 3,	0, 1, 2, afBack, 1
0001680C 0302 0100 FE01             @trapclose:	dc.b 3,	2, 1, 0, afBack, 1
00016812 0100 0102 0304 4342 4140+  @spin1:		dc.b 1,	0, 1, 2, 3, 4, $43, $42, $41, $40, $61,	$62, $63, $64, $23, $22, $21, 0, afBack, 1
00016826 0100 0102 0304 4342 4140+  @spin2:		dc.b 1,	0, 1, 2, 3, 4, $43, $42, $41, $40, $61,	$62, $63, $64, $23, $22, $21, 0, afBack, 1
0001683A                            		even
0001683A                            		even
0001683A                            Map_Trap:	include	"_maps\Trapdoor.asm"
0001683A                            ; ---------------------------------------------------------------------------
0001683A                            ; Sprite mappings - trapdoor (SBZ)
0001683A                            ; ---------------------------------------------------------------------------
0001683A                            Map_Trap_internal:
0001683A 0000                       		dc.w @closed-Map_Trap_internal
0001683C 0000                       		dc.w @half-Map_Trap_internal
0001683E 0000                       		dc.w @open-Map_Trap_internal
00016840 04                         @closed:	dc.b 4
00016841 F40E 0000 C0               		dc.b $F4, $E, 0, 0, $C0
00016846 F40E 0800 E0               		dc.b $F4, $E, 8, 0, $E0
0001684B F40E 0000 00               		dc.b $F4, $E, 0, 0, 0
00016850 F40E 0800 20               		dc.b $F4, $E, 8, 0, $20
00016855 08                         @half:		dc.b 8
00016856 F20F 000C B6               		dc.b $F2, $F, 0, $C, $B6
0001685B 1A0F 180C D6               		dc.b $1A, $F, $18, $C, $D6
00016860 020A 001C D6               		dc.b 2,	$A, 0, $1C, $D6
00016865 120A 181C BE               		dc.b $12, $A, $18, $1C,	$BE
0001686A F20F 080C 2A               		dc.b $F2, $F, 8, $C, $2A
0001686F 1A0F 100C 0A               		dc.b $1A, $F, $10, $C, $A
00016874 020A 081C 12               		dc.b 2,	$A, 8, $1C, $12
00016879 120A 101C 2A               		dc.b $12, $A, $10, $1C,	$2A
0001687E 04                         @open:		dc.b 4
0001687F 000B 0025 B4               		dc.b 0,	$B, 0, $25, $B4
00016884 200B 1025 B4               		dc.b $20, $B, $10, $25,	$B4
00016889 000B 0025 34               		dc.b 0,	$B, 0, $25, $34
0001688E 200B 1025 34               		dc.b $20, $B, $10, $25,	$34
00016894 00                         		even
00016894 00                         		even
00016894                            Map_Spin:	include	"_maps\SBZ Spinning Platforms.asm"
00016894                            ; ---------------------------------------------------------------------------
00016894                            ; Sprite mappings - spinning platforms (SBZ)
00016894                            ; ---------------------------------------------------------------------------
00016894                            Map_Spin_internal:
00016894 0000                       		dc.w @flat-Map_Spin_internal
00016896 0000                       		dc.w @spin1-Map_Spin_internal
00016898 0000                       		dc.w @spin2-Map_Spin_internal
0001689A 0000                       		dc.w @spin3-Map_Spin_internal
0001689C 0000                       		dc.w @spin4-Map_Spin_internal
0001689E 02                         @flat:		dc.b 2
0001689F F805 0000 F0               		dc.b $F8, 5, 0,	0, $F0
000168A4 F805 0800 00               		dc.b $F8, 5, 8,	0, 0
000168A9 02                         @spin1:		dc.b 2
000168AA F00D 0014 F0               		dc.b $F0, $D, 0, $14, $F0
000168AF 000D 001C F0               		dc.b 0,	$D, 0, $1C, $F0
000168B4 02                         @spin2:		dc.b 2
000168B5 F009 0004 F0               		dc.b $F0, 9, 0,	4, $F0
000168BA 0009 000A F8               		dc.b 0,	9, 0, $A, $F8
000168BF 02                         @spin3:		dc.b 2
000168C0 F009 0024 F0               		dc.b $F0, 9, 0,	$24, $F0
000168C5 0009 002A F8               		dc.b 0,	9, 0, $2A, $F8
000168CA 02                         @spin4:		dc.b 2
000168CB F005 0010 F8               		dc.b $F0, 5, 0,	$10, $F8
000168D0 0005 1010 F8               		dc.b 0,	5, $10,	$10, $F8
000168D6 00                         		even
000168D6 00                         		even
000168D6                            		include	"_incObj\6A Saws and Pizza Cutters.asm"
000168D6                            ; ---------------------------------------------------------------------------
000168D6                            ; Object 6A - ground saws and pizza cutters (SBZ)
000168D6                            ; ---------------------------------------------------------------------------
000168D6                            
000168D6                            Saws:
000168D6 7000                       		moveq	#0,d0
000168D8 1028 0024                  		move.b	obRoutine(a0),d0
000168DC 323B 0000                  		move.w	Saw_Index(pc,d0.w),d1
000168E0 4EFB 1000                  		jmp	Saw_Index(pc,d1.w)
000168E4                            ; ===========================================================================
000168E4 0000                       Saw_Index:	dc.w Saw_Main-Saw_Index
000168E6 0000                       		dc.w Saw_Action-Saw_Index
000168E8                            
000168E8 =0000003A                  saw_origX:	equ $3A		; original x-axis position
000168E8 =00000038                  saw_origY:	equ $38		; original y-axis position
000168E8 =0000003D                  saw_here:	equ $3D		; flag set when the ground saw appears
000168E8                            ; ===========================================================================
000168E8                            
000168E8                            Saw_Main:	; Routine 0
000168E8 5428 0024                  		addq.b	#2,obRoutine(a0)
000168EC 217C 0000 0000 0004        		move.l	#Map_Saw,obMap(a0)
000168F4 317C 43B5 0002             		move.w	#$43B5,obGfx(a0)
000168FA 117C 0004 0001             		move.b	#4,obRender(a0)
00016900 117C 0004 0018             		move.b	#4,obPriority(a0)
00016906 117C 0020 0019             		move.b	#$20,obActWid(a0)
0001690C 3168 0008 003A             		move.w	obX(a0),saw_origX(a0)
00016912 3168 000C 0038             		move.w	obY(a0),saw_origY(a0)
00016918 0C28 0003 0028             		cmpi.b	#3,obSubtype(a0) ; is object a ground saw?
0001691E 6400                       		bcc.s	Saw_Action	; if yes, branch
00016920 117C 00A2 0020             		move.b	#$A2,obColType(a0)
00016926                            
00016926                            Saw_Action:	; Routine 2
00016926 7000                       		moveq	#0,d0
00016928 1028 0028                  		move.b	obSubtype(a0),d0
0001692C 0240 0007                  		andi.w	#7,d0
00016930 D040                       		add.w	d0,d0
00016932 323B 0000                  		move.w	@index(pc,d0.w),d1
00016936 4EBB 1000                  		jsr	@index(pc,d1.w)
00016956 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001695C                            
0001695C                            	@delete:
0001695C 4EF9 0000 E464             		jmp	(DeleteObject).l
00016962                            ; ===========================================================================
00016962 0000 0000 0000             @index:		dc.w @type00-@index, @type01-@index, @type02-@index ; pizza cutters
00016968 0000 0000                  		dc.w @type03-@index, @type04-@index ; ground saws
0001696C                            ; ===========================================================================
0001696C                            
0001696C                            @type00:
0001696C 4E75                       		rts			; doesn't move
0001696E                            ; ===========================================================================
0001696E                            
0001696E                            @type01:
0001696E 323C 0060                  		move.w	#$60,d1
00016972 7000                       		moveq	#0,d0
00016974 1038 FE6C                  		move.b	(v_oscillate+$E).w,d0
00016978 0828 0000 0022             		btst	#0,obStatus(a0)
0001697E 6700                       		beq.s	@noflip01
00016980 4440                       		neg.w	d0
00016982 D041                       		add.w	d1,d0
00016984                            
00016984                            	@noflip01:
00016984 3228 003A                  		move.w	saw_origX(a0),d1
00016988 9240                       		sub.w	d0,d1
0001698A 3141 0008                  		move.w	d1,obX(a0)	; move saw sideways
0001698E                            
0001698E 5328 001E                  		subq.b	#1,obTimeFrame(a0)
00016992 6A00                       		bpl.s	@sameframe01
00016994 117C 0002 001E             		move.b	#2,obTimeFrame(a0) ; time between frame changes
0001699A 0868 0000 001A             		bchg	#0,obFrame(a0)	; change frame
000169A0                            
000169A0                            	@sameframe01:
000169A0 4A28 0001                  		tst.b	obRender(a0)
000169A4 6A00                       		bpl.s	@nosound01
000169A6 3038 FE04                  		move.w	(v_framecount).w,d0
000169AA 0240 000F                  		andi.w	#$F,d0
000169AE 6600                       		bne.s	@nosound01
000169BA                            
000169BA                            	@nosound01:
000169BA 4E75                       		rts	
000169BC                            ; ===========================================================================
000169BC                            
000169BC                            @type02:
000169BC 323C 0030                  		move.w	#$30,d1
000169C0 7000                       		moveq	#0,d0
000169C2 1038 FE64                  		move.b	(v_oscillate+6).w,d0
000169C6 0828 0000 0022             		btst	#0,obStatus(a0)
000169CC 6700                       		beq.s	@noflip02
000169CE 4440                       		neg.w	d0
000169D0 0640 0080                  		addi.w	#$80,d0
000169D4                            
000169D4                            	@noflip02:
000169D4 3228 0038                  		move.w	saw_origY(a0),d1
000169D8 9240                       		sub.w	d0,d1
000169DA 3141 000C                  		move.w	d1,obY(a0)	; move saw vertically
000169DE 5328 001E                  		subq.b	#1,obTimeFrame(a0)
000169E2 6A00                       		bpl.s	@sameframe02
000169E4 117C 0002 001E             		move.b	#2,obTimeFrame(a0)
000169EA 0868 0000 001A             		bchg	#0,obFrame(a0)
000169F0                            
000169F0                            	@sameframe02:
000169F0 4A28 0001                  		tst.b	obRender(a0)
000169F4 6A00                       		bpl.s	@nosound02
000169F6 1038 FE64                  		move.b	(v_oscillate+6).w,d0
000169FA 0C00 0018                  		cmpi.b	#$18,d0
000169FE 6600                       		bne.s	@nosound02
00016A0A                            
00016A0A                            	@nosound02:
00016A0A 4E75                       		rts	
00016A0C                            ; ===========================================================================
00016A0C                            
00016A0C                            @type03:
00016A0C 4A28 003D                  		tst.b	saw_here(a0)	; has the saw appeared already?
00016A10 6600                       		bne.s	@here03		; if yes, branch
00016A12                            
00016A12 3038 D008                  		move.w	(v_player+obX).w,d0
00016A16 0440 00C0                  		subi.w	#$C0,d0
00016A1A 6500                       		bcs.s	@nosaw03x
00016A1C 9068 0008                  		sub.w	obX(a0),d0
00016A20 6500                       		bcs.s	@nosaw03x
00016A22 3038 D00C                  		move.w	(v_player+obY).w,d0
00016A26 0440 0080                  		subi.w	#$80,d0
00016A2A B068 000C                  		cmp.w	obY(a0),d0
00016A2E 6400                       		bcc.s	@nosaw03y
00016A30 0640 0100                  		addi.w	#$100,d0
00016A34 B068 000C                  		cmp.w	obY(a0),d0
00016A38 6500                       		bcs.s	@nosaw03y
00016A3A 117C 0001 003D             		move.b	#1,saw_here(a0)
00016A40 317C 0600 0010             		move.w	#$600,obVelX(a0) ; move object to the right
00016A46 117C 00A2 0020             		move.b	#$A2,obColType(a0)
00016A4C 117C 0002 001A             		move.b	#2,obFrame(a0)
00016A5C                            
00016A5C                            	@nosaw03x:
00016A5C 588F                       		addq.l	#4,sp
00016A5E                            
00016A5E                            	@nosaw03y:
00016A5E 4E75                       		rts	
00016A60                            ; ===========================================================================
00016A60                            
00016A60                            @here03:
00016A60 4EB9 0000 E402             		jsr	(SpeedToPos).l
00016A66 3168 0008 003A             		move.w	obX(a0),saw_origX(a0)
00016A6C 5328 001E                  		subq.b	#1,obTimeFrame(a0)
00016A70 6A00                       		bpl.s	@sameframe03
00016A72 117C 0002 001E             		move.b	#2,obTimeFrame(a0)
00016A78 0868 0000 001A             		bchg	#0,obFrame(a0)
00016A7E                            
00016A7E                            	@sameframe03:
00016A7E 4E75                       		rts	
00016A80                            ; ===========================================================================
00016A80                            
00016A80                            @type04:
00016A80 4A28 003D                  		tst.b	saw_here(a0)
00016A84 6600                       		bne.s	@here04
00016A86 3038 D008                  		move.w	(v_player+obX).w,d0
00016A8A 0640 00E0                  		addi.w	#$E0,d0
00016A8E 9068 0008                  		sub.w	obX(a0),d0
00016A92 6400                       		bcc.s	@nosaw04x
00016A94 3038 D00C                  		move.w	(v_player+obY).w,d0
00016A98 0440 0080                  		subi.w	#$80,d0
00016A9C B068 000C                  		cmp.w	obY(a0),d0
00016AA0 6400                       		bcc.s	@nosaw04y
00016AA2 0640 0100                  		addi.w	#$100,d0
00016AA6 B068 000C                  		cmp.w	obY(a0),d0
00016AAA 6500                       		bcs.s	@nosaw04y
00016AAC 117C 0001 003D             		move.b	#1,saw_here(a0)
00016AB2 317C FA00 0010             		move.w	#-$600,obVelX(a0) ; move object to the left
00016AB8 117C 00A2 0020             		move.b	#$A2,obColType(a0)
00016ABE 117C 0002 001A             		move.b	#2,obFrame(a0)
00016ACE                            
00016ACE                            	@nosaw04x:
00016ACE 588F                       		addq.l	#4,sp
00016AD0                            
00016AD0                            	@nosaw04y:
00016AD0 4E75                       		rts	
00016AD2                            ; ===========================================================================
00016AD2                            
00016AD2                            @here04:
00016AD2 4EB9 0000 E402             		jsr	(SpeedToPos).l
00016AD8 3168 0008 003A             		move.w	obX(a0),saw_origX(a0)
00016ADE 5328 001E                  		subq.b	#1,obTimeFrame(a0)
00016AE2 6A00                       		bpl.s	@sameframe04
00016AE4 117C 0002 001E             		move.b	#2,obTimeFrame(a0)
00016AEA 0868 0000 001A             		bchg	#0,obFrame(a0)
00016AF0                            
00016AF0                            	@sameframe04:
00016AF0 4E75                       		rts	
00016AF0 4E75                       		rts	
00016AF2                            Map_Saw:	include	"_maps\Saws and Pizza Cutters.asm"
00016AF2                            ; ---------------------------------------------------------------------------
00016AF2                            ; Sprite mappings - ground saws	and pizza cutters (SBZ)
00016AF2                            ; ---------------------------------------------------------------------------
00016AF2                            Map_Saw_internal:
00016AF2 0000                       		dc.w @pizzacutter1-Map_Saw_internal
00016AF4 0000                       		dc.w @pizzacutter2-Map_Saw_internal
00016AF6 0000                       		dc.w @groundsaw1-Map_Saw_internal
00016AF8 0000                       		dc.w @groundsaw2-Map_Saw_internal
00016AFA 07                         @pizzacutter1:	dc.b 7
00016AFB C401 0020 FC               		dc.b $C4, 1, 0,	$20, $FC
00016B00 D401 0020 FC               		dc.b $D4, 1, 0,	$20, $FC
00016B05 E403 0020 FC               		dc.b $E4, 3, 0,	$20, $FC
00016B0A E00F 0000 E0               		dc.b $E0, $F, 0, 0, $E0
00016B0F E00F 0800 00               		dc.b $E0, $F, 8, 0, 0
00016B14 000F 1000 E0               		dc.b 0,	$F, $10, 0, $E0
00016B19 000F 1800 00               		dc.b 0,	$F, $18, 0, 0
00016B1E 07                         @pizzacutter2:	dc.b 7
00016B1F C401 0020 FC               		dc.b $C4, 1, 0,	$20, $FC
00016B24 D401 0020 FC               		dc.b $D4, 1, 0,	$20, $FC
00016B29 E403 0020 FC               		dc.b $E4, 3, 0,	$20, $FC
00016B2E E00F 0010 E0               		dc.b $E0, $F, 0, $10, $E0
00016B33 E00F 0810 00               		dc.b $E0, $F, 8, $10, 0
00016B38 000F 1010 E0               		dc.b 0,	$F, $10, $10, $E0
00016B3D 000F 1810 00               		dc.b 0,	$F, $18, $10, 0
00016B42 04                         @groundsaw1:	dc.b 4
00016B43 E00F 0000 E0               		dc.b $E0, $F, 0, 0, $E0
00016B48 E00F 0800 00               		dc.b $E0, $F, 8, 0, 0
00016B4D 000F 1000 E0               		dc.b 0,	$F, $10, 0, $E0
00016B52 000F 1800 00               		dc.b 0,	$F, $18, 0, 0
00016B57 04                         @groundsaw2:	dc.b 4
00016B58 E00F 0010 E0               		dc.b $E0, $F, 0, $10, $E0
00016B5D E00F 0810 00               		dc.b $E0, $F, 8, $10, 0
00016B62 000F 1010 E0               		dc.b 0,	$F, $10, $10, $E0
00016B67 000F 1810 00               		dc.b 0,	$F, $18, $10, 0
00016B6C                            		even
00016B6C                            		even
00016B6C                            		include	"_incObj\6B SBZ Stomper and Door.asm"
00016B6C                            ; ---------------------------------------------------------------------------
00016B6C                            ; Object 6B - stomper and sliding door (SBZ)
00016B6C                            ; ---------------------------------------------------------------------------
00016B6C                            
00016B6C                            ScrapStomp:
00016B6C 7000                       		moveq	#0,d0
00016B6E 1028 0024                  		move.b	obRoutine(a0),d0
00016B72 323B 0000                  		move.w	Sto_Index(pc,d0.w),d1
00016B76 4EFB 1000                  		jmp	Sto_Index(pc,d1.w)
00016B7A                            ; ===========================================================================
00016B7A 0000                       Sto_Index:	dc.w Sto_Main-Sto_Index
00016B7C 0000                       		dc.w Sto_Action-Sto_Index
00016B7E                            
00016B7E =00000016                  sto_height:	equ $16
00016B7E =00000034                  sto_origX:	equ $34		; original x-axis position
00016B7E =00000030                  sto_origY:	equ $30		; original y-axis position
00016B7E =00000038                  sto_active:	equ $38		; flag set when a switch is pressed
00016B7E                            
00016B7E 400C 8001                  Sto_Var:	dc.b  $40,  $C,	$80,   1 ; width, height, ????,	type number
00016B82 1C20 3803                  		dc.b  $1C, $20,	$38,   3
00016B86 1C20 4004                  		dc.b  $1C, $20,	$40,   4
00016B8A 1C20 6004                  		dc.b  $1C, $20,	$60,   4
00016B8E 8040 0005                  		dc.b  $80, $40,	  0,   5
00016B92                            ; ===========================================================================
00016B92                            
00016B92                            Sto_Main:	; Routine 0
00016B92 5428 0024                  		addq.b	#2,obRoutine(a0)
00016B96 7000                       		moveq	#0,d0
00016B98 1028 0028                  		move.b	obSubtype(a0),d0
00016B9C E448                       		lsr.w	#2,d0
00016B9E 0240 001C                  		andi.w	#$1C,d0
00016BA2 47FB 00DA                  		lea	Sto_Var(pc,d0.w),a3
00016BA6 115B 0019                  		move.b	(a3)+,obActWid(a0)
00016BAA 115B 0016                  		move.b	(a3)+,sto_height(a0)
00016BAE E448                       		lsr.w	#2,d0
00016BB0 1140 001A                  		move.b	d0,obFrame(a0)
00016BB4 217C 0000 0000 0004        		move.l	#Map_Stomp,obMap(a0)
00016BBC 317C 22C0 0002             		move.w	#$22C0,obGfx(a0)
00016BC2 0C38 0001 FE10             		cmpi.b	#id_LZ,(v_zone).w ; check if level is LZ/SBZ3
00016BC8 6600                       		bne.s	@isSBZ12	; if not, branch
00016BCA 08F8 0000 F7CB             		bset	#0,(v_obj6B).w
00016BD0 6700                       		beq.s	@isSBZ3
00016BD2                            
00016BD2                            @chkdel:
00016BD2 45F8 FC00                  		lea	(v_objstate).w,a2
00016BD6 7000                       		moveq	#0,d0
00016BD8 1028 0023                  		move.b	obRespawnNo(a0),d0
00016BDC 6700                       		beq.s	@delete
00016BDE 08B2 0007 0002             		bclr	#7,2(a2,d0.w)
00016BE4                            
00016BE4                            	@delete:
00016BE4 4EF9 0000 E464             		jmp	(DeleteObject).l
00016BEA                            ; ===========================================================================
00016BEA                            
00016BEA                            @isSBZ3:
00016BEA 317C 41F0 0002             		move.w	#$41F0,obGfx(a0)
00016BF0 0C68 0A80 0008             		cmpi.w	#$A80,obX(a0)
00016BF6 6600                       		bne.s	@isSBZ12
00016BF8 45F8 FC00                  		lea	(v_objstate).w,a2
00016BFC 7000                       		moveq	#0,d0
00016BFE 1028 0023                  		move.b	obRespawnNo(a0),d0
00016C02 6700                       		beq.s	@isSBZ12
00016C04 0832 0000 0002             		btst	#0,2(a2,d0.w)
00016C0A 6700                       		beq.s	@isSBZ12
00016C0C 4238 F7CB                  		clr.b	(v_obj6B).w
00016C10 60C0                       		bra.s	@chkdel
00016C12                            ; ===========================================================================
00016C12                            
00016C12                            @isSBZ12:
00016C12 0028 0004 0001             		ori.b	#4,obRender(a0)
00016C18 117C 0004 0018             		move.b	#4,obPriority(a0)
00016C1E 3168 0008 0034             		move.w	obX(a0),sto_origX(a0)
00016C24 3168 000C 0030             		move.w	obY(a0),sto_origY(a0)
00016C2A 7000                       		moveq	#0,d0
00016C2C 101B                       		move.b	(a3)+,d0
00016C2E 3140 003C                  		move.w	d0,$3C(a0)
00016C32 7000                       		moveq	#0,d0
00016C34 1028 0028                  		move.b	obSubtype(a0),d0
00016C38 6A00                       		bpl.s	Sto_Action
00016C3A 0200 000F                  		andi.b	#$F,d0
00016C3E 1140 003E                  		move.b	d0,$3E(a0)
00016C42 1153 0028                  		move.b	(a3),obSubtype(a0)
00016C46 0C13 0005                  		cmpi.b	#5,(a3)
00016C4A 6600                       		bne.s	@chkgone
00016C4C 08E8 0004 0001             		bset	#4,obRender(a0)
00016C52                            
00016C52                            	@chkgone:
00016C52 45F8 FC00                  		lea	(v_objstate).w,a2
00016C56 7000                       		moveq	#0,d0
00016C58 1028 0023                  		move.b	obRespawnNo(a0),d0
00016C5C 6700                       		beq.s	Sto_Action
00016C5E 08B2 0007 0002             		bclr	#7,2(a2,d0.w)
00016C64                            
00016C64                            Sto_Action:	; Routine 2
00016C64 3F28 0008                  		move.w	obX(a0),-(sp)
00016C68 7000                       		moveq	#0,d0
00016C6A 1028 0028                  		move.b	obSubtype(a0),d0
00016C6E 0240 000F                  		andi.w	#$F,d0
00016C72 D040                       		add.w	d0,d0
00016C74 323B 0000                  		move.w	@index(pc,d0.w),d1
00016C78 4EBB 1000                  		jsr	@index(pc,d1.w)
00016C7C 381F                       		move.w	(sp)+,d4
00016C7E 4A28 0001                  		tst.b	obRender(a0)
00016C82 6A00                       		bpl.s	@chkdel
00016C84 7200                       		moveq	#0,d1
00016C86 1228 0019                  		move.b	obActWid(a0),d1
00016C8A 0641 000B                  		addi.w	#$B,d1
00016C8E 7400                       		moveq	#0,d2
00016C90 1428 0016                  		move.b	sto_height(a0),d2
00016C94 3602                       		move.w	d2,d3
00016C96 5243                       		addq.w	#1,d3
00016C98 6100 9AFE                  		bsr.w	SolidObject
00016C9C                            
00016C9C                            	@chkdel:
00016CB8 4EF9 0000 E428             		jmp	(DisplaySprite).l
00016CBE                            
00016CBE                            	@chkgone:
00016CBE 0C38 0001 FE10             		cmpi.b	#id_LZ,(v_zone).w
00016CC4 6600                       		bne.s	@delete
00016CC6 4238 F7CB                  		clr.b	(v_obj6B).w
00016CCA 45F8 FC00                  		lea	(v_objstate).w,a2
00016CCE 7000                       		moveq	#0,d0
00016CD0 1028 0023                  		move.b	obRespawnNo(a0),d0
00016CD4 6700                       		beq.s	@delete
00016CD6 08B2 0007 0002             		bclr	#7,2(a2,d0.w)
00016CDC                            
00016CDC                            	@delete:
00016CDC 4EF9 0000 E464             		jmp	(DeleteObject).l
00016CE2                            ; ===========================================================================
00016CE2 0000 0000                  @index:		dc.w @type00-@index, @type01-@index
00016CE6 0000 0000                  		dc.w @type02-@index, @type03-@index
00016CEA 0000 0000                  		dc.w @type04-@index, @type05-@index
00016CEE                            ; ===========================================================================
00016CEE                            
00016CEE                            @type00:
00016CEE 4E75                       		rts
00016CF0                            ; ===========================================================================
00016CF0                            
00016CF0                            @type01:
00016CF0 4A28 0038                  		tst.b	sto_active(a0)
00016CF4 6600                       		bne.s	@isactive01
00016CF6 45F8 F7E0                  		lea	(f_switch).w,a2
00016CFA 7000                       		moveq	#0,d0
00016CFC 1028 003E                  		move.b	$3E(a0),d0
00016D00 0832 0000 0000             		btst	#0,(a2,d0.w)
00016D06 6700                       		beq.s	@loc_15DC2
00016D08 117C 0001 0038             		move.b	#1,sto_active(a0)
00016D0E                            
00016D0E                            	@isactive01:
00016D0E 3028 003C                  		move.w	$3C(a0),d0
00016D12 B068 003A                  		cmp.w	$3A(a0),d0
00016D16 6700                       		beq.s	@loc_15DE0
00016D18 5468 003A                  		addq.w	#2,$3A(a0)
00016D1C                            
00016D1C                            	@loc_15DC2:
00016D1C 3028 003A                  		move.w	$3A(a0),d0
00016D20 0828 0000 0022             		btst	#0,obStatus(a0)
00016D26 6700                       		beq.s	@noflip01
00016D28 4440                       		neg.w	d0
00016D2A 0640 0080                  		addi.w	#$80,d0
00016D2E                            
00016D2E                            	@noflip01:
00016D2E 3228 0034                  		move.w	sto_origX(a0),d1
00016D32 9240                       		sub.w	d0,d1
00016D34 3141 0008                  		move.w	d1,obX(a0)
00016D38 4E75                       		rts	
00016D3A                            ; ===========================================================================
00016D3A                            
00016D3A                            @loc_15DE0:
00016D3A 5228 0028                  		addq.b	#1,obSubtype(a0)
00016D3E 317C 00B4 0036             		move.w	#$B4,$36(a0)
00016D44 4228 0038                  		clr.b	sto_active(a0)
00016D48 45F8 FC00                  		lea	(v_objstate).w,a2
00016D4C 7000                       		moveq	#0,d0
00016D4E 1028 0023                  		move.b	obRespawnNo(a0),d0
00016D52 67C8                       		beq.s	@loc_15DC2
00016D54 08F2 0000 0002             		bset	#0,2(a2,d0.w)
00016D5A 60C0                       		bra.s	@loc_15DC2
00016D5C                            ; ===========================================================================
00016D5C                            
00016D5C                            @type02:
00016D5C 4A28 0038                  		tst.b	sto_active(a0)
00016D60 6600                       		bne.s	@isactive02
00016D62 5368 0036                  		subq.w	#1,$36(a0)
00016D66 6600                       		bne.s	@loc_15E1E
00016D68 117C 0001 0038             		move.b	#1,sto_active(a0)
00016D6E                            
00016D6E                            	@isactive02:
00016D6E 4A68 003A                  		tst.w	$3A(a0)
00016D72 6700                       		beq.s	@loc_15E3C
00016D74 5568 003A                  		subq.w	#2,$3A(a0)
00016D78                            
00016D78                            	@loc_15E1E:
00016D78 3028 003A                  		move.w	$3A(a0),d0
00016D7C 0828 0000 0022             		btst	#0,obStatus(a0)
00016D82 6700                       		beq.s	@noflip02
00016D84 4440                       		neg.w	d0
00016D86 0640 0080                  		addi.w	#$80,d0
00016D8A                            
00016D8A                            	@noflip02:
00016D8A 3228 0034                  		move.w	sto_origX(a0),d1
00016D8E 9240                       		sub.w	d0,d1
00016D90 3141 0008                  		move.w	d1,obX(a0)
00016D94 4E75                       		rts	
00016D96                            ; ===========================================================================
00016D96                            
00016D96                            @loc_15E3C:
00016D96 5328 0028                  		subq.b	#1,obSubtype(a0)
00016D9A 4228 0038                  		clr.b	sto_active(a0)
00016D9E 45F8 FC00                  		lea	(v_objstate).w,a2
00016DA2 7000                       		moveq	#0,d0
00016DA4 1028 0023                  		move.b	obRespawnNo(a0),d0
00016DA8 67CE                       		beq.s	@loc_15E1E
00016DAA 08B2 0000 0002             		bclr	#0,2(a2,d0.w)
00016DB0 60C6                       		bra.s	@loc_15E1E
00016DB2                            ; ===========================================================================
00016DB2                            
00016DB2                            @type03:
00016DB2 4A28 0038                  		tst.b	sto_active(a0)
00016DB6 6600                       		bne.s	@isactive03
00016DB8 4A68 003A                  		tst.w	$3A(a0)
00016DBC 6700                       		beq.s	@loc_15E6A
00016DBE 5368 003A                  		subq.w	#1,$3A(a0)
00016DC2 6000                       		bra.s	@loc_15E8E
00016DC4                            ; ===========================================================================
00016DC4                            
00016DC4                            @loc_15E6A:
00016DC4 5368 0036                  		subq.w	#1,$36(a0)
00016DC8 6A00                       		bpl.s	@loc_15E8E
00016DCA 317C 003C 0036             		move.w	#$3C,$36(a0)
00016DD0 117C 0001 0038             		move.b	#1,sto_active(a0)
00016DD6                            
00016DD6                            @isactive03:
00016DD6 5068 003A                  		addq.w	#8,$3A(a0)
00016DDA 3028 003A                  		move.w	$3A(a0),d0
00016DDE B068 003C                  		cmp.w	$3C(a0),d0
00016DE2 6600                       		bne.s	@loc_15E8E
00016DE4 4228 0038                  		clr.b	sto_active(a0)
00016DE8                            
00016DE8                            @loc_15E8E:
00016DE8 3028 003A                  		move.w	$3A(a0),d0
00016DEC 0828 0000 0022             		btst	#0,obStatus(a0)
00016DF2 6700                       		beq.s	@noflip03
00016DF4 4440                       		neg.w	d0
00016DF6 0640 0038                  		addi.w	#$38,d0
00016DFA                            
00016DFA                            	@noflip03:
00016DFA 3228 0030                  		move.w	sto_origY(a0),d1
00016DFE D240                       		add.w	d0,d1
00016E00 3141 000C                  		move.w	d1,obY(a0)
00016E04 4E75                       		rts	
00016E06                            ; ===========================================================================
00016E06                            
00016E06                            @type04:
00016E06 4A28 0038                  		tst.b	sto_active(a0)
00016E0A 6600                       		bne.s	@isactive04
00016E0C 4A68 003A                  		tst.w	$3A(a0)
00016E10 6700                       		beq.s	@loc_15EBE
00016E12 5168 003A                  		subq.w	#8,$3A(a0)
00016E16 6000                       		bra.s	@loc_15EF0
00016E18                            ; ===========================================================================
00016E18                            
00016E18                            @loc_15EBE:
00016E18 5368 0036                  		subq.w	#1,$36(a0)
00016E1C 6A00                       		bpl.s	@loc_15EF0
00016E1E 317C 003C 0036             		move.w	#$3C,$36(a0)
00016E24 117C 0001 0038             		move.b	#1,sto_active(a0)
00016E2A                            
00016E2A                            @isactive04:
00016E2A 3028 003A                  		move.w	$3A(a0),d0
00016E2E B068 003C                  		cmp.w	$3C(a0),d0
00016E32 6700                       		beq.s	@loc_15EE0
00016E34 5068 003A                  		addq.w	#8,$3A(a0)
00016E38 6000                       		bra.s	@loc_15EF0
00016E3A                            ; ===========================================================================
00016E3A                            
00016E3A                            @loc_15EE0:
00016E3A 5368 0036                  		subq.w	#1,$36(a0)
00016E3E 6A00                       		bpl.s	@loc_15EF0
00016E40 317C 003C 0036             		move.w	#$3C,$36(a0)
00016E46 4228 0038                  		clr.b	sto_active(a0)
00016E4A                            
00016E4A                            @loc_15EF0:
00016E4A 3028 003A                  		move.w	$3A(a0),d0
00016E4E 0828 0000 0022             		btst	#0,obStatus(a0)
00016E54 6700                       		beq.s	@noflip04
00016E56 4440                       		neg.w	d0
00016E58 0640 0038                  		addi.w	#$38,d0
00016E5C                            
00016E5C                            	@noflip04:
00016E5C 3228 0030                  		move.w	sto_origY(a0),d1
00016E60 D240                       		add.w	d0,d1
00016E62 3141 000C                  		move.w	d1,obY(a0)
00016E66 4E75                       		rts	
00016E68                            ; ===========================================================================
00016E68                            
00016E68                            @type05:
00016E68 4A28 0038                  		tst.b	sto_active(a0)
00016E6C 6600                       		bne.s	@loc_15F3E
00016E6E 45F8 F7E0                  		lea	(f_switch).w,a2
00016E72 7000                       		moveq	#0,d0
00016E74 1028 003E                  		move.b	$3E(a0),d0
00016E78 0832 0000 0000             		btst	#0,(a2,d0.w)
00016E7E 6700                       		beq.s	@locret_15F5C
00016E80 117C 0001 0038             		move.b	#1,sto_active(a0)
00016E86 45F8 FC00                  		lea	(v_objstate).w,a2
00016E8A 7000                       		moveq	#0,d0
00016E8C 1028 0023                  		move.b	obRespawnNo(a0),d0
00016E90 6700                       		beq.s	@loc_15F3E
00016E92 08F2 0000 0002             		bset	#0,2(a2,d0.w)
00016E98                            
00016E98                            @loc_15F3E:
00016E98 04A8 0001 0000 0008        		subi.l	#$10000,obX(a0)
00016EA0 06A8 0000 8000 000C        		addi.l	#$8000,obY(a0)
00016EA8 3168 0008 0034             		move.w	obX(a0),sto_origX(a0)
00016EAE 0C68 0980 0008             		cmpi.w	#$980,obX(a0)
00016EB4 6700                       		beq.s	@loc_15F5E
00016EB6                            
00016EB6                            @locret_15F5C:
00016EB6 4E75                       		rts	
00016EB8                            ; ===========================================================================
00016EB8                            
00016EB8                            @loc_15F5E:
00016EB8 4228 0028                  		clr.b	obSubtype(a0)
00016EBC 4228 0038                  		clr.b	sto_active(a0)
00016EC0 4E75                       		rts	
00016EC0 4E75                       		rts	
00016EC2                            Map_Stomp:	include	"_maps\SBZ Stomper and Door.asm"
00016EC2                            ; ---------------------------------------------------------------------------
00016EC2                            ; Sprite mappings - stomper and	platforms (SBZ)
00016EC2                            ; ---------------------------------------------------------------------------
00016EC2                            Map_Stomp_internal:
00016EC2 0000                       		dc.w @door-Map_Stomp_internal
00016EC4 0000                       		dc.w @stomper-Map_Stomp_internal
00016EC6 0000                       		dc.w @stomper-Map_Stomp_internal
00016EC8 0000                       		dc.w @stomper-Map_Stomp_internal
00016ECA 0000                       		dc.w @bigdoor-Map_Stomp_internal
00016ECC 04                         @door:		dc.b 4
00016ECD F40E 21AF C0               		dc.b $F4, $E, $21, $AF,	$C0 ; horizontal sliding door
00016ED2 F40E 21B2 E0               		dc.b $F4, $E, $21, $B2,	$E0
00016ED7 F40E 21B2 00               		dc.b $F4, $E, $21, $B2,	0
00016EDC F40E 29AF 20               		dc.b $F4, $E, $29, $AF,	$20
00016EE1 08                         @stomper:	dc.b 8
00016EE2 E00C 000C E4               		dc.b $E0, $C, 0, $C, $E4 ; stomper block with yellow/black stripes
00016EE7 E008 0010 04               		dc.b $E0, 8, 0,	$10, 4
00016EEC E80E 2013 E4               		dc.b $E8, $E, $20, $13,	$E4
00016EF1 E80A 201F 04               		dc.b $E8, $A, $20, $1F,	4
00016EF6 000E 2013 E4               		dc.b 0,	$E, $20, $13, $E4
00016EFB 000A 201F 04               		dc.b 0,	$A, $20, $1F, 4
00016F00 180C 000C E4               		dc.b $18, $C, 0, $C, $E4
00016F05 1808 0010 04               		dc.b $18, 8, 0,	$10, 4
00016F0A 0E                         @bigdoor:	dc.b $E
00016F0B C00F 0000 80               		dc.b $C0, $F, 0, 0, $80	; huge diagonal sliding door from SBZ3
00016F10 C00F 0010 A0               		dc.b $C0, $F, 0, $10, $A0
00016F15 C00F 0020 C0               		dc.b $C0, $F, 0, $20, $C0
00016F1A C00F 0010 E0               		dc.b $C0, $F, 0, $10, $E0
00016F1F C00F 0020 00               		dc.b $C0, $F, 0, $20, 0
00016F24 C00F 0010 20               		dc.b $C0, $F, 0, $10, $20
00016F29 C00F 0030 40               		dc.b $C0, $F, 0, $30, $40
00016F2E C00D 0040 60               		dc.b $C0, $D, 0, $40, $60
00016F33 E00F 0048 80               		dc.b $E0, $F, 0, $48, $80
00016F38 E00F 0048 C0               		dc.b $E0, $F, 0, $48, $C0
00016F3D E00F 0058 00               		dc.b $E0, $F, 0, $58, 0
00016F42 000F 0048 80               		dc.b 0,	$F, 0, $48, $80
00016F47 000F 0058 C0               		dc.b 0,	$F, 0, $58, $C0
00016F4C 200F 0058 80               		dc.b $20, $F, 0, $58, $80
00016F52 00                         		even
00016F52 00                         		even
00016F52                            		include	"_incObj\6C SBZ Vanishing Platforms.asm"
00016F52                            ; ---------------------------------------------------------------------------
00016F52                            ; Object 6C - vanishing	platforms (SBZ)
00016F52                            ; ---------------------------------------------------------------------------
00016F52                            
00016F52                            VanishPlatform:
00016F52 7000                       		moveq	#0,d0
00016F54 1028 0024                  		move.b	obRoutine(a0),d0
00016F58 323B 0000                  		move.w	VanP_Index(pc,d0.w),d1
00016F5C 4EFB 1000                  		jmp	VanP_Index(pc,d1.w)
00016F60                            ; ===========================================================================
00016F60 0000                       VanP_Index:	dc.w VanP_Main-VanP_Index
00016F62 0000                       		dc.w VanP_Vanish-VanP_Index
00016F64 0000                       		dc.w VanP_Appear-VanP_Index
00016F66 0000                       		dc.w loc_16068-VanP_Index
00016F68                            
00016F68 =00000030                  vanp_timer:	equ $30		; counter for time until event
00016F68 =00000032                  vanp_timelen:	equ $32		; time between events (general)
00016F68                            ; ===========================================================================
00016F68                            
00016F68                            VanP_Main:	; Routine 0
00016F68 5C28 0024                  		addq.b	#6,obRoutine(a0)
00016F6C 217C 0000 0000 0004        		move.l	#Map_VanP,obMap(a0)
00016F74 317C 44C3 0002             		move.w	#$44C3,obGfx(a0)
00016F7A 0028 0004 0001             		ori.b	#4,obRender(a0)
00016F80 117C 0010 0019             		move.b	#$10,obActWid(a0)
00016F86 117C 0004 0018             		move.b	#4,obPriority(a0)
00016F8C 7000                       		moveq	#0,d0
00016F8E 1028 0028                  		move.b	obSubtype(a0),d0 ; get object type
00016F92 0240 000F                  		andi.w	#$F,d0		; read only the	2nd digit
00016F96 5240                       		addq.w	#1,d0		; add 1
00016F98 EF48                       		lsl.w	#7,d0		; multiply by $80
00016F9A 3200                       		move.w	d0,d1
00016F9C 5340                       		subq.w	#1,d0
00016F9E 3140 0030                  		move.w	d0,vanp_timer(a0)
00016FA2 3140 0032                  		move.w	d0,vanp_timelen(a0)
00016FA6 7000                       		moveq	#0,d0
00016FA8 1028 0028                  		move.b	obSubtype(a0),d0 ; get object type
00016FAC 0240 00F0                  		andi.w	#$F0,d0		; read only the	1st digit
00016FB0 0641 0080                  		addi.w	#$80,d1
00016FB4 C0C1                       		mulu.w	d1,d0
00016FB6 E088                       		lsr.l	#8,d0
00016FB8 3140 0036                  		move.w	d0,$36(a0)
00016FBC 5341                       		subq.w	#1,d1
00016FBE 3141 0038                  		move.w	d1,$38(a0)
00016FC2                            
00016FC2                            loc_16068:	; Routine 6
00016FC2 3038 FE04                  		move.w	(v_framecount).w,d0
00016FC6 9068 0036                  		sub.w	$36(a0),d0
00016FCA C068 0038                  		and.w	$38(a0),d0
00016FCE 6600                       		bne.s	@animate
00016FD0 5928 0024                  		subq.b	#4,obRoutine(a0) ; goto VanP_Vanish next
00016FD4 6000                       		bra.s	VanP_Vanish
00016FD6                            ; ===========================================================================
00016FD6                            
00016FD6                            @animate:
00016FD6 43F9 0000 0000             		lea	(Ani_Van).l,a1
00016FDC 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
00016FE2 6000 948A                  		bra.w	RememberState
00016FE6                            ; ===========================================================================
00016FE6                            
00016FE6                            VanP_Vanish:	; Routine 2
00016FE6                            VanP_Appear:	; Routine 4
00016FE6 5368 0030                  		subq.w	#1,vanp_timer(a0)
00016FEA 6A00                       		bpl.s	@wait
00016FEC 317C 007F 0030             		move.w	#127,vanp_timer(a0)
00016FF2 4A28 001C                  		tst.b	obAnim(a0)	; is platform vanishing?
00016FF6 6700                       		beq.s	@isvanishing	; if yes, branch
00016FF8 3168 0032 0030             		move.w	vanp_timelen(a0),vanp_timer(a0)
00016FFE                            
00016FFE                            	@isvanishing:
00016FFE 0868 0000 001C             		bchg	#0,obAnim(a0)
00017004                            
00017004                            	@wait:
00017004 43F9 0000 0000             		lea	(Ani_Van).l,a1
0001700A 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
00017010 0828 0001 001A             		btst	#1,obFrame(a0)	; has platform vanished?
00017016 6600                       		bne.s	@notsolid	; if yes, branch
00017018 0C28 0002 0024             		cmpi.b	#2,obRoutine(a0)
0001701E 6600                       		bne.s	@loc_160D6
00017020 7200                       		moveq	#0,d1
00017022 1228 0019                  		move.b	obActWid(a0),d1
00017026 4EB9 0000 7A86             		jsr	(PlatformObject).l
0001702C 6000 9440                  		bra.w	RememberState
00017030                            ; ===========================================================================
00017030                            
00017030                            @loc_160D6:
00017030 7200                       		moveq	#0,d1
00017032 1228 0019                  		move.b	obActWid(a0),d1
00017036 4EB9 0000 7BFA             		jsr	(ExitPlatform).l
0001703C 3428 0008                  		move.w	obX(a0),d2
00017040 4EB9 0000 8168             		jsr	(MvSonicOnPtfm2).l
00017046 6000 9426                  		bra.w	RememberState
0001704A                            ; ===========================================================================
0001704A                            
0001704A                            @notsolid:
0001704A 0828 0003 0022             		btst	#3,obStatus(a0)
00017050 6700                       		beq.s	@display
00017052 43F8 D000                  		lea	(v_player).w,a1
00017056 08A9 0003 0022             		bclr	#3,obStatus(a1)
0001705C 08A8 0003 0022             		bclr	#3,obStatus(a0)
00017062 117C 0002 0024             		move.b	#2,obRoutine(a0)
00017068 4228 0025                  		clr.b	obSolid(a0)
0001706C                            
0001706C                            	@display:
0001706C 6000 9400                  		bra.w	RememberState
0001706C 6000 9400                  		bra.w	RememberState
00017070                            		include	"_anim\SBZ Vanishing Platforms.asm"
00017070                            ; ---------------------------------------------------------------------------
00017070                            ; Animation script - vanishing platforms (SBZ)
00017070                            ; ---------------------------------------------------------------------------
00017070 0000                       Ani_Van:	dc.w @vanish-Ani_Van
00017072 0000                       		dc.w @appear-Ani_Van
00017074 0700 0102 03FE 01          @vanish:	dc.b 7,	0, 1, 2, 3, afBack, 1
0001707C 00                         		even
0001707C 0703 0201 00FE 01          @appear:	dc.b 7,	3, 2, 1, 0, afBack, 1
00017084 00                         		even
00017084 00                         		even
00017084                            Map_VanP:	include	"_maps\SBZ Vanishing Platforms.asm"
00017084                            ; ---------------------------------------------------------------------------
00017084                            ; Sprite mappings - vanishing platforms	(SBZ)
00017084                            ; ---------------------------------------------------------------------------
00017084                            Map_VanP_internal:
00017084 0000                       		dc.w @whole-Map_VanP_internal
00017086 0000                       		dc.w @half-Map_VanP_internal
00017088 0000                       		dc.w @quarter-Map_VanP_internal
0001708A 0000                       		dc.w @gone-Map_VanP_internal
0001708C 01                         @whole:		dc.b 1
0001708D F80F 0000 F0               		dc.b $F8, $F, 0, 0, $F0
00017092 01                         @half:		dc.b 1
00017093 F807 0010 F8               		dc.b $F8, 7, 0,	$10, $F8
00017098 01                         @quarter:	dc.b 1
00017099 F803 0018 FC               		dc.b $F8, 3, 0,	$18, $FC
0001709E 00                         @gone:		dc.b 0
000170A0 00                         		even
000170A0 00                         		even
000170A0                            		include	"_incObj\6E Electrocuter.asm"
000170A0                            ; ---------------------------------------------------------------------------
000170A0                            ; Object 6E - electrocution orbs (SBZ)
000170A0                            ; ---------------------------------------------------------------------------
000170A0                            
000170A0                            Electro:
000170A0 7000                       		moveq	#0,d0
000170A2 1028 0024                  		move.b	obRoutine(a0),d0
000170A6 323B 0000                  		move.w	Elec_Index(pc,d0.w),d1
000170AA 4EFB 1000                  		jmp	Elec_Index(pc,d1.w)
000170AE                            ; ===========================================================================
000170AE 0000                       Elec_Index:	dc.w Elec_Main-Elec_Index
000170B0 0000                       		dc.w Elec_Shock-Elec_Index
000170B2                            
000170B2 =00000034                  elec_freq:	equ $34		; frequency
000170B2                            ; ===========================================================================
000170B2                            
000170B2                            Elec_Main:	; Routine 0
000170B2 5428 0024                  		addq.b	#2,obRoutine(a0)
000170B6 217C 0000 0000 0004        		move.l	#Map_Elec,obMap(a0)
000170BE 317C 047E 0002             		move.w	#$47E,obGfx(a0)
000170C4 0028 0004 0001             		ori.b	#4,obRender(a0)
000170CA 117C 0028 0019             		move.b	#$28,obActWid(a0)
000170D0 7000                       		moveq	#0,d0
000170D2 1028 0028                  		move.b	obSubtype(a0),d0 ; read object type
000170D6 E948                       		lsl.w	#4,d0		; multiply by $10
000170D8 5340                       		subq.w	#1,d0
000170DA 3140 0034                  		move.w	d0,elec_freq(a0)
000170DE                            
000170DE                            Elec_Shock:	; Routine 2
000170DE 3038 FE04                  		move.w	(v_framecount).w,d0
000170E2 C068 0034                  		and.w	elec_freq(a0),d0 ; is it time to zap?
000170E6 6600                       		bne.s	@animate	; if not, branch
000170E8                            
000170E8 117C 0001 001C             		move.b	#1,obAnim(a0)	; run "zap" animation
000170EE 4A28 0001                  		tst.b	obRender(a0)
000170F2 6A00                       		bpl.s	@animate
000170FE                            
000170FE                            	@animate:
000170FE 43F9 0000 0000             		lea	(Ani_Elec).l,a1
00017104 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
0001710A 117C 0000 0020             		move.b	#0,obColType(a0)
00017110 0C28 0004 001A             		cmpi.b	#4,obFrame(a0)	; is 4th frame displayed?
00017116 6600                       		bne.s	@display	; if not, branch
00017118 117C 00A4 0020             		move.b	#$A4,obColType(a0) ; if yes, make object hurt Sonic
0001711E                            
0001711E                            	@display:
0001711E 6000 934E                  		bra.w	RememberState
0001711E 6000 934E                  		bra.w	RememberState
00017122                            		include	"_anim\Electrocuter.asm"
00017122                            ; ---------------------------------------------------------------------------
00017122                            ; Animation script - electrocution orbs (SBZ)
00017122                            ; ---------------------------------------------------------------------------
00017122 0000                       Ani_Elec:	dc.w byte_161CC-Ani_Elec
00017124 0000                       		dc.w byte_161D0-Ani_Elec
00017126 0700 FF                    byte_161CC:	dc.b 7,	0, afEnd
0001712A 00                         		even
0001712A 0001 0101 0203 0304 0404+  byte_161D0:	dc.b 0,	1, 1, 1, 2, 3, 3, 4, 4,	4, 5, 5, 5, 0, afChange, 0
0001713A                            		even
0001713A                            		even
0001713A                            Map_Elec:	include	"_maps\Electrocuter.asm"
0001713A                            ; ---------------------------------------------------------------------------
0001713A                            ; Sprite mappings - electrocution orbs (SBZ)
0001713A                            ; ---------------------------------------------------------------------------
0001713A                            Map_Elec_internal:
0001713A 0000                       		dc.w @normal-Map_Elec_internal
0001713C 0000                       		dc.w @zap1-Map_Elec_internal
0001713E 0000                       		dc.w @zap2-Map_Elec_internal
00017140 0000                       		dc.w @zap3-Map_Elec_internal
00017142 0000                       		dc.w @zap4-Map_Elec_internal
00017144 0000                       		dc.w @zap5-Map_Elec_internal
00017146 02                         @normal:	dc.b 2
00017147 F804 6000 F8               		dc.b $F8, 4, $60, 0, $F8
0001714C 0006 4002 F8               		dc.b 0,	6, $40,	2, $F8
00017151 03                         @zap1:		dc.b 3
00017152 F805 0008 F8               		dc.b $F8, 5, 0,	8, $F8
00017157 F804 6000 F8               		dc.b $F8, 4, $60, 0, $F8
0001715C 0006 4002 F8               		dc.b 0,	6, $40,	2, $F8
00017161 05                         @zap2:		dc.b 5
00017162 F805 0008 F8               		dc.b $F8, 5, 0,	8, $F8
00017167 F804 6000 F8               		dc.b $F8, 4, $60, 0, $F8
0001716C 0006 4002 F8               		dc.b 0,	6, $40,	2, $F8
00017171 F60D 000C 08               		dc.b $F6, $D, 0, $C, 8
00017176 F60D 080C DC               		dc.b $F6, $D, 8, $C, $DC
0001717B 04                         @zap3:		dc.b 4
0001717C F804 6000 F8               		dc.b $F8, 4, $60, 0, $F8
00017181 0006 4002 F8               		dc.b 0,	6, $40,	2, $F8
00017186 F60D 000C 08               		dc.b $F6, $D, 0, $C, 8
0001718B F60D 080C DC               		dc.b $F6, $D, 8, $C, $DC
00017190 06                         @zap4:		dc.b 6
00017191 F804 6000 F8               		dc.b $F8, 4, $60, 0, $F8
00017196 0006 4002 F8               		dc.b 0,	6, $40,	2, $F8
0001719B F60D 100C 08               		dc.b $F6, $D, $10, $C, 8
000171A0 F60D 180C DC               		dc.b $F6, $D, $18, $C, $DC
000171A5 F60D 000C 24               		dc.b $F6, $D, 0, $C, $24
000171AA F60D 080C C0               		dc.b $F6, $D, 8, $C, $C0
000171AF 04                         @zap5:		dc.b 4
000171B0 F804 6000 F8               		dc.b $F8, 4, $60, 0, $F8
000171B5 0006 4002 F8               		dc.b 0,	6, $40,	2, $F8
000171BA F60D 100C 24               		dc.b $F6, $D, $10, $C, $24
000171BF F60D 180C C0               		dc.b $F6, $D, $18, $C, $C0
000171C4                            		even
000171C4                            		even
000171C4                            		include	"_incObj\6F SBZ Spin Platform Conveyor.asm"
000171C4                            ; ---------------------------------------------------------------------------
000171C4                            ; Object 6F - spinning platforms that move around a conveyor belt (SBZ)
000171C4                            ; ---------------------------------------------------------------------------
000171C4                            
000171C4                            SpinConvey:
000171C4 7000                       		moveq	#0,d0
000171C6 1028 0024                  		move.b	obRoutine(a0),d0
000171CA 323B 0000                  		move.w	SpinC_Index(pc,d0.w),d1
000171CE 4EBB 1000                  		jsr	SpinC_Index(pc,d1.w)
000171EE                            
000171EE                            SpinC_Display:
000171EE 4EF9 0000 E428             		jmp	(DisplaySprite).l
000171F4                            ; ===========================================================================
000171F4                            
000171F4                            loc_1629A:
000171F4 0C38 0002 FE11             		cmpi.b	#2,(v_act).w	; check if act is 3
000171FA 6600                       		bne.s	SpinC_Act1or2	; if not, branch
000171FC 0C40 FF80                  		cmpi.w	#-$80,d0
00017200 64EC                       		bcc.s	SpinC_Display
00017202                            
00017202                            SpinC_Act1or2:
00017202 1028 002F                  		move.b	$2F(a0),d0
00017206 6A00                       		bpl.s	SpinC_Delete
00017208 0240 007F                  		andi.w	#$7F,d0
0001720C 45F8 F7C1                  		lea	(v_obj63).w,a2
00017210 08B2 0000 0000             		bclr	#0,(a2,d0.w)
00017216                            
00017216                            SpinC_Delete:
00017216 4EF9 0000 E464             		jmp	(DeleteObject).l
0001721C                            ; ===========================================================================
0001721C 0000                       SpinC_Index:	dc.w SpinC_Main-SpinC_Index
0001721E 0000                       		dc.w loc_163D8-SpinC_Index
00017220                            ; ===========================================================================
00017220                            
00017220                            SpinC_Main:	; Routine 0
00017220 1028 0028                  		move.b	obSubtype(a0),d0
00017224 6B00 0000                  		bmi.w	loc_16380
00017228 5428 0024                  		addq.b	#2,obRoutine(a0)
0001722C 217C 0001 6894 0004        		move.l	#Map_Spin,obMap(a0)
00017234 317C 04DF 0002             		move.w	#$4DF,obGfx(a0)
0001723A 117C 0010 0019             		move.b	#$10,obActWid(a0)
00017240 0028 0004 0001             		ori.b	#4,obRender(a0)
00017246 117C 0004 0018             		move.b	#4,obPriority(a0)
0001724C 7000                       		moveq	#0,d0
0001724E 1028 0028                  		move.b	obSubtype(a0),d0
00017252 3200                       		move.w	d0,d1
00017254 E648                       		lsr.w	#3,d0
00017256 0240 001E                  		andi.w	#$1E,d0
0001725A 45FA 0000                  		lea	off_164A6(pc),a2
0001725E D4F2 0000                  		adda.w	(a2,d0.w),a2
00017262 315A 0038                  		move.w	(a2)+,$38(a0)
00017266 315A 0030                  		move.w	(a2)+,$30(a0)
0001726A 214A 003C                  		move.l	a2,$3C(a0)
0001726E 0241 000F                  		andi.w	#$F,d1
00017272 E549                       		lsl.w	#2,d1
00017274 1141 0038                  		move.b	d1,$38(a0)
00017278 117C 0004 003A             		move.b	#4,$3A(a0)
0001727E 4A38 F7C0                  		tst.b	(f_conveyrev).w
00017282 6700                       		beq.s	loc_16356
00017284 117C 0001 003B             		move.b	#1,$3B(a0)
0001728A 4428 003A                  		neg.b	$3A(a0)
0001728E 7200                       		moveq	#0,d1
00017290 1228 0038                  		move.b	$38(a0),d1
00017294 D228 003A                  		add.b	$3A(a0),d1
00017298 B228 0039                  		cmp.b	$39(a0),d1
0001729C 6500                       		bcs.s	loc_16352
0001729E 1001                       		move.b	d1,d0
000172A0 7200                       		moveq	#0,d1
000172A2 4A00                       		tst.b	d0
000172A4 6A00                       		bpl.s	loc_16352
000172A6 1228 0039                  		move.b	$39(a0),d1
000172AA 5901                       		subq.b	#4,d1
000172AC                            
000172AC                            loc_16352:
000172AC 1141 0038                  		move.b	d1,$38(a0)
000172B0                            
000172B0                            loc_16356:
000172B0 3172 1000 0034             		move.w	(a2,d1.w),$34(a0)
000172B6 3172 1002 0036             		move.w	2(a2,d1.w),$36(a0)
000172BC 4A41                       		tst.w	d1
000172BE 6600                       		bne.s	loc_1636C
000172C0 117C 0001 001C             		move.b	#1,obAnim(a0)
000172C6                            
000172C6                            loc_1636C:
000172C6 0C41 0008                  		cmpi.w	#8,d1
000172CA 6600                       		bne.s	loc_16378
000172CC 117C 0000 001C             		move.b	#0,obAnim(a0)
000172D2                            
000172D2                            loc_16378:
000172D2 6100 C0E2                  		bsr.w	LCon_ChangeDir
000172D6 6000 0000                  		bra.w	loc_163D8
000172DA                            ; ===========================================================================
000172DA                            
000172DA                            loc_16380:
000172DA 1140 002F                  		move.b	d0,$2F(a0)
000172DE 0240 007F                  		andi.w	#$7F,d0
000172E2 45F8 F7C1                  		lea	(v_obj63).w,a2
000172E6 08F2 0000 0000             		bset	#0,(a2,d0.w)
000172EC 6700                       		beq.s	loc_1639A
000172EE 4EF9 0000 E464             		jmp	(DeleteObject).l
000172F4                            ; ===========================================================================
000172F4                            
000172F4                            loc_1639A:
000172F4 D040                       		add.w	d0,d0
000172F6 0240 001E                  		andi.w	#$1E,d0
000172FA 0640 0000                  		addi.w	#ObjPosSBZPlatform_Index-ObjPos_Index,d0
000172FE 45F9 0000 0000             		lea	(ObjPos_Index).l,a2
00017304 D4F2 0000                  		adda.w	(a2,d0.w),a2
00017308 321A                       		move.w	(a2)+,d1
0001730A 2248                       		movea.l	a0,a1
0001730C 6000                       		bra.s	SpinC_LoadPform
0001730E                            ; ===========================================================================
0001730E                            
0001730E                            SpinC_Loop:
0001730E 4EB9 0000 E8B0             		jsr	(FindFreeObj).l
00017314 6600                       		bne.s	loc_163D0
00017316                            
00017316                            SpinC_LoadPform:
00017316 137C 006F 0000             		move.b	#id_SpinConvey,0(a1)
0001731C 335A 0008                  		move.w	(a2)+,obX(a1)
00017320 335A 000C                  		move.w	(a2)+,obY(a1)
00017324 301A                       		move.w	(a2)+,d0
00017326 1340 0028                  		move.b	d0,obSubtype(a1)
0001732A                            
0001732A                            loc_163D0:
0001732A 51C9 FFE2                  		dbf	d1,SpinC_Loop
0001732E                            
0001732E 588F                       		addq.l	#4,sp
00017330 4E75                       		rts	
00017332                            ; ===========================================================================
00017332                            
00017332                            loc_163D8:	; Routine 2
00017332 43F9 0000 0000             		lea	(Ani_SpinConvey).l,a1
00017338 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
0001733E 4A28 001A                  		tst.b	obFrame(a0)
00017342 6600                       		bne.s	loc_16404
00017344 3F28 0008                  		move.w	obX(a0),-(sp)
00017348 6100 0000                  		bsr.w	loc_16424
0001734C 323C 001B                  		move.w	#$1B,d1
00017350 343C 0007                  		move.w	#7,d2
00017354 3602                       		move.w	d2,d3
00017356 5243                       		addq.w	#1,d3
00017358 381F                       		move.w	(sp)+,d4
0001735A 6000 943C                  		bra.w	SolidObject
0001735E                            ; ===========================================================================
0001735E                            
0001735E                            loc_16404:
0001735E 0828 0003 0022             		btst	#3,obStatus(a0)
00017364 6700                       		beq.s	loc_16420
00017366 43F8 D000                  		lea	(v_objspace).w,a1
0001736A 08A9 0003 0022             		bclr	#3,obStatus(a1)
00017370 08A8 0003 0022             		bclr	#3,obStatus(a0)
00017376 4228 0025                  		clr.b	obSolid(a0)
0001737A                            
0001737A                            loc_16420:
0001737A 6000 0000                  		bra.w	loc_16424
0001737E                            
0001737E                            loc_16424:
0001737E 3028 0008                  		move.w	obX(a0),d0
00017382 B068 0034                  		cmp.w	$34(a0),d0
00017386 6600                       		bne.s	loc_16484
00017388 3028 000C                  		move.w	obY(a0),d0
0001738C B068 0036                  		cmp.w	$36(a0),d0
00017390 6600                       		bne.s	loc_16484
00017392 7200                       		moveq	#0,d1
00017394 1228 0038                  		move.b	$38(a0),d1
00017398 D228 003A                  		add.b	$3A(a0),d1
0001739C B228 0039                  		cmp.b	$39(a0),d1
000173A0 6500                       		bcs.s	loc_16456
000173A2 1001                       		move.b	d1,d0
000173A4 7200                       		moveq	#0,d1
000173A6 4A00                       		tst.b	d0
000173A8 6A00                       		bpl.s	loc_16456
000173AA 1228 0039                  		move.b	$39(a0),d1
000173AE 5901                       		subq.b	#4,d1
000173B0                            
000173B0                            loc_16456:
000173B0 1141 0038                  		move.b	d1,$38(a0)
000173B4 2268 003C                  		movea.l	$3C(a0),a1
000173B8 3171 1000 0034             		move.w	(a1,d1.w),$34(a0)
000173BE 3171 1002 0036             		move.w	2(a1,d1.w),$36(a0)
000173C4 4A41                       		tst.w	d1
000173C6 6600                       		bne.s	loc_16474
000173C8 117C 0001 001C             		move.b	#1,obAnim(a0)
000173CE                            
000173CE                            loc_16474:
000173CE 0C41 0008                  		cmpi.w	#8,d1
000173D2 6600                       		bne.s	loc_16480
000173D4 117C 0000 001C             		move.b	#0,obAnim(a0)
000173DA                            
000173DA                            loc_16480:
000173DA 6100 BFDA                  		bsr.w	LCon_ChangeDir
000173DE                            
000173DE                            loc_16484:
000173DE 4EF9 0000 E402             		jmp	(SpeedToPos).l
000173DE 4EF9 0000 E402             		jmp	(SpeedToPos).l
000173E4                            		include	"_anim\SBZ Spin Platform Conveyor.asm"
000173E4                            ; ---------------------------------------------------------------------------
000173E4                            ; Animation script - platform on conveyor belt (SBZ)
000173E4                            ; ---------------------------------------------------------------------------
000173E4 0000                       Ani_SpinConvey:	dc.w @spin-Ani_SpinConvey
000173E6 0000                       		dc.w @still-Ani_SpinConvey
000173E8 0000 0102 0304 4342 4140+  @spin:		dc.b 0,	0, 1, 2, 3, 4, $43, $42, $41, $40, $61,	$62, $63
000173F5 6423 2221 00FF             		dc.b $64, $23, $22, $21, 0, afEnd
000173FC 00                         		even
000173FC 0F00 FF                    @still:		dc.b $F, 0, afEnd
00017400 00                         		even
00017400 00                         		even
00017400                            
00017400 0000 0000 0000             off_164A6:	dc.w word_164B2-off_164A6, word_164C6-off_164A6, word_164DA-off_164A6
00017406 0000 0000 0000             		dc.w word_164EE-off_164A6, word_16502-off_164A6, word_16516-off_164A6
0001740C 0010 0E80 0E14 0370 0EEF+  word_164B2:	dc.w $10, $E80,	$E14, $370, $EEF, $302,	$EEF, $340, $E14, $3AE
00017420 0010 0F80 0F14 02E0 0FEF+  word_164C6:	dc.w $10, $F80,	$F14, $2E0, $FEF, $272,	$FEF, $2B0, $F14, $31E
00017434 0010 1080 1014 0270 10EF+  word_164DA:	dc.w $10, $1080, $1014,	$270, $10EF, $202, $10EF, $240,	$1014, $2AE
00017448 0010 0F80 0F14 0570 0FEF+  word_164EE:	dc.w $10, $F80,	$F14, $570, $FEF, $502,	$FEF, $540, $F14, $5AE
0001745C 0010 1B80 1B14 0670 1BEF+  word_16502:	dc.w $10, $1B80, $1B14,	$670, $1BEF, $602, $1BEF, $640,	$1B14, $6AE
00017470 0010 1C80 1C14 05E0 1CEF+  word_16516:	dc.w $10, $1C80, $1C14,	$5E0, $1CEF, $572, $1CEF, $5B0,	$1C14, $61E
00017484                            ; ===========================================================================
00017484                            
00017484                            		include	"_incObj\70 Girder Block.asm"
00017484                            ; ---------------------------------------------------------------------------
00017484                            ; Object 70 - large girder block (SBZ)
00017484                            ; ---------------------------------------------------------------------------
00017484                            
00017484                            Girder:
00017484 7000                       		moveq	#0,d0
00017486 1028 0024                  		move.b	obRoutine(a0),d0
0001748A 323B 0000                  		move.w	Gird_Index(pc,d0.w),d1
0001748E 4EFB 1000                  		jmp	Gird_Index(pc,d1.w)
00017492                            ; ===========================================================================
00017492 0000                       Gird_Index:	dc.w Gird_Main-Gird_Index
00017494 0000                       		dc.w Gird_Action-Gird_Index
00017496                            
00017496 =00000016                  gird_height:	equ $16
00017496 =00000032                  gird_origX:	equ $32		; original x-axis position
00017496 =00000030                  gird_origY:	equ $30		; original y-axis position
00017496 =00000034                  gird_time:	equ $34		; duration for movement in a direction
00017496 =00000038                  gird_set:	equ $38		; which movement settings to use (0/8/16/24)
00017496 =0000003A                  gird_delay:	equ $3A		; delay for movement
00017496                            ; ===========================================================================
00017496                            
00017496                            Gird_Main:	; Routine 0
00017496 5428 0024                  		addq.b	#2,obRoutine(a0)
0001749A 217C 0000 0000 0004        		move.l	#Map_Gird,obMap(a0)
000174A2 317C 42F0 0002             		move.w	#$42F0,obGfx(a0)
000174A8 0028 0004 0001             		ori.b	#4,obRender(a0)
000174AE 117C 0004 0018             		move.b	#4,obPriority(a0)
000174B4 117C 0060 0019             		move.b	#$60,obActWid(a0)
000174BA 117C 0018 0016             		move.b	#$18,gird_height(a0)
000174C0 3168 0008 0032             		move.w	obX(a0),gird_origX(a0)
000174C6 3168 000C 0030             		move.w	obY(a0),gird_origY(a0)
000174CC 6100 0000                  		bsr.w	Gird_ChgMove
000174D0                            
000174D0                            Gird_Action:	; Routine 2
000174D0 3F28 0008                  		move.w	obX(a0),-(sp)
000174D4 4A68 003A                  		tst.w	gird_delay(a0)
000174D8 6700                       		beq.s	@beginmove
000174DA 5368 003A                  		subq.w	#1,gird_delay(a0)
000174DE 6600                       		bne.s	@solid
000174E0                            
000174E0                            	@beginmove:
000174E0 4EB9 0000 E402             		jsr	(SpeedToPos).l
000174E6 5368 0034                  		subq.w	#1,gird_time(a0) ; decrement movement duration
000174EA 6600                       		bne.s	@solid		; if time remains, branch
000174EC 6100 0000                  		bsr.w	Gird_ChgMove	; if time is zero, branch
000174F0                            
000174F0                            	@solid:
000174F0 381F                       		move.w	(sp)+,d4
000174F2 4A28 0001                  		tst.b	obRender(a0)
000174F6 6A00                       		bpl.s	@chkdel
000174F8 7200                       		moveq	#0,d1
000174FA 1228 0019                  		move.b	obActWid(a0),d1
000174FE 0641 000B                  		addi.w	#$B,d1
00017502 7400                       		moveq	#0,d2
00017504 1428 0016                  		move.b	gird_height(a0),d2
00017508 3602                       		move.w	d2,d3
0001750A 5243                       		addq.w	#1,d3
0001750C 6100 928A                  		bsr.w	SolidObject
00017510                            
00017510                            	@chkdel:
0001752C 4EF9 0000 E428             		jmp	(DisplaySprite).l
00017532                            
00017532                            	@delete:
00017532 4EF9 0000 E464             		jmp	(DeleteObject).l
00017538                            ; ===========================================================================
00017538                            
00017538                            Gird_ChgMove:
00017538 1028 0038                  		move.b	gird_set(a0),d0
0001753C 0240 0018                  		andi.w	#$18,d0
00017540 43F9 0000 0000             		lea	(@settings).l,a1
00017546 43F1 0000                  		lea	(a1,d0.w),a1
0001754A 3159 0010                  		move.w	(a1)+,obVelX(a0)
0001754E 3159 0012                  		move.w	(a1)+,obVelY(a0)
00017552 3159 0034                  		move.w	(a1)+,gird_time(a0)
00017556 5028 0038                  		addq.b	#8,gird_set(a0)	; use next settings
0001755A 317C 0007 003A             		move.w	#7,gird_delay(a0)
00017560 4E75                       		rts	
00017562                            ; ===========================================================================
00017562                            @settings:	;   x-speed, y-speed, duration
00017562 0100 0000 0060 0000        		dc.w   $100,	 0,   $60,     0 ; right
0001756A 0000 0100 0030 0000        		dc.w	  0,  $100,   $30,     0 ; down
00017572 FF00 FFC0 0060 0000        		dc.w  -$100,  -$40,   $60,     0 ; up/left
0001757A 0000 FF00 0018 0000        		dc.w	  0, -$100,   $18,     0 ; up
0001757A 0000 FF00 0018 0000        		dc.w	  0, -$100,   $18,     0 ; up
00017582                            Map_Gird:	include	"_maps\Girder Block.asm"
00017582                            ; ---------------------------------------------------------------------------
00017582                            ; Sprite mappings - large girder block (SBZ)
00017582                            ; ---------------------------------------------------------------------------
00017582                            Map_Gird_internal:
00017582 0000                       		dc.w @girder-Map_Gird_internal
00017584 0C                         @girder:	dc.b $C
00017585 E80E 0000 A0               		dc.b $E8, $E, 0, 0, $A0
0001758A 000E 1000 A0               		dc.b 0,	$E, $10, 0, $A0
0001758F E80E 0006 C0               		dc.b $E8, $E, 0, 6, $C0
00017594 000E 1006 C0               		dc.b 0,	$E, $10, 6, $C0
00017599 E80E 0006 E0               		dc.b $E8, $E, 0, 6, $E0
0001759E 000E 1006 E0               		dc.b 0,	$E, $10, 6, $E0
000175A3 E80E 0006 00               		dc.b $E8, $E, 0, 6, 0
000175A8 000E 1006 00               		dc.b 0,	$E, $10, 6, 0
000175AD E80E 0006 20               		dc.b $E8, $E, 0, 6, $20
000175B2 000E 1006 20               		dc.b 0,	$E, $10, 6, $20
000175B7 E80E 0006 40               		dc.b $E8, $E, 0, 6, $40
000175BC 000E 1006 40               		dc.b 0,	$E, $10, 6, $40
000175C2 00                         		even
000175C2 00                         		even
000175C2                            		include	"_incObj\72 Teleporter.asm"
000175C2                            ; ---------------------------------------------------------------------------
000175C2                            ; Object 72 - teleporter (SBZ)
000175C2                            ; ---------------------------------------------------------------------------
000175C2                            
000175C2                            Teleport:
000175C2 7000                       		moveq	#0,d0
000175C4 1028 0024                  		move.b	obRoutine(a0),d0
000175C8 323B 0000                  		move.w	Tele_Index(pc,d0.w),d1
000175CC 4EBB 1000                  		jsr	Tele_Index(pc,d1.w)
000175EC 4E75                       		rts	
000175EE                            
000175EE                            	@delete:
000175EE 4EF9 0000 E464             		jmp	(DeleteObject).l
000175F4                            ; ===========================================================================
000175F4 0000                       Tele_Index:	dc.w Tele_Main-Tele_Index
000175F6 0000                       		dc.w loc_166C8-Tele_Index
000175F8 0000                       		dc.w loc_1675E-Tele_Index
000175FA 0000                       		dc.w loc_16798-Tele_Index
000175FC                            ; ===========================================================================
000175FC                            
000175FC                            Tele_Main:	; Routine 0
000175FC 5428 0024                  		addq.b	#2,obRoutine(a0)
00017600 1028 0028                  		move.b	obSubtype(a0),d0
00017604 D040                       		add.w	d0,d0
00017606 0240 001E                  		andi.w	#$1E,d0
0001760A 45FA 0000                  		lea	Tele_Data(pc),a2
0001760E D4F2 0000                  		adda.w	(a2,d0.w),a2
00017612 315A 003A                  		move.w	(a2)+,$3A(a0)
00017616 214A 003C                  		move.l	a2,$3C(a0)
0001761A 315A 0036                  		move.w	(a2)+,$36(a0)
0001761E 315A 0038                  		move.w	(a2)+,$38(a0)
00017622                            
00017622                            loc_166C8:	; Routine 2
00017622 43F8 D000                  		lea	(v_player).w,a1
00017626 3029 0008                  		move.w	obX(a1),d0
0001762A 9068 0008                  		sub.w	obX(a0),d0
0001762E 0828 0000 0022             		btst	#0,obStatus(a0)
00017634 6700                       		beq.s	loc_166E0
00017636 0640 000F                  		addi.w	#$F,d0
0001763A                            
0001763A                            loc_166E0:
0001763A 0C40 0010                  		cmpi.w	#$10,d0
0001763E 6400                       		bcc.s	locret_1675C
00017640 3229 000C                  		move.w	obY(a1),d1
00017644 9268 000C                  		sub.w	obY(a0),d1
00017648 0641 0020                  		addi.w	#$20,d1
0001764C 0C41 0040                  		cmpi.w	#$40,d1
00017650 6400                       		bcc.s	locret_1675C
00017652 4A38 F7C8                  		tst.b	(f_lockmulti).w
00017656 6600                       		bne.s	locret_1675C
00017658 0C28 0007 0028             		cmpi.b	#7,obSubtype(a0)
0001765E 6600                       		bne.s	loc_1670E
00017660 0C78 0032 FE20             		cmpi.w	#50,(v_rings).w
00017666 6500                       		bcs.s	locret_1675C
00017668                            
00017668                            loc_1670E:
00017668 5428 0024                  		addq.b	#2,obRoutine(a0)
0001766C 11FC 0081 F7C8             		move.b	#$81,(f_lockmulti).w ; lock controls
00017672 137C 0002 001C             		move.b	#id_Roll,obAnim(a1) ; use Sonic's rolling animation
00017678 337C 0800 0014             		move.w	#$800,obInertia(a1)
0001767E 337C 0000 0010             		move.w	#0,obVelX(a1)
00017684 337C 0000 0012             		move.w	#0,obVelY(a1)
0001768A 08A8 0005 0022             		bclr	#5,obStatus(a0)
00017690 08A9 0005 0022             		bclr	#5,obStatus(a1)
00017696 08E9 0001 0022             		bset	#1,obStatus(a1)
0001769C 3368 0008 0008             		move.w	obX(a0),obX(a1)
000176A2 3368 000C 000C             		move.w	obY(a0),obY(a1)
000176A8 4228 0032                  		clr.b	$32(a0)
000176B6                            
000176B6                            locret_1675C:
000176B6 4E75                       		rts	
000176B8                            ; ===========================================================================
000176B8                            
000176B8                            loc_1675E:	; Routine 4
000176B8 43F8 D000                  		lea	(v_player).w,a1
000176BC 1028 0032                  		move.b	$32(a0),d0
000176C0 5428 0032                  		addq.b	#2,$32(a0)
000176C4 4EB9 0000 27EC             		jsr	(CalcSine).l
000176CA EA40                       		asr.w	#5,d0
000176CC 3428 000C                  		move.w	obY(a0),d2
000176D0 9440                       		sub.w	d0,d2
000176D2 3342 000C                  		move.w	d2,obY(a1)
000176D6 0C28 0080 0032             		cmpi.b	#$80,$32(a0)
000176DC 6600                       		bne.s	locret_16796
000176DE 6100 0000                  		bsr.w	sub_1681C
000176E2 5428 0024                  		addq.b	#2,obRoutine(a0)
000176F0                            
000176F0                            locret_16796:
000176F0 4E75                       		rts	
000176F2                            ; ===========================================================================
000176F2                            
000176F2                            loc_16798:	; Routine 6
000176F2 588F                       		addq.l	#4,sp
000176F4 43F8 D000                  		lea	(v_player).w,a1
000176F8 5328 002E                  		subq.b	#1,$2E(a0)
000176FC 6A00                       		bpl.s	loc_167DA
000176FE 3368 0036 0008             		move.w	$36(a0),obX(a1)
00017704 3368 0038 000C             		move.w	$38(a0),obY(a1)
0001770A 7200                       		moveq	#0,d1
0001770C 1228 003A                  		move.b	$3A(a0),d1
00017710 5801                       		addq.b	#4,d1
00017712 B228 003B                  		cmp.b	$3B(a0),d1
00017716 6500                       		bcs.s	loc_167C2
00017718 7200                       		moveq	#0,d1
0001771A 6000                       		bra.s	loc_16800
0001771C                            ; ===========================================================================
0001771C                            
0001771C                            loc_167C2:
0001771C 1141 003A                  		move.b	d1,$3A(a0)
00017720 2468 003C                  		movea.l	$3C(a0),a2
00017724 3172 1000 0036             		move.w	(a2,d1.w),$36(a0)
0001772A 3172 1002 0038             		move.w	2(a2,d1.w),$38(a0)
00017730 6000 0000                  		bra.w	sub_1681C
00017734                            ; ===========================================================================
00017734                            
00017734                            loc_167DA:
00017734 2429 0008                  		move.l	obX(a1),d2
00017738 2629 000C                  		move.l	obY(a1),d3
0001773C 3029 0010                  		move.w	obVelX(a1),d0
00017740 48C0                       		ext.l	d0
00017742 E180                       		asl.l	#8,d0
00017744 D480                       		add.l	d0,d2
00017746 3029 0012                  		move.w	obVelY(a1),d0
0001774A 48C0                       		ext.l	d0
0001774C E180                       		asl.l	#8,d0
0001774E D680                       		add.l	d0,d3
00017750 2342 0008                  		move.l	d2,obX(a1)
00017754 2343 000C                  		move.l	d3,obY(a1)
00017758 4E75                       		rts	
0001775A                            ; ===========================================================================
0001775A                            
0001775A                            loc_16800:
0001775A 0269 07FF 000C             		andi.w	#$7FF,obY(a1)
00017760 4228 0024                  		clr.b	obRoutine(a0)
00017764 4238 F7C8                  		clr.b	(f_lockmulti).w
00017768 337C 0000 0010             		move.w	#0,obVelX(a1)
0001776E 337C 0200 0012             		move.w	#$200,obVelY(a1)
00017774 4E75                       		rts	
00017776                            
00017776                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00017776                            
00017776                            
00017776                            sub_1681C:
00017776 7000                       		moveq	#0,d0
00017778 343C 1000                  		move.w	#$1000,d2
0001777C 3028 0036                  		move.w	$36(a0),d0
00017780 9069 0008                  		sub.w	obX(a1),d0
00017784 6C00                       		bge.s	loc_16830
00017786 4440                       		neg.w	d0
00017788 4442                       		neg.w	d2
0001778A                            
0001778A                            loc_16830:
0001778A 7200                       		moveq	#0,d1
0001778C 363C 1000                  		move.w	#$1000,d3
00017790 3228 0038                  		move.w	$38(a0),d1
00017794 9269 000C                  		sub.w	obY(a1),d1
00017798 6C00                       		bge.s	loc_16844
0001779A 4441                       		neg.w	d1
0001779C 4443                       		neg.w	d3
0001779E                            
0001779E                            loc_16844:
0001779E B240                       		cmp.w	d0,d1
000177A0 6500                       		bcs.s	loc_1687A
000177A2 7200                       		moveq	#0,d1
000177A4 3228 0038                  		move.w	$38(a0),d1
000177A8 9269 000C                  		sub.w	obY(a1),d1
000177AC 4841                       		swap	d1
000177AE 83C3                       		divs.w	d3,d1
000177B0 7000                       		moveq	#0,d0
000177B2 3028 0036                  		move.w	$36(a0),d0
000177B6 9069 0008                  		sub.w	obX(a1),d0
000177BA 6700                       		beq.s	loc_16866
000177BC 4840                       		swap	d0
000177BE 81C1                       		divs.w	d1,d0
000177C0                            
000177C0                            loc_16866:
000177C0 3340 0010                  		move.w	d0,obVelX(a1)
000177C4 3343 0012                  		move.w	d3,obVelY(a1)
000177C8 4A41                       		tst.w	d1
000177CA 6A00                       		bpl.s	loc_16874
000177CC 4441                       		neg.w	d1
000177CE                            
000177CE                            loc_16874:
000177CE 3141 002E                  		move.w	d1,$2E(a0)
000177D2 4E75                       		rts	
000177D4                            ; ===========================================================================
000177D4                            
000177D4                            loc_1687A:
000177D4 7000                       		moveq	#0,d0
000177D6 3028 0036                  		move.w	$36(a0),d0
000177DA 9069 0008                  		sub.w	obX(a1),d0
000177DE 4840                       		swap	d0
000177E0 81C2                       		divs.w	d2,d0
000177E2 7200                       		moveq	#0,d1
000177E4 3228 0038                  		move.w	$38(a0),d1
000177E8 9269 000C                  		sub.w	obY(a1),d1
000177EC 6700                       		beq.s	loc_16898
000177EE 4841                       		swap	d1
000177F0 83C0                       		divs.w	d0,d1
000177F2                            
000177F2                            loc_16898:
000177F2 3341 0012                  		move.w	d1,obVelY(a1)
000177F6 3342 0010                  		move.w	d2,obVelX(a1)
000177FA 4A40                       		tst.w	d0
000177FC 6A00                       		bpl.s	loc_168A6
000177FE 4440                       		neg.w	d0
00017800                            
00017800                            loc_168A6:
00017800 3140 002E                  		move.w	d0,$2E(a0)
00017804 4E75                       		rts	
00017806                            ; End of function sub_1681C
00017806                            
00017806                            ; ===========================================================================
00017806 0000 0000 0000             Tele_Data:	dc.w @type00-Tele_Data, @type01-Tele_Data, @type02-Tele_Data
0001780C 0000 0000 0000             		dc.w @type03-Tele_Data, @type04-Tele_Data, @type05-Tele_Data
00017812 0000 0000 0000             		dc.w @type06-Tele_Data, @type07-Tele_Data, @type07-Tele_Data
00017818 0028 1190 0488 114C 04AC   @type00:	dc.w $28,	$1190, $0488, $114C, $04AC
00017822 10C0 04AC 103C 04CC 0FC4+  		dc.w	$10C0, $04AC, $103C, $04CC, $0FC4, $04CC, $0F40, $04AC
00017832 0EF0 04AC 0ECC 04A4 0E94+  		dc.w	$0EF0, $04AC, $0ECC, $04A4, $0E94, $04E0, $0E90, $0588
00017842 0020 0AC0 05B0 0A40 05CC+  @type01:	dc.w $20,	$0AC0, $05B0, $0A40, $05CC, $09C4, $05CC, $093C, $05AC
00017854 08F0 05AC 08CC 05A4 0894+  		dc.w	$08F0, $05AC, $08CC, $05A4, $0894, $05E8, $0890, $0688
00017864 0018 0794 007C 0758 00AC+  @type02:	dc.w $18, $0794, $007C, $0758, $00AC, $06F4, $00AC, $06CC, $00A4
00017876 0694 00E4 0690 0184        		dc.w	$0694, $00E4, $0690, $0184
0001787E 0004 0094 0388             @type03:	dc.w 4,	$0094, $0388
00017884 002C 1394 0370 13D0 03AC+  @type04:	dc.w $2C, $1394, $0370, $13D0, $03AC, $142C, $03AC, $1450, $03A4
00017896 1494 03DC 1494 0474 14CC+  		dc.w	$1494, $03DC, $1494, $0474, $14CC, $04AC, $1530, $04AC, $1550, $04A4
000178AA 1594 04E0 1598 0588        		dc.w	$1594, $04E0, $1598, $0588
000178B2 0004 1298 0688             @type05:	dc.w 4,	$1298, $0688
000178B8 0004 0994 0084             @type06:	dc.w 4, $0994, $0084
000178BE 0004 1794 0788             @type07:	dc.w 4,	$1794, $0788
000178BE 0004 1794 0788             @type07:	dc.w 4,	$1794, $0788
000178C4                            
000178C4                            		include	"_incObj\78 Caterkiller.asm"
000178C4                            ; ---------------------------------------------------------------------------
000178C4                            ; Object 78 - Caterkiller enemy	(MZ, SBZ)
000178C4                            ; ---------------------------------------------------------------------------
000178C4                            
000178C4                            Caterkiller:
000178C4 7000                       		moveq	#0,d0
000178C6 1028 0024                  		move.b	obRoutine(a0),d0
000178CA 323B 0000                  		move.w	Cat_Index(pc,d0.w),d1
000178CE 4EFB 1000                  		jmp	Cat_Index(pc,d1.w)
000178D2                            ; ===========================================================================
000178D2 0000                       Cat_Index:	dc.w Cat_Main-Cat_Index
000178D4 0000                       		dc.w Cat_Head-Cat_Index
000178D6 0000                       		dc.w Cat_BodySeg1-Cat_Index
000178D8 0000                       		dc.w Cat_BodySeg2-Cat_Index
000178DA 0000                       		dc.w Cat_BodySeg1-Cat_Index
000178DC 0000                       		dc.w Cat_Delete-Cat_Index
000178DE 0000                       		dc.w loc_16CC0-Cat_Index
000178E0                            
000178E0 =0000003C                  cat_parent:	equ $3C		; address of parent object
000178E0                            ; ===========================================================================
000178E0                            
000178E0                            locret_16950:
000178E0 4E75                       		rts	
000178E2                            ; ===========================================================================
000178E2                            
000178E2                            Cat_Main:	; Routine 0
000178E2 117C 0007 0016             		move.b	#7,obHeight(a0)
000178E8 117C 0008 0017             		move.b	#8,obWidth(a0)
000178EE 4EB9 0000 E3D6             		jsr	(ObjectFall).l
000178F4 4EB9 0001 5D72             		jsr	(ObjFloorDist).l
000178FA 4A41                       		tst.w	d1
000178FC 6AE2                       		bpl.s	locret_16950
000178FE D368 000C                  		add.w	d1,obY(a0)
00017902 4268 0012                  		clr.w	obVelY(a0)
00017906 5428 0024                  		addq.b	#2,obRoutine(a0)
0001790A 217C 0000 0000 0004        		move.l	#Map_Cat,obMap(a0)
00017912 317C 22B0 0002             		move.w	#$22B0,obGfx(a0)
00017918 0C38 0005 FE10             		cmpi.b	#id_SBZ,(v_zone).w ; if level is SBZ, branch
0001791E 6700                       		beq.s	@isscrapbrain
00017920 317C 24FF 0002             		move.w	#$24FF,obGfx(a0) ; MZ specific code
00017926                            
00017926                            	@isscrapbrain:
00017926 0228 0003 0001             		andi.b	#3,obRender(a0)
0001792C 0028 0004 0001             		ori.b	#4,obRender(a0)
00017932 1168 0001 0022             		move.b	obRender(a0),obStatus(a0)
00017938 117C 0004 0018             		move.b	#4,obPriority(a0)
0001793E 117C 0008 0019             		move.b	#8,obActWid(a0)
00017944 117C 000B 0020             		move.b	#$B,obColType(a0)
0001794A 3428 0008                  		move.w	obX(a0),d2
0001794E 7A0C                       		moveq	#$C,d5
00017950 0828 0000 0022             		btst	#0,obStatus(a0)
00017956 6700                       		beq.s	@noflip
00017958 4445                       		neg.w	d5
0001795A                            
0001795A                            	@noflip:
0001795A 1C3C 0004                  		move.b	#4,d6
0001795E 7600                       		moveq	#0,d3
00017960 7804                       		moveq	#4,d4
00017962 2448                       		movea.l	a0,a2
00017964 7202                       		moveq	#2,d1
00017966                            
00017966                            Cat_Loop:
00017966 4EB9 0000 E8C6             		jsr	(FindNextFreeObj).l
0001796C 6600                       		bne.s	@fail
0001796E 137C 0078 0000             		move.b	#id_Caterkiller,0(a1) ; load body segment object
00017974 1346 0024                  		move.b	d6,obRoutine(a1) ; goto Cat_BodySeg1 or Cat_BodySeg2 next
00017978 5406                       		addq.b	#2,d6		; alternate between the two
0001797A 2368 0004 0004             		move.l	obMap(a0),obMap(a1)
00017980 3368 0002 0002             		move.w	obGfx(a0),obGfx(a1)
00017986 137C 0005 0018             		move.b	#5,obPriority(a1)
0001798C 137C 0008 0019             		move.b	#8,obActWid(a1)
00017992 137C 00CB 0020             		move.b	#$CB,obColType(a1)
00017998 D445                       		add.w	d5,d2
0001799A 3342 0008                  		move.w	d2,obX(a1)
0001799E 3368 000C 000C             		move.w	obY(a0),obY(a1)
000179A4 1368 0022 0022             		move.b	obStatus(a0),obStatus(a1)
000179AA 1368 0022 0001             		move.b	obStatus(a0),obRender(a1)
000179B0 137C 0008 001A             		move.b	#8,obFrame(a1)
000179B6 234A 003C                  		move.l	a2,cat_parent(a1)
000179BA 1344 003C                  		move.b	d4,cat_parent(a1)
000179BE 5804                       		addq.b	#4,d4
000179C0 2449                       		movea.l	a1,a2
000179C2                            
000179C2                            	@fail:
000179C2 51C9 FFA2                  		dbf	d1,Cat_Loop	; repeat sequence 2 more times
000179C6                            
000179C6 117C 0007 002A             		move.b	#7,$2A(a0)
000179CC 4228 003C                  		clr.b	cat_parent(a0)
000179D0                            
000179D0                            Cat_Head:	; Routine 2
000179D0 4A28 0022                  		tst.b	obStatus(a0)
000179D4 6B00 0000                  		bmi.w	loc_16C96
000179D8 7000                       		moveq	#0,d0
000179DA 1028 0025                  		move.b	ob2ndRout(a0),d0
000179DE 323B 0000                  		move.w	Cat_Index2(pc,d0.w),d1
000179E2 4EBB 1000                  		jsr	Cat_Index2(pc,d1.w)
000179E6 1228 002B                  		move.b	$2B(a0),d1
000179EA 6A00                       		bpl.s	@display
000179EC 43F9 0000 0000             		lea	(Ani_Cat).l,a1
000179F2 1028 0026                  		move.b	obAngle(a0),d0
000179F6 0240 007F                  		andi.w	#$7F,d0
000179FA 5828 0026                  		addq.b	#4,obAngle(a0)
000179FE 1031 0000                  		move.b	(a1,d0.w),d0
00017A02 6A00                       		bpl.s	@animate
00017A04 08A8 0007 002B             		bclr	#7,$2B(a0)
00017A0A 6000                       		bra.s	@display
00017A0C                            
00017A0C                            	@animate:
00017A0C 0201 0010                  		andi.b	#$10,d1
00017A10 D001                       		add.b	d1,d0
00017A12 1140 001A                  		move.b	d0,obFrame(a0)
00017A16                            
00017A16                            	@display:
00017A34 4EF9 0000 E428             		jmp	(DisplaySprite).l
00017A3A                            
00017A3A                            	Cat_ChkGone:
00017A3A 45F8 FC00                  		lea	(v_objstate).w,a2
00017A3E 7000                       		moveq	#0,d0
00017A40 1028 0023                  		move.b	obRespawnNo(a0),d0
00017A44 6700                       		beq.s	@delete
00017A46 08B2 0007 0002             		bclr	#7,2(a2,d0.w)
00017A4C                            
00017A4C                            	@delete:
00017A4C 117C 000A 0024             		move.b	#$A,obRoutine(a0)	; goto Cat_Delete next
00017A52 4E75                       		rts	
00017A54                            ; ===========================================================================
00017A54                            
00017A54                            Cat_Delete:	; Routine $A
00017A54 4EF9 0000 E464             		jmp	(DeleteObject).l
00017A5A                            ; ===========================================================================
00017A5A 0000                       Cat_Index2:	dc.w @wait-Cat_Index2
00017A5C 0000                       		dc.w loc_16B02-Cat_Index2
00017A5E                            ; ===========================================================================
00017A5E                            
00017A5E                            @wait:
00017A5E 5328 002A                  		subq.b	#1,$2A(a0)
00017A62 6B00                       		bmi.s	@move
00017A64 4E75                       		rts	
00017A66                            ; ===========================================================================
00017A66                            
00017A66                            @move:
00017A66 5428 0025                  		addq.b	#2,ob2ndRout(a0)
00017A6A 117C 0010 002A             		move.b	#$10,$2A(a0)
00017A70 317C FF40 0010             		move.w	#-$C0,obVelX(a0)
00017A76 317C 0040 0014             		move.w	#$40,obInertia(a0)
00017A7C 0868 0004 002B             		bchg	#4,$2B(a0)
00017A82 6600                       		bne.s	loc_16AFC
00017A84 4268 0010                  		clr.w	obVelX(a0)
00017A88 4468 0014                  		neg.w	obInertia(a0)
00017A8C                            
00017A8C                            loc_16AFC:
00017A8C 08E8 0007 002B             		bset	#7,$2B(a0)
00017A92                            
00017A92                            loc_16B02:
00017A92 5328 002A                  		subq.b	#1,$2A(a0)
00017A96 6B00                       		bmi.s	@loc_16B5E
00017A98 2F28 0008                  		move.l	obX(a0),-(sp)
00017A9C 2428 0008                  		move.l	obX(a0),d2
00017AA0 3028 0010                  		move.w	obVelX(a0),d0
00017AA4 0828 0000 0022             		btst	#0,obStatus(a0)
00017AAA 6700                       		beq.s	@noflip
00017AAC 4440                       		neg.w	d0
00017AAE                            
00017AAE                            	@noflip:
00017AAE 48C0                       		ext.l	d0
00017AB0 E180                       		asl.l	#8,d0
00017AB2 D480                       		add.l	d0,d2
00017AB4 2142 0008                  		move.l	d2,obX(a0)
00017AB8 4EB9 0001 5D72             		jsr	(ObjFloorDist).l
00017ABE 241F                       		move.l	(sp)+,d2
00017AC0 0C41 FFF8                  		cmpi.w	#-8,d1
00017AC4 6D00                       		blt.s	@loc_16B70
00017AC6 0C41 000C                  		cmpi.w	#$C,d1
00017ACA 6C00                       		bge.s	@loc_16B70
00017ACC D368 000C                  		add.w	d1,obY(a0)
00017AD0 4842                       		swap	d2
00017AD2 B468 0008                  		cmp.w	obX(a0),d2
00017AD6 6700                       		beq.s	@notmoving
00017AD8 7000                       		moveq	#0,d0
00017ADA 1028 003C                  		move.b	cat_parent(a0),d0
00017ADE 5228 003C                  		addq.b	#1,cat_parent(a0)
00017AE2 0228 000F 003C             		andi.b	#$F,cat_parent(a0)
00017AE8 1181 002C                  		move.b	d1,$2C(a0,d0.w)
00017AEC                            
00017AEC                            	@notmoving:
00017AEC 4E75                       		rts	
00017AEE                            ; ===========================================================================
00017AEE                            
00017AEE                            @loc_16B5E:
00017AEE 5528 0025                  		subq.b	#2,ob2ndRout(a0)
00017AF2 117C 0007 002A             		move.b	#7,$2A(a0)
00017AF8 317C 0000 0010             		move.w	#0,obVelX(a0)
00017AFE 4E75                       		rts	
00017B00                            ; ===========================================================================
00017B00                            
00017B00                            @loc_16B70:
00017B00 2142 0008                  		move.l	d2,obX(a0)
00017B04 0868 0000 0022             		bchg	#0,obStatus(a0)
00017B0A 1168 0022 0001             		move.b	obStatus(a0),obRender(a0)
00017B10 7000                       		moveq	#0,d0
00017B12 1028 003C                  		move.b	cat_parent(a0),d0
00017B16 11BC 0080 002C             		move.b	#$80,$2C(a0,d0.w)
00017B1C 5228 003C                  		addq.b	#1,cat_parent(a0)
00017B20 0228 000F 003C             		andi.b	#$F,cat_parent(a0)
00017B26 4E75                       		rts	
00017B28                            ; ===========================================================================
00017B28                            
00017B28                            Cat_BodySeg2:	; Routine 6
00017B28 2268 003C                  		movea.l	cat_parent(a0),a1
00017B2C 1169 002B 002B             		move.b	$2B(a1),$2B(a0)
00017B32 6A00                       		bpl.s	Cat_BodySeg1
00017B34 43F9 0000 0000             		lea	(Ani_Cat).l,a1
00017B3A 1028 0026                  		move.b	obAngle(a0),d0
00017B3E 0240 007F                  		andi.w	#$7F,d0
00017B42 5828 0026                  		addq.b	#4,obAngle(a0)
00017B46 4A31 0004                  		tst.b	4(a1,d0.w)
00017B4A 6A00                       		bpl.s	Cat_AniBody
00017B4C 5828 0026                  		addq.b	#4,obAngle(a0)
00017B50                            
00017B50                            Cat_AniBody:
00017B50 1031 0000                  		move.b	(a1,d0.w),d0
00017B54 5000                       		addq.b	#8,d0
00017B56 1140 001A                  		move.b	d0,obFrame(a0)
00017B5A                            
00017B5A                            Cat_BodySeg1:	; Routine 4, 8
00017B5A 2268 003C                  		movea.l	cat_parent(a0),a1
00017B5E 4A28 0022                  		tst.b	obStatus(a0)
00017B62 6B00 0000                  		bmi.w	loc_16C90
00017B66 1169 002B 002B             		move.b	$2B(a1),$2B(a0)
00017B6C 1169 0025 0025             		move.b	ob2ndRout(a1),ob2ndRout(a0)
00017B72 6700 0000                  		beq.w	loc_16C64
00017B76 3169 0014 0014             		move.w	obInertia(a1),obInertia(a0)
00017B7C 3029 0010                  		move.w	obVelX(a1),d0
00017B80 D069 0014                  		add.w	obInertia(a1),d0
00017B84 3140 0010                  		move.w	d0,obVelX(a0)
00017B88 2428 0008                  		move.l	obX(a0),d2
00017B8C 2602                       		move.l	d2,d3
00017B8E 3028 0010                  		move.w	obVelX(a0),d0
00017B92 0828 0000 0022             		btst	#0,obStatus(a0)
00017B98 6700                       		beq.s	loc_16C0C
00017B9A 4440                       		neg.w	d0
00017B9C                            
00017B9C                            loc_16C0C:
00017B9C 48C0                       		ext.l	d0
00017B9E E180                       		asl.l	#8,d0
00017BA0 D480                       		add.l	d0,d2
00017BA2 2142 0008                  		move.l	d2,obX(a0)
00017BA6 4843                       		swap	d3
00017BA8 B668 0008                  		cmp.w	obX(a0),d3
00017BAC 6700                       		beq.s	loc_16C64
00017BAE 7000                       		moveq	#0,d0
00017BB0 1028 003C                  		move.b	cat_parent(a0),d0
00017BB4 1231 002C                  		move.b	$2C(a1,d0.w),d1
00017BB8 0C01 0080                  		cmpi.b	#$80,d1
00017BBC 6600                       		bne.s	loc_16C50
00017BBE 4843                       		swap	d3
00017BC0 2143 0008                  		move.l	d3,obX(a0)
00017BC4 1181 002C                  		move.b	d1,$2C(a0,d0.w)
00017BC8 0868 0000 0022             		bchg	#0,obStatus(a0)
00017BCE 1168 0022 0001             		move.b	obStatus(a0),1(a0)
00017BD4 5228 003C                  		addq.b	#1,cat_parent(a0)
00017BD8 0228 000F 003C             		andi.b	#$F,cat_parent(a0)
00017BDE 6000                       		bra.s	loc_16C64
00017BE0                            ; ===========================================================================
00017BE0                            
00017BE0                            loc_16C50:
00017BE0 4881                       		ext.w	d1
00017BE2 D368 000C                  		add.w	d1,obY(a0)
00017BE6 5228 003C                  		addq.b	#1,cat_parent(a0)
00017BEA 0228 000F 003C             		andi.b	#$F,cat_parent(a0)
00017BF0 1181 002C                  		move.b	d1,$2C(a0,d0.w)
00017BF4                            
00017BF4                            loc_16C64:
00017BF4 0C29 000C 0024             		cmpi.b	#$C,obRoutine(a1)
00017BFA 6700                       		beq.s	loc_16C90
00017BFC 0C29 0027 0000             		cmpi.b	#id_ExplosionItem,0(a1)
00017C02 6700                       		beq.s	loc_16C7C
00017C04 0C29 000A 0024             		cmpi.b	#$A,obRoutine(a1)
00017C0A 6600                       		bne.s	loc_16C82
00017C0C                            
00017C0C                            loc_16C7C:
00017C0C 117C 000A 0024             		move.b	#$A,obRoutine(a0)
00017C12                            
00017C12                            loc_16C82:
00017C12 4EF9 0000 E428             		jmp	(DisplaySprite).l
00017C18                            
00017C18                            ; ===========================================================================
00017C18 FE00 FE80 0180 0200        Cat_FragSpeed:	dc.w -$200, -$180, $180, $200
00017C20                            ; ===========================================================================
00017C20                            
00017C20                            loc_16C90:
00017C20 08E9 0007 0022             		bset	#7,obStatus(a1)
00017C26                            
00017C26                            loc_16C96:
00017C26 7000                       		moveq	#0,d0
00017C28 1028 0024                  		move.b	obRoutine(a0),d0
00017C2C 303B 00E8                  		move.w	Cat_FragSpeed-2(pc,d0.w),d0
00017C30 0828 0000 0022             		btst	#0,obStatus(a0)
00017C36 6700                       		beq.s	loc_16CAA
00017C38 4440                       		neg.w	d0
00017C3A                            
00017C3A                            loc_16CAA:
00017C3A 3140 0010                  		move.w	d0,obVelX(a0)
00017C3E 317C FC00 0012             		move.w	#-$400,obVelY(a0)
00017C44 117C 000C 0024             		move.b	#$C,obRoutine(a0)
00017C4A 0228 00F8 001A             		andi.b	#$F8,obFrame(a0)
00017C50                            
00017C50                            loc_16CC0:	; Routine $C
00017C50 4EB9 0000 E3D6             		jsr	(ObjectFall).l
00017C56 4A68 0012                  		tst.w	obVelY(a0)
00017C5A 6B00                       		bmi.s	loc_16CE0
00017C5C 4EB9 0001 5D72             		jsr	(ObjFloorDist).l
00017C62 4A41                       		tst.w	d1
00017C64 6A00                       		bpl.s	loc_16CE0
00017C66 D368 000C                  		add.w	d1,obY(a0)
00017C6A 317C FC00 0012             		move.w	#-$400,obVelY(a0)
00017C70                            
00017C70                            loc_16CE0:
00017C70 4A28 0001                  		tst.b	obRender(a0)
00017C74 6A00 FDC4                  		bpl.w	Cat_ChkGone
00017C78 4EF9 0000 E428             		jmp	(DisplaySprite).l
00017C78 4EF9 0000 E428             		jmp	(DisplaySprite).l
00017C7E                            		include	"_anim\Caterkiller.asm"
00017C7E                            ; ---------------------------------------------------------------------------
00017C7E                            ; Animation script - Caterkiller enemy (uses non-standard format)
00017C7E                            ; ---------------------------------------------------------------------------
00017C7E 0000 0000 0000 0000 0000+  Ani_Cat:	dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 1
00017C8E 0101 0101 0101 0202 0202+  		dc.b 1,	1, 1, 1, 1, 1, 2, 2, 2,	2, 2, 3, 3, 3, 3, 3
00017C9E 0404 0404 0404 0505 0505+  		dc.b 4,	4, 4, 4, 4, 4, 5, 5, 5,	5, 5, 6, 6, 6, 6, 6
00017CAE 0606 0707 0707 0707 0707+  		dc.b 6,	6, 7, 7, 7, 7, 7, 7, 7,	7, 7, 7, $FF, 7, 7, $FF
00017CBE 0707 0707 0707 0707 0707+  		dc.b 7,	7, 7, 7, 7, 7, 7, 7, 7,	7, 7, 7, 7, 7, 7, 6
00017CCE 0606 0606 0606 0505 0505+  		dc.b 6,	6, 6, 6, 6, 6, 5, 5, 5,	5, 5, 4, 4, 4, 4, 4
00017CDE 0403 0303 0303 0202 0202+  		dc.b 4,	3, 3, 3, 3, 3, 2, 2, 2,	2, 2, 1, 1, 1, 1, 1
00017CEE 0101 0000 0000 0000 0000+  		dc.b 1,	1, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, $FF, 0, 0, $FF
00017CFE                            		even
00017CFE                            		even
00017CFE                            Map_Cat:	include	"_maps\Caterkiller.asm"
00017CFE                            ; ---------------------------------------------------------------------------
00017CFE                            ; Sprite mappings - Caterkiller	enemy (MZ, SBZ)
00017CFE                            ; ---------------------------------------------------------------------------
00017CFE                            Map_Cat_internal:
00017CFE 0000                       		dc.w byte_16D9E-Map_Cat_internal
00017D00 0000                       		dc.w byte_16DA4-Map_Cat_internal
00017D02 0000                       		dc.w byte_16DAA-Map_Cat_internal
00017D04 0000                       		dc.w byte_16DB0-Map_Cat_internal
00017D06 0000                       		dc.w byte_16DB6-Map_Cat_internal
00017D08 0000                       		dc.w byte_16DBC-Map_Cat_internal
00017D0A 0000                       		dc.w byte_16DC2-Map_Cat_internal
00017D0C 0000                       		dc.w byte_16DC8-Map_Cat_internal
00017D0E 0000                       		dc.w byte_16DCE-Map_Cat_internal
00017D10 0000                       		dc.w byte_16DD4-Map_Cat_internal
00017D12 0000                       		dc.w byte_16DDA-Map_Cat_internal
00017D14 0000                       		dc.w byte_16DE0-Map_Cat_internal
00017D16 0000                       		dc.w byte_16DE6-Map_Cat_internal
00017D18 0000                       		dc.w byte_16DEC-Map_Cat_internal
00017D1A 0000                       		dc.w byte_16DF2-Map_Cat_internal
00017D1C 0000                       		dc.w byte_16DF8-Map_Cat_internal
00017D1E 0000                       		dc.w byte_16DFE-Map_Cat_internal
00017D20 0000                       		dc.w byte_16E04-Map_Cat_internal
00017D22 0000                       		dc.w byte_16E0A-Map_Cat_internal
00017D24 0000                       		dc.w byte_16E10-Map_Cat_internal
00017D26 0000                       		dc.w byte_16E16-Map_Cat_internal
00017D28 0000                       		dc.w byte_16E1C-Map_Cat_internal
00017D2A 0000                       		dc.w byte_16E22-Map_Cat_internal
00017D2C 0000                       		dc.w byte_16E28-Map_Cat_internal
00017D2E 01                         byte_16D9E:	dc.b 1
00017D2F F206 0000 F8               		dc.b $F2, 6, 0,	0, $F8
00017D34 01                         byte_16DA4:	dc.b 1
00017D35 F106 0000 F8               		dc.b $F1, 6, 0,	0, $F8
00017D3A 01                         byte_16DAA:	dc.b 1
00017D3B F006 0000 F8               		dc.b $F0, 6, 0,	0, $F8
00017D40 01                         byte_16DB0:	dc.b 1
00017D41 EF06 0000 F8               		dc.b $EF, 6, 0,	0, $F8
00017D46 01                         byte_16DB6:	dc.b 1
00017D47 EE06 0000 F8               		dc.b $EE, 6, 0,	0, $F8
00017D4C 01                         byte_16DBC:	dc.b 1
00017D4D ED06 0000 F8               		dc.b $ED, 6, 0,	0, $F8
00017D52 01                         byte_16DC2:	dc.b 1
00017D53 EC06 0000 F8               		dc.b $EC, 6, 0,	0, $F8
00017D58 01                         byte_16DC8:	dc.b 1
00017D59 EB06 0000 F8               		dc.b $EB, 6, 0,	0, $F8
00017D5E 01                         byte_16DCE:	dc.b 1
00017D5F F805 000C F8               		dc.b $F8, 5, 0,	$C, $F8
00017D64 01                         byte_16DD4:	dc.b 1
00017D65 F705 000C F8               		dc.b $F7, 5, 0,	$C, $F8
00017D6A 01                         byte_16DDA:	dc.b 1
00017D6B F605 000C F8               		dc.b $F6, 5, 0,	$C, $F8
00017D70 01                         byte_16DE0:	dc.b 1
00017D71 F505 000C F8               		dc.b $F5, 5, 0,	$C, $F8
00017D76 01                         byte_16DE6:	dc.b 1
00017D77 F405 000C F8               		dc.b $F4, 5, 0,	$C, $F8
00017D7C 01                         byte_16DEC:	dc.b 1
00017D7D F305 000C F8               		dc.b $F3, 5, 0,	$C, $F8
00017D82 01                         byte_16DF2:	dc.b 1
00017D83 F205 000C F8               		dc.b $F2, 5, 0,	$C, $F8
00017D88 01                         byte_16DF8:	dc.b 1
00017D89 F105 000C F8               		dc.b $F1, 5, 0,	$C, $F8
00017D8E 01                         byte_16DFE:	dc.b 1
00017D8F F206 0006 F8               		dc.b $F2, 6, 0,	6, $F8
00017D94 01                         byte_16E04:	dc.b 1
00017D95 F106 0006 F8               		dc.b $F1, 6, 0,	6, $F8
00017D9A 01                         byte_16E0A:	dc.b 1
00017D9B F006 0006 F8               		dc.b $F0, 6, 0,	6, $F8
00017DA0 01                         byte_16E10:	dc.b 1
00017DA1 EF06 0006 F8               		dc.b $EF, 6, 0,	6, $F8
00017DA6 01                         byte_16E16:	dc.b 1
00017DA7 EE06 0006 F8               		dc.b $EE, 6, 0,	6, $F8
00017DAC 01                         byte_16E1C:	dc.b 1
00017DAD ED06 0006 F8               		dc.b $ED, 6, 0,	6, $F8
00017DB2 01                         byte_16E22:	dc.b 1
00017DB3 EC06 0006 F8               		dc.b $EC, 6, 0,	6, $F8
00017DB8 01                         byte_16E28:	dc.b 1
00017DB9 EB06 0006 F8               		dc.b $EB, 6, 0,	6, $F8
00017DBE                            		even
00017DBE                            		even
00017DBE                            
00017DBE                            		include	"_incObj\79 Lamppost.asm"
00017DBE                            ; ---------------------------------------------------------------------------
00017DBE                            ; Object 79 - lamppost
00017DBE                            ; ---------------------------------------------------------------------------
00017DBE                            
00017DBE                            Lamppost:
00017DBE 7000                       		moveq	#0,d0
00017DC0 1028 0024                  		move.b	obRoutine(a0),d0
00017DC4 323B 0000                  		move.w	Lamp_Index(pc,d0.w),d1
00017DC8 4EBB 1000                  		jsr	Lamp_Index(pc,d1.w)
00017DCC 4EF9 0001 046E             		jmp	(RememberState).l
00017DD2                            ; ===========================================================================
00017DD2 0000                       Lamp_Index:	dc.w Lamp_Main-Lamp_Index
00017DD4 0000                       		dc.w Lamp_Blue-Lamp_Index
00017DD6 0000                       		dc.w Lamp_Finish-Lamp_Index
00017DD8 0000                       		dc.w Lamp_Twirl-Lamp_Index
00017DDA                            
00017DDA =00000030                  lamp_origX:	equ $30		; original x-axis position
00017DDA =00000032                  lamp_origY:	equ $32		; original y-axis position
00017DDA =00000036                  lamp_time:	equ $36		; length of time to twirl the lamp
00017DDA                            ; ===========================================================================
00017DDA                            
00017DDA                            Lamp_Main:	; Routine 0
00017DDA 5428 0024                  		addq.b	#2,obRoutine(a0)
00017DDE 217C 0000 0000 0004        		move.l	#Map_Lamp,obMap(a0)
00017DE6 317C 07A0 0002             		move.w	#$7A0,obGfx(a0)
00017DEC 117C 0004 0001             		move.b	#4,obRender(a0)
00017DF2 117C 0008 0019             		move.b	#8,obActWid(a0)
00017DF8 117C 0005 0018             		move.b	#5,obPriority(a0)
00017DFE 45F8 FC00                  		lea	(v_objstate).w,a2
00017E02 7000                       		moveq	#0,d0
00017E04 1028 0023                  		move.b	obRespawnNo(a0),d0
00017E08 08B2 0007 0002             		bclr	#7,2(a2,d0.w)
00017E0E 0832 0000 0002             		btst	#0,2(a2,d0.w)
00017E14 6600                       		bne.s	@red
00017E16 1238 FE30                  		move.b	(v_lastlamp).w,d1
00017E1A 0201 007F                  		andi.b	#$7F,d1
00017E1E 1428 0028                  		move.b	obSubtype(a0),d2 ; get lamppost number
00017E22 0202 007F                  		andi.b	#$7F,d2
00017E26 B202                       		cmp.b	d2,d1		; is this a "new" lamppost?
00017E28 6500                       		bcs.s	Lamp_Blue	; if yes, branch
00017E2A                            
00017E2A                            @red:
00017E2A 08F2 0000 0002             		bset	#0,2(a2,d0.w)
00017E30 117C 0004 0024             		move.b	#4,obRoutine(a0) ; goto Lamp_Finish next
00017E36 117C 0003 001A             		move.b	#3,obFrame(a0)	; use red lamppost frame
00017E3C 4E75                       		rts	
00017E3E                            ; ===========================================================================
00017E3E                            
00017E3E                            Lamp_Blue:	; Routine 2
00017E3E 4A78 FE08                  		tst.w	(v_debuguse).w	; is debug mode	being used?
00017E42 6600 0000                  		bne.w	@donothing	; if yes, branch
00017E46 4A38 F7C8                  		tst.b	(f_lockmulti).w
00017E4A 6B00 0000                  		bmi.w	@donothing
00017E4E 1238 FE30                  		move.b	(v_lastlamp).w,d1
00017E52 0201 007F                  		andi.b	#$7F,d1
00017E56 1428 0028                  		move.b	obSubtype(a0),d2
00017E5A 0202 007F                  		andi.b	#$7F,d2
00017E5E B202                       		cmp.b	d2,d1		; is this a "new" lamppost?
00017E60 6500                       		bcs.s	@chkhit		; if yes, branch
00017E62 45F8 FC00                  		lea	(v_objstate).w,a2
00017E66 7000                       		moveq	#0,d0
00017E68 1028 0023                  		move.b	obRespawnNo(a0),d0
00017E6C 08F2 0000 0002             		bset	#0,2(a2,d0.w)
00017E72 117C 0004 0024             		move.b	#4,obRoutine(a0)
00017E78 117C 0003 001A             		move.b	#3,obFrame(a0)
00017E7E 6000 0000                  		bra.w	@donothing
00017E82                            ; ===========================================================================
00017E82                            
00017E82                            @chkhit:
00017E82 3038 D008                  		move.w	(v_player+obX).w,d0
00017E86 9068 0008                  		sub.w	obX(a0),d0
00017E8A 5040                       		addq.w	#8,d0
00017E8C 0C40 0010                  		cmpi.w	#$10,d0
00017E90 6400 0000                  		bcc.w	@donothing
00017E94 3038 D00C                  		move.w	(v_player+obY).w,d0
00017E98 9068 000C                  		sub.w	obY(a0),d0
00017E9C 0640 0040                  		addi.w	#$40,d0
00017EA0 0C40 0068                  		cmpi.w	#$68,d0
00017EA4 6400                       		bcc.s	@donothing
00017EA6                            
00017EB0 5428 0024                  		addq.b	#2,obRoutine(a0)
00017EB4 4EB9 0000 E8B0             		jsr	(FindFreeObj).l
00017EBA 6600                       		bne.s	@fail
00017EBC 137C 0079 0000             		move.b	#id_Lamppost,0(a1)	; load twirling	lamp object
00017EC2 137C 0006 0024             		move.b	#6,obRoutine(a1) ; goto Lamp_Twirl next
00017EC8 3368 0008 0030             		move.w	obX(a0),lamp_origX(a1)
00017ECE 3368 000C 0032             		move.w	obY(a0),lamp_origY(a1)
00017ED4 0469 0018 0032             		subi.w	#$18,lamp_origY(a1)
00017EDA 237C 0000 0000 0004        		move.l	#Map_Lamp,obMap(a1)
00017EE2 337C 07A0 0002             		move.w	#$7A0,obGfx(a1)
00017EE8 137C 0004 0001             		move.b	#4,obRender(a1)
00017EEE 137C 0008 0019             		move.b	#8,obActWid(a1)
00017EF4 137C 0004 0018             		move.b	#4,obPriority(a1)
00017EFA 137C 0002 001A             		move.b	#2,obFrame(a1)	; use "ball only" frame
00017F00 337C 0020 0036             		move.w	#$20,lamp_time(a1)
00017F06                            
00017F06                            	@fail:
00017F06 117C 0001 001A             		move.b	#1,obFrame(a0)	; use "post only" frame
00017F0C 6100 0000                  		bsr.w	Lamp_StoreInfo
00017F10 45F8 FC00                  		lea	(v_objstate).w,a2
00017F14 7000                       		moveq	#0,d0
00017F16 1028 0023                  		move.b	obRespawnNo(a0),d0
00017F1A 08F2 0000 0002             		bset	#0,2(a2,d0.w)
00017F20                            
00017F20                            	@donothing:
00017F20 4E75                       		rts	
00017F22                            ; ===========================================================================
00017F22                            
00017F22                            Lamp_Finish:	; Routine 4
00017F22 4E75                       		rts	
00017F24                            ; ===========================================================================
00017F24                            
00017F24                            Lamp_Twirl:	; Routine 6
00017F24 5368 0036                  		subq.w	#1,lamp_time(a0) ; decrement timer
00017F28 6A00                       		bpl.s	@continue	; if time remains, keep twirling
00017F2A 117C 0004 0024             		move.b	#4,obRoutine(a0) ; goto Lamp_Finish next
00017F30                            
00017F30                            	@continue:
00017F30 1028 0026                  		move.b	obAngle(a0),d0
00017F34 0428 0008 0026             		subi.b	#$8,obAngle(a0)
00017F3A 0400 0040                  		subi.b	#$40,d0
00017F3E 4EB9 0000 27EC             		jsr	(CalcSine).l
00017F44 C3FC 0C00                  		muls.w	#$C00,d1
00017F48 4841                       		swap	d1
00017F4A D268 0030                  		add.w	lamp_origX(a0),d1
00017F4E 3141 0008                  		move.w	d1,obX(a0)
00017F52 C1FC 0C00                  		muls.w	#$C00,d0
00017F56 4840                       		swap	d0
00017F58 D068 0032                  		add.w	lamp_origY(a0),d0
00017F5C 3140 000C                  		move.w	d0,obY(a0)
00017F60 4E75                       		rts	
00017F62                            ; ===========================================================================
00017F62                            ; ---------------------------------------------------------------------------
00017F62                            ; Subroutine to	store information when you hit a lamppost
00017F62                            ; ---------------------------------------------------------------------------
00017F62                            
00017F62                            Lamp_StoreInfo:
00017F62 11E8 0028 FE30             		move.b	obSubtype(a0),(v_lastlamp).w 	; lamppost number
00017F68                            	;	move.b	(v_lastlamp).w,($FFFFFE31).w
00017F68 31E8 0008 FE32             		move.w	obX(a0),($FFFFFE32).w		; x-position
00017F6E 31E8 000C FE34             		move.w	obY(a0),($FFFFFE34).w		; y-position
00017F74 31F8 FE20 FE36             		move.w	(v_rings).w,($FFFFFE36).w 	; rings
00017F7A 11F8 FE1B FE54             		move.b	(v_lifecount).w,($FFFFFE54).w 	; lives
00017F80 21F8 FE22 FE38             		move.l	(v_time).w,($FFFFFE38).w 	; time
00017F86 11F8 F742 FE3C             		move.b	(v_dle_routine).w,($FFFFFE3C).w ; routine counter for dynamic level mod
00017F8C 31F8 F72E FE3E             		move.w	(v_limitbtm2).w,($FFFFFE3E).w 	; lower y-boundary of level
00017F92 31F8 F700 FE40             		move.w	(v_screenposx).w,($FFFFFE40).w 	; screen x-position
00017F98 31F8 F704 FE42             		move.w	(v_screenposy).w,($FFFFFE42).w 	; screen y-position
00017F9E 31F8 F708 FE44             		move.w	(v_bgscreenposx).w,($FFFFFE44).w ; bg position
00017FA4 31F8 F70C FE46             		move.w	(v_bgscreenposy).w,($FFFFFE46).w 	; bg position
00017FAA 31F8 F710 FE48             		move.w	(v_bg2screenposx).w,($FFFFFE48).w 	; bg position
00017FB0 31F8 F714 FE4A             		move.w	(v_bg2screenposy).w,($FFFFFE4A).w 	; bg position
00017FB6 31F8 F718 FE4C             		move.w	(v_bg3screenposx).w,($FFFFFE4C).w 	; bg position
00017FBC 31F8 F71C FE4E             		move.w	(v_bg3screenposy).w,($FFFFFE4E).w 	; bg position
00017FC2 31F8 F648 FE50             		move.w	(v_waterpos2).w,($FFFFFE50).w 	; water height
00017FC8 11F8 F64D FE52             		move.b	(v_wtr_routine).w,($FFFFFE52).w ; rountine counter for water
00017FCE 11F8 F64E FE53             		move.b	(f_wtr_state).w,($FFFFFE53).w 	; water direction
00017FD4 4E75                       		rts	
00017FD6                            
00017FD6                            ; ---------------------------------------------------------------------------
00017FD6                            ; Subroutine to	load stored info when you start	a level	from a lamppost
00017FD6                            ; ---------------------------------------------------------------------------
00017FD6                            
00017FD6                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00017FD6                            
00017FD6                            
00017FD6                            Lamp_LoadInfo:
00017FD6 11F8 FE31 FE30             		move.b	($FFFFFE31).w,(v_lastlamp).w
00017FDC 31F8 FE32 D008             		move.w	($FFFFFE32).w,(v_player+obX).w
00017FE2 31F8 FE34 D00C             		move.w	($FFFFFE34).w,(v_player+obY).w
00017FE8 31F8 FE36 FE20             		move.w	($FFFFFE36).w,(v_rings).w
00017FEE 11F8 FE54 FE1B             		move.b	($FFFFFE54).w,(v_lifecount).w
00017FF4 4278 FE20                  		clr.w	(v_rings).w
00017FF8 4238 FE1B                  		clr.b	(v_lifecount).w
00017FFC 21F8 FE38 FE22             		move.l	($FFFFFE38).w,(v_time).w
00018002 11FC 003B FE25             		move.b	#59,(v_timecent).w
00018008 5338 FE24                  		subq.b	#1,(v_timesec).w
0001800C 11F8 FE3C F742             		move.b	($FFFFFE3C).w,(v_dle_routine).w
00018012 11F8 FE52 F64D             		move.b	($FFFFFE52).w,(v_wtr_routine).w
00018018 31F8 FE3E F72E             		move.w	($FFFFFE3E).w,(v_limitbtm2).w
0001801E 31F8 FE3E F726             		move.w	($FFFFFE3E).w,(v_limitbtm1).w
00018024 31F8 FE40 F700             		move.w	($FFFFFE40).w,(v_screenposx).w
0001802A 31F8 FE42 F704             		move.w	($FFFFFE42).w,(v_screenposy).w
00018030 31F8 FE44 F708             		move.w	($FFFFFE44).w,(v_bgscreenposx).w
00018036 31F8 FE46 F70C             		move.w	($FFFFFE46).w,(v_bgscreenposy).w
0001803C 31F8 FE48 F710             		move.w	($FFFFFE48).w,(v_bg2screenposx).w
00018042 31F8 FE4A F714             		move.w	($FFFFFE4A).w,(v_bg2screenposy).w
00018048 31F8 FE4C F718             		move.w	($FFFFFE4C).w,(v_bg3screenposx).w
0001804E 31F8 FE4E F71C             		move.w	($FFFFFE4E).w,(v_bg3screenposy).w
00018054 0C38 0001 FE10             		cmpi.b	#1,(v_zone).w	; is this Labyrinth Zone?
0001805A 6600                       		bne.s	@notlabyrinth	; if not, branch
0001805C                            
0001805C 31F8 FE50 F648             		move.w	($FFFFFE50).w,(v_waterpos2).w
00018062 11F8 FE52 F64D             		move.b	($FFFFFE52).w,(v_wtr_routine).w
00018068 11F8 FE53 F64E             		move.b	($FFFFFE53).w,(f_wtr_state).w
0001806E                            
0001806E                            	@notlabyrinth:
0001806E 4A38 FE30                  		tst.b	(v_lastlamp).w
00018072 6A00                       		bpl.s	locret_170F6
00018074 3038 FE32                  		move.w	($FFFFFE32).w,d0
00018078 0440 00A0                  		subi.w	#$A0,d0
0001807C 31C0 F728                  		move.w	d0,(v_limitleft2).w
00018080                            
00018080                            locret_170F6:
00018080 4E75                       		rts	
00018080 4E75                       		rts	
00018082                            Map_Lamp:	include	"_maps\Lamppost.asm"
00018082                            ; ================================================================================
00018082                            ; Sprite Mappings - generated by Flex 2 Wed May 05 2021 14:04:12 GMT-0400 (Eastern Daylight Time)
00018082                            ; ================================================================================
00018082                            
00018082                            DATA5J5W2C056S5:
00018082 0000 0000                  	dc.w DATA5J5W2C056S5_0-DATA5J5W2C056S5, DATA5J5W2C056S5_1-DATA5J5W2C056S5
00018086 0000 0000                  	dc.w DATA5J5W2C056S5_2-DATA5J5W2C056S5, DATA5J5W2C056S5_3-DATA5J5W2C056S5
0001808A 06                         DATA5J5W2C056S5_0: dc.b $6
0001808B E401 0000 F8               	dc.b $E4, $1, $0, $0, $F8
00018090 E401 0800 00               	dc.b $E4, $1, $8, $0, $0
00018095 F403 2002 F8               	dc.b $F4, $3, $20, $2, $F8
0001809A F403 2802 00               	dc.b $F4, $3, $28, $2, $0
0001809F D401 0006 F8               	dc.b $D4, $1, $0, $6, $F8
000180A4 D401 0806 00               	dc.b $D4, $1, $8, $6, $0
000180A9 04                         DATA5J5W2C056S5_1: dc.b $4
000180AA E401 0000 F8               	dc.b $E4, $1, $0, $0, $F8
000180AF E401 0800 00               	dc.b $E4, $1, $8, $0, $0
000180B4 F403 2002 F8               	dc.b $F4, $3, $20, $2, $F8
000180B9 F403 2802 00               	dc.b $F4, $3, $28, $2, $0
000180BE 02                         DATA5J5W2C056S5_2: dc.b $2
000180BF F801 0006 F8               	dc.b $F8, $1, $0, $6, $F8
000180C4 F801 0806 00               	dc.b $F8, $1, $8, $6, $0
000180C9 06                         DATA5J5W2C056S5_3: dc.b $6
000180CA E401 0000 F8               	dc.b $E4, $1, $0, $0, $F8
000180CF E401 0800 00               	dc.b $E4, $1, $8, $0, $0
000180D4 F403 2002 F8               	dc.b $F4, $3, $20, $2, $F8
000180D9 F403 2802 00               	dc.b $F4, $3, $28, $2, $0
000180DE D401 0008 F8               	dc.b $D4, $1, $0, $8, $F8
000180E3 D401 0808 00               	dc.b $D4, $1, $8, $8, $0
000180E8                            	even
000180E8                            	even
000180E8                            		include	"_incObj\7D Hidden Bonuses.asm"
000180E8                            ; ---------------------------------------------------------------------------
000180E8                            ; Object 7D - hidden points at the end of a level
000180E8                            ; ---------------------------------------------------------------------------
000180E8                            
000180E8                            HiddenBonus:
000180E8 7000                       		moveq	#0,d0
000180EA 1028 0024                  		move.b	obRoutine(a0),d0
000180EE 323B 0000                  		move.w	Bonus_Index(pc,d0.w),d1
000180F2 4EFB 1000                  		jmp	Bonus_Index(pc,d1.w)
000180F6                            ; ===========================================================================
000180F6 0000                       Bonus_Index:	dc.w Bonus_Main-Bonus_Index
000180F8 0000                       		dc.w Bonus_Display-Bonus_Index
000180FA                            
000180FA =00000030                  bonus_timelen:	equ $30		; length of time to display bonus sprites
000180FA                            ; ===========================================================================
000180FA                            
000180FA                            Bonus_Main:	; Routine 0
000180FA 7410                       		moveq	#$10,d2
000180FC 3602                       		move.w	d2,d3
000180FE D643                       		add.w	d3,d3
00018100 43F8 D000                  		lea	(v_player).w,a1
00018104 3029 0008                  		move.w	obX(a1),d0
00018108 9068 0008                  		sub.w	obX(a0),d0
0001810C D042                       		add.w	d2,d0
0001810E B043                       		cmp.w	d3,d0
00018110 6400                       		bcc.s	@chkdel
00018112 3229 000C                  		move.w	obY(a1),d1
00018116 9268 000C                  		sub.w	obY(a0),d1
0001811A D242                       		add.w	d2,d1
0001811C B243                       		cmp.w	d3,d1
0001811E 6400                       		bcc.s	@chkdel
00018120 4A78 FE08                  		tst.w	(v_debuguse).w
00018124 6600                       		bne.s	@chkdel
00018126 4A38 F7CD                  		tst.b	(f_bigring).w
0001812A 6600                       		bne.s	@chkdel
0001812C 5428 0024                  		addq.b	#2,obRoutine(a0)
00018130 217C 0000 0000 0004        		move.l	#Map_Bonus,obMap(a0)
00018138 317C 84B6 0002             		move.w	#$84B6,obGfx(a0)
0001813E 0028 0004 0001             		ori.b	#4,obRender(a0)
00018144 117C 0000 0018             		move.b	#0,obPriority(a0)
0001814A 117C 0010 0019             		move.b	#$10,obActWid(a0)
00018150 1168 0028 001A             		move.b	obSubtype(a0),obFrame(a0)
00018156 317C 0077 0030             		move.w	#119,bonus_timelen(a0) ; set display time to 2 seconds
00018166 7000                       		moveq	#0,d0
00018168 1028 0028                  		move.b	obSubtype(a0),d0
0001816C D040                       		add.w	d0,d0
0001816E 303B 0000                  		move.w	@points(pc,d0.w),d0 ; load bonus points array
00018172 4EB9 0000 0000             		jsr	(AddPoints).l
00018178                            
00018178                            	@chkdel:
00018194 4E75                       		rts	
00018196                            
00018196                            	@delete:
00018196 4EF9 0000 E464             		jmp	(DeleteObject).l
0001819C                            
0001819C                            ; ===========================================================================
0001819C 0000                       @points:	dc.w 0			; Bonus	points array
0001819E 03E8                       		dc.w 1000
000181A0 0064                       		dc.w 100
000181A2 0001                       		dc.w 1
000181A4                            ; ===========================================================================
000181A4                            
000181A4                            Bonus_Display:	; Routine 2
000181A4 5368 0030                  		subq.w	#1,bonus_timelen(a0) ; decrement display time
000181A8 6B00                       		bmi.s	Bonus_Display_Delete		; if time is zero, branch
000181C6 4EF9 0000 E428             		jmp	(DisplaySprite).l
000181CC                            
000181CC                            Bonus_Display_Delete:	
000181CC 4EF9 0000 E464             		jmp	(DeleteObject).l
000181CC 4EF9 0000 E464             		jmp	(DeleteObject).l
000181D2                            Map_Bonus:	include	"_maps\Hidden Bonuses.asm"
000181D2                            ; ---------------------------------------------------------------------------
000181D2                            ; Sprite mappings - hidden points at the end of	a level
000181D2                            ; ---------------------------------------------------------------------------
000181D2                            Map_Bonus_internal:
000181D2 0000                       		dc.w @blank-Map_Bonus_internal
000181D4 0000                       		dc.w @10000-Map_Bonus_internal
000181D6 0000                       		dc.w @1000-Map_Bonus_internal
000181D8 0000                       		dc.w @100-Map_Bonus_internal
000181DA 00                         @blank:		dc.b 0
000181DB 01                         @10000:		dc.b 1
000181DC F40E 0000 F0               		dc.b $F4, $E, 0, 0, $F0
000181E1 01                         @1000:		dc.b 1
000181E2 F40E 000C F0               		dc.b $F4, $E, 0, $C, $F0
000181E7 01                         @100:		dc.b 1
000181E8 F40E 0018 F0               		dc.b $F4, $E, 0, $18, $F0
000181EE 00                         		even
000181EE 00                         		even
000181EE                            
000181EE                            		include	"_incObj\8A Credits.asm"
000181EE                            ; ---------------------------------------------------------------------------
000181EE                            ; Object 8A - "SONIC TEAM PRESENTS" and	credits
000181EE                            ; ---------------------------------------------------------------------------
000181EE                            
000181EE                            CreditsText:
000181EE 7000                       		moveq	#0,d0
000181F0 1028 0024                  		move.b	obRoutine(a0),d0
000181F4 323B 0000                  		move.w	Cred_Index(pc,d0.w),d1
000181F8 4EFB 1000                  		jmp	Cred_Index(pc,d1.w)
000181FC                            ; ===========================================================================
000181FC 0000                       Cred_Index:	dc.w Cred_Main-Cred_Index
000181FE 0000                       		dc.w Cred_Display-Cred_Index
00018200                            ; ===========================================================================
00018200                            
00018200                            Cred_Main:	; Routine 0
00018200 5428 0024                  		addq.b	#2,obRoutine(a0)
00018204 317C 0120 0008             		move.w	#$120,obX(a0)
0001820A 317C 00F0 000A             		move.w	#$F0,obScreenY(a0)
00018210 217C 0000 0000 0004        		move.l	#Map_Cred,obMap(a0)
00018218 317C 05A0 0002             		move.w	#$5A0,obGfx(a0)
0001821E 3038 FFF4                  		move.w	(v_creditsnum).w,d0 ; load credits index number
00018222 1140 001A                  		move.b	d0,obFrame(a0)	; display appropriate sprite
00018226 117C 0000 0001             		move.b	#0,obRender(a0)
0001822C 117C 0000 0018             		move.b	#0,obPriority(a0)
00018232                            
00018232 0C38 0000 F600             		cmpi.b	#id_Title,(v_gamemode).w ; is the mode #4 (title screen)?
00018238 6600                       		bne.s	Cred_Display	; if not, branch
0001823A                            
0001823A 317C 00A6 0002             		move.w	#$A6,obGfx(a0)
00018240 117C 000A 001A             		move.b	#$A,obFrame(a0)	; display "SONIC TEAM PRESENTS"
00018246 4A38 FFE3                  		tst.b	(f_creditscheat).w ; is hidden credits cheat on?
0001824A 6700                       		beq.s	Cred_Display	; if not, branch
0001824C 0C38 0072 F604             		cmpi.b	#btnABC+btnDn,(v_jpadhold1).w ; is A+B+C+Down being pressed? ($72)
00018252 6600                       		bne.s	Cred_Display	; if not, branch
00018254 31FC 0EEE FBC0             		move.w	#cWhite,(v_pal_dry_dup+$40).w ; 3rd palette, 1st entry = white
0001825A 31FC 0880 FBC2             		move.w	#$880,(v_pal_dry_dup+$42).w ; 3rd palette, 2nd entry = cyan
00018260 4EF9 0000 E464             		jmp	(DeleteObject).l
00018266                            ; ===========================================================================
00018266                            
00018266                            Cred_Display:	; Routine 2
00018266 4EF9 0000 E428             		jmp	DisplaySprite
00018266 4EF9 0000 E428             		jmp	DisplaySprite
0001826C                            Map_Cred:	include	"_maps\Credits.asm"
0001826C                            ; ---------------------------------------------------------------------------
0001826C                            ; Sprite mappings - "SONIC TEAM	PRESENTS" and credits
0001826C                            ; ---------------------------------------------------------------------------
0001826C                            Map_Cred_internal:
0001826C 0000                       		dc.w @staff-Map_Cred_internal
0001826E 0000                       		dc.w @gameplan-Map_Cred_internal
00018270 0000                       		dc.w @program-Map_Cred_internal
00018272 0000                       		dc.w @character-Map_Cred_internal
00018274 0000                       		dc.w @design-Map_Cred_internal
00018276 0000                       		dc.w @soundproduce-Map_Cred_internal
00018278 0000                       		dc.w @soundprogram-Map_Cred_internal
0001827A 0000                       		dc.w @thanks-Map_Cred_internal
0001827C 0000                       		dc.w @presentedby-Map_Cred_internal
0001827E 0000                       		dc.w @tryagain-Map_Cred_internal
00018280 0000                       		dc.w @sonicteam-Map_Cred_internal
00018282 0E                         @staff:		dc.b $E			 ; SONIC TEAM STAFF
00018283 F805 002E 88               		dc.b $F8, 5, 0,	$2E, $88
00018288 F805 0026 98               		dc.b $F8, 5, 0,	$26, $98
0001828D F805 001A A8               		dc.b $F8, 5, 0,	$1A, $A8
00018292 F801 0046 B8               		dc.b $F8, 1, 0,	$46, $B8
00018297 F805 001E C0               		dc.b $F8, 5, 0,	$1E, $C0
0001829C F805 003E D8               		dc.b $F8, 5, 0,	$3E, $D8
000182A1 F805 000E E8               		dc.b $F8, 5, 0,	$E, $E8
000182A6 F805 0004 F8               		dc.b $F8, 5, 0,	4, $F8
000182AB F809 0008 08               		dc.b $F8, 9, 0,	8, 8
000182B0 F805 002E 28               		dc.b $F8, 5, 0,	$2E, $28
000182B5 F805 003E 38               		dc.b $F8, 5, 0,	$3E, $38
000182BA F805 0004 48               		dc.b $F8, 5, 0,	4, $48
000182BF F805 005C 58               		dc.b $F8, 5, 0,	$5C, $58
000182C4 F805 005C 68               		dc.b $F8, 5, 0,	$5C, $68
000182C9 10                         @gameplan:	dc.b $10		; GAME PLAN CAROL YAS
000182CA D805 0000 80               		dc.b $D8, 5, 0,	0, $80
000182CF D805 0004 90               		dc.b $D8, 5, 0,	4, $90
000182D4 D809 0008 A0               		dc.b $D8, 9, 0,	8, $A0
000182D9 D805 000E B4               		dc.b $D8, 5, 0,	$E, $B4
000182DE D805 0012 D0               		dc.b $D8, 5, 0,	$12, $D0
000182E3 D805 0016 E0               		dc.b $D8, 5, 0,	$16, $E0
000182E8 D805 0004 F0               		dc.b $D8, 5, 0,	4, $F0
000182ED D805 001A 00               		dc.b $D8, 5, 0,	$1A, 0
000182F2 0805 001E C8               		dc.b 8,	5, 0, $1E, $C8
000182F7 0805 0004 D8               		dc.b 8,	5, 0, 4, $D8
000182FC 0805 0022 E8               		dc.b 8,	5, 0, $22, $E8
00018301 0805 0026 F8               		dc.b 8,	5, 0, $26, $F8
00018306 0805 0016 08               		dc.b 8,	5, 0, $16, 8
0001830B 0805 002A 20               		dc.b 8,	5, 0, $2A, $20
00018310 0805 0004 30               		dc.b 8,	5, 0, 4, $30
00018315 0805 002E 44               		dc.b 8,	5, 0, $2E, $44
0001831A 0A                         @program:	dc.b $A			 ; PROGRAM YU 2
0001831B D805 0012 80               		dc.b $D8, 5, 0,	$12, $80
00018320 D805 0022 90               		dc.b $D8, 5, 0,	$22, $90
00018325 D805 0026 A0               		dc.b $D8, 5, 0,	$26, $A0
0001832A D805 0000 B0               		dc.b $D8, 5, 0,	0, $B0
0001832F D805 0022 C0               		dc.b $D8, 5, 0,	$22, $C0
00018334 D805 0004 D0               		dc.b $D8, 5, 0,	4, $D0
00018339 D809 0008 E0               		dc.b $D8, 9, 0,	8, $E0
0001833E 0805 002A E8               		dc.b 8,	5, 0, $2A, $E8
00018343 0805 0032 F8               		dc.b 8,	5, 0, $32, $F8
00018348 0805 0036 08               		dc.b 8,	5, 0, $36, 8
0001834D 18                         @character:	dc.b $18		 ; CHARACTER DESIGN BIGISLAND
0001834E D805 001E 88               		dc.b $D8, 5, 0,	$1E, $88
00018353 D805 003A 98               		dc.b $D8, 5, 0,	$3A, $98
00018358 D805 0004 A8               		dc.b $D8, 5, 0,	4, $A8
0001835D D805 0022 B8               		dc.b $D8, 5, 0,	$22, $B8
00018362 D805 0004 C8               		dc.b $D8, 5, 0,	4, $C8
00018367 D805 001E D8               		dc.b $D8, 5, 0,	$1E, $D8
0001836C D805 003E E8               		dc.b $D8, 5, 0,	$3E, $E8
00018371 D805 000E F8               		dc.b $D8, 5, 0,	$E, $F8
00018376 D805 0022 08               		dc.b $D8, 5, 0,	$22, 8
0001837B D805 0042 20               		dc.b $D8, 5, 0,	$42, $20
00018380 D805 000E 30               		dc.b $D8, 5, 0,	$E, $30
00018385 D805 002E 40               		dc.b $D8, 5, 0,	$2E, $40
0001838A D801 0046 50               		dc.b $D8, 1, 0,	$46, $50
0001838F D805 0000 58               		dc.b $D8, 5, 0,	0, $58
00018394 D805 001A 68               		dc.b $D8, 5, 0,	$1A, $68
00018399 0805 0048 C0               		dc.b 8,	5, 0, $48, $C0
0001839E 0801 0046 D0               		dc.b 8,	1, 0, $46, $D0
000183A3 0805 0000 D8               		dc.b 8,	5, 0, 0, $D8
000183A8 0801 0046 E8               		dc.b 8,	1, 0, $46, $E8
000183AD 0805 002E F0               		dc.b 8,	5, 0, $2E, $F0
000183B2 0805 0016 00               		dc.b 8,	5, 0, $16, 0
000183B7 0805 0004 10               		dc.b 8,	5, 0, 4, $10
000183BC 0805 001A 20               		dc.b 8,	5, 0, $1A, $20
000183C1 0805 0042 30               		dc.b 8,	5, 0, $42, $30
000183C6 14                         @design:	dc.b $14		 ; DESIGN JINYA	PHENIX RIE
000183C7 D005 0042 A0               		dc.b $D0, 5, 0,	$42, $A0
000183CC D005 000E B0               		dc.b $D0, 5, 0,	$E, $B0
000183D1 D005 002E C0               		dc.b $D0, 5, 0,	$2E, $C0
000183D6 D001 0046 D0               		dc.b $D0, 1, 0,	$46, $D0
000183DB D005 0000 D8               		dc.b $D0, 5, 0,	0, $D8
000183E0 D005 001A E8               		dc.b $D0, 5, 0,	$1A, $E8
000183E5 0005 004C E8               		dc.b 0,	5, 0, $4C, $E8
000183EA 0001 0046 F8               		dc.b 0,	1, 0, $46, $F8
000183EF 0005 001A 04               		dc.b 0,	5, 0, $1A, 4
000183F4 0005 002A 14               		dc.b 0,	5, 0, $2A, $14
000183F9 0005 0004 24               		dc.b 0,	5, 0, 4, $24
000183FE 2005 0012 D0               		dc.b $20, 5, 0,	$12, $D0
00018403 2005 003A E0               		dc.b $20, 5, 0,	$3A, $E0
00018408 2005 000E F0               		dc.b $20, 5, 0,	$E, $F0
0001840D 2005 001A 00               		dc.b $20, 5, 0,	$1A, 0
00018412 2001 0046 10               		dc.b $20, 1, 0,	$46, $10
00018417 2005 0050 18               		dc.b $20, 5, 0,	$50, $18
0001841C 2005 0022 30               		dc.b $20, 5, 0,	$22, $30
00018421 2001 0046 40               		dc.b $20, 1, 0,	$46, $40
00018426 2005 000E 48               		dc.b $20, 5, 0,	$E, $48
0001842B 1A                         @soundproduce:	dc.b $1A		 ; SOUND PRODUCE MASATO	NAKAMURA
0001842C D805 002E 98               		dc.b $D8, 5, 0,	$2E, $98
00018431 D805 0026 A8               		dc.b $D8, 5, 0,	$26, $A8
00018436 D805 0032 B8               		dc.b $D8, 5, 0,	$32, $B8
0001843B D805 001A C8               		dc.b $D8, 5, 0,	$1A, $C8
00018440 D805 0054 D8               		dc.b $D8, 5, 0,	$54, $D8
00018445 D805 0012 F8               		dc.b $D8, 5, 0,	$12, $F8
0001844A D805 0022 08               		dc.b $D8, 5, 0,	$22, 8
0001844F D805 0026 18               		dc.b $D8, 5, 0,	$26, $18
00018454 D805 0042 28               		dc.b $D8, 5, 0,	$42, $28
00018459 D805 0032 38               		dc.b $D8, 5, 0,	$32, $38
0001845E D805 001E 48               		dc.b $D8, 5, 0,	$1E, $48
00018463 D805 000E 58               		dc.b $D8, 5, 0,	$E, $58
00018468 0809 0008 88               		dc.b 8,	9, 0, 8, $88
0001846D 0805 0004 9C               		dc.b 8,	5, 0, 4, $9C
00018472 0805 002E AC               		dc.b 8,	5, 0, $2E, $AC
00018477 0805 0004 BC               		dc.b 8,	5, 0, 4, $BC
0001847C 0805 003E CC               		dc.b 8,	5, 0, $3E, $CC
00018481 0805 0026 DC               		dc.b 8,	5, 0, $26, $DC
00018486 0805 001A F8               		dc.b 8,	5, 0, $1A, $F8
0001848B 0805 0004 08               		dc.b 8,	5, 0, 4, 8
00018490 0805 0058 18               		dc.b 8,	5, 0, $58, $18
00018495 0805 0004 28               		dc.b 8,	5, 0, 4, $28
0001849A 0809 0008 38               		dc.b 8,	9, 0, 8, $38
0001849F 0805 0032 4C               		dc.b 8,	5, 0, $32, $4C
000184A4 0805 0022 5C               		dc.b 8,	5, 0, $22, $5C
000184A9 0805 0004 6C               		dc.b 8,	5, 0, 4, $6C
000184AE 17                         @soundprogram:	dc.b $17		 ; SOUND PROGRAM JIMITA	MACKY
000184AF D005 002E 98               		dc.b $D0, 5, 0,	$2E, $98
000184B4 D005 0026 A8               		dc.b $D0, 5, 0,	$26, $A8
000184B9 D005 0032 B8               		dc.b $D0, 5, 0,	$32, $B8
000184BE D005 001A C8               		dc.b $D0, 5, 0,	$1A, $C8
000184C3 D005 0054 D8               		dc.b $D0, 5, 0,	$54, $D8
000184C8 D005 0012 F8               		dc.b $D0, 5, 0,	$12, $F8
000184CD D005 0022 08               		dc.b $D0, 5, 0,	$22, 8
000184D2 D005 0026 18               		dc.b $D0, 5, 0,	$26, $18
000184D7 D005 0000 28               		dc.b $D0, 5, 0,	0, $28
000184DC D005 0022 38               		dc.b $D0, 5, 0,	$22, $38
000184E1 D005 0004 48               		dc.b $D0, 5, 0,	4, $48
000184E6 D009 0008 58               		dc.b $D0, 9, 0,	8, $58
000184EB 0005 004C D0               		dc.b 0,	5, 0, $4C, $D0
000184F0 0001 0046 E0               		dc.b 0,	1, 0, $46, $E0
000184F5 0009 0008 E8               		dc.b 0,	9, 0, 8, $E8
000184FA 0001 0046 FC               		dc.b 0,	1, 0, $46, $FC
000184FF 0005 003E 04               		dc.b 0,	5, 0, $3E, 4
00018504 0005 0004 14               		dc.b 0,	5, 0, 4, $14
00018509 2009 0008 D0               		dc.b $20, 9, 0,	8, $D0
0001850E 2005 0004 E4               		dc.b $20, 5, 0,	4, $E4
00018513 2005 001E F4               		dc.b $20, 5, 0,	$1E, $F4
00018518 2005 0058 04               		dc.b $20, 5, 0,	$58, 4
0001851D 2005 002A 14               		dc.b $20, 5, 0,	$2A, $14
00018522 1F                         @thanks:	dc.b $1F		 ; SPECIAL THANKS FUJIO	MINEGISHI PAPA
00018523 D805 002E 80               		dc.b $D8, 5, 0,	$2E, $80
00018528 D805 0012 90               		dc.b $D8, 5, 0,	$12, $90
0001852D D805 000E A0               		dc.b $D8, 5, 0,	$E, $A0
00018532 D805 001E B0               		dc.b $D8, 5, 0,	$1E, $B0
00018537 D801 0046 C0               		dc.b $D8, 1, 0,	$46, $C0
0001853C D805 0004 C8               		dc.b $D8, 5, 0,	4, $C8
00018541 D805 0016 D8               		dc.b $D8, 5, 0,	$16, $D8
00018546 D805 003E F8               		dc.b $D8, 5, 0,	$3E, $F8
0001854B D805 003A 08               		dc.b $D8, 5, 0,	$3A, 8
00018550 D805 0004 18               		dc.b $D8, 5, 0,	4, $18
00018555 D805 001A 28               		dc.b $D8, 5, 0,	$1A, $28
0001855A D805 0058 38               		dc.b $D8, 5, 0,	$58, $38
0001855F D805 002E 48               		dc.b $D8, 5, 0,	$2E, $48
00018564 0005 005C B0               		dc.b 0,	5, 0, $5C, $B0
00018569 0005 0032 C0               		dc.b 0,	5, 0, $32, $C0
0001856E 0005 004C D0               		dc.b 0,	5, 0, $4C, $D0
00018573 0001 0046 E0               		dc.b 0,	1, 0, $46, $E0
00018578 0005 0026 E8               		dc.b 0,	5, 0, $26, $E8
0001857D 0009 0008 00               		dc.b 0,	9, 0, 8, 0
00018582 0001 0046 14               		dc.b 0,	1, 0, $46, $14
00018587 0005 001A 1C               		dc.b 0,	5, 0, $1A, $1C
0001858C 0005 000E 2C               		dc.b 0,	5, 0, $E, $2C
00018591 0005 0000 3C               		dc.b 0,	5, 0, 0, $3C
00018596 0001 0046 4C               		dc.b 0,	1, 0, $46, $4C
0001859B 0005 002E 54               		dc.b 0,	5, 0, $2E, $54
000185A0 0005 003A 64               		dc.b 0,	5, 0, $3A, $64
000185A5 0001 0046 74               		dc.b 0,	1, 0, $46, $74
000185AA 2005 0012 F8               		dc.b $20, 5, 0,	$12, $F8
000185AF 2005 0004 08               		dc.b $20, 5, 0,	4, 8
000185B4 2005 0012 18               		dc.b $20, 5, 0,	$12, $18
000185B9 2005 0004 28               		dc.b $20, 5, 0,	4, $28
000185BE 0F                         @presentedby:	dc.b $F			 ; PRESENTED BY	SEGA
000185BF F805 0012 80               		dc.b $F8, 5, 0,	$12, $80
000185C4 F805 0022 90               		dc.b $F8, 5, 0,	$22, $90
000185C9 F805 000E A0               		dc.b $F8, 5, 0,	$E, $A0
000185CE F805 002E B0               		dc.b $F8, 5, 0,	$2E, $B0
000185D3 F805 000E C0               		dc.b $F8, 5, 0,	$E, $C0
000185D8 F805 001A D0               		dc.b $F8, 5, 0,	$1A, $D0
000185DD F805 003E E0               		dc.b $F8, 5, 0,	$3E, $E0
000185E2 F805 000E F0               		dc.b $F8, 5, 0,	$E, $F0
000185E7 F805 0042 00               		dc.b $F8, 5, 0,	$42, 0
000185EC F805 0048 18               		dc.b $F8, 5, 0,	$48, $18
000185F1 F805 002A 28               		dc.b $F8, 5, 0,	$2A, $28
000185F6 F805 002E 40               		dc.b $F8, 5, 0,	$2E, $40
000185FB F805 000E 50               		dc.b $F8, 5, 0,	$E, $50
00018600 F805 0000 60               		dc.b $F8, 5, 0,	0, $60
00018605 F805 0004 70               		dc.b $F8, 5, 0,	4, $70
0001860A 08                         @tryagain:	dc.b 8			 ; TRY AGAIN
0001860B 3005 003E C0               		dc.b $30, 5, 0,	$3E, $C0
00018610 3005 0022 D0               		dc.b $30, 5, 0,	$22, $D0
00018615 3005 002A E0               		dc.b $30, 5, 0,	$2A, $E0
0001861A 3005 0004 F8               		dc.b $30, 5, 0,	4, $F8
0001861F 3005 0000 08               		dc.b $30, 5, 0,	0, 8
00018624 3005 0004 18               		dc.b $30, 5, 0,	4, $18
00018629 3001 0046 28               		dc.b $30, 1, 0,	$46, $28
0001862E 3005 001A 30               		dc.b $30, 5, 0,	$1A, $30
00018633 11                         @sonicteam:	dc.b $11		 ; SONIC TEAM PRESENTS
00018634 E805 002E B4               		dc.b $E8, 5, 0,	$2E, $B4
00018639 E805 0026 C4               		dc.b $E8, 5, 0,	$26, $C4
0001863E E805 001A D4               		dc.b $E8, 5, 0,	$1A, $D4
00018643 E801 0046 E4               		dc.b $E8, 1, 0,	$46, $E4
00018648 E805 001E EC               		dc.b $E8, 5, 0,	$1E, $EC
0001864D E805 003E 04               		dc.b $E8, 5, 0,	$3E, 4
00018652 E805 000E 14               		dc.b $E8, 5, 0,	$E, $14
00018657 E805 0004 24               		dc.b $E8, 5, 0,	4, $24
0001865C E809 0008 34               		dc.b $E8, 9, 0,	8, $34
00018661 0005 0012 C0               		dc.b 0,	5, 0, $12, $C0
00018666 0005 0022 D0               		dc.b 0,	5, 0, $22, $D0
0001866B 0005 000E E0               		dc.b 0,	5, 0, $E, $E0
00018670 0005 002E F0               		dc.b 0,	5, 0, $2E, $F0
00018675 0005 000E 00               		dc.b 0,	5, 0, $E, 0
0001867A 0005 001A 10               		dc.b 0,	5, 0, $1A, $10
0001867F 0005 003E 20               		dc.b 0,	5, 0, $3E, $20
00018684 0005 002E 30               		dc.b 0,	5, 0, $2E, $30
0001868A 00                         		even
0001868A 00                         		even
0001868A                            
0001868A                            		include	"_incObj\3D Boss - Green Hill (part 1).asm"
0001868A                            ; ---------------------------------------------------------------------------
0001868A                            ; Object 3D - Eggman (GHZ)
0001868A                            ; ---------------------------------------------------------------------------
0001868A                            
0001868A                            BossGreenHill:
0001868A 7000                       		moveq	#0,d0
0001868C 1028 0024                  		move.b	obRoutine(a0),d0
00018690 323B 0000                  		move.w	BGHZ_Index(pc,d0.w),d1
00018694 4EFB 1000                  		jmp	BGHZ_Index(pc,d1.w)
00018698                            ; ===========================================================================
00018698 0000                       BGHZ_Index:	dc.w BGHZ_Main-BGHZ_Index
0001869A 0000                       		dc.w BGHZ_ShipMain-BGHZ_Index
0001869C 0000                       		dc.w BGHZ_FaceMain-BGHZ_Index
0001869E 0000                       		dc.w BGHZ_FlameMain-BGHZ_Index
000186A0                            
000186A0 0200                       BGHZ_ObjData:	dc.b 2,	0		; routine counter, animation
000186A2 0401                       		dc.b 4,	1
000186A4 0607                       		dc.b 6,	7
000186A6                            ; ===========================================================================
000186A6                            
000186A6                            BGHZ_Main:	; Routine 0
000186A6 45F9 0001 86A0             		lea	(BGHZ_ObjData).l,a2
000186AC 2248                       		movea.l	a0,a1
000186AE 7202                       		moveq	#2,d1
000186B0 6000                       		bra.s	BGHZ_LoadBoss
000186B2                            ; ===========================================================================
000186B2                            
000186B2                            BGHZ_Loop:
000186B2 4EB9 0000 E8C6             		jsr	(FindNextFreeObj).l
000186B8 6600                       		bne.s	loc_17772
000186BA                            
000186BA                            BGHZ_LoadBoss:
000186BA 135A 0024                  		move.b	(a2)+,obRoutine(a1)
000186BE 137C 003D 0000             		move.b	#id_BossGreenHill,0(a1)
000186C4 3368 0008 0008             		move.w	obX(a0),obX(a1)
000186CA 3368 000C 000C             		move.w	obY(a0),obY(a1)
000186D0 237C 0000 0000 0004        		move.l	#Map_Eggman,obMap(a1)
000186D8 337C 0400 0002             		move.w	#$400,obGfx(a1)
000186DE 137C 0004 0001             		move.b	#4,obRender(a1)
000186E4 137C 0020 0019             		move.b	#$20,obActWid(a1)
000186EA 137C 0003 0018             		move.b	#3,obPriority(a1)
000186F0 135A 001C                  		move.b	(a2)+,obAnim(a1)
000186F4 2348 0034                  		move.l	a0,$34(a1)
000186F8 51C9 FFB8                  		dbf	d1,BGHZ_Loop	; repeat sequence 2 more times
000186FC                            
000186FC                            loc_17772:
000186FC 3168 0008 0030             		move.w	obX(a0),$30(a0)
00018702 3168 000C 0038             		move.w	obY(a0),$38(a0)
00018708 117C 000F 0020             		move.b	#$F,obColType(a0)
0001870E 117C 0008 0021             		move.b	#8,obColProp(a0) ; set number of hits to 8
00018714                            
00018714                            BGHZ_ShipMain:	; Routine 2
00018714 7000                       		moveq	#0,d0
00018716 1028 0025                  		move.b	ob2ndRout(a0),d0
0001871A 323B 0000                  		move.w	BGHZ_ShipIndex(pc,d0.w),d1
0001871E 4EBB 1000                  		jsr	BGHZ_ShipIndex(pc,d1.w)
00018722 43F9 0000 0000             		lea	(Ani_Eggman).l,a1
00018728 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
0001872E 1028 0022                  		move.b	obStatus(a0),d0
00018732 0200 0003                  		andi.b	#3,d0
00018736 0228 00FC 0001             		andi.b	#$FC,obRender(a0)
0001873C 8128 0001                  		or.b	d0,obRender(a0)
00018740 4EF9 0000 E428             		jmp	(DisplaySprite).l
00018746                            ; ===========================================================================
00018746 0000                       BGHZ_ShipIndex:	dc.w BGHZ_ShipStart-BGHZ_ShipIndex
00018748 0000                       		dc.w BGHZ_MakeBall-BGHZ_ShipIndex
0001874A 0000                       		dc.w BGHZ_ShipMove-BGHZ_ShipIndex
0001874C 0000                       		dc.w loc_17954-BGHZ_ShipIndex
0001874E 0000                       		dc.w loc_1797A-BGHZ_ShipIndex
00018750 0000                       		dc.w loc_179AC-BGHZ_ShipIndex
00018752 0000                       		dc.w loc_179F6-BGHZ_ShipIndex
00018754                            ; ===========================================================================
00018754                            
00018754                            BGHZ_ShipStart:
00018754 317C 0100 0012             		move.w	#$100,obVelY(a0) ; move ship down
0001875A 6100 0000                  		bsr.w	BossMove
0001875E 0C68 0308 0038             		cmpi.w	#$308,$38(a0)
00018764 6600                       		bne.s	loc_177E6
00018766 317C 0000 0012             		move.w	#0,obVelY(a0)	; stop ship
0001876C 5428 0025                  		addq.b	#2,ob2ndRout(a0) ; goto next routine
00018770                            
00018770                            loc_177E6:
00018770 1028 003F                  		move.b	$3F(a0),d0
00018774 4EB9 0000 27EC             		jsr	(CalcSine).l
0001877A EC40                       		asr.w	#6,d0
0001877C D068 0038                  		add.w	$38(a0),d0
00018780 3140 000C                  		move.w	d0,obY(a0)
00018784 3168 0030 0008             		move.w	$30(a0),obX(a0)
0001878A 5428 003F                  		addq.b	#2,$3F(a0)
0001878E 0C28 0008 0025             		cmpi.b	#8,ob2ndRout(a0)
00018794 6400                       		bcc.s	locret_1784A
00018796 4A28 0022                  		tst.b	obStatus(a0)
0001879A 6B00                       		bmi.s	loc_1784C
0001879C 4A28 0020                  		tst.b	obColType(a0)
000187A0 6600                       		bne.s	locret_1784A
000187A2 4A28 003E                  		tst.b	$3E(a0)
000187A6 6600                       		bne.s	BGHZ_ShipFlash
000187A8 117C 0020 003E             		move.b	#$20,$3E(a0)	; set number of	times for ship to flash
000187B8                            
000187B8                            BGHZ_ShipFlash:
000187B8 43F8 FB22                  		lea	(v_pal_dry+$22).w,a1 ; load 2nd pallet, 2nd entry
000187BC 7000                       		moveq	#0,d0		; move 0 (black) to d0
000187BE 4A51                       		tst.w	(a1)
000187C0 6600                       		bne.s	loc_1783C
000187C2 303C 0EEE                  		move.w	#cWhite,d0	; move 0EEE (white) to d0
000187C6                            
000187C6                            loc_1783C:
000187C6 3280                       		move.w	d0,(a1)		; load colour stored in	d0
000187C8 5328 003E                  		subq.b	#1,$3E(a0)
000187CC 6600                       		bne.s	locret_1784A
000187CE 117C 000F 0020             		move.b	#$F,obColType(a0)
000187D4                            
000187D4                            locret_1784A:
000187D4 4E75                       		rts	
000187D6                            ; ===========================================================================
000187D6                            
000187D6                            loc_1784C:
000187D6 7064                       		moveq	#100,d0
000187D8 6100 0000                  		bsr.w	AddPoints
000187DC 117C 0008 0025             		move.b	#8,ob2ndRout(a0)
000187E2 317C 00B3 003C             		move.w	#$B3,$3C(a0)
000187E8 4E75                       		rts	
000187E8 4E75                       		rts	
000187EA                            
000187EA                            ; ---------------------------------------------------------------------------
000187EA                            ; Defeated boss	subroutine
000187EA                            ; ---------------------------------------------------------------------------
000187EA                            
000187EA                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000187EA                            
000187EA                            
000187EA                            BossDefeated:
000187EA 1038 FE0F                  		move.b	(v_vbla_byte).w,d0
000187EE 0200 0007                  		andi.b	#7,d0
000187F2 6600                       		bne.s	locret_178A2
000187F4 4EB9 0000 E8B0             		jsr	(FindFreeObj).l
000187FA 6600                       		bne.s	locret_178A2
000187FC 137C 003F 0000             		move.b	#id_ExplosionBomb,0(a1)	; load explosion object
00018802 3368 0008 0008             		move.w	obX(a0),obX(a1)
00018808 3368 000C 000C             		move.w	obY(a0),obY(a1)
0001880E 4EB9 0000 27C6             		jsr	(RandomNumber).l
00018814 3200                       		move.w	d0,d1
00018816 7200                       		moveq	#0,d1
00018818 1200                       		move.b	d0,d1
0001881A E409                       		lsr.b	#2,d1
0001881C 0441 0020                  		subi.w	#$20,d1
00018820 D369 0008                  		add.w	d1,obX(a1)
00018824 E048                       		lsr.w	#8,d0
00018826 E608                       		lsr.b	#3,d0
00018828 D169 000C                  		add.w	d0,obY(a1)
0001882C                            
0001882C                            locret_178A2:
0001882C 4E75                       		rts	
0001882E                            ; End of function BossDefeated
0001882E                            
0001882E                            ; ---------------------------------------------------------------------------
0001882E                            ; Subroutine to	move a boss
0001882E                            ; ---------------------------------------------------------------------------
0001882E                            
0001882E                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001882E                            
0001882E                            
0001882E                            BossMove:
0001882E 2428 0030                  		move.l	$30(a0),d2
00018832 2628 0038                  		move.l	$38(a0),d3
00018836 3028 0010                  		move.w	obVelX(a0),d0
0001883A 48C0                       		ext.l	d0
0001883C E180                       		asl.l	#8,d0
0001883E D480                       		add.l	d0,d2
00018840 3028 0012                  		move.w	obVelY(a0),d0
00018844 48C0                       		ext.l	d0
00018846 E180                       		asl.l	#8,d0
00018848 D680                       		add.l	d0,d3
0001884A 2142 0030                  		move.l	d2,$30(a0)
0001884E 2143 0038                  		move.l	d3,$38(a0)
00018852 4E75                       		rts	
00018854                            ; End of function BossMove
00018854                            
00018854                            ; ===========================================================================
00018854                            
00018854                            		include	"_incObj\3D Boss - Green Hill (part 2).asm"
00018854                            
00018854                            BGHZ_MakeBall:
00018854 317C FF00 0010             		move.w	#-$100,obVelX(a0)
0001885A 317C FFC0 0012             		move.w	#-$40,obVelY(a0)
00018860 6100 FFCC                  		bsr.w	BossMove
00018864 0C68 2A00 0030             		cmpi.w	#$2A00,$30(a0)
0001886A 6600                       		bne.s	loc_17916
0001886C 317C 0000 0010             		move.w	#0,obVelX(a0)
00018872 317C 0000 0012             		move.w	#0,obVelY(a0)
00018878 5428 0025                  		addq.b	#2,ob2ndRout(a0)
0001887C 4EB9 0000 E8C6             		jsr	(FindNextFreeObj).l
00018882 6600                       		bne.s	loc_17910
00018884                            	;	move.b	#id_BossBall,0(a1) ; load swinging ball object
00018884 3368 0030 0008             		move.w	$30(a0),obX(a1)
0001888A 3368 0038 000C             		move.w	$38(a0),obY(a1)
00018890 2348 0034                  		move.l	a0,$34(a1)
00018894                            
00018894                            loc_17910:
00018894 317C 0077 003C             		move.w	#$77,$3C(a0)
0001889A                            
0001889A                            loc_17916:
0001889A 6000 FED4                  		bra.w	loc_177E6
0001889E                            ; ===========================================================================
0001889E                            
0001889E                            BGHZ_ShipMove:
0001889E 5368 003C                  		subq.w	#1,$3C(a0)
000188A2 6A00                       		bpl.s	BGHZ_Reverse
000188A4 5428 0025                  		addq.b	#2,ob2ndRout(a0)
000188A8 317C 003F 003C             		move.w	#$3F,$3C(a0)
000188AE 317C 0200 0010             		move.w	#$200,obVelX(a0) ; move the ship sideways
000188B4 0C68 2A00 0030             		cmpi.w	#$2A00,$30(a0)
000188BA 6600                       		bne.s	BGHZ_Reverse
000188BC 317C 007F 003C             		move.w	#$7F,$3C(a0)
000188C2 317C 0080 0010             		move.w	#$80,obVelX(a0)
000188C8                            
000188C8                            BGHZ_Reverse:
000188C8 0828 0000 0022             		btst	#0,obStatus(a0)
000188CE 6600                       		bne.s	loc_17950
000188D0 4468 0010                  		neg.w	obVelX(a0)	; reverse direction of the ship
000188D4                            
000188D4                            loc_17950:
000188D4 6000 FE9A                  		bra.w	loc_177E6
000188D8                            ; ===========================================================================
000188D8                            
000188D8                            loc_17954:
000188D8 5368 003C                  		subq.w	#1,$3C(a0)
000188DC 6B00                       		bmi.s	loc_17960
000188DE 6100 FF4E                  		bsr.w	BossMove
000188E2 6000                       		bra.s	loc_17976
000188E4                            ; ===========================================================================
000188E4                            
000188E4                            loc_17960:
000188E4 0868 0000 0022             		bchg	#0,obStatus(a0)
000188EA 317C 003F 003C             		move.w	#$3F,$3C(a0)
000188F0 5528 0025                  		subq.b	#2,ob2ndRout(a0)
000188F4 317C 0000 0010             		move.w	#0,obVelX(a0)
000188FA                            
000188FA                            loc_17976:
000188FA 6000 FE74                  		bra.w	loc_177E6
000188FE                            ; ===========================================================================
000188FE                            
000188FE                            loc_1797A:
000188FE 5368 003C                  		subq.w	#1,$3C(a0)
00018902 6B00                       		bmi.s	loc_17984
00018904 6000 FEE4                  		bra.w	BossDefeated
00018908                            ; ===========================================================================
00018908                            
00018908                            loc_17984:
00018908 08E8 0000 0022             		bset	#0,obStatus(a0)
0001890E 08A8 0007 0022             		bclr	#7,obStatus(a0)
00018914 4268 0010                  		clr.w	obVelX(a0)
00018918 5428 0025                  		addq.b	#2,ob2ndRout(a0)
0001891C 317C FFDA 003C             		move.w	#-$26,$3C(a0)
00018922 4A38 F7A7                  		tst.b	(v_bossstatus).w
00018926 6600                       		bne.s	locret_179AA
00018928 11FC 0001 F7A7             		move.b	#1,(v_bossstatus).w
0001892E                            
0001892E                            locret_179AA:
0001892E 4E75                       		rts	
00018930                            ; ===========================================================================
00018930                            
00018930                            loc_179AC:
00018930 5268 003C                  		addq.w	#1,$3C(a0)
00018934 6700                       		beq.s	loc_179BC
00018936 6A00                       		bpl.s	loc_179C2
00018938 0668 0018 0012             		addi.w	#$18,obVelY(a0)
0001893E 6000                       		bra.s	loc_179EE
00018940                            ; ===========================================================================
00018940                            
00018940                            loc_179BC:
00018940 4268 0012                  		clr.w	obVelY(a0)
00018944 6000                       		bra.s	loc_179EE
00018946                            ; ===========================================================================
00018946                            
00018946                            loc_179C2:
00018946 0C68 0030 003C             		cmpi.w	#$30,$3C(a0)
0001894C 6500                       		bcs.s	loc_179DA
0001894E 6700                       		beq.s	loc_179E0
00018950 0C68 0038 003C             		cmpi.w	#$38,$3C(a0)
00018956 6500                       		bcs.s	loc_179EE
00018958 5428 0025                  		addq.b	#2,ob2ndRout(a0)
0001895C 6000                       		bra.s	loc_179EE
0001895E                            ; ===========================================================================
0001895E                            
0001895E                            loc_179DA:
0001895E 5168 0012                  		subq.w	#8,obVelY(a0)
00018962 6000                       		bra.s	loc_179EE
00018964                            ; ===========================================================================
00018964                            
00018964                            loc_179E0:
00018964 4268 0012                  		clr.w	obVelY(a0)
00018972                            
00018972                            loc_179EE:
00018972 6100 FEBA                  		bsr.w	BossMove
00018976 6000 FDF8                  		bra.w	loc_177E6
0001897A                            ; ===========================================================================
0001897A                            
0001897A                            loc_179F6:
0001897A 317C 0400 0010             		move.w	#$400,obVelX(a0)
00018980 317C FFC0 0012             		move.w	#-$40,obVelY(a0)
00018986 0C78 2AC0 F72A             		cmpi.w	#$2AC0,(v_limitright2).w
0001898C 6700                       		beq.s	loc_17A10
0001898E 5478 F72A                  		addq.w	#2,(v_limitright2).w
00018992 6000                       		bra.s	loc_17A16
00018994                            ; ===========================================================================
00018994                            
00018994                            loc_17A10:
00018994 4A28 0001                  		tst.b	obRender(a0)
00018998 6A00                       		bpl.s	BGHZ_ShipDel
0001899A                            
0001899A                            loc_17A16:
0001899A 6100 FE92                  		bsr.w	BossMove
0001899E 6000 FDD0                  		bra.w	loc_177E6
000189A2                            ; ===========================================================================
000189A2                            
000189A2                            BGHZ_ShipDel:
000189A2 4EF9 0000 E464             		jmp	(DeleteObject).l
000189A8                            ; ===========================================================================
000189A8                            
000189A8                            BGHZ_FaceMain:	; Routine 4
000189A8 7000                       		moveq	#0,d0
000189AA 7201                       		moveq	#1,d1
000189AC 2268 0034                  		movea.l	$34(a0),a1
000189B0 1029 0025                  		move.b	ob2ndRout(a1),d0
000189B4 5900                       		subq.b	#4,d0
000189B6 6600                       		bne.s	loc_17A3E
000189B8 0C69 2A00 0030             		cmpi.w	#$2A00,$30(a1)
000189BE 6600                       		bne.s	loc_17A46
000189C0 7204                       		moveq	#4,d1
000189C2                            
000189C2                            loc_17A3E:
000189C2 5D00                       		subq.b	#6,d0
000189C4 6B00                       		bmi.s	loc_17A46
000189C6 720A                       		moveq	#$A,d1
000189C8 6000                       		bra.s	loc_17A5A
000189CA                            ; ===========================================================================
000189CA                            
000189CA                            loc_17A46:
000189CA 4A29 0020                  		tst.b	obColType(a1)
000189CE 6600                       		bne.s	loc_17A50
000189D0 7205                       		moveq	#5,d1
000189D2 6000                       		bra.s	loc_17A5A
000189D4                            ; ===========================================================================
000189D4                            
000189D4                            loc_17A50:
000189D4 0C38 0004 D024             		cmpi.b	#4,(v_player+obRoutine).w
000189DA 6500                       		bcs.s	loc_17A5A
000189DC 7204                       		moveq	#4,d1
000189DE                            
000189DE                            loc_17A5A:
000189DE 1141 001C                  		move.b	d1,obAnim(a0)
000189E2 5500                       		subq.b	#2,d0
000189E4 6600                       		bne.s	BGHZ_FaceDisp
000189E6 117C 0006 001C             		move.b	#6,obAnim(a0)
000189EC 4A28 0001                  		tst.b	obRender(a0)
000189F0 6A00                       		bpl.s	BGHZ_FaceDel
000189F2                            
000189F2                            BGHZ_FaceDisp:
000189F2 6000                       		bra.s	BGHZ_Display
000189F4                            ; ===========================================================================
000189F4                            
000189F4                            BGHZ_FaceDel:
000189F4 4EF9 0000 E464             		jmp	(DeleteObject).l
000189FA                            ; ===========================================================================
000189FA                            
000189FA                            BGHZ_FlameMain:	; Routine 6
000189FA 117C 0007 001C             		move.b	#7,obAnim(a0)
00018A00 2268 0034                  		movea.l	$34(a0),a1
00018A04 0C29 000C 0025             		cmpi.b	#$C,ob2ndRout(a1)
00018A0A 6600                       		bne.s	loc_17A96
00018A0C 117C 000B 001C             		move.b	#$B,obAnim(a0)
00018A12 4A28 0001                  		tst.b	obRender(a0)
00018A16 6A00                       		bpl.s	BGHZ_FlameDel
00018A18 6000                       		bra.s	BGHZ_FlameDisp
00018A1A                            ; ===========================================================================
00018A1A                            
00018A1A                            loc_17A96:
00018A1A 3029 0010                  		move.w	obVelX(a1),d0
00018A1E 6700                       		beq.s	BGHZ_FlameDisp
00018A20 117C 0008 001C             		move.b	#8,obAnim(a0)
00018A26                            
00018A26                            BGHZ_FlameDisp:
00018A26 6000                       		bra.s	BGHZ_Display
00018A28                            ; ===========================================================================
00018A28                            
00018A28                            BGHZ_FlameDel:
00018A28 4EF9 0000 E464             		jmp	(DeleteObject).l
00018A2E                            ; ===========================================================================
00018A2E                            
00018A2E                            BGHZ_Display:
00018A2E 2268 0034                  		movea.l	$34(a0),a1
00018A32 3169 0008 0008             		move.w	obX(a1),obX(a0)
00018A38 3169 000C 000C             		move.w	obY(a1),obY(a0)
00018A3E 1169 0022 0022             		move.b	obStatus(a1),obStatus(a0)
00018A44 43F9 0000 0000             		lea	(Ani_Eggman).l,a1
00018A4A 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
00018A50 1028 0022                  		move.b	obStatus(a0),d0
00018A54 0200 0003                  		andi.b	#3,d0
00018A58 0228 00FC 0001             		andi.b	#$FC,obRender(a0)
00018A5E 8128 0001                  		or.b	d0,obRender(a0)
00018A62 4EF9 0000 E428             		jmp	(DisplaySprite).l
00018A62 4EF9 0000 E428             		jmp	(DisplaySprite).l
00018A68                            		include	"_incObj\48 Eggman's Swinging Ball.asm"
00018A68                            ; ---------------------------------------------------------------------------
00018A68                            ; Object 48 - ball on a	chain that Eggman swings (GHZ)
00018A68                            ; ---------------------------------------------------------------------------
00018A68                            
00018A68                            BossBall:
00018A68 7000                       		moveq	#0,d0
00018A6A 1028 0024                  		move.b	obRoutine(a0),d0
00018A6E 323B 0000                  		move.w	GBall_Index(pc,d0.w),d1
00018A72 4EFB 1000                  		jmp	GBall_Index(pc,d1.w)
00018A76                            ; ===========================================================================
00018A76 0000                       GBall_Index:	dc.w GBall_Main-GBall_Index
00018A78 0000                       		dc.w GBall_Base-GBall_Index
00018A7A 0000                       		dc.w GBall_Display2-GBall_Index
00018A7C 0000                       		dc.w loc_17C68-GBall_Index
00018A7E 0000                       		dc.w GBall_ChkVanish-GBall_Index
00018A80                            ; ===========================================================================
00018A80                            
00018A80                            GBall_Main:	; Routine 0
00018A80 5428 0024                  		addq.b	#2,obRoutine(a0)
00018A84 317C 4080 0026             		move.w	#$4080,obAngle(a0)
00018A8A 317C FE00 003E             		move.w	#-$200,$3E(a0)
00018A90 217C 0000 0000 0004        		move.l	#Map_BossItems,obMap(a0)
00018A98 317C 046C 0002             		move.w	#$46C,obGfx(a0)
00018A9E 45E8 0028                  		lea	obSubtype(a0),a2
00018AA2 14FC 0000                  		move.b	#0,(a2)+
00018AA6 7205                       		moveq	#5,d1
00018AA8 2248                       		movea.l	a0,a1
00018AAA 6000                       		bra.s	loc_17B60
00018AAC                            ; ===========================================================================
00018AAC                            
00018AAC                            GBall_MakeLinks:
00018AAC 4EB9 0000 E8C6             		jsr	(FindNextFreeObj).l
00018AB2 6600                       		bne.s	GBall_MakeBall
00018AB4 3368 0008 0008             		move.w	obX(a0),obX(a1)
00018ABA 3368 000C 000C             		move.w	obY(a0),obY(a1)
00018AC0 137C 0048 0000             		move.b	#id_BossBall,0(a1) ; load chain link object
00018AC6 137C 0006 0024             		move.b	#6,obRoutine(a1)
00018ACC 237C 0000 8282 0004        		move.l	#Map_Swing_GHZ,obMap(a1)
00018AD4 337C 0380 0002             		move.w	#$380,obGfx(a1)
00018ADA 137C 0001 001A             		move.b	#1,obFrame(a1)
00018AE0 5228 0028                  		addq.b	#1,obSubtype(a0)
00018AE4                            
00018AE4                            loc_17B60:
00018AE4 3A09                       		move.w	a1,d5
00018AE6 0445 D000                  		subi.w	#$D000,d5
00018AEA EC4D                       		lsr.w	#6,d5
00018AEC 0245 007F                  		andi.w	#$7F,d5
00018AF0 14C5                       		move.b	d5,(a2)+
00018AF2 137C 0004 0001             		move.b	#4,obRender(a1)
00018AF8 137C 0008 0019             		move.b	#8,obActWid(a1)
00018AFE 137C 0006 0018             		move.b	#6,obPriority(a1)
00018B04 2368 0034 0034             		move.l	$34(a0),$34(a1)
00018B0A 51C9 FFA0                  		dbf	d1,GBall_MakeLinks ; repeat sequence 5 more times
00018B0E                            
00018B0E                            GBall_MakeBall:
00018B0E 137C 0008 0024             		move.b	#8,obRoutine(a1)
00018B14 237C 0000 89DC 0004        		move.l	#Map_GBall,obMap(a1) ; load different mappings for final link
00018B1C 337C 43AA 0002             		move.w	#$43AA,obGfx(a1) ; use different graphics
00018B22 137C 0001 001A             		move.b	#1,obFrame(a1)
00018B28 137C 0005 0018             		move.b	#5,obPriority(a1)
00018B2E 137C 0081 0020             		move.b	#$81,obColType(a1) ; make object hurt Sonic
00018B34 4E75                       		rts	
00018B36                            ; ===========================================================================
00018B36                            
00018B36 0010 2030 4060             GBall_PosData:	dc.b 0,	$10, $20, $30, $40, $60	; y-position data for links and	giant ball
00018B3C                            
00018B3C                            ; ===========================================================================
00018B3C                            
00018B3C                            GBall_Base:	; Routine 2
00018B3C 47F9 0001 8B36             		lea	(GBall_PosData).l,a3
00018B42 45E8 0028                  		lea	obSubtype(a0),a2
00018B46 7C00                       		moveq	#0,d6
00018B48 1C1A                       		move.b	(a2)+,d6
00018B4A                            
00018B4A                            loc_17BC6:
00018B4A 7800                       		moveq	#0,d4
00018B4C 181A                       		move.b	(a2)+,d4
00018B4E ED4C                       		lsl.w	#6,d4
00018B50 0684 00FF D000             		addi.l	#v_objspace&$FFFFFF,d4
00018B56 2244                       		movea.l	d4,a1
00018B58 101B                       		move.b	(a3)+,d0
00018B5A B029 003C                  		cmp.b	$3C(a1),d0
00018B5E 6700                       		beq.s	loc_17BE0
00018B60 5229 003C                  		addq.b	#1,$3C(a1)
00018B64                            
00018B64                            loc_17BE0:
00018B64 51CE FFE4                  		dbf	d6,loc_17BC6
00018B68                            
00018B68 B029 003C                  		cmp.b	$3C(a1),d0
00018B6C 6600                       		bne.s	loc_17BFA
00018B6E 2268 0034                  		movea.l	$34(a0),a1
00018B72 0C29 0006 0025             		cmpi.b	#6,ob2ndRout(a1)
00018B78 6600                       		bne.s	loc_17BFA
00018B7A 5428 0024                  		addq.b	#2,obRoutine(a0)
00018B7E                            
00018B7E                            loc_17BFA:
00018B7E 0C68 0020 0032             		cmpi.w	#$20,$32(a0)
00018B84 6700                       		beq.s	GBall_Display
00018B86 5268 0032                  		addq.w	#1,$32(a0)
00018B8A                            
00018B8A                            GBall_Display:
00018B8A 6100 0000                  		bsr.w	sub_17C2A
00018B8E 1028 0026                  		move.b	obAngle(a0),d0
00018B92 4EB9 0000 81F4             		jsr	(Swing_Move2).l
00018B98 4EF9 0000 E428             		jmp	(DisplaySprite).l
00018B9E                            ; ===========================================================================
00018B9E                            
00018B9E                            GBall_Display2:	; Routine 4
00018B9E 6100 0000                  		bsr.w	sub_17C2A
00018BA2 4EB9 0000 81B4             		jsr	(Obj48_Move).l
00018BA8 4EF9 0000 E428             		jmp	(DisplaySprite).l
00018BAE                            
00018BAE                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00018BAE                            
00018BAE                            
00018BAE                            sub_17C2A:
00018BAE 2268 0034                  		movea.l	$34(a0),a1
00018BB2 0628 0020 001B             		addi.b	#$20,obAniFrame(a0)
00018BB8 6400                       		bcc.s	loc_17C3C
00018BBA 0868 0000 001A             		bchg	#0,obFrame(a0)
00018BC0                            
00018BC0                            loc_17C3C:
00018BC0 3169 0008 003A             		move.w	obX(a1),$3A(a0)
00018BC6 3029 000C                  		move.w	obY(a1),d0
00018BCA D068 0032                  		add.w	$32(a0),d0
00018BCE 3140 0038                  		move.w	d0,$38(a0)
00018BD2 1169 0022 0022             		move.b	obStatus(a1),obStatus(a0)
00018BD8 4A29 0022                  		tst.b	obStatus(a1)
00018BDC 6A00                       		bpl.s	locret_17C66
00018BDE 117C 003F 0000             		move.b	#id_ExplosionBomb,0(a0)
00018BE4 117C 0000 0024             		move.b	#0,obRoutine(a0)
00018BEA                            
00018BEA                            locret_17C66:
00018BEA 4E75                       		rts	
00018BEC                            ; End of function sub_17C2A
00018BEC                            
00018BEC                            ; ===========================================================================
00018BEC                            
00018BEC                            loc_17C68:	; Routine 6
00018BEC 2268 0034                  		movea.l	$34(a0),a1
00018BF0 4A29 0022                  		tst.b	obStatus(a1)
00018BF4 6A00                       		bpl.s	GBall_Display3
00018BF6 117C 003F 0000             		move.b	#id_ExplosionBomb,0(a0)
00018BFC 117C 0000 0024             		move.b	#0,obRoutine(a0)
00018C02                            
00018C02                            GBall_Display3:
00018C02 4EF9 0000 E428             		jmp	(DisplaySprite).l
00018C08                            ; ===========================================================================
00018C08                            
00018C08                            GBall_ChkVanish:; Routine 8
00018C08 7000                       		moveq	#0,d0
00018C0A 4A28 001A                  		tst.b	obFrame(a0)
00018C0E 6600                       		bne.s	GBall_Vanish
00018C10 5200                       		addq.b	#1,d0
00018C12                            
00018C12                            GBall_Vanish:
00018C12 1140 001A                  		move.b	d0,obFrame(a0)
00018C16 2268 0034                  		movea.l	$34(a0),a1
00018C1A 4A29 0022                  		tst.b	obStatus(a1)
00018C1E 6A00                       		bpl.s	GBall_Display4
00018C20 117C 0000 0020             		move.b	#0,obColType(a0)
00018C26 6100 FBC2                  		bsr.w	BossDefeated
00018C2A 5328 003C                  		subq.b	#1,$3C(a0)
00018C2E 6A00                       		bpl.s	GBall_Display4
00018C30 10BC 003F                  		move.b	#id_ExplosionBomb,(a0)
00018C34 117C 0000 0024             		move.b	#0,obRoutine(a0)
00018C3A                            
00018C3A                            GBall_Display4:
00018C3A 4EF9 0000 E428             		jmp	(DisplaySprite).l
00018C3A 4EF9 0000 E428             		jmp	(DisplaySprite).l
00018C40                            		include	"_anim\Eggman.asm"
00018C40                            ; ---------------------------------------------------------------------------
00018C40                            ; Animation script - Eggman (bosses)
00018C40                            ; ---------------------------------------------------------------------------
00018C40 0000                       Ani_Eggman:	dc.w @ship-Ani_Eggman
00018C42 0000                       		dc.w @facenormal1-Ani_Eggman
00018C44 0000                       		dc.w @facenormal2-Ani_Eggman
00018C46 0000                       		dc.w @facenormal3-Ani_Eggman
00018C48 0000                       		dc.w @facelaugh-Ani_Eggman
00018C4A 0000                       		dc.w @facehit-Ani_Eggman
00018C4C 0000                       		dc.w @facepanic-Ani_Eggman
00018C4E 0000                       		dc.w @blank-Ani_Eggman
00018C50 0000                       		dc.w @flame1-Ani_Eggman
00018C52 0000                       		dc.w @flame2-Ani_Eggman
00018C54 0000                       		dc.w @facedefeat-Ani_Eggman
00018C56 0000                       		dc.w @escapeflame-Ani_Eggman
00018C58 0F00 FF                    @ship:		dc.b $F, 0, afEnd
00018C5C 00                         		even
00018C5C 0501 02FF                  @facenormal1:	dc.b 5,	1, 2, afEnd
00018C60                            		even
00018C60 0301 02FF                  @facenormal2:	dc.b 3,	1, 2, afEnd
00018C64                            		even
00018C64 0101 02FF                  @facenormal3:	dc.b 1,	1, 2, afEnd
00018C68                            		even
00018C68 0403 04FF                  @facelaugh:	dc.b 4,	3, 4, afEnd
00018C6C                            		even
00018C6C 1F05 01FF                  @facehit:	dc.b $1F, 5, 1,	afEnd
00018C70                            		even
00018C70 0306 01FF                  @facepanic:	dc.b 3,	6, 1, afEnd
00018C74                            		even
00018C74 0F0A FF                    @blank:		dc.b $F, $A, afEnd
00018C78 00                         		even
00018C78 0308 09FF                  @flame1:	dc.b 3,	8, 9, afEnd
00018C7C                            		even
00018C7C 0108 09FF                  @flame2:	dc.b 1,	8, 9, afEnd
00018C80                            		even
00018C80 0F07 FF                    @facedefeat:	dc.b $F, 7, afEnd
00018C84 00                         		even
00018C84 0209 080B 0C0B 0C09 08FE+  @escapeflame:	dc.b 2,	9, 8, $B, $C, $B, $C, 9, 8, afBack, 2
00018C90 00                         		even
00018C90 00                         		even
00018C90                            Map_Eggman:	include	"_maps\Eggman.asm"
00018C90                            ; ---------------------------------------------------------------------------
00018C90                            ; Sprite mappings - Eggman (boss levels)
00018C90                            ; ---------------------------------------------------------------------------
00018C90                            Map_Eggman_internal:
00018C90 0000                       		dc.w @ship-Map_Eggman_internal
00018C92 0000                       		dc.w @facenormal1-Map_Eggman_internal
00018C94 0000                       		dc.w @facenormal2-Map_Eggman_internal
00018C96 0000                       		dc.w @facelaugh1-Map_Eggman_internal
00018C98 0000                       		dc.w @facelaugh2-Map_Eggman_internal
00018C9A 0000                       		dc.w @facehit-Map_Eggman_internal
00018C9C 0000                       		dc.w @facepanic-Map_Eggman_internal
00018C9E 0000                       		dc.w @facedefeat-Map_Eggman_internal
00018CA0 0000                       		dc.w @flame1-Map_Eggman_internal
00018CA2 0000                       		dc.w @flame2-Map_Eggman_internal
00018CA4 0000                       		dc.w @blank-Map_Eggman_internal
00018CA6 0000                       		dc.w @escapeflame1-Map_Eggman_internal
00018CA8 0000                       		dc.w @escapeflame2-Map_Eggman_internal
00018CAA 06                         @ship:		dc.b 6
00018CAB EC01 000A E4               		dc.b $EC, 1, 0,	$A, $E4
00018CB0 EC05 000C 0C               		dc.b $EC, 5, 0,	$C, $C
00018CB5 FC0E 2010 E4               		dc.b $FC, $E, $20, $10,	$E4
00018CBA FC0E 201C 04               		dc.b $FC, $E, $20, $1C,	4
00018CBF 140C 2028 EC               		dc.b $14, $C, $20, $28,	$EC
00018CC4 1400 202C 0C               		dc.b $14, 0, $20, $2C, $C
00018CC9 02                         @facenormal1:	dc.b 2
00018CCA E404 0000 F4               		dc.b $E4, 4, 0,	0, $F4
00018CCF EC0D 0002 EC               		dc.b $EC, $D, 0, 2, $EC
00018CD4 02                         @facenormal2:	dc.b 2
00018CD5 E404 0000 F4               		dc.b $E4, 4, 0,	0, $F4
00018CDA EC0D 0035 EC               		dc.b $EC, $D, 0, $35, $EC
00018CDF 03                         @facelaugh1:	dc.b 3
00018CE0 E408 003D F4               		dc.b $E4, 8, 0,	$3D, $F4
00018CE5 EC09 0040 EC               		dc.b $EC, 9, 0,	$40, $EC
00018CEA EC05 0046 04               		dc.b $EC, 5, 0,	$46, 4
00018CEF 03                         @facelaugh2:	dc.b 3
00018CF0 E408 004A F4               		dc.b $E4, 8, 0,	$4A, $F4
00018CF5 EC09 004D EC               		dc.b $EC, 9, 0,	$4D, $EC
00018CFA EC05 0053 04               		dc.b $EC, 5, 0,	$53, 4
00018CFF 03                         @facehit:	dc.b 3
00018D00 E408 0057 F4               		dc.b $E4, 8, 0,	$57, $F4
00018D05 EC09 005A EC               		dc.b $EC, 9, 0,	$5A, $EC
00018D0A EC05 0060 04               		dc.b $EC, 5, 0,	$60, 4
00018D0F 03                         @facepanic:	dc.b 3
00018D10 E404 0064 04               		dc.b $E4, 4, 0,	$64, 4
00018D15 E404 0000 F4               		dc.b $E4, 4, 0,	0, $F4
00018D1A EC0D 0035 EC               		dc.b $EC, $D, 0, $35, $EC
00018D1F 04                         @facedefeat:	dc.b 4
00018D20 E409 0066 F4               		dc.b $E4, 9, 0,	$66, $F4
00018D25 E408 0057 F4               		dc.b $E4, 8, 0,	$57, $F4
00018D2A EC09 005A EC               		dc.b $EC, 9, 0,	$5A, $EC
00018D2F EC05 0060 04               		dc.b $EC, 5, 0,	$60, 4
00018D34 01                         @flame1:	dc.b 1
00018D35 0405 002D 22               		dc.b 4,	5, 0, $2D, $22
00018D3A 01                         @flame2:	dc.b 1
00018D3B 0405 0031 22               		dc.b 4,	5, 0, $31, $22
00018D40 00                         @blank:		dc.b 0
00018D41 02                         @escapeflame1:	dc.b 2
00018D42 0008 012A 22               		dc.b 0,	8, 1, $2A, $22
00018D47 0808 112A 22               		dc.b 8,	8, $11,	$2A, $22
00018D4C 02                         @escapeflame2:	dc.b 2
00018D4D F80B 012D 22               		dc.b $F8, $B, 1, $2D, $22
00018D52 0001 0139 3A               		dc.b 0,	1, 1, $39, $3A
00018D58 00                         		even
00018D58 00                         		even
00018D58                            Map_BossItems:	include	"_maps\Boss Items.asm"
00018D58                            ; ---------------------------------------------------------------------------
00018D58                            ; Sprite mappings - extra boss items (e.g. swinging ball on a chain in GHZ)
00018D58                            ; ---------------------------------------------------------------------------
00018D58                            Map_BossItems_internal:
00018D58 0000                       		dc.w @chainanchor1-Map_BossItems_internal
00018D5A 0000                       		dc.w @chainanchor2-Map_BossItems_internal
00018D5C 0000                       		dc.w @cross-Map_BossItems_internal
00018D5E 0000                       		dc.w @widepipe-Map_BossItems_internal
00018D60 0000                       		dc.w @pipe-Map_BossItems_internal
00018D62 0000                       		dc.w @spike-Map_BossItems_internal
00018D64 0000                       		dc.w @legmask-Map_BossItems_internal
00018D66 0000                       		dc.w @legs-Map_BossItems_internal
00018D68 01                         @chainanchor1:	dc.b 1
00018D69 F805 0000 F8               		dc.b $F8, 5, 0,	0, $F8	; GHZ boss
00018D6E 02                         @chainanchor2:	dc.b 2
00018D6F FC04 0004 F8               		dc.b $FC, 4, 0,	4, $F8	; GHZ boss
00018D74 F805 0000 F8               		dc.b $F8, 5, 0,	0, $F8
00018D7A 00                         		even
00018D7A 01                         @cross:		dc.b 1
00018D7B FC00 0006 FC               		dc.b $FC, 0, 0,	6, $FC	; unknown
00018D80 01                         @widepipe:	dc.b 1
00018D81 1409 0007 F4               		dc.b $14, 9, 0,	7, $F4	; SLZ boss
00018D86 01                         @pipe:		dc.b 1
00018D87 1405 000D F8               		dc.b $14, 5, 0,	$D, $F8	; MZ boss
00018D8C 04                         @spike:		dc.b 4
00018D8D F004 0011 F8               		dc.b $F0, 4, 0,	$11, $F8 ; SYZ boss
00018D92 F801 0013 F8               		dc.b $F8, 1, 0,	$13, $F8
00018D97 F801 0813 00               		dc.b $F8, 1, 8,	$13, 0
00018D9C 0804 0015 F8               		dc.b 8,	4, 0, $15, $F8
00018DA2 00                         		even
00018DA2 02                         @legmask:	dc.b 2
00018DA3 0005 0017 00               		dc.b 0,	5, 0, $17, 0	; FZ post-boss: sprite covering part of legs
00018DA8 0000 001B 10               		dc.b 0,	0, 0, $1B, $10
00018DAE 00                         		even
00018DAE 02                         @legs:		dc.b 2
00018DAF 1804 001C 00               		dc.b $18, 4, 0,	$1C, 0	; FZ post-boss
00018DB4 000B 001E 10               		dc.b 0,	$B, 0, $1E, $10
00018DBA 00                         		even
00018DBA 00                         		even
00018DBA                            		include	"_incObj\77 Boss - Labyrinth.asm"
00018DBA                            ; ---------------------------------------------------------------------------
00018DBA                            ; Object 77 - Eggman (LZ)
00018DBA                            ; ---------------------------------------------------------------------------
00018DBA                            
00018DBA                            BossLabyrinth:
00018DBA 7000                       		moveq	#0,d0
00018DBC 1028 0024                  		move.b	obRoutine(a0),d0
00018DC0 323B 0000                  		move.w	Obj77_Index(pc,d0.w),d1
00018DC4 4EFB 1000                  		jmp	Obj77_Index(pc,d1.w)
00018DC8                            ; ===========================================================================
00018DC8 0000                       Obj77_Index:	dc.w Obj77_Main-Obj77_Index
00018DCA 0000                       		dc.w Obj77_ShipMain-Obj77_Index
00018DCC 0000                       		dc.w Obj77_FaceMain-Obj77_Index
00018DCE 0000                       		dc.w Obj77_FlameMain-Obj77_Index
00018DD0                            
00018DD0 0200                       Obj77_ObjData:	dc.b 2,	0		; routine number, animation
00018DD2 0401                       		dc.b 4,	1
00018DD4 0607                       		dc.b 6,	7
00018DD6                            ; ===========================================================================
00018DD6                            
00018DD6                            Obj77_Main:	; Routine 0
00018DD6 317C 1E10 0008             		move.w	#$1E10,obX(a0)
00018DDC 317C 05C0 000C             		move.w	#$5C0,obY(a0)
00018DE2 3168 0008 0030             		move.w	obX(a0),$30(a0)
00018DE8 3168 000C 0038             		move.w	obY(a0),$38(a0)
00018DEE 117C 000F 0020             		move.b	#$F,obColType(a0)
00018DF4 117C 0008 0021             		move.b	#8,obColProp(a0) ; set number of hits to 8
00018DFA 117C 0004 0018             		move.b	#4,obPriority(a0)
00018E00 45FA FFCE                  		lea	Obj77_ObjData(pc),a2
00018E04 2248                       		movea.l	a0,a1
00018E06 7202                       		moveq	#2,d1
00018E08 6000                       		bra.s	Obj77_LoadBoss
00018E0A                            ; ===========================================================================
00018E0A                            
00018E0A                            Obj77_Loop:
00018E0A 4EB9 0000 E8C6             		jsr	(FindNextFreeObj).l
00018E10 6600                       		bne.s	Obj77_ShipMain
00018E12 137C 0077 0000             		move.b	#id_BossLabyrinth,0(a1)
00018E18 3368 0008 0008             		move.w	obX(a0),obX(a1)
00018E1E 3368 000C 000C             		move.w	obY(a0),obY(a1)
00018E24                            
00018E24                            Obj77_LoadBoss:
00018E24 08A8 0000 0022             		bclr	#0,obStatus(a0)
00018E2A 4229 0025                  		clr.b	ob2ndRout(a1)
00018E2E 135A 0024                  		move.b	(a2)+,obRoutine(a1)
00018E32 135A 001C                  		move.b	(a2)+,obAnim(a1)
00018E36 1368 0018 0018             		move.b	obPriority(a0),obPriority(a1)
00018E3C 237C 0001 8C90 0004        		move.l	#Map_Eggman,obMap(a1)
00018E44 337C 0400 0002             		move.w	#$400,obGfx(a1)
00018E4A 137C 0004 0001             		move.b	#4,obRender(a1)
00018E50 137C 0020 0019             		move.b	#$20,obActWid(a1)
00018E56 2348 0034                  		move.l	a0,$34(a1)
00018E5A 51C9 FFAE                  		dbf	d1,Obj77_Loop
00018E5E                            
00018E5E                            Obj77_ShipMain:	; Routine 2
00018E5E 43F8 D000                  		lea	(v_player).w,a1
00018E62 7000                       		moveq	#0,d0
00018E64 1028 0025                  		move.b	ob2ndRout(a0),d0
00018E68 323B 0000                  		move.w	Obj77_ShipIndex(pc,d0.w),d1
00018E6C 4EBB 1000                  		jsr	Obj77_ShipIndex(pc,d1.w)
00018E70 43F9 0001 8C40             		lea	(Ani_Eggman).l,a1
00018E76 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
00018E7C 7003                       		moveq	#3,d0
00018E7E C028 0022                  		and.b	obStatus(a0),d0
00018E82 0228 00FC 0001             		andi.b	#$FC,obRender(a0)
00018E88 8128 0001                  		or.b	d0,obRender(a0)
00018E8C 4EF9 0000 E428             		jmp	(DisplaySprite).l
00018E92                            ; ===========================================================================
00018E92 0000 0000                  Obj77_ShipIndex:dc.w loc_17F1E-Obj77_ShipIndex,	loc_17FA0-Obj77_ShipIndex
00018E96 0000 0000                  		dc.w loc_17FE0-Obj77_ShipIndex,	loc_1801E-Obj77_ShipIndex
00018E9A 0000 0000                  		dc.w loc_180BC-Obj77_ShipIndex,	loc_180F6-Obj77_ShipIndex
00018E9E 0000 0000                  		dc.w loc_1812A-Obj77_ShipIndex,	loc_18152-Obj77_ShipIndex
00018EA2                            ; ===========================================================================
00018EA2                            
00018EA2                            loc_17F1E:
00018EA2 3029 0008                  		move.w	obX(a1),d0
00018EA6 0C40 1DA0                  		cmpi.w	#$1DA0,d0
00018EAA 6500                       		bcs.s	loc_17F38
00018EAC 317C FE80 0012             		move.w	#-$180,obVelY(a0)
00018EB2 317C 0060 0010             		move.w	#$60,obVelX(a0)
00018EB8 5428 0025                  		addq.b	#2,ob2ndRout(a0)
00018EBC                            
00018EBC                            loc_17F38:
00018EBC 6100 F970                  		bsr.w	BossMove
00018EC0 3168 0038 000C             		move.w	$38(a0),obY(a0)
00018EC6 3168 0030 0008             		move.w	$30(a0),obX(a0)
00018ECC                            
00018ECC                            loc_17F48:
00018ECC 4A28 003D                  		tst.b	$3D(a0)
00018ED0 6600                       		bne.s	loc_17F8E
00018ED2 4A28 0022                  		tst.b	obStatus(a0)
00018ED6 6B00                       		bmi.s	loc_17F92
00018ED8 4A28 0020                  		tst.b	obColType(a0)
00018EDC 6600                       		bne.s	locret_17F8C
00018EDE 4A28 003E                  		tst.b	$3E(a0)
00018EE2 6600                       		bne.s	loc_17F70
00018EE4 117C 0020 003E             		move.b	#$20,$3E(a0)
00018EF4                            
00018EF4                            loc_17F70:
00018EF4 43F8 FB22                  		lea	(v_pal_dry+$22).w,a1
00018EF8 7000                       		moveq	#0,d0
00018EFA 4A51                       		tst.w	(a1)
00018EFC 6600                       		bne.s	loc_17F7E
00018EFE 303C 0EEE                  		move.w	#cWhite,d0
00018F02                            
00018F02                            loc_17F7E:
00018F02 3280                       		move.w	d0,(a1)
00018F04 5328 003E                  		subq.b	#1,$3E(a0)
00018F08 6600                       		bne.s	locret_17F8C
00018F0A 117C 000F 0020             		move.b	#$F,obColType(a0)
00018F10                            
00018F10                            locret_17F8C:
00018F10 4E75                       		rts	
00018F12                            ; ===========================================================================
00018F12                            
00018F12                            loc_17F8E:
00018F12 6000 F8D6                  		bra.w	BossDefeated
00018F16                            ; ===========================================================================
00018F16                            
00018F16                            loc_17F92:
00018F16 7064                       		moveq	#100,d0
00018F18 6100 0000                  		bsr.w	AddPoints
00018F1C 117C 00FF 003D             		move.b	#-1,$3D(a0)
00018F22 4E75                       		rts	
00018F24                            ; ===========================================================================
00018F24                            
00018F24                            loc_17FA0:
00018F24 70FE                       		moveq	#-2,d0
00018F26 0C68 1E48 0030             		cmpi.w	#$1E48,$30(a0)
00018F2C 6500                       		bcs.s	loc_17FB6
00018F2E 317C 1E48 0030             		move.w	#$1E48,$30(a0)
00018F34 4268 0010                  		clr.w	obVelX(a0)
00018F38 5240                       		addq.w	#1,d0
00018F3A                            
00018F3A                            loc_17FB6:
00018F3A 0C68 0500 0038             		cmpi.w	#$500,$38(a0)
00018F40 6E00                       		bgt.s	loc_17FCA
00018F42 317C 0500 0038             		move.w	#$500,$38(a0)
00018F48 4268 0012                  		clr.w	obVelY(a0)
00018F4C 5240                       		addq.w	#1,d0
00018F4E                            
00018F4E                            loc_17FCA:
00018F4E 6600                       		bne.s	loc_17FDC
00018F50 317C 0140 0010             		move.w	#$140,obVelX(a0)
00018F56 317C FE00 0012             		move.w	#-$200,obVelY(a0)
00018F5C 5428 0025                  		addq.b	#2,ob2ndRout(a0)
00018F60                            
00018F60                            loc_17FDC:
00018F60 6000 FF5A                  		bra.w	loc_17F38
00018F64                            ; ===========================================================================
00018F64                            
00018F64                            loc_17FE0:
00018F64 70FE                       		moveq	#-2,d0
00018F66 0C68 1E70 0030             		cmpi.w	#$1E70,$30(a0)
00018F6C 6500                       		bcs.s	loc_17FF6
00018F6E 317C 1E70 0030             		move.w	#$1E70,$30(a0)
00018F74 4268 0010                  		clr.w	obVelX(a0)
00018F78 5240                       		addq.w	#1,d0
00018F7A                            
00018F7A                            loc_17FF6:
00018F7A 0C68 04C0 0038             		cmpi.w	#$4C0,$38(a0)
00018F80 6E00                       		bgt.s	loc_1800A
00018F82 317C 04C0 0038             		move.w	#$4C0,$38(a0)
00018F88 4268 0012                  		clr.w	obVelY(a0)
00018F8C 5240                       		addq.w	#1,d0
00018F8E                            
00018F8E                            loc_1800A:
00018F8E 6600                       		bne.s	loc_1801A
00018F90 317C FE80 0012             		move.w	#-$180,obVelY(a0)
00018F96 5428 0025                  		addq.b	#2,ob2ndRout(a0)
00018F9A 4228 003F                  		clr.b	$3F(a0)
00018F9E                            
00018F9E                            loc_1801A:
00018F9E 6000 FF1C                  		bra.w	loc_17F38
00018FA2                            ; ===========================================================================
00018FA2                            
00018FA2                            loc_1801E:
00018FA2 0C68 0100 0038             		cmpi.w	#$100,$38(a0)
00018FA8 6E00                       		bgt.s	loc_1804E
00018FAA 317C 0100 0038             		move.w	#$100,$38(a0)
00018FB0 317C 0140 0010             		move.w	#$140,obVelX(a0)
00018FB6 317C FF80 0012             		move.w	#-$80,obVelY(a0)
00018FBC 4A28 003D                  		tst.b	$3D(a0)
00018FC0 6700                       		beq.s	loc_18046
00018FC2 E1E8 0010                  		asl	obVelX(a0)
00018FC6 E1E8 0012                  		asl	obVelY(a0)
00018FCA                            
00018FCA                            loc_18046:
00018FCA 5428 0025                  		addq.b	#2,ob2ndRout(a0)
00018FCE 6000 FEEC                  		bra.w	loc_17F38
00018FD2                            ; ===========================================================================
00018FD2                            
00018FD2                            loc_1804E:
00018FD2 08E8 0000 0022             		bset	#0,obStatus(a0)
00018FD8 5428 003F                  		addq.b	#2,$3F(a0)
00018FDC 1028 003F                  		move.b	$3F(a0),d0
00018FE0 4EB9 0000 27EC             		jsr	(CalcSine).l
00018FE6 4A41                       		tst.w	d1
00018FE8 6A00                       		bpl.s	loc_1806C
00018FEA 08A8 0000 0022             		bclr	#0,obStatus(a0)
00018FF0                            
00018FF0                            loc_1806C:
00018FF0 E840                       		asr.w	#4,d0
00018FF2 4840                       		swap	d0
00018FF4 4240                       		clr.w	d0
00018FF6 D0A8 0030                  		add.l	$30(a0),d0
00018FFA 4840                       		swap	d0
00018FFC 3140 0008                  		move.w	d0,obX(a0)
00019000 3028 0012                  		move.w	obVelY(a0),d0
00019004 3238 D00C                  		move.w	(v_player+obY).w,d1
00019008 9268 000C                  		sub.w	obY(a0),d1
0001900C 6500                       		bcs.s	loc_180A2
0001900E 0441 0048                  		subi.w	#$48,d1
00019012 6500                       		bcs.s	loc_180A2
00019014 E240                       		asr.w	#1,d0
00019016 0441 0028                  		subi.w	#$28,d1
0001901A 6500                       		bcs.s	loc_180A2
0001901C E240                       		asr.w	#1,d0
0001901E 0441 0028                  		subi.w	#$28,d1
00019022 6500                       		bcs.s	loc_180A2
00019024 7000                       		moveq	#0,d0
00019026                            
00019026                            loc_180A2:
00019026 48C0                       		ext.l	d0
00019028 E180                       		asl.l	#8,d0
0001902A 4A28 003D                  		tst.b	$3D(a0)
0001902E 6700                       		beq.s	loc_180AE
00019030 D080                       		add.l	d0,d0
00019032                            
00019032                            loc_180AE:
00019032 D1A8 0038                  		add.l	d0,$38(a0)
00019036 3168 0038 000C             		move.w	$38(a0),obY(a0)
0001903C 6000 FE8E                  		bra.w	loc_17F48
00019040                            ; ===========================================================================
00019040                            
00019040                            loc_180BC:
00019040 70FE                       		moveq	#-2,d0
00019042 0C68 1F4C 0030             		cmpi.w	#$1F4C,$30(a0)
00019048 6500                       		bcs.s	loc_180D2
0001904A 317C 1F4C 0030             		move.w	#$1F4C,$30(a0)
00019050 4268 0010                  		clr.w	obVelX(a0)
00019054 5240                       		addq.w	#1,d0
00019056                            
00019056                            loc_180D2:
00019056 0C68 00C0 0038             		cmpi.w	#$C0,$38(a0)
0001905C 6E00                       		bgt.s	loc_180E6
0001905E 317C 00C0 0038             		move.w	#$C0,$38(a0)
00019064 4268 0012                  		clr.w	obVelY(a0)
00019068 5240                       		addq.w	#1,d0
0001906A                            
0001906A                            loc_180E6:
0001906A 6600                       		bne.s	loc_180F2
0001906C 5428 0025                  		addq.b	#2,ob2ndRout(a0)
00019070 08A8 0000 0022             		bclr	#0,obStatus(a0)
00019076                            
00019076                            loc_180F2:
00019076 6000 FE44                  		bra.w	loc_17F38
0001907A                            ; ===========================================================================
0001907A                            
0001907A                            loc_180F6:
0001907A 4A28 003D                  		tst.b	$3D(a0)
0001907E 6600                       		bne.s	loc_18112
00019080 0C69 1EC8 0008             		cmpi.w	#$1EC8,obX(a1)
00019086 6D00                       		blt.s	loc_18126
00019088 0C69 00F0 000C             		cmpi.w	#$F0,obY(a1)
0001908E 6E00                       		bgt.s	loc_18126
00019090 117C 0032 003C             		move.b	#$32,$3C(a0)
00019096                            
00019096                            loc_18112:
000190A0 08E8 0000 0022             		bset	#0,obStatus(a0)
000190A6 5428 0025                  		addq.b	#2,ob2ndRout(a0)
000190AA                            
000190AA                            loc_18126:
000190AA 6000 FE10                  		bra.w	loc_17F38
000190AE                            ; ===========================================================================
000190AE                            
000190AE                            loc_1812A:
000190AE 4A28 003D                  		tst.b	$3D(a0)
000190B2 6600                       		bne.s	loc_18136
000190B4 5328 003C                  		subq.b	#1,$3C(a0)
000190B8 6600                       		bne.s	loc_1814E
000190BA                            
000190BA                            loc_18136:
000190BA 4228 003C                  		clr.b	$3C(a0)
000190BE 317C 0400 0010             		move.w	#$400,obVelX(a0)
000190C4 317C FFC0 0012             		move.w	#-$40,obVelY(a0)
000190CA 4228 003D                  		clr.b	$3D(a0)
000190CE 5428 0025                  		addq.b	#2,ob2ndRout(a0)
000190D2                            
000190D2                            loc_1814E:
000190D2 6000 FDE8                  		bra.w	loc_17F38
000190D6                            ; ===========================================================================
000190D6                            
000190D6                            loc_18152:
000190D6 0C78 2030 F72A             		cmpi.w	#$2030,(v_limitright2).w
000190DC 6400                       		bcc.s	loc_18160
000190DE 5478 F72A                  		addq.w	#2,(v_limitright2).w
000190E2 6000                       		bra.s	loc_18166
000190E4                            ; ===========================================================================
000190E4                            
000190E4                            loc_18160:
000190E4 4A28 0001                  		tst.b	obRender(a0)
000190E8 6A00                       		bpl.s	Obj77_ShipDel
000190EA                            
000190EA                            loc_18166:
000190EA 6000 FDD0                  		bra.w	loc_17F38
000190EE                            ; ===========================================================================
000190EE                            
000190EE                            Obj77_ShipDel:
000190EE 4EF9 0000 E464             		jmp	(DeleteObject).l
000190F4                            ; ===========================================================================
000190F4                            
000190F4                            Obj77_FaceMain:	; Routine 4
000190F4 2268 0034                  		movea.l	$34(a0),a1
000190F8 1011                       		move.b	(a1),d0
000190FA B010                       		cmp.b	(a0),d0
000190FC 6600                       		bne.s	Obj77_FaceDel
000190FE 7000                       		moveq	#0,d0
00019100 1029 0025                  		move.b	ob2ndRout(a1),d0
00019104 7201                       		moveq	#1,d1
00019106 4A28 003D                  		tst.b	$3D(a0)
0001910A 6700                       		beq.s	loc_1818C
0001910C 720A                       		moveq	#$A,d1
0001910E 6000                       		bra.s	loc_181A0
00019110                            ; ===========================================================================
00019110                            
00019110                            loc_1818C:
00019110 4A29 0020                  		tst.b	obColType(a1)
00019114 6600                       		bne.s	loc_18196
00019116 7205                       		moveq	#5,d1
00019118 6000                       		bra.s	loc_181A0
0001911A                            ; ===========================================================================
0001911A                            
0001911A                            loc_18196:
0001911A 0C38 0004 D024             		cmpi.b	#4,(v_player+obRoutine).w
00019120 6500                       		bcs.s	loc_181A0
00019122 7204                       		moveq	#4,d1
00019124                            
00019124                            loc_181A0:
00019124 1141 001C                  		move.b	d1,obAnim(a0)
00019128 0C00 000E                  		cmpi.b	#$E,d0
0001912C 6600                       		bne.s	loc_181B6
0001912E 117C 0006 001C             		move.b	#6,obAnim(a0)
00019134 4A28 0001                  		tst.b	obRender(a0)
00019138 6A00                       		bpl.s	Obj77_FaceDel
0001913A                            
0001913A                            loc_181B6:
0001913A 6000                       		bra.s	Obj77_Display
0001913C                            ; ===========================================================================
0001913C                            
0001913C                            Obj77_FaceDel:
0001913C 4EF9 0000 E464             		jmp	(DeleteObject).l
00019142                            ; ===========================================================================
00019142                            
00019142                            Obj77_FlameMain:; Routine 6
00019142 117C 0007 001C             		move.b	#7,obAnim(a0)
00019148 2268 0034                  		movea.l	$34(a0),a1
0001914C 1011                       		move.b	(a1),d0
0001914E B010                       		cmp.b	(a0),d0
00019150 6600                       		bne.s	Obj77_FlameDel
00019152 0C29 000E 0025             		cmpi.b	#$E,ob2ndRout(a1)
00019158 6600                       		bne.s	loc_181F0
0001915A 117C 000B 001C             		move.b	#$B,obAnim(a0)
00019160 4A28 0001                  		tst.b	1(a0)
00019164 6A00                       		bpl.s	Obj77_FlameDel
00019166 6000                       		bra.s	loc_181F0
00019168                            ; ===========================================================================
00019168 4A69 0010                  		tst.w	obVelX(a1)
0001916C 6700                       		beq.s	loc_181F0
0001916E 117C 0008 001C             		move.b	#8,obAnim(a0)
00019174                            
00019174                            loc_181F0:
00019174 6000                       		bra.s	Obj77_Display
00019176                            ; ===========================================================================
00019176                            
00019176                            Obj77_FlameDel:
00019176 4EF9 0000 E464             		jmp	(DeleteObject).l
0001917C                            ; ===========================================================================
0001917C                            
0001917C                            Obj77_Display:
0001917C 43F9 0001 8C40             		lea	(Ani_Eggman).l,a1
00019182 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
00019188 2268 0034                  		movea.l	$34(a0),a1
0001918C 3169 0008 0008             		move.w	obX(a1),obX(a0)
00019192 3169 000C 000C             		move.w	obY(a1),obY(a0)
00019198 1169 0022 0022             		move.b	obStatus(a1),obStatus(a0)
0001919E 7003                       		moveq	#3,d0
000191A0 C028 0022                  		and.b	obStatus(a0),d0
000191A4 0228 00FC 0001             		andi.b	#$FC,obRender(a0)
000191AA 8128 0001                  		or.b	d0,obRender(a0)
000191AE 4EF9 0000 E428             		jmp	(DisplaySprite).l
000191AE 4EF9 0000 E428             		jmp	(DisplaySprite).l
000191B4                            		include	"_incObj\73 Boss - Marble.asm"
000191B4                            ; ---------------------------------------------------------------------------
000191B4                            ; Object 73 - Eggman (MZ)
000191B4                            ; ---------------------------------------------------------------------------
000191B4                            
000191B4                            BossMarble:
000191B4 7000                       		moveq	#0,d0
000191B6 1028 0024                  		move.b	obRoutine(a0),d0
000191BA 323B 0000                  		move.w	Obj73_Index(pc,d0.w),d1
000191BE 4EFB 1000                  		jmp	Obj73_Index(pc,d1.w)
000191C2                            ; ===========================================================================
000191C2 0000                       Obj73_Index:	dc.w Obj73_Main-Obj73_Index
000191C4 0000                       		dc.w Obj73_ShipMain-Obj73_Index
000191C6 0000                       		dc.w Obj73_FaceMain-Obj73_Index
000191C8 0000                       		dc.w Obj73_FlameMain-Obj73_Index
000191CA 0000                       		dc.w Obj73_TubeMain-Obj73_Index
000191CC                            
000191CC 0200 04                    Obj73_ObjData:	dc.b 2,	0, 4		; routine number, animation, priority
000191CF 0401 04                    		dc.b 4,	1, 4
000191D2 0607 04                    		dc.b 6,	7, 4
000191D5 0800 03                    		dc.b 8,	0, 3
000191D8                            ; ===========================================================================
000191D8                            
000191D8                            Obj73_Main:	; Routine 0
000191D8 3168 0008 0030             		move.w	obX(a0),$30(a0)
000191DE 3168 000C 0038             		move.w	obY(a0),$38(a0)
000191E4 117C 000F 0020             		move.b	#$F,obColType(a0)
000191EA 117C 0001 0021             		move.b	#1,obColProp(a0) ; set number of hits to 8
000191F0 45FA FFDA                  		lea	Obj73_ObjData(pc),a2
000191F4 2248                       		movea.l	a0,a1
000191F6 7203                       		moveq	#3,d1
000191F8 6000                       		bra.s	Obj73_LoadBoss
000191FA                            ; ===========================================================================
000191FA                            
000191FA                            Obj73_Loop:
000191FA 4EB9 0000 E8C6             		jsr	(FindNextFreeObj).l
00019200 6600                       		bne.s	Obj73_ShipMain
00019202 137C 0073 0000             		move.b	#id_BossMarble,0(a1)
00019208 3368 0008 0008             		move.w	obX(a0),obX(a1)
0001920E 3368 000C 000C             		move.w	obY(a0),obY(a1)
00019214                            
00019214                            Obj73_LoadBoss:
00019214 08A8 0000 0022             		bclr	#0,obStatus(a0)
0001921A 4229 0025                  		clr.b	ob2ndRout(a1)
0001921E 135A 0024                  		move.b	(a2)+,obRoutine(a1)
00019222 135A 001C                  		move.b	(a2)+,obAnim(a1)
00019226 135A 0018                  		move.b	(a2)+,obPriority(a1)
0001922A 237C 0001 8C90 0004        		move.l	#Map_Eggman,obMap(a1)
00019232 337C 0400 0002             		move.w	#$400,obGfx(a1)
00019238 137C 0004 0001             		move.b	#4,obRender(a1)
0001923E 137C 0020 0019             		move.b	#$20,obActWid(a1)
00019244 2348 0034                  		move.l	a0,$34(a1)
00019248 51C9 FFB0                  		dbf	d1,Obj73_Loop	; repeat sequence 3 more times
0001924C                            
0001924C                            Obj73_ShipMain:	; Routine 2
0001924C 7000                       		moveq	#0,d0
0001924E 1028 0025                  		move.b	ob2ndRout(a0),d0
00019252 323B 0000                  		move.w	Obj73_ShipIndex(pc,d0.w),d1
00019256 4EBB 1000                  		jsr	Obj73_ShipIndex(pc,d1.w)
0001925A 43F9 0001 8C40             		lea	(Ani_Eggman).l,a1
00019260 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
00019266 7003                       		moveq	#3,d0
00019268 C028 0022                  		and.b	obStatus(a0),d0
0001926C 0228 00FC 0001             		andi.b	#$FC,obRender(a0)
00019272 8128 0001                  		or.b	d0,obRender(a0)
00019276 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001927C                            ; ===========================================================================
0001927C 0000                       Obj73_ShipIndex:dc.w loc_18302-Obj73_ShipIndex
0001927E 0000                       		dc.w loc_183AA-Obj73_ShipIndex
00019280 0000                       		dc.w loc_184F6-Obj73_ShipIndex
00019282 0000                       		dc.w loc_1852C-Obj73_ShipIndex
00019284 0000                       		dc.w loc_18582-Obj73_ShipIndex
00019286                            ; ===========================================================================
00019286                            
00019286                            loc_18302:
00019286 1028 003F                  		move.b	$3F(a0),d0
0001928A 5428 003F                  		addq.b	#2,$3F(a0)
0001928E 4EB9 0000 27EC             		jsr	(CalcSine).l
00019294 E440                       		asr.w	#2,d0
00019296 3140 0012                  		move.w	d0,obVelY(a0)
0001929A 317C FF00 0010             		move.w	#-$100,obVelX(a0)
000192A0 6100 F58C                  		bsr.w	BossMove
000192A4 0C68 1910 0030             		cmpi.w	#$1910,$30(a0)
000192AA 6600                       		bne.s	loc_18334
000192AC 5428 0025                  		addq.b	#2,ob2ndRout(a0)
000192B0 4228 0028                  		clr.b	obSubtype(a0)
000192B4 42A8 0010                  		clr.l	obVelX(a0)
000192B8                            
000192B8                            loc_18334:
000192B8 4EB9 0000 27C6             		jsr	(RandomNumber).l
000192BE 1140 0034                  		move.b	d0,$34(a0)
000192C2                            
000192C2                            loc_1833E:
000192C2 3168 0038 000C             		move.w	$38(a0),obY(a0)
000192C8 3168 0030 0008             		move.w	$30(a0),obX(a0)
000192CE 0C28 0004 0025             		cmpi.b	#4,ob2ndRout(a0)
000192D4 6400                       		bcc.s	locret_18390
000192D6 4A28 0022                  		tst.b	obStatus(a0)
000192DA 6B00                       		bmi.s	loc_18392
000192DC 4A28 0020                  		tst.b	obColType(a0)
000192E0 6600                       		bne.s	locret_18390
000192E2 4A28 003E                  		tst.b	$3E(a0)
000192E6 6600                       		bne.s	loc_18374
000192E8 117C 0028 003E             		move.b	#$28,$3E(a0)
000192F8                            
000192F8                            loc_18374:
000192F8 43F8 FB22                  		lea	(v_pal_dry+$22).w,a1
000192FC 7000                       		moveq	#0,d0
000192FE 4A51                       		tst.w	(a1)
00019300 6600                       		bne.s	loc_18382
00019302 303C 0EEE                  		move.w	#cWhite,d0
00019306                            
00019306                            loc_18382:
00019306 3280                       		move.w	d0,(a1)
00019308 5328 003E                  		subq.b	#1,$3E(a0)
0001930C 6600                       		bne.s	locret_18390
0001930E 117C 000F 0020             		move.b	#$F,obColType(a0)
00019314                            
00019314                            locret_18390:
00019314 4E75                       		rts	
00019316                            ; ===========================================================================
00019316                            
00019316                            loc_18392:
00019316 7064                       		moveq	#100,d0
00019318 6100 0000                  		bsr.w	AddPoints
0001931C 117C 0004 0025             		move.b	#4,ob2ndRout(a0)
00019322 317C 00B4 003C             		move.w	#$B4,$3C(a0)
00019328 4268 0010                  		clr.w	obVelX(a0)
0001932C 4E75                       		rts	
0001932E                            ; ===========================================================================
0001932E                            
0001932E                            loc_183AA:
0001932E 7000                       		moveq	#0,d0
00019330 1028 0028                  		move.b	obSubtype(a0),d0
00019334 303B 0000                  		move.w	off_183C2(pc,d0.w),d0
00019338 4EBB 0000                  		jsr	off_183C2(pc,d0.w)
0001933C 0228 0006 0028             		andi.b	#6,obSubtype(a0)
00019342 6000 FF7E                  		bra.w	loc_1833E
00019346                            ; ===========================================================================
00019346 0000                       off_183C2:	dc.w loc_183CA-off_183C2
00019348 0000                       		dc.w Obj73_MakeLava2-off_183C2
0001934A 0000                       		dc.w loc_183CA-off_183C2
0001934C 0000                       		dc.w Obj73_MakeLava2-off_183C2
0001934E                            ; ===========================================================================
0001934E                            
0001934E                            loc_183CA:
0001934E 4A68 0010                  		tst.w	obVelX(a0)
00019352 6600                       		bne.s	loc_183FE
00019354 7040                       		moveq	#$40,d0
00019356 0C68 042C 0038             		cmpi.w	#$42C,$38(a0)
0001935C 6700                       		beq.s	loc_183E6
0001935E 6500                       		bcs.s	loc_183DE
00019360 4440                       		neg.w	d0
00019362                            
00019362                            loc_183DE:
00019362 3140 0012                  		move.w	d0,obVelY(a0)
00019366 6000 F4C6                  		bra.w	BossMove
0001936A                            ; ===========================================================================
0001936A                            
0001936A                            loc_183E6:
0001936A 317C 0200 0010             		move.w	#$200,obVelX(a0)
00019370 317C 0100 0012             		move.w	#$100,obVelY(a0)
00019376 0828 0000 0022             		btst	#0,obStatus(a0)
0001937C 6600                       		bne.s	loc_183FE
0001937E 4468 0010                  		neg.w	obVelX(a0)
00019382                            
00019382                            loc_183FE:
00019382 0C28 0018 003E             		cmpi.b	#$18,$3E(a0)
00019388 6400                       		bcc.s	Obj73_MakeLava
0001938A 6100 F4A2                  		bsr.w	BossMove
0001938E 5968 0012                  		subq.w	#4,obVelY(a0)
00019392                            
00019392                            Obj73_MakeLava:
00019392 5328 0034                  		subq.b	#1,$34(a0)
00019396 6400                       		bcc.s	loc_1845C
00019398 4EB9 0000 E8B0             		jsr	(FindFreeObj).l
0001939E 6600                       		bne.s	loc_1844A
000193A0 137C 0014 0000             		move.b	#id_LavaBall,0(a1) ; load lava ball object
000193A6 337C 04E8 000C             		move.w	#$4E8,obY(a1)	; set Y	position
000193AC 4EB9 0000 27C6             		jsr	(RandomNumber).l
000193B2 0280 0000 FFFF             		andi.l	#$FFFF,d0
000193B8 80FC 0050                  		divu.w	#$50,d0
000193BC 4840                       		swap	d0
000193BE 0640 1878                  		addi.w	#$1878,d0
000193C2 3340 0008                  		move.w	d0,obX(a1)
000193C6 EE09                       		lsr.b	#7,d1
000193C8 337C 00FF 0028             		move.w	#$FF,obSubtype(a1)
000193CE                            
000193CE                            loc_1844A:
000193CE 4EB9 0000 27C6             		jsr	(RandomNumber).l
000193D4 0200 001F                  		andi.b	#$1F,d0
000193D8 0600 0040                  		addi.b	#$40,d0
000193DC 1140 0034                  		move.b	d0,$34(a0)
000193E0                            
000193E0                            loc_1845C:
000193E0 0828 0000 0022             		btst	#0,obStatus(a0)
000193E6 6700                       		beq.s	loc_18474
000193E8 0C68 1910 0030             		cmpi.w	#$1910,$30(a0)
000193EE 6D00                       		blt.s	locret_1849C
000193F0 317C 1910 0030             		move.w	#$1910,$30(a0)
000193F6 6000                       		bra.s	loc_18482
000193F8                            ; ===========================================================================
000193F8                            
000193F8                            loc_18474:
000193F8 0C68 1830 0030             		cmpi.w	#$1830,$30(a0)
000193FE 6E00                       		bgt.s	locret_1849C
00019400 317C 1830 0030             		move.w	#$1830,$30(a0)
00019406                            
00019406                            loc_18482:
00019406 4268 0010                  		clr.w	obVelX(a0)
0001940A 317C FE80 0012             		move.w	#-$180,obVelY(a0)
00019410 0C68 042C 0038             		cmpi.w	#$42C,$38(a0)
00019416 6400                       		bcc.s	loc_18498
00019418 4468 0012                  		neg.w	obVelY(a0)
0001941C                            
0001941C                            loc_18498:
0001941C 5428 0028                  		addq.b	#2,obSubtype(a0)
00019420                            
00019420                            locret_1849C:
00019420 4E75                       		rts	
00019422                            ; ===========================================================================
00019422                            
00019422                            Obj73_MakeLava2:
00019422 6100 F40A                  		bsr.w	BossMove
00019426 3028 0038                  		move.w	$38(a0),d0
0001942A 0440 042C                  		subi.w	#$42C,d0
0001942E 6E00                       		bgt.s	locret_184F4
00019430 303C 042C                  		move.w	#$42C,d0
00019434 4A68 0012                  		tst.w	obVelY(a0)
00019438 6700                       		beq.s	loc_184EA
0001943A 4268 0012                  		clr.w	obVelY(a0)
0001943E 317C 0050 003C             		move.w	#$50,$3C(a0)
00019444 0868 0000 0022             		bchg	#0,obStatus(a0)
0001944A 4EB9 0000 E8B0             		jsr	(FindFreeObj).l
00019450 6600                       		bne.s	loc_184EA
00019452 3368 0030 0008             		move.w	$30(a0),obX(a1)
00019458 3368 0038 000C             		move.w	$38(a0),obY(a1)
0001945E 0669 0018 000C             		addi.w	#$18,obY(a1)
00019464 12BC 0074                  		move.b	#id_BossFire,(a1)	; load lava ball object
00019468 137C 0001 0028             		move.b	#1,obSubtype(a1)
0001946E                            
0001946E                            loc_184EA:
0001946E 5368 003C                  		subq.w	#1,$3C(a0)
00019472 6600                       		bne.s	locret_184F4
00019474 5428 0028                  		addq.b	#2,obSubtype(a0)
00019478                            
00019478                            locret_184F4:
00019478 4E75                       		rts	
0001947A                            ; ===========================================================================
0001947A                            
0001947A                            loc_184F6:
0001947A 5368 003C                  		subq.w	#1,$3C(a0)
0001947E 6B00                       		bmi.s	loc_18500
00019480 6000 F368                  		bra.w	BossDefeated
00019484                            ; ===========================================================================
00019484                            
00019484                            loc_18500:
00019484 08E8 0000 0022             		bset	#0,obStatus(a0)
0001948A 08A8 0007 0022             		bclr	#7,obStatus(a0)
00019490 4268 0010                  		clr.w	obVelX(a0)
00019494 5428 0025                  		addq.b	#2,ob2ndRout(a0)
00019498 317C FFDA 003C             		move.w	#-$26,$3C(a0)
0001949E 4A38 F7A7                  		tst.b	(v_bossstatus).w
000194A2 6600                       		bne.s	locret_1852A
000194A4 11FC 0001 F7A7             		move.b	#1,(v_bossstatus).w
000194AA 4268 0012                  		clr.w	obVelY(a0)
000194AE                            
000194AE                            locret_1852A:
000194AE 4E75                       		rts	
000194B0                            ; ===========================================================================
000194B0                            
000194B0                            loc_1852C:
000194B0 5268 003C                  		addq.w	#1,$3C(a0)
000194B4 6700                       		beq.s	loc_18544
000194B6 6A00                       		bpl.s	loc_1854E
000194B8 0C68 0270 0038             		cmpi.w	#$270,$38(a0)
000194BE 6400                       		bcc.s	loc_18544
000194C0 0668 0018 0012             		addi.w	#$18,obVelY(a0)
000194C6 6000                       		bra.s	loc_1857A
000194C8                            ; ===========================================================================
000194C8                            
000194C8                            loc_18544:
000194C8 4268 0012                  		clr.w	obVelY(a0)
000194CC 4268 003C                  		clr.w	$3C(a0)
000194D0 6000                       		bra.s	loc_1857A
000194D2                            ; ===========================================================================
000194D2                            
000194D2                            loc_1854E:
000194D2 0C68 0030 003C             		cmpi.w	#$30,$3C(a0)
000194D8 6500                       		bcs.s	loc_18566
000194DA 6700                       		beq.s	loc_1856C
000194DC 0C68 0038 003C             		cmpi.w	#$38,$3C(a0)
000194E2 6500                       		bcs.s	loc_1857A
000194E4 5428 0025                  		addq.b	#2,ob2ndRout(a0)
000194E8 6000                       		bra.s	loc_1857A
000194EA                            ; ===========================================================================
000194EA                            
000194EA                            loc_18566:
000194EA 5168 0012                  		subq.w	#8,obVelY(a0)
000194EE 6000                       		bra.s	loc_1857A
000194F0                            ; ===========================================================================
000194F0                            
000194F0                            loc_1856C:
000194F0 4268 0012                  		clr.w	obVelY(a0)
000194FE                            
000194FE                            loc_1857A:
000194FE 6100 F32E                  		bsr.w	BossMove
00019502 6000 FDBE                  		bra.w	loc_1833E
00019506                            ; ===========================================================================
00019506                            
00019506                            loc_18582:
00019506 317C 0500 0010             		move.w	#$500,obVelX(a0)
0001950C 317C FFC0 0012             		move.w	#-$40,obVelY(a0)
00019512 0C78 1960 F72A             		cmpi.w	#$1960,(v_limitright2).w
00019518 6400                       		bcc.s	loc_1859C
0001951A 5478 F72A                  		addq.w	#2,(v_limitright2).w
0001951E 6000                       		bra.s	loc_185A2
00019520                            ; ===========================================================================
00019520                            
00019520                            loc_1859C:
00019520 4A28 0001                  		tst.b	obRender(a0)
00019524 6A00                       		bpl.s	Obj73_ShipDel
00019526                            
00019526                            loc_185A2:
00019526 6100 F306                  		bsr.w	BossMove
0001952A 6000 FD96                  		bra.w	loc_1833E
0001952E                            ; ===========================================================================
0001952E                            
0001952E                            Obj73_ShipDel:
0001952E 4EF9 0000 E464             		jmp	(DeleteObject).l
00019534                            ; ===========================================================================
00019534                            
00019534                            Obj73_FaceMain:	; Routine 4
00019534 7000                       		moveq	#0,d0
00019536 7201                       		moveq	#1,d1
00019538 2268 0034                  		movea.l	$34(a0),a1
0001953C 1029 0025                  		move.b	ob2ndRout(a1),d0
00019540 5540                       		subq.w	#2,d0
00019542 6600                       		bne.s	loc_185D2
00019544 0829 0001 0028             		btst	#1,obSubtype(a1)
0001954A 6700                       		beq.s	loc_185DA
0001954C 4A69 0012                  		tst.w	obVelY(a1)
00019550 6600                       		bne.s	loc_185DA
00019552 7204                       		moveq	#4,d1
00019554 6000                       		bra.s	loc_185EE
00019556                            ; ===========================================================================
00019556                            
00019556                            loc_185D2:
00019556 5500                       		subq.b	#2,d0
00019558 6B00                       		bmi.s	loc_185DA
0001955A 720A                       		moveq	#$A,d1
0001955C 6000                       		bra.s	loc_185EE
0001955E                            ; ===========================================================================
0001955E                            
0001955E                            loc_185DA:
0001955E 4A29 0020                  		tst.b	obColType(a1)
00019562 6600                       		bne.s	loc_185E4
00019564 7205                       		moveq	#5,d1
00019566 6000                       		bra.s	loc_185EE
00019568                            ; ===========================================================================
00019568                            
00019568                            loc_185E4:
00019568 0C38 0004 D024             		cmpi.b	#4,(v_player+obRoutine).w
0001956E 6500                       		bcs.s	loc_185EE
00019570 7204                       		moveq	#4,d1
00019572                            
00019572                            loc_185EE:
00019572 1141 001C                  		move.b	d1,obAnim(a0)
00019576 5900                       		subq.b	#4,d0
00019578 6600                       		bne.s	loc_18602
0001957A 117C 0006 001C             		move.b	#6,obAnim(a0)
00019580 4A28 0001                  		tst.b	obRender(a0)
00019584 6A00                       		bpl.s	Obj73_FaceDel
00019586                            
00019586                            loc_18602:
00019586 6000                       		bra.s	Obj73_Display
00019588                            ; ===========================================================================
00019588                            
00019588                            Obj73_FaceDel:
00019588 4EF9 0000 E464             		jmp	(DeleteObject).l
0001958E                            ; ===========================================================================
0001958E                            
0001958E                            Obj73_FlameMain:; Routine 6
0001958E 117C 0007 001C             		move.b	#7,obAnim(a0)
00019594 2268 0034                  		movea.l	$34(a0),a1
00019598 0C29 0008 0025             		cmpi.b	#8,ob2ndRout(a1)
0001959E 6D00                       		blt.s	loc_1862A
000195A0 117C 000B 001C             		move.b	#$B,obAnim(a0)
000195A6 4A28 0001                  		tst.b	obRender(a0)
000195AA 6A00                       		bpl.s	Obj73_FlameDel
000195AC 6000                       		bra.s	loc_18636
000195AE                            ; ===========================================================================
000195AE                            
000195AE                            loc_1862A:
000195AE 4A69 0010                  		tst.w	obVelX(a1)
000195B2 6700                       		beq.s	loc_18636
000195B4 117C 0008 001C             		move.b	#8,obAnim(a0)
000195BA                            
000195BA                            loc_18636:
000195BA 6000                       		bra.s	Obj73_Display
000195BC                            ; ===========================================================================
000195BC                            
000195BC                            Obj73_FlameDel:
000195BC 4EF9 0000 E464             		jmp	(DeleteObject).l
000195C2                            ; ===========================================================================
000195C2                            
000195C2                            Obj73_Display:
000195C2 43F9 0001 8C40             		lea	(Ani_Eggman).l,a1
000195C8 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
000195CE                            
000195CE                            loc_1864A:
000195CE 2268 0034                  		movea.l	$34(a0),a1
000195D2 3169 0008 0008             		move.w	obX(a1),obX(a0)
000195D8 3169 000C 000C             		move.w	obY(a1),obY(a0)
000195DE 1169 0022 0022             		move.b	obStatus(a1),obStatus(a0)
000195E4 7003                       		moveq	#3,d0
000195E6 C028 0022                  		and.b	obStatus(a0),d0
000195EA 0228 00FC 0001             		andi.b	#$FC,obRender(a0)
000195F0 8128 0001                  		or.b	d0,obRender(a0)
000195F4 4EF9 0000 E428             		jmp	(DisplaySprite).l
000195FA                            ; ===========================================================================
000195FA                            
000195FA                            Obj73_TubeMain:	; Routine 8
000195FA 2268 0034                  		movea.l	$34(a0),a1
000195FE 0C29 0008 0025             		cmpi.b	#8,ob2ndRout(a1)
00019604 6600                       		bne.s	loc_18688
00019606 4A28 0001                  		tst.b	obRender(a0)
0001960A 6A00                       		bpl.s	Obj73_TubeDel
0001960C                            
0001960C                            loc_18688:
0001960C 217C 0001 8D58 0004        		move.l	#Map_BossItems,obMap(a0)
00019614 317C 246C 0002             		move.w	#$246C,obGfx(a0)
0001961A 117C 0004 001A             		move.b	#4,obFrame(a0)
00019620 60AC                       		bra.s	loc_1864A
00019622                            ; ===========================================================================
00019622                            
00019622                            Obj73_TubeDel:
00019622 4EF9 0000 E464             		jmp	(DeleteObject).l
00019622 4EF9 0000 E464             		jmp	(DeleteObject).l
00019628                            		include	"_incObj\74 MZ Boss Fire.asm"
00019628                            ; ---------------------------------------------------------------------------
00019628                            ; Object 74 - lava that	Eggman drops (MZ)
00019628                            ; ---------------------------------------------------------------------------
00019628                            
00019628                            BossFire:
00019628 7000                       		moveq	#0,d0
0001962A 1028 0024                  		move.b	obRoutine(a0),d0
0001962E 303B 0000                  		move.w	Obj74_Index(pc,d0.w),d0
00019632 4EBB 0000                  		jsr	Obj74_Index(pc,d0.w)
00019636 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001963C                            ; ===========================================================================
0001963C 0000                       Obj74_Index:	dc.w Obj74_Main-Obj74_Index
0001963E 0000                       		dc.w Obj74_Action-Obj74_Index
00019640 0000                       		dc.w loc_18886-Obj74_Index
00019642 0000                       		dc.w Obj74_Delete3-Obj74_Index
00019644                            ; ===========================================================================
00019644                            
00019644                            Obj74_Main:	; Routine 0
00019644 117C 0008 0016             		move.b	#8,obHeight(a0)
0001964A 117C 0008 0017             		move.b	#8,obWidth(a0)
00019650 217C 0000 C0D2 0004        		move.l	#Map_Fire,obMap(a0)
00019658 317C 0345 0002             		move.w	#$345,obGfx(a0)
0001965E 117C 0004 0001             		move.b	#4,obRender(a0)
00019664 117C 0005 0018             		move.b	#5,obPriority(a0)
0001966A 3168 000C 0038             		move.w	obY(a0),$38(a0)
00019670 117C 0008 0019             		move.b	#8,obActWid(a0)
00019676 5428 0024                  		addq.b	#2,obRoutine(a0)
0001967A 4A28 0028                  		tst.b	obSubtype(a0)
0001967E 6600                       		bne.s	loc_1870A
00019680 117C 008B 0020             		move.b	#$8B,obColType(a0)
00019686 5428 0024                  		addq.b	#2,obRoutine(a0)
0001968A 6000 0000                  		bra.w	loc_18886
0001968E                            ; ===========================================================================
0001968E                            
0001968E                            loc_1870A:
0001968E 117C 001E 0029             		move.b	#$1E,$29(a0)
0001969E                            
0001969E                            Obj74_Action:	; Routine 2
0001969E 7000                       		moveq	#0,d0
000196A0 1028 0025                  		move.b	ob2ndRout(a0),d0
000196A4 303B 0000                  		move.w	Obj74_Index2(pc,d0.w),d0
000196A8 4EBB 0000                  		jsr	Obj74_Index2(pc,d0.w)
000196AC 4EB9 0000 E402             		jsr	(SpeedToPos).l
000196B2 43F9 0000 F2B0             		lea	(Ani_Fire).l,a1
000196B8 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
000196BE 0C68 02E8 000C             		cmpi.w	#$2E8,obY(a0)
000196C4 6200                       		bhi.s	Obj74_Delete
000196C6 4E75                       		rts	
000196C8                            ; ===========================================================================
000196C8                            
000196C8                            Obj74_Delete:
000196C8 4EF9 0000 E464             		jmp	(DeleteObject).l
000196CE                            ; ===========================================================================
000196CE 0000                       Obj74_Index2:	dc.w Obj74_Drop-Obj74_Index2
000196D0 0000                       		dc.w Obj74_MakeFlame-Obj74_Index2
000196D2 0000                       		dc.w Obj74_Duplicate-Obj74_Index2
000196D4 0000                       		dc.w Obj74_FallEdge-Obj74_Index2
000196D6                            ; ===========================================================================
000196D6                            
000196D6                            Obj74_Drop:
000196D6 08E8 0001 0022             		bset	#1,obStatus(a0)
000196DC 5328 0029                  		subq.b	#1,$29(a0)
000196E0 6A00                       		bpl.s	locret_18780
000196E2 117C 008B 0020             		move.b	#$8B,obColType(a0)
000196E8 4228 0028                  		clr.b	obSubtype(a0)
000196EC 0668 0018 0012             		addi.w	#$18,obVelY(a0)
000196F2 08A8 0001 0022             		bclr	#1,obStatus(a0)
000196F8 6100 C678                  		bsr.w	ObjFloorDist
000196FC 4A41                       		tst.w	d1
000196FE 6A00                       		bpl.s	locret_18780
00019700 5428 0025                  		addq.b	#2,ob2ndRout(a0)
00019704                            
00019704                            locret_18780:
00019704 4E75                       		rts	
00019706                            ; ===========================================================================
00019706                            
00019706                            Obj74_MakeFlame:
00019706 5568 000C                  		subq.w	#2,obY(a0)
0001970A 08E8 0007 0002             		bset	#7,obGfx(a0)
00019710 317C 00A0 0010             		move.w	#$A0,obVelX(a0)
00019716 4268 0012                  		clr.w	obVelY(a0)
0001971A 3168 0008 0030             		move.w	obX(a0),$30(a0)
00019720 3168 000C 0038             		move.w	obY(a0),$38(a0)
00019726 117C 0003 0029             		move.b	#3,$29(a0)
0001972C 4EB9 0000 E8C6             		jsr	(FindNextFreeObj).l
00019732 6600                       		bne.s	loc_187CA
00019734 47D1                       		lea	(a1),a3
00019736 45D0                       		lea	(a0),a2
00019738 7003                       		moveq	#3,d0
0001973A                            
0001973A                            Obj74_Loop:
0001973A 26DA                       		move.l	(a2)+,(a3)+
0001973C 26DA                       		move.l	(a2)+,(a3)+
0001973E 26DA                       		move.l	(a2)+,(a3)+
00019740 26DA                       		move.l	(a2)+,(a3)+
00019742 51C8 FFF6                  		dbf	d0,Obj74_Loop
00019746                            
00019746 4469 0010                  		neg.w	obVelX(a1)
0001974A 5429 0025                  		addq.b	#2,ob2ndRout(a1)
0001974E                            
0001974E                            loc_187CA:
0001974E 5428 0025                  		addq.b	#2,ob2ndRout(a0)
00019752 4E75                       		rts	
00019754                            
00019754                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00019754                            
00019754                            
00019754                            Obj74_Duplicate2:
00019754 4EB9 0000 E8C6             		jsr	(FindNextFreeObj).l
0001975A 6600                       		bne.s	locret_187EE
0001975C 3368 0008 0008             		move.w	obX(a0),obX(a1)
00019762 3368 000C 000C             		move.w	obY(a0),obY(a1)
00019768 12BC 0074                  		move.b	#id_BossFire,(a1)
0001976C 337C 0067 0028             		move.w	#$67,obSubtype(a1)
00019772                            
00019772                            locret_187EE:
00019772 4E75                       		rts	
00019774                            ; End of function Obj74_Duplicate2
00019774                            
00019774                            ; ===========================================================================
00019774                            
00019774                            Obj74_Duplicate:
00019774 6100 C5FC                  		bsr.w	ObjFloorDist
00019778 4A41                       		tst.w	d1
0001977A 6A00                       		bpl.s	loc_18826
0001977C 3028 0008                  		move.w	obX(a0),d0
00019780 0C40 1940                  		cmpi.w	#$1940,d0
00019784 6E00                       		bgt.s	loc_1882C
00019786 3228 0030                  		move.w	$30(a0),d1
0001978A B240                       		cmp.w	d0,d1
0001978C 6700                       		beq.s	loc_1881E
0001978E 0240 0010                  		andi.w	#$10,d0
00019792 0241 0010                  		andi.w	#$10,d1
00019796 B240                       		cmp.w	d0,d1
00019798 6700                       		beq.s	loc_1881E
0001979A 61B8                       		bsr.s	Obj74_Duplicate2
0001979C 3168 0008 0032             		move.w	obX(a0),$32(a0)
000197A2                            
000197A2                            loc_1881E:
000197A2 3168 0008 0030             		move.w	obX(a0),$30(a0)
000197A8 4E75                       		rts	
000197AA                            ; ===========================================================================
000197AA                            
000197AA                            loc_18826:
000197AA 5428 0025                  		addq.b	#2,ob2ndRout(a0)
000197AE 4E75                       		rts	
000197B0                            ; ===========================================================================
000197B0                            
000197B0                            loc_1882C:
000197B0 5428 0024                  		addq.b	#2,obRoutine(a0)
000197B4 4E75                       		rts	
000197B6                            ; ===========================================================================
000197B6                            
000197B6                            Obj74_FallEdge:
000197B6 08A8 0001 0022             		bclr	#1,obStatus(a0)
000197BC 0668 0024 0012             		addi.w	#$24,obVelY(a0)	; make flame fall
000197C2 3028 0008                  		move.w	obX(a0),d0
000197C6 9068 0032                  		sub.w	$32(a0),d0
000197CA 6A00                       		bpl.s	loc_1884A
000197CC 4440                       		neg.w	d0
000197CE                            
000197CE                            loc_1884A:
000197CE 0C40 0012                  		cmpi.w	#$12,d0
000197D2 6600                       		bne.s	loc_18856
000197D4 08A8 0007 0002             		bclr	#7,obGfx(a0)
000197DA                            
000197DA                            loc_18856:
000197DA 6100 C596                  		bsr.w	ObjFloorDist
000197DE 4A41                       		tst.w	d1
000197E0 6A00                       		bpl.s	locret_1887E
000197E2 5328 0029                  		subq.b	#1,$29(a0)
000197E6 6700                       		beq.s	Obj74_Delete2
000197E8 4268 0012                  		clr.w	obVelY(a0)
000197EC 3168 0032 0008             		move.w	$32(a0),obX(a0)
000197F2 3168 0038 000C             		move.w	$38(a0),obY(a0)
000197F8 08E8 0007 0002             		bset	#7,obGfx(a0)
000197FE 5528 0025                  		subq.b	#2,ob2ndRout(a0)
00019802                            
00019802                            locret_1887E:
00019802 4E75                       		rts	
00019804                            ; ===========================================================================
00019804                            
00019804                            Obj74_Delete2:
00019804 4EF9 0000 E464             		jmp	(DeleteObject).l
0001980A                            ; ===========================================================================
0001980A                            
0001980A                            loc_18886:	; Routine 4
0001980A 08E8 0007 0002             		bset	#7,obGfx(a0)
00019810 5328 0029                  		subq.b	#1,$29(a0)
00019814 6600                       		bne.s	Obj74_Animate
00019816 117C 0001 001C             		move.b	#1,obAnim(a0)
0001981C 5968 000C                  		subq.w	#4,obY(a0)
00019820 4228 0020                  		clr.b	obColType(a0)
00019824                            
00019824                            Obj74_Animate:
00019824 43F9 0000 F2B0             		lea	(Ani_Fire).l,a1
0001982A 4EF9 0000 B1E6             		jmp	(AnimateSprite).l
00019830                            ; ===========================================================================
00019830                            
00019830                            Obj74_Delete3:	; Routine 6
00019830 4EF9 0000 E464             		jmp	(DeleteObject).l
00019830 4EF9 0000 E464             		jmp	(DeleteObject).l
00019836                            
00019836                            	Obj7A_Delete:
00019836 4EF9 0000 E464             		jmp	(DeleteObject).l
0001983C                            
0001983C                            		include	"_incObj\7A Boss - Star Light.asm"
0001983C                            ; ---------------------------------------------------------------------------
0001983C                            ; Object 7A - Eggman (SLZ)
0001983C                            ; ---------------------------------------------------------------------------
0001983C                            
0001983C                            BossStarLight:
0001983C 7000                       		moveq	#0,d0
0001983E 1028 0024                  		move.b	obRoutine(a0),d0
00019842 323B 0000                  		move.w	Obj7A_Index(pc,d0.w),d1
00019846 4EFB 1000                  		jmp	Obj7A_Index(pc,d1.w)
0001984A                            ; ===========================================================================
0001984A 0000                       Obj7A_Index:	dc.w Obj7A_Main-Obj7A_Index
0001984C 0000                       		dc.w Obj7A_ShipMain-Obj7A_Index
0001984E 0000                       		dc.w Obj7A_FaceMain-Obj7A_Index
00019850 0000                       		dc.w Obj7A_FlameMain-Obj7A_Index
00019852 0000                       		dc.w Obj7A_TubeMain-Obj7A_Index
00019854                            
00019854 0200 04                    Obj7A_ObjData:	dc.b 2,	0, 4		; routine number, animation, priority
00019857 0401 04                    		dc.b 4,	1, 4
0001985A 0607 04                    		dc.b 6,	7, 4
0001985D 0800 03                    		dc.b 8,	0, 3
00019860                            ; ===========================================================================
00019860                            
00019860                            Obj7A_Main:
00019860 317C 2188 0008             		move.w	#$2188,obX(a0)
00019866 317C 0228 000C             		move.w	#$228,obY(a0)
0001986C 3168 0008 0030             		move.w	obX(a0),$30(a0)
00019872 3168 000C 0038             		move.w	obY(a0),$38(a0)
00019878 117C 000F 0020             		move.b	#$F,obColType(a0)
0001987E 117C 0008 0021             		move.b	#8,obColProp(a0) ; set number of hits to 8
00019884 45FA FFCE                  		lea	Obj7A_ObjData(pc),a2
00019888 2248                       		movea.l	a0,a1
0001988A 7203                       		moveq	#3,d1
0001988C 6000                       		bra.s	Obj7A_LoadBoss
0001988E                            ; ===========================================================================
0001988E                            
0001988E                            Obj7A_Loop:
0001988E 4EB9 0000 E8C6             		jsr	(FindNextFreeObj).l
00019894 6600                       		bne.s	loc_1895C
00019896 137C 007A 0000             		move.b	#id_BossStarLight,0(a1)
0001989C 3368 0008 0008             		move.w	obX(a0),obX(a1)
000198A2 3368 000C 000C             		move.w	obY(a0),obY(a1)
000198A8                            
000198A8                            Obj7A_LoadBoss:
000198A8 08A8 0000 0022             		bclr	#0,obStatus(a0)
000198AE 4229 0025                  		clr.b	ob2ndRout(a1)
000198B2 135A 0024                  		move.b	(a2)+,obRoutine(a1)
000198B6 135A 001C                  		move.b	(a2)+,obAnim(a1)
000198BA 135A 0018                  		move.b	(a2)+,obPriority(a1)
000198BE 237C 0001 8C90 0004        		move.l	#Map_Eggman,obMap(a1)
000198C6 337C 0400 0002             		move.w	#$400,obGfx(a1)
000198CC 137C 0004 0001             		move.b	#4,obRender(a1)
000198D2 137C 0020 0019             		move.b	#$20,obActWid(a1)
000198D8 2348 0034                  		move.l	a0,$34(a1)
000198DC 51C9 FFB0                  		dbf	d1,Obj7A_Loop	; repeat sequence 3 more times
000198E0                            
000198E0                            loc_1895C:
000198E0 43F8 D040                  		lea	(v_objspace+$40).w,a1
000198E4 45E8 002A                  		lea	$2A(a0),a2
000198E8 705E                       		moveq	#$5E,d0
000198EA 723E                       		moveq	#$3E,d1
000198EC                            
000198EC                            loc_18968:
000198EC B011                       		cmp.b	(a1),d0
000198EE 6600                       		bne.s	loc_18974
000198F0 4A29 0028                  		tst.b	obSubtype(a1)
000198F4 6700                       		beq.s	loc_18974
000198F6 34C9                       		move.w	a1,(a2)+
000198F8                            
000198F8                            loc_18974:
000198F8 D2FC 0040                  		adda.w	#$40,a1
000198FC 51C9 FFEE                  		dbf	d1,loc_18968
00019900                            
00019900                            Obj7A_ShipMain:	; Routine 2
00019900 7000                       		moveq	#0,d0
00019902 1028 0025                  		move.b	ob2ndRout(a0),d0
00019906 303B 0000                  		move.w	Obj7A_ShipIndex(pc,d0.w),d0
0001990A 4EBB 0000                  		jsr	Obj7A_ShipIndex(pc,d0.w)
0001990E 43F9 0001 8C40             		lea	(Ani_Eggman).l,a1
00019914 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
0001991A 7003                       		moveq	#3,d0
0001991C C028 0022                  		and.b	obStatus(a0),d0
00019920 0228 00FC 0001             		andi.b	#$FC,obRender(a0)
00019926 8128 0001                  		or.b	d0,obRender(a0)
0001992A 4EF9 0000 E428             		jmp	(DisplaySprite).l
00019930                            ; ===========================================================================
00019930 0000                       Obj7A_ShipIndex:dc.w loc_189B8-Obj7A_ShipIndex
00019932 0000                       		dc.w loc_18A5E-Obj7A_ShipIndex
00019934 0000                       		dc.w Obj7A_MakeBall-Obj7A_ShipIndex
00019936 0000                       		dc.w loc_18B48-Obj7A_ShipIndex
00019938 0000                       		dc.w loc_18B80-Obj7A_ShipIndex
0001993A 0000                       		dc.w loc_18BC6-Obj7A_ShipIndex
0001993C                            ; ===========================================================================
0001993C                            
0001993C                            loc_189B8:
0001993C 317C FF00 0010             		move.w	#-$100,obVelX(a0)
00019942 0C68 2120 0030             		cmpi.w	#$2120,$30(a0)
00019948 6400                       		bcc.s	loc_189CA
0001994A 5428 0025                  		addq.b	#2,ob2ndRout(a0)
0001994E                            
0001994E                            loc_189CA:
0001994E 6100 EEDE                  		bsr.w	BossMove
00019952 1028 003F                  		move.b	$3F(a0),d0
00019956 5428 003F                  		addq.b	#2,$3F(a0)
0001995A 4EB9 0000 27EC             		jsr	(CalcSine).l
00019960 EC40                       		asr.w	#6,d0
00019962 D068 0038                  		add.w	$38(a0),d0
00019966 3140 000C                  		move.w	d0,obY(a0)
0001996A 3168 0030 0008             		move.w	$30(a0),obX(a0)
00019970 6000                       		bra.s	loc_189FE
00019972                            ; ===========================================================================
00019972                            
00019972                            loc_189EE:
00019972 6100 EEBA                  		bsr.w	BossMove
00019976 3168 0038 000C             		move.w	$38(a0),obY(a0)
0001997C 3168 0030 0008             		move.w	$30(a0),obX(a0)
00019982                            
00019982                            loc_189FE:
00019982 0C28 0006 0025             		cmpi.b	#6,ob2ndRout(a0)
00019988 6400                       		bcc.s	locret_18A44
0001998A 4A28 0022                  		tst.b	obStatus(a0)
0001998E 6B00                       		bmi.s	loc_18A46
00019990 4A28 0020                  		tst.b	obColType(a0)
00019994 6600                       		bne.s	locret_18A44
00019996 4A28 003E                  		tst.b	$3E(a0)
0001999A 6600                       		bne.s	loc_18A28
0001999C 117C 0020 003E             		move.b	#$20,$3E(a0)
000199AC                            
000199AC                            loc_18A28:
000199AC 43F8 FB22                  		lea	(v_pal_dry+$22).w,a1
000199B0 7000                       		moveq	#0,d0
000199B2 4A51                       		tst.w	(a1)
000199B4 6600                       		bne.s	loc_18A36
000199B6 303C 0EEE                  		move.w	#cWhite,d0
000199BA                            
000199BA                            loc_18A36:
000199BA 3280                       		move.w	d0,(a1)
000199BC 5328 003E                  		subq.b	#1,$3E(a0)
000199C0 6600                       		bne.s	locret_18A44
000199C2 117C 000F 0020             		move.b	#$F,obColType(a0)
000199C8                            
000199C8                            locret_18A44:
000199C8 4E75                       		rts	
000199CA                            ; ===========================================================================
000199CA                            
000199CA                            loc_18A46:
000199CA 7064                       		moveq	#100,d0
000199CC 6100 0000                  		bsr.w	AddPoints
000199D0 117C 0006 0025             		move.b	#6,ob2ndRout(a0)
000199D6 117C 0078 003C             		move.b	#$78,$3C(a0)
000199DC 4268 0010                  		clr.w	obVelX(a0)
000199E0 4E75                       		rts	
000199E2                            ; ===========================================================================
000199E2                            
000199E2                            loc_18A5E:
000199E2 3028 0030                  		move.w	$30(a0),d0
000199E6 317C 0200 0010             		move.w	#$200,obVelX(a0)
000199EC 0828 0000 0022             		btst	#0,obStatus(a0)
000199F2 6600                       		bne.s	loc_18A7C
000199F4 4468 0010                  		neg.w	obVelX(a0)
000199F8 0C40 2008                  		cmpi.w	#$2008,d0
000199FC 6E00                       		bgt.s	loc_18A88
000199FE 6000                       		bra.s	loc_18A82
00019A00                            ; ===========================================================================
00019A00                            
00019A00                            loc_18A7C:
00019A00 0C40 2138                  		cmpi.w	#$2138,d0
00019A04 6D00                       		blt.s	loc_18A88
00019A06                            
00019A06                            loc_18A82:
00019A06 0868 0000 0022             		bchg	#0,obStatus(a0)
00019A0C                            
00019A0C                            loc_18A88:
00019A0C 3028 0008                  		move.w	8(a0),d0
00019A10 72FF                       		moveq	#-1,d1
00019A12 7402                       		moveq	#2,d2
00019A14 45E8 002A                  		lea	$2A(a0),a2
00019A18 7828                       		moveq	#$28,d4
00019A1A 4A68 0010                  		tst.w	obVelX(a0)
00019A1E 6A00                       		bpl.s	loc_18A9E
00019A20 4444                       		neg.w	d4
00019A22                            
00019A22                            loc_18A9E:
00019A22 321A                       		move.w	(a2)+,d1
00019A24 2641                       		movea.l	d1,a3
00019A26 082B 0003 0022             		btst	#3,obStatus(a3)
00019A2C 6600                       		bne.s	loc_18AB4
00019A2E 362B 0008                  		move.w	8(a3),d3
00019A32 D644                       		add.w	d4,d3
00019A34 9640                       		sub.w	d0,d3
00019A36 6700                       		beq.s	loc_18AC0
00019A38                            
00019A38                            loc_18AB4:
00019A38 51CA FFE8                  		dbf	d2,loc_18A9E
00019A3C                            
00019A3C 1142 0028                  		move.b	d2,obSubtype(a0)
00019A40 6000 FF0C                  		bra.w	loc_189CA
00019A44                            ; ===========================================================================
00019A44                            
00019A44                            loc_18AC0:
00019A44 1142 0028                  		move.b	d2,obSubtype(a0)
00019A48 5428 0025                  		addq.b	#2,ob2ndRout(a0)
00019A4C 117C 0028 003C             		move.b	#$28,$3C(a0)
00019A52 6000 FEFA                  		bra.w	loc_189CA
00019A56                            ; ===========================================================================
00019A56                            
00019A56                            Obj7A_MakeBall:
00019A56 0C28 0028 003C             		cmpi.b	#$28,$3C(a0)
00019A5C 6600                       		bne.s	loc_18B36
00019A5E 70FF                       		moveq	#-1,d0
00019A60 1028 0028                  		move.b	obSubtype(a0),d0
00019A64 4880                       		ext.w	d0
00019A66 6B00                       		bmi.s	loc_18B40
00019A68 5540                       		subq.w	#2,d0
00019A6A 4440                       		neg.w	d0
00019A6C D040                       		add.w	d0,d0
00019A6E 43E8 002A                  		lea	$2A(a0),a1
00019A72 3031 0000                  		move.w	(a1,d0.w),d0
00019A76 2440                       		movea.l	d0,a2
00019A78 43F8 D040                  		lea	(v_objspace+$40).w,a1
00019A7C 723E                       		moveq	#$3E,d1
00019A7E                            
00019A7E                            loc_18AFA:
00019A7E B0A9 003C                  		cmp.l	$3C(a1),d0
00019A82 6700                       		beq.s	loc_18B40
00019A84 D2FC 0040                  		adda.w	#$40,a1
00019A88 51C9 FFF4                  		dbf	d1,loc_18AFA
00019A8C                            
00019A8C 2F08                       		move.l	a0,-(sp)
00019A8E 41D2                       		lea	(a2),a0
00019A90 4EB9 0000 E8C6             		jsr	(FindNextFreeObj).l
00019A96 205F                       		movea.l	(sp)+,a0
00019A98 6600                       		bne.s	loc_18B40
00019A9A 12BC 007B                  		move.b	#id_BossSpikeball,(a1) ; load spiked ball object
00019A9E 3368 0008 0008             		move.w	obX(a0),obX(a1)
00019AA4 3368 000C 000C             		move.w	obY(a0),obY(a1)
00019AAA 0669 0020 000C             		addi.w	#$20,obY(a1)
00019AB0 136A 0022 0022             		move.b	obStatus(a2),obStatus(a1)
00019AB6 234A 003C                  		move.l	a2,$3C(a1)
00019ABA                            
00019ABA                            loc_18B36:
00019ABA 5328 003C                  		subq.b	#1,$3C(a0)
00019ABE 6700                       		beq.s	loc_18B40
00019AC0 6000 FEC0                  		bra.w	loc_189FE
00019AC4                            ; ===========================================================================
00019AC4                            
00019AC4                            loc_18B40:
00019AC4 5528 0025                  		subq.b	#2,ob2ndRout(a0)
00019AC8 6000 FE84                  		bra.w	loc_189CA
00019ACC                            ; ===========================================================================
00019ACC                            
00019ACC                            loc_18B48:
00019ACC 5328 003C                  		subq.b	#1,$3C(a0)
00019AD0 6B00                       		bmi.s	loc_18B52
00019AD2 6000 ED16                  		bra.w	BossDefeated
00019AD6                            ; ===========================================================================
00019AD6                            
00019AD6                            loc_18B52:
00019AD6 5428 0025                  		addq.b	#2,ob2ndRout(a0)
00019ADA 4268 0012                  		clr.w	obVelY(a0)
00019ADE 08E8 0000 0022             		bset	#0,obStatus(a0)
00019AE4 08A8 0007 0022             		bclr	#7,obStatus(a0)
00019AEA 4268 0010                  		clr.w	obVelX(a0)
00019AEE 117C 00E8 003C             		move.b	#-$18,$3C(a0)
00019AF4 4A38 F7A7                  		tst.b	(v_bossstatus).w
00019AF8 6600                       		bne.s	loc_18B7C
00019AFA 11FC 0001 F7A7             		move.b	#1,(v_bossstatus).w
00019B00                            
00019B00                            loc_18B7C:
00019B00 6000 FE80                  		bra.w	loc_189FE
00019B04                            ; ===========================================================================
00019B04                            
00019B04                            loc_18B80:
00019B04 5228 003C                  		addq.b	#1,$3C(a0)
00019B08 6700                       		beq.s	loc_18B90
00019B0A 6A00                       		bpl.s	loc_18B96
00019B0C 0668 0018 0012             		addi.w	#$18,obVelY(a0)
00019B12 6000                       		bra.s	loc_18BC2
00019B14                            ; ===========================================================================
00019B14                            
00019B14                            loc_18B90:
00019B14 4268 0012                  		clr.w	obVelY(a0)
00019B18 6000                       		bra.s	loc_18BC2
00019B1A                            ; ===========================================================================
00019B1A                            
00019B1A                            loc_18B96:
00019B1A 0C28 0020 003C             		cmpi.b	#$20,$3C(a0)
00019B20 6500                       		bcs.s	loc_18BAE
00019B22 6700                       		beq.s	loc_18BB4
00019B24 0C28 002A 003C             		cmpi.b	#$2A,$3C(a0)
00019B2A 6500                       		bcs.s	loc_18BC2
00019B2C 5428 0025                  		addq.b	#2,ob2ndRout(a0)
00019B30 6000                       		bra.s	loc_18BC2
00019B32                            ; ===========================================================================
00019B32                            
00019B32                            loc_18BAE:
00019B32 5168 0012                  		subq.w	#8,obVelY(a0)
00019B36 6000                       		bra.s	loc_18BC2
00019B38                            ; ===========================================================================
00019B38                            
00019B38                            loc_18BB4:
00019B38 4268 0012                  		clr.w	obVelY(a0)
00019B46                            
00019B46                            loc_18BC2:
00019B46 6000 FE2A                  		bra.w	loc_189EE
00019B4A                            ; ===========================================================================
00019B4A                            
00019B4A                            loc_18BC6:
00019B4A 317C 0400 0010             		move.w	#$400,obVelX(a0)
00019B50 317C FFC0 0012             		move.w	#-$40,obVelY(a0)
00019B56 0C78 2160 F72A             		cmpi.w	#$2160,(v_limitright2).w
00019B5C 6400                       		bcc.s	loc_18BE0
00019B5E 5478 F72A                  		addq.w	#2,(v_limitright2).w
00019B62 6000                       		bra.s	loc_18BE8
00019B64                            ; ===========================================================================
00019B64                            
00019B64                            loc_18BE0:
00019B64 4A28 0001                  		tst.b	obRender(a0)
00019B68 6A00 FCCC                  		bpl.w	Obj7A_Delete
00019B6C                            
00019B6C                            loc_18BE8:
00019B6C 6100 ECC0                  		bsr.w	BossMove
00019B70 6000 FDDC                  		bra.w	loc_189CA
00019B74                            ; ===========================================================================
00019B74                            
00019B74                            Obj7A_FaceMain:	; Routine 4
00019B74 7000                       		moveq	#0,d0
00019B76 7201                       		moveq	#1,d1
00019B78 2268 0034                  		movea.l	$34(a0),a1
00019B7C 1029 0025                  		move.b	ob2ndRout(a1),d0
00019B80 0C00 0006                  		cmpi.b	#6,d0
00019B84 6B00                       		bmi.s	loc_18C06
00019B86 720A                       		moveq	#$A,d1
00019B88 6000                       		bra.s	loc_18C1A
00019B8A                            ; ===========================================================================
00019B8A                            
00019B8A                            loc_18C06:
00019B8A 4A29 0020                  		tst.b	obColType(a1)
00019B8E 6600                       		bne.s	loc_18C10
00019B90 7205                       		moveq	#5,d1
00019B92 6000                       		bra.s	loc_18C1A
00019B94                            ; ===========================================================================
00019B94                            
00019B94                            loc_18C10:
00019B94 0C38 0004 D024             		cmpi.b	#4,(v_player+obRoutine).w
00019B9A 6500                       		bcs.s	loc_18C1A
00019B9C 7204                       		moveq	#4,d1
00019B9E                            
00019B9E                            loc_18C1A:
00019B9E 1141 001C                  		move.b	d1,obAnim(a0)
00019BA2 0C00 000A                  		cmpi.b	#$A,d0
00019BA6 6600                       		bne.s	loc_18C32
00019BA8 117C 0006 001C             		move.b	#6,obAnim(a0)
00019BAE 4A28 0001                  		tst.b	obRender(a0)
00019BB2 6A00 FC82                  		bpl.w	Obj7A_Delete
00019BB6                            
00019BB6                            loc_18C32:
00019BB6 6000                       		bra.s	loc_18C6C
00019BB8                            ; ===========================================================================
00019BB8                            
00019BB8                            Obj7A_FlameMain:; Routine 6
00019BB8 117C 0008 001C             		move.b	#8,obAnim(a0)
00019BBE 2268 0034                  		movea.l	$34(a0),a1
00019BC2 0C29 000A 0025             		cmpi.b	#$A,ob2ndRout(a1)
00019BC8 6600                       		bne.s	loc_18C56
00019BCA 4A28 0001                  		tst.b	obRender(a0)
00019BCE 6A00 FC66                  		bpl.w	Obj7A_Delete
00019BD2 117C 000B 001C             		move.b	#$B,obAnim(a0)
00019BD8 6000                       		bra.s	loc_18C6C
00019BDA                            ; ===========================================================================
00019BDA                            
00019BDA                            loc_18C56:
00019BDA 0C29 0008 0025             		cmpi.b	#8,ob2ndRout(a1)
00019BE0 6E00                       		bgt.s	loc_18C6C
00019BE2 0C29 0004 0025             		cmpi.b	#4,ob2ndRout(a1)
00019BE8 6D00                       		blt.s	loc_18C6C
00019BEA 117C 0007 001C             		move.b	#7,obAnim(a0)
00019BF0                            
00019BF0                            loc_18C6C:
00019BF0 43F9 0001 8C40             		lea	(Ani_Eggman).l,a1
00019BF6 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
00019BFC                            
00019BFC                            loc_18C78:
00019BFC 2268 0034                  		movea.l	$34(a0),a1
00019C00 3169 0008 0008             		move.w	obX(a1),obX(a0)
00019C06 3169 000C 000C             		move.w	obY(a1),obY(a0)
00019C0C 1169 0022 0022             		move.b	obStatus(a1),obStatus(a0)
00019C12 7003                       		moveq	#3,d0
00019C14 C028 0022                  		and.b	obStatus(a0),d0
00019C18 0228 00FC 0001             		andi.b	#$FC,obRender(a0)
00019C1E 8128 0001                  		or.b	d0,obRender(a0)
00019C22 4EF9 0000 E428             		jmp	(DisplaySprite).l
00019C28                            ; ===========================================================================
00019C28                            
00019C28                            Obj7A_TubeMain:	; Routine 8
00019C28 2268 0034                  		movea.l	$34(a0),a1
00019C2C 0C29 000A 0025             		cmpi.b	#$A,ob2ndRout(a1)
00019C32 6600                       		bne.s	loc_18CB8
00019C34 4A28 0001                  		tst.b	obRender(a0)
00019C38 6A00 FBFC                  		bpl.w	Obj7A_Delete
00019C3C                            
00019C3C                            loc_18CB8:
00019C3C 217C 0001 8D58 0004        		move.l	#Map_BossItems,obMap(a0)
00019C44 317C 246C 0002             		move.w	#$246C,obGfx(a0)
00019C4A 117C 0003 001A             		move.b	#3,obFrame(a0)
00019C50 60AA                       		bra.s	loc_18C78
00019C50 60AA                       		bra.s	loc_18C78
00019C52                            		include	"_incObj\7B SLZ Boss Spikeball.asm"
00019C52                            ; ---------------------------------------------------------------------------
00019C52                            ; Object 7B - exploding	spikeys	that Eggman drops (SLZ)
00019C52                            ; ---------------------------------------------------------------------------
00019C52                            
00019C52                            BossSpikeball:
00019C52 7000                       		moveq	#0,d0
00019C54 1028 0024                  		move.b	obRoutine(a0),d0
00019C58 303B 0000                  		move.w	Obj7B_Index(pc,d0.w),d0
00019C5C 4EBB 0000                  		jsr	Obj7B_Index(pc,d0.w)
00019C60 3028 0030                  		move.w	$30(a0),d0
00019C64 0240 FF80                  		andi.w	#$FF80,d0
00019C68 3238 F700                  		move.w	(v_screenposx).w,d1
00019C6C 0441 0080                  		subi.w	#$80,d1
00019C70 0241 FF80                  		andi.w	#$FF80,d1
00019C74 9041                       		sub.w	d1,d0
00019C76 6B00 FBBE                  		bmi.w	Obj7A_Delete
00019C7A 0C40 0280                  		cmpi.w	#$280,d0
00019C7E 6200 FBB6                  		bhi.w	Obj7A_Delete
00019C82 4EF9 0000 E428             		jmp	(DisplaySprite).l
00019C88                            ; ===========================================================================
00019C88 0000                       Obj7B_Index:	dc.w Obj7B_Main-Obj7B_Index
00019C8A 0000                       		dc.w Obj7B_Fall-Obj7B_Index
00019C8C 0000                       		dc.w loc_18DC6-Obj7B_Index
00019C8E 0000                       		dc.w loc_18EAA-Obj7B_Index
00019C90 0000                       		dc.w Obj7B_Explode-Obj7B_Index
00019C92 0000                       		dc.w Obj7B_MoveFrag-Obj7B_Index
00019C94                            ; ===========================================================================
00019C94                            
00019C94                            Obj7B_Main:	; Routine 0
00019C94 217C 0001 282C 0004        		move.l	#Map_SSawBall,obMap(a0)
00019C9C 317C 0518 0002             		move.w	#$518,obGfx(a0)
00019CA2 117C 0001 001A             		move.b	#1,obFrame(a0)
00019CA8 0028 0004 0001             		ori.b	#4,obRender(a0)
00019CAE 117C 0004 0018             		move.b	#4,obPriority(a0)
00019CB4 117C 008B 0020             		move.b	#$8B,obColType(a0)
00019CBA 117C 000C 0019             		move.b	#$C,obActWid(a0)
00019CC0 2268 003C                  		movea.l	$3C(a0),a1
00019CC4 3169 0008 0030             		move.w	obX(a1),$30(a0)
00019CCA 3169 000C 0034             		move.w	obY(a1),$34(a0)
00019CD0 08E8 0000 0022             		bset	#0,obStatus(a0)
00019CD6 3028 0008                  		move.w	obX(a0),d0
00019CDA B069 0008                  		cmp.w	obX(a1),d0
00019CDE 6E00                       		bgt.s	loc_18D68
00019CE0 08A8 0000 0022             		bclr	#0,obStatus(a0)
00019CE6 117C 0002 003A             		move.b	#2,$3A(a0)
00019CEC                            
00019CEC                            loc_18D68:
00019CEC 5428 0024                  		addq.b	#2,obRoutine(a0)
00019CF0                            
00019CF0                            Obj7B_Fall:	; Routine 2
00019CF0 4EB9 0000 E3D6             		jsr	(ObjectFall).l
00019CF6 2268 003C                  		movea.l	$3C(a0),a1
00019CFA 45F9 0000 0000             		lea	(word_19018).l,a2
00019D00 7000                       		moveq	#0,d0
00019D02 1029 001A                  		move.b	obFrame(a1),d0
00019D06 3228 0008                  		move.w	8(a0),d1
00019D0A 9268 0030                  		sub.w	$30(a0),d1
00019D0E 6400                       		bcc.s	loc_18D8E
00019D10 5440                       		addq.w	#2,d0
00019D12                            
00019D12                            loc_18D8E:
00019D12 D040                       		add.w	d0,d0
00019D14 3228 0034                  		move.w	$34(a0),d1
00019D18 D272 0000                  		add.w	(a2,d0.w),d1
00019D1C B268 000C                  		cmp.w	obY(a0),d1
00019D20 6E00                       		bgt.s	locret_18DC4
00019D22 2268 003C                  		movea.l	$3C(a0),a1
00019D26 7202                       		moveq	#2,d1
00019D28 0828 0000 0022             		btst	#0,obStatus(a0)
00019D2E 6700                       		beq.s	loc_18DAE
00019D30 7200                       		moveq	#0,d1
00019D32                            
00019D32                            loc_18DAE:
00019D32 317C 00F0 0028             		move.w	#$F0,obSubtype(a0)
00019D38 117C 000A 001F             		move.b	#10,obDelayAni(a0)	; set frame duration to	10 frames
00019D3E 1168 001F 001E             		move.b	obDelayAni(a0),obTimeFrame(a0)
00019D44 6000 0000                  		bra.w	loc_18FA2
00019D48                            ; ===========================================================================
00019D48                            
00019D48                            locret_18DC4:
00019D48 4E75                       		rts	
00019D4A                            ; ===========================================================================
00019D4A                            
00019D4A                            loc_18DC6:	; Routine 4
00019D4A 2268 003C                  		movea.l	$3C(a0),a1
00019D4E 7000                       		moveq	#0,d0
00019D50 1028 003A                  		move.b	$3A(a0),d0
00019D54 9029 003A                  		sub.b	$3A(a1),d0
00019D58 6700                       		beq.s	loc_18E2A
00019D5A 6400                       		bcc.s	loc_18DDA
00019D5C 4400                       		neg.b	d0
00019D5E                            
00019D5E                            loc_18DDA:
00019D5E 323C F7E8                  		move.w	#-$818,d1
00019D62 343C FEEC                  		move.w	#-$114,d2
00019D66 0C00 0001                  		cmpi.b	#1,d0
00019D6A 6700                       		beq.s	loc_18E00
00019D6C 323C F6A0                  		move.w	#-$960,d1
00019D70 343C FF0C                  		move.w	#-$F4,d2
00019D74 0C69 09C0 0038             		cmpi.w	#$9C0,$38(a1)
00019D7A 6D00                       		blt.s	loc_18E00
00019D7C 323C F5E0                  		move.w	#-$A20,d1
00019D80 343C FF80                  		move.w	#-$80,d2
00019D84                            
00019D84                            loc_18E00:
00019D84 3141 0012                  		move.w	d1,obVelY(a0)
00019D88 3142 0010                  		move.w	d2,obVelX(a0)
00019D8C 3028 0008                  		move.w	obX(a0),d0
00019D90 9068 0030                  		sub.w	$30(a0),d0
00019D94 6400                       		bcc.s	loc_18E16
00019D96 4468 0010                  		neg.w	obVelX(a0)
00019D9A                            
00019D9A                            loc_18E16:
00019D9A 117C 0001 001A             		move.b	#1,obFrame(a0)
00019DA0 317C 0020 0028             		move.w	#$20,obSubtype(a0)
00019DA6 5428 0024                  		addq.b	#2,obRoutine(a0)
00019DAA 6000 0000                  		bra.w	loc_18EAA
00019DAE                            ; ===========================================================================
00019DAE                            
00019DAE                            loc_18E2A:
00019DAE 45F9 0000 0000             		lea	(word_19018).l,a2
00019DB4 7000                       		moveq	#0,d0
00019DB6 1029 001A                  		move.b	obFrame(a1),d0
00019DBA 343C 0028                  		move.w	#$28,d2
00019DBE 3228 0008                  		move.w	obX(a0),d1
00019DC2 9268 0030                  		sub.w	$30(a0),d1
00019DC6 6400                       		bcc.s	loc_18E48
00019DC8 4442                       		neg.w	d2
00019DCA 5440                       		addq.w	#2,d0
00019DCC                            
00019DCC                            loc_18E48:
00019DCC D040                       		add.w	d0,d0
00019DCE 3228 0034                  		move.w	$34(a0),d1
00019DD2 D272 0000                  		add.w	(a2,d0.w),d1
00019DD6 3141 000C                  		move.w	d1,obY(a0)
00019DDA D468 0030                  		add.w	$30(a0),d2
00019DDE 3142 0008                  		move.w	d2,obX(a0)
00019DE2 4268 000E                  		clr.w	obY+2(a0)
00019DE6 4268 000A                  		clr.w	obX+2(a0)
00019DEA 5368 0028                  		subq.w	#1,obSubtype(a0)
00019DEE 6600                       		bne.s	loc_18E7A
00019DF0 317C 0020 0028             		move.w	#$20,obSubtype(a0)
00019DF6 117C 0008 0024             		move.b	#8,obRoutine(a0)
00019DFC 4E75                       		rts	
00019DFE                            ; ===========================================================================
00019DFE                            
00019DFE                            loc_18E7A:
00019DFE 0C68 0078 0028             		cmpi.w	#$78,obSubtype(a0)
00019E04 6600                       		bne.s	loc_18E88
00019E06 117C 0005 001F             		move.b	#5,obDelayAni(a0)
00019E0C                            
00019E0C                            loc_18E88:
00019E0C 0C68 003C 0028             		cmpi.w	#$3C,obSubtype(a0)
00019E12 6600                       		bne.s	loc_18E96
00019E14 117C 0002 001F             		move.b	#2,obDelayAni(a0)
00019E1A                            
00019E1A                            loc_18E96:
00019E1A 5328 001E                  		subq.b	#1,obTimeFrame(a0)
00019E1E 6E00                       		bgt.s	locret_18EA8
00019E20 0868 0000 001A             		bchg	#0,obFrame(a0)
00019E26 1168 001F 001E             		move.b	obDelayAni(a0),obTimeFrame(a0)
00019E2C                            
00019E2C                            locret_18EA8:
00019E2C 4E75                       		rts	
00019E2E                            ; ===========================================================================
00019E2E                            
00019E2E                            loc_18EAA:	; Routine 6
00019E2E 43F8 D040                  		lea	(v_objspace+$40).w,a1
00019E32 707A                       		moveq	#id_BossStarLight,d0
00019E34 7240                       		moveq	#$40,d1
00019E36 743E                       		moveq	#$3E,d2
00019E38                            
00019E38                            loc_18EB4:
00019E38 B011                       		cmp.b	(a1),d0
00019E3A 6700                       		beq.s	loc_18EC0
00019E3C D2C1                       		adda.w	d1,a1
00019E3E 51CA FFF8                  		dbf	d2,loc_18EB4
00019E42                            
00019E42 6000                       		bra.s	loc_18F38
00019E44                            ; ===========================================================================
00019E44                            
00019E44                            loc_18EC0:
00019E44 3029 0008                  		move.w	obX(a1),d0
00019E48 3229 000C                  		move.w	obY(a1),d1
00019E4C 3428 0008                  		move.w	obX(a0),d2
00019E50 3628 000C                  		move.w	obY(a0),d3
00019E54 45FA 0000                  		lea	byte_19022(pc),a2
00019E58 47FA 0000                  		lea	byte_19026(pc),a3
00019E5C 181A                       		move.b	(a2)+,d4
00019E5E 4884                       		ext.w	d4
00019E60 D044                       		add.w	d4,d0
00019E62 181B                       		move.b	(a3)+,d4
00019E64 4884                       		ext.w	d4
00019E66 D444                       		add.w	d4,d2
00019E68 B440                       		cmp.w	d0,d2
00019E6A 6500                       		bcs.s	loc_18F38
00019E6C 181A                       		move.b	(a2)+,d4
00019E6E 4884                       		ext.w	d4
00019E70 D044                       		add.w	d4,d0
00019E72 181B                       		move.b	(a3)+,d4
00019E74 4884                       		ext.w	d4
00019E76 D444                       		add.w	d4,d2
00019E78 B042                       		cmp.w	d2,d0
00019E7A 6500                       		bcs.s	loc_18F38
00019E7C 181A                       		move.b	(a2)+,d4
00019E7E 4884                       		ext.w	d4
00019E80 D244                       		add.w	d4,d1
00019E82 181B                       		move.b	(a3)+,d4
00019E84 4884                       		ext.w	d4
00019E86 D644                       		add.w	d4,d3
00019E88 B641                       		cmp.w	d1,d3
00019E8A 6500                       		bcs.s	loc_18F38
00019E8C 181A                       		move.b	(a2)+,d4
00019E8E 4884                       		ext.w	d4
00019E90 D244                       		add.w	d4,d1
00019E92 181B                       		move.b	(a3)+,d4
00019E94 4884                       		ext.w	d4
00019E96 D644                       		add.w	d4,d3
00019E98 B243                       		cmp.w	d3,d1
00019E9A 6500                       		bcs.s	loc_18F38
00019E9C 5428 0024                  		addq.b	#2,obRoutine(a0)
00019EA0 4268 0028                  		clr.w	obSubtype(a0)
00019EA4 4229 0020                  		clr.b	obColType(a1)
00019EA8 5329 0021                  		subq.b	#1,obColProp(a1)
00019EAC 6600                       		bne.s	loc_18F38
00019EAE 08E9 0007 0022             		bset	#7,obStatus(a1)
00019EB4 4268 0010                  		clr.w	obVelX(a0)
00019EB8 4268 0012                  		clr.w	obVelY(a0)
00019EBC                            
00019EBC                            loc_18F38:
00019EBC 4A68 0012                  		tst.w	obVelY(a0)
00019EC0 6A00                       		bpl.s	loc_18F5C
00019EC2 4EB9 0000 E3D6             		jsr	(ObjectFall).l
00019EC8 3028 0034                  		move.w	$34(a0),d0
00019ECC 0440 002F                  		subi.w	#$2F,d0
00019ED0 B068 000C                  		cmp.w	obY(a0),d0
00019ED4 6E00                       		bgt.s	loc_18F58
00019ED6 4EB9 0000 E3D6             		jsr	(ObjectFall).l
00019EDC                            
00019EDC                            loc_18F58:
00019EDC 6000 FF20                  		bra.w	loc_18E7A
00019EE0                            ; ===========================================================================
00019EE0                            
00019EE0                            loc_18F5C:
00019EE0 4EB9 0000 E3D6             		jsr	(ObjectFall).l
00019EE6 2268 003C                  		movea.l	$3C(a0),a1
00019EEA 45F9 0000 0000             		lea	(word_19018).l,a2
00019EF0 7000                       		moveq	#0,d0
00019EF2 1029 001A                  		move.b	obFrame(a1),d0
00019EF6 3228 0008                  		move.w	obX(a0),d1
00019EFA 9268 0030                  		sub.w	$30(a0),d1
00019EFE 6400                       		bcc.s	loc_18F7E
00019F00 5440                       		addq.w	#2,d0
00019F02                            
00019F02                            loc_18F7E:
00019F02 D040                       		add.w	d0,d0
00019F04 3228 0034                  		move.w	$34(a0),d1
00019F08 D272 0000                  		add.w	(a2,d0.w),d1
00019F0C B268 000C                  		cmp.w	obY(a0),d1
00019F10 6ECA                       		bgt.s	loc_18F58
00019F12 2268 003C                  		movea.l	$3C(a0),a1
00019F16 7202                       		moveq	#2,d1
00019F18 4A68 0010                  		tst.w	obVelX(a0)
00019F1C 6B00                       		bmi.s	loc_18F9C
00019F1E 7200                       		moveq	#0,d1
00019F20                            
00019F20                            loc_18F9C:
00019F20 317C 0000 0028             		move.w	#0,obSubtype(a0)
00019F26                            
00019F26                            loc_18FA2:
00019F26 1341 003A                  		move.b	d1,$3A(a1)
00019F2A 1141 003A                  		move.b	d1,$3A(a0)
00019F2E B229 001A                  		cmp.b	obFrame(a1),d1
00019F32 6700                       		beq.s	loc_19008
00019F34 08A9 0003 0022             		bclr	#3,obStatus(a1)
00019F3A 6700                       		beq.s	loc_19008
00019F3C 4229 0025                  		clr.b	ob2ndRout(a1)
00019F40 137C 0002 0024             		move.b	#2,obRoutine(a1)
00019F46 45F8 D000                  		lea	(v_objspace).w,a2
00019F4A 3568 0012 0012             		move.w	obVelY(a0),obVelY(a2)
00019F50 446A 0012                  		neg.w	obVelY(a2)
00019F54 0C29 0001 001A             		cmpi.b	#1,obFrame(a1)
00019F5A 6600                       		bne.s	loc_18FDC
00019F5C E0EA 0012                  		asr	obVelY(a2)
00019F60                            
00019F60                            loc_18FDC:
00019F60 08EA 0001 0022             		bset	#1,obStatus(a2)
00019F66 08AA 0003 0022             		bclr	#3,obStatus(a2)
00019F6C 422A 003C                  		clr.b	$3C(a2)
00019F70 2F08                       		move.l	a0,-(sp)
00019F72 41D2                       		lea	(a2),a0
00019F74 4EB9 0001 429A             		jsr	(Sonic_ChkRoll).l
00019F7A 205F                       		movea.l	(sp)+,a0
00019F7C 157C 0002 0024             		move.b	#2,obRoutine(a2)
00019F8C                            
00019F8C                            loc_19008:
00019F8C 4268 0010                  		clr.w	obVelX(a0)
00019F90 4268 0012                  		clr.w	obVelY(a0)
00019F94 5428 0024                  		addq.b	#2,obRoutine(a0)
00019F98 6000 FE64                  		bra.w	loc_18E7A
00019F9C                            ; ===========================================================================
00019F9C FFF8 FFE4 FFD1 FFE4 FFF8   word_19018:	dc.w -8, -$1C, -$2F, -$1C, -8
00019FA6                            		even
00019FA6 E830 E830                  byte_19022:	dc.b $E8, $30, $E8, $30
00019FAA                            		even
00019FAA 08F0 08F0                  byte_19026:	dc.b 8,	$F0, 8,	$F0
00019FAE                            		even
00019FAE                            ; ===========================================================================
00019FAE                            
00019FAE                            Obj7B_Explode:	; Routine 8
00019FAE 10BC 003F                  		move.b	#id_ExplosionBomb,(a0)
00019FB2 4228 0024                  		clr.b	obRoutine(a0)
00019FB6 0C68 0020 0028             		cmpi.w	#$20,obSubtype(a0)
00019FBC 6700                       		beq.s	Obj7B_MakeFrag
00019FBE 4E75                       		rts	
00019FC0                            ; ===========================================================================
00019FC0                            
00019FC0                            Obj7B_MakeFrag:
00019FC0 3168 0034 000C             		move.w	$34(a0),obY(a0)
00019FC6 7203                       		moveq	#3,d1
00019FC8 45FA 0000                  		lea	Obj7B_FragSpeed(pc),a2
00019FCC                            
00019FCC                            Obj7B_Loop:
00019FCC 4EB9 0000 E8B0             		jsr	(FindFreeObj).l
00019FD2 6600                       		bne.s	loc_1909A
00019FD4 12BC 007B                  		move.b	#id_BossSpikeball,(a1) ; load shrapnel object
00019FD8 137C 000A 0024             		move.b	#$A,obRoutine(a1)
00019FDE 237C 0000 0000 0004        		move.l	#Map_BSBall,obMap(a1)
00019FE6 137C 0003 0018             		move.b	#3,obPriority(a1)
00019FEC 337C 0518 0002             		move.w	#$518,obGfx(a1)
00019FF2 3368 0008 0008             		move.w	obX(a0),obX(a1)
00019FF8 3368 000C 000C             		move.w	obY(a0),obY(a1)
00019FFE 335A 0010                  		move.w	(a2)+,obVelX(a1)
0001A002 335A 0012                  		move.w	(a2)+,obVelY(a1)
0001A006 137C 0098 0020             		move.b	#$98,obColType(a1)
0001A00C 0029 0004 0001             		ori.b	#4,obRender(a1)
0001A012 08E9 0007 0001             		bset	#7,obRender(a1)
0001A018 137C 000C 0019             		move.b	#$C,obActWid(a1)
0001A01E                            
0001A01E                            loc_1909A:
0001A01E 51C9 FFAC                  		dbf	d1,Obj7B_Loop	; repeat sequence 3 more times
0001A022                            
0001A022 4E75                       		rts	
0001A024                            ; ===========================================================================
0001A024 FF00 FCC0                  Obj7B_FragSpeed:dc.w -$100, -$340	; horizontal, vertical
0001A028 FF60 FDC0                  		dc.w -$A0, -$240
0001A02C 0100 FCC0                  		dc.w $100, -$340
0001A030 00A0 FDC0                  		dc.w $A0, -$240
0001A034                            ; ===========================================================================
0001A034                            
0001A034                            Obj7B_MoveFrag:	; Routine $A
0001A034 4EB9 0000 E402             		jsr	(SpeedToPos).l
0001A03A 3168 0008 0030             		move.w	obX(a0),$30(a0)
0001A040 3168 000C 0034             		move.w	obY(a0),$34(a0)
0001A046 0668 0018 0012             		addi.w	#$18,obVelY(a0)
0001A04C 7004                       		moveq	#4,d0
0001A04E C078 FE0E                  		and.w	(v_vbla_word).w,d0
0001A052 E448                       		lsr.w	#2,d0
0001A054 1140 001A                  		move.b	d0,obFrame(a0)
0001A058 4A28 0001                  		tst.b	1(a0)
0001A05C 6A00 F7D8                  		bpl.w	Obj7A_Delete
0001A060 4E75                       		rts	
0001A060 4E75                       		rts	
0001A062                            Map_BSBall:	include	"_maps\SLZ Boss Spikeball.asm"
0001A062                            ; ---------------------------------------------------------------------------
0001A062                            ; Sprite mappings - exploding spikeys that the SLZ boss	drops
0001A062                            ; ---------------------------------------------------------------------------
0001A062                            Map_BSBall_internal:
0001A062 0000                       		dc.w @fireball1-Map_BSBall_internal
0001A064 0000                       		dc.w @fireball2-Map_BSBall_internal
0001A066 01                         @fireball1:	dc.b 1
0001A067 FC00 0027 FC               		dc.b $FC, 0, 0,	$27, $FC
0001A06C 01                         @fireball2:	dc.b 1
0001A06D FC00 0028 FC               		dc.b $FC, 0, 0,	$28, $FC
0001A072                            		even
0001A072                            		even
0001A072                            		include	"_incObj\75 Boss - Spring Yard.asm"
0001A072                            ; ---------------------------------------------------------------------------
0001A072                            ; Object 75 - Eggman (SYZ)
0001A072                            ; ---------------------------------------------------------------------------
0001A072                            
0001A072                            BossSpringYard:
0001A072 7000                       		moveq	#0,d0
0001A074 1028 0024                  		move.b	obRoutine(a0),d0
0001A078 323B 0000                  		move.w	Obj75_Index(pc,d0.w),d1
0001A07C 4EFB 1000                  		jmp	Obj75_Index(pc,d1.w)
0001A080                            ; ===========================================================================
0001A080 0000                       Obj75_Index:	dc.w Obj75_Main-Obj75_Index
0001A082 0000                       		dc.w Obj75_ShipMain-Obj75_Index
0001A084 0000                       		dc.w Obj75_FaceMain-Obj75_Index
0001A086 0000                       		dc.w Obj75_FlameMain-Obj75_Index
0001A088 0000                       		dc.w Obj75_SpikeMain-Obj75_Index
0001A08A                            
0001A08A 0200 05                    Obj75_ObjData:	dc.b 2,	0, 5		; routine number, animation, priority
0001A08D 0401 05                    		dc.b 4,	1, 5
0001A090 0607 05                    		dc.b 6,	7, 5
0001A093 0800 05                    		dc.b 8,	0, 5
0001A096                            ; ===========================================================================
0001A096                            
0001A096                            Obj75_Main:	; Routine 0
0001A096 317C 2DB0 0008             		move.w	#$2DB0,obX(a0)
0001A09C 317C 04DA 000C             		move.w	#$4DA,obY(a0)
0001A0A2 3168 0008 0030             		move.w	obX(a0),$30(a0)
0001A0A8 3168 000C 0038             		move.w	obY(a0),$38(a0)
0001A0AE 117C 000F 0020             		move.b	#$F,obColType(a0)
0001A0B4 117C 0008 0021             		move.b	#8,obColProp(a0) ; set number of hits to 8
0001A0BA 45FA FFCE                  		lea	Obj75_ObjData(pc),a2
0001A0BE 2248                       		movea.l	a0,a1
0001A0C0 7203                       		moveq	#3,d1
0001A0C2 6000                       		bra.s	Obj75_LoadBoss
0001A0C4                            ; ===========================================================================
0001A0C4                            
0001A0C4                            Obj75_Loop:
0001A0C4 4EB9 0000 E8C6             		jsr	(FindNextFreeObj).l
0001A0CA 6600                       		bne.s	Obj75_ShipMain
0001A0CC 12BC 0075                  		move.b	#id_BossSpringYard,(a1)
0001A0D0 3368 0008 0008             		move.w	obX(a0),obX(a1)
0001A0D6 3368 000C 000C             		move.w	obY(a0),obY(a1)
0001A0DC                            
0001A0DC                            Obj75_LoadBoss:
0001A0DC 08A8 0000 0022             		bclr	#0,obStatus(a0)
0001A0E2 4229 0025                  		clr.b	ob2ndRout(a1)
0001A0E6 135A 0024                  		move.b	(a2)+,obRoutine(a1)
0001A0EA 135A 001C                  		move.b	(a2)+,obAnim(a1)
0001A0EE 135A 0018                  		move.b	(a2)+,obPriority(a1)
0001A0F2 237C 0001 8C90 0004        		move.l	#Map_Eggman,obMap(a1)
0001A0FA 337C 0400 0002             		move.w	#$400,obGfx(a1)
0001A100 137C 0004 0001             		move.b	#4,obRender(a1)
0001A106 137C 0020 0019             		move.b	#$20,obActWid(a1)
0001A10C 2348 0034                  		move.l	a0,$34(a1)
0001A110 51C9 FFB2                  		dbf	d1,Obj75_Loop	; repeat sequence 3 more times
0001A114                            
0001A114                            Obj75_ShipMain:	; Routine 2
0001A114 7000                       		moveq	#0,d0
0001A116 1028 0025                  		move.b	ob2ndRout(a0),d0
0001A11A 323B 0000                  		move.w	Obj75_ShipIndex(pc,d0.w),d1
0001A11E 4EBB 1000                  		jsr	Obj75_ShipIndex(pc,d1.w)
0001A122 43F9 0001 8C40             		lea	(Ani_Eggman).l,a1
0001A128 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
0001A12E 7003                       		moveq	#3,d0
0001A130 C028 0022                  		and.b	obStatus(a0),d0
0001A134 0228 00FC 0001             		andi.b	#$FC,obRender(a0)
0001A13A 8128 0001                  		or.b	d0,obRender(a0)
0001A13E 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001A144                            ; ===========================================================================
0001A144 0000 0000                  Obj75_ShipIndex:dc.w loc_191CC-Obj75_ShipIndex,	loc_19270-Obj75_ShipIndex
0001A148 0000 0000                  		dc.w loc_192EC-Obj75_ShipIndex,	loc_19474-Obj75_ShipIndex
0001A14C 0000 0000                  		dc.w loc_194AC-Obj75_ShipIndex,	loc_194F2-Obj75_ShipIndex
0001A150                            ; ===========================================================================
0001A150                            
0001A150                            loc_191CC:
0001A150 317C FF00 0010             		move.w	#-$100,obVelX(a0)
0001A156 0C68 2D38 0030             		cmpi.w	#$2D38,$30(a0)
0001A15C 6400                       		bcc.s	loc_191DE
0001A15E 5428 0025                  		addq.b	#2,ob2ndRout(a0)
0001A162                            
0001A162                            loc_191DE:
0001A162 1028 003F                  		move.b	$3F(a0),d0
0001A166 5428 003F                  		addq.b	#2,$3F(a0)
0001A16A 4EB9 0000 27EC             		jsr	(CalcSine).l
0001A170 E440                       		asr.w	#2,d0
0001A172 3140 0012                  		move.w	d0,obVelY(a0)
0001A176                            
0001A176                            loc_191F2:
0001A176 6100 E6B6                  		bsr.w	BossMove
0001A17A 3168 0038 000C             		move.w	$38(a0),obY(a0)
0001A180 3168 0030 0008             		move.w	$30(a0),obX(a0)
0001A186                            
0001A186                            loc_19202:
0001A186 3028 0008                  		move.w	8(a0),d0
0001A18A 0440 2C00                  		subi.w	#$2C00,d0
0001A18E EA48                       		lsr.w	#5,d0
0001A190 1140 0034                  		move.b	d0,$34(a0)
0001A194 0C28 0006 0025             		cmpi.b	#6,ob2ndRout(a0)
0001A19A 6400                       		bcc.s	locret_19256
0001A19C 4A28 0022                  		tst.b	obStatus(a0)
0001A1A0 6B00                       		bmi.s	loc_19258
0001A1A2 4A28 0020                  		tst.b	obColType(a0)
0001A1A6 6600                       		bne.s	locret_19256
0001A1A8 4A28 003E                  		tst.b	$3E(a0)
0001A1AC 6600                       		bne.s	loc_1923A
0001A1AE 117C 0020 003E             		move.b	#$20,$3E(a0)
0001A1BE                            
0001A1BE                            loc_1923A:
0001A1BE 43F8 FB22                  		lea	(v_pal_dry+$22).w,a1
0001A1C2 7000                       		moveq	#0,d0
0001A1C4 4A51                       		tst.w	(a1)
0001A1C6 6600                       		bne.s	loc_19248
0001A1C8 303C 0EEE                  		move.w	#cWhite,d0
0001A1CC                            
0001A1CC                            loc_19248:
0001A1CC 3280                       		move.w	d0,(a1)
0001A1CE 5328 003E                  		subq.b	#1,$3E(a0)
0001A1D2 6600                       		bne.s	locret_19256
0001A1D4 117C 000F 0020             		move.b	#$F,obColType(a0)
0001A1DA                            
0001A1DA                            locret_19256:
0001A1DA 4E75                       		rts	
0001A1DC                            ; ===========================================================================
0001A1DC                            
0001A1DC                            loc_19258:
0001A1DC 7064                       		moveq	#100,d0
0001A1DE 6100 0000                  		bsr.w	AddPoints
0001A1E2 117C 0006 0025             		move.b	#6,ob2ndRout(a0)
0001A1E8 317C 00B4 003C             		move.w	#$B4,$3C(a0)
0001A1EE 4268 0010                  		clr.w	obVelX(a0)
0001A1F2 4E75                       		rts	
0001A1F4                            ; ===========================================================================
0001A1F4                            
0001A1F4                            loc_19270:
0001A1F4 3028 0030                  		move.w	$30(a0),d0
0001A1F8 317C 0140 0010             		move.w	#$140,obVelX(a0)
0001A1FE 0828 0000 0022             		btst	#0,obStatus(a0)
0001A204 6600                       		bne.s	loc_1928E
0001A206 4468 0010                  		neg.w	obVelX(a0)
0001A20A 0C40 2C08                  		cmpi.w	#$2C08,d0
0001A20E 6E00                       		bgt.s	loc_1929E
0001A210 6000                       		bra.s	loc_19294
0001A212                            ; ===========================================================================
0001A212                            
0001A212                            loc_1928E:
0001A212 0C40 2D38                  		cmpi.w	#$2D38,d0
0001A216 6D00                       		blt.s	loc_1929E
0001A218                            
0001A218                            loc_19294:
0001A218 0868 0000 0022             		bchg	#0,obStatus(a0)
0001A21E 4228 003D                  		clr.b	$3D(a0)
0001A222                            
0001A222                            loc_1929E:
0001A222 0440 2C10                  		subi.w	#$2C10,d0
0001A226 0240 001F                  		andi.w	#$1F,d0
0001A22A 0440 001F                  		subi.w	#$1F,d0
0001A22E 6A00                       		bpl.s	loc_192AE
0001A230 4440                       		neg.w	d0
0001A232                            
0001A232                            loc_192AE:
0001A232 5340                       		subq.w	#1,d0
0001A234 6E00                       		bgt.s	loc_192E8
0001A236 4A28 003D                  		tst.b	$3D(a0)
0001A23A 6600                       		bne.s	loc_192E8
0001A23C 3238 D008                  		move.w	(v_player+obX).w,d1
0001A240 0441 2C00                  		subi.w	#$2C00,d1
0001A244 EA41                       		asr.w	#5,d1
0001A246 B228 0034                  		cmp.b	$34(a0),d1
0001A24A 6600                       		bne.s	loc_192E8
0001A24C 7000                       		moveq	#0,d0
0001A24E 1028 0034                  		move.b	$34(a0),d0
0001A252 EB40                       		asl.w	#5,d0
0001A254 0640 2C10                  		addi.w	#$2C10,d0
0001A258 3140 0030                  		move.w	d0,$30(a0)
0001A25C 6100 0000                  		bsr.w	Obj75_FindBlocks
0001A260 5428 0025                  		addq.b	#2,ob2ndRout(a0)
0001A264 4268 0028                  		clr.w	obSubtype(a0)
0001A268 4268 0010                  		clr.w	obVelX(a0)
0001A26C                            
0001A26C                            loc_192E8:
0001A26C 6000 FEF4                  		bra.w	loc_191DE
0001A270                            ; ===========================================================================
0001A270                            
0001A270                            loc_192EC:
0001A270 7000                       		moveq	#0,d0
0001A272 1028 0028                  		move.b	obSubtype(a0),d0
0001A276 303B 0000                  		move.w	off_192FA(pc,d0.w),d0
0001A27A 4EFB 0000                  		jmp	off_192FA(pc,d0.w)
0001A27E                            ; ===========================================================================
0001A27E 0000                       off_192FA:	dc.w loc_19302-off_192FA
0001A280 0000                       		dc.w loc_19348-off_192FA
0001A282 0000                       		dc.w loc_1938E-off_192FA
0001A284 0000                       		dc.w loc_193D0-off_192FA
0001A286                            ; ===========================================================================
0001A286                            
0001A286                            loc_19302:
0001A286 317C 0180 0012             		move.w	#$180,obVelY(a0)
0001A28C 3028 0038                  		move.w	$38(a0),d0
0001A290 0C40 0556                  		cmpi.w	#$556,d0
0001A294 6500                       		bcs.s	loc_19344
0001A296 317C 0556 0038             		move.w	#$556,$38(a0)
0001A29C 4268 003C                  		clr.w	$3C(a0)
0001A2A0 70FF                       		moveq	#-1,d0
0001A2A2 3028 0036                  		move.w	$36(a0),d0
0001A2A6 6700                       		beq.s	loc_1933C
0001A2A8 2240                       		movea.l	d0,a1
0001A2AA 137C 00FF 0029             		move.b	#-1,$29(a1)
0001A2B0 117C 00FF 0029             		move.b	#-1,$29(a0)
0001A2B6 2348 0034                  		move.l	a0,$34(a1)
0001A2BA 317C 0032 003C             		move.w	#$32,$3C(a0)
0001A2C0                            
0001A2C0                            loc_1933C:
0001A2C0 4268 0012                  		clr.w	obVelY(a0)
0001A2C4 5428 0028                  		addq.b	#2,obSubtype(a0)
0001A2C8                            
0001A2C8                            loc_19344:
0001A2C8 6000 FEAC                  		bra.w	loc_191F2
0001A2CC                            ; ===========================================================================
0001A2CC                            
0001A2CC                            loc_19348:
0001A2CC 5368 003C                  		subq.w	#1,$3C(a0)
0001A2D0 6A00                       		bpl.s	loc_19366
0001A2D2 5428 0028                  		addq.b	#2,obSubtype(a0)
0001A2D6 317C F800 0012             		move.w	#-$800,obVelY(a0)
0001A2DC 4A68 0036                  		tst.w	$36(a0)
0001A2E0 6600                       		bne.s	loc_19362
0001A2E2 E0E8 0012                  		asr	obVelY(a0)
0001A2E6                            
0001A2E6                            loc_19362:
0001A2E6 7000                       		moveq	#0,d0
0001A2E8 6000                       		bra.s	loc_1937C
0001A2EA                            ; ===========================================================================
0001A2EA                            
0001A2EA                            loc_19366:
0001A2EA 7000                       		moveq	#0,d0
0001A2EC 0C68 001E 003C             		cmpi.w	#$1E,$3C(a0)
0001A2F2 6E00                       		bgt.s	loc_1937C
0001A2F4 7002                       		moveq	#2,d0
0001A2F6 0828 0001 003D             		btst	#1,$3D(a0)
0001A2FC 6700                       		beq.s	loc_1937C
0001A2FE 4440                       		neg.w	d0
0001A300                            
0001A300                            loc_1937C:
0001A300 D068 0038                  		add.w	$38(a0),d0
0001A304 3140 000C                  		move.w	d0,obY(a0)
0001A308 3168 0030 0008             		move.w	$30(a0),obX(a0)
0001A30E 6000 FE76                  		bra.w	loc_19202
0001A312                            ; ===========================================================================
0001A312                            
0001A312                            loc_1938E:
0001A312 303C 04DA                  		move.w	#$4DA,d0
0001A316 4A68 0036                  		tst.w	$36(a0)
0001A31A 6700                       		beq.s	loc_1939C
0001A31C 0440 0018                  		subi.w	#$18,d0
0001A320                            
0001A320                            loc_1939C:
0001A320 B068 0038                  		cmp.w	$38(a0),d0
0001A324 6D00                       		blt.s	loc_193BE
0001A326 317C 0008 003C             		move.w	#8,$3C(a0)
0001A32C 4A68 0036                  		tst.w	$36(a0)
0001A330 6700                       		beq.s	loc_193B4
0001A332 317C 002D 003C             		move.w	#$2D,$3C(a0)
0001A338                            
0001A338                            loc_193B4:
0001A338 5428 0028                  		addq.b	#2,obSubtype(a0)
0001A33C 4268 0012                  		clr.w	obVelY(a0)
0001A340 6000                       		bra.s	loc_193CC
0001A342                            ; ===========================================================================
0001A342                            
0001A342                            loc_193BE:
0001A342 0C68 FFC0 0012             		cmpi.w	#-$40,obVelY(a0)
0001A348 6C00                       		bge.s	loc_193CC
0001A34A 0668 000C 0012             		addi.w	#$C,obVelY(a0)
0001A350                            
0001A350                            loc_193CC:
0001A350 6000 FE24                  		bra.w	loc_191F2
0001A354                            ; ===========================================================================
0001A354                            
0001A354                            loc_193D0:
0001A354 5368 003C                  		subq.w	#1,$3C(a0)
0001A358 6E00                       		bgt.s	loc_19406
0001A35A 6B00                       		bmi.s	loc_193EE
0001A35C 70FF                       		moveq	#-1,d0
0001A35E 3028 0036                  		move.w	$36(a0),d0
0001A362 6700                       		beq.s	loc_193E8
0001A364 2240                       		movea.l	d0,a1
0001A366 137C 000A 0029             		move.b	#$A,$29(a1)
0001A36C                            
0001A36C                            loc_193E8:
0001A36C 4268 0036                  		clr.w	$36(a0)
0001A370 6000                       		bra.s	loc_19406
0001A372                            ; ===========================================================================
0001A372                            
0001A372                            loc_193EE:
0001A372 0C68 FFE2 003C             		cmpi.w	#-$1E,$3C(a0)
0001A378 6600                       		bne.s	loc_19406
0001A37A 4228 0029                  		clr.b	$29(a0)
0001A37E 5528 0025                  		subq.b	#2,ob2ndRout(a0)
0001A382 117C 00FF 003D             		move.b	#-1,$3D(a0)
0001A388 6000                       		bra.s	loc_19446
0001A38A                            ; ===========================================================================
0001A38A                            
0001A38A                            loc_19406:
0001A38A 7001                       		moveq	#1,d0
0001A38C 4A68 0036                  		tst.w	$36(a0)
0001A390 6700                       		beq.s	loc_19410
0001A392 7002                       		moveq	#2,d0
0001A394                            
0001A394                            loc_19410:
0001A394 0C68 04DA 0038             		cmpi.w	#$4DA,$38(a0)
0001A39A 6700                       		beq.s	loc_19424
0001A39C 6D00                       		blt.s	loc_1941C
0001A39E 4440                       		neg.w	d0
0001A3A0                            
0001A3A0                            loc_1941C:
0001A3A0 4A68 0036                  		tst.w	$36(a0)
0001A3A4 D168 0038                  		add.w	d0,$38(a0)
0001A3A8                            
0001A3A8                            loc_19424:
0001A3A8 7000                       		moveq	#0,d0
0001A3AA 4A68 0036                  		tst.w	$36(a0)
0001A3AE 6700                       		beq.s	loc_19438
0001A3B0 7002                       		moveq	#2,d0
0001A3B2 0828 0000 003D             		btst	#0,$3D(a0)
0001A3B8 6700                       		beq.s	loc_19438
0001A3BA 4440                       		neg.w	d0
0001A3BC                            
0001A3BC                            loc_19438:
0001A3BC D068 0038                  		add.w	$38(a0),d0
0001A3C0 3140 000C                  		move.w	d0,obY(a0)
0001A3C4 3168 0030 0008             		move.w	$30(a0),8(a0)
0001A3CA                            
0001A3CA                            loc_19446:
0001A3CA 6000 FDBA                  		bra.w	loc_19202
0001A3CE                            
0001A3CE                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001A3CE                            
0001A3CE                            
0001A3CE                            Obj75_FindBlocks:
0001A3CE 4268 0036                  		clr.w	$36(a0)
0001A3D2 43F8 D040                  		lea	(v_objspace+$40).w,a1
0001A3D6 703E                       		moveq	#$3E,d0
0001A3D8 7276                       		moveq	#$76,d1
0001A3DA 1428 0034                  		move.b	$34(a0),d2
0001A3DE                            
0001A3DE                            Obj75_FindLoop:
0001A3DE B211                       		cmp.b	(a1),d1		; is object a SYZ boss block?
0001A3E0 6600                       		bne.s	loc_1946A	; if not, branch
0001A3E2 B429 0028                  		cmp.b	obSubtype(a1),d2
0001A3E6 6600                       		bne.s	loc_1946A
0001A3E8 3149 0036                  		move.w	a1,$36(a0)
0001A3EC 6000                       		bra.s	locret_19472
0001A3EE                            ; ===========================================================================
0001A3EE                            
0001A3EE                            loc_1946A:
0001A3EE 43E9 0040                  		lea	$40(a1),a1	; next object RAM entry
0001A3F2 51C8 FFEA                  		dbf	d0,Obj75_FindLoop
0001A3F6                            
0001A3F6                            locret_19472:
0001A3F6 4E75                       		rts	
0001A3F8                            ; End of function Obj75_FindBlocks
0001A3F8                            
0001A3F8                            ; ===========================================================================
0001A3F8                            
0001A3F8                            loc_19474:
0001A3F8 5368 003C                  		subq.w	#1,$3C(a0)
0001A3FC 6B00                       		bmi.s	loc_1947E
0001A3FE 6000 E3EA                  		bra.w	BossDefeated
0001A402                            ; ===========================================================================
0001A402                            
0001A402                            loc_1947E:
0001A402 5428 0025                  		addq.b	#2,ob2ndRout(a0)
0001A406 4268 0012                  		clr.w	obVelY(a0)
0001A40A 08E8 0000 0022             		bset	#0,obStatus(a0)
0001A410 08A8 0007 0022             		bclr	#7,obStatus(a0)
0001A416 4268 0010                  		clr.w	obVelX(a0)
0001A41A 317C FFFF 003C             		move.w	#-1,$3C(a0)
0001A420 4A38 F7A7                  		tst.b	(v_bossstatus).w
0001A424 6600                       		bne.s	loc_194A8
0001A426 11FC 0001 F7A7             		move.b	#1,(v_bossstatus).w
0001A42C                            
0001A42C                            loc_194A8:
0001A42C 6000 FD58                  		bra.w	loc_19202
0001A430                            ; ===========================================================================
0001A430                            
0001A430                            loc_194AC:
0001A430 5268 003C                  		addq.w	#1,$3C(a0)
0001A434 6700                       		beq.s	loc_194BC
0001A436 6A00                       		bpl.s	loc_194C2
0001A438 0668 0018 0012             		addi.w	#$18,obVelY(a0)
0001A43E 6000                       		bra.s	loc_194EE
0001A440                            ; ===========================================================================
0001A440                            
0001A440                            loc_194BC:
0001A440 4268 0012                  		clr.w	obVelY(a0)
0001A444 6000                       		bra.s	loc_194EE
0001A446                            ; ===========================================================================
0001A446                            
0001A446                            loc_194C2:
0001A446 0C68 0020 003C             		cmpi.w	#$20,$3C(a0)
0001A44C 6500                       		bcs.s	loc_194DA
0001A44E 6700                       		beq.s	loc_194E0
0001A450 0C68 002A 003C             		cmpi.w	#$2A,$3C(a0)
0001A456 6500                       		bcs.s	loc_194EE
0001A458 5428 0025                  		addq.b	#2,ob2ndRout(a0)
0001A45C 6000                       		bra.s	loc_194EE
0001A45E                            ; ===========================================================================
0001A45E                            
0001A45E                            loc_194DA:
0001A45E 5168 0012                  		subq.w	#8,obVelY(a0)
0001A462 6000                       		bra.s	loc_194EE
0001A464                            ; ===========================================================================
0001A464                            
0001A464                            loc_194E0:
0001A464 4268 0012                  		clr.w	obVelY(a0)
0001A472                            
0001A472                            loc_194EE:
0001A472 6000 FD02                  		bra.w	loc_191F2
0001A476                            ; ===========================================================================
0001A476                            
0001A476                            loc_194F2:
0001A476 317C 0400 0010             		move.w	#$400,obVelX(a0)
0001A47C 317C FFC0 0012             		move.w	#-$40,obVelY(a0)
0001A482 0C78 2D40 F72A             		cmpi.w	#$2D40,(v_limitright2).w
0001A488 6400                       		bcc.s	loc_1950C
0001A48A 5478 F72A                  		addq.w	#2,(v_limitright2).w
0001A48E 6000                       		bra.s	loc_19512
0001A490                            ; ===========================================================================
0001A490                            
0001A490                            loc_1950C:
0001A490 4A28 0001                  		tst.b	obRender(a0)
0001A494 6A00                       		bpl.s	Obj75_ShipDelete
0001A496                            
0001A496                            loc_19512:
0001A496 6100 E396                  		bsr.w	BossMove
0001A49A 6000 FCC6                  		bra.w	loc_191DE
0001A49E                            ; ===========================================================================
0001A49E                            
0001A49E                            Obj75_ShipDelete:
0001A49E 4EF9 0000 E464             		jmp	(DeleteObject).l
0001A4A4                            ; ===========================================================================
0001A4A4                            
0001A4A4                            Obj75_FaceMain:	; Routine 4
0001A4A4 7201                       		moveq	#1,d1
0001A4A6 2268 0034                  		movea.l	$34(a0),a1
0001A4AA 7000                       		moveq	#0,d0
0001A4AC 1029 0025                  		move.b	ob2ndRout(a1),d0
0001A4B0 303B 0000                  		move.w	off_19546(pc,d0.w),d0
0001A4B4 4EBB 0000                  		jsr	off_19546(pc,d0.w)
0001A4B8 1141 001C                  		move.b	d1,obAnim(a0)
0001A4BC 1010                       		move.b	(a0),d0
0001A4BE B011                       		cmp.b	(a1),d0
0001A4C0 6600                       		bne.s	Obj75_FaceDelete
0001A4C2 6000                       		bra.s	loc_195BE
0001A4C4                            ; ===========================================================================
0001A4C4                            
0001A4C4                            Obj75_FaceDelete:
0001A4C4 4EF9 0000 E464             		jmp	(DeleteObject).l
0001A4CA                            ; ===========================================================================
0001A4CA 0000 0000                  off_19546:	dc.w loc_19574-off_19546, loc_19574-off_19546
0001A4CE 0000 0000                  		dc.w loc_1955A-off_19546, loc_19552-off_19546
0001A4D2 0000 0000                  		dc.w loc_19552-off_19546, loc_19556-off_19546
0001A4D6                            ; ===========================================================================
0001A4D6                            
0001A4D6                            loc_19552:
0001A4D6 720A                       		moveq	#$A,d1
0001A4D8 4E75                       		rts	
0001A4DA                            ; ===========================================================================
0001A4DA                            
0001A4DA                            loc_19556:
0001A4DA 7206                       		moveq	#6,d1
0001A4DC 4E75                       		rts	
0001A4DE                            ; ===========================================================================
0001A4DE                            
0001A4DE                            loc_1955A:
0001A4DE 7000                       		moveq	#0,d0
0001A4E0 1029 0028                  		move.b	obSubtype(a1),d0
0001A4E4 303B 0000                  		move.w	off_19568(pc,d0.w),d0
0001A4E8 4EFB 0000                  		jmp	off_19568(pc,d0.w)
0001A4EC                            ; ===========================================================================
0001A4EC 0000 0000                  off_19568:	dc.w loc_19570-off_19568, loc_19572-off_19568
0001A4F0 0000 0000                  		dc.w loc_19570-off_19568, loc_19570-off_19568
0001A4F4                            ; ===========================================================================
0001A4F4                            
0001A4F4                            loc_19570:
0001A4F4 6000                       		bra.s	loc_19574
0001A4F6                            ; ===========================================================================
0001A4F6                            
0001A4F6                            loc_19572:
0001A4F6 7206                       		moveq	#6,d1
0001A4F8                            
0001A4F8                            loc_19574:
0001A4F8 4A29 0020                  		tst.b	obColType(a1)
0001A4FC 6600                       		bne.s	loc_1957E
0001A4FE 7205                       		moveq	#5,d1
0001A500 4E75                       		rts	
0001A502                            ; ===========================================================================
0001A502                            
0001A502                            loc_1957E:
0001A502 0C38 0004 D024             		cmpi.b	#4,(v_player+obRoutine).w
0001A508 6500                       		bcs.s	locret_19588
0001A50A 7204                       		moveq	#4,d1
0001A50C                            
0001A50C                            locret_19588:
0001A50C 4E75                       		rts	
0001A50E                            ; ===========================================================================
0001A50E                            
0001A50E                            Obj75_FlameMain:; Routine 6
0001A50E 117C 0007 001C             		move.b	#7,obAnim(a0)
0001A514 2268 0034                  		movea.l	$34(a0),a1
0001A518 0C29 000A 0025             		cmpi.b	#$A,ob2ndRout(a1)
0001A51E 6600                       		bne.s	loc_195AA
0001A520 117C 000B 001C             		move.b	#$B,obAnim(a0)
0001A526 4A28 0001                  		tst.b	1(a0)
0001A52A 6A00                       		bpl.s	Obj75_FlameDelete
0001A52C 6000                       		bra.s	loc_195B6
0001A52E                            ; ===========================================================================
0001A52E                            
0001A52E                            loc_195AA:
0001A52E 4A69 0010                  		tst.w	obVelX(a1)
0001A532 6700                       		beq.s	loc_195B6
0001A534 117C 0008 001C             		move.b	#8,obAnim(a0)
0001A53A                            
0001A53A                            loc_195B6:
0001A53A 6000                       		bra.s	loc_195BE
0001A53C                            ; ===========================================================================
0001A53C                            
0001A53C                            Obj75_FlameDelete:
0001A53C 4EF9 0000 E464             		jmp	(DeleteObject).l
0001A542                            ; ===========================================================================
0001A542                            
0001A542                            loc_195BE:
0001A542 43F9 0001 8C40             		lea	(Ani_Eggman).l,a1
0001A548 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
0001A54E 2268 0034                  		movea.l	$34(a0),a1
0001A552 3169 0008 0008             		move.w	obX(a1),obX(a0)
0001A558 3169 000C 000C             		move.w	obY(a1),obY(a0)
0001A55E                            
0001A55E                            loc_195DA:
0001A55E 1169 0022 0022             		move.b	obStatus(a1),obStatus(a0)
0001A564 7003                       		moveq	#3,d0
0001A566 C028 0022                  		and.b	obStatus(a0),d0
0001A56A 0228 00FC 0001             		andi.b	#$FC,obRender(a0)
0001A570 8128 0001                  		or.b	d0,obRender(a0)
0001A574 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001A57A                            ; ===========================================================================
0001A57A                            
0001A57A                            Obj75_SpikeMain:; Routine 8
0001A57A 217C 0001 8D58 0004        		move.l	#Map_BossItems,obMap(a0)
0001A582 317C 246C 0002             		move.w	#$246C,obGfx(a0)
0001A588 117C 0005 001A             		move.b	#5,obFrame(a0)
0001A58E 2268 0034                  		movea.l	$34(a0),a1
0001A592 0C29 000A 0025             		cmpi.b	#$A,ob2ndRout(a1)
0001A598 6600                       		bne.s	loc_1961C
0001A59A 4A28 0001                  		tst.b	obRender(a0)
0001A59E 6A00                       		bpl.s	Obj75_SpikeDelete
0001A5A0                            
0001A5A0                            loc_1961C:
0001A5A0 3169 0008 0008             		move.w	obX(a1),obX(a0)
0001A5A6 3169 000C 000C             		move.w	obY(a1),obY(a0)
0001A5AC 3028 003C                  		move.w	$3C(a0),d0
0001A5B0 0C29 0004 0025             		cmpi.b	#4,ob2ndRout(a1)
0001A5B6 6600                       		bne.s	loc_19652
0001A5B8 0C29 0006 0028             		cmpi.b	#6,obSubtype(a1)
0001A5BE 6700                       		beq.s	loc_1964C
0001A5C0 4A29 0028                  		tst.b	obSubtype(a1)
0001A5C4 6600                       		bne.s	loc_19658
0001A5C6 0C40 0094                  		cmpi.w	#$94,d0
0001A5CA 6C00                       		bge.s	loc_19658
0001A5CC 5E40                       		addq.w	#7,d0
0001A5CE 6000                       		bra.s	loc_19658
0001A5D0                            ; ===========================================================================
0001A5D0                            
0001A5D0                            loc_1964C:
0001A5D0 4A69 003C                  		tst.w	$3C(a1)
0001A5D4 6A00                       		bpl.s	loc_19658
0001A5D6                            
0001A5D6                            loc_19652:
0001A5D6 4A40                       		tst.w	d0
0001A5D8 6F00                       		ble.s	loc_19658
0001A5DA 5B40                       		subq.w	#5,d0
0001A5DC                            
0001A5DC                            loc_19658:
0001A5DC 3140 003C                  		move.w	d0,$3C(a0)
0001A5E0 E440                       		asr.w	#2,d0
0001A5E2 D168 000C                  		add.w	d0,obY(a0)
0001A5E6 117C 0008 0019             		move.b	#8,obActWid(a0)
0001A5EC 117C 000C 0016             		move.b	#$C,obHeight(a0)
0001A5F2 4228 0020                  		clr.b	obColType(a0)
0001A5F6 2268 0034                  		movea.l	$34(a0),a1
0001A5FA 4A29 0020                  		tst.b	obColType(a1)
0001A5FE 6700                       		beq.s	loc_19688
0001A600 4A29 0029                  		tst.b	$29(a1)
0001A604 6600                       		bne.s	loc_19688
0001A606 117C 0084 0020             		move.b	#$84,obColType(a0)
0001A60C                            
0001A60C                            loc_19688:
0001A60C 6000 FF50                  		bra.w	loc_195DA
0001A610                            ; ===========================================================================
0001A610                            
0001A610                            Obj75_SpikeDelete:
0001A610 4EF9 0000 E464             		jmp	(DeleteObject).l
0001A610 4EF9 0000 E464             		jmp	(DeleteObject).l
0001A616                            		include	"_incObj\76 SYZ Boss Blocks.asm"
0001A616                            ; ---------------------------------------------------------------------------
0001A616                            ; Object 76 - blocks that Eggman picks up (SYZ)
0001A616                            ; ---------------------------------------------------------------------------
0001A616                            
0001A616                            BossBlock:
0001A616 7000                       		moveq	#0,d0
0001A618 1028 0024                  		move.b	obRoutine(a0),d0
0001A61C 323B 0000                  		move.w	Obj76_Index(pc,d0.w),d1
0001A620 4EFB 1000                  		jmp	Obj76_Index(pc,d1.w)
0001A624                            ; ===========================================================================
0001A624 0000                       Obj76_Index:	dc.w Obj76_Main-Obj76_Index
0001A626 0000                       		dc.w Obj76_Action-Obj76_Index
0001A628 0000                       		dc.w loc_19762-Obj76_Index
0001A62A                            ; ===========================================================================
0001A62A                            
0001A62A                            Obj76_Main:	; Routine 0
0001A62A 7800                       		moveq	#0,d4
0001A62C 3A3C 2C10                  		move.w	#$2C10,d5
0001A630 7C09                       		moveq	#9,d6
0001A632 43D0                       		lea	(a0),a1
0001A634 6000                       		bra.s	Obj76_MakeBlock
0001A636                            ; ===========================================================================
0001A636                            
0001A636                            Obj76_Loop:
0001A636 4EB9 0000 E8B0             		jsr	(FindFreeObj).l
0001A63C 6600                       		bne.s	Obj76_ExitLoop
0001A63E                            
0001A63E                            Obj76_MakeBlock:
0001A63E 12BC 0076                  		move.b	#id_BossBlock,(a1)
0001A642 237C 0000 0000 0004        		move.l	#Map_BossBlock,obMap(a1)
0001A64A 337C 4000 0002             		move.w	#$4000,obGfx(a1)
0001A650 137C 0004 0001             		move.b	#4,obRender(a1)
0001A656 137C 0010 0019             		move.b	#$10,obActWid(a1)
0001A65C 137C 0010 0016             		move.b	#$10,obHeight(a1)
0001A662 137C 0003 0018             		move.b	#3,obPriority(a1)
0001A668 3345 0008                  		move.w	d5,obX(a1)	; set x-position
0001A66C 337C 0582 000C             		move.w	#$582,obY(a1)
0001A672 3344 0028                  		move.w	d4,obSubtype(a1)
0001A676 0644 0101                  		addi.w	#$101,d4
0001A67A 0645 0020                  		addi.w	#$20,d5		; add $20 to next x-position
0001A67E 5429 0024                  		addq.b	#2,obRoutine(a1)
0001A682 51CE FFB2                  		dbf	d6,Obj76_Loop	; repeat sequence 9 more times
0001A686                            
0001A686                            Obj76_ExitLoop:
0001A686 4E75                       		rts	
0001A688                            ; ===========================================================================
0001A688                            
0001A688                            Obj76_Action:	; Routine 2
0001A688 1028 0029                  		move.b	$29(a0),d0
0001A68C B028 0028                  		cmp.b	obSubtype(a0),d0
0001A690 6700                       		beq.s	Obj76_Solid
0001A692 4A00                       		tst.b	d0
0001A694 6B00                       		bmi.s	loc_19718
0001A696                            
0001A696                            loc_19712:
0001A696 6100 0000                  		bsr.w	Obj76_Break
0001A69A 6000                       		bra.s	Obj76_Display
0001A69C                            ; ===========================================================================
0001A69C                            
0001A69C                            loc_19718:
0001A69C 2268 0034                  		movea.l	$34(a0),a1
0001A6A0 4A29 0021                  		tst.b	obColProp(a1)
0001A6A4 67F0                       		beq.s	loc_19712
0001A6A6 3169 0008 0008             		move.w	obX(a1),obX(a0)
0001A6AC 3169 000C 000C             		move.w	obY(a1),obY(a0)
0001A6B2 0668 002C 000C             		addi.w	#$2C,obY(a0)
0001A6B8 B2C8                       		cmpa.w	a0,a1
0001A6BA 6500                       		bcs.s	Obj76_Display
0001A6BC 3029 0012                  		move.w	obVelY(a1),d0
0001A6C0 48C0                       		ext.l	d0
0001A6C2 E080                       		asr.l	#8,d0
0001A6C4 D168 000C                  		add.w	d0,obY(a0)
0001A6C8 6000                       		bra.s	Obj76_Display
0001A6CA                            ; ===========================================================================
0001A6CA                            
0001A6CA                            Obj76_Solid:
0001A6CA 323C 001B                  		move.w	#$1B,d1
0001A6CE 343C 0010                  		move.w	#$10,d2
0001A6D2 363C 0011                  		move.w	#$11,d3
0001A6D6 3828 0008                  		move.w	obX(a0),d4
0001A6DA 4EB9 0001 0798             		jsr	(SolidObject).l
0001A6E0                            
0001A6E0                            Obj76_Display:
0001A6E0 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001A6E6                            ; ===========================================================================
0001A6E6                            
0001A6E6                            loc_19762:	; Routine 4
0001A6E6 4A28 0001                  		tst.b	obRender(a0)
0001A6EA 6A00                       		bpl.s	Obj76_Delete
0001A6EC 4EB9 0000 E3D6             		jsr	(ObjectFall).l
0001A6F2 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001A6F8                            ; ===========================================================================
0001A6F8                            
0001A6F8                            Obj76_Delete:
0001A6F8 4EF9 0000 E464             		jmp	(DeleteObject).l
0001A6FE                            
0001A6FE                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001A6FE                            
0001A6FE                            
0001A6FE                            Obj76_Break:
0001A6FE 49FA 0000                  		lea	Obj76_FragSpeed(pc),a4
0001A702 4BFA 0000                  		lea	Obj76_FragPos(pc),a5
0001A706 7801                       		moveq	#1,d4
0001A708 7203                       		moveq	#3,d1
0001A70A 7438                       		moveq	#$38,d2
0001A70C 5428 0024                  		addq.b	#2,obRoutine(a0)
0001A710 117C 0008 0019             		move.b	#8,obActWid(a0)
0001A716 117C 0008 0016             		move.b	#8,obHeight(a0)
0001A71C 43D0                       		lea	(a0),a1
0001A71E 6000                       		bra.s	Obj76_MakeFrag
0001A720                            ; ===========================================================================
0001A720                            
0001A720                            Obj76_LoopFrag:
0001A720 4EB9 0000 E8C6             		jsr	(FindNextFreeObj).l
0001A726 6600                       		bne.s	loc_197D4
0001A728                            
0001A728                            Obj76_MakeFrag:
0001A728 45D0                       		lea	(a0),a2
0001A72A 47D1                       		lea	(a1),a3
0001A72C 7603                       		moveq	#3,d3
0001A72E                            
0001A72E                            loc_197AA:
0001A72E 26DA                       		move.l	(a2)+,(a3)+
0001A730 26DA                       		move.l	(a2)+,(a3)+
0001A732 26DA                       		move.l	(a2)+,(a3)+
0001A734 26DA                       		move.l	(a2)+,(a3)+
0001A736 51CB FFF6                  		dbf	d3,loc_197AA
0001A73A                            
0001A73A 335C 0010                  		move.w	(a4)+,obVelX(a1)
0001A73E 335C 0012                  		move.w	(a4)+,obVelY(a1)
0001A742 361D                       		move.w	(a5)+,d3
0001A744 D769 0008                  		add.w	d3,obX(a1)
0001A748 361D                       		move.w	(a5)+,d3
0001A74A D769 000C                  		add.w	d3,obY(a1)
0001A74E 1344 001A                  		move.b	d4,obFrame(a1)
0001A752 5244                       		addq.w	#1,d4
0001A754 51C9 FFCA                  		dbf	d1,Obj76_LoopFrag ; repeat sequence 3 more times
0001A758                            
0001A758                            loc_197D4:
0001A762                            ; End of function Obj76_Break
0001A762                            
0001A762                            ; ===========================================================================
0001A762 FE80 FE00                  Obj76_FragSpeed:dc.w -$180, -$200
0001A766 0180 FE00                  		dc.w $180, -$200
0001A76A FF00 FF00                  		dc.w -$100, -$100
0001A76E 0100 FF00                  		dc.w $100, -$100
0001A772 FFF8 FFF8                  Obj76_FragPos:	dc.w -8, -8
0001A776 0010 0000                  		dc.w $10, 0
0001A77A 0000 0010                  		dc.w 0,	$10
0001A77E 0010 0010                  		dc.w $10, $10
0001A77E 0010 0010                  		dc.w $10, $10
0001A782                            Map_BossBlock:	include	"_maps\SYZ Boss Blocks.asm"
0001A782                            ; ---------------------------------------------------------------------------
0001A782                            ; Sprite mappings - blocks that	Robotnik picks up (SYZ)
0001A782                            ; ---------------------------------------------------------------------------
0001A782                            Map_BossBlock_internal:
0001A782 0000                       		dc.w @wholeblock-Map_BossBlock_internal
0001A784 0000                       		dc.w @topleft-Map_BossBlock_internal
0001A786 0000                       		dc.w @topright-Map_BossBlock_internal
0001A788 0000                       		dc.w @bottomleft-Map_BossBlock_internal
0001A78A 0000                       		dc.w @bottomright-Map_BossBlock_internal
0001A78C 02                         @wholeblock:	dc.b 2
0001A78D F00D 0071 F0               		dc.b $F0, $D, 0, $71, $F0
0001A792 000D 0079 F0               		dc.b 0,	$D, 0, $79, $F0
0001A797 00                         		dc.b 0
0001A798 01                         @topleft:	dc.b 1
0001A799 F805 0071 F8               		dc.b $F8, 5, 0,	$71, $F8
0001A79E 01                         @topright:	dc.b 1
0001A79F F805 0075 F8               		dc.b $F8, 5, 0,	$75, $F8
0001A7A4 01                         @bottomleft:	dc.b 1
0001A7A5 F805 0079 F8               		dc.b $F8, 5, 0,	$79, $F8
0001A7AA 01                         @bottomright:	dc.b 1
0001A7AB F805 007D F8               		dc.b $F8, 5, 0,	$7D, $F8
0001A7B0                            		even
0001A7B0                            		even
0001A7B0                            
0001A7B0                            loc_1982C:
0001A7B0 4EF9 0000 E464             		jmp	(DeleteObject).l
0001A7B6                            
0001A7B6                            		include	"_incObj\82 Eggman - Scrap Brain 2.asm"
0001A7B6                            ; ---------------------------------------------------------------------------
0001A7B6                            ; Object 82 - Eggman (SBZ2)
0001A7B6                            ; ---------------------------------------------------------------------------
0001A7B6                            
0001A7B6                            ScrapEggman:
0001A7B6 7000                       		moveq	#0,d0
0001A7B8 1028 0024                  		move.b	obRoutine(a0),d0
0001A7BC 323B 0000                  		move.w	SEgg_Index(pc,d0.w),d1
0001A7C0 4EFB 1000                  		jmp	SEgg_Index(pc,d1.w)
0001A7C4                            ; ===========================================================================
0001A7C4 0000                       SEgg_Index:	dc.w SEgg_Main-SEgg_Index
0001A7C6 0000                       		dc.w SEgg_Eggman-SEgg_Index
0001A7C8 0000                       		dc.w SEgg_Switch-SEgg_Index
0001A7CA                            
0001A7CA 0200 03                    SEgg_ObjData:	dc.b 2,	0, 3		; routine number, animation, priority
0001A7CD 0400 03                    		dc.b 4,	0, 3
0001A7D0                            ; ===========================================================================
0001A7D0                            
0001A7D0                            SEgg_Main:	; Routine 0
0001A7D0 45FA FFF8                  		lea	SEgg_ObjData(pc),a2
0001A7D4 317C 2160 0008             		move.w	#$2160,obX(a0)
0001A7DA 317C 05A4 000C             		move.w	#$5A4,obY(a0)
0001A7E0 117C 000F 0020             		move.b	#$F,obColType(a0)
0001A7E6 117C 0010 0021             		move.b	#$10,obColProp(a0)
0001A7EC 08A8 0000 0022             		bclr	#0,obStatus(a0)
0001A7F2 4228 0025                  		clr.b	ob2ndRout(a0)
0001A7F6 115A 0024                  		move.b	(a2)+,obRoutine(a0)
0001A7FA 115A 001C                  		move.b	(a2)+,obAnim(a0)
0001A7FE 115A 0018                  		move.b	(a2)+,obPriority(a0)
0001A802 217C 0000 0000 0004        		move.l	#Map_SEgg,obMap(a0)
0001A80A 317C 0400 0002             		move.w	#$400,obGfx(a0)
0001A810 117C 0004 0001             		move.b	#4,obRender(a0)
0001A816 08E8 0007 0001             		bset	#7,obRender(a0)
0001A81C 117C 0020 0019             		move.b	#$20,obActWid(a0)
0001A822 4EB9 0000 E8C6             		jsr	(FindNextFreeObj).l
0001A828 6600                       		bne.s	SEgg_Eggman
0001A82A 2348 0034                  		move.l	a0,$34(a1)
0001A82E 12BC 0082                  		move.b	#id_ScrapEggman,(a1) ; load switch object
0001A832 337C 2130 0008             		move.w	#$2130,obX(a1)
0001A838 337C 05BC 000C             		move.w	#$5BC,obY(a1)
0001A83E 4228 0025                  		clr.b	ob2ndRout(a0)
0001A842 135A 0024                  		move.b	(a2)+,obRoutine(a1)
0001A846 135A 001C                  		move.b	(a2)+,obAnim(a1)
0001A84A 135A 0018                  		move.b	(a2)+,obPriority(a1)
0001A84E 237C 0000 CC08 0004        		move.l	#Map_But,obMap(a1)
0001A856 337C 04A4 0002             		move.w	#$4A4,obGfx(a1)
0001A85C 137C 0004 0001             		move.b	#4,obRender(a1)
0001A862 08E9 0007 0001             		bset	#7,obRender(a1)
0001A868 137C 0010 0019             		move.b	#$10,obActWid(a1)
0001A86E 137C 0000 001A             		move.b	#0,obFrame(a1)
0001A874                            
0001A874                            SEgg_Eggman:	; Routine 2
0001A874 7000                       		moveq	#0,d0
0001A876 1028 0025                  		move.b	ob2ndRout(a0),d0
0001A87A 323B 0000                  		move.w	SEgg_EggIndex(pc,d0.w),d1
0001A87E 4EBB 1000                  		jsr	SEgg_EggIndex(pc,d1.w)
0001A882 43FA 0000                  		lea	Ani_SEgg(pc),a1
0001A886 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
0001A88C 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001A892                            ; ===========================================================================
0001A892 0000                       SEgg_EggIndex:	dc.w SEgg_ChkSonic-SEgg_EggIndex
0001A894 0000                       		dc.w SEgg_PreLeap-SEgg_EggIndex
0001A896 0000                       		dc.w SEgg_Leap-SEgg_EggIndex
0001A898 0000                       		dc.w loc_19934-SEgg_EggIndex
0001A89A                            ; ===========================================================================
0001A89A                            
0001A89A                            SEgg_ChkSonic:
0001A89A 3028 0008                  		move.w	obX(a0),d0
0001A89E 9078 D008                  		sub.w	(v_player+obX).w,d0
0001A8A2 0C40 0080                  		cmpi.w	#128,d0		; is Sonic within 128 pixels of	Eggman?
0001A8A6 6400                       		bcc.s	loc_19934	; if not, branch
0001A8A8 5428 0025                  		addq.b	#2,ob2ndRout(a0)
0001A8AC 317C 00B4 003C             		move.w	#180,$3C(a0)	; set delay to 3 seconds
0001A8B2 117C 0001 001C             		move.b	#1,obAnim(a0)
0001A8B8                            
0001A8B8                            loc_19934:
0001A8B8 4EF9 0000 E402             		jmp	(SpeedToPos).l
0001A8BE                            ; ===========================================================================
0001A8BE                            
0001A8BE                            SEgg_PreLeap:
0001A8BE 5368 003C                  		subq.w	#1,$3C(a0)	; subtract 1 from time delay
0001A8C2 6600                       		bne.s	loc_19954	; if time remains, branch
0001A8C4 5428 0025                  		addq.b	#2,ob2ndRout(a0)
0001A8C8 117C 0002 001C             		move.b	#2,obAnim(a0)
0001A8CE 5868 000C                  		addq.w	#4,obY(a0)
0001A8D2 317C 000F 003C             		move.w	#15,$3C(a0)
0001A8D8                            
0001A8D8                            loc_19954:
0001A8D8 60DE                       		bra.s	loc_19934
0001A8DA                            ; ===========================================================================
0001A8DA                            
0001A8DA                            SEgg_Leap:
0001A8DA 5368 003C                  		subq.w	#1,$3C(a0)
0001A8DE 6E00                       		bgt.s	loc_199D0
0001A8E0 6600                       		bne.s	loc_1996A
0001A8E2 317C FF04 0010             		move.w	#-$FC,obVelX(a0) ; make Eggman leap
0001A8E8 317C FC40 0012             		move.w	#-$3C0,obVelY(a0)
0001A8EE                            
0001A8EE                            loc_1996A:
0001A8EE 0C68 2132 0008             		cmpi.w	#$2132,obX(a0)
0001A8F4 6E00                       		bgt.s	loc_19976
0001A8F6 4268 0010                  		clr.w	obVelX(a0)
0001A8FA                            
0001A8FA                            loc_19976:
0001A8FA 0668 0024 0012             		addi.w	#$24,obVelY(a0)
0001A900 4A68 0012                  		tst.w	obVelY(a0)
0001A904 6B00                       		bmi.s	SEgg_FindBlocks
0001A906 0C68 0595 000C             		cmpi.w	#$595,obY(a0)
0001A90C 6500                       		bcs.s	SEgg_FindBlocks
0001A90E 317C 5357 0028             		move.w	#$5357,obSubtype(a0)
0001A914 0C68 059B 000C             		cmpi.w	#$59B,obY(a0)
0001A91A 6500                       		bcs.s	SEgg_FindBlocks
0001A91C 317C 059B 000C             		move.w	#$59B,obY(a0)
0001A922 4268 0012                  		clr.w	obVelY(a0)
0001A926                            
0001A926                            SEgg_FindBlocks:
0001A926 3028 0010                  		move.w	obVelX(a0),d0
0001A92A 8068 0012                  		or.w	obVelY(a0),d0
0001A92E 6600                       		bne.s	loc_199D0
0001A930 43F8 D000                  		lea	(v_objspace).w,a1 ; start at the first object RAM
0001A934 703E                       		moveq	#$3E,d0
0001A936 7240                       		moveq	#$40,d1
0001A938                            
0001A938                            SEgg_FindLoop:	
0001A938 D2C1                       		adda.w	d1,a1		; jump to next object RAM
0001A93A 0C11 0083                  		cmpi.b	#id_FalseFloor,(a1) ; is object a block? (object $83)
0001A93E 57C8 FFF8                  		dbeq	d0,SEgg_FindLoop ; if not, repeat (max	$3E times)
0001A942                            
0001A942 6600                       		bne.s	loc_199D0
0001A944 337C 474F 0028             		move.w	#$474F,obSubtype(a1) ; set block to disintegrate
0001A94A 5428 0025                  		addq.b	#2,ob2ndRout(a0)
0001A94E 117C 0001 001C             		move.b	#1,obAnim(a0)
0001A954                            
0001A954                            loc_199D0:
0001A954 6000 FF62                  		bra.w	loc_19934
0001A958                            ; ===========================================================================
0001A958                            
0001A958                            SEgg_Switch:	; Routine 4
0001A958 7000                       		moveq	#0,d0
0001A95A 1028 0025                  		move.b	ob2ndRout(a0),d0
0001A95E 303B 0000                  		move.w	SEgg_SwIndex(pc,d0.w),d0
0001A962 4EFB 0000                  		jmp	SEgg_SwIndex(pc,d0.w)
0001A966                            ; ===========================================================================
0001A966 0000                       SEgg_SwIndex:	dc.w loc_199E6-SEgg_SwIndex
0001A968 0000                       		dc.w SEgg_SwDisplay-SEgg_SwIndex
0001A96A                            ; ===========================================================================
0001A96A                            
0001A96A                            loc_199E6:
0001A96A 2268 0034                  		movea.l	$34(a0),a1
0001A96E 0C69 5357 0028             		cmpi.w	#$5357,obSubtype(a1)
0001A974 6600                       		bne.s	SEgg_SwDisplay
0001A976 117C 0001 001A             		move.b	#1,obFrame(a0)
0001A97C 5428 0025                  		addq.b	#2,ob2ndRout(a0)
0001A980                            
0001A980                            SEgg_SwDisplay:
0001A980 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001A980 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001A986                            		include	"_anim\Eggman - Scrap Brain 2 & Final.asm"
0001A986                            ; ---------------------------------------------------------------------------
0001A986                            ; Animation script - Eggman (SBZ2)
0001A986                            ; ---------------------------------------------------------------------------
0001A986 0000                       Ani_SEgg:	dc.w @stand-Ani_SEgg
0001A988 0000                       		dc.w @laugh-Ani_SEgg
0001A98A 0000                       		dc.w @jump1-Ani_SEgg
0001A98C 0000                       		dc.w @intube-Ani_SEgg
0001A98E 0000                       		dc.w @running-Ani_SEgg
0001A990 0000                       		dc.w @jump2-Ani_SEgg
0001A992 0000                       		dc.w @starjump-Ani_SEgg
0001A994 7E00 FF                    @stand:		dc.b $7E, 0, afEnd
0001A998 00                         		even
0001A998 0601 02FF                  @laugh:		dc.b 6,	1, 2, afEnd
0001A99C 0E03 0404 0000 00FF        @jump1:		dc.b $E, 3, 4, 4, 0, 0,	0, afEnd
0001A9A4 0005 09FF                  @intube:	dc.b 0,	5, 9, afEnd
0001A9A8 0607 0408 04FF             @running:	dc.b 6,	7, 4, 8, 4, afEnd
0001A9AE 0F04 0303 FF               @jump2:		dc.b $F, 4, 3, 3, afEnd
0001A9B4 00                         		even
0001A9B4 7E06 FF                    @starjump:	dc.b $7E, 6, afEnd
0001A9B8 00                         		even
0001A9B8 00                         		even
0001A9B8                            Map_SEgg:	include	"_maps\Eggman - Scrap Brain 2.asm"
0001A9B8                            ; ---------------------------------------------------------------------------
0001A9B8                            ; Sprite mappings - Eggman (SBZ2)
0001A9B8                            ; ---------------------------------------------------------------------------
0001A9B8                            Map_SEgg_internal:
0001A9B8 0000                       		dc.w @stand-Map_SEgg_internal
0001A9BA 0000                       		dc.w @laugh1-Map_SEgg_internal
0001A9BC 0000                       		dc.w @laugh2-Map_SEgg_internal
0001A9BE 0000                       		dc.w @jump1-Map_SEgg_internal
0001A9C0 0000                       		dc.w @jump2-Map_SEgg_internal
0001A9C2 0000                       		dc.w @surprise-Map_SEgg_internal
0001A9C4 0000                       		dc.w @starjump-Map_SEgg_internal
0001A9C6 0000                       		dc.w @running1-Map_SEgg_internal
0001A9C8 0000                       		dc.w @running2-Map_SEgg_internal
0001A9CA 0000                       		dc.w @intube-Map_SEgg_internal
0001A9CC 0000                       		dc.w @cockpit-Map_SEgg_internal
0001A9CE 03                         @stand:		dc.b 3
0001A9CF FC00 008F E8               		dc.b $FC, 0, 0,	$8F, $E8
0001A9D4 E80E 0000 F0               		dc.b $E8, $E, 0, 0, $F0
0001A9D9 000F 006F F0               		dc.b 0,	$F, 0, $6F, $F0
0001A9DE 04                         @laugh1:	dc.b 4
0001A9DF E80D 000E F0               		dc.b $E8, $D, 0, $E, $F0
0001A9E4 E80E 0000 F0               		dc.b $E8, $E, 0, 0, $F0
0001A9E9 000F 006F F0               		dc.b 0,	$F, 0, $6F, $F0
0001A9EE FC00 008F E8               		dc.b $FC, 0, 0,	$8F, $E8
0001A9F3 00                         		dc.b 0
0001A9F4 04                         @laugh2:	dc.b 4
0001A9F5 E90D 000E F0               		dc.b $E9, $D, 0, $E, $F0
0001A9FA E90E 0000 F0               		dc.b $E9, $E, 0, 0, $F0
0001A9FF 010F 007F F0               		dc.b 1,	$F, 0, $7F, $F0
0001AA04 FD00 008F E8               		dc.b $FD, 0, 0,	$8F, $E8
0001AA09 00                         		dc.b 0
0001AA0A 04                         @jump1:		dc.b 4
0001AA0B F40F 0820 F0               		dc.b $F4, $F, 8, $20, $F0
0001AA10 F504 0830 10               		dc.b $F5, 4, 8,	$30, $10
0001AA15 0809 084E F0               		dc.b 8,	9, 8, $4E, $F0
0001AA1A EC0E 0000 F0               		dc.b $EC, $E, 0, 0, $F0
0001AA1F 00                         		dc.b 0
0001AA20 04                         @jump2:		dc.b 4
0001AA21 F00F 0820 F0               		dc.b $F0, $F, 8, $20, $F0
0001AA26 F104 0830 10               		dc.b $F1, 4, 8,	$30, $10
0001AA2B 0806 083E F8               		dc.b 8,	6, 8, $3E, $F8
0001AA30 E80E 0000 F0               		dc.b $E8, $E, 0, 0, $F0
0001AA35 00                         		dc.b 0
0001AA36 04                         @surprise:	dc.b 4
0001AA37 E80D 0016 EC               		dc.b $E8, $D, 0, $16, $EC
0001AA3C E801 001E 0C               		dc.b $E8, 1, 0,	$1E, $C
0001AA41 E80E 0000 F0               		dc.b $E8, $E, 0, 0, $F0
0001AA46 000F 006F F0               		dc.b 0,	$F, 0, $6F, $F0
0001AA4B 00                         		dc.b 0
0001AA4C 07                         @starjump:	dc.b 7
0001AA4D E80D 0016 EC               		dc.b $E8, $D, 0, $16, $EC
0001AA52 E801 001E 0C               		dc.b $E8, 1, 0,	$1E, $C
0001AA57 0409 0834 00               		dc.b 4,	9, 8, $34, 0
0001AA5C 0405 083A E8               		dc.b 4,	5, 8, $3A, $E8
0001AA61 F00F 0820 F0               		dc.b $F0, $F, 8, $20, $F0
0001AA66 F104 0854 10               		dc.b $F1, 4, 8,	$54, $10
0001AA6B F104 0054 E0               		dc.b $F1, 4, 0,	$54, $E0
0001AA70 05                         @running1:	dc.b 5
0001AA71 F00F 0820 F0               		dc.b $F0, $F, 8, $20, $F0
0001AA76 F104 0830 10               		dc.b $F1, 4, 8,	$30, $10
0001AA7B 0409 0834 00               		dc.b 4,	9, 8, $34, 0
0001AA80 0405 083A E8               		dc.b 4,	5, 8, $3A, $E8
0001AA85 E80E 0000 F0               		dc.b $E8, $E, 0, 0, $F0
0001AA8A 06                         @running2:	dc.b 6
0001AA8B EE0F 0820 F0               		dc.b $EE, $F, 8, $20, $F0
0001AA90 EF04 0830 10               		dc.b $EF, 4, 8,	$30, $10
0001AA95 0905 0844 00               		dc.b 9,	5, 8, $44, 0
0001AA9A 0301 0848 F8               		dc.b 3,	1, 8, $48, $F8
0001AA9F 0B05 084A E8               		dc.b $B, 5, 8, $4A, $E8
0001AAA4 E60E 0000 F0               		dc.b $E6, $E, 0, 0, $F0
0001AAA9 00                         		dc.b 0
0001AAAA 08                         @intube:	dc.b 8
0001AAAB E80D 0016 EC               		dc.b $E8, $D, 0, $16, $EC ; Eggman inside tube in Final Zone
0001AAB0 E801 001E 0C               		dc.b $E8, 1, 0,	$1E, $C
0001AAB5 E80E 0000 F0               		dc.b $E8, $E, 0, 0, $F0
0001AABA 000F 006F F0               		dc.b 0,	$F, 0, $6F, $F0
0001AABF E00D 3EF0 F0               		dc.b $E0, $D, $3E, $F0,	$F0
0001AAC4 F00D 3EF0 F0               		dc.b $F0, $D, $3E, $F0,	$F0
0001AAC9 000D 3EF0 F0               		dc.b 0,	$D, $3E, $F0, $F0
0001AACE 100D 3EF0 F0               		dc.b $10, $D, $3E, $F0,	$F0
0001AAD3 03                         @cockpit:	dc.b 3
0001AAD4 EC0D 0056 E4               		dc.b $EC, $D, 0, $56, $E4 ; empty cockpit of Eggmobile in Final Zone
0001AAD9 F408 005E 04               		dc.b $F4, 8, 0,	$5E, 4
0001AADE EC0D 0061 FC               		dc.b $EC, $D, 0, $61, $FC
0001AAE4 00                         		even
0001AAE4 00                         		even
0001AAE4                            		include	"_incObj\83 SBZ Eggman's Crumbling Floor.asm"
0001AAE4                            ; ---------------------------------------------------------------------------
0001AAE4                            ; Object 83 - blocks that disintegrate Eggman	presses	a switch (SBZ2)
0001AAE4                            ; ---------------------------------------------------------------------------
0001AAE4                            
0001AAE4                            FalseFloor:
0001AAE4 7000                       		moveq	#0,d0
0001AAE6 1028 0024                  		move.b	obRoutine(a0),d0
0001AAEA 323B 0000                  		move.w	FFloor_Index(pc,d0.w),d1
0001AAEE 4EFB 1000                  		jmp	FFloor_Index(pc,d1.w)
0001AAF2                            ; ===========================================================================
0001AAF2 0000                       FFloor_Index:	dc.w FFloor_Main-FFloor_Index
0001AAF4 0000                       		dc.w FFloor_ChkBreak-FFloor_Index
0001AAF6 0000                       		dc.w loc_19C36-FFloor_Index
0001AAF8 0000                       		dc.w loc_19C62-FFloor_Index
0001AAFA 0000                       		dc.w loc_19C72-FFloor_Index
0001AAFC 0000                       		dc.w loc_19C80-FFloor_Index
0001AAFE                            ; ===========================================================================
0001AAFE                            
0001AAFE                            FFloor_Main:	; Routine 0
0001AAFE 317C 2080 0008             		move.w	#$2080,obX(a0)
0001AB04 317C 05D0 000C             		move.w	#$5D0,obY(a0)
0001AB0A 117C 0080 0019             		move.b	#$80,obActWid(a0)
0001AB10 117C 0010 0016             		move.b	#$10,obHeight(a0)
0001AB16 117C 0004 0001             		move.b	#4,obRender(a0)
0001AB1C 08E8 0007 0001             		bset	#7,obRender(a0)
0001AB22 7800                       		moveq	#0,d4
0001AB24 3A3C 2010                  		move.w	#$2010,d5
0001AB28 7C07                       		moveq	#7,d6
0001AB2A 45E8 0030                  		lea	$30(a0),a2
0001AB2E                            
0001AB2E                            FFloor_MakeBlock:
0001AB2E 4EB9 0000 E8B0             		jsr	(FindFreeObj).l
0001AB34 6600                       		bne.s	FFloor_ExitMake
0001AB36 34C9                       		move.w	a1,(a2)+
0001AB38 12BC 0083                  		move.b	#id_FalseFloor,(a1) ; load block object
0001AB3C 237C 0000 0000 0004        		move.l	#Map_FFloor,obMap(a1)
0001AB44 337C 4518 0002             		move.w	#$4518,obGfx(a1)
0001AB4A 137C 0004 0001             		move.b	#4,obRender(a1)
0001AB50 137C 0010 0019             		move.b	#$10,obActWid(a1)
0001AB56 137C 0010 0016             		move.b	#$10,obHeight(a1)
0001AB5C 137C 0003 0018             		move.b	#3,obPriority(a1)
0001AB62 3345 0008                  		move.w	d5,obX(a1)	; set X	position
0001AB66 337C 05D0 000C             		move.w	#$5D0,obY(a1)
0001AB6C 0645 0020                  		addi.w	#$20,d5		; add $20 for next X position
0001AB70 137C 0008 0024             		move.b	#8,obRoutine(a1)
0001AB76 51CE FFB6                  		dbf	d6,FFloor_MakeBlock ; repeat sequence 7 more times
0001AB7A                            
0001AB7A                            FFloor_ExitMake:
0001AB7A 5428 0024                  		addq.b	#2,obRoutine(a0)
0001AB7E 4E75                       		rts	
0001AB80                            ; ===========================================================================
0001AB80                            
0001AB80                            FFloor_ChkBreak:; Routine 2
0001AB80 0C68 474F 0028             		cmpi.w	#$474F,obSubtype(a0) ; is object set to disintegrate?
0001AB86 6600                       		bne.s	FFloor_Solid	; if not, branch
0001AB88 4228 001A                  		clr.b	obFrame(a0)
0001AB8C 5428 0024                  		addq.b	#2,obRoutine(a0) ; next subroutine
0001AB90                            
0001AB90                            FFloor_Solid:
0001AB90 7000                       		moveq	#0,d0
0001AB92 1028 001A                  		move.b	obFrame(a0),d0
0001AB96 4400                       		neg.b	d0
0001AB98 4880                       		ext.w	d0
0001AB9A 5040                       		addq.w	#8,d0
0001AB9C E940                       		asl.w	#4,d0
0001AB9E 383C 2100                  		move.w	#$2100,d4
0001ABA2 9840                       		sub.w	d0,d4
0001ABA4 1140 0019                  		move.b	d0,obActWid(a0)
0001ABA8 3144 0008                  		move.w	d4,obX(a0)
0001ABAC 720B                       		moveq	#$B,d1
0001ABAE D240                       		add.w	d0,d1
0001ABB0 7410                       		moveq	#$10,d2
0001ABB2 7611                       		moveq	#$11,d3
0001ABB4 4EF9 0001 0798             		jmp	(SolidObject).l
0001ABBA                            ; ===========================================================================
0001ABBA                            
0001ABBA                            loc_19C36:	; Routine 4
0001ABBA 0428 000E 001E             		subi.b	#$E,obTimeFrame(a0)
0001ABC0 6400                       		bcc.s	FFloor_Solid2
0001ABC2 70FF                       		moveq	#-1,d0
0001ABC4 1028 001A                  		move.b	obFrame(a0),d0
0001ABC8 4880                       		ext.w	d0
0001ABCA D040                       		add.w	d0,d0
0001ABCC 3030 0030                  		move.w	$30(a0,d0.w),d0
0001ABD0 2240                       		movea.l	d0,a1
0001ABD2 337C 474F 0028             		move.w	#$474F,obSubtype(a1)
0001ABD8 5228 001A                  		addq.b	#1,obFrame(a0)
0001ABDC 0C28 0008 001A             		cmpi.b	#8,obFrame(a0)
0001ABE2 6700                       		beq.s	loc_19C62
0001ABE4                            
0001ABE4                            FFloor_Solid2:
0001ABE4 60AA                       		bra.s	FFloor_Solid
0001ABE6                            ; ===========================================================================
0001ABE6                            
0001ABE6                            loc_19C62:	; Routine 6
0001ABE6 08A8 0003 0022             		bclr	#3,obStatus(a0)
0001ABEC 08B8 0003 D022             		bclr	#3,(v_player+obStatus).w
0001ABF2 6000 FBBC                  		bra.w	loc_1982C
0001ABF6                            ; ===========================================================================
0001ABF6                            
0001ABF6                            loc_19C72:	; Routine 8
0001ABF6 0C68 474F 0028             		cmpi.w	#$474F,obSubtype(a0) ; is object set to disintegrate?
0001ABFC 6700                       		beq.s	FFloor_Break	; if yes, branch
0001ABFE 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001AC04                            ; ===========================================================================
0001AC04                            
0001AC04                            loc_19C80:	; Routine $A
0001AC04 4A28 0001                  		tst.b	obRender(a0)
0001AC08 6A00 FBA6                  		bpl.w	loc_1982C
0001AC0C 4EB9 0000 E3D6             		jsr	(ObjectFall).l
0001AC12 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001AC18                            ; ===========================================================================
0001AC18                            
0001AC18                            FFloor_Break:
0001AC18 49FA 0000                  		lea	FFloor_FragSpeed(pc),a4
0001AC1C 4BFA 0000                  		lea	FFloor_FragPos(pc),a5
0001AC20 7801                       		moveq	#1,d4
0001AC22 7203                       		moveq	#3,d1
0001AC24 7438                       		moveq	#$38,d2
0001AC26 5428 0024                  		addq.b	#2,obRoutine(a0)
0001AC2A 117C 0008 0019             		move.b	#8,obActWid(a0)
0001AC30 117C 0008 0016             		move.b	#8,obHeight(a0)
0001AC36 43D0                       		lea	(a0),a1
0001AC38 6000                       		bra.s	FFloor_MakeFrag
0001AC3A                            ; ===========================================================================
0001AC3A                            
0001AC3A                            FFloor_LoopFrag:
0001AC3A 4EB9 0000 E8C6             		jsr	(FindNextFreeObj).l
0001AC40 6600                       		bne.s	FFloor_BreakSnd
0001AC42                            
0001AC42                            FFloor_MakeFrag:
0001AC42 45D0                       		lea	(a0),a2
0001AC44 47D1                       		lea	(a1),a3
0001AC46 7603                       		moveq	#3,d3
0001AC48                            
0001AC48                            loc_19CC4:
0001AC48 26DA                       		move.l	(a2)+,(a3)+
0001AC4A 26DA                       		move.l	(a2)+,(a3)+
0001AC4C 26DA                       		move.l	(a2)+,(a3)+
0001AC4E 26DA                       		move.l	(a2)+,(a3)+
0001AC50 51CB FFF6                  		dbf	d3,loc_19CC4
0001AC54                            
0001AC54 335C 0012                  		move.w	(a4)+,obVelY(a1)
0001AC58 361D                       		move.w	(a5)+,d3
0001AC5A D769 0008                  		add.w	d3,obX(a1)
0001AC5E 361D                       		move.w	(a5)+,d3
0001AC60 D769 000C                  		add.w	d3,obY(a1)
0001AC64 1344 001A                  		move.b	d4,obFrame(a1)
0001AC68 5244                       		addq.w	#1,d4
0001AC6A 51C9 FFCE                  		dbf	d1,FFloor_LoopFrag ; repeat sequence 3 more times
0001AC6E                            
0001AC6E                            FFloor_BreakSnd:
0001AC78 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001AC7E                            ; ===========================================================================
0001AC7E 0080 0000                  FFloor_FragSpeed:dc.w $80, 0
0001AC82 0120 00C0                  		dc.w $120, $C0
0001AC86 FFF8 FFF8                  FFloor_FragPos:	dc.w -8, -8
0001AC8A 0010 0000                  		dc.w $10, 0
0001AC8E 0000 0010                  		dc.w 0,	$10
0001AC92 0010 0010                  		dc.w $10, $10
0001AC92 0010 0010                  		dc.w $10, $10
0001AC96                            Map_FFloor:	include	"_maps\SBZ Eggman's Crumbling Floor.asm"
0001AC96                            ; ---------------------------------------------------------------------------
0001AC96                            ; Sprite mappings - blocks that	disintegrate when Eggman presses a switch
0001AC96                            ; ---------------------------------------------------------------------------
0001AC96                            Map_FFloor_internal:
0001AC96 0000                       		dc.w @wholeblock-Map_FFloor_internal
0001AC98 0000                       		dc.w @topleft-Map_FFloor_internal
0001AC9A 0000                       		dc.w @topright-Map_FFloor_internal
0001AC9C 0000                       		dc.w @bottomleft-Map_FFloor_internal
0001AC9E 0000                       		dc.w @bottomright-Map_FFloor_internal
0001ACA0 01                         @wholeblock:	dc.b 1
0001ACA1 F00F 0000 F0               		dc.b $F0, $F, 0, 0, $F0
0001ACA6 02                         @topleft:	dc.b 2
0001ACA7 F801 0000 F8               		dc.b $F8, 1, 0,	0, $F8
0001ACAC F801 0004 00               		dc.b $F8, 1, 0,	4, 0
0001ACB1 00                         		dc.b 0
0001ACB2 02                         @topright:	dc.b 2
0001ACB3 F801 0008 F8               		dc.b $F8, 1, 0,	8, $F8
0001ACB8 F801 000C 00               		dc.b $F8, 1, 0,	$C, 0
0001ACBD 00                         		dc.b 0
0001ACBE 02                         @bottomleft:	dc.b 2
0001ACBF F801 0002 F8               		dc.b $F8, 1, 0,	2, $F8
0001ACC4 F801 0006 00               		dc.b $F8, 1, 0,	6, 0
0001ACC9 00                         		dc.b 0
0001ACCA 02                         @bottomright:	dc.b 2
0001ACCB F801 000A F8               		dc.b $F8, 1, 0,	$A, $F8
0001ACD0 F801 000E 00               		dc.b $F8, 1, 0,	$E, 0
0001ACD6 00                         		even
0001ACD6 00                         		even
0001ACD6                            		include	"_incObj\85 Boss - Final.asm"
0001ACD6                            ; ---------------------------------------------------------------------------
0001ACD6                            ; Object 85 - Eggman (FZ)
0001ACD6                            ; ---------------------------------------------------------------------------
0001ACD6                            
0001ACD6                            Obj85_Delete:
0001ACD6 4EF9 0000 E464             		jmp	(DeleteObject).l
0001ACDC                            ; ===========================================================================
0001ACDC                            
0001ACDC                            BossFinal:
0001ACDC 7000                       		moveq	#0,d0
0001ACDE 1028 0024                  		move.b	obRoutine(a0),d0
0001ACE2 303B 0000                  		move.w	Obj85_Index(pc,d0.w),d0
0001ACE6 4EFB 0000                  		jmp	Obj85_Index(pc,d0.w)
0001ACEA                            ; ===========================================================================
0001ACEA 0000                       Obj85_Index:	dc.w Obj85_Main-Obj85_Index
0001ACEC 0000                       		dc.w Obj85_Eggman-Obj85_Index
0001ACEE 0000                       		dc.w loc_1A38E-Obj85_Index
0001ACF0 0000                       		dc.w loc_1A346-Obj85_Index
0001ACF2 0000                       		dc.w loc_1A2C6-Obj85_Index
0001ACF4 0000                       		dc.w loc_1A3AC-Obj85_Index
0001ACF6 0000                       		dc.w loc_1A264-Obj85_Index
0001ACF8                            
0001ACF8 0100 0100 0470             Obj85_ObjData:	dc.w $100, $100, $470	; X pos, Y pos,	VRAM setting
0001ACFE 0001 A9B8                  		dc.l Map_SEgg		; mappings pointer
0001AD02 25B0 0590 0300             		dc.w $25B0, $590, $300
0001AD08 0000 0000                  		dc.l Map_EggCyl
0001AD0C 26E0 0596 03A0             		dc.w $26E0, $596, $3A0
0001AD12 0000 0000                  		dc.l Map_FZLegs
0001AD16 26E0 0596 0470             		dc.w $26E0, $596, $470
0001AD1C 0001 A9B8                  		dc.l Map_SEgg
0001AD20 26E0 0596 0400             		dc.w $26E0, $596, $400
0001AD26 0001 8C90                  		dc.l Map_Eggman
0001AD2A 26E0 0596 0400             		dc.w $26E0, $596, $400
0001AD30 0001 8C90                  		dc.l Map_Eggman
0001AD34                            
0001AD34 0200 0420 19               Obj85_ObjData2:	dc.b 2,	0, 4, $20, $19	; routine num, animation, sprite priority, width, height
0001AD39 0400 0112 08               		dc.b 4,	0, 1, $12, 8
0001AD3E 0600 0300 00               		dc.b 6,	0, 3, 0, 0
0001AD43 0800 0300 00               		dc.b 8,	0, 3, 0, 0
0001AD48 0A00 0320 20               		dc.b $A, 0, 3, $20, $20
0001AD4D 0C00 0300 00               		dc.b $C, 0, 3, 0, 0
0001AD52                            ; ===========================================================================
0001AD52                            
0001AD52                            Obj85_Main:	; Routine 0
0001AD52 45FA FFA4                  		lea	Obj85_ObjData(pc),a2
0001AD56 47FA FFDC                  		lea	Obj85_ObjData2(pc),a3
0001AD5A 2248                       		movea.l	a0,a1
0001AD5C 7205                       		moveq	#5,d1
0001AD5E 6000                       		bra.s	Obj85_LoadBoss
0001AD60                            ; ===========================================================================
0001AD60                            
0001AD60                            Obj85_Loop:
0001AD60 4EB9 0000 E8C6             		jsr	(FindNextFreeObj).l
0001AD66 6600                       		bne.s	loc_19E20
0001AD68                            
0001AD68                            Obj85_LoadBoss:
0001AD68 12BC 0085                  		move.b	#id_BossFinal,(a1)
0001AD6C 335A 0008                  		move.w	(a2)+,obX(a1)
0001AD70 335A 000C                  		move.w	(a2)+,obY(a1)
0001AD74 335A 0002                  		move.w	(a2)+,obGfx(a1)
0001AD78 235A 0004                  		move.l	(a2)+,obMap(a1)
0001AD7C 135B 0024                  		move.b	(a3)+,obRoutine(a1)
0001AD80 135B 001C                  		move.b	(a3)+,obAnim(a1)
0001AD84 135B 0018                  		move.b	(a3)+,obPriority(a1)
0001AD88 135B 0017                  		move.b	(a3)+,obWidth(a1)
0001AD8C 135B 0016                  		move.b	(a3)+,obHeight(a1)
0001AD90 137C 0004 0001             		move.b	#4,obRender(a1)
0001AD96 08E8 0007 0001             		bset	#7,obRender(a0)
0001AD9C 2348 0034                  		move.l	a0,$34(a1)
0001ADA0 51C9 FFBE                  		dbf	d1,Obj85_Loop
0001ADA4                            
0001ADA4                            loc_19E20:
0001ADA4 45E8 0036                  		lea	$36(a0),a2
0001ADA8 4EB9 0000 E8B0             		jsr	(FindFreeObj).l
0001ADAE 6600                       		bne.s	loc_19E5A
0001ADB0 12BC 0086                  		move.b	#id_BossPlasma,(a1) ; load energy ball object
0001ADB4 3489                       		move.w	a1,(a2)
0001ADB6 2348 0034                  		move.l	a0,$34(a1)
0001ADBA 45E8 0038                  		lea	$38(a0),a2
0001ADBE 7400                       		moveq	#0,d2
0001ADC0 7203                       		moveq	#3,d1
0001ADC2                            
0001ADC2                            loc_19E3E:
0001ADC2 4EB9 0000 E8C6             		jsr	(FindNextFreeObj).l
0001ADC8 6600                       		bne.s	loc_19E5A
0001ADCA 34C9                       		move.w	a1,(a2)+
0001ADCC 12BC 0084                  		move.b	#id_EggmanCylinder,(a1) ; load crushing	cylinder object
0001ADD0 2348 0034                  		move.l	a0,$34(a1)
0001ADD4 1342 0028                  		move.b	d2,obSubtype(a1)
0001ADD8 5442                       		addq.w	#2,d2
0001ADDA 51C9 FFE6                  		dbf	d1,loc_19E3E
0001ADDE                            
0001ADDE                            loc_19E5A:
0001ADDE 317C 0000 0034             		move.w	#0,$34(a0)
0001ADE4 117C 0008 0021             		move.b	#8,obColProp(a0) ; set number of hits to 8
0001ADEA 317C FFFF 0030             		move.w	#-1,$30(a0)
0001ADF0                            
0001ADF0                            Obj85_Eggman:	; Routine 2
0001ADF0 7000                       		moveq	#0,d0
0001ADF2 1028 0034                  		move.b	$34(a0),d0
0001ADF6 303B 0000                  		move.w	off_19E80(pc,d0.w),d0
0001ADFA 4EBB 0000                  		jsr	off_19E80(pc,d0.w)
0001ADFE 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001AE04                            ; ===========================================================================
0001AE04 0000 0000                  off_19E80:	dc.w loc_19E90-off_19E80, loc_19EA8-off_19E80
0001AE08 0000 0000                  		dc.w loc_19FE6-off_19E80, loc_1A02A-off_19E80
0001AE0C 0000 0000                  		dc.w loc_1A074-off_19E80, loc_1A112-off_19E80
0001AE10 0000 0000                  		dc.w loc_1A192-off_19E80, loc_1A1D4-off_19E80
0001AE14                            ; ===========================================================================
0001AE14                            
0001AE14                            loc_19E90:
0001AE14 4AB8 F680                  		tst.l	(v_plc_buffer).w
0001AE18 6600                       		bne.s	loc_19EA2
0001AE1A 0C78 2450 F700             		cmpi.w	#$2450,(v_screenposx).w
0001AE20 6500                       		bcs.s	loc_19EA2
0001AE22 5428 0034                  		addq.b	#2,$34(a0)
0001AE26                            
0001AE26                            loc_19EA2:
0001AE26 52B8 F636                  		addq.l	#1,(v_random).w
0001AE2A 4E75                       		rts	
0001AE2C                            ; ===========================================================================
0001AE2C                            
0001AE2C                            loc_19EA8:
0001AE2C 4A68 0030                  		tst.w	$30(a0)
0001AE30 6A00                       		bpl.s	loc_19F10
0001AE32 4268 0030                  		clr.w	$30(a0)
0001AE36 4EB9 0000 27C6             		jsr	(RandomNumber).l
0001AE3C 0240 000C                  		andi.w	#$C,d0
0001AE40 3200                       		move.w	d0,d1
0001AE42 5441                       		addq.w	#2,d1
0001AE44 4A80                       		tst.l	d0
0001AE46 6A00                       		bpl.s	loc_19EC6
0001AE48 C340                       		exg	d1,d0
0001AE4A                            
0001AE4A                            loc_19EC6:
0001AE4A 43FA 0000                  		lea	word_19FD6(pc),a1
0001AE4E 3031 0000                  		move.w	(a1,d0.w),d0
0001AE52 3231 1000                  		move.w	(a1,d1.w),d1
0001AE56 3140 0030                  		move.w	d0,$30(a0)
0001AE5A 74FF                       		moveq	#-1,d2
0001AE5C 3430 0038                  		move.w	$38(a0,d0.w),d2
0001AE60 2242                       		movea.l	d2,a1
0001AE62 137C 00FF 0029             		move.b	#-1,$29(a1)
0001AE68 337C FFFF 0030             		move.w	#-1,$30(a1)
0001AE6E 3430 1038                  		move.w	$38(a0,d1.w),d2
0001AE72 2242                       		movea.l	d2,a1
0001AE74 137C 0001 0029             		move.b	#1,$29(a1)
0001AE7A 337C 0000 0030             		move.w	#0,$30(a1)
0001AE80 317C 0001 0032             		move.w	#1,$32(a0)
0001AE86 4228 0035                  		clr.b	$35(a0)
0001AE94                            
0001AE94                            loc_19F10:
0001AE94 4A68 0032                  		tst.w	$32(a0)
0001AE98 6B00 0000                  		bmi.w	loc_19FA6
0001AE9C 08A8 0000 0022             		bclr	#0,obStatus(a0)
0001AEA2 3038 D008                  		move.w	(v_player+obX).w,d0
0001AEA6 9068 0008                  		sub.w	obX(a0),d0
0001AEAA 6500                       		bcs.s	loc_19F2E
0001AEAC 08E8 0000 0022             		bset	#0,obStatus(a0)
0001AEB2                            
0001AEB2                            loc_19F2E:
0001AEB2 323C 002B                  		move.w	#$2B,d1
0001AEB6 343C 0014                  		move.w	#$14,d2
0001AEBA 363C 0014                  		move.w	#$14,d3
0001AEBE 3828 0008                  		move.w	obX(a0),d4
0001AEC2 4EB9 0001 0798             		jsr	(SolidObject).l
0001AEC8 4A44                       		tst.w	d4
0001AECA 6E00                       		bgt.s	loc_19F50
0001AECC                            
0001AECC                            loc_19F48:
0001AECC 4A28 0035                  		tst.b	$35(a0)
0001AED0 6600                       		bne.s	loc_19F88
0001AED2 6000                       		bra.s	loc_19F96
0001AED4                            ; ===========================================================================
0001AED4                            
0001AED4                            loc_19F50:
0001AED4 5E78 F636                  		addq.w	#7,(v_random).w
0001AED8 0C38 0002 D01C             		cmpi.b	#id_Roll,(v_player+obAnim).w
0001AEDE 66EC                       		bne.s	loc_19F48
0001AEE0 303C 0300                  		move.w	#$300,d0
0001AEE4 0828 0000 0022             		btst	#0,obStatus(a0)
0001AEEA 6600                       		bne.s	loc_19F6A
0001AEEC 4440                       		neg.w	d0
0001AEEE                            
0001AEEE                            loc_19F6A:
0001AEEE 31C0 D010                  		move.w	d0,(v_player+obVelX).w
0001AEF2 4A28 0035                  		tst.b	$35(a0)
0001AEF6 6600                       		bne.s	loc_19F88
0001AEF8 5328 0021                  		subq.b	#1,obColProp(a0)
0001AEFC 117C 0064 0035             		move.b	#$64,$35(a0)
0001AF0C                            
0001AF0C                            loc_19F88:
0001AF0C 5328 0035                  		subq.b	#1,$35(a0)
0001AF10 6700                       		beq.s	loc_19F96
0001AF12 117C 0003 001C             		move.b	#3,obAnim(a0)
0001AF18 6000                       		bra.s	loc_19F9C
0001AF1A                            ; ===========================================================================
0001AF1A                            
0001AF1A                            loc_19F96:
0001AF1A 117C 0001 001C             		move.b	#1,obAnim(a0)
0001AF20                            
0001AF20                            loc_19F9C:
0001AF20 43FA FA64                  		lea	Ani_SEgg(pc),a1
0001AF24 4EF9 0000 B1E6             		jmp	(AnimateSprite).l
0001AF2A                            ; ===========================================================================
0001AF2A                            
0001AF2A                            loc_19FA6:
0001AF2A 4A28 0021                  		tst.b	obColProp(a0)
0001AF2E 6700                       		beq.s	loc_19FBC
0001AF30 5428 0034                  		addq.b	#2,$34(a0)
0001AF34 317C FFFF 0030             		move.w	#-1,$30(a0)
0001AF3A 4268 0032                  		clr.w	$32(a0)
0001AF3E 4E75                       		rts	
0001AF40                            ; ===========================================================================
0001AF40                            
0001AF40                            loc_19FBC:
0001AF40 117C 0006 0034             		move.b	#6,$34(a0)
0001AF46 317C 25C0 0008             		move.w	#$25C0,obX(a0)
0001AF4C 317C 053C 000C             		move.w	#$53C,obY(a0)
0001AF52 117C 0014 0016             		move.b	#$14,obHeight(a0)
0001AF58 4E75                       		rts	
0001AF5A                            ; ===========================================================================
0001AF5A 0000 0002 0002 0004 0004+  word_19FD6:	dc.w 0,	2, 2, 4, 4, 6, 6, 0
0001AF6A                            ; ===========================================================================
0001AF6A                            
0001AF6A                            loc_19FE6:
0001AF6A 70FF                       		moveq	#-1,d0
0001AF6C 3028 0036                  		move.w	$36(a0),d0
0001AF70 2240                       		movea.l	d0,a1
0001AF72 4A68 0030                  		tst.w	$30(a0)
0001AF76 6A00                       		bpl.s	loc_1A000
0001AF78 4268 0030                  		clr.w	$30(a0)
0001AF7C 137C 00FF 0029             		move.b	#-1,$29(a1)
0001AF82 6100                       		bsr.s	loc_1A020
0001AF84                            
0001AF84                            loc_1A000:
0001AF84 700F                       		moveq	#$F,d0
0001AF86 C078 FE0E                  		and.w	(v_vbla_word).w,d0
0001AF8A 6600                       		bne.s	loc_1A00A
0001AF8C 6100                       		bsr.s	loc_1A020
0001AF8E                            
0001AF8E                            loc_1A00A:
0001AF8E 4A68 0032                  		tst.w	$32(a0)
0001AF92 6700                       		beq.s	locret_1A01E
0001AF94 5528 0034                  		subq.b	#2,$34(a0)
0001AF98 317C FFFF 0030             		move.w	#-1,$30(a0)
0001AF9E 4268 0032                  		clr.w	$32(a0)
0001AFA2                            
0001AFA2                            locret_1A01E:
0001AFA2 4E75                       		rts	
0001AFA4                            ; ===========================================================================
0001AFA4                            
0001AFA4                            loc_1A020:
0001AFAE                            ; ===========================================================================
0001AFAE                            
0001AFAE                            loc_1A02A:
0001AFAE 117C 0030 0017             		move.b	#$30,obWidth(a0)
0001AFB4 08E8 0000 0022             		bset	#0,obStatus(a0)
0001AFBA 4EB9 0000 E402             		jsr	(SpeedToPos).l
0001AFC0 117C 0006 001A             		move.b	#6,obFrame(a0)
0001AFC6 0668 0010 0012             		addi.w	#$10,obVelY(a0)
0001AFCC 0C68 059C 000C             		cmpi.w	#$59C,obY(a0)
0001AFD2 6500                       		bcs.s	loc_1A070
0001AFD4 317C 059C 000C             		move.w	#$59C,obY(a0)
0001AFDA 5428 0034                  		addq.b	#2,$34(a0)
0001AFDE 117C 0020 0017             		move.b	#$20,obWidth(a0)
0001AFE4 317C 0100 0010             		move.w	#$100,obVelX(a0)
0001AFEA 317C FF00 0012             		move.w	#-$100,obVelY(a0)
0001AFF0 5438 F742                  		addq.b	#2,(v_dle_routine).w
0001AFF4                            
0001AFF4                            loc_1A070:
0001AFF4 6000 0000                  		bra.w	loc_1A166
0001AFF8                            ; ===========================================================================
0001AFF8                            
0001AFF8                            loc_1A074:
0001AFF8 08E8 0000 0022             		bset	#0,obStatus(a0)
0001AFFE 117C 0004 001C             		move.b	#4,obAnim(a0)
0001B004 4EB9 0000 E402             		jsr	(SpeedToPos).l
0001B00A 0668 0010 0012             		addi.w	#$10,obVelY(a0)
0001B010 0C68 05A3 000C             		cmpi.w	#$5A3,obY(a0)
0001B016 6500                       		bcs.s	loc_1A09A
0001B018 317C FFC0 0012             		move.w	#-$40,obVelY(a0)
0001B01E                            
0001B01E                            loc_1A09A:
0001B01E 317C 0400 0010             		move.w	#$400,obVelX(a0)
0001B024 3028 0008                  		move.w	obX(a0),d0
0001B028 9078 D008                  		sub.w	(v_player+obX).w,d0
0001B02C 6A00                       		bpl.s	loc_1A0B4
0001B02E 317C 0500 0010             		move.w	#$500,obVelX(a0)
0001B034 6000 0000                  		bra.w	loc_1A0F2
0001B038                            ; ===========================================================================
0001B038                            
0001B038                            loc_1A0B4:
0001B038 0440 0070                  		subi.w	#$70,d0
0001B03C 6500                       		bcs.s	loc_1A0F2
0001B03E 0468 0100 0010             		subi.w	#$100,obVelX(a0)
0001B044 5140                       		subq.w	#8,d0
0001B046 6500                       		bcs.s	loc_1A0F2
0001B048 0468 0100 0010             		subi.w	#$100,obVelX(a0)
0001B04E 5140                       		subq.w	#8,d0
0001B050 6500                       		bcs.s	loc_1A0F2
0001B052 0468 0080 0010             		subi.w	#$80,obVelX(a0)
0001B058 5140                       		subq.w	#8,d0
0001B05A 6500                       		bcs.s	loc_1A0F2
0001B05C 0468 0080 0010             		subi.w	#$80,obVelX(a0)
0001B062 5140                       		subq.w	#8,d0
0001B064 6500                       		bcs.s	loc_1A0F2
0001B066 0468 0080 0010             		subi.w	#$80,obVelX(a0)
0001B06C 0440 0038                  		subi.w	#$38,d0
0001B070 6500                       		bcs.s	loc_1A0F2
0001B072 4268 0010                  		clr.w	obVelX(a0)
0001B076                            
0001B076                            loc_1A0F2:
0001B076 0C68 26A0 0008             		cmpi.w	#$26A0,obX(a0)
0001B07C 6500                       		bcs.s	loc_1A110
0001B07E 317C 26A0 0008             		move.w	#$26A0,obX(a0)
0001B084 317C 0240 0010             		move.w	#$240,obVelX(a0)
0001B08A 317C FB40 0012             		move.w	#-$4C0,obVelY(a0)
0001B090 5428 0034                  		addq.b	#2,$34(a0)
0001B094                            
0001B094                            loc_1A110:
0001B094 6000                       		bra.s	loc_1A15C
0001B096                            ; ===========================================================================
0001B096                            
0001B096                            loc_1A112:
0001B096 4EB9 0000 E402             		jsr	(SpeedToPos).l
0001B09C 0C68 26E0 0008             		cmpi.w	#$26E0,obX(a0)
0001B0A2 6500                       		bcs.s	loc_1A124
0001B0A4 4268 0010                  		clr.w	obVelX(a0)
0001B0A8                            
0001B0A8                            loc_1A124:
0001B0A8 0668 0034 0012             		addi.w	#$34,obVelY(a0)
0001B0AE 4A68 0012                  		tst.w	obVelY(a0)
0001B0B2 6B00                       		bmi.s	loc_1A142
0001B0B4 0C68 0592 000C             		cmpi.w	#$592,obY(a0)
0001B0BA 6500                       		bcs.s	loc_1A142
0001B0BC 317C 0592 000C             		move.w	#$592,obY(a0)
0001B0C2 4268 0012                  		clr.w	obVelY(a0)
0001B0C6                            
0001B0C6                            loc_1A142:
0001B0C6 3028 0010                  		move.w	obVelX(a0),d0
0001B0CA 8068 0012                  		or.w	obVelY(a0),d0
0001B0CE 6600                       		bne.s	loc_1A15C
0001B0D0 5428 0034                  		addq.b	#2,$34(a0)
0001B0D4 317C FE80 0012             		move.w	#-$180,obVelY(a0)
0001B0DA 117C 0001 0021             		move.b	#1,obColProp(a0)
0001B0E0                            
0001B0E0                            loc_1A15C:
0001B0E0 43FA F8A4                  		lea	Ani_SEgg(pc),a1
0001B0E4 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
0001B0EA                            
0001B0EA                            loc_1A166:
0001B0EA 0C78 2700 F72A             		cmpi.w	#$2700,(v_limitright2).w
0001B0F0 6C00                       		bge.s	loc_1A172
0001B0F2 5478 F72A                  		addq.w	#2,(v_limitright2).w
0001B0F6                            
0001B0F6                            loc_1A172:
0001B0F6 0C28 000C 0034             		cmpi.b	#$C,$34(a0)
0001B0FC 6C00                       		bge.s	locret_1A190
0001B0FE 323C 001B                  		move.w	#$1B,d1
0001B102 343C 0070                  		move.w	#$70,d2
0001B106 363C 0071                  		move.w	#$71,d3
0001B10A 3828 0008                  		move.w	obX(a0),d4
0001B10E 4EF9 0001 0798             		jmp	(SolidObject).l
0001B114                            ; ===========================================================================
0001B114                            
0001B114                            locret_1A190:
0001B114 4E75                       		rts	
0001B116                            ; ===========================================================================
0001B116                            
0001B116                            loc_1A192:
0001B116 217C 0001 8C90 0004        		move.l	#Map_Eggman,obMap(a0)
0001B11E 317C 0400 0002             		move.w	#$400,obGfx(a0)
0001B124 117C 0000 001C             		move.b	#0,obAnim(a0)
0001B12A 08E8 0000 0022             		bset	#0,obStatus(a0)
0001B130 4EB9 0000 E402             		jsr	(SpeedToPos).l
0001B136 0C68 0544 000C             		cmpi.w	#$544,obY(a0)
0001B13C 6400                       		bcc.s	loc_1A1D0
0001B13E 317C 0180 0010             		move.w	#$180,obVelX(a0)
0001B144 317C FFE8 0012             		move.w	#-$18,obVelY(a0)
0001B14A 117C 000F 0020             		move.b	#$F,obColType(a0)
0001B150 5428 0034                  		addq.b	#2,$34(a0)
0001B154                            
0001B154                            loc_1A1D0:
0001B154 6000 FF8A                  		bra.w	loc_1A15C
0001B158                            ; ===========================================================================
0001B158                            
0001B158                            loc_1A1D4:
0001B158 08E8 0000 0022             		bset	#0,obStatus(a0)
0001B15E 4EB9 0000 E402             		jsr	(SpeedToPos).l
0001B164 4A68 0030                  		tst.w	$30(a0)
0001B168 6600                       		bne.s	loc_1A1FC
0001B16A 4A28 0020                  		tst.b	obColType(a0)
0001B16E 6600                       		bne.s	loc_1A216
0001B170 317C 001E 0030             		move.w	#$1E,$30(a0)
0001B180                            
0001B180                            loc_1A1FC:
0001B180 5368 0030                  		subq.w	#1,$30(a0)
0001B184 6600                       		bne.s	loc_1A216
0001B186 4A28 0022                  		tst.b	obStatus(a0)
0001B18A 6A00                       		bpl.s	loc_1A210
0001B18C 317C 0060 0012             		move.w	#$60,obVelY(a0)
0001B192 6000                       		bra.s	loc_1A216
0001B194                            ; ===========================================================================
0001B194                            
0001B194                            loc_1A210:
0001B194 117C 000F 0020             		move.b	#$F,obColType(a0)
0001B19A                            
0001B19A                            loc_1A216:
0001B19A 0C78 2790 D008             		cmpi.w	#$2790,(v_player+obX).w
0001B1A0 6D00                       		blt.s	loc_1A23A
0001B1A2 11FC 0001 F7CC             		move.b	#1,(f_lockctrl).w
0001B1A8 31FC 0000 F602             		move.w	#0,(v_jpadhold2).w
0001B1AE 4278 D014                  		clr.w	(v_player+obInertia).w
0001B1B2 4A68 0012                  		tst.w	obVelY(a0)
0001B1B6 6A00                       		bpl.s	loc_1A248
0001B1B8 31FC 0100 F602             		move.w	#$100,(v_jpadhold2).w
0001B1BE                            
0001B1BE                            loc_1A23A:
0001B1BE 0C78 27E0 D008             		cmpi.w	#$27E0,(v_player+obX).w
0001B1C4 6D00                       		blt.s	loc_1A248
0001B1C6 31FC 27E0 D008             		move.w	#$27E0,(v_player+obX).w
0001B1CC                            
0001B1CC                            loc_1A248:
0001B1CC 0C68 2900 0008             		cmpi.w	#$2900,obX(a0)
0001B1D2 6500                       		bcs.s	loc_1A260
0001B1D4 4A28 0001                  		tst.b	obRender(a0)
0001B1D8 6B00                       		bmi.s	loc_1A260
0001B1DA 11FC 0018 F600             		move.b	#$18,(v_gamemode).w
0001B1E0 6000 FAF4                  		bra.w	Obj85_Delete
0001B1E4                            ; ===========================================================================
0001B1E4                            
0001B1E4                            loc_1A260:
0001B1E4 6000 FEFA                  		bra.w	loc_1A15C
0001B1E8                            ; ===========================================================================
0001B1E8                            
0001B1E8                            loc_1A264:	; Routine 4
0001B1E8 2268 0034                  		movea.l	$34(a0),a1
0001B1EC 1011                       		move.b	(a1),d0
0001B1EE B010                       		cmp.b	(a0),d0
0001B1F0 6600 FAE4                  		bne.w	Obj85_Delete
0001B1F4 117C 0007 001C             		move.b	#7,obAnim(a0)
0001B1FA 0C29 000C 0034             		cmpi.b	#$C,$34(a1)
0001B200 6C00                       		bge.s	loc_1A280
0001B202 6000                       		bra.s	loc_1A2A6
0001B204                            ; ===========================================================================
0001B204                            
0001B204                            loc_1A280:
0001B204 4A69 0010                  		tst.w	obVelX(a1)
0001B208 6700                       		beq.s	loc_1A28C
0001B20A 117C 000B 001C             		move.b	#$B,obAnim(a0)
0001B210                            
0001B210                            loc_1A28C:
0001B210 43FA DA2E                  		lea	Ani_Eggman(pc),a1
0001B214 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
0001B21A                            
0001B21A                            loc_1A296:
0001B21A 2268 0034                  		movea.l	$34(a0),a1
0001B21E 3169 0008 0008             		move.w	obX(a1),obX(a0)
0001B224 3169 000C 000C             		move.w	obY(a1),obY(a0)
0001B22A                            
0001B22A                            loc_1A2A6:
0001B22A 2268 0034                  		movea.l	$34(a0),a1
0001B22E 1169 0022 0022             		move.b	obStatus(a1),obStatus(a0)
0001B234 7003                       		moveq	#3,d0
0001B236 C028 0022                  		and.b	obStatus(a0),d0
0001B23A 0228 00FC 0001             		andi.b	#$FC,obRender(a0)
0001B240 8128 0001                  		or.b	d0,obRender(a0)
0001B244 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001B24A                            ; ===========================================================================
0001B24A                            
0001B24A                            loc_1A2C6:	; Routine 6
0001B24A 2268 0034                  		movea.l	$34(a0),a1
0001B24E 1011                       		move.b	(a1),d0
0001B250 B010                       		cmp.b	(a0),d0
0001B252 6600 FA82                  		bne.w	Obj85_Delete
0001B256 0CA9 0001 8C90 0004        		cmpi.l	#Map_Eggman,obMap(a1)
0001B25E 6700                       		beq.s	loc_1A2E4
0001B260 117C 000A 001A             		move.b	#$A,obFrame(a0)
0001B266 60C2                       		bra.s	loc_1A2A6
0001B268                            ; ===========================================================================
0001B268                            
0001B268                            loc_1A2E4:
0001B268 117C 0001 001C             		move.b	#1,obAnim(a0)
0001B26E 4A29 0021                  		tst.b	obColProp(a1)
0001B272 6F00                       		ble.s	loc_1A312
0001B274 117C 0006 001C             		move.b	#6,obAnim(a0)
0001B27A 217C 0001 8C90 0004        		move.l	#Map_Eggman,obMap(a0)
0001B282 317C 0400 0002             		move.w	#$400,obGfx(a0)
0001B288 43FA D9B6                  		lea	Ani_Eggman(pc),a1
0001B28C 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
0001B292 6000 FF86                  		bra.w	loc_1A296
0001B296                            ; ===========================================================================
0001B296                            
0001B296                            loc_1A312:
0001B296 4A28 0001                  		tst.b	1(a0)
0001B29A 6A00 FA3A                  		bpl.w	Obj85_Delete
0001B29E 6100 D54A                  		bsr.w	BossDefeated
0001B2A2 117C 0002 0018             		move.b	#2,obPriority(a0)
0001B2A8 117C 0000 001C             		move.b	#0,obAnim(a0)
0001B2AE 217C 0000 0000 0004        		move.l	#Map_FZDamaged,obMap(a0)
0001B2B6 317C 03A0 0002             		move.w	#$3A0,obGfx(a0)
0001B2BC 43FA 0000                  		lea	Ani_FZEgg(pc),a1
0001B2C0 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
0001B2C6 6000 FF52                  		bra.w	loc_1A296
0001B2CA                            ; ===========================================================================
0001B2CA                            
0001B2CA                            loc_1A346:	; Routine 8
0001B2CA 08E8 0000 0022             		bset	#0,obStatus(a0)
0001B2D0 2268 0034                  		movea.l	$34(a0),a1
0001B2D4 0CA9 0001 8C90 0004        		cmpi.l	#Map_Eggman,obMap(a1)
0001B2DC 6700                       		beq.s	loc_1A35E
0001B2DE 6000 FF4A                  		bra.w	loc_1A2A6
0001B2E2                            ; ===========================================================================
0001B2E2                            
0001B2E2                            loc_1A35E:
0001B2E2 3169 0008 0008             		move.w	obX(a1),obX(a0)
0001B2E8 3169 000C 000C             		move.w	obY(a1),obY(a0)
0001B2EE 4A28 001E                  		tst.b	obTimeFrame(a0)
0001B2F2 6600                       		bne.s	loc_1A376
0001B2F4 117C 0014 001E             		move.b	#$14,obTimeFrame(a0)
0001B2FA                            
0001B2FA                            loc_1A376:
0001B2FA 5328 001E                  		subq.b	#1,obTimeFrame(a0)
0001B2FE 6E00                       		bgt.s	loc_1A38A
0001B300 5228 001A                  		addq.b	#1,obFrame(a0)
0001B304 0C28 0002 001A             		cmpi.b	#2,obFrame(a0)
0001B30A 6E00 F9CA                  		bgt.w	Obj85_Delete
0001B30E                            
0001B30E                            loc_1A38A:
0001B30E 6000 FF0A                  		bra.w	loc_1A296
0001B312                            ; ===========================================================================
0001B312                            
0001B312                            loc_1A38E:	; Routine $A
0001B312 117C 000B 001A             		move.b	#$B,obFrame(a0)
0001B318 3038 D008                  		move.w	(v_player+obX).w,d0
0001B31C 9068 0008                  		sub.w	obX(a0),d0
0001B320 6500                       		bcs.s	loc_1A3A6
0001B322 4A28 0001                  		tst.b	obRender(a0)
0001B326 6A00 F9AE                  		bpl.w	Obj85_Delete
0001B32A                            
0001B32A                            loc_1A3A6:
0001B32A 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001B330                            ; ===========================================================================
0001B330                            
0001B330                            loc_1A3AC:	; Routine $C
0001B330 117C 0000 001A             		move.b	#0,obFrame(a0)
0001B336 08E8 0000 0022             		bset	#0,obStatus(a0)
0001B33C 2268 0034                  		movea.l	$34(a0),a1
0001B340 0C29 000C 0034             		cmpi.b	#$C,$34(a1)
0001B346 6600                       		bne.s	loc_1A3D0
0001B348 0CA9 0001 8C90 0004        		cmpi.l	#Map_Eggman,obMap(a1)
0001B350 6700 F984                  		beq.w	Obj85_Delete
0001B354                            
0001B354                            loc_1A3D0:
0001B354 6000 FED4                  		bra.w	loc_1A2A6
0001B354 6000 FED4                  		bra.w	loc_1A2A6
0001B358                            		include	"_anim\FZ Eggman in Ship.asm"
0001B358                            ; ---------------------------------------------------------------------------
0001B358                            ; Animation script - Eggman (FZ)
0001B358                            ; ---------------------------------------------------------------------------
0001B358 0000                       Ani_FZEgg:	dc.w byte_1A3D6-Ani_FZEgg
0001B35A 0300 01FF                  byte_1A3D6:	dc.b 3,	0, 1, afEnd
0001B35E                            		even
0001B35E                            		even
0001B35E                            Map_FZDamaged:	include	"_maps\FZ Damaged Eggmobile.asm"
0001B35E                            ; ---------------------------------------------------------------------------
0001B35E                            ; Sprite mappings - Eggman in broken eggmobile (FZ)
0001B35E                            ; ---------------------------------------------------------------------------
0001B35E                            Map_FZDamaged_internal:
0001B35E 0000                       		dc.w @damage1-Map_FZDamaged_internal
0001B360 0000                       		dc.w @damage2-Map_FZDamaged_internal
0001B362 06                         @damage1:	dc.b 6
0001B363 E408 0020 F4               		dc.b $E4, 8, 0,	$20, $F4
0001B368 EC0D 0023 E4               		dc.b $EC, $D, 0, $23, $E4
0001B36D EC09 002B 04               		dc.b $EC, 9, 0,	$2B, 4
0001B372 FC05 203A E4               		dc.b $FC, 5, $20, $3A, $E4
0001B377 FC0E 203E 04               		dc.b $FC, $E, $20, $3E,	4
0001B37C 1404 204A 04               		dc.b $14, 4, $20, $4A, 4
0001B381 06                         @damage2:	dc.b 6
0001B382 E40A 0031 F4               		dc.b $E4, $A, 0, $31, $F4
0001B387 EC05 0023 E4               		dc.b $EC, 5, 0,	$23, $E4
0001B38C EC09 002B 04               		dc.b $EC, 9, 0,	$2B, 4
0001B391 FC05 203A E4               		dc.b $FC, 5, $20, $3A, $E4
0001B396 FC0E 203E 04               		dc.b $FC, $E, $20, $3E,	4
0001B39B 1404 204A 04               		dc.b $14, 4, $20, $4A, 4
0001B3A0                            		even
0001B3A0                            		even
0001B3A0                            Map_FZLegs:	include	"_maps\FZ Eggmobile Legs.asm"
0001B3A0                            ; ---------------------------------------------------------------------------
0001B3A0                            ; Sprite mappings - legs on Eggman's escape ship (FZ)
0001B3A0                            ; ---------------------------------------------------------------------------
0001B3A0                            Map_FZLegs_internal:
0001B3A0 0000                       		dc.w @extended-Map_FZLegs_internal
0001B3A2 0000                       		dc.w @halfway-Map_FZLegs_internal
0001B3A4 0000                       		dc.w @retracted-Map_FZLegs_internal
0001B3A6 02                         @extended:	dc.b 2
0001B3A7 140E 2800 F4               		dc.b $14, $E, $28, 0, $F4
0001B3AC 2400 280C EC               		dc.b $24, 0, $28, $C, $EC
0001B3B1 03                         @halfway:	dc.b 3
0001B3B2 0C05 280D 0C               		dc.b $C, 5, $28, $D, $C
0001B3B7 1C00 2811 0C               		dc.b $1C, 0, $28, $11, $C
0001B3BC 140D 2812 EC               		dc.b $14, $D, $28, $12,	$EC
0001B3C1 02                         @retracted:	dc.b 2
0001B3C2 0C01 281A 0C               		dc.b $C, 1, $28, $1A, $C
0001B3C7 140C 281C EC               		dc.b $14, $C, $28, $1C,	$EC
0001B3CC                            		even
0001B3CC                            		even
0001B3CC                            		include	"_incObj\84 FZ Eggman's Cylinders.asm"
0001B3CC                            ; ---------------------------------------------------------------------------
0001B3CC                            ; Object 84 - cylinder Eggman hides in (FZ)
0001B3CC                            ; ---------------------------------------------------------------------------
0001B3CC                            
0001B3CC                            Obj84_Delete:
0001B3CC 4EF9 0000 E464             		jmp	(DeleteObject).l
0001B3D2                            ; ===========================================================================
0001B3D2                            
0001B3D2                            EggmanCylinder:
0001B3D2 7000                       		moveq	#0,d0
0001B3D4 1028 0024                  		move.b	obRoutine(a0),d0
0001B3D8 303B 0000                  		move.w	Obj84_Index(pc,d0.w),d0
0001B3DC 4EFB 0000                  		jmp	Obj84_Index(pc,d0.w)
0001B3E0                            ; ===========================================================================
0001B3E0 0000                       Obj84_Index:	dc.w Obj84_Main-Obj84_Index
0001B3E2 0000                       		dc.w loc_1A4CE-Obj84_Index
0001B3E4 0000                       		dc.w loc_1A57E-Obj84_Index
0001B3E6                            
0001B3E6 24D0 0620                  Obj84_PosData:	dc.w $24D0, $620
0001B3EA 2550 0620                  		dc.w $2550, $620
0001B3EE 2490 04C0                  		dc.w $2490, $4C0
0001B3F2 2510 04C0                  		dc.w $2510, $4C0
0001B3F6                            ; ===========================================================================
0001B3F6                            
0001B3F6                            Obj84_Main:	; Routine
0001B3F6 43FA FFEE                  		lea	Obj84_PosData(pc),a1
0001B3FA 7000                       		moveq	#0,d0
0001B3FC 1028 0028                  		move.b	obSubtype(a0),d0
0001B400 D040                       		add.w	d0,d0
0001B402 D2C0                       		adda.w	d0,a1
0001B404 117C 0004 0001             		move.b	#4,obRender(a0)
0001B40A 08E8 0007 0001             		bset	#7,obRender(a0)
0001B410 08E8 0004 0001             		bset	#4,obRender(a0)
0001B416 317C 0300 0002             		move.w	#$300,obGfx(a0)
0001B41C 217C 0000 0000 0004        		move.l	#Map_EggCyl,obMap(a0)
0001B424 3159 0008                  		move.w	(a1)+,obX(a0)
0001B428 3151 000C                  		move.w	(a1),obY(a0)
0001B42C 3159 0038                  		move.w	(a1)+,$38(a0)
0001B430 117C 0020 0016             		move.b	#$20,obHeight(a0)
0001B436 117C 0060 0017             		move.b	#$60,obWidth(a0)
0001B43C 117C 0020 0019             		move.b	#$20,obActWid(a0)
0001B442 117C 0060 0016             		move.b	#$60,obHeight(a0)
0001B448 117C 0003 0018             		move.b	#3,obPriority(a0)
0001B44E 5428 0024                  		addq.b	#2,obRoutine(a0)
0001B452                            
0001B452                            loc_1A4CE:	; Routine 2
0001B452 0C28 0002 0028             		cmpi.b	#2,obSubtype(a0)
0001B458 6F00                       		ble.s	loc_1A4DC
0001B45A 08E8 0001 0001             		bset	#1,obRender(a0)
0001B460                            
0001B460                            loc_1A4DC:
0001B460 42A8 003C                  		clr.l	$3C(a0)
0001B464 4A28 0029                  		tst.b	$29(a0)
0001B468 6700                       		beq.s	loc_1A4EA
0001B46A 5428 0024                  		addq.b	#2,obRoutine(a0)
0001B46E                            
0001B46E                            loc_1A4EA:
0001B46E 2028 003C                  		move.l	$3C(a0),d0
0001B472 2228 0038                  		move.l	$38(a0),d1
0001B476 D280                       		add.l	d0,d1
0001B478 4841                       		swap	d1
0001B47A 3141 000C                  		move.w	d1,obY(a0)
0001B47E 0C28 0004 0024             		cmpi.b	#4,obRoutine(a0)
0001B484 6600                       		bne.s	loc_1A524
0001B486 4A68 0030                  		tst.w	$30(a0)
0001B48A 6A00                       		bpl.s	loc_1A524
0001B48C 70F6                       		moveq	#-$A,d0
0001B48E 0C28 0002 0028             		cmpi.b	#2,obSubtype(a0)
0001B494 6F00                       		ble.s	loc_1A514
0001B496 700E                       		moveq	#$E,d0
0001B498                            
0001B498                            loc_1A514:
0001B498 D240                       		add.w	d0,d1
0001B49A 2268 0034                  		movea.l	$34(a0),a1
0001B49E 3341 000C                  		move.w	d1,obY(a1)
0001B4A2 3368 0008 0008             		move.w	obX(a0),obX(a1)
0001B4A8                            
0001B4A8                            loc_1A524:
0001B4A8 323C 002B                  		move.w	#$2B,d1
0001B4AC 343C 0060                  		move.w	#$60,d2
0001B4B0 363C 0061                  		move.w	#$61,d3
0001B4B4 3828 0008                  		move.w	obX(a0),d4
0001B4B8 4EB9 0001 0798             		jsr	(SolidObject).l
0001B4BE 7000                       		moveq	#0,d0
0001B4C0 3228 003C                  		move.w	$3C(a0),d1
0001B4C4 6A00                       		bpl.s	loc_1A550
0001B4C6 4441                       		neg.w	d1
0001B4C8 5141                       		subq.w	#8,d1
0001B4CA 6500                       		bcs.s	loc_1A55C
0001B4CC 5200                       		addq.b	#1,d0
0001B4CE E841                       		asr.w	#4,d1
0001B4D0 D041                       		add.w	d1,d0
0001B4D2 6000                       		bra.s	loc_1A55C
0001B4D4                            ; ===========================================================================
0001B4D4                            
0001B4D4                            loc_1A550:
0001B4D4 0441 0027                  		subi.w	#$27,d1
0001B4D8 6500                       		bcs.s	loc_1A55C
0001B4DA 5200                       		addq.b	#1,d0
0001B4DC E841                       		asr.w	#4,d1
0001B4DE D041                       		add.w	d1,d0
0001B4E0                            
0001B4E0                            loc_1A55C:
0001B4E0 1140 001A                  		move.b	d0,obFrame(a0)
0001B4E4 3038 D008                  		move.w	(v_player+obX).w,d0
0001B4E8 9068 0008                  		sub.w	obX(a0),d0
0001B4EC 6B00                       		bmi.s	loc_1A578
0001B4EE 0440 0140                  		subi.w	#$140,d0
0001B4F2 6B00                       		bmi.s	loc_1A578
0001B4F4 4A28 0001                  		tst.b	obRender(a0)
0001B4F8 6A00 FED2                  		bpl.w	Obj84_Delete
0001B4FC                            
0001B4FC                            loc_1A578:
0001B4FC 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001B502                            ; ===========================================================================
0001B502                            
0001B502                            loc_1A57E:	; Routine 4
0001B502 7000                       		moveq	#0,d0
0001B504 1028 0028                  		move.b	obSubtype(a0),d0
0001B508 303B 0000                  		move.w	off_1A590(pc,d0.w),d0
0001B50C 4EBB 0000                  		jsr	off_1A590(pc,d0.w)
0001B510 6000 FF5C                  		bra.w	loc_1A4EA
0001B514                            ; ===========================================================================
0001B514 0000                       off_1A590:	dc.w loc_1A598-off_1A590
0001B516 0000                       		dc.w loc_1A598-off_1A590
0001B518 0000                       		dc.w loc_1A604-off_1A590
0001B51A 0000                       		dc.w loc_1A604-off_1A590
0001B51C                            ; ===========================================================================
0001B51C                            
0001B51C                            loc_1A598:
0001B51C 4A28 0029                  		tst.b	$29(a0)
0001B520 6600                       		bne.s	loc_1A5D4
0001B522 2268 0034                  		movea.l	$34(a0),a1
0001B526 4A29 0021                  		tst.b	obColProp(a1)
0001B52A 6600                       		bne.s	loc_1A5B4
0001B52C 6100 D2BC                  		bsr.w	BossDefeated
0001B530 04A8 0001 0000 003C        		subi.l	#$10000,$3C(a0)
0001B538                            
0001B538                            loc_1A5B4:
0001B538 06A8 0002 0000 003C        		addi.l	#$20000,$3C(a0)
0001B540 6400                       		bcc.s	locret_1A602
0001B542 42A8 003C                  		clr.l	$3C(a0)
0001B546 2268 0034                  		movea.l	$34(a0),a1
0001B54A 5369 0032                  		subq.w	#1,$32(a1)
0001B54E 4269 0030                  		clr.w	$30(a1)
0001B552 5528 0024                  		subq.b	#2,obRoutine(a0)
0001B556 4E75                       		rts	
0001B558                            ; ===========================================================================
0001B558                            
0001B558                            loc_1A5D4:
0001B558 0C68 FFF0 003C             		cmpi.w	#-$10,$3C(a0)
0001B55E 6C00                       		bge.s	loc_1A5E4
0001B560 04A8 0002 8000 003C        		subi.l	#$28000,$3C(a0)
0001B568                            
0001B568                            loc_1A5E4:
0001B568 04A8 0000 8000 003C        		subi.l	#$8000,$3C(a0)
0001B570 0C68 FF60 003C             		cmpi.w	#-$A0,$3C(a0)
0001B576 6E00                       		bgt.s	locret_1A602
0001B578 4268 003E                  		clr.w	$3E(a0)
0001B57C 317C FF60 003C             		move.w	#-$A0,$3C(a0)
0001B582 4228 0029                  		clr.b	$29(a0)
0001B586                            
0001B586                            locret_1A602:
0001B586 4E75                       		rts	
0001B588                            ; ===========================================================================
0001B588                            
0001B588                            loc_1A604:
0001B588 08E8 0001 0001             		bset	#1,obRender(a0)
0001B58E 4A28 0029                  		tst.b	$29(a0)
0001B592 6600                       		bne.s	loc_1A646
0001B594 2268 0034                  		movea.l	$34(a0),a1
0001B598 4A29 0021                  		tst.b	obColProp(a1)
0001B59C 6600                       		bne.s	loc_1A626
0001B59E 6100 D24A                  		bsr.w	BossDefeated
0001B5A2 06A8 0001 0000 003C        		addi.l	#$10000,$3C(a0)
0001B5AA                            
0001B5AA                            loc_1A626:
0001B5AA 04A8 0002 0000 003C        		subi.l	#$20000,$3C(a0)
0001B5B2 6400                       		bcc.s	locret_1A674
0001B5B4 42A8 003C                  		clr.l	$3C(a0)
0001B5B8 2268 0034                  		movea.l	$34(a0),a1
0001B5BC 5369 0032                  		subq.w	#1,$32(a1)
0001B5C0 4269 0030                  		clr.w	$30(a1)
0001B5C4 5528 0024                  		subq.b	#2,obRoutine(a0)
0001B5C8 4E75                       		rts	
0001B5CA                            ; ===========================================================================
0001B5CA                            
0001B5CA                            loc_1A646:
0001B5CA 0C68 0010 003C             		cmpi.w	#$10,$3C(a0)
0001B5D0 6D00                       		blt.s	loc_1A656
0001B5D2 06A8 0002 8000 003C        		addi.l	#$28000,$3C(a0)
0001B5DA                            
0001B5DA                            loc_1A656:
0001B5DA 06A8 0000 8000 003C        		addi.l	#$8000,$3C(a0)
0001B5E2 0C68 00A0 003C             		cmpi.w	#$A0,$3C(a0)
0001B5E8 6D00                       		blt.s	locret_1A674
0001B5EA 4268 003E                  		clr.w	$3E(a0)
0001B5EE 317C 00A0 003C             		move.w	#$A0,$3C(a0)
0001B5F4 4228 0029                  		clr.b	$29(a0)
0001B5F8                            
0001B5F8                            locret_1A674:
0001B5F8 4E75                       		rts	
0001B5F8 4E75                       		rts	
0001B5FA                            Map_EggCyl:	include	"_maps\FZ Eggman's Cylinders.asm"
0001B5FA                            ; ---------------------------------------------------------------------------
0001B5FA                            ; Sprite mappings - cylinders Eggman hides in (FZ)
0001B5FA                            ; ---------------------------------------------------------------------------
0001B5FA                            Map_EggCyl_internal:
0001B5FA 0000                       		dc.w @flat-Map_EggCyl_internal
0001B5FC 0000                       		dc.w @extending1-Map_EggCyl_internal
0001B5FE 0000                       		dc.w @extending2-Map_EggCyl_internal
0001B600 0000                       		dc.w @extending3-Map_EggCyl_internal
0001B602 0000                       		dc.w @extending4-Map_EggCyl_internal
0001B604 0000                       		dc.w @extendedfully-Map_EggCyl_internal
0001B606 0000                       		dc.w @extendedfully-Map_EggCyl_internal
0001B608 0000                       		dc.w @extendedfully-Map_EggCyl_internal
0001B60A 0000                       		dc.w @extendedfully-Map_EggCyl_internal
0001B60C 0000                       		dc.w @extendedfully-Map_EggCyl_internal
0001B60E 0000                       		dc.w @extendedfully-Map_EggCyl_internal
0001B610 0000                       		dc.w @controlpanel-Map_EggCyl_internal
0001B612 06                         @flat:		dc.b 6
0001B613 A00D 4000 E0               		dc.b $A0, $D, $40, 0, $E0
0001B618 A00D 4800 00               		dc.b $A0, $D, $48, 0, 0
0001B61D B00C 2008 E0               		dc.b $B0, $C, $20, 8, $E0
0001B622 B00C 200C 00               		dc.b $B0, $C, $20, $C, 0
0001B627 B80F 4010 E0               		dc.b $B8, $F, $40, $10,	$E0
0001B62C B80F 4810 00               		dc.b $B8, $F, $48, $10,	0
0001B631 08                         @extending1:	dc.b 8
0001B632 A00D 4000 E0               		dc.b $A0, $D, $40, 0, $E0
0001B637 A00D 4800 00               		dc.b $A0, $D, $48, 0, 0
0001B63C B00C 2008 E0               		dc.b $B0, $C, $20, 8, $E0
0001B641 B00C 200C 00               		dc.b $B0, $C, $20, $C, 0
0001B646 B80F 4010 E0               		dc.b $B8, $F, $40, $10,	$E0
0001B64B B80F 4810 00               		dc.b $B8, $F, $48, $10,	0
0001B650 D80F 4020 E0               		dc.b $D8, $F, $40, $20,	$E0
0001B655 D80F 4820 00               		dc.b $D8, $F, $48, $20,	0
0001B65A 0A                         @extending2:	dc.b $A
0001B65B A00D 4000 E0               		dc.b $A0, $D, $40, 0, $E0
0001B660 A00D 4800 00               		dc.b $A0, $D, $48, 0, 0
0001B665 B00C 2008 E0               		dc.b $B0, $C, $20, 8, $E0
0001B66A B00C 200C 00               		dc.b $B0, $C, $20, $C, 0
0001B66F B80F 4010 E0               		dc.b $B8, $F, $40, $10,	$E0
0001B674 B80F 4810 00               		dc.b $B8, $F, $48, $10,	0
0001B679 D80F 4020 E0               		dc.b $D8, $F, $40, $20,	$E0
0001B67E D80F 4820 00               		dc.b $D8, $F, $48, $20,	0
0001B683 F80F 4030 E0               		dc.b $F8, $F, $40, $30,	$E0
0001B688 F80F 4830 00               		dc.b $F8, $F, $48, $30,	0
0001B68D 0C                         @extending3:	dc.b $C
0001B68E A00D 4000 E0               		dc.b $A0, $D, $40, 0, $E0
0001B693 A00D 4800 00               		dc.b $A0, $D, $48, 0, 0
0001B698 B00C 2008 E0               		dc.b $B0, $C, $20, 8, $E0
0001B69D B00C 200C 00               		dc.b $B0, $C, $20, $C, 0
0001B6A2 B80F 4010 E0               		dc.b $B8, $F, $40, $10,	$E0
0001B6A7 B80F 4810 00               		dc.b $B8, $F, $48, $10,	0
0001B6AC D80F 4020 E0               		dc.b $D8, $F, $40, $20,	$E0
0001B6B1 D80F 4820 00               		dc.b $D8, $F, $48, $20,	0
0001B6B6 F80F 4030 E0               		dc.b $F8, $F, $40, $30,	$E0
0001B6BB F80F 4830 00               		dc.b $F8, $F, $48, $30,	0
0001B6C0 180F 4040 E0               		dc.b $18, $F, $40, $40,	$E0
0001B6C5 180F 4840 00               		dc.b $18, $F, $48, $40,	0
0001B6CA 0D                         @extending4:	dc.b $D
0001B6CB A00D 4000 E0               		dc.b $A0, $D, $40, 0, $E0
0001B6D0 A00D 4800 00               		dc.b $A0, $D, $48, 0, 0
0001B6D5 B00C 2008 E0               		dc.b $B0, $C, $20, 8, $E0
0001B6DA B00C 200C 00               		dc.b $B0, $C, $20, $C, 0
0001B6DF B80F 4010 E0               		dc.b $B8, $F, $40, $10,	$E0
0001B6E4 B80F 4810 00               		dc.b $B8, $F, $48, $10,	0
0001B6E9 D80F 4020 E0               		dc.b $D8, $F, $40, $20,	$E0
0001B6EE D80F 4820 00               		dc.b $D8, $F, $48, $20,	0
0001B6F3 F80F 4030 E0               		dc.b $F8, $F, $40, $30,	$E0
0001B6F8 F80F 4830 00               		dc.b $F8, $F, $48, $30,	0
0001B6FD 180F 4040 E0               		dc.b $18, $F, $40, $40,	$E0
0001B702 180F 4840 00               		dc.b $18, $F, $48, $40,	0
0001B707 380F 4050 F0               		dc.b $38, $F, $40, $50,	$F0
0001B70C 0E                         @extendedfully:	dc.b $E
0001B70D A00D 4000 E0               		dc.b $A0, $D, $40, 0, $E0
0001B712 A00D 4800 00               		dc.b $A0, $D, $48, 0, 0
0001B717 B00C 2008 E0               		dc.b $B0, $C, $20, 8, $E0
0001B71C B00C 200C 00               		dc.b $B0, $C, $20, $C, 0
0001B721 B80F 4010 E0               		dc.b $B8, $F, $40, $10,	$E0
0001B726 B80F 4810 00               		dc.b $B8, $F, $48, $10,	0
0001B72B D80F 4020 E0               		dc.b $D8, $F, $40, $20,	$E0
0001B730 D80F 4820 00               		dc.b $D8, $F, $48, $20,	0
0001B735 F80F 4030 E0               		dc.b $F8, $F, $40, $30,	$E0
0001B73A F80F 4830 00               		dc.b $F8, $F, $48, $30,	0
0001B73F 180F 4040 E0               		dc.b $18, $F, $40, $40,	$E0
0001B744 180F 4840 00               		dc.b $18, $F, $48, $40,	0
0001B749 380F 4050 F0               		dc.b $38, $F, $40, $50,	$F0
0001B74E 580F 4050 F0               		dc.b $58, $F, $40, $50,	$F0
0001B753 02                         @controlpanel:	dc.b 2
0001B754 F804 0068 F0               		dc.b $F8, 4, 0,	$68, $F0
0001B759 000C 006A F0               		dc.b 0,	$C, 0, $6A, $F0
0001B75E                            		even
0001B75E                            		even
0001B75E                            		include	"_incObj\86 FZ Plasma Ball Launcher.asm"
0001B75E                            ; ---------------------------------------------------------------------------
0001B75E                            ; Object 86 - energy balls (FZ)
0001B75E                            ; ---------------------------------------------------------------------------
0001B75E                            
0001B75E                            BossPlasma:
0001B75E 7000                       		moveq	#0,d0
0001B760 1028 0024                  		move.b	obRoutine(a0),d0
0001B764 303B 0000                  		move.w	Obj86_Index(pc,d0.w),d0
0001B768 4EFB 0000                  		jmp	Obj86_Index(pc,d0.w)
0001B76C                            ; ===========================================================================
0001B76C 0000                       Obj86_Index:	dc.w Obj86_Main-Obj86_Index
0001B76E 0000                       		dc.w Obj86_Generator-Obj86_Index
0001B770 0000                       		dc.w Obj86_MakeBalls-Obj86_Index
0001B772 0000                       		dc.w loc_1A962-Obj86_Index
0001B774 0000                       		dc.w loc_1A982-Obj86_Index
0001B776                            ; ===========================================================================
0001B776                            
0001B776                            Obj86_Main:	; Routine 0
0001B776 317C 2588 0008             		move.w	#$2588,obX(a0)
0001B77C 317C 053C 000C             		move.w	#$53C,obY(a0)
0001B782 317C 0300 0002             		move.w	#$300,obGfx(a0)
0001B788 217C 0000 0000 0004        		move.l	#Map_PLaunch,obMap(a0)
0001B790 117C 0000 001C             		move.b	#0,obAnim(a0)
0001B796 117C 0003 0018             		move.b	#3,obPriority(a0)
0001B79C 117C 0008 0017             		move.b	#8,obWidth(a0)
0001B7A2 117C 0008 0016             		move.b	#8,obHeight(a0)
0001B7A8 117C 0004 0001             		move.b	#4,obRender(a0)
0001B7AE 08E8 0007 0001             		bset	#7,obRender(a0)
0001B7B4 5428 0024                  		addq.b	#2,obRoutine(a0)
0001B7B8                            
0001B7B8                            Obj86_Generator:; Routine 2
0001B7B8 2268 0034                  		movea.l	$34(a0),a1
0001B7BC 0C29 0006 0034             		cmpi.b	#6,$34(a1)
0001B7C2 6600                       		bne.s	loc_1A850
0001B7C4 10BC 003F                  		move.b	#id_ExplosionBomb,(a0)
0001B7C8 117C 0000 0024             		move.b	#0,obRoutine(a0)
0001B7CE 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001B7D4                            ; ===========================================================================
0001B7D4                            
0001B7D4                            loc_1A850:
0001B7D4 117C 0000 001C             		move.b	#0,obAnim(a0)
0001B7DA 4A28 0029                  		tst.b	$29(a0)
0001B7DE 6700                       		beq.s	loc_1A86C
0001B7E0 5428 0024                  		addq.b	#2,obRoutine(a0)
0001B7E4 117C 0001 001C             		move.b	#1,obAnim(a0)
0001B7EA 117C 003E 0028             		move.b	#$3E,obSubtype(a0)
0001B7F0                            
0001B7F0                            loc_1A86C:
0001B7F0 323C 0013                  		move.w	#$13,d1
0001B7F4 343C 0008                  		move.w	#8,d2
0001B7F8 363C 0011                  		move.w	#$11,d3
0001B7FC 3828 0008                  		move.w	obX(a0),d4
0001B800 4EB9 0001 0798             		jsr	(SolidObject).l
0001B806 3038 D008                  		move.w	(v_player+obX).w,d0
0001B80A 9068 0008                  		sub.w	obX(a0),d0
0001B80E 6B00                       		bmi.s	loc_1A89A
0001B810 0440 0140                  		subi.w	#$140,d0
0001B814 6B00                       		bmi.s	loc_1A89A
0001B816 4A28 0001                  		tst.b	obRender(a0)
0001B81A 6A00 FBB0                  		bpl.w	Obj84_Delete
0001B81E                            
0001B81E                            loc_1A89A:
0001B81E 43FA 0000                  		lea	Ani_PLaunch(pc),a1
0001B822 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
0001B828 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001B82E                            ; ===========================================================================
0001B82E                            
0001B82E                            Obj86_MakeBalls:; Routine 4
0001B82E 4A28 0029                  		tst.b	$29(a0)
0001B832 6700 0000                  		beq.w	loc_1A954
0001B836 4228 0029                  		clr.b	$29(a0)
0001B83A D068 0030                  		add.w	$30(a0),d0
0001B83E 0240 001E                  		andi.w	#$1E,d0
0001B842 D4C0                       		adda.w	d0,a2
0001B844 5868 0030                  		addq.w	#4,$30(a0)
0001B848 4268 0032                  		clr.w	$32(a0)
0001B84C 7403                       		moveq	#3,d2
0001B84E                            
0001B84E                            Obj86_Loop:
0001B84E 4EB9 0000 E8C6             		jsr	(FindNextFreeObj).l
0001B854 6600 0000                  		bne.w	loc_1A954
0001B858 12BC 0086                  		move.b	#id_BossPlasma,(a1)
0001B85C 3368 0008 0008             		move.w	obX(a0),obX(a1)
0001B862 337C 053C 000C             		move.w	#$53C,obY(a1)
0001B868 137C 0008 0024             		move.b	#8,obRoutine(a1)
0001B86E 337C 2300 0002             		move.w	#$2300,obGfx(a1)
0001B874 237C 0000 0000 0004        		move.l	#Map_Plasma,obMap(a1)
0001B87C 137C 000C 0016             		move.b	#$C,obHeight(a1)
0001B882 137C 000C 0017             		move.b	#$C,obWidth(a1)
0001B888 137C 0000 0020             		move.b	#0,obColType(a1)
0001B88E 137C 0003 0018             		move.b	#3,obPriority(a1)
0001B894 337C 003E 0028             		move.w	#$3E,obSubtype(a1)
0001B89A 137C 0004 0001             		move.b	#4,obRender(a1)
0001B8A0 08E9 0007 0001             		bset	#7,obRender(a1)
0001B8A6 2348 0034                  		move.l	a0,$34(a1)
0001B8AA 4EB9 0000 27C6             		jsr	(RandomNumber).l
0001B8B0 3228 0032                  		move.w	$32(a0),d1
0001B8B4 C3FC FFB1                  		muls.w	#-$4F,d1
0001B8B8 0641 2578                  		addi.w	#$2578,d1
0001B8BC 0240 001F                  		andi.w	#$1F,d0
0001B8C0 0440 0010                  		subi.w	#$10,d0
0001B8C4 D041                       		add.w	d1,d0
0001B8C6 3340 0030                  		move.w	d0,$30(a1)
0001B8CA 5268 0032                  		addq.w	#1,$32(a0)
0001B8CE 3168 0032 0038             		move.w	$32(a0),$38(a0)
0001B8D4 51CA FF78                  		dbf	d2,Obj86_Loop	; repeat sequence 3 more times
0001B8D8                            
0001B8D8                            loc_1A954:
0001B8D8 4A68 0032                  		tst.w	$32(a0)
0001B8DC 6600                       		bne.s	loc_1A95E
0001B8DE 5428 0024                  		addq.b	#2,obRoutine(a0)
0001B8E2                            
0001B8E2                            loc_1A95E:
0001B8E2 6000 FF0C                  		bra.w	loc_1A86C
0001B8E6                            ; ===========================================================================
0001B8E6                            
0001B8E6                            loc_1A962:	; Routine 6
0001B8E6 117C 0002 001C             		move.b	#2,obAnim(a0)
0001B8EC 4A68 0038                  		tst.w	$38(a0)
0001B8F0 6600                       		bne.s	loc_1A97E
0001B8F2 117C 0002 0024             		move.b	#2,obRoutine(a0)
0001B8F8 2268 0034                  		movea.l	$34(a0),a1
0001B8FC 337C FFFF 0032             		move.w	#-1,$32(a1)
0001B902                            
0001B902                            loc_1A97E:
0001B902 6000 FEEC                  		bra.w	loc_1A86C
0001B906                            ; ===========================================================================
0001B906                            
0001B906                            loc_1A982:	; Routine 8
0001B906 7000                       		moveq	#0,d0
0001B908 1028 0025                  		move.b	ob2ndRout(a0),d0
0001B90C 303B 0000                  		move.w	Obj86_Index2(pc,d0.w),d0
0001B910 4EBB 0000                  		jsr	Obj86_Index2(pc,d0.w)
0001B914 43FA 0000                  		lea	Ani_Plasma(pc),a1
0001B918 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
0001B91E 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001B924                            ; ===========================================================================
0001B924 0000                       Obj86_Index2:	dc.w loc_1A9A6-Obj86_Index2
0001B926 0000                       		dc.w loc_1A9C0-Obj86_Index2
0001B928 0000                       		dc.w loc_1AA1E-Obj86_Index2
0001B92A                            ; ===========================================================================
0001B92A                            
0001B92A                            loc_1A9A6:
0001B92A 3028 0030                  		move.w	$30(a0),d0
0001B92E 9068 0008                  		sub.w	obX(a0),d0
0001B932 E940                       		asl.w	#4,d0
0001B934 3140 0010                  		move.w	d0,obVelX(a0)
0001B938 317C 00B4 0028             		move.w	#$B4,obSubtype(a0)
0001B93E 5428 0025                  		addq.b	#2,ob2ndRout(a0)
0001B942 4E75                       		rts	
0001B944                            ; ===========================================================================
0001B944                            
0001B944                            loc_1A9C0:
0001B944 4A68 0010                  		tst.w	obVelX(a0)
0001B948 6700                       		beq.s	loc_1A9E6
0001B94A 4EB9 0000 E402             		jsr	(SpeedToPos).l
0001B950 3028 0008                  		move.w	obX(a0),d0
0001B954 9068 0030                  		sub.w	$30(a0),d0
0001B958 6400                       		bcc.s	loc_1A9E6
0001B95A 4268 0010                  		clr.w	obVelX(a0)
0001B95E D168 0008                  		add.w	d0,obX(a0)
0001B962 2268 0034                  		movea.l	$34(a0),a1
0001B966 5369 0032                  		subq.w	#1,$32(a1)
0001B96A                            
0001B96A                            loc_1A9E6:
0001B96A 117C 0000 001C             		move.b	#0,obAnim(a0)
0001B970 5368 0028                  		subq.w	#1,obSubtype(a0)
0001B974 6600                       		bne.s	locret_1AA1C
0001B976 5428 0025                  		addq.b	#2,ob2ndRout(a0)
0001B97A 117C 0001 001C             		move.b	#1,obAnim(a0)
0001B980 117C 009A 0020             		move.b	#$9A,obColType(a0)
0001B986 317C 00B4 0028             		move.w	#$B4,obSubtype(a0)
0001B98C 7000                       		moveq	#0,d0
0001B98E 3038 D008                  		move.w	(v_player+obX).w,d0
0001B992 9068 0008                  		sub.w	obX(a0),d0
0001B996 3140 0010                  		move.w	d0,obVelX(a0)
0001B99A 317C 0140 0012             		move.w	#$140,obVelY(a0)
0001B9A0                            
0001B9A0                            locret_1AA1C:
0001B9A0 4E75                       		rts	
0001B9A2                            ; ===========================================================================
0001B9A2                            
0001B9A2                            loc_1AA1E:
0001B9A2 4EB9 0000 E402             		jsr	(SpeedToPos).l
0001B9A8 0C68 05E0 000C             		cmpi.w	#$5E0,obY(a0)
0001B9AE 6400                       		bcc.s	loc_1AA34
0001B9B0 5368 0028                  		subq.w	#1,obSubtype(a0)
0001B9B4 6700                       		beq.s	loc_1AA34
0001B9B6 4E75                       		rts	
0001B9B8                            ; ===========================================================================
0001B9B8                            
0001B9B8                            loc_1AA34:
0001B9B8 2268 0034                  		movea.l	$34(a0),a1
0001B9BC 5369 0038                  		subq.w	#1,$38(a1)
0001B9C0 6000 FA0A                  		bra.w	Obj84_Delete
0001B9C0 6000 FA0A                  		bra.w	Obj84_Delete
0001B9C4                            		include	"_anim\Plasma Ball Launcher.asm"
0001B9C4                            ; ---------------------------------------------------------------------------
0001B9C4                            ; Animation script - energy ball launcher (FZ)
0001B9C4                            ; ---------------------------------------------------------------------------
0001B9C4 0000                       Ani_PLaunch:	dc.w @red-Ani_PLaunch
0001B9C6 0000                       		dc.w @redsparking-Ani_PLaunch
0001B9C8 0000                       		dc.w @whitesparking-Ani_PLaunch
0001B9CA 7E00 FF                    @red:		dc.b $7E, 0, afEnd
0001B9CE 00                         		even
0001B9CE 0100 0200 03FF             @redsparking:	dc.b 1,	0, 2, 0, 3, afEnd
0001B9D4                            		even
0001B9D4 0101 0201 03FF             @whitesparking:	dc.b 1,	1, 2, 1, 3, afEnd
0001B9DA                            		even
0001B9DA                            		even
0001B9DA                            Map_PLaunch:	include	"_maps\Plasma Ball Launcher.asm"
0001B9DA                            ; ---------------------------------------------------------------------------
0001B9DA                            ; Sprite mappings - energy ball	launcher (FZ)
0001B9DA                            ; ---------------------------------------------------------------------------
0001B9DA                            Map_PLaunch_internal:
0001B9DA 0000                       		dc.w @red-Map_PLaunch_internal
0001B9DC 0000                       		dc.w @white-Map_PLaunch_internal
0001B9DE 0000                       		dc.w @sparking1-Map_PLaunch_internal
0001B9E0 0000                       		dc.w @sparking2-Map_PLaunch_internal
0001B9E2 01                         @red:		dc.b 1
0001B9E3 F805 006E F8               		dc.b $F8, 5, 0,	$6E, $F8
0001B9E8 01                         @white:		dc.b 1
0001B9E9 F805 0076 F8               		dc.b $F8, 5, 0,	$76, $F8
0001B9EE 01                         @sparking1:	dc.b 1
0001B9EF F805 0072 F8               		dc.b $F8, 5, 0,	$72, $F8
0001B9F4 01                         @sparking2:	dc.b 1
0001B9F5 F805 1072 F8               		dc.b $F8, 5, $10, $72, $F8
0001B9FA                            		even
0001B9FA                            		even
0001B9FA                            		include	"_anim\Plasma Balls.asm"
0001B9FA                            ; ---------------------------------------------------------------------------
0001B9FA                            ; Animation script - energy balls (FZ)
0001B9FA                            ; ---------------------------------------------------------------------------
0001B9FA 0000                       Ani_Plasma:	dc.w @full-Ani_Plasma
0001B9FC 0000                       		dc.w @short-Ani_Plasma
0001B9FE 0100 0A08 0A01 0A09 0A06+  @full:		dc.b 1,	0, $A, 8, $A, 1, $A, 9,	$A, 6, $A, 7, $A, 0, $A
0001BA0D 080A 010A 090A 060A 070A+  		dc.b 8,	$A, 1, $A, 9, $A, 6, $A, 7, $A,	2, $A, 3, $A, 4
0001BA1C 0A05 FF                    		dc.b $A, 5, afEnd
0001BA20 00                         		even
0001BA20 0006 0501 0507 0501 05FF   @short:		dc.b 0,	6, 5, 1, 5, 7, 5, 1, 5,	afEnd
0001BA2A                            		even
0001BA2A                            		even
0001BA2A                            Map_Plasma:	include	"_maps\Plasma Balls.asm"
0001BA2A                            ; ---------------------------------------------------------------------------
0001BA2A                            ; Sprite mappings - energy balls (FZ)
0001BA2A                            ; ---------------------------------------------------------------------------
0001BA2A                            Map_Plasma_internal:
0001BA2A 0000                       		dc.w @fuzzy1-Map_Plasma_internal
0001BA2C 0000                       		dc.w @fuzzy2-Map_Plasma_internal
0001BA2E 0000                       		dc.w @white1-Map_Plasma_internal
0001BA30 0000                       		dc.w @white2-Map_Plasma_internal
0001BA32 0000                       		dc.w @white3-Map_Plasma_internal
0001BA34 0000                       		dc.w @white4-Map_Plasma_internal
0001BA36 0000                       		dc.w @fuzzy3-Map_Plasma_internal
0001BA38 0000                       		dc.w @fuzzy4-Map_Plasma_internal
0001BA3A 0000                       		dc.w @fuzzy5-Map_Plasma_internal
0001BA3C 0000                       		dc.w @fuzzy6-Map_Plasma_internal
0001BA3E 0000                       		dc.w @blank-Map_Plasma_internal
0001BA40 02                         @fuzzy1:	dc.b 2
0001BA41 F00D 007A F0               		dc.b $F0, $D, 0, $7A, $F0
0001BA46 000D 187A F0               		dc.b 0,	$D, $18, $7A, $F0
0001BA4B 02                         @fuzzy2:	dc.b 2
0001BA4C F406 0082 F4               		dc.b $F4, 6, 0,	$82, $F4
0001BA51 F402 1882 04               		dc.b $F4, 2, $18, $82, 4
0001BA56 02                         @white1:	dc.b 2
0001BA57 F804 0088 F8               		dc.b $F8, 4, 0,	$88, $F8
0001BA5C 0004 1088 F8               		dc.b 0,	4, $10,	$88, $F8
0001BA61 02                         @white2:	dc.b 2
0001BA62 F804 008A F8               		dc.b $F8, 4, 0,	$8A, $F8
0001BA67 0004 108A F8               		dc.b 0,	4, $10,	$8A, $F8
0001BA6C 02                         @white3:	dc.b 2
0001BA6D F804 008C F8               		dc.b $F8, 4, 0,	$8C, $F8
0001BA72 0004 108C F8               		dc.b 0,	4, $10,	$8C, $F8
0001BA77 02                         @white4:	dc.b 2
0001BA78 F406 008E F4               		dc.b $F4, 6, 0,	$8E, $F4
0001BA7D F402 188E 04               		dc.b $F4, 2, $18, $8E, 4
0001BA82 01                         @fuzzy3:	dc.b 1
0001BA83 F805 0094 F8               		dc.b $F8, 5, 0,	$94, $F8
0001BA88 01                         @fuzzy4:	dc.b 1
0001BA89 F805 0098 F8               		dc.b $F8, 5, 0,	$98, $F8
0001BA8E 02                         @fuzzy5:	dc.b 2
0001BA8F F00D 087A F0               		dc.b $F0, $D, 8, $7A, $F0
0001BA94 000D 107A F0               		dc.b 0,	$D, $10, $7A, $F0
0001BA99 02                         @fuzzy6:	dc.b 2
0001BA9A F406 1082 F4               		dc.b $F4, 6, $10, $82, $F4
0001BA9F F402 0882 04               		dc.b $F4, 2, 8,	$82, 4
0001BAA4 00                         @blank:		dc.b 0
0001BAA6 00                         		even
0001BAA6 00                         		even
0001BAA6                            
0001BAA6                            		include	"_incObj\3E Prison Capsule.asm"
0001BAA6                            ; ---------------------------------------------------------------------------
0001BAA6                            ; Object 3E - prison capsule
0001BAA6                            ; ---------------------------------------------------------------------------
0001BAA6                            
0001BAA6                            Prison:
0001BAA6 7000                       		moveq	#0,d0
0001BAA8 1028 0024                  		move.b	obRoutine(a0),d0
0001BAAC 323B 0000                  		move.w	Pri_Index(pc,d0.w),d1
0001BAB0 4EBB 1000                  		jsr	Pri_Index(pc,d1.w)
0001BAD0 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001BAD6                            
0001BAD6                            	@delete:
0001BAD6 4EF9 0000 E464             		jmp	(DeleteObject).l
0001BADC                            ; ===========================================================================
0001BADC 0000                       Pri_Index:	dc.w Pri_Main-Pri_Index
0001BADE 0000                       		dc.w Pri_BodyMain-Pri_Index
0001BAE0 0000                       		dc.w Pri_Switched-Pri_Index
0001BAE2 0000                       		dc.w Pri_Explosion-Pri_Index
0001BAE4 0000                       		dc.w Pri_Explosion-Pri_Index
0001BAE6 0000                       		dc.w Pri_Explosion-Pri_Index
0001BAE8                            	;	dc.w Pri_Animals-Pri_Index
0001BAE8 0000                       		dc.w Pri_EndAct-Pri_Index
0001BAEA                            
0001BAEA =00000030                  pri_origY:	equ $30		; original y-axis position
0001BAEA                            
0001BAEA 0220 0400                  Pri_Var:	dc.b 2,	$20, 4,	0	; routine, width, priority, frame
0001BAEE 040C 0501                  		dc.b 4,	$C, 5, 1
0001BAF2 0610 0403                  		dc.b 6,	$10, 4,	3
0001BAF6 0810 0305                  		dc.b 8,	$10, 3,	5
0001BAFA                            ; ===========================================================================
0001BAFA                            
0001BAFA                            Pri_Main:	; Routine 0
0001BAFA 217C 0000 0000 0004        		move.l	#Map_Pri,obMap(a0)
0001BB02 317C 049D 0002             		move.w	#$49D,obGfx(a0)
0001BB08 117C 0004 0001             		move.b	#4,obRender(a0)
0001BB0E 3168 000C 0030             		move.w	obY(a0),pri_origY(a0)
0001BB14 7000                       		moveq	#0,d0
0001BB16 1028 0028                  		move.b	obSubtype(a0),d0
0001BB1A E548                       		lsl.w	#2,d0
0001BB1C 43FB 00CC                  		lea	Pri_Var(pc,d0.w),a1
0001BB20 1159 0024                  		move.b	(a1)+,obRoutine(a0)
0001BB24 1159 0019                  		move.b	(a1)+,obActWid(a0)
0001BB28 1159 0018                  		move.b	(a1)+,obPriority(a0)
0001BB2C 1159 001A                  		move.b	(a1)+,obFrame(a0)
0001BB30 0C40 0008                  		cmpi.w	#8,d0		; is object type number	02?
0001BB34 6600                       		bne.s	@not02		; if not, branch
0001BB36                            
0001BB36 117C 0006 0020             		move.b	#6,obColType(a0)
0001BB3C 117C 0008 0021             		move.b	#8,obColProp(a0)
0001BB42                            
0001BB42                            	@not02:
0001BB42 4E75                       		rts	
0001BB44                            ; ===========================================================================
0001BB44                            
0001BB44                            Pri_BodyMain:	; Routine 2
0001BB44 0C38 0002 F7A7             		cmpi.b	#2,(v_bossstatus).w
0001BB4A 6700                       		beq.s	@chkopened
0001BB4C 323C 002B                  		move.w	#$2B,d1
0001BB50 343C 0018                  		move.w	#$18,d2
0001BB54 363C 0018                  		move.w	#$18,d3
0001BB58 3828 0008                  		move.w	obX(a0),d4
0001BB5C 4EF9 0001 0798             		jmp	(SolidObject).l
0001BB62                            ; ===========================================================================
0001BB62                            
0001BB62                            @chkopened:
0001BB62 4A28 0025                  		tst.b	ob2ndRout(a0)	; has the prison been opened?
0001BB66 6700                       		beq.s	@open		; if yes, branch
0001BB68 4228 0025                  		clr.b	ob2ndRout(a0)
0001BB6C 08B8 0003 D022             		bclr	#3,(v_player+obStatus).w
0001BB72 08F8 0001 D022             		bset	#1,(v_player+obStatus).w
0001BB78                            
0001BB78                            	@open:
0001BB78 117C 0002 001A             		move.b	#2,obFrame(a0)	; use frame number 2 (destroyed	prison)
0001BB7E 4E75                       		rts	
0001BB80                            ; ===========================================================================
0001BB80                            
0001BB80                            Pri_Switched:	; Routine 4
0001BB80 323C 0017                  		move.w	#$17,d1
0001BB84 343C 0008                  		move.w	#8,d2
0001BB88 363C 0008                  		move.w	#8,d3
0001BB8C 3828 0008                  		move.w	obX(a0),d4
0001BB90 4EB9 0001 0798             		jsr	(SolidObject).l
0001BB96 43F9 0000 0000             		lea	(Ani_Pri).l,a1
0001BB9C 4EB9 0000 B1E6             		jsr	(AnimateSprite).l
0001BBA2 3168 0030 000C             		move.w	pri_origY(a0),obY(a0)
0001BBA8 4A28 0025                  		tst.b	ob2ndRout(a0)	; has prison already been opened?
0001BBAC 6700                       		beq.s	@open2		; if yes, branch
0001BBAE                            
0001BBAE 5068 000C                  		addq.w	#8,obY(a0)
0001BBB2 117C 000A 0024             		move.b	#$A,obRoutine(a0)
0001BBB8 317C 003C 001E             		move.w	#60,obTimeFrame(a0) ; set time between animal spawns
0001BBBE 4238 FE1E                  		clr.b	(f_timecount).w	; stop time counter
0001BBC2 4238 F7AA                  		clr.b	(f_lockscreen).w ; lock screen position
0001BBC6 11FC 0001 F7CC             		move.b	#1,(f_lockctrl).w ; lock controls
0001BBCC 31FC 0800 F602             		move.w	#(btnR<<8),(v_jpadhold2).w ; make Sonic run to the right
0001BBD2 4228 0025                  		clr.b	ob2ndRout(a0)
0001BBD6 08B8 0003 D022             		bclr	#3,(v_player+obStatus).w
0001BBDC 08F8 0001 D022             		bset	#1,(v_player+obStatus).w
0001BBE2                            
0001BBE2                            	@open2:
0001BBE2 4E75                       		rts	
0001BBE4                            ; ===========================================================================
0001BBE4                            
0001BBE4                            Pri_Explosion:	; Routine 6, 8, $A
0001BBE4 7007                       		moveq	#7,d0
0001BBE6 C038 FE0F                  		and.b	(v_vbla_byte).w,d0
0001BBEA 6600                       		bne.s	@noexplosion
0001BBEC 4EB9 0000 E8B0             		jsr	(FindFreeObj).l
0001BBF2 6600                       		bne.s	@noexplosion
0001BBF4 137C 003F 0000             		move.b	#id_ExplosionBomb,0(a1) ; load explosion object
0001BBFA 3368 0008 0008             		move.w	obX(a0),obX(a1)
0001BC00 3368 000C 000C             		move.w	obY(a0),obY(a1)
0001BC06 4EB9 0000 27C6             		jsr	(RandomNumber).l
0001BC0C 7200                       		moveq	#0,d1
0001BC0E 1200                       		move.b	d0,d1
0001BC10 E409                       		lsr.b	#2,d1
0001BC12 0441 0020                  		subi.w	#$20,d1
0001BC16 D369 0008                  		add.w	d1,obX(a1)
0001BC1A E048                       		lsr.w	#8,d0
0001BC1C E608                       		lsr.b	#3,d0
0001BC1E D169 000C                  		add.w	d0,obY(a1)
0001BC22                            
0001BC22                            	@noexplosion:
0001BC22 5368 001E                  		subq.w	#1,obTimeFrame(a0)
0001BC26 6700                       		beq.s	@makeanimal
0001BC28 4E75                       		rts	
0001BC2A                            ; ===========================================================================
0001BC2A                            
0001BC2A                            @makeanimal:
0001BC2A 11FC 0002 F7A7             		move.b	#2,(v_bossstatus).w
0001BC30 117C 000C 0024             		move.b	#$C,obRoutine(a0)	; replace explosions with animals
0001BC36 117C 0006 001A             		move.b	#6,obFrame(a0)
0001BC3C 317C 0096 001E             		move.w	#150,obTimeFrame(a0)
0001BC42 0668 0020 000C             		addi.w	#$20,obY(a0)
0001BC48 7C07                       		moveq	#7,d6
0001BC4A 3A3C 009A                  		move.w	#$9A,d5
0001BC4E 78E4                       		moveq	#-$1C,d4
0001BC50                            
0001BC50                            	@loop:
0001BC50 4EB9 0000 E8B0             		jsr	(FindFreeObj).l
0001BC56 6600                       		bne.s	@fail
0001BC58 137C 0028 0000             		move.b	#id_Animals,0(a1) ; load animal object
0001BC5E 3368 0008 0008             		move.w	obX(a0),obX(a1)
0001BC64 3368 000C 000C             		move.w	obY(a0),obY(a1)
0001BC6A D969 0008                  		add.w	d4,obX(a1)
0001BC6E 5E44                       		addq.w	#7,d4
0001BC70 3345 0036                  		move.w	d5,$36(a1)
0001BC74 5145                       		subq.w	#8,d5
0001BC76 51CE FFD8                  		dbf	d6,@loop	; repeat 7 more	times
0001BC7A                            
0001BC7A                            	@fail:
0001BC7A 4E75                       		rts	
0001BC7C                            ; ===========================================================================
0001BC7C                            
0001BC7C                            Pri_Animals:	; Routine $C
0001BC7C 7007                       		moveq	#7,d0
0001BC7E C038 FE0F                  		and.b	(v_vbla_byte).w,d0
0001BC82 6600                       		bne.s	@noanimal
0001BC84 4EB9 0000 E8B0             		jsr	(FindFreeObj).l
0001BC8A 6600                       		bne.s	@noanimal
0001BC8C 137C 0028 0000             		move.b	#id_Animals,0(a1) ; load animal object
0001BC92 3368 0008 0008             		move.w	obX(a0),obX(a1)
0001BC98 3368 000C 000C             		move.w	obY(a0),obY(a1)
0001BC9E 4EB9 0000 27C6             		jsr	(RandomNumber).l
0001BCA4 0240 001F                  		andi.w	#$1F,d0
0001BCA8 5D40                       		subq.w	#6,d0
0001BCAA 4A41                       		tst.w	d1
0001BCAC 6A00                       		bpl.s	@ispositive
0001BCAE 4440                       		neg.w	d0
0001BCB0                            
0001BCB0                            	@ispositive:
0001BCB0 D169 0008                  		add.w	d0,obX(a1)
0001BCB4 337C 000C 0036             		move.w	#$C,$36(a1)
0001BCBA                            
0001BCBA                            	@noanimal:
0001BCBA 5368 001E                  		subq.w	#1,obTimeFrame(a0)
0001BCBE 6600                       		bne.s	@wait
0001BCC0 5428 0024                  		addq.b	#2,obRoutine(a0)
0001BCC4 317C 00B4 001E             		move.w	#180,obTimeFrame(a0)
0001BCCA                            
0001BCCA                            	@wait:
0001BCCA 4E75                       		rts	
0001BCCC                            ; ===========================================================================
0001BCCC                            
0001BCCC                            Pri_EndAct:	; Routine $E
0001BCCC 703E                       		moveq	#$3E,d0
0001BCCE 7228                       		moveq	#id_Animals,d1
0001BCD0 7440                       		moveq	#$40,d2
0001BCD2 43F8 D040                  		lea	(v_objspace+$40).w,a1 ; load object RAM
0001BCD6                            
0001BCD6                            	@findanimal:
0001BCD6 B211                       		cmp.b	(a1),d1		; is object $28	(animal) loaded?
0001BCD8 6700                       		beq.s	@found		; if yes, branch
0001BCDA D2C2                       		adda.w	d2,a1		; next object RAM
0001BCDC 51C8 FFF8                  		dbf	d0,@findanimal	; repeat $3E times
0001BCE0                            
0001BCE0 4EB9 0000 FA46             		jsr	(GotThroughAct).l
0001BCE6 4EF9 0000 E464             		jmp	(DeleteObject).l
0001BCEC                            
0001BCEC                            	@found:
0001BCEC 4E75                       		rts	
0001BCEC 4E75                       		rts	
0001BCEE                            		include	"_anim\Prison Capsule.asm"
0001BCEE                            ; ---------------------------------------------------------------------------
0001BCEE                            ; Animation script - prison capsule
0001BCEE                            ; ---------------------------------------------------------------------------
0001BCEE 0000                       Ani_Pri:	dc.w @switchflash-Ani_Pri
0001BCF0 0000                       		dc.w @switchflash-Ani_Pri
0001BCF2 0201 03FF                  @switchflash:	dc.b 2,	1, 3, afEnd
0001BCF6                            		even
0001BCF6                            		even
0001BCF6                            Map_Pri:	include	"_maps\Prison Capsule.asm"
0001BCF6                            ; ================================================================================
0001BCF6                            ; Sprite Mappings - generated by Flex 2 Tue Dec 29 2020 08:40:21 GMT-0500 (Eastern Standard Time)
0001BCF6                            ; ================================================================================
0001BCF6                            
0001BCF6                            DATADAZ8EK47M7T:
0001BCF6 0000 0000                  	dc.w DATADAZ8EK47M7T_0-DATADAZ8EK47M7T, DATADAZ8EK47M7T_1-DATADAZ8EK47M7T
0001BCFA 0000 0000                  	dc.w DATADAZ8EK47M7T_2-DATADAZ8EK47M7T, DATADAZ8EK47M7T_3-DATADAZ8EK47M7T
0001BCFE 0000 0000                  	dc.w DATADAZ8EK47M7T_4-DATADAZ8EK47M7T, DATADAZ8EK47M7T_5-DATADAZ8EK47M7T
0001BD02 0000                       	dc.w DATADAZ8EK47M7T_6-DATADAZ8EK47M7T
0001BD04 07                         DATADAZ8EK47M7T_0: dc.b $7
0001BD05 E00C 2000 F0               	dc.b $E0, $C, $20, $0, $F0
0001BD0A E80D 2004 E0               	dc.b $E8, $D, $20, $4, $E0
0001BD0F E80D 200C 00               	dc.b $E8, $D, $20, $C, $0
0001BD14 F80E 2014 E0               	dc.b $F8, $E, $20, $14, $E0
0001BD19 F80E 2020 00               	dc.b $F8, $E, $20, $20, $0
0001BD1E 100D 202C E0               	dc.b $10, $D, $20, $2C, $E0
0001BD23 100D 2034 00               	dc.b $10, $D, $20, $34, $0
0001BD28 01                         DATADAZ8EK47M7T_1: dc.b $1
0001BD29 F809 003C F4               	dc.b $F8, $9, $0, $3C, $F4
0001BD2E 06                         DATADAZ8EK47M7T_2: dc.b $6
0001BD2F 0008 2042 E0               	dc.b $0, $8, $20, $42, $E0
0001BD34 080C 2045 E0               	dc.b $8, $C, $20, $45, $E0
0001BD39 0004 2049 10               	dc.b $0, $4, $20, $49, $10
0001BD3E 080C 204B 00               	dc.b $8, $C, $20, $4B, $0
0001BD43 100D 202C E0               	dc.b $10, $D, $20, $2C, $E0
0001BD48 100D 2034 00               	dc.b $10, $D, $20, $34, $0
0001BD4D 01                         DATADAZ8EK47M7T_3: dc.b $1
0001BD4E F809 004F F4               	dc.b $F8, $9, $0, $4F, $F4
0001BD53 02                         DATADAZ8EK47M7T_4: dc.b $2
0001BD54 E80E 2055 F0               	dc.b $E8, $E, $20, $55, $F0
0001BD59 000E 2061 F0               	dc.b $0, $E, $20, $61, $F0
0001BD5E 01                         DATADAZ8EK47M7T_5: dc.b $1
0001BD5F F007 206D F8               	dc.b $F0, $7, $20, $6D, $F8
0001BD64 00                         DATADAZ8EK47M7T_6: dc.b $0
0001BD66 00                         	even
0001BD66 00                         	even
0001BD66                            
0001BD66                            		include	"_incObj\sub ReactToItem.asm"
0001BD66                            ; ---------------------------------------------------------------------------
0001BD66                            ; Subroutine to react to obColType(a0)
0001BD66                            ; ---------------------------------------------------------------------------
0001BD66                            
0001BD66                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001BD66                            
0001BD66                            
0001BD66                            ReactToItem:
0001BD66 4E71                       		nop	
0001BD68 3428 0008                  		move.w	obX(a0),d2	; load Sonic's x-axis position
0001BD6C 3628 000C                  		move.w	obY(a0),d3	; load Sonic's y-axis position
0001BD70 5142                       		subq.w	#8,d2
0001BD72 7A00                       		moveq	#0,d5
0001BD74 1A28 0016                  		move.b	obHeight(a0),d5	; load Sonic's height
0001BD78 5705                       		subq.b	#3,d5
0001BD7A 9645                       		sub.w	d5,d3
0001BD7C 0C28 0039 001A             		cmpi.b	#fr_Duck,obFrame(a0) ; is Sonic ducking?
0001BD82 6600                       		bne.s	@notducking	; if not, branch
0001BD84 0643 000C                  		addi.w	#$C,d3
0001BD88 7A0A                       		moveq	#$A,d5
0001BD8A                            
0001BD8A                            	@notducking:
0001BD8A 383C 0010                  		move.w	#$10,d4
0001BD8E DA45                       		add.w	d5,d5
0001BD90 43F8 D800                  		lea	(v_objspace+$800).w,a1 ; set object RAM start address
0001BD94 3C3C 005F                  		move.w	#$5F,d6
0001BD98                            
0001BD98                            @loop:
0001BD98 4A29 0001                  		tst.b	obRender(a1)
0001BD9C 6A00                       		bpl.s	@next
0001BD9E 1029 0020                  		move.b	obColType(a1),d0 ; load collision type
0001BDA2 6600                       		bne.s	@proximity	; if nonzero, branch
0001BDA4                            
0001BDA4                            	@next:
0001BDA4 43E9 0040                  		lea	$40(a1),a1	; next object RAM
0001BDA8 51CE FFEE                  		dbf	d6,@loop	; repeat $5F more times
0001BDAC                            
0001BDAC 7000                       		moveq	#0,d0
0001BDAE 4E75                       		rts	
0001BDB0                            ; ===========================================================================
0001BDB0                            @sizes:		;   width, height
0001BDB0 1414                       		dc.b  $14, $14		; $01
0001BDB2 0C14                       		dc.b   $C, $14		; $02
0001BDB4 140C                       		dc.b  $14,  $C		; $03
0001BDB6 0410                       		dc.b	4, $10		; $04
0001BDB8 0C12                       		dc.b   $C, $12		; $05
0001BDBA 1010                       		dc.b  $10, $10		; $06
0001BDBC 0606                       		dc.b	6,   6		; $07
0001BDBE 180C                       		dc.b  $18,  $C		; $08
0001BDC0 0C10                       		dc.b   $C, $10		; $09
0001BDC2 100C                       		dc.b  $10,  $C		; $0A
0001BDC4 0808                       		dc.b	8,   8		; $0B
0001BDC6 1410                       		dc.b  $14, $10		; $0C
0001BDC8 1408                       		dc.b  $14,   8		; $0D
0001BDCA 0E0E                       		dc.b   $E,  $E		; $0E
0001BDCC 1818                       		dc.b  $18, $18		; $0F
0001BDCE 2810                       		dc.b  $28, $10		; $10
0001BDD0 1018                       		dc.b  $10, $18		; $11
0001BDD2 0810                       		dc.b	8, $10		; $12
0001BDD4 2070                       		dc.b  $20, $70		; $13
0001BDD6 4020                       		dc.b  $40, $20		; $14
0001BDD8 8020                       		dc.b  $80, $20		; $15
0001BDDA 2020                       		dc.b  $20, $20		; $16
0001BDDC 0808                       		dc.b	8,   8		; $17
0001BDDE 0404                       		dc.b	4,   4		; $18
0001BDE0 2008                       		dc.b  $20,   8		; $19
0001BDE2 0C0C                       		dc.b   $C,  $C		; $1A
0001BDE4 0804                       		dc.b	8,   4		; $1B
0001BDE6 1804                       		dc.b  $18,   4		; $1C
0001BDE8 2804                       		dc.b  $28,   4		; $1D
0001BDEA 0408                       		dc.b	4,   8		; $1E
0001BDEC 0418                       		dc.b	4, $18		; $1F
0001BDEE 0428                       		dc.b	4, $28		; $20
0001BDF0 0420                       		dc.b	4, $20		; $21
0001BDF2 1818                       		dc.b  $18, $18		; $22
0001BDF4 0C18                       		dc.b   $C, $18		; $23
0001BDF6 4808                       		dc.b  $48,   8		; $24
0001BDF8                            ; ===========================================================================
0001BDF8                            
0001BDF8                            @proximity:
0001BDF8 0240 003F                  		andi.w	#$3F,d0
0001BDFC D040                       		add.w	d0,d0
0001BDFE 45FB 00AE                  		lea	@sizes-2(pc,d0.w),a2
0001BE02 7200                       		moveq	#0,d1
0001BE04 121A                       		move.b	(a2)+,d1
0001BE06 3029 0008                  		move.w	obX(a1),d0
0001BE0A 9041                       		sub.w	d1,d0
0001BE0C 9042                       		sub.w	d2,d0
0001BE0E 6400                       		bcc.s	@outsidex	; branch if not touching
0001BE10 D241                       		add.w	d1,d1
0001BE12 D041                       		add.w	d1,d0
0001BE14 6500                       		bcs.s	@withinx	; branch if touching
0001BE16 6000 FF8C                  		bra.w	@next
0001BE1A                            ; ===========================================================================
0001BE1A                            
0001BE1A                            @outsidex:
0001BE1A B044                       		cmp.w	d4,d0
0001BE1C 6200 FF86                  		bhi.w	@next
0001BE20                            
0001BE20                            @withinx:
0001BE20 7200                       		moveq	#0,d1
0001BE22 121A                       		move.b	(a2)+,d1
0001BE24 3029 000C                  		move.w	obY(a1),d0
0001BE28 9041                       		sub.w	d1,d0
0001BE2A 9043                       		sub.w	d3,d0
0001BE2C 6400                       		bcc.s	@outsidey	; branch if not touching
0001BE2E D241                       		add.w	d1,d1
0001BE30 D240                       		add.w	d0,d1
0001BE32 6500                       		bcs.s	@withiny	; branch if touching
0001BE34 6000 FF6E                  		bra.w	@next
0001BE38                            ; ===========================================================================
0001BE38                            
0001BE38                            @outsidey:
0001BE38 B045                       		cmp.w	d5,d0
0001BE3A 6200 FF68                  		bhi.w	@next
0001BE3E                            
0001BE3E                            @withiny:
0001BE3E                            	@chktype:
0001BE3E 1229 0020                  		move.b	obColType(a1),d1 ; load collision type
0001BE42 0201 00C0                  		andi.b	#$C0,d1		; is obColType $40 or higher?
0001BE46 6700 0000                  		beq.w	React_Enemy	; if not, branch
0001BE4A 0C01 00C0                  		cmpi.b	#$C0,d1		; is obColType $C0 or higher?
0001BE4E 6700 0000                  		beq.w	React_Special	; if yes, branch
0001BE52 4A01                       		tst.b	d1		; is obColType $80-$BF?
0001BE54 6B00 0000                  		bmi.w	React_ChkHurt	; if yes, branch
0001BE58                            
0001BE58                            ; obColType is $40-$7F (powerups)
0001BE58                            
0001BE58 1029 0020                  		move.b	obColType(a1),d0
0001BE5C 0200 003F                  		andi.b	#$3F,d0
0001BE60 0C00 0006                  		cmpi.b	#6,d0		; is collision type $46	?
0001BE64 6700                       		beq.s	React_Monitor	; if yes, branch
0001BE66 0C68 005A 0030             		cmpi.w	#90,$30(a0)	; is Sonic invincible?
0001BE6C 6400 0000                  		bcc.w	@invincible	; if yes, branch
0001BE70 5429 0024                  		addq.b	#2,obRoutine(a1) ; advance the object's routine counter
0001BE74                            
0001BE74                            	@invincible:
0001BE74 4E75                       		rts	
0001BE76                            ; ===========================================================================
0001BE76                            
0001BE76                            React_Monitor:
0001BE76 4A68 0012                  		tst.w	obVelY(a0)	; is Sonic moving upwards?
0001BE7A 6A00                       		bpl.s	@movingdown	; if not, branch
0001BE7C                            
0001BE7C 3028 000C                  		move.w	obY(a0),d0
0001BE80 0440 0010                  		subi.w	#$10,d0
0001BE84 B069 000C                  		cmp.w	obY(a1),d0
0001BE88 6500                       		bcs.s	@donothing
0001BE8A                            	;	neg.w	obVelY(a0)	; reverse Sonic's vertical speed
0001BE8A 337C FE80 0012             		move.w	#-$180,obVelY(a1)
0001BE90 4A29 0025                  		tst.b	ob2ndRout(a1)
0001BE94 6600                       		bne.s	@donothing
0001BE96 5829 0025                  		addq.b	#4,ob2ndRout(a1) ; advance the monitor's routine counter
0001BE9A 4E75                       		rts	
0001BE9C                            ; ===========================================================================
0001BE9C                            
0001BE9C                            @movingdown:
0001BE9C 0C28 0002 001C             		cmpi.b	#id_Roll,obAnim(a0) ; is Sonic rolling/jumping?
0001BEA2 6600                       		bne.s	@donothing
0001BEA4 4468 0012                  		neg.w	obVelY(a0)	; reverse Sonic's y-motion
0001BEA8 5429 0024                  		addq.b	#2,obRoutine(a1) ; advance the monitor's routine counter
0001BEAC                            
0001BEAC                            	@donothing:
0001BEAC 4E75                       		rts	
0001BEAE                            ; ===========================================================================
0001BEAE                            
0001BEAE                            React_Enemy:
0001BEAE 4A38 FE2D                  		tst.b	(v_invinc).w	; is Sonic invincible?
0001BEB2 6600                       		bne.s	donthurtsonic	; if yes, branch
0001BEB4 0C28 0020 001C             		cmpi.b	#$20,obAnim(a0) ; is Sonic rolling/jumping?
0001BEBA 6700 0000                  		beq.w	donthurtsonic	; if not, branch
0001BEBE                            ChkRoll:
0001BEBE 0C28 0002 001C             		cmpi.b	#id_Roll,obAnim(a0) ; is Sonic rolling/jumping?
0001BEC4 6600 0000                  		bne.w	React_ChkHurt	; if not, branch
0001BEC8                            
0001BEC8                            donthurtsonic:
0001BEC8 4A29 0021                  		tst.b	obColProp(a1)
0001BECC 6700                       		beq.s	@breakenemy
0001BECE                            
0001BECE 4468 0010                  		neg.w	obVelX(a0)	; repel Sonic
0001BED2 4468 0012                  		neg.w	obVelY(a0)
0001BED6 E0E8 0010                  		asr	obVelX(a0)
0001BEDA E0E8 0012                  		asr	obVelY(a0)
0001BEDE 137C 0000 0020             		move.b	#0,obColType(a1)
0001BEE4 5329 0021                  		subq.b	#1,obColProp(a1)
0001BEE8 6600                       		bne.s	@flagnotclear
0001BEEA 08E9 0007 0022             		bset	#7,obStatus(a1)
0001BEF0                            
0001BEF0                            	@flagnotclear:
0001BEF0 4E75                       		rts	
0001BEF2                            ; ===========================================================================
0001BEF2                            
0001BEF2                            @breakenemy:
0001BEF2 08E9 0007 0022             		bset	#7,obStatus(a1)
0001BEF8 7000                       		moveq	#0,d0
0001BEFA 3038 F7D0                  		move.w	(v_itembonus).w,d0
0001BEFE 5478 F7D0                  		addq.w	#2,(v_itembonus).w ; add 2 to item bonus counter
0001BF02 0C40 0006                  		cmpi.w	#6,d0
0001BF06 6500                       		bcs.s	@bonusokay
0001BF08 7006                       		moveq	#6,d0		; max bonus is lvl6
0001BF0A                            
0001BF0A                            	@bonusokay:
0001BF0A 3340 003E                  		move.w	d0,$3E(a1)
0001BF0E 303B 0000                  		move.w	@points(pc,d0.w),d0
0001BF12 0C78 0020 F7D0             		cmpi.w	#$20,(v_itembonus).w ; have 16 enemies been destroyed?
0001BF18 6500                       		bcs.s	@lessthan16	; if not, branch
0001BF1A 303C 03E8                  		move.w	#1000,d0	; fix bonus to 10000
0001BF1E 337C 000A 003E             		move.w	#$A,$3E(a1)
0001BF24                            
0001BF24                            	@lessthan16:
0001BF24 6100 0000                  		bsr.w	AddPoints
0001BF28 137C 0027 0000             		move.b	#id_ExplosionItem,0(a1) ; change object to explosion
0001BF2E 137C 0000 0024             		move.b	#0,obRoutine(a1)
0001BF34 4A68 0012                  		tst.w	obVelY(a0)
0001BF38 6B00                       		bmi.s	@bouncedown
0001BF3A 3028 000C                  		move.w	obY(a0),d0
0001BF3E B069 000C                  		cmp.w	obY(a1),d0
0001BF42 6400                       		bcc.s	@bounceup
0001BF44 4468 0012                  		neg.w	obVelY(a0)
0001BF48 4E75                       		rts	
0001BF4A                            ; ===========================================================================
0001BF4A                            
0001BF4A                            	@bouncedown:
0001BF4A 0668 0100 0012             		addi.w	#$100,obVelY(a0)
0001BF50 4E75                       		rts	
0001BF52                            
0001BF52                            	@bounceup:
0001BF52 0468 0100 0012             		subi.w	#$100,obVelY(a0)
0001BF58 4E75                       		rts	
0001BF5A                            
0001BF5A 000A 0014 0032 0064        @points:	dc.w 10, 20, 50, 100	; points awarded div 10
0001BF62                            
0001BF62                            ; ===========================================================================
0001BF62                            
0001BF62                            React_Caterkiller:
0001BF62 08E9 0007 0022             		bset	#7,obStatus(a1)
0001BF68                            
0001BF68                            React_ChkHurt:
0001BF68 4A38 FE2D                  		tst.b	(v_invinc).w	; is Sonic invincible?
0001BF6C 6700                       		beq.s	@notinvincible	; if not, branch
0001BF6E                            
0001BF6E                            	@isflashing:
0001BF6E 70FF                       		moveq	#-1,d0
0001BF70 4E75                       		rts	
0001BF72                            ; ===========================================================================
0001BF72                            
0001BF72                            	@notinvincible:
0001BF72 4E71                       		nop	
0001BF74 4A68 0030                  		tst.w	$30(a0)		; is Sonic flashing?
0001BF78 66F4                       		bne.s	@isflashing	; if yes, branch
0001BF7A 2449                       		movea.l	a1,a2
0001BF7C                            
0001BF7C                            ; End of function ReactToItem
0001BF7C                            ; continue straight to HurtSonic
0001BF7C                            
0001BF7C                            ; ---------------------------------------------------------------------------
0001BF7C                            ; Hurting Sonic	subroutine
0001BF7C                            ; ---------------------------------------------------------------------------
0001BF7C                            
0001BF7C                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001BF7C                            
0001BF7C                            
0001BF7C                            HurtSonic:
0001BF7C 4A38 FE2C                  		tst.b	(v_shield).w	; does Sonic have a shield?
0001BF80 6600                       		bne.s	@hasshield	; if yes, branch
0001BF82 4A78 FE20                  		tst.w	(v_rings).w	; does Sonic have any rings?
0001BF86 6700 0000                  		beq.w	@norings	; if not, branch
0001BF8A                            
0001BF8A 4EB9 0000 E8B0             		jsr	(FindFreeObj).l
0001BF90 6600                       		bne.s	@hasshield
0001BF92 137C 0037 0000             		move.b	#id_RingLoss,0(a1) ; load bouncing multi rings object
0001BF98 3368 0008 0008             		move.w	obX(a0),obX(a1)
0001BF9E 3368 000C 000C             		move.w	obY(a0),obY(a1)
0001BFA4                            
0001BFA4                            	@hasshield:
0001BFA4 11FC 0000 FE2C             		move.b	#0,(v_shield).w	; remove shield
0001BFAA 117C 0004 0024             		move.b	#4,obRoutine(a0)
0001BFB0 6100 86FC                  		bsr.w	Sonic_ResetOnFloor
0001BFB4 08E8 0001 0022             		bset	#1,obStatus(a0)
0001BFBA 317C FC00 0012             		move.w	#-$400,obVelY(a0) ; make Sonic bounce away from the object
0001BFC0 317C FE00 0010             		move.w	#-$200,obVelX(a0)
0001BFC6 0828 0006 0022             		btst	#6,obStatus(a0)	; is Sonic underwater?
0001BFCC 6700                       		beq.s	@isdry		; if not, branch
0001BFCE                            
0001BFCE 317C FE00 0012             		move.w	#-$200,obVelY(a0) ; slower bounce
0001BFD4 317C FF00 0010             		move.w	#-$100,obVelX(a0)
0001BFDA                            
0001BFDA                            	@isdry:
0001BFDA 3028 0008                  		move.w	obX(a0),d0
0001BFDE B06A 0008                  		cmp.w	obX(a2),d0
0001BFE2 6500                       		bcs.s	@isleft		; if Sonic is left of the object, branch
0001BFE4 4468 0010                  		neg.w	obVelX(a0)	; if Sonic is right of the object, reverse
0001BFE8                            
0001BFE8                            	@isleft:
0001BFE8 317C 0000 0014             		move.w	#0,obInertia(a0)
0001BFEE 117C 001A 001C             		move.b	#id_Hurt,obAnim(a0)
0001BFF4 317C 0078 0030             		move.w	#120,$30(a0)	; set temp invincible time to 2 seconds
0001BFFA 303C 0000                  		move.w	#sfx_Death,d0	; load normal damage sound
0001BFFE 0C12 0036                  		cmpi.b	#id_Spikes,(a2)	; was damage caused by spikes?
0001C002 6600                       		bne.s	@sound		; if not, branch
0001C004 0C12 0016                  		cmpi.b	#id_Harpoon,(a2) ; was damage caused by LZ harpoon?
0001C008 6600                       		bne.s	@sound		; if not, branch
0001C00A 303C 0000                  		move.w	#sfx_HitSpikes,d0 ; load spikes damage sound
0001C00E                            
0001C00E                            	@sound:
0001C00E 4EB9 0000 118A             		jsr	(PlaySound_Special).l
0001C014 70FF                       		moveq	#-1,d0
0001C016 4E75                       		rts	
0001C018                            ; ===========================================================================
0001C018                            
0001C018                            @norings:
0001C018 4A78 FFFA                  		tst.w	(f_debugmode).w	; is debug mode	cheat on?
0001C01C 6600 FF86                  		bne.w	@hasshield	; if yes, branch
0001C020                            
0001C020                            ; ---------------------------------------------------------------------------
0001C020                            ; Subroutine to	kill Sonic
0001C020                            ; ---------------------------------------------------------------------------
0001C020                            
0001C020                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001C020                            
0001C020                            
0001C020                            KillSonic:
0001C020 4A78 FE08                  		tst.w	(v_debuguse).w	; is debug mode	active?
0001C024 6600                       		bne.s	@dontdie	; if yes, branch
0001C026 11FC 0000 FE2D             		move.b	#0,(v_invinc).w	; remove invincibility
0001C02C 117C 0006 0024             		move.b	#6,obRoutine(a0)
0001C032 6100 867A                  		bsr.w	Sonic_ResetOnFloor
0001C036 08E8 0001 0022             		bset	#1,obStatus(a0)
0001C03C 317C F900 0012             		move.w	#-$700,obVelY(a0)
0001C042 317C 0000 0010             		move.w	#0,obVelX(a0)
0001C048 317C 0000 0014             		move.w	#0,obInertia(a0)
0001C04E 3168 000C 0038             		move.w	obY(a0),$38(a0)
0001C054 117C 0018 001C             		move.b	#id_Death,obAnim(a0)
0001C05A 08E8 0007 0002             		bset	#7,obGfx(a0)
0001C060 303C 0000                  		move.w	#sfx_Death,d0	; play normal death sound
0001C064 0C12 0036                  		cmpi.b	#id_Spikes,(a2)	; check	if you were killed by spikes
0001C068 6600                       		bne.s	@sound
0001C06A 303C 0000                  		move.w	#sfx_HitSpikes,d0 ; play spikes death sound
0001C06E                            
0001C06E                            	@sound:
0001C06E 4EB9 0000 118A             		jsr	(PlaySound_Special).l
0001C074                            
0001C074                            	@dontdie:
0001C074 70FF                       		moveq	#-1,d0
0001C076 4E75                       		rts	
0001C078                            ; End of function KillSonic
0001C078                            
0001C078                            
0001C078                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001C078                            
0001C078                            
0001C078                            React_Special:
0001C078 1229 0020                  		move.b	obColType(a1),d1
0001C07C 0201 003F                  		andi.b	#$3F,d1
0001C080 0C01 000B                  		cmpi.b	#$B,d1		; is collision type $CB	?
0001C084 6700                       		beq.s	@caterkiller	; if yes, branch
0001C086 0C01 000C                  		cmpi.b	#$C,d1		; is collision type $CC	?
0001C08A 6700                       		beq.s	@yadrin		; if yes, branch
0001C08C 0C01 0017                  		cmpi.b	#$17,d1		; is collision type $D7	?
0001C090 6700                       		beq.s	@D7orE1		; if yes, branch
0001C092 0C01 0021                  		cmpi.b	#$21,d1		; is collision type $E1	?
0001C096 6700                       		beq.s	@D7orE1		; if yes, branch
0001C098 4E75                       		rts	
0001C09A                            ; ===========================================================================
0001C09A                            
0001C09A                            @caterkiller:
0001C09A 6000 FEC6                  		bra.w	React_Caterkiller
0001C09E                            ; ===========================================================================
0001C09E                            
0001C09E                            @yadrin:
0001C09E 9A40                       		sub.w	d0,d5
0001C0A0 0C45 0008                  		cmpi.w	#8,d5
0001C0A4 6400                       		bcc.s	@normalenemy
0001C0A6 3029 0008                  		move.w	obX(a1),d0
0001C0AA 5940                       		subq.w	#4,d0
0001C0AC 0829 0000 0022             		btst	#0,obStatus(a1)
0001C0B2 6700                       		beq.s	@noflip
0001C0B4 0440 0010                  		subi.w	#$10,d0
0001C0B8                            
0001C0B8                            	@noflip:
0001C0B8 9042                       		sub.w	d2,d0
0001C0BA 6400                       		bcc.s	@loc_1B13C
0001C0BC 0640 0018                  		addi.w	#$18,d0
0001C0C0 6500                       		bcs.s	@loc_1B140
0001C0C2 6000                       		bra.s	@normalenemy
0001C0C4                            ; ===========================================================================
0001C0C4                            
0001C0C4                            	@loc_1B13C:
0001C0C4 B044                       		cmp.w	d4,d0
0001C0C6 6200                       		bhi.s	@normalenemy
0001C0C8                            
0001C0C8                            	@loc_1B140:
0001C0C8 6000 FE9E                  		bra.w	React_ChkHurt
0001C0CC                            ; ===========================================================================
0001C0CC                            
0001C0CC                            	@normalenemy:
0001C0CC 6000 FDE0                  		bra.w	React_Enemy
0001C0D0                            ; ===========================================================================
0001C0D0                            
0001C0D0                            @D7orE1:
0001C0D0 5229 0021                  		addq.b	#1,obColProp(a1)
0001C0D4 4E75                       		rts	
0001C0D6                            ; End of function React_Special
0001C0D6                            ; End of function React_Special
0001C0D6                            
0001C0D6                            ; ---------------------------------------------------------------------------
0001C0D6                            ; Subroutine to	show the special stage layout
0001C0D6                            ; ---------------------------------------------------------------------------
0001C0D6                            
0001C0D6                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001C0D6                            
0001C0D6                            
0001C0D6                            SS_ShowLayout:
0001C0D6 6100 0000                  		bsr.w	SS_AniWallsRings
0001C0DA 6100 0000                  		bsr.w	SS_AniItems
0001C0DE 3F05                       		move.w	d5,-(sp)
0001C0E0 43F8 8000                  		lea	($FFFF8000).w,a1
0001C0E4 1038 F780                  		move.b	(v_ssangle).w,d0
0001C0E8 0200 00FC                  		andi.b	#$FC,d0
0001C0EC 4EB9 0000 27EC             		jsr	(CalcSine).l
0001C0F2 3800                       		move.w	d0,d4
0001C0F4 3A01                       		move.w	d1,d5
0001C0F6 C9FC 0018                  		muls.w	#$18,d4
0001C0FA CBFC 0018                  		muls.w	#$18,d5
0001C0FE 7400                       		moveq	#0,d2
0001C100 3438 F700                  		move.w	(v_screenposx).w,d2
0001C104 84FC 0018                  		divu.w	#$18,d2
0001C108 4842                       		swap	d2
0001C10A 4442                       		neg.w	d2
0001C10C 0642 FF4C                  		addi.w	#-$B4,d2
0001C110 7600                       		moveq	#0,d3
0001C112 3638 F704                  		move.w	(v_screenposy).w,d3
0001C116 86FC 0018                  		divu.w	#$18,d3
0001C11A 4843                       		swap	d3
0001C11C 4443                       		neg.w	d3
0001C11E 0643 FF4C                  		addi.w	#-$B4,d3
0001C122 3E3C 000F                  		move.w	#$F,d7
0001C126                            
0001C126                            loc_1B19E:
0001C126 48A7 E000                  		movem.w	d0-d2,-(sp)
0001C12A 48A7 C000                  		movem.w	d0-d1,-(sp)
0001C12E 4440                       		neg.w	d0
0001C130 C3C2                       		muls.w	d2,d1
0001C132 C1C3                       		muls.w	d3,d0
0001C134 2C00                       		move.l	d0,d6
0001C136 DC81                       		add.l	d1,d6
0001C138 4C9F 0003                  		movem.w	(sp)+,d0-d1
0001C13C C1C2                       		muls.w	d2,d0
0001C13E C3C3                       		muls.w	d3,d1
0001C140 D280                       		add.l	d0,d1
0001C142 2406                       		move.l	d6,d2
0001C144 3C3C 000F                  		move.w	#$F,d6
0001C148                            
0001C148                            loc_1B1C0:
0001C148 2002                       		move.l	d2,d0
0001C14A E080                       		asr.l	#8,d0
0001C14C 32C0                       		move.w	d0,(a1)+
0001C14E 2001                       		move.l	d1,d0
0001C150 E080                       		asr.l	#8,d0
0001C152 32C0                       		move.w	d0,(a1)+
0001C154 D485                       		add.l	d5,d2
0001C156 D284                       		add.l	d4,d1
0001C158 51CE FFEE                  		dbf	d6,loc_1B1C0
0001C15C                            
0001C15C 4C9F 0007                  		movem.w	(sp)+,d0-d2
0001C160 0643 0018                  		addi.w	#$18,d3
0001C164 51CF FFC0                  		dbf	d7,loc_1B19E
0001C168                            
0001C168 3A1F                       		move.w	(sp)+,d5
0001C16A 41F9 00FF 0000             		lea	($FF0000).l,a0
0001C170 7000                       		moveq	#0,d0
0001C172 3038 F704                  		move.w	(v_screenposy).w,d0
0001C176 80FC 0018                  		divu.w	#$18,d0
0001C17A C0FC 0080                  		mulu.w	#$80,d0
0001C17E D1C0                       		adda.l	d0,a0
0001C180 7000                       		moveq	#0,d0
0001C182 3038 F700                  		move.w	(v_screenposx).w,d0
0001C186 80FC 0018                  		divu.w	#$18,d0
0001C18A D0C0                       		adda.w	d0,a0
0001C18C 49F8 8000                  		lea	($FFFF8000).w,a4
0001C190 3E3C 000F                  		move.w	#$F,d7
0001C194                            
0001C194                            loc_1B20C:
0001C194 3C3C 000F                  		move.w	#$F,d6
0001C198                            
0001C198                            loc_1B210:
0001C198 7000                       		moveq	#0,d0
0001C19A 1018                       		move.b	(a0)+,d0
0001C19C 6700                       		beq.s	loc_1B268
0001C19E 0C00 004E                  		cmpi.b	#$4E,d0
0001C1A2 6200                       		bhi.s	loc_1B268
0001C1A4 3614                       		move.w	(a4),d3
0001C1A6 0643 0120                  		addi.w	#$120,d3
0001C1AA 0C43 0070                  		cmpi.w	#$70,d3
0001C1AE 6500                       		blo.s	loc_1B268
0001C1B0 0C43 01D0                  		cmpi.w	#$1D0,d3
0001C1B4 6400                       		bhs.s	loc_1B268
0001C1B6 342C 0002                  		move.w	2(a4),d2
0001C1BA 0642 00F0                  		addi.w	#$F0,d2
0001C1BE 0C42 0070                  		cmpi.w	#$70,d2
0001C1C2 6500                       		blo.s	loc_1B268
0001C1C4 0C42 0170                  		cmpi.w	#$170,d2
0001C1C8 6400                       		bhs.s	loc_1B268
0001C1CA 4BF9 00FF 4000             		lea	($FF4000).l,a5
0001C1D0 E748                       		lsl.w	#3,d0
0001C1D2 4BF5 0000                  		lea	(a5,d0.w),a5
0001C1D6 225D                       		movea.l	(a5)+,a1
0001C1D8 321D                       		move.w	(a5)+,d1
0001C1DA D241                       		add.w	d1,d1
0001C1DC D2F1 1000                  		adda.w	(a1,d1.w),a1
0001C1E0 365D                       		movea.w	(a5)+,a3
0001C1E2 7200                       		moveq	#0,d1
0001C1E4 1219                       		move.b	(a1)+,d1
0001C1E6 5301                       		subq.b	#1,d1
0001C1E8 6B00                       		bmi.s	loc_1B268
0001C1EA 4EB9 0000 E586             		jsr	(BuildSpr_Normal).l
0001C1F0                            
0001C1F0                            loc_1B268:
0001C1F0 584C                       		addq.w	#4,a4
0001C1F2 51CE FFA4                  		dbf	d6,loc_1B210
0001C1F6                            
0001C1F6 41E8 0070                  		lea	$70(a0),a0
0001C1FA 51CF FF98                  		dbf	d7,loc_1B20C
0001C1FE                            
0001C1FE 11C5 F62C                  		move.b	d5,(v_spritecount).w
0001C202 0C05 0050                  		cmpi.b	#$50,d5
0001C206 6700                       		beq.s	loc_1B288
0001C208 24BC 0000 0000             		move.l	#0,(a2)
0001C20E 4E75                       		rts	
0001C210                            ; ===========================================================================
0001C210                            
0001C210                            loc_1B288:
0001C210 157C 0000 FFFB             		move.b	#0,-5(a2)
0001C216 4E75                       		rts	
0001C218                            ; End of function SS_ShowLayout
0001C218                            
0001C218                            ; ---------------------------------------------------------------------------
0001C218                            ; Subroutine to	animate	walls and rings	in the special stage
0001C218                            ; ---------------------------------------------------------------------------
0001C218                            
0001C218                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001C218                            
0001C218                            
0001C218                            SS_AniWallsRings:
0001C218 43F9 00FF 400C             		lea	($FF400C).l,a1
0001C21E 7000                       		moveq	#0,d0
0001C220 1038 F780                  		move.b	(v_ssangle).w,d0
0001C224 E408                       		lsr.b	#2,d0
0001C226 0240 000F                  		andi.w	#$F,d0
0001C22A 7223                       		moveq	#$23,d1
0001C22C                            
0001C22C                            loc_1B2A4:
0001C22C 3280                       		move.w	d0,(a1)
0001C22E 5049                       		addq.w	#8,a1
0001C230 51C9 FFFA                  		dbf	d1,loc_1B2A4
0001C234                            
0001C234 43F9 00FF 4005             		lea	($FF4005).l,a1
0001C23A 5338 FEC2                  		subq.b	#1,(v_ani1_time).w
0001C23E 6A00                       		bpl.s	loc_1B2C8
0001C240 11FC 0007 FEC2             		move.b	#7,(v_ani1_time).w
0001C246 5238 FEC3                  		addq.b	#1,(v_ani1_frame).w
0001C24A 0238 0003 FEC3             		andi.b	#3,(v_ani1_frame).w
0001C250                            
0001C250                            loc_1B2C8:
0001C250 1378 FEC3 01D0             		move.b	(v_ani1_frame).w,$1D0(a1)
0001C256 5338 FEC4                  		subq.b	#1,(v_ani2_time).w
0001C25A 6A00                       		bpl.s	loc_1B2E4
0001C25C 11FC 0007 FEC4             		move.b	#7,(v_ani2_time).w
0001C262 5238 FEC5                  		addq.b	#1,(v_ani2_frame).w
0001C266 0238 0001 FEC5             		andi.b	#1,(v_ani2_frame).w
0001C26C                            
0001C26C                            loc_1B2E4:
0001C26C 1038 FEC5                  		move.b	(v_ani2_frame).w,d0
0001C270 1340 0138                  		move.b	d0,$138(a1)
0001C274 1340 0160                  		move.b	d0,$160(a1)
0001C278 1340 0148                  		move.b	d0,$148(a1)
0001C27C 1340 0150                  		move.b	d0,$150(a1)
0001C280 1340 01D8                  		move.b	d0,$1D8(a1)
0001C284 1340 01E0                  		move.b	d0,$1E0(a1)
0001C288 1340 01E8                  		move.b	d0,$1E8(a1)
0001C28C 1340 01F0                  		move.b	d0,$1F0(a1)
0001C290 1340 01F8                  		move.b	d0,$1F8(a1)
0001C294 1340 0200                  		move.b	d0,$200(a1)
0001C298 5338 FEC6                  		subq.b	#1,(v_ani3_time).w
0001C29C 6A00                       		bpl.s	loc_1B326
0001C29E 11FC 0004 FEC6             		move.b	#4,(v_ani3_time).w
0001C2A4 5238 FEC7                  		addq.b	#1,(v_ani3_frame).w
0001C2A8 0238 0003 FEC7             		andi.b	#3,(v_ani3_frame).w
0001C2AE                            
0001C2AE                            loc_1B326:
0001C2AE 1038 FEC7                  		move.b	(v_ani3_frame).w,d0
0001C2B2 1340 0168                  		move.b	d0,$168(a1)
0001C2B6 1340 0170                  		move.b	d0,$170(a1)
0001C2BA 1340 0178                  		move.b	d0,$178(a1)
0001C2BE 1340 0180                  		move.b	d0,$180(a1)
0001C2C2 5338 FEC0                  		subq.b	#1,(v_ani0_time).w
0001C2C6 6A00                       		bpl.s	loc_1B350
0001C2C8 11FC 0007 FEC0             		move.b	#7,(v_ani0_time).w
0001C2CE 5338 FEC1                  		subq.b	#1,(v_ani0_frame).w
0001C2D2 0238 0007 FEC1             		andi.b	#7,(v_ani0_frame).w
0001C2D8                            
0001C2D8                            loc_1B350:
0001C2D8 43F9 00FF 4016             		lea	($FF4016).l,a1
0001C2DE 41F9 0000 0000             		lea	(SS_WaRiVramSet).l,a0
0001C2E4 7000                       		moveq	#0,d0
0001C2E6 1038 FEC1                  		move.b	(v_ani0_frame).w,d0
0001C2EA D040                       		add.w	d0,d0
0001C2EC 41F0 0000                  		lea	(a0,d0.w),a0
0001C2F0 3290                       		move.w	(a0),(a1)
0001C2F2 3368 0002 0008             		move.w	2(a0),8(a1)
0001C2F8 3368 0004 0010             		move.w	4(a0),$10(a1)
0001C2FE 3368 0006 0018             		move.w	6(a0),$18(a1)
0001C304 3368 0008 0020             		move.w	8(a0),$20(a1)
0001C30A 3368 000A 0028             		move.w	$A(a0),$28(a1)
0001C310 3368 000C 0030             		move.w	$C(a0),$30(a1)
0001C316 3368 000E 0038             		move.w	$E(a0),$38(a1)
0001C31C D0FC 0020                  		adda.w	#$20,a0
0001C320 D2FC 0048                  		adda.w	#$48,a1
0001C324 3290                       		move.w	(a0),(a1)
0001C326 3368 0002 0008             		move.w	2(a0),8(a1)
0001C32C 3368 0004 0010             		move.w	4(a0),$10(a1)
0001C332 3368 0006 0018             		move.w	6(a0),$18(a1)
0001C338 3368 0008 0020             		move.w	8(a0),$20(a1)
0001C33E 3368 000A 0028             		move.w	$A(a0),$28(a1)
0001C344 3368 000C 0030             		move.w	$C(a0),$30(a1)
0001C34A 3368 000E 0038             		move.w	$E(a0),$38(a1)
0001C350 D0FC 0020                  		adda.w	#$20,a0
0001C354 D2FC 0048                  		adda.w	#$48,a1
0001C358 3290                       		move.w	(a0),(a1)
0001C35A 3368 0002 0008             		move.w	2(a0),8(a1)
0001C360 3368 0004 0010             		move.w	4(a0),$10(a1)
0001C366 3368 0006 0018             		move.w	6(a0),$18(a1)
0001C36C 3368 0008 0020             		move.w	8(a0),$20(a1)
0001C372 3368 000A 0028             		move.w	$A(a0),$28(a1)
0001C378 3368 000C 0030             		move.w	$C(a0),$30(a1)
0001C37E 3368 000E 0038             		move.w	$E(a0),$38(a1)
0001C384 D0FC 0020                  		adda.w	#$20,a0
0001C388 D2FC 0048                  		adda.w	#$48,a1
0001C38C 3290                       		move.w	(a0),(a1)
0001C38E 3368 0002 0008             		move.w	2(a0),8(a1)
0001C394 3368 0004 0010             		move.w	4(a0),$10(a1)
0001C39A 3368 0006 0018             		move.w	6(a0),$18(a1)
0001C3A0 3368 0008 0020             		move.w	8(a0),$20(a1)
0001C3A6 3368 000A 0028             		move.w	$A(a0),$28(a1)
0001C3AC 3368 000C 0030             		move.w	$C(a0),$30(a1)
0001C3B2 3368 000E 0038             		move.w	$E(a0),$38(a1)
0001C3B8 D0FC 0020                  		adda.w	#$20,a0
0001C3BC D2FC 0048                  		adda.w	#$48,a1
0001C3C0 4E75                       		rts	
0001C3C2                            ; End of function SS_AniWallsRings
0001C3C2                            
0001C3C2                            ; ===========================================================================
0001C3C2 0142 2142 0142 0142 0142+  SS_WaRiVramSet:    dc.w $142,$2142, $142, $142, $142, $142, $142, $2142
0001C3D2 0142 2142 0142 0142 0142+          dc.w $142, $2142, $142, $142, $142, $142, $142,$2142
0001C3E2 2142 0142 2142 2142 2142+          dc.w $2142, $142, $2142, $2142,    $2142, $2142, $2142, $142
0001C3F2 2142 0142 2142 2142 2142+          dc.w $2142, $142, $2142, $2142,    $2142, $2142, $2142, $142
0001C402 4142 2142 4142 4142 4142+          dc.w $4142, $2142, $4142, $4142, $4142,    $4142, $4142, $2142
0001C412 4142 2142 4142 4142 4142+          dc.w $4142, $2142, $4142, $4142, $4142,    $4142, $4142, $2142
0001C422 6142 4142 6142 6142 6142+          dc.w $6142, $4142, $6142, $6142, $6142,    $6142, $6142, $4142
0001C432 6142 4142 6142 6142 6142+          dc.w $6142, $4142, $6142, $6142, $6142,    $6142, $6142, $4142
0001C442                            ; ---------------------------------------------------------------------------
0001C442                            ; Subroutine to	remove items when you collect them in the special stage
0001C442                            ; ---------------------------------------------------------------------------
0001C442                            
0001C442                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001C442                            
0001C442                            
0001C442                            SS_RemoveCollectedItem:
0001C442 45F9 00FF 4400             		lea	($FF4400).l,a2
0001C448 303C 001F                  		move.w	#$1F,d0
0001C44C                            
0001C44C                            loc_1B4C4:
0001C44C 4A12                       		tst.b	(a2)
0001C44E 6700                       		beq.s	locret_1B4CE
0001C450 504A                       		addq.w	#8,a2
0001C452 51C8 FFF8                  		dbf	d0,loc_1B4C4
0001C456                            
0001C456                            locret_1B4CE:
0001C456 4E75                       		rts	
0001C458                            ; End of function SS_RemoveCollectedItem
0001C458                            
0001C458                            ; ---------------------------------------------------------------------------
0001C458                            ; Subroutine to	animate	special	stage items when you touch them
0001C458                            ; ---------------------------------------------------------------------------
0001C458                            
0001C458                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001C458                            
0001C458                            
0001C458                            SS_AniItems:
0001C458 41F9 00FF 4400             		lea	($FF4400).l,a0
0001C45E 3E3C 001F                  		move.w	#$1F,d7
0001C462                            
0001C462                            loc_1B4DA:
0001C462 7000                       		moveq	#0,d0
0001C464 1010                       		move.b	(a0),d0
0001C466 6700                       		beq.s	loc_1B4E8
0001C468 E548                       		lsl.w	#2,d0
0001C46A 227B 0000                  		movea.l	SS_AniIndex-4(pc,d0.w),a1
0001C46E 4E91                       		jsr	(a1)
0001C470                            
0001C470                            loc_1B4E8:
0001C470 5048                       		addq.w	#8,a0
0001C472                            
0001C472                            loc_1B4EA:
0001C472 51CF FFEE                  		dbf	d7,loc_1B4DA
0001C476                            
0001C476 4E75                       		rts	
0001C478                            ; End of function SS_AniItems
0001C478                            
0001C478                            ; ===========================================================================
0001C478 0000 0000                  SS_AniIndex:	dc.l SS_AniRingSparks
0001C47C 0000 0000                  		dc.l SS_AniBumper
0001C480 0000 0000                  		dc.l SS_Ani1Up
0001C484 0000 0000                  		dc.l SS_AniReverse
0001C488 0000 0000                  		dc.l SS_AniEmeraldSparks
0001C48C 0000 0000                  		dc.l SS_AniGlassBlock
0001C490                            ; ===========================================================================
0001C490                            
0001C490                            SS_AniRingSparks:
0001C490 5328 0002                  		subq.b	#1,2(a0)
0001C494 6A00                       		bpl.s	locret_1B530
0001C496 117C 0005 0002             		move.b	#5,2(a0)
0001C49C 7000                       		moveq	#0,d0
0001C49E 1028 0003                  		move.b	3(a0),d0
0001C4A2 5228 0003                  		addq.b	#1,3(a0)
0001C4A6 2268 0004                  		movea.l	4(a0),a1
0001C4AA 103B 0000                  		move.b	SS_AniRingData(pc,d0.w),d0
0001C4AE 1280                       		move.b	d0,(a1)
0001C4B0 6600                       		bne.s	locret_1B530
0001C4B2 4290                       		clr.l	(a0)
0001C4B4 42A8 0004                  		clr.l	4(a0)
0001C4B8                            
0001C4B8                            locret_1B530:
0001C4B8 4E75                       		rts	
0001C4BA                            ; ===========================================================================
0001C4BA 4243 4445 0000             SS_AniRingData:	dc.b $42, $43, $44, $45, 0, 0
0001C4C0                            ; ===========================================================================
0001C4C0                            
0001C4C0                            SS_AniBumper:
0001C4C0 5328 0002                  		subq.b	#1,2(a0)
0001C4C4 6A00                       		bpl.s	locret_1B566
0001C4C6 117C 0007 0002             		move.b	#7,2(a0)
0001C4CC 7000                       		moveq	#0,d0
0001C4CE 1028 0003                  		move.b	3(a0),d0
0001C4D2 5228 0003                  		addq.b	#1,3(a0)
0001C4D6 2268 0004                  		movea.l	4(a0),a1
0001C4DA 103B 0000                  		move.b	SS_AniBumpData(pc,d0.w),d0
0001C4DE 6600                       		bne.s	loc_1B564
0001C4E0 4290                       		clr.l	(a0)
0001C4E2 42A8 0004                  		clr.l	4(a0)
0001C4E6 12BC 0025                  		move.b	#$25,(a1)
0001C4EA 4E75                       		rts	
0001C4EC                            ; ===========================================================================
0001C4EC                            
0001C4EC                            loc_1B564:
0001C4EC 1280                       		move.b	d0,(a1)
0001C4EE                            
0001C4EE                            locret_1B566:
0001C4EE 4E75                       		rts	
0001C4F0                            ; ===========================================================================
0001C4F0 3233 3233 0000             SS_AniBumpData:	dc.b $32, $33, $32, $33, 0, 0
0001C4F6                            ; ===========================================================================
0001C4F6                            
0001C4F6                            SS_Ani1Up:
0001C4F6 5328 0002                  		subq.b	#1,2(a0)
0001C4FA 6A00                       		bpl.s	locret_1B596
0001C4FC 117C 0005 0002             		move.b	#5,2(a0)
0001C502 7000                       		moveq	#0,d0
0001C504 1028 0003                  		move.b	3(a0),d0
0001C508 5228 0003                  		addq.b	#1,3(a0)
0001C50C 2268 0004                  		movea.l	4(a0),a1
0001C510 103B 0000                  		move.b	SS_Ani1UpData(pc,d0.w),d0
0001C514 1280                       		move.b	d0,(a1)
0001C516 6600                       		bne.s	locret_1B596
0001C518 4290                       		clr.l	(a0)
0001C51A 42A8 0004                  		clr.l	4(a0)
0001C51E                            
0001C51E                            locret_1B596:
0001C51E 4E75                       		rts	
0001C520                            ; ===========================================================================
0001C520 4647 4849 0000             SS_Ani1UpData:	dc.b $46, $47, $48, $49, 0, 0
0001C526                            ; ===========================================================================
0001C526                            
0001C526                            SS_AniReverse:
0001C526 5328 0002                  		subq.b	#1,2(a0)
0001C52A 6A00                       		bpl.s	locret_1B5CC
0001C52C 117C 0007 0002             		move.b	#7,2(a0)
0001C532 7000                       		moveq	#0,d0
0001C534 1028 0003                  		move.b	3(a0),d0
0001C538 5228 0003                  		addq.b	#1,3(a0)
0001C53C 2268 0004                  		movea.l	4(a0),a1
0001C540 103B 0000                  		move.b	SS_AniRevData(pc,d0.w),d0
0001C544 6600                       		bne.s	loc_1B5CA
0001C546 4290                       		clr.l	(a0)
0001C548 42A8 0004                  		clr.l	4(a0)
0001C54C 12BC 002B                  		move.b	#$2B,(a1)
0001C550 4E75                       		rts	
0001C552                            ; ===========================================================================
0001C552                            
0001C552                            loc_1B5CA:
0001C552 1280                       		move.b	d0,(a1)
0001C554                            
0001C554                            locret_1B5CC:
0001C554 4E75                       		rts	
0001C556                            ; ===========================================================================
0001C556 2B31 2B31 0000             SS_AniRevData:	dc.b $2B, $31, $2B, $31, 0, 0
0001C55C                            ; ===========================================================================
0001C55C                            
0001C55C                            SS_AniEmeraldSparks:
0001C55C 5328 0002                  		subq.b	#1,2(a0)
0001C560 6A00                       		bpl.s	locret_1B60C
0001C562 117C 0005 0002             		move.b	#5,2(a0)
0001C568 7000                       		moveq	#0,d0
0001C56A 1028 0003                  		move.b	3(a0),d0
0001C56E 5228 0003                  		addq.b	#1,3(a0)
0001C572 2268 0004                  		movea.l	4(a0),a1
0001C576 103B 0000                  		move.b	SS_AniEmerData(pc,d0.w),d0
0001C57A 1280                       		move.b	d0,(a1)
0001C57C 6600                       		bne.s	locret_1B60C
0001C57E 4290                       		clr.l	(a0)
0001C580 42A8 0004                  		clr.l	4(a0)
0001C584 11FC 0004 D024             		move.b	#4,($FFFFD024).w
0001C594                            
0001C594                            locret_1B60C:
0001C594 4E75                       		rts	
0001C596                            ; ===========================================================================
0001C596 4647 4849 0000             SS_AniEmerData:	dc.b $46, $47, $48, $49, 0, 0
0001C59C                            ; ===========================================================================
0001C59C                            
0001C59C                            SS_AniGlassBlock:
0001C59C 5328 0002                  		subq.b	#1,2(a0)
0001C5A0 6A00                       		bpl.s	locret_1B640
0001C5A2 117C 0001 0002             		move.b	#1,2(a0)
0001C5A8 7000                       		moveq	#0,d0
0001C5AA 1028 0003                  		move.b	3(a0),d0
0001C5AE 5228 0003                  		addq.b	#1,3(a0)
0001C5B2 2268 0004                  		movea.l	4(a0),a1
0001C5B6 103B 0000                  		move.b	SS_AniGlassData(pc,d0.w),d0
0001C5BA 1280                       		move.b	d0,(a1)
0001C5BC 6600                       		bne.s	locret_1B640
0001C5BE 12A8 0004                  		move.b	4(a0),(a1)
0001C5C2 4290                       		clr.l	(a0)
0001C5C4 42A8 0004                  		clr.l	4(a0)
0001C5C8                            
0001C5C8                            locret_1B640:
0001C5C8 4E75                       		rts	
0001C5CA                            ; ===========================================================================
0001C5CA 4B4C 4D4E 4B4C 4D4E 0000   SS_AniGlassData:dc.b $4B, $4C, $4D, $4E, $4B, $4C, $4D,	$4E, 0,	0
0001C5D4                            
0001C5D4                            ; ---------------------------------------------------------------------------
0001C5D4                            ; Special stage	layout pointers
0001C5D4                            ; ---------------------------------------------------------------------------
0001C5D4                            SS_LayoutIndex:
0001C5D4 0000 0000                  		dc.l SS_1
0001C5D8 0000 0000                  		dc.l SS_2
0001C5DC 0000 0000                  		dc.l SS_3
0001C5E0 0000 0000                  		dc.l SS_4
0001C5E4 0000 0000                  		dc.l SS_5
0001C5E8 0000 0000                  		dc.l SS_6
0001C5EC                            		even
0001C5EC                            
0001C5EC                            ; ---------------------------------------------------------------------------
0001C5EC                            ; Special stage start locations
0001C5EC                            ; ---------------------------------------------------------------------------
0001C5EC                            SS_StartLoc:	include	"_inc\Start Location Array - Special Stages.asm"
0001C5EC                            ; ---------------------------------------------------------------------------
0001C5EC                            ; Special stage start locations
0001C5EC                            ; ---------------------------------------------------------------------------
0001C5EC                            
0001C5EC                            		incbin	"startpos\ss1.bin"
0001C5F0                            		incbin	"startpos\ss2.bin"
0001C5F4                            		incbin	"startpos\ss3.bin"
0001C5F8                            		incbin	"startpos\ss4.bin"
0001C5FC                            		incbin	"startpos\ss5.bin"
0001C600                            		incbin	"startpos\ss6.bin"
0001C604                            		even
0001C604                            		even
0001C604                            
0001C604                            ; ---------------------------------------------------------------------------
0001C604                            ; Subroutine to	load special stage layout
0001C604                            ; ---------------------------------------------------------------------------
0001C604                            
0001C604                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001C604                            
0001C604                            
0001C604                            SS_Load:
0001C604 7000                       		moveq	#0,d0
0001C606 1038 FE16                  		move.b	(v_lastspecial).w,d0 ; load number of last special stage entered
0001C60A 5238 FE16                  		addq.b	#1,(v_lastspecial).w
0001C60E 0C38 0006 FE16             		cmpi.b	#6,(v_lastspecial).w
0001C614 6500                       		blo.s	SS_ChkEmldNum
0001C616 11FC 0000 FE16             		move.b	#0,(v_lastspecial).w ; reset if higher than 6
0001C61C                            
0001C61C                            SS_ChkEmldNum:
0001C61C 0C38 0006 FE57             		cmpi.b	#6,(v_emeralds).w ; do you have all emeralds?
0001C622 6700                       		beq.s	SS_LoadData	; if yes, branch
0001C624 7200                       		moveq	#0,d1
0001C626 1238 FE57                  		move.b	(v_emeralds).w,d1
0001C62A 5301                       		subq.b	#1,d1
0001C62C 6500                       		blo.s	SS_LoadData
0001C62E 47F8 FE58                  		lea	(v_emldlist).w,a3 ; check which emeralds you have
0001C632                            
0001C632                            SS_ChkEmldLoop:	
0001C632 B033 1000                  		cmp.b	(a3,d1.w),d0
0001C636 6600                       		bne.s	SS_ChkEmldRepeat
0001C638 60CA                       		bra.s	SS_Load
0001C63A                            ; ===========================================================================
0001C63A                            
0001C63A                            SS_ChkEmldRepeat:
0001C63A 51C9 FFF6                  		dbf	d1,SS_ChkEmldLoop
0001C63E                            
0001C63E                            SS_LoadData:
0001C63E E548                       		lsl.w	#2,d0
0001C640 43FB 00AA                  		lea	SS_StartLoc(pc,d0.w),a1
0001C644 31D9 D008                  		move.w	(a1)+,(v_player+obX).w
0001C648 31D9 D00C                  		move.w	(a1)+,(v_player+obY).w
0001C64C 207B 0086                  		movea.l	SS_LayoutIndex(pc,d0.w),a0
0001C650 43F9 00FF 4000             		lea	($FF4000).l,a1
0001C656 303C 0000                  		move.w	#0,d0
0001C65A 4EB9 0000 150C             		jsr	(EniDec).l
0001C660 43F9 00FF 0000             		lea	($FF0000).l,a1
0001C666 303C 0FFF                  		move.w	#$FFF,d0
0001C66A                            
0001C66A                            SS_ClrRAM3:
0001C66A 4299                       		clr.l	(a1)+
0001C66C 51C8 FFFC                  		dbf	d0,SS_ClrRAM3
0001C670                            
0001C670 43F9 00FF 1020             		lea	($FF1020).l,a1
0001C676 41F9 00FF 4000             		lea	($FF4000).l,a0
0001C67C 723F                       		moveq	#$3F,d1
0001C67E                            
0001C67E                            loc_1B6F6:
0001C67E 743F                       		moveq	#$3F,d2
0001C680                            
0001C680                            loc_1B6F8:
0001C680 12D8                       		move.b	(a0)+,(a1)+
0001C682 51CA FFFC                  		dbf	d2,loc_1B6F8
0001C686                            
0001C686 43E9 0040                  		lea	$40(a1),a1
0001C68A 51C9 FFF2                  		dbf	d1,loc_1B6F6
0001C68E                            
0001C68E 43F9 00FF 4008             		lea	($FF4008).l,a1
0001C694 41F9 0000 0000             		lea	(SS_MapIndex).l,a0
0001C69A 724D                       		moveq	#$4D,d1
0001C69C                            
0001C69C                            loc_1B714:
0001C69C 22D8                       		move.l	(a0)+,(a1)+
0001C69E 32FC 0000                  		move.w	#0,(a1)+
0001C6A2 1368 FFFC FFFF             		move.b	-4(a0),-1(a1)
0001C6A8 32D8                       		move.w	(a0)+,(a1)+
0001C6AA 51C9 FFF0                  		dbf	d1,loc_1B714
0001C6AE                            
0001C6AE 43F9 00FF 4400             		lea	($FF4400).l,a1
0001C6B4 323C 003F                  		move.w	#$3F,d1
0001C6B8                            
0001C6B8                            loc_1B730:
0001C6B8                            
0001C6B8 4299                       		clr.l	(a1)+
0001C6BA 51C9 FFFC                  		dbf	d1,loc_1B730
0001C6BE                            
0001C6BE 4E75                       		rts	
0001C6C0                            ; End of function SS_Load
0001C6C0                            
0001C6C0                            ; ===========================================================================
0001C6C0                            
0001C6C0                            SS_MapIndex:
0001C6C0                            		include	"_inc\Special Stage Mappings & VRAM Pointers.asm"
0001C6C0                            ; ---------------------------------------------------------------------------
0001C6C0                            ; Special stage	mappings and VRAM pointers
0001C6C0                            ; ---------------------------------------------------------------------------
0001C6C0 0000 0000                  	dc.l Map_SSWalls	; address of mappings
0001C6C4 0142                       	dc.w $142		; VRAM setting
0001C6C6 0000 0000                  	dc.l Map_SSWalls
0001C6CA 0142                       	dc.w $142
0001C6CC 0000 0000                  	dc.l Map_SSWalls
0001C6D0 0142                       	dc.w $142
0001C6D2 0000 0000                  	dc.l Map_SSWalls
0001C6D6 0142                       	dc.w $142
0001C6D8 0000 0000                  	dc.l Map_SSWalls
0001C6DC 0142                       	dc.w $142
0001C6DE 0000 0000                  	dc.l Map_SSWalls
0001C6E2 0142                       	dc.w $142
0001C6E4 0000 0000                  	dc.l Map_SSWalls
0001C6E8 0142                       	dc.w $142
0001C6EA 0000 0000                  	dc.l Map_SSWalls
0001C6EE 0142                       	dc.w $142
0001C6F0 0000 0000                  	dc.l Map_SSWalls
0001C6F4 0142                       	dc.w $142
0001C6F6 0000 0000                  	dc.l Map_SSWalls
0001C6FA 2142                       	dc.w $2142
0001C6FC 0000 0000                  	dc.l Map_SSWalls
0001C700 2142                       	dc.w $2142
0001C702 0000 0000                  	dc.l Map_SSWalls
0001C706 2142                       	dc.w $2142
0001C708 0000 0000                  	dc.l Map_SSWalls
0001C70C 2142                       	dc.w $2142
0001C70E 0000 0000                  	dc.l Map_SSWalls
0001C712 2142                       	dc.w $2142
0001C714 0000 0000                  	dc.l Map_SSWalls
0001C718 2142                       	dc.w $2142
0001C71A 0000 0000                  	dc.l Map_SSWalls
0001C71E 2142                       	dc.w $2142
0001C720 0000 0000                  	dc.l Map_SSWalls
0001C724 2142                       	dc.w $2142
0001C726 0000 0000                  	dc.l Map_SSWalls
0001C72A 2142                       	dc.w $2142
0001C72C 0000 0000                  	dc.l Map_SSWalls
0001C730 4142                       	dc.w $4142
0001C732 0000 0000                  	dc.l Map_SSWalls
0001C736 4142                       	dc.w $4142
0001C738 0000 0000                  	dc.l Map_SSWalls
0001C73C 4142                       	dc.w $4142
0001C73E 0000 0000                  	dc.l Map_SSWalls
0001C742 4142                       	dc.w $4142
0001C744 0000 0000                  	dc.l Map_SSWalls
0001C748 4142                       	dc.w $4142
0001C74A 0000 0000                  	dc.l Map_SSWalls
0001C74E 4142                       	dc.w $4142
0001C750 0000 0000                  	dc.l Map_SSWalls
0001C754 4142                       	dc.w $4142
0001C756 0000 0000                  	dc.l Map_SSWalls
0001C75A 4142                       	dc.w $4142
0001C75C 0000 0000                  	dc.l Map_SSWalls
0001C760 4142                       	dc.w $4142
0001C762 0000 0000                  	dc.l Map_SSWalls
0001C766 6142                       	dc.w $6142
0001C768 0000 0000                  	dc.l Map_SSWalls
0001C76C 6142                       	dc.w $6142
0001C76E 0000 0000                  	dc.l Map_SSWalls
0001C772 6142                       	dc.w $6142
0001C774 0000 0000                  	dc.l Map_SSWalls
0001C778 6142                       	dc.w $6142
0001C77A 0000 0000                  	dc.l Map_SSWalls
0001C77E 6142                       	dc.w $6142
0001C780 0000 0000                  	dc.l Map_SSWalls
0001C784 6142                       	dc.w $6142
0001C786 0000 0000                  	dc.l Map_SSWalls
0001C78A 6142                       	dc.w $6142
0001C78C 0000 0000                  	dc.l Map_SSWalls
0001C790 6142                       	dc.w $6142
0001C792 0000 0000                  	dc.l Map_SSWalls
0001C796 6142                       	dc.w $6142
0001C798 0000 F8EC                  	dc.l Map_Bump
0001C79C 023B                       	dc.w $23B
0001C79E 0000 0000                  	dc.l Map_SS_GOAL ; goal
0001C7A2 0251                       	dc.w $251
0001C7A4 0000 0000                  	dc.l Map_SS_GOAL ; red goal
0001C7A8 025A                       	dc.w $25A
0001C7AA 0000 0000                  	dc.l Map_SS_R
0001C7AE 0370                       	dc.w $370
0001C7B0 0000 0000                  	dc.l Map_SS_Up
0001C7B4 0263                       	dc.w $263
0001C7B6 0000 0000                  	dc.l Map_SS_Down
0001C7BA 0263                       	dc.w $263
0001C7BC 0000 0000                  	dc.l Map_SS_R
0001C7C0 22F0                       	dc.w $22F0
0001C7C2 0000 0000                  	dc.l Map_SS_Glass
0001C7C6 0470                       	dc.w $470
0001C7C8 0000 0000                  	dc.l Map_SS_Glass
0001C7CC 05F0                       	dc.w $5F0
0001C7CE 0000 0000                  	dc.l Map_SS_Glass
0001C7D2 65F0                       	dc.w $65F0
0001C7D4 0000 0000                  	dc.l Map_SS_Glass
0001C7D8 25F0                       	dc.w $25F0
0001C7DA 0000 0000                  	dc.l Map_SS_Glass
0001C7DE 45F0                       	dc.w $45F0
0001C7E0 0000 0000                  	dc.l Map_SS_R
0001C7E4 02F0                       	dc.w $2F0
0001C7E6 0100 F8EC                  	dc.l Map_Bump+$1000000	; add frame no.	* $1000000
0001C7EA 023B                       	dc.w $23B
0001C7EC 0200 F8EC                  	dc.l Map_Bump+$2000000
0001C7F0 023B                       	dc.w $23B
0001C7F2 0000 0000                  	dc.l Map_SS_R
0001C7F6 0797                       	dc.w $797
0001C7F8 0000 0000                  	dc.l Map_SS_R
0001C7FC 07A0                       	dc.w $7A0
0001C7FE 0000 0000                  	dc.l Map_SS_R
0001C802 07A9                       	dc.w $7A9
0001C804 0000 0000                  	dc.l Map_SS_R
0001C808 0797                       	dc.w $797
0001C80A 0000 0000                  	dc.l Map_SS_R
0001C80E 07A0                       	dc.w $7A0
0001C810 0000 0000                  	dc.l Map_SS_R
0001C814 07A9                       	dc.w $7A9
0001C816 0000 A982                  	dc.l Map_Ring
0001C81A 27B2                       	dc.w $27B2
0001C81C 0000 0000                  	dc.l Map_SS_Chaos3
0001C820 0770                       	dc.w $770
0001C822 0000 0000                  	dc.l Map_SS_Chaos3
0001C826 2770                       	dc.w $2770
0001C828 0000 0000                  	dc.l Map_SS_Chaos3
0001C82C 4770                       	dc.w $4770
0001C82E 0000 0000                  	dc.l Map_SS_Chaos3
0001C832 6770                       	dc.w $6770
0001C834 0000 0000                  	dc.l Map_SS_Chaos1
0001C838 0770                       	dc.w $770
0001C83A 0000 0000                  	dc.l Map_SS_Chaos2
0001C83E 0770                       	dc.w $770
0001C840 0000 0000                  	dc.l Map_SS_R
0001C844 04F0                       	dc.w $4F0
0001C846 0400 A982                  	dc.l Map_Ring+$4000000
0001C84A 27B2                       	dc.w $27B2
0001C84C 0500 A982                  	dc.l Map_Ring+$5000000
0001C850 27B2                       	dc.w $27B2
0001C852 0600 A982                  	dc.l Map_Ring+$6000000
0001C856 27B2                       	dc.w $27B2
0001C858 0700 A982                  	dc.l Map_Ring+$7000000
0001C85C 27B2                       	dc.w $27B2
0001C85E 0000 0000                  	dc.l Map_SS_Glass
0001C862 23F0                       	dc.w $23F0
0001C864 0000 0000                  	dc.l Map_SS_Glass+$1000000
0001C868 23F0                       	dc.w $23F0
0001C86A 0000 0000                  	dc.l Map_SS_Glass+$2000000
0001C86E 23F0                       	dc.w $23F0
0001C870 0000 0000                  	dc.l Map_SS_Glass+$3000000
0001C874 23F0                       	dc.w $23F0
0001C876 0000 0000                  	dc.l Map_SS_R+$2000000
0001C87A 04F0                       	dc.w $4F0
0001C87C 0000 0000                  	dc.l Map_SS_Glass
0001C880 05F0                       	dc.w $5F0
0001C882 0000 0000                  	dc.l Map_SS_Glass
0001C886 65F0                       	dc.w $65F0
0001C888 0000 0000                  	dc.l Map_SS_Glass
0001C88C 25F0                       	dc.w $25F0
0001C88E 0000 0000                  	dc.l Map_SS_Glass
0001C892 45F0                       	dc.w $45F0
0001C892 45F0                       	dc.w $45F0
0001C894                            
0001C894                            Map_SS_R:	include	"_maps\SS R Block.asm"
0001C894                            ; ---------------------------------------------------------------------------
0001C894                            ; Sprite mappings - special stage "R" block
0001C894                            ; ---------------------------------------------------------------------------
0001C894                            Map_SS_R_internal:
0001C894 0000                       		dc.w byte_1B912-Map_SS_R_internal
0001C896 0000                       		dc.w byte_1B918-Map_SS_R_internal
0001C898 0000                       		dc.w byte_1B91E-Map_SS_R_internal
0001C89A 01                         byte_1B912:	dc.b 1
0001C89B F40A 0000 F4               		dc.b $F4, $A, 0, 0, $F4
0001C8A0 01                         byte_1B918:	dc.b 1
0001C8A1 F40A 0009 F4               		dc.b $F4, $A, 0, 9, $F4
0001C8A6 00                         byte_1B91E:	dc.b 0
0001C8A8 00                         		even
0001C8A8 00                         		even
0001C8A8                            Map_SS_Glass:	include	"_maps\SS Glass Block.asm"
0001C8A8                            ; ---------------------------------------------------------------------------
0001C8A8                            ; Sprite mappings - special stage breakable glass blocks and red-white blocks
0001C8A8                            ; ---------------------------------------------------------------------------
0001C8A8                            Map_SS_Glass_internal:
0001C8A8 0000                       		dc.w byte_1B928-Map_SS_Glass_internal
0001C8AA 0000                       		dc.w byte_1B92E-Map_SS_Glass_internal
0001C8AC 0000                       		dc.w byte_1B934-Map_SS_Glass_internal
0001C8AE 0000                       		dc.w byte_1B93A-Map_SS_Glass_internal
0001C8B0 01                         byte_1B928:	dc.b 1
0001C8B1 F40A 0000 F4               		dc.b $F4, $A, 0, 0, $F4
0001C8B6 01                         byte_1B92E:	dc.b 1
0001C8B7 F40A 0800 F4               		dc.b $F4, $A, 8, 0, $F4
0001C8BC 01                         byte_1B934:	dc.b 1
0001C8BD F40A 1800 F4               		dc.b $F4, $A, $18, 0, $F4
0001C8C2 01                         byte_1B93A:	dc.b 1
0001C8C3 F40A 1000 F4               		dc.b $F4, $A, $10, 0, $F4
0001C8C8                            		even
0001C8C8                            		even
0001C8C8                            Map_SS_Up:	include	"_maps\SS UP Block.asm"
0001C8C8                            ; ---------------------------------------------------------------------------
0001C8C8                            ; Sprite mappings - special stage "UP" block
0001C8C8                            ; ---------------------------------------------------------------------------
0001C8C8                            Map_SS_Up_internal:
0001C8C8 0000                       		dc.w byte_1B944-Map_SS_Up_internal
0001C8CA 0000                       		dc.w byte_1B94A-Map_SS_Up_internal
0001C8CC 01                         byte_1B944:	dc.b 1
0001C8CD F40A 0000 F4               		dc.b $F4, $A, 0, 0, $F4
0001C8D2 01                         byte_1B94A:	dc.b 1
0001C8D3 F40A 0012 F4               		dc.b $F4, $A, 0, $12, $F4
0001C8D8                            		even
0001C8D8                            		even
0001C8D8                            Map_SS_Down:	include	"_maps\SS DOWN Block.asm"
0001C8D8                            ; ---------------------------------------------------------------------------
0001C8D8                            ; Sprite mappings - special stage "DOWN" block
0001C8D8                            ; ---------------------------------------------------------------------------
0001C8D8                            Map_SS_Down_internal:
0001C8D8 0000                       		dc.w byte_1B954-Map_SS_Down_internal
0001C8DA 0000                       		dc.w byte_1B95A-Map_SS_Down_internal
0001C8DC 01                         byte_1B954:	dc.b 1
0001C8DD F40A 0009 F4               		dc.b $F4, $A, 0, 9, $F4
0001C8E2 01                         byte_1B95A:	dc.b 1
0001C8E3 F40A 0012 F4               		dc.b $F4, $A, 0, $12, $F4
0001C8E8                            		even
0001C8E8                            		even
0001C8E8                            Map_SS_GOAL:	include	"_maps\SS GOAL Block.asm"
0001C8E8                            ; ================================================================================
0001C8E8                            ; Sprite Mappings - generated by Flex 2 Thu May 20 2021 22:44:15 GMT-0400 (Eastern Daylight Time)
0001C8E8                            ; ================================================================================
0001C8E8                            
0001C8E8                            DATA7FRT3Z56ERD:
0001C8E8 0000 0000                  	dc.w DATA7FRT3Z56ERD_0-DATA7FRT3Z56ERD, DATA7FRT3Z56ERD_1-DATA7FRT3Z56ERD
0001C8EC 0000                       	dc.w DATA7FRT3Z56ERD_2-DATA7FRT3Z56ERD
0001C8EE 01                         DATA7FRT3Z56ERD_0: dc.b $1
0001C8EF F40A 0000 F4               	dc.b $F4, $A, $0, $0, $F4
0001C8F4 01                         DATA7FRT3Z56ERD_1: dc.b $1
0001C8F5 F40A 2000 F4               	dc.b $F4, $A, $20, $0, $F4
0001C8FA 00                         DATA7FRT3Z56ERD_2: dc.b $0
0001C8FC 00                         	even
0001C8FC 00                         	even
0001C8FC                            		include	"_maps\SS Chaos Emeralds.asm"
0001C8FC                            ; ---------------------------------------------------------------------------
0001C8FC                            ; Sprite mappings - special stage chaos	emeralds
0001C8FC                            ; ---------------------------------------------------------------------------
0001C8FC 0000                       Map_SS_Chaos1:	dc.w byte_1B96C-Map_SS_Chaos1
0001C8FE 0000                       		dc.w byte_1B97E-Map_SS_Chaos1
0001C900 0000                       Map_SS_Chaos2:	dc.w byte_1B972-Map_SS_Chaos2
0001C902 0000                       		dc.w byte_1B97E-Map_SS_Chaos2
0001C904 0000                       Map_SS_Chaos3:	dc.w byte_1B978-Map_SS_Chaos3
0001C906 0000                       		dc.w byte_1B97E-Map_SS_Chaos3
0001C908 01                         byte_1B96C:	dc.b 1
0001C909 F805 0000 F8               		dc.b $F8, 5, 0,	0, $F8
0001C90E 01                         byte_1B972:	dc.b 1
0001C90F F805 0004 F8               		dc.b $F8, 5, 0,	4, $F8
0001C914 01                         byte_1B978:	dc.b 1
0001C915 F805 0008 F8               		dc.b $F8, 5, 0,	8, $F8
0001C91A 01                         byte_1B97E:	dc.b 1
0001C91B F805 000C F8               		dc.b $F8, 5, 0,	$C, $F8
0001C920                            		even
0001C920                            		even
0001C920                            
0001C920                            		include	"_incObj\02 Force Debug.asm"
0001C920                            ; ---------------------------------------------------------------------------
0001C920                            ; Object 02 - Forced Debug
0001C920                            ; ---------------------------------------------------------------------------
0001C920                            
0001C920                            ForceDebug:
0001C920 11FC 0001 FFFA             		move.b	#1,(f_debugmode).w ; enable debug mode
0001C926 4E75                       		rts	
0001C928                            
0001C928                            Hacker:
0001C928 11FC 0024 F600             		move.b	#$24,(v_gamemode).w ; crash
0001C92E 4E75                       		rts	
0001C92E 4E75                       		rts	
0001C930                            
0001C930                            		include	"_incObj\09 Sonic in Special Stage.asm"
0001C930                            ; ---------------------------------------------------------------------------
0001C930                            ; Object 09 - Sonic (special stage)
0001C930                            ; ---------------------------------------------------------------------------
0001C930                            
0001C930                            SonicSpecial:
0001C930 4A78 FE08                  		tst.w	(v_debuguse).w	; is debug mode	being used?
0001C934 6700                       		beq.s	Obj09_Normal	; if not, branch
0001C936 6100 0000                  		bsr.w	SS_FixCamera
0001C93A 6000 0000                  		bra.w	DebugMode
0001C93E                            ; ===========================================================================
0001C93E                            
0001C93E                            Obj09_Normal:
0001C93E 7000                       		moveq	#0,d0
0001C940 1028 0024                  		move.b	obRoutine(a0),d0
0001C944 323B 0000                  		move.w	Obj09_Index(pc,d0.w),d1
0001C948 4EFB 1000                  		jmp	Obj09_Index(pc,d1.w)
0001C94C                            ; ===========================================================================
0001C94C 0000                       Obj09_Index:	dc.w Obj09_Main-Obj09_Index
0001C94E 0000                       		dc.w Obj09_ChkDebug-Obj09_Index
0001C950 0000                       		dc.w Obj09_ExitStage-Obj09_Index
0001C952 0000                       		dc.w Obj09_Exit2-Obj09_Index
0001C954                            ; ===========================================================================
0001C954                            
0001C954                            Obj09_Main:	; Routine 0
0001C954 5428 0024                  		addq.b	#2,obRoutine(a0)
0001C958 117C 000E 0016             		move.b	#$E,obHeight(a0)
0001C95E 117C 0007 0017             		move.b	#7,obWidth(a0)
0001C964 217C 0000 0000 0004        		move.l	#Map_Sonic,obMap(a0)
0001C96C 317C 0780 0002             		move.w	#$780,obGfx(a0)
0001C972 117C 0004 0001             		move.b	#4,obRender(a0)
0001C978 117C 0000 0018             		move.b	#0,obPriority(a0)
0001C97E 117C 0002 001C             		move.b	#id_Roll,obAnim(a0)
0001C984 08E8 0002 0022             		bset	#2,obStatus(a0)
0001C98A 08E8 0001 0022             		bset	#1,obStatus(a0)
0001C990                            
0001C990                            Obj09_ChkDebug:	; Routine 2
0001C990 4A78 FFFA                  		tst.w	(f_debugmode).w	; is debug mode	cheat enabled?
0001C994 6700                       		beq.s	Obj09_NoDebug	; if not, branch
0001C996 0838 0004 F605             		btst	#bitB,(v_jpadpress1).w ; is button B pressed?
0001C99C 6700                       		beq.s	Obj09_NoDebug	; if not, branch
0001C99E 31FC 0001 FE08             		move.w	#1,(v_debuguse).w ; change Sonic into a ring
0001C9A4                            
0001C9A4                            Obj09_NoDebug:
0001C9A4 117C 0000 0030             		move.b	#0,$30(a0)
0001C9AA 7000                       		moveq	#0,d0
0001C9AC 1028 0022                  		move.b	obStatus(a0),d0
0001C9B0 0240 0002                  		andi.w	#2,d0
0001C9B4 323B 0000                  		move.w	Obj09_Modes(pc,d0.w),d1
0001C9B8 4EBB 1000                  		jsr	Obj09_Modes(pc,d1.w)
0001C9BC 4EB9 0001 4BDE             		jsr	(Sonic_LoadGfx).l
0001C9C2 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001C9C8                            ; ===========================================================================
0001C9C8 0000                       Obj09_Modes:	dc.w Obj09_OnWall-Obj09_Modes
0001C9CA 0000                       		dc.w Obj09_InAir-Obj09_Modes
0001C9CC                            ; ===========================================================================
0001C9CC                            
0001C9CC                            Obj09_OnWall:
0001C9CC 6100 0000                  		bsr.w	Obj09_Jump
0001C9D0 6100 0000                  		bsr.w	Obj09_Move
0001C9D4 6100 0000                  		bsr.w	Obj09_Fall
0001C9D8 6000                       		bra.s	Obj09_Display
0001C9DA                            ; ===========================================================================
0001C9DA                            
0001C9DA                            Obj09_InAir:
0001C9DA 6100 0000                  		bsr.w	nullsub_2
0001C9DE 6100 0000                  		bsr.w	Obj09_Move
0001C9E2 6100 0000                  		bsr.w	Obj09_Fall
0001C9E6                            
0001C9E6                            Obj09_Display:
0001C9E6 6100 0000                  		bsr.w	Obj09_ChkItems
0001C9EA 6100 0000                  		bsr.w	Obj09_ChkItems2
0001C9EE 4EB9 0000 E402             		jsr	(SpeedToPos).l
0001C9F4 6100 0000                  		bsr.w	SS_FixCamera
0001C9F8 3038 F780                  		move.w	(v_ssangle).w,d0
0001C9FC D078 F782                  		add.w	(v_ssrotate).w,d0
0001CA00 31C0 F780                  		move.w	d0,(v_ssangle).w
0001CA04 4EB9 0001 48D2             		jsr	(Sonic_Animate).l
0001CA0A 4E75                       		rts	
0001CA0C                            
0001CA0C                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001CA0C                            
0001CA0C                            
0001CA0C                            Obj09_Move:
0001CA0C 0838 0002 F602             		btst	#bitL,(v_jpadhold2).w ; is left being pressed?
0001CA12 6700                       		beq.s	Obj09_ChkRight	; if not, branch
0001CA14 6100 0000                  		bsr.w	Obj09_MoveLeft
0001CA18                            
0001CA18                            Obj09_ChkRight:
0001CA18 0838 0003 F602             		btst	#bitR,(v_jpadhold2).w ; is right being pressed?
0001CA1E 6700                       		beq.s	loc_1BA78	; if not, branch
0001CA20 6100 0000                  		bsr.w	Obj09_MoveRight
0001CA24                            
0001CA24                            loc_1BA78:
0001CA24 1038 F602                  		move.b	(v_jpadhold2).w,d0
0001CA28 0200 000C                  		andi.b	#btnL+btnR,d0
0001CA2C 6600                       		bne.s	loc_1BAA8
0001CA2E 3028 0014                  		move.w	obInertia(a0),d0
0001CA32 6700                       		beq.s	loc_1BAA8
0001CA34 6B00                       		bmi.s	loc_1BA9A
0001CA36 0440 000C                  		subi.w	#$C,d0
0001CA3A 6400                       		bcc.s	loc_1BA94
0001CA3C 303C 0000                  		move.w	#0,d0
0001CA40                            
0001CA40                            loc_1BA94:
0001CA40 3140 0014                  		move.w	d0,obInertia(a0)
0001CA44 6000                       		bra.s	loc_1BAA8
0001CA46                            ; ===========================================================================
0001CA46                            
0001CA46                            loc_1BA9A:
0001CA46 0640 000C                  		addi.w	#$C,d0
0001CA4A 6400                       		bcc.s	loc_1BAA4
0001CA4C 303C 0000                  		move.w	#0,d0
0001CA50                            
0001CA50                            loc_1BAA4:
0001CA50 3140 0014                  		move.w	d0,obInertia(a0)
0001CA54                            
0001CA54                            loc_1BAA8:
0001CA54 1038 F780                  		move.b	(v_ssangle).w,d0
0001CA58 0600 0020                  		addi.b	#$20,d0
0001CA5C 0200 00C0                  		andi.b	#$C0,d0
0001CA60 4400                       		neg.b	d0
0001CA62 4EB9 0000 27EC             		jsr	(CalcSine).l
0001CA68 C3E8 0014                  		muls.w	obInertia(a0),d1
0001CA6C D3A8 0008                  		add.l	d1,obX(a0)
0001CA70 C1E8 0014                  		muls.w	obInertia(a0),d0
0001CA74 D1A8 000C                  		add.l	d0,obY(a0)
0001CA78 48E7 C000                  		movem.l	d0-d1,-(sp)
0001CA7C 2428 000C                  		move.l	obY(a0),d2
0001CA80 2628 0008                  		move.l	obX(a0),d3
0001CA84 6100 0000                  		bsr.w	sub_1BCE8
0001CA88 6700                       		beq.s	loc_1BAF2
0001CA8A 4CDF 0003                  		movem.l	(sp)+,d0-d1
0001CA8E 93A8 0008                  		sub.l	d1,obX(a0)
0001CA92 91A8 000C                  		sub.l	d0,obY(a0)
0001CA96 317C 0000 0014             		move.w	#0,obInertia(a0)
0001CA9C 4E75                       		rts	
0001CA9E                            ; ===========================================================================
0001CA9E                            
0001CA9E                            loc_1BAF2:
0001CA9E 4CDF 0003                  		movem.l	(sp)+,d0-d1
0001CAA2 4E75                       		rts	
0001CAA4                            ; End of function Obj09_Move
0001CAA4                            
0001CAA4                            
0001CAA4                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001CAA4                            
0001CAA4                            
0001CAA4                            Obj09_MoveLeft:
0001CAA4 08E8 0000 0022             		bset	#0,obStatus(a0)
0001CAAA 3028 0014                  		move.w	obInertia(a0),d0
0001CAAE 6700                       		beq.s	loc_1BB06
0001CAB0 6A00                       		bpl.s	loc_1BB1A
0001CAB2                            
0001CAB2                            loc_1BB06:
0001CAB2 0440 000C                  		subi.w	#$C,d0
0001CAB6 0C40 F800                  		cmpi.w	#-$800,d0
0001CABA 6E00                       		bgt.s	loc_1BB14
0001CABC 303C F800                  		move.w	#-$800,d0
0001CAC0                            
0001CAC0                            loc_1BB14:
0001CAC0 3140 0014                  		move.w	d0,obInertia(a0)
0001CAC4 4E75                       		rts	
0001CAC6                            ; ===========================================================================
0001CAC6                            
0001CAC6                            loc_1BB1A:
0001CAC6 0440 0040                  		subi.w	#$40,d0
0001CACA 6400                       		bcc.s	loc_1BB22
0001CACC 4E71                       		nop	
0001CACE                            
0001CACE                            loc_1BB22:
0001CACE 3140 0014                  		move.w	d0,obInertia(a0)
0001CAD2 4E75                       		rts	
0001CAD4                            ; End of function Obj09_MoveLeft
0001CAD4                            
0001CAD4                            
0001CAD4                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001CAD4                            
0001CAD4                            
0001CAD4                            Obj09_MoveRight:
0001CAD4 08A8 0000 0022             		bclr	#0,obStatus(a0)
0001CADA 3028 0014                  		move.w	obInertia(a0),d0
0001CADE 6B00                       		bmi.s	loc_1BB48
0001CAE0 0640 000C                  		addi.w	#$C,d0
0001CAE4 0C40 0800                  		cmpi.w	#$800,d0
0001CAE8 6D00                       		blt.s	loc_1BB42
0001CAEA 303C 0800                  		move.w	#$800,d0
0001CAEE                            
0001CAEE                            loc_1BB42:
0001CAEE 3140 0014                  		move.w	d0,obInertia(a0)
0001CAF2 6000                       		bra.s	locret_1BB54
0001CAF4                            ; ===========================================================================
0001CAF4                            
0001CAF4                            loc_1BB48:
0001CAF4 0640 0040                  		addi.w	#$40,d0
0001CAF8 6400                       		bcc.s	loc_1BB50
0001CAFA 4E71                       		nop	
0001CAFC                            
0001CAFC                            loc_1BB50:
0001CAFC 3140 0014                  		move.w	d0,obInertia(a0)
0001CB00                            
0001CB00                            locret_1BB54:
0001CB00 4E75                       		rts	
0001CB02                            ; End of function Obj09_MoveRight
0001CB02                            
0001CB02                            
0001CB02                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001CB02                            
0001CB02                            
0001CB02                            Obj09_Jump:
0001CB02 1038 F603                  		move.b	(v_jpadpress2).w,d0
0001CB06 0200 0070                  		andi.b	#btnABC,d0	; is A,	B or C pressed?
0001CB0A 6700                       		beq.s	Obj09_NoJump	; if not, branch
0001CB0C 1038 F780                  		move.b	(v_ssangle).w,d0
0001CB10 0200 00FC                  		andi.b	#$FC,d0
0001CB14 4400                       		neg.b	d0
0001CB16 0400 0040                  		subi.b	#$40,d0
0001CB1A 4EB9 0000 27EC             		jsr	(CalcSine).l
0001CB20 C3FC 0680                  		muls.w	#$680,d1
0001CB24 E081                       		asr.l	#8,d1
0001CB26 3141 0010                  		move.w	d1,obVelX(a0)
0001CB2A C1FC 0680                  		muls.w	#$680,d0
0001CB2E E080                       		asr.l	#8,d0
0001CB30 3140 0012                  		move.w	d0,obVelY(a0)
0001CB34 08E8 0001 0022             		bset	#1,obStatus(a0)
0001CB44                            
0001CB44                            Obj09_NoJump:
0001CB44 4E75                       		rts	
0001CB46                            ; End of function Obj09_Jump
0001CB46                            
0001CB46                            
0001CB46                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001CB46                            
0001CB46                            
0001CB46                            nullsub_2:
0001CB46 4E75                       		rts	
0001CB48                            ; End of function nullsub_2
0001CB48                            
0001CB48                            ; ===========================================================================
0001CB48                            ; ---------------------------------------------------------------------------
0001CB48                            ; unused subroutine to limit Sonic's upward vertical speed
0001CB48                            ; ---------------------------------------------------------------------------
0001CB48 323C FC00                  		move.w	#-$400,d1
0001CB4C B268 0012                  		cmp.w	obVelY(a0),d1
0001CB50 6F00                       		ble.s	locret_1BBB4
0001CB52 1038 F602                  		move.b	(v_jpadhold2).w,d0
0001CB56 0200 0070                  		andi.b	#btnABC,d0
0001CB5A 6600                       		bne.s	locret_1BBB4
0001CB5C 3141 0012                  		move.w	d1,obVelY(a0)
0001CB60                            
0001CB60                            locret_1BBB4:
0001CB60 4E75                       		rts	
0001CB62                            ; ---------------------------------------------------------------------------
0001CB62                            ; Subroutine to	fix the	camera on Sonic's position (special stage)
0001CB62                            ; ---------------------------------------------------------------------------
0001CB62                            
0001CB62                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001CB62                            
0001CB62                            
0001CB62                            SS_FixCamera:
0001CB62 3428 000C                  		move.w	obY(a0),d2
0001CB66 3628 0008                  		move.w	obX(a0),d3
0001CB6A 3038 F700                  		move.w	(v_screenposx).w,d0
0001CB6E 0443 00A0                  		subi.w	#$A0,d3
0001CB72 6500                       		bcs.s	loc_1BBCE
0001CB74 9043                       		sub.w	d3,d0
0001CB76 9178 F700                  		sub.w	d0,(v_screenposx).w
0001CB7A                            
0001CB7A                            loc_1BBCE:
0001CB7A 3038 F704                  		move.w	(v_screenposy).w,d0
0001CB7E 0442 0070                  		subi.w	#$70,d2
0001CB82 6500                       		bcs.s	locret_1BBDE
0001CB84 9042                       		sub.w	d2,d0
0001CB86 9178 F704                  		sub.w	d0,(v_screenposy).w
0001CB8A                            
0001CB8A                            locret_1BBDE:
0001CB8A 4E75                       		rts	
0001CB8C                            ; End of function SS_FixCamera
0001CB8C                            
0001CB8C                            ; ===========================================================================
0001CB8C                            
0001CB8C                            Obj09_ExitStage:
0001CB8C 0678 0040 F782             		addi.w	#$40,(v_ssrotate).w
0001CB92 0C78 1800 F782             		cmpi.w	#$1800,(v_ssrotate).w
0001CB98 6600                       		bne.s	loc_1BBF4
0001CB9A 11FC 0000 F600             		move.b	#id_Level,(v_gamemode).w
0001CBA0                            
0001CBA0                            loc_1BBF4:
0001CBA0 0C78 3000 F782             		cmpi.w	#$3000,(v_ssrotate).w
0001CBA6 6D00                       		blt.s	loc_1BC12
0001CBA8 31FC 0000 F782             		move.w	#0,(v_ssrotate).w
0001CBAE 31FC 4000 F780             		move.w	#$4000,(v_ssangle).w
0001CBB4 5428 0024                  		addq.b	#2,obRoutine(a0)
0001CBB8 317C 003C 0038             		move.w	#$3C,$38(a0)
0001CBBE                            
0001CBBE                            loc_1BC12:
0001CBBE 3038 F780                  		move.w	(v_ssangle).w,d0
0001CBC2 D078 F782                  		add.w	(v_ssrotate).w,d0
0001CBC6 31C0 F780                  		move.w	d0,(v_ssangle).w
0001CBCA 4EB9 0001 48D2             		jsr	(Sonic_Animate).l
0001CBD0 4EB9 0001 4BDE             		jsr	(Sonic_LoadGfx).l
0001CBD6 6100 FF8A                  		bsr.w	SS_FixCamera
0001CBDA 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001CBE0                            ; ===========================================================================
0001CBE0                            
0001CBE0                            Obj09_Exit2:
0001CBE0 5368 0038                  		subq.w	#1,$38(a0)
0001CBE4 6600                       		bne.s	loc_1BC40
0001CBE6 11FC 0000 F600             		move.b	#id_Level,(v_gamemode).w
0001CBEC                            
0001CBEC                            loc_1BC40:
0001CBEC 4EB9 0001 48D2             		jsr	(Sonic_Animate).l
0001CBF2 4EB9 0001 4BDE             		jsr	(Sonic_LoadGfx).l
0001CBF8 6100 FF68                  		bsr.w	SS_FixCamera
0001CBFC 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001CC02                            
0001CC02                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001CC02                            
0001CC02                            
0001CC02                            Obj09_Fall:
0001CC02 2428 000C                  		move.l	obY(a0),d2
0001CC06 2628 0008                  		move.l	obX(a0),d3
0001CC0A 1038 F780                  		move.b	(v_ssangle).w,d0
0001CC0E 0200 00FC                  		andi.b	#$FC,d0
0001CC12 4EB9 0000 27EC             		jsr	(CalcSine).l
0001CC18 3828 0010                  		move.w	obVelX(a0),d4
0001CC1C 48C4                       		ext.l	d4
0001CC1E E184                       		asl.l	#8,d4
0001CC20 C1FC 002A                  		muls.w	#$2A,d0
0001CC24 D084                       		add.l	d4,d0
0001CC26 3828 0012                  		move.w	obVelY(a0),d4
0001CC2A 48C4                       		ext.l	d4
0001CC2C E184                       		asl.l	#8,d4
0001CC2E C3FC 002A                  		muls.w	#$2A,d1
0001CC32 D284                       		add.l	d4,d1
0001CC34 D680                       		add.l	d0,d3
0001CC36 6100 0000                  		bsr.w	sub_1BCE8
0001CC3A 6700                       		beq.s	loc_1BCB0
0001CC3C 9680                       		sub.l	d0,d3
0001CC3E 7000                       		moveq	#0,d0
0001CC40 3140 0010                  		move.w	d0,obVelX(a0)
0001CC44 08A8 0001 0022             		bclr	#1,obStatus(a0)
0001CC4A D481                       		add.l	d1,d2
0001CC4C 6100 0000                  		bsr.w	sub_1BCE8
0001CC50 6700                       		beq.s	loc_1BCC6
0001CC52 9481                       		sub.l	d1,d2
0001CC54 7200                       		moveq	#0,d1
0001CC56 3141 0012                  		move.w	d1,obVelY(a0)
0001CC5A 4E75                       		rts	
0001CC5C                            ; ===========================================================================
0001CC5C                            
0001CC5C                            loc_1BCB0:
0001CC5C D481                       		add.l	d1,d2
0001CC5E 6100 0000                  		bsr.w	sub_1BCE8
0001CC62 6700                       		beq.s	loc_1BCD4
0001CC64 9481                       		sub.l	d1,d2
0001CC66 7200                       		moveq	#0,d1
0001CC68 3141 0012                  		move.w	d1,obVelY(a0)
0001CC6C 08A8 0001 0022             		bclr	#1,obStatus(a0)
0001CC72                            
0001CC72                            loc_1BCC6:
0001CC72 E080                       		asr.l	#8,d0
0001CC74 E081                       		asr.l	#8,d1
0001CC76 3140 0010                  		move.w	d0,obVelX(a0)
0001CC7A 3141 0012                  		move.w	d1,obVelY(a0)
0001CC7E 4E75                       		rts	
0001CC80                            ; ===========================================================================
0001CC80                            
0001CC80                            loc_1BCD4:
0001CC80 E080                       		asr.l	#8,d0
0001CC82 E081                       		asr.l	#8,d1
0001CC84 3140 0010                  		move.w	d0,obVelX(a0)
0001CC88 3141 0012                  		move.w	d1,obVelY(a0)
0001CC8C 08E8 0001 0022             		bset	#1,obStatus(a0)
0001CC92 4E75                       		rts	
0001CC94                            ; End of function Obj09_Fall
0001CC94                            
0001CC94                            
0001CC94                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001CC94                            
0001CC94                            
0001CC94                            sub_1BCE8:
0001CC94 43F9 00FF 0000             		lea	($FF0000).l,a1
0001CC9A 7800                       		moveq	#0,d4
0001CC9C 4842                       		swap	d2
0001CC9E 3802                       		move.w	d2,d4
0001CCA0 4842                       		swap	d2
0001CCA2 0644 0044                  		addi.w	#$44,d4
0001CCA6 88FC 0018                  		divu.w	#$18,d4
0001CCAA C8FC 0080                  		mulu.w	#$80,d4
0001CCAE D3C4                       		adda.l	d4,a1
0001CCB0 7800                       		moveq	#0,d4
0001CCB2 4843                       		swap	d3
0001CCB4 3803                       		move.w	d3,d4
0001CCB6 4843                       		swap	d3
0001CCB8 0644 0014                  		addi.w	#$14,d4
0001CCBC 88FC 0018                  		divu.w	#$18,d4
0001CCC0 D2C4                       		adda.w	d4,a1
0001CCC2 7A00                       		moveq	#0,d5
0001CCC4 1819                       		move.b	(a1)+,d4
0001CCC6 6100                       		bsr.s	sub_1BD30
0001CCC8 1819                       		move.b	(a1)+,d4
0001CCCA 6100                       		bsr.s	sub_1BD30
0001CCCC D2FC 007E                  		adda.w	#$7E,a1
0001CCD0 1819                       		move.b	(a1)+,d4
0001CCD2 6100                       		bsr.s	sub_1BD30
0001CCD4 1819                       		move.b	(a1)+,d4
0001CCD6 6100                       		bsr.s	sub_1BD30
0001CCD8 4A05                       		tst.b	d5
0001CCDA 4E75                       		rts	
0001CCDC                            ; End of function sub_1BCE8
0001CCDC                            
0001CCDC                            
0001CCDC                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001CCDC                            
0001CCDC                            
0001CCDC                            sub_1BD30:
0001CCDC 6700                       		beq.s	locret_1BD44
0001CCDE 0C04 0028                  		cmpi.b	#$28,d4
0001CCE2 6700                       		beq.s	locret_1BD44
0001CCE4 0C04 003A                  		cmpi.b	#$3A,d4
0001CCE8 6500                       		bcs.s	loc_1BD46
0001CCEA 0C04 004B                  		cmpi.b	#$4B,d4
0001CCEE 6400                       		bcc.s	loc_1BD46
0001CCF0                            
0001CCF0                            locret_1BD44:
0001CCF0 4E75                       		rts	
0001CCF2                            ; ===========================================================================
0001CCF2                            
0001CCF2                            loc_1BD46:
0001CCF2 1144 0030                  		move.b	d4,$30(a0)
0001CCF6 2149 0032                  		move.l	a1,$32(a0)
0001CCFA 7AFF                       		moveq	#-1,d5
0001CCFC 4E75                       		rts	
0001CCFE                            ; End of function sub_1BD30
0001CCFE                            
0001CCFE                            
0001CCFE                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001CCFE                            
0001CCFE                            
0001CCFE                            Obj09_ChkItems:
0001CCFE 43F9 00FF 0000             		lea	($FF0000).l,a1
0001CD04 7800                       		moveq	#0,d4
0001CD06 3828 000C                  		move.w	obY(a0),d4
0001CD0A 0644 0050                  		addi.w	#$50,d4
0001CD0E 88FC 0018                  		divu.w	#$18,d4
0001CD12 C8FC 0080                  		mulu.w	#$80,d4
0001CD16 D3C4                       		adda.l	d4,a1
0001CD18 7800                       		moveq	#0,d4
0001CD1A 3828 0008                  		move.w	obX(a0),d4
0001CD1E 0644 0020                  		addi.w	#$20,d4
0001CD22 88FC 0018                  		divu.w	#$18,d4
0001CD26 D2C4                       		adda.w	d4,a1
0001CD28 1811                       		move.b	(a1),d4
0001CD2A 6600                       		bne.s	Obj09_ChkCont
0001CD2C 4A28 003A                  		tst.b	$3A(a0)
0001CD30 6600 0000                  		bne.w	Obj09_MakeGhostSolid
0001CD34 7800                       		moveq	#0,d4
0001CD36 4E75                       		rts	
0001CD38                            ; ===========================================================================
0001CD38                            
0001CD38                            Obj09_ChkCont:
0001CD38 0C04 003A                  		cmpi.b	#$3A,d4		; is the item a	ring?
0001CD3C 6600                       		bne.s	Obj09_Chk1Up
0001CD3E 6100 F702                  		bsr.w	SS_RemoveCollectedItem
0001CD42 6600                       		bne.s	Obj09_GetCont
0001CD44 14BC 0001                  		move.b	#1,(a2)
0001CD48 2549 0004                  		move.l	a1,4(a2)
0001CD4C                            
0001CD4C                            Obj09_GetCont:
0001CD4C 4EB9 0000 A576             		jsr	(CollectRing).l
0001CD52 0C78 0032 FE20             		cmpi.w	#50,(v_rings).w	; check if you have 50 rings
0001CD58 6500                       		bcs.s	Obj09_NoCont
0001CD5A 08F8 0000 FE1B             		bset	#0,(v_lifecount).w
0001CD60 6600                       		bne.s	Obj09_NoCont
0001CD62 5238 FE18                  		addq.b	#1,(v_continues).w ; add 1 to number of continues
0001CD70                            
0001CD70                            Obj09_NoCont:
0001CD70 7800                       		moveq	#0,d4
0001CD72 4E75                       		rts	
0001CD74                            ; ===========================================================================
0001CD74                            
0001CD74                            Obj09_Chk1Up:
0001CD74 0C04 0028                  		cmpi.b	#$28,d4		; is the item an extra life?
0001CD78 6600                       		bne.s	Obj09_ChkEmer
0001CD7A 6100 F6C6                  		bsr.w	SS_RemoveCollectedItem
0001CD7E 6600                       		bne.s	Obj09_Get1Up
0001CD80 14BC 0003                  		move.b	#3,(a2)
0001CD84 2549 0004                  		move.l	a1,4(a2)
0001CD88                            
0001CD88                            Obj09_Get1Up:
0001CD88 5238 FE12                  		addq.b	#1,(v_lives).w	; add 1 to number of lives
0001CD8C 5238 FE1C                  		addq.b	#1,(f_lifecount).w ; update the lives counter
0001CD9A 7800                       		moveq	#0,d4
0001CD9C 4E75                       		rts	
0001CD9E                            ; ===========================================================================
0001CD9E                            
0001CD9E                            Obj09_ChkEmer:
0001CD9E 0C04 003B                  		cmpi.b	#$3B,d4		; is the item an emerald?
0001CDA2 6500                       		bcs.s	Obj09_ChkGhost
0001CDA4 0C04 0040                  		cmpi.b	#$40,d4
0001CDA8 6200                       		bhi.s	Obj09_ChkGhost
0001CDAA 6100 F696                  		bsr.w	SS_RemoveCollectedItem
0001CDAE 6600                       		bne.s	Obj09_GetEmer
0001CDB0 14BC 0005                  		move.b	#5,(a2)
0001CDB4 2549 0004                  		move.l	a1,4(a2)
0001CDB8                            
0001CDB8                            Obj09_GetEmer:
0001CDB8 0C38 0006 FE57             		cmpi.b	#6,(v_emeralds).w ; do you have all the emeralds?
0001CDBE 6700                       		beq.s	Obj09_NoEmer	; if yes, branch
0001CDC0 0404 003B                  		subi.b	#$3B,d4
0001CDC4 7000                       		moveq	#0,d0
0001CDC6 1038 FE57                  		move.b	(v_emeralds).w,d0
0001CDCA 45F8 FE58                  		lea	(v_emldlist).w,a2
0001CDCE 1584 0000                  		move.b	d4,(a2,d0.w)
0001CDD2 5238 FE57                  		addq.b	#1,(v_emeralds).w ; add 1 to number of emeralds
0001CDD6                            
0001CDD6                            Obj09_NoEmer:
0001CDE0 7800                       		moveq	#0,d4
0001CDE2 4E75                       		rts	
0001CDE4                            ; ===========================================================================
0001CDE4                            
0001CDE4                            Obj09_ChkGhost:
0001CDE4 0C04 0041                  		cmpi.b	#$41,d4		; is the item a	ghost block?
0001CDE8 6600                       		bne.s	Obj09_ChkGhostTag
0001CDEA 117C 0001 003A             		move.b	#1,$3A(a0)	; mark the ghost block as "passed"
0001CDF0                            
0001CDF0                            Obj09_ChkGhostTag:
0001CDF0 0C04 004A                  		cmpi.b	#$4A,d4		; is the item a	switch for ghost blocks?
0001CDF4 6600                       		bne.s	Obj09_NoGhost
0001CDF6 0C28 0001 003A             		cmpi.b	#1,$3A(a0)	; have the ghost blocks	been passed?
0001CDFC 6600                       		bne.s	Obj09_NoGhost	; if not, branch
0001CDFE 117C 0002 003A             		move.b	#2,$3A(a0)	; mark the ghost blocks	as "solid"
0001CE04                            
0001CE04                            Obj09_NoGhost:
0001CE04 78FF                       		moveq	#-1,d4
0001CE06 4E75                       		rts	
0001CE08                            ; ===========================================================================
0001CE08                            
0001CE08                            Obj09_MakeGhostSolid:
0001CE08 0C28 0002 003A             		cmpi.b	#2,$3A(a0)	; is the ghost marked as "solid"?
0001CE0E 6600                       		bne.s	Obj09_GhostNotSolid ; if not, branch
0001CE10 43F9 00FF 1020             		lea	($FF1020).l,a1
0001CE16 723F                       		moveq	#$3F,d1
0001CE18                            
0001CE18                            Obj09_GhostLoop2:
0001CE18 743F                       		moveq	#$3F,d2
0001CE1A                            
0001CE1A                            Obj09_GhostLoop:
0001CE1A 0C11 0041                  		cmpi.b	#$41,(a1)	; is the item a	ghost block?
0001CE1E 6600                       		bne.s	Obj09_NoReplace	; if not, branch
0001CE20 12BC 002C                  		move.b	#$2C,(a1)	; replace ghost	block with a solid block
0001CE24                            
0001CE24                            Obj09_NoReplace:
0001CE24 5249                       		addq.w	#1,a1
0001CE26 51CA FFF2                  		dbf	d2,Obj09_GhostLoop
0001CE2A 43E9 0040                  		lea	$40(a1),a1
0001CE2E 51C9 FFE8                  		dbf	d1,Obj09_GhostLoop2
0001CE32                            
0001CE32                            Obj09_GhostNotSolid:
0001CE32 4228 003A                  		clr.b	$3A(a0)
0001CE36 7800                       		moveq	#0,d4
0001CE38 4E75                       		rts	
0001CE3A                            ; End of function Obj09_ChkItems
0001CE3A                            
0001CE3A                            
0001CE3A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001CE3A                            
0001CE3A                            
0001CE3A                            Obj09_ChkItems2:
0001CE3A 1028 0030                  		move.b	$30(a0),d0
0001CE3E 6600                       		bne.s	Obj09_ChkBumper
0001CE40 5328 0036                  		subq.b	#1,$36(a0)
0001CE44 6A00                       		bpl.s	loc_1BEA0
0001CE46 117C 0000 0036             		move.b	#0,$36(a0)
0001CE4C                            
0001CE4C                            loc_1BEA0:
0001CE4C 5328 0037                  		subq.b	#1,$37(a0)
0001CE50 6A00                       		bpl.s	locret_1BEAC
0001CE52 117C 0000 0037             		move.b	#0,$37(a0)
0001CE58                            
0001CE58                            locret_1BEAC:
0001CE58 4E75                       		rts	
0001CE5A                            ; ===========================================================================
0001CE5A                            
0001CE5A                            Obj09_ChkBumper:
0001CE5A 0C00 0025                  		cmpi.b	#$25,d0		; is the item a	bumper?
0001CE5E 6600                       		bne.s	Obj09_GOAL
0001CE60 2228 0032                  		move.l	$32(a0),d1
0001CE64 0481 00FF 0001             		subi.l	#$FF0001,d1
0001CE6A 3401                       		move.w	d1,d2
0001CE6C 0241 007F                  		andi.w	#$7F,d1
0001CE70 C2FC 0018                  		mulu.w	#$18,d1
0001CE74 0441 0014                  		subi.w	#$14,d1
0001CE78 EE4A                       		lsr.w	#7,d2
0001CE7A 0242 007F                  		andi.w	#$7F,d2
0001CE7E C4FC 0018                  		mulu.w	#$18,d2
0001CE82 0442 0044                  		subi.w	#$44,d2
0001CE86 9268 0008                  		sub.w	obX(a0),d1
0001CE8A 9468 000C                  		sub.w	obY(a0),d2
0001CE8E 4EB9 0000 2ABA             		jsr	(CalcAngle).l
0001CE94 4EB9 0000 27EC             		jsr	(CalcSine).l
0001CE9A C3FC F900                  		muls.w	#-$700,d1
0001CE9E E081                       		asr.l	#8,d1
0001CEA0 3141 0010                  		move.w	d1,obVelX(a0)
0001CEA4 C1FC F900                  		muls.w	#-$700,d0
0001CEA8 E080                       		asr.l	#8,d0
0001CEAA 3140 0012                  		move.w	d0,obVelY(a0)
0001CEAE 08E8 0001 0022             		bset	#1,obStatus(a0)
0001CEB4 6100 F58C                  		bsr.w	SS_RemoveCollectedItem
0001CEB8 6600                       		bne.s	Obj09_BumpSnd
0001CEBA 14BC 0002                  		move.b	#2,(a2)
0001CEBE 2028 0032                  		move.l	$32(a0),d0
0001CEC2 5380                       		subq.l	#1,d0
0001CEC4 2540 0004                  		move.l	d0,4(a2)
0001CEC8                            
0001CEC8                            Obj09_BumpSnd:
0001CED2                            ; ===========================================================================
0001CED2                            
0001CED2                            Obj09_GOAL:
0001CED2 0C00 0027                  		cmpi.b	#$27,d0		; is the item a	"GOAL"?
0001CED6 6600                       		bne.s	Obj09_UPblock
0001CED8 5428 0024                  		addq.b	#2,obRoutine(a0) ; run routine "Obj09_ExitStage"
0001CEE6 4E75                       		rts	
0001CEE8                            ; ===========================================================================
0001CEE8                            
0001CEE8                            Obj09_UPblock:
0001CEE8 0C00 0029                  		cmpi.b	#$29,d0		; is the item an "UP" block?
0001CEEC 6600                       		bne.s	Obj09_DOWNblock
0001CEEE 4A28 0036                  		tst.b	$36(a0)
0001CEF2 6600 0000                  		bne.w	Obj09_NoGlass
0001CEF6 117C 001E 0036             		move.b	#$1E,$36(a0)
0001CEFC 0838 0006 F783             		btst	#6,($FFFFF783).w
0001CF02 6700                       		beq.s	Obj09_UPsnd
0001CF04 E1F8 F782                  		asl	(v_ssrotate).w	; increase stage rotation speed
0001CF08 2268 0032                  		movea.l	$32(a0),a1
0001CF0C 5389                       		subq.l	#1,a1
0001CF0E                            	;	move.b	#$2A,(a1)	; change item to a "DOWN" block
0001CF0E                            
0001CF0E                            Obj09_UPsnd:
0001CF0E                            	;	sfx	sfx_SSItem,1,0,0	; play up/down sound
0001CF0E                            ; ===========================================================================
0001CF0E                            
0001CF0E                            Obj09_DOWNblock:
0001CF0E 0C00 002A                  		cmpi.b	#$2A,d0		; is the item a	"DOWN" block?
0001CF12 6600                       		bne.s	Obj09_Rblock
0001CF14 4A28 0036                  		tst.b	$36(a0)
0001CF18 6600 0000                  		bne.w	Obj09_NoGlass
0001CF1C 117C 001E 0036             		move.b	#$1E,$36(a0)
0001CF22 0838 0006 F783             		btst	#6,(v_ssrotate+1).w
0001CF28 6600                       		bne.s	Obj09_DOWNsnd
0001CF2A 4478 F782                  		neg.w	(v_ssrotate).w	; reverse stage rotation
0001CF2E 2268 0032                  		movea.l	$32(a0),a1
0001CF32 5389                       		subq.l	#1,a1
0001CF34                            	;	move.b	#$29,(a1)	; change item to an "UP" block
0001CF34                            
0001CF34                            Obj09_DOWNsnd:
0001CF34                            	;	sfx	sfx_SSItem,1,0,0	; play up/down sound
0001CF34                            ; ===========================================================================
0001CF34                            
0001CF34                            Obj09_Rblock:
0001CF34 0C00 002B                  		cmpi.b	#$2B,d0		; is the item an "R" block?
0001CF38 6600                       		bne.s	Obj09_ChkGlass
0001CF3A 4A28 0037                  		tst.b	$37(a0)
0001CF3E 6600 0000                  		bne.w	Obj09_NoGlass
0001CF42 117C 001E 0037             		move.b	#$1E,$37(a0)
0001CF48 6100 F4F8                  		bsr.w	SS_RemoveCollectedItem
0001CF4C 6600                       		bne.s	Obj09_RevStage
0001CF4E 14BC 0004                  		move.b	#4,(a2)
0001CF52 2028 0032                  		move.l	$32(a0),d0
0001CF56 5380                       		subq.l	#1,d0
0001CF58 2540 0004                  		move.l	d0,4(a2)
0001CF5C                            
0001CF5C                            Obj09_RevStage:
0001CF5C 4478 F782                  		neg.w	(v_ssrotate).w	; reverse stage rotation
0001CF6A                            ; ===========================================================================
0001CF6A                            
0001CF6A                            Obj09_ChkGlass:
0001CF6A 0C00 002D                  		cmpi.b	#$2D,d0		; is the item a	glass block?
0001CF6E 6700                       		beq.s	Obj09_Glass	; if yes, branch
0001CF70 0C00 002E                  		cmpi.b	#$2E,d0
0001CF74 6700                       		beq.s	Obj09_Glass
0001CF76 0C00 002F                  		cmpi.b	#$2F,d0
0001CF7A 6700                       		beq.s	Obj09_Glass
0001CF7C 0C00 0030                  		cmpi.b	#$30,d0
0001CF80 6600                       		bne.s	Obj09_NoGlass	; if not, branch
0001CF82                            
0001CF82                            Obj09_Glass:
0001CF82 6100 F4BE                  		bsr.w	SS_RemoveCollectedItem
0001CF86 6600                       		bne.s	Obj09_GlassSnd
0001CF88 14BC 0006                  		move.b	#6,(a2)
0001CF8C 2268 0032                  		movea.l	$32(a0),a1
0001CF90 5389                       		subq.l	#1,a1
0001CF92 2549 0004                  		move.l	a1,4(a2)
0001CF96 1011                       		move.b	(a1),d0
0001CF98 5200                       		addq.b	#1,d0		; change glass type when touched
0001CF9A 0C00 0030                  		cmpi.b	#$30,d0
0001CF9E 6300                       		bls.s	Obj09_GlassUpdate ; if glass is	still there, branch
0001CFA0 4200                       		clr.b	d0		; remove the glass block when it's destroyed
0001CFA2                            
0001CFA2                            Obj09_GlassUpdate:
0001CFA2 1540 0004                  		move.b	d0,4(a2)	; update the stage layout
0001CFA6                            
0001CFA6                            Obj09_GlassSnd:
0001CFB0                            ; ===========================================================================
0001CFB0                            
0001CFB0                            Obj09_NoGlass:
0001CFB0 4E75                       		rts	
0001CFB2                            ; End of function Obj09_ChkItems2
0001CFB2                            ; End of function Obj09_ChkItems2
0001CFB2                            
0001CFB2                            	;	include	"_incObj\10.asm"
0001CFB2                            
0001CFB2                            		include	"_inc\AnimateLevelGfx.asm"
0001CFB2                            ; ---------------------------------------------------------------------------
0001CFB2                            ; Subroutine to	animate	level graphics
0001CFB2                            ; ---------------------------------------------------------------------------
0001CFB2                            
0001CFB2                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001CFB2                            
0001CFB2                            
0001CFB2                            AnimateLevelGfx:
0001CFB2 4A78 F63A                  		tst.w	(f_pause).w	; is the game paused?
0001CFB6 6600                       		bne.s	@ispaused	; if yes, branch
0001CFB8 4DF9 00C0 0000             		lea	(vdp_data_port).l,a6
0001CFBE 6100 0000                  		bsr.w	AniArt_GiantRing
0001CFC2 7000                       		moveq	#0,d0
0001CFC4 1038 FE10                  		move.b	(v_zone).w,d0
0001CFC8 D040                       		add.w	d0,d0
0001CFCA 303B 0000                  		move.w	AniArt_Index(pc,d0.w),d0
0001CFCE 4EFB 0000                  		jmp	AniArt_Index(pc,d0.w)
0001CFD2                            
0001CFD2                            	@ispaused:
0001CFD2 4E75                       		rts	
0001CFD4                            
0001CFD4                            ; ===========================================================================
0001CFD4 0000 0000                  AniArt_Index:	dc.w AniArt_GHZ-AniArt_Index, AniArt_none-AniArt_Index
0001CFD8 0000 0000                  		dc.w AniArt_MZ-AniArt_Index, AniArt_none-AniArt_Index
0001CFDC 0000 0000                  		dc.w AniArt_none-AniArt_Index, AniArt_SBZ-AniArt_Index
0001CFE0 0000 0000                  		dc.w AniArt_Ending-AniArt_Index, AniArt_SBZ-AniArt_Index
0001CFE4 0000 0000                  		dc.w AniArt_SBZ-AniArt_Index, AniArt_SBZ-AniArt_Index
0001CFE8                            ; ===========================================================================
0001CFE8                            ; ---------------------------------------------------------------------------
0001CFE8                            ; Animated pattern routine - Green Hill
0001CFE8                            ; ---------------------------------------------------------------------------
0001CFE8                            
0001CFE8                            AniArt_GHZ:
0001CFE8                            
0001CFE8                            AniArt_GHZ_Waterfall:
0001CFE8                            
0001CFE8 =00000008                  @size:		equ 8	; number of tiles per frame
0001CFE8                            
0001CFE8 5338 F7B1                  		subq.b	#1,(v_lani0_time).w ; decrement timer
0001CFEC 6A00                       		bpl.s	AniArt_GHZ_Bigflower ; branch if not 0
0001CFEE                            
0001CFEE 11FC 0005 F7B1             		move.b	#5,(v_lani0_time).w ; time to display each frame
0001CFF4 43F9 0000 0000             		lea	(Art_GhzWater).l,a1 ; load waterfall patterns
0001CFFA 1038 F7B0                  		move.b	(v_lani0_frame).w,d0
0001CFFE 5238 F7B0                  		addq.b	#1,(v_lani0_frame).w ; increment frame counter
0001D002 0240 0001                  		andi.w	#1,d0		; there are only 2 frames
0001D006 6700                       		beq.s	@isframe0	; branch if frame 0
0001D008 43E9 0100                  		lea	@size*$20(a1),a1 ; use graphics for frame 1
0001D00C                            
0001D00C                            	@isframe0:
0001D016 323C 0007                  		move.w	#@size-1,d1	; number of 8x8	tiles
0001D01A 6000 0000                  		bra.w	LoadTiles
0001D01E                            ; ===========================================================================
0001D01E                            
0001D01E                            AniArt_GHZ_Bigflower:
0001D01E                            
0001D01E =00000010                  @size:		equ 16	; number of tiles per frame
0001D01E                            
0001D01E 5338 F7B3                  		subq.b	#1,(v_lani1_time).w
0001D022 6A00                       		bpl.s	AniArt_GHZ_Smallflower
0001D024                            
0001D024 11FC 000F F7B3             		move.b	#$F,(v_lani1_time).w
0001D02A 43F9 0000 0000             		lea	(Art_GhzFlower1).l,a1 ;	load big flower	patterns
0001D030 1038 F7B2                  		move.b	(v_lani1_frame).w,d0
0001D034 5238 F7B2                  		addq.b	#1,(v_lani1_frame).w
0001D038 0240 0001                  		andi.w	#1,d0
0001D03C 6700                       		beq.s	@isframe0
0001D03E 43E9 0200                  		lea	@size*$20(a1),a1
0001D042                            
0001D042                            	@isframe0:
0001D04C 323C 000F                  		move.w	#@size-1,d1
0001D050 6000 0000                  		bra.w	LoadTiles
0001D054                            ; ===========================================================================
0001D054                            
0001D054                            AniArt_GHZ_Smallflower:
0001D054                            
0001D054 =0000000C                  @size:		equ 12	; number of tiles per frame
0001D054                            
0001D054 5338 F7B5                  		subq.b	#1,(v_lani2_time).w
0001D058 6A00                       		bpl.s	@end
0001D05A                            
0001D05A 11FC 0007 F7B5             		move.b	#7,(v_lani2_time).w
0001D060 1038 F7B4                  		move.b	(v_lani2_frame).w,d0
0001D064 5238 F7B4                  		addq.b	#1,(v_lani2_frame).w ; increment frame counter
0001D068 0240 0003                  		andi.w	#3,d0		; there are 4 frames
0001D06C 103B 0000                  		move.b	@sequence(pc,d0.w),d0
0001D070 0800 0000                  		btst	#0,d0		; is frame 0 or 2? (actual frame, not frame counter)
0001D074 6600                       		bne.s	@isframe1	; if not, branch
0001D076 11FC 007F F7B5             		move.b	#$7F,(v_lani2_time).w ; set longer duration for frames 0 and 2
0001D07C                            
0001D07C                            	@isframe1:
0001D07C EF48                       		lsl.w	#7,d0		; multiply frame num by $80
0001D07E 3200                       		move.w	d0,d1
0001D080 D040                       		add.w	d0,d0
0001D082 D041                       		add.w	d1,d0		; multiply that by 3 (i.e. frame num times 12 * $20)
0001D08E 43F9 0000 0000             		lea	(Art_GhzFlower2).l,a1 ;	load small flower patterns
0001D094 43F1 0000                  		lea	(a1,d0.w),a1	; jump to appropriate tile
0001D098 323C 000B                  		move.w	#@size-1,d1
0001D09C 6100 0000                  		bsr.w	LoadTiles
0001D0A0                            
0001D0A0                            @end:
0001D0A0 4E75                       		rts	
0001D0A2                            
0001D0A2 0001 0201                  @sequence:	dc.b 0,	1, 2, 1
0001D0A6                            ; ===========================================================================
0001D0A6                            ; ---------------------------------------------------------------------------
0001D0A6                            ; Animated pattern routine - Marble
0001D0A6                            ; ---------------------------------------------------------------------------
0001D0A6                            
0001D0A6                            AniArt_MZ:
0001D0A6                            
0001D0A6                            AniArt_MZ_Lava:
0001D0A6                            
0001D0A6 =00000008                  @size:		equ 8	; number of tiles per frame
0001D0A6                            
0001D0A6 5338 F7B1                  		subq.b	#1,(v_lani0_time).w ; decrement timer
0001D0AA 6A00                       		bpl.s	AniArt_MZ_Magma	; branch if not 0
0001D0AC                            
0001D0AC 11FC 0013 F7B1             		move.b	#$13,(v_lani0_time).w ; time to display each frame
0001D0B2 43F9 0000 0000             		lea	(Art_MzLava1).l,a1 ; load lava surface patterns
0001D0B8 7000                       		moveq	#0,d0
0001D0BA 1038 F7B0                  		move.b	(v_lani0_frame).w,d0
0001D0BE 5200                       		addq.b	#1,d0		; increment frame counter
0001D0C0 0C00 0003                  		cmpi.b	#3,d0		; there are 3 frames
0001D0C4 6600                       		bne.s	@frame01or2	; branch if frame 0, 1 or 2
0001D0C6 7000                       		moveq	#0,d0
0001D0C8                            
0001D0C8                            	@frame01or2:
0001D0C8 11C0 F7B0                  		move.b	d0,(v_lani0_frame).w
0001D0CC C0FC 0100                  		mulu.w	#@size*$20,d0
0001D0D0 D2C0                       		adda.w	d0,a1		; jump to appropriate tile
0001D0DC 323C 0007                  		move.w	#@size-1,d1
0001D0E0 6100 0000                  		bsr.w	LoadTiles
0001D0E4                            
0001D0E4                            AniArt_MZ_Magma:
0001D0E4 5338 F7B3                  		subq.b	#1,(v_lani1_time).w ; decrement timer
0001D0E8 6A00                       		bpl.s	AniArt_MZ_Torch	; branch if not 0
0001D0EA                            		
0001D0EA 11FC 0001 F7B3             		move.b	#1,(v_lani1_time).w ; time between each gfx change
0001D0F0 7000                       		moveq	#0,d0
0001D0F2 1038 F7B0                  		move.b	(v_lani0_frame).w,d0 ; get surface lava frame number
0001D0F6 49F9 0000 0000             		lea	(Art_MzLava2).l,a4 ; load magma gfx
0001D0FC EE58                       		ror.w	#7,d0		; multiply frame num by $200
0001D0FE D8C0                       		adda.w	d0,a4		; jump to appropriate tile
0001D10A 7600                       		moveq	#0,d3
0001D10C 1638 F7B2                  		move.b	(v_lani1_frame).w,d3
0001D110 5238 F7B2                  		addq.b	#1,(v_lani1_frame).w ; increment frame counter (unused)
0001D114 1638 FE68                  		move.b	(v_oscillate+$A).w,d3 ; get oscillating value
0001D118 343C 0003                  		move.w	#3,d2
0001D11C                            
0001D11C                            	@loop:
0001D11C 3003                       		move.w	d3,d0
0001D11E D040                       		add.w	d0,d0
0001D120 0240 001E                  		andi.w	#$1E,d0
0001D124 47F9 0000 0000             		lea	(AniArt_MZextra).l,a3
0001D12A 3033 0000                  		move.w	(a3,d0.w),d0
0001D12E 47F3 0000                  		lea	(a3,d0.w),a3
0001D132 224C                       		movea.l	a4,a1
0001D134 323C 001F                  		move.w	#$1F,d1
0001D138 4E93                       		jsr	(a3)
0001D13A 5843                       		addq.w	#4,d3
0001D13C 51CA FFDE                  		dbf	d2,@loop
0001D140 4E75                       		rts	
0001D142                            ; ===========================================================================
0001D142                            
0001D142                            AniArt_MZ_Torch:
0001D142                            
0001D142 =00000006                  @size:		equ 6	; number of tiles per frame
0001D142                            
0001D142 5338 F7B5                  		subq.b	#1,(v_lani2_time).w ; decrement timer
0001D146 6A00 0000                  		bpl.w	@end		; branch if not 0
0001D14A                            		
0001D14A 11FC 0007 F7B5             		move.b	#7,(v_lani2_time).w ; time to display each frame
0001D150 43F9 0000 0000             		lea	(Art_MzTorch).l,a1 ; load torch	patterns
0001D156 7000                       		moveq	#0,d0
0001D158 1038 F7B6                  		move.b	(v_lani3_frame).w,d0
0001D15C 5238 F7B6                  		addq.b	#1,(v_lani3_frame).w ; increment frame counter
0001D160 0238 0003 F7B6             		andi.b	#3,(v_lani3_frame).w ; there are 3 frames
0001D166 C0FC 00C0                  		mulu.w	#@size*$20,d0
0001D16A D2C0                       		adda.w	d0,a1		; jump to appropriate tile
0001D176 323C 0005                  		move.w	#@size-1,d1
0001D17A 6000 0000                  		bra.w	LoadTiles
0001D17E                            
0001D17E                            @end:
0001D17E 4E75                       		rts	
0001D180                            ; ===========================================================================
0001D180                            ; ---------------------------------------------------------------------------
0001D180                            ; Animated pattern routine - Scrap Brain
0001D180                            ; ---------------------------------------------------------------------------
0001D180                            
0001D180                            AniArt_SBZ:
0001D180                            
0001D180 =0000000C                  @size:		equ 12	; number of tiles per frame
0001D180                            
0001D180 4A38 F7B4                  		tst.b	(v_lani2_frame).w
0001D184 6700                       		beq.s	@smokepuff	; branch if counter hits 0
0001D186                            		
0001D186 5338 F7B4                  		subq.b	#1,(v_lani2_frame).w ; decrement counter
0001D18A 6000                       		bra.s	@chk_smokepuff2
0001D18C                            ; ===========================================================================
0001D18C                            
0001D18C                            @smokepuff:
0001D18C 5338 F7B1                  		subq.b	#1,(v_lani0_time).w ; decrement timer
0001D190 6A00                       		bpl.s	@chk_smokepuff2 ; branch if not 0
0001D192                            		
0001D192 11FC 0007 F7B1             		move.b	#7,(v_lani0_time).w ; time to display each frame
0001D198 43F9 0000 0000             		lea	(Art_SbzSmoke).l,a1 ; load smoke patterns
0001D1A8 1038 F7B0                  		move.b	(v_lani0_frame).w,d0
0001D1AC 5238 F7B0                  		addq.b	#1,(v_lani0_frame).w ; increment frame counter
0001D1B0 0240 0007                  		andi.w	#7,d0
0001D1B4 6700                       		beq.s	@untilnextpuff	; branch if frame 0
0001D1B6 5340                       		subq.w	#1,d0
0001D1B8 C0FC 0180                  		mulu.w	#@size*$20,d0
0001D1BC 43F1 0000                  		lea	(a1,d0.w),a1
0001D1C0 323C 000B                  		move.w	#@size-1,d1
0001D1C4 6000 0000                  		bra.w	LoadTiles
0001D1C8                            ; ===========================================================================
0001D1C8                            
0001D1C8                            @untilnextpuff:
0001D1C8 11FC 00B4 F7B4             		move.b	#180,(v_lani2_frame).w ; time between smoke puffs (3 seconds)
0001D1CE                            
0001D1CE                            @clearsky:
0001D1CE 323C 0005                  		move.w	#(@size/2)-1,d1
0001D1D2 6100 0000                  		bsr.w	LoadTiles
0001D1D6 43F9 0000 0000             		lea	(Art_SbzSmoke).l,a1
0001D1DC 323C 0005                  		move.w	#(@size/2)-1,d1
0001D1E0 6000 0000                  		bra.w	LoadTiles	; load blank tiles for no smoke puff
0001D1E4                            ; ===========================================================================
0001D1E4                            
0001D1E4                            @chk_smokepuff2:
0001D1E4 4A38 F7B5                  		tst.b	(v_lani2_time).w
0001D1E8 6700                       		beq.s	@smokepuff2	; branch if counter hits 0
0001D1EA                            		
0001D1EA 5338 F7B5                  		subq.b	#1,(v_lani2_time).w ; decrement counter
0001D1EE 6000                       		bra.s	@end
0001D1F0                            ; ===========================================================================
0001D1F0                            
0001D1F0                            @smokepuff2:
0001D1F0 5338 F7B3                  		subq.b	#1,(v_lani1_time).w ; decrement timer
0001D1F4 6A00                       		bpl.s	@end		; branch if not 0
0001D1F6                            		
0001D1F6 11FC 0007 F7B3             		move.b	#7,(v_lani1_time).w ; time to display each frame
0001D1FC 43F9 0000 0000             		lea	(Art_SbzSmoke).l,a1 ; load smoke patterns
0001D20C 1038 F7B2                  		move.b	(v_lani1_frame).w,d0
0001D210 5238 F7B2                  		addq.b	#1,(v_lani1_frame).w ; increment frame counter
0001D214 0240 0007                  		andi.w	#7,d0
0001D218 6700                       		beq.s	@untilnextpuff2	; branch if frame 0
0001D21A 5340                       		subq.w	#1,d0
0001D21C C0FC 0180                  		mulu.w	#@size*$20,d0
0001D220 43F1 0000                  		lea	(a1,d0.w),a1
0001D224 323C 000B                  		move.w	#@size-1,d1
0001D228 6000 0000                  		bra.w	LoadTiles
0001D22C                            ; ===========================================================================
0001D22C                            
0001D22C                            @untilnextpuff2:
0001D22C 11FC 0078 F7B5             		move.b	#120,(v_lani2_time).w ; time between smoke puffs (2 seconds)
0001D232 609A                       		bra.s	@clearsky
0001D234                            ; ===========================================================================
0001D234                            
0001D234                            @end:
0001D234 4E75                       		rts	
0001D236                            ; ===========================================================================
0001D236                            ; ---------------------------------------------------------------------------
0001D236                            ; Animated pattern routine - ending sequence
0001D236                            ; ---------------------------------------------------------------------------
0001D236                            
0001D236                            AniArt_Ending:
0001D236                            
0001D236                            AniArt_Ending_BigFlower:
0001D236                            
0001D236 =00000010                  @size:		equ 16	; number of tiles per frame
0001D236                            
0001D236 5338 F7B3                  		subq.b	#1,(v_lani1_time).w ; decrement timer
0001D23A 6A00                       		bpl.s	AniArt_Ending_SmallFlower ; branch if not 0
0001D23C                            		
0001D23C 11FC 0007 F7B3             		move.b	#7,(v_lani1_time).w
0001D242 43F9 0000 0000             		lea	(Art_GhzFlower1).l,a1 ;	load big flower	patterns
0001D248 45F8 9400                  		lea	($FFFF9400).w,a2 ; load 2nd big flower from RAM
0001D24C 1038 F7B2                  		move.b	(v_lani1_frame).w,d0
0001D250 5238 F7B2                  		addq.b	#1,(v_lani1_frame).w ; increment frame counter
0001D254 0240 0001                  		andi.w	#1,d0		; only 2 frames
0001D258 6700                       		beq.s	@isframe0	; branch if frame 0
0001D25A 43E9 0200                  		lea	@size*$20(a1),a1
0001D25E 45EA 0200                  		lea	@size*$20(a2),a2
0001D262                            
0001D262                            	@isframe0:
0001D26C 323C 000F                  		move.w	#@size-1,d1
0001D270 6100 0000                  		bsr.w	LoadTiles
0001D274 224A                       		movea.l	a2,a1
0001D280 323C 000F                  		move.w	#@size-1,d1
0001D284 6000 0000                  		bra.w	LoadTiles
0001D288                            ; ===========================================================================
0001D288                            
0001D288                            AniArt_Ending_SmallFlower:
0001D288                            
0001D288 =0000000C                  @size:		equ 12	; number of tiles per frame
0001D288                            
0001D288 5338 F7B5                  		subq.b	#1,(v_lani2_time).w ; decrement timer
0001D28C 6A00                       		bpl.s	AniArt_Ending_Flower3 ; branch if not 0
0001D28E                            		
0001D28E 11FC 0007 F7B5             		move.b	#7,(v_lani2_time).w
0001D294 1038 F7B4                  		move.b	(v_lani2_frame).w,d0
0001D298 5238 F7B4                  		addq.b	#1,(v_lani2_frame).w ; increment frame counter
0001D29C 0240 0007                  		andi.w	#7,d0		; max 8 frames
0001D2A0 103B 0000                  		move.b	@sequence(pc,d0.w),d0 ; get actual frame num from sequence data
0001D2A4 EF48                       		lsl.w	#7,d0		; multiply by $80
0001D2A6 3200                       		move.w	d0,d1
0001D2A8 D040                       		add.w	d0,d0
0001D2AA D041                       		add.w	d1,d0		; multiply by 3
0001D2B6 43F9 0000 0000             		lea	(Art_GhzFlower2).l,a1 ;	load small flower patterns
0001D2BC 43F1 0000                  		lea	(a1,d0.w),a1	; jump to appropriate tile
0001D2C0 323C 000B                  		move.w	#@size-1,d1
0001D2C4 6000 0000                  		bra.w	LoadTiles
0001D2C8                            ; ===========================================================================
0001D2C8 0000 0001 0202 0201        @sequence:	dc.b 0,	0, 0, 1, 2, 2, 2, 1
0001D2D0                            ; ===========================================================================
0001D2D0                            
0001D2D0                            AniArt_Ending_Flower3:
0001D2D0                            
0001D2D0 =00000010                  @size:		equ 16	; number of tiles per frame
0001D2D0                            
0001D2D0 5338 F7B9                  		subq.b	#1,(v_lani4_time).w ; decrement timer
0001D2D4 6A00                       		bpl.s	AniArt_Ending_Flower4 ; branch if not 0
0001D2D6                            		
0001D2D6 11FC 000E F7B9             		move.b	#$E,(v_lani4_time).w
0001D2DC 1038 F7B8                  		move.b	(v_lani4_frame).w,d0
0001D2E0 5238 F7B8                  		addq.b	#1,(v_lani4_frame).w ; increment frame counter
0001D2E4 0240 0003                  		andi.w	#3,d0		; max 4 frames
0001D2E8 103B 0000                  		move.b	AniArt_Ending_Flower3_sequence(pc,d0.w),d0 ; get actual frame num from sequence data
0001D2EC E148                       		lsl.w	#8,d0		; multiply by $100
0001D2EE D040                       		add.w	d0,d0		; multiply by 2
0001D2FA 43F8 9800                  		lea	($FFFF9800).w,a1 ; load	special	flower patterns	(from RAM)
0001D2FE 43F1 0000                  		lea	(a1,d0.w),a1	; jump to appropriate tile
0001D302 323C 000F                  		move.w	#@size-1,d1
0001D306 6000 0000                  		bra.w	LoadTiles
0001D30A                            ; ===========================================================================
0001D30A 0001 0201                  AniArt_Ending_Flower3_sequence:	dc.b 0,	1, 2, 1
0001D30E                            ; ===========================================================================
0001D30E                            
0001D30E                            AniArt_Ending_Flower4:
0001D30E                            
0001D30E =00000010                  @size:		equ 16	; number of tiles per frame
0001D30E                            
0001D30E 5338 F7BB                  		subq.b	#1,(v_lani5_time).w ; decrement timer
0001D312 6A00                       		bpl.s	@end		; branch if not 0
0001D314                            		
0001D314 11FC 000B F7BB             		move.b	#$B,(v_lani5_time).w
0001D31A 1038 F7BA                  		move.b	(v_lani5_frame).w,d0
0001D31E 5238 F7BA                  		addq.b	#1,(v_lani5_frame).w ; increment frame counter
0001D322 0240 0003                  		andi.w	#3,d0
0001D326 103B 00E2                  		move.b	AniArt_Ending_Flower3_sequence(pc,d0.w),d0 ; get actual frame num from sequence data
0001D32A E148                       		lsl.w	#8,d0		; multiply by $100
0001D32C D040                       		add.w	d0,d0		; multiply by 2
0001D338 43F8 9E00                  		lea	($FFFF9E00).w,a1 ; load	special	flower patterns	(from RAM)
0001D33C 43F1 0000                  		lea	(a1,d0.w),a1	; jump to appropriate tile
0001D340 323C 000F                  		move.w	#@size-1,d1
0001D344 6000 0000                  		bra.w	LoadTiles
0001D348                            ; ===========================================================================
0001D348                            
0001D348                            @end:
0001D348 4E75                       		rts	
0001D34A                            ; ===========================================================================
0001D34A                            
0001D34A                            AniArt_none:
0001D34A 4E75                       		rts	
0001D34C                            
0001D34C                            ; ---------------------------------------------------------------------------
0001D34C                            ; Subroutine to	transfer graphics to VRAM
0001D34C                            
0001D34C                            ; input:
0001D34C                            ;	a1 = source address
0001D34C                            ;	a6 = vdp_data_port ($C00000)
0001D34C                            ;	d1 = number of tiles to load (minus one)
0001D34C                            ; ---------------------------------------------------------------------------
0001D34C                            
0001D34C                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001D34C                            
0001D34C                            
0001D34C                            LoadTiles:
0001D34C 2C99                       		move.l	(a1)+,(a6)
0001D34E 2C99                       		move.l	(a1)+,(a6)
0001D350 2C99                       		move.l	(a1)+,(a6)
0001D352 2C99                       		move.l	(a1)+,(a6)
0001D354 2C99                       		move.l	(a1)+,(a6)
0001D356 2C99                       		move.l	(a1)+,(a6)
0001D358 2C99                       		move.l	(a1)+,(a6)
0001D35A 2C99                       		move.l	(a1)+,(a6)
0001D35C 51C9 FFEE                  		dbf	d1,LoadTiles
0001D360 4E75                       		rts	
0001D362                            ; End of function LoadTiles
0001D362                            
0001D362                            ; ===========================================================================
0001D362                            ; ---------------------------------------------------------------------------
0001D362                            ; Animated pattern routine - more Marble Zone
0001D362                            ; ---------------------------------------------------------------------------
0001D362 0000 0000                  AniArt_MZextra:	dc.w loc_1C3EE-AniArt_MZextra, loc_1C3FA-AniArt_MZextra
0001D366 0000 0000                  		dc.w loc_1C410-AniArt_MZextra, loc_1C41E-AniArt_MZextra
0001D36A 0000 0000                  		dc.w loc_1C434-AniArt_MZextra, loc_1C442-AniArt_MZextra
0001D36E 0000 0000                  		dc.w loc_1C458-AniArt_MZextra, loc_1C466-AniArt_MZextra
0001D372 0000 0000                  		dc.w loc_1C47C-AniArt_MZextra, loc_1C48A-AniArt_MZextra
0001D376 0000 0000                  		dc.w loc_1C4A0-AniArt_MZextra, loc_1C4AE-AniArt_MZextra
0001D37A 0000 0000                  		dc.w loc_1C4C4-AniArt_MZextra, loc_1C4D2-AniArt_MZextra
0001D37E 0000 0000                  		dc.w loc_1C4E8-AniArt_MZextra, loc_1C4FA-AniArt_MZextra
0001D382                            ; ===========================================================================
0001D382                            
0001D382                            loc_1C3EE:
0001D382 2C91                       		move.l	(a1),(a6)
0001D384 43E9 0010                  		lea	$10(a1),a1
0001D388 51C9 FFF8                  		dbf	d1,loc_1C3EE
0001D38C 4E75                       		rts	
0001D38E                            ; ===========================================================================
0001D38E                            
0001D38E                            loc_1C3FA:
0001D38E 2029 0002                  		move.l	2(a1),d0
0001D392 1029 0001                  		move.b	1(a1),d0
0001D396 E098                       		ror.l	#8,d0
0001D398 2C80                       		move.l	d0,(a6)
0001D39A 43E9 0010                  		lea	$10(a1),a1
0001D39E 51C9 FFEE                  		dbf	d1,loc_1C3FA
0001D3A2 4E75                       		rts	
0001D3A4                            ; ===========================================================================
0001D3A4                            
0001D3A4                            loc_1C410:
0001D3A4 2CA9 0002                  		move.l	2(a1),(a6)
0001D3A8 43E9 0010                  		lea	$10(a1),a1
0001D3AC 51C9 FFF6                  		dbf	d1,loc_1C410
0001D3B0 4E75                       		rts	
0001D3B2                            ; ===========================================================================
0001D3B2                            
0001D3B2                            loc_1C41E:
0001D3B2 2029 0004                  		move.l	4(a1),d0
0001D3B6 1029 0003                  		move.b	3(a1),d0
0001D3BA E098                       		ror.l	#8,d0
0001D3BC 2C80                       		move.l	d0,(a6)
0001D3BE 43E9 0010                  		lea	$10(a1),a1
0001D3C2 51C9 FFEE                  		dbf	d1,loc_1C41E
0001D3C6 4E75                       		rts	
0001D3C8                            ; ===========================================================================
0001D3C8                            
0001D3C8                            loc_1C434:
0001D3C8 2CA9 0004                  		move.l	4(a1),(a6)
0001D3CC 43E9 0010                  		lea	$10(a1),a1
0001D3D0 51C9 FFF6                  		dbf	d1,loc_1C434
0001D3D4 4E75                       		rts	
0001D3D6                            ; ===========================================================================
0001D3D6                            
0001D3D6                            loc_1C442:
0001D3D6 2029 0006                  		move.l	6(a1),d0
0001D3DA 1029 0005                  		move.b	5(a1),d0
0001D3DE E098                       		ror.l	#8,d0
0001D3E0 2C80                       		move.l	d0,(a6)
0001D3E2 43E9 0010                  		lea	$10(a1),a1
0001D3E6 51C9 FFEE                  		dbf	d1,loc_1C442
0001D3EA 4E75                       		rts	
0001D3EC                            ; ===========================================================================
0001D3EC                            
0001D3EC                            loc_1C458:
0001D3EC 2CA9 0006                  		move.l	6(a1),(a6)
0001D3F0 43E9 0010                  		lea	$10(a1),a1
0001D3F4 51C9 FFF6                  		dbf	d1,loc_1C458
0001D3F8 4E75                       		rts	
0001D3FA                            ; ===========================================================================
0001D3FA                            
0001D3FA                            loc_1C466:
0001D3FA 2029 0008                  		move.l	8(a1),d0
0001D3FE 1029 0007                  		move.b	7(a1),d0
0001D402 E098                       		ror.l	#8,d0
0001D404 2C80                       		move.l	d0,(a6)
0001D406 43E9 0010                  		lea	$10(a1),a1
0001D40A 51C9 FFEE                  		dbf	d1,loc_1C466
0001D40E 4E75                       		rts	
0001D410                            ; ===========================================================================
0001D410                            
0001D410                            loc_1C47C:
0001D410 2CA9 0008                  		move.l	8(a1),(a6)
0001D414 43E9 0010                  		lea	$10(a1),a1
0001D418 51C9 FFF6                  		dbf	d1,loc_1C47C
0001D41C 4E75                       		rts	
0001D41E                            ; ===========================================================================
0001D41E                            
0001D41E                            loc_1C48A:
0001D41E 2029 000A                  		move.l	$A(a1),d0
0001D422 1029 0009                  		move.b	9(a1),d0
0001D426 E098                       		ror.l	#8,d0
0001D428 2C80                       		move.l	d0,(a6)
0001D42A 43E9 0010                  		lea	$10(a1),a1
0001D42E 51C9 FFEE                  		dbf	d1,loc_1C48A
0001D432 4E75                       		rts	
0001D434                            ; ===========================================================================
0001D434                            
0001D434                            loc_1C4A0:
0001D434 2CA9 000A                  		move.l	$A(a1),(a6)
0001D438 43E9 0010                  		lea	$10(a1),a1
0001D43C 51C9 FFF6                  		dbf	d1,loc_1C4A0
0001D440 4E75                       		rts	
0001D442                            ; ===========================================================================
0001D442                            
0001D442                            loc_1C4AE:
0001D442 2029 000C                  		move.l	$C(a1),d0
0001D446 1029 000B                  		move.b	$B(a1),d0
0001D44A E098                       		ror.l	#8,d0
0001D44C 2C80                       		move.l	d0,(a6)
0001D44E 43E9 0010                  		lea	$10(a1),a1
0001D452 51C9 FFEE                  		dbf	d1,loc_1C4AE
0001D456 4E75                       		rts	
0001D458                            ; ===========================================================================
0001D458                            
0001D458                            loc_1C4C4:
0001D458 2CA9 000C                  		move.l	$C(a1),(a6)
0001D45C 43E9 0010                  		lea	$10(a1),a1
0001D460 51C9 FFF6                  		dbf	d1,loc_1C4C4
0001D464 4E75                       		rts	
0001D466                            ; ===========================================================================
0001D466                            
0001D466                            loc_1C4D2:
0001D466 2029 000C                  		move.l	$C(a1),d0
0001D46A E198                       		rol.l	#8,d0
0001D46C 1029 0000                  		move.b	0(a1),d0
0001D470 2C80                       		move.l	d0,(a6)
0001D472 43E9 0010                  		lea	$10(a1),a1
0001D476 51C9 FFEE                  		dbf	d1,loc_1C4D2
0001D47A 4E75                       		rts	
0001D47C                            ; ===========================================================================
0001D47C                            
0001D47C                            loc_1C4E8:
0001D47C 3CA9 000E                  		move.w	$E(a1),(a6)
0001D480 3CA9 0000                  		move.w	0(a1),(a6)
0001D484 43E9 0010                  		lea	$10(a1),a1
0001D488 51C9 FFF2                  		dbf	d1,loc_1C4E8
0001D48C 4E75                       		rts	
0001D48E                            ; ===========================================================================
0001D48E                            
0001D48E                            loc_1C4FA:
0001D48E 2029 0000                  		move.l	0(a1),d0
0001D492 1029 000F                  		move.b	$F(a1),d0
0001D496 E098                       		ror.l	#8,d0
0001D498 2C80                       		move.l	d0,(a6)
0001D49A 43E9 0010                  		lea	$10(a1),a1
0001D49E 51C9 FFEE                  		dbf	d1,loc_1C4FA
0001D4A2 4E75                       		rts	
0001D4A4                            
0001D4A4                            ; ---------------------------------------------------------------------------
0001D4A4                            ; Animated pattern routine - giant ring
0001D4A4                            ; ---------------------------------------------------------------------------
0001D4A4                            
0001D4A4                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001D4A4                            
0001D4A4                            
0001D4A4                            AniArt_GiantRing:
0001D4A4                            
0001D4A4 =0000000E                  @size:		equ 14
0001D4A4                            
0001D4A4 4A78 F7BE                  		tst.w	(v_gfxbigring).w	; Is there any of the art left to load?
0001D4A8 6600                       		bne.s	@loadTiles		; If so, get to work
0001D4AA 4E75                       		rts	
0001D4AC                            ; ===========================================================================
0001D4AC                            ; loc_1C518:
0001D4AC                            @loadTiles:
0001D4AC 0478 01C0 F7BE             		subi.w	#@size*$20,(v_gfxbigring).w	; Count-down the 14 tiles we're going to load now
0001D4B2 43F9 0000 0000             		lea	(Art_BigRing).l,a1 ; load giant	ring patterns
0001D4B8 7000                       		moveq	#0,d0
0001D4BA 3038 F7BE                  		move.w	(v_gfxbigring).w,d0
0001D4BE 43F1 0000                  		lea	(a1,d0.w),a1
0001D4C2                            		; Turn VRAM address into VDP command
0001D4C2 0640 8000                  		addi.w	#$8000,d0
0001D4C6 E588                       		lsl.l	#2,d0
0001D4C8 E448                       		lsr.w	#2,d0
0001D4CA 0040 4000                  		ori.w	#$4000,d0
0001D4CE 4840                       		swap	d0
0001D4D0                            		; Send VDP command (write to VRAM at address contained in v_gfxbigring)
0001D4D0 2D40 0004                  		move.l	d0,4(a6)
0001D4D4                            
0001D4D4 323C 000D                  		move.w	#@size-1,d1
0001D4D8 6000 FE72                  		bra.w	LoadTiles
0001D4DC                            
0001D4DC                            ; End of function AniArt_GiantRing
0001D4DC                            ; End of function AniArt_GiantRing
0001D4DC                            
0001D4DC                            		include	"_incObj\21 HUD.asm"
0001D4DC                            ; ---------------------------------------------------------------------------
0001D4DC                            ; Object 21 - SCORE, TIME, RINGS
0001D4DC                            ; ---------------------------------------------------------------------------
0001D4DC                            
0001D4DC                            HUD:
0001D4DC 7000                       		moveq	#0,d0
0001D4DE 1028 0024                  		move.b	obRoutine(a0),d0
0001D4E2 323B 0000                  		move.w	HUD_Index(pc,d0.w),d1
0001D4E6 4EFB 1000                  		jmp	HUD_Index(pc,d1.w)
0001D4EA                            ; ===========================================================================
0001D4EA 0000                       HUD_Index:	dc.w HUD_Main-HUD_Index
0001D4EC 0000                       		dc.w HUD_Flash-HUD_Index
0001D4EE                            ; ===========================================================================
0001D4EE                            
0001D4EE                            HUD_Main:	; Routine 0
0001D4EE 5428 0024                  		addq.b	#2,obRoutine(a0)
0001D4F2 317C 0090 0008             		move.w	#$90,obX(a0)
0001D4F8 317C 0108 000A             		move.w	#$108,obScreenY(a0)
0001D4FE 217C 0000 0000 0004        		move.l	#Map_HUD,obMap(a0)
0001D506 317C 06CA 0002             		move.w	#$6CA,obGfx(a0)
0001D50C 117C 0000 0001             		move.b	#0,obRender(a0)
0001D512 117C 0000 0018             		move.b	#0,obPriority(a0)
0001D518                            
0001D518                            HUD_Flash:	; Routine 2
0001D518 4A78 FE20                  		tst.w	(v_rings).w	; do you have any rings?
0001D51C 6700                       		beq.s	@norings	; if not, branch
0001D51E 4228 001A                  		clr.b	obFrame(a0)	; make all counters yellow
0001D522 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001D528                            ; ===========================================================================
0001D528                            
0001D528                            @norings:
0001D528 7000                       		moveq	#0,d0
0001D52A 0838 0003 FE05             		btst	#3,(v_framebyte).w
0001D530 6600                       		bne.s	@display
0001D532 5240                       		addq.w	#1,d0		; make ring counter flash red
0001D534 0C38 0009 FE23             		cmpi.b	#9,(v_timemin).w ; have	9 minutes elapsed?
0001D53A 6600                       		bne.s	@display	; if not, branch
0001D53C 5440                       		addq.w	#2,d0		; make time counter flash red
0001D53E                            
0001D53E                            	@display:
0001D53E 1140 001A                  		move.b	d0,obFrame(a0)
0001D542 4EF9 0000 E428             		jmp	DisplaySprite
0001D542 4EF9 0000 E428             		jmp	DisplaySprite
0001D548                            Map_HUD:	include	"_maps\HUD.asm"
0001D548                            ; ================================================================================
0001D548                            ; Sprite Mappings - generated by Flex 2 Sat Jan 02 2021 04:27:56 GMT-0500 (Eastern Standard Time)
0001D548                            ; ================================================================================
0001D548                            
0001D548                            DATACN6X7TKSPYK:
0001D548 0000 0000                  	dc.w DATACN6X7TKSPYK_0-DATACN6X7TKSPYK, DATACN6X7TKSPYK_1-DATACN6X7TKSPYK
0001D54C 0000 0000                  	dc.w DATACN6X7TKSPYK_2-DATACN6X7TKSPYK, DATACN6X7TKSPYK_3-DATACN6X7TKSPYK
0001D550 09                         DATACN6X7TKSPYK_0: dc.b $9
0001D551 800D A000 00               	dc.b $80, $D, $A0, $0, $0
0001D556 800D A018 20               	dc.b $80, $D, $A0, $18, $20
0001D55B 800D A020 40               	dc.b $80, $D, $A0, $20, $40
0001D560 900D A010 00               	dc.b $90, $D, $A0, $10, $0
0001D565 900D A028 28               	dc.b $90, $D, $A0, $28, $28
0001D56A A00D A008 00               	dc.b $A0, $D, $A0, $8, $0
0001D56F A009 A030 30               	dc.b $A0, $9, $A0, $30, $30
0001D574 4005 810A 00               	dc.b $40, $5, $81, $A, $0
0001D579 400D 810E 10               	dc.b $40, $D, $81, $E, $10
0001D57E 09                         DATACN6X7TKSPYK_1: dc.b $9
0001D57F 800D A000 00               	dc.b $80, $D, $A0, $0, $0
0001D584 800D A018 20               	dc.b $80, $D, $A0, $18, $20
0001D589 800D A020 40               	dc.b $80, $D, $A0, $20, $40
0001D58E 900D A010 00               	dc.b $90, $D, $A0, $10, $0
0001D593 900D A028 28               	dc.b $90, $D, $A0, $28, $28
0001D598 A00D 8008 00               	dc.b $A0, $D, $80, $8, $0
0001D59D A009 A030 30               	dc.b $A0, $9, $A0, $30, $30
0001D5A2 4005 810A 00               	dc.b $40, $5, $81, $A, $0
0001D5A7 400D 810E 10               	dc.b $40, $D, $81, $E, $10
0001D5AC 09                         DATACN6X7TKSPYK_2: dc.b $9
0001D5AD 800D A000 00               	dc.b $80, $D, $A0, $0, $0
0001D5B2 800D A018 20               	dc.b $80, $D, $A0, $18, $20
0001D5B7 800D A020 40               	dc.b $80, $D, $A0, $20, $40
0001D5BC 900D 8010 00               	dc.b $90, $D, $80, $10, $0
0001D5C1 900D A028 28               	dc.b $90, $D, $A0, $28, $28
0001D5C6 A00D A008 00               	dc.b $A0, $D, $A0, $8, $0
0001D5CB A009 A030 30               	dc.b $A0, $9, $A0, $30, $30
0001D5D0 4005 810A 00               	dc.b $40, $5, $81, $A, $0
0001D5D5 400D 810E 10               	dc.b $40, $D, $81, $E, $10
0001D5DA 09                         DATACN6X7TKSPYK_3: dc.b $9
0001D5DB 800D A000 00               	dc.b $80, $D, $A0, $0, $0
0001D5E0 800D A018 20               	dc.b $80, $D, $A0, $18, $20
0001D5E5 800D A020 40               	dc.b $80, $D, $A0, $20, $40
0001D5EA 900D 8010 00               	dc.b $90, $D, $80, $10, $0
0001D5EF 900D A028 28               	dc.b $90, $D, $A0, $28, $28
0001D5F4 A00D 8008 00               	dc.b $A0, $D, $80, $8, $0
0001D5F9 A009 A030 30               	dc.b $A0, $9, $A0, $30, $30
0001D5FE 4005 810A 00               	dc.b $40, $5, $81, $A, $0
0001D603 400D 810E 10               	dc.b $40, $D, $81, $E, $10
0001D608                            	even
0001D608                            	even
0001D608                            
0001D608                            ; ---------------------------------------------------------------------------
0001D608                            ; Add points subroutine
0001D608                            ; ---------------------------------------------------------------------------
0001D608                            
0001D608                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001D608                            
0001D608                            
0001D608                            AddPoints:
0001D608 11FC 0001 FE1F             		move.b	#1,(f_scorecount).w ; set score counter to update
0001D60E                            
0001D60E 45F8 FFC0                  		lea	(v_scorecopy).w,a2
0001D612 47F8 FE26                  		lea	(v_score).w,a3
0001D616 D193                       		add.l	d0,(a3)		; add d0*10 to the score
0001D618 223C 000F 423F             		move.l	#999999,d1
0001D61E B293                       		cmp.l	(a3),d1		; is score below 999999?
0001D620 6200 0000                  		bhi.w	@belowmax	; if yes, branch
0001D624 2681                       		move.l	d1,(a3)		; reset	score to 999999
0001D626 2481                       		move.l	d1,(a2)
0001D628                            
0001D628                            	@belowmax:
0001D628 2013                       		move.l	(a3),d0
0001D62A B092                       		cmp.l	(a2),d0
0001D62C 6500 0000                  		blo.w	@locret_1C6B6
0001D630 2480                       		move.l	d0,(a2)
0001D632                            
0001D632                            
0001D632                            @locret_1C6B6:
0001D632                            @noextralife:
0001D632 4E75                       		rts	
0001D634                            ; End of function AddPoints
0001D634                            
0001D634                            		include	"_inc\HUD_Update.asm"
0001D634                            ; ---------------------------------------------------------------------------
0001D634                            ; Subroutine to	update the HUD
0001D634                            ; ---------------------------------------------------------------------------
0001D634                            
0001D634                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001D634                            
0001D634                            hudVRAM:	macro loc
0001D634                            		move.l	#($40000000+((loc&$3FFF)<<16)+((loc&$C000)>>14)),d0
0001D634                            		endm
0001D634                            
0001D634                            
0001D634                            HUD_Update:
0001D634 4A78 FFFA                  		tst.w	(f_debugmode).w	; is debug mode	on?
0001D638 6600 0000                  		bne.w	HudDebug	; if yes, branch
0001D63C 4A38 FE1F                  		tst.b	(f_scorecount).w ; does the score need updating?
0001D640 6700                       		beq.s	@chkrings	; if not, branch
0001D642                            
0001D642 4238 FE1F                  		clr.b	(f_scorecount).w
0001D646 203C 5C80 0003             		hudVRAM	$DC80		; set VRAM address
0001D64C 2238 FE26                  		move.l	(v_score).w,d1	; load score
0001D650 6100 0000                  		bsr.w	Hud_Score
0001D654                            
0001D654                            	@chkrings:
0001D654 4A38 FE1D                  		tst.b	(f_ringcount).w	; does the ring	counter	need updating?
0001D658 6700                       		beq.s	@chktime	; if not, branch
0001D65A 6A00                       		bpl.s	@notzero
0001D65C 6100 0000                  		bsr.w	Hud_LoadZero	; reset rings to 0 if Sonic is hit
0001D660                            
0001D660                            	@notzero:
0001D660 4238 FE1D                  		clr.b	(f_ringcount).w
0001D664 203C 5F40 0003             		hudVRAM	$DF40		; set VRAM address
0001D66A 7200                       		moveq	#0,d1
0001D66C 3238 FE20                  		move.w	(v_rings).w,d1	; load number of rings
0001D670 6100 0000                  		bsr.w	Hud_Rings
0001D674                            
0001D674                            	@chktime:
0001D674 4A38 FE1E                  		tst.b	(f_timecount).w	; does the time	need updating?
0001D678 6700                       		beq.s	@chklives	; if not, branch
0001D67A 4A78 F63A                  		tst.w	(f_pause).w	; is the game paused?
0001D67E 6600                       		bne.s	@chklives	; if yes, branch
0001D680 43F8 FE22                  		lea	(v_time).w,a1
0001D684 0C99 0009 3B3B             		cmpi.l	#(9*$10000)+(59*$100)+59,(a1)+ ; is the time 9:59:59?
0001D68A 6700                       		beq.s	TimeOver	; if yes, branch
0001D68C                            
0001D68C 5221                       		addq.b	#1,-(a1)	; increment 1/60s counter
0001D68E 0C11 003C                  		cmpi.b	#60,(a1)	; check if passed 60
0001D692 6500                       		bcs.s	@chklives
0001D694 12BC 0000                  		move.b	#0,(a1)
0001D698 5221                       		addq.b	#1,-(a1)	; increment second counter
0001D69A 0C11 003C                  		cmpi.b	#60,(a1)	; check if passed 60
0001D69E 6500                       		bcs.s	@updatetime
0001D6A0 12BC 0000                  		move.b	#0,(a1)
0001D6A4 5221                       		addq.b	#1,-(a1)	; increment minute counter
0001D6A6 0C11 0009                  		cmpi.b	#9,(a1)		; check if passed 9
0001D6AA 6500                       		bcs.s	@updatetime
0001D6AC 12BC 0009                  		move.b	#9,(a1)		; keep as 9
0001D6B0                            
0001D6B0                            	@updatetime:
0001D6B0 203C 5E40 0003             		hudVRAM	$DE40
0001D6B6 7200                       		moveq	#0,d1
0001D6B8 1238 FE23                  		move.b	(v_timemin).w,d1 ; load	minutes
0001D6BC 6100 0000                  		bsr.w	Hud_Mins
0001D6C0 203C 5EC0 0003             		hudVRAM	$DEC0
0001D6C6 7200                       		moveq	#0,d1
0001D6C8 1238 FE24                  		move.b	(v_timesec).w,d1 ; load	seconds
0001D6CC 6100 0000                  		bsr.w	Hud_Secs
0001D6D0                            
0001D6D0                            	@chklives:
0001D6D0 4A38 FE1C                  		tst.b	(f_lifecount).w ; does the lives counter need updating?
0001D6D4 6700                       		beq.s	@chkbonus	; if not, branch
0001D6D6 4238 FE1C                  		clr.b	(f_lifecount).w
0001D6DA 6100 0000                  		bsr.w	Hud_Lives
0001D6DE                            
0001D6DE                            	@chkbonus:
0001D6DE 4A38 F7D6                  		tst.b	(f_endactbonus).w ; do time/ring bonus counters need updating?
0001D6E2 6700                       		beq.s	@finish		; if not, branch
0001D6E4 4238 F7D6                  		clr.b	(f_endactbonus).w
0001D6F2 7200                       		moveq	#0,d1
0001D6F4 3238 F7D2                  		move.w	(v_timebonus).w,d1 ; load time bonus
0001D6F8 6100 0000                  		bsr.w	Hud_TimeRingBonus
0001D6FC 7200                       		moveq	#0,d1
0001D6FE 3238 F7D4                  		move.w	(v_ringbonus).w,d1 ; load ring bonus
0001D702 6100 0000                  		bsr.w	Hud_TimeRingBonus
0001D706                            
0001D706                            	@finish:
0001D706 4E75                       		rts	
0001D708                            ; ===========================================================================
0001D708                            
0001D708                            TimeOver:
0001D708 4238 FE1E                  		clr.b	(f_timecount).w
0001D70C 41F8 D000                  		lea	(v_player).w,a0
0001D710 2448                       		movea.l	a0,a2
0001D712 6100 E90C                  		bsr.w	KillSonic
0001D716 11FC 0001 FE1A             		move.b	#1,(f_timeover).w
0001D71C 4E75                       		rts	
0001D71E                            ; ===========================================================================
0001D71E                            
0001D71E                            HudDebug:
0001D71E 6100 0000                  		bsr.w	HudDb_XY
0001D722 4A38 FE1D                  		tst.b	(f_ringcount).w	; does the ring	counter	need updating?
0001D726 6700                       		beq.s	@objcounter	; if not, branch
0001D728 6A00                       		bpl.s	@notzero
0001D72A 6100 0000                  		bsr.w	Hud_LoadZero	; reset rings to 0 if Sonic is hit
0001D72E                            
0001D72E                            	@notzero:
0001D72E 4238 FE1D                  		clr.b	(f_ringcount).w
0001D732 203C 5F40 0003             		hudVRAM	$DF40		; set VRAM address
0001D738 7200                       		moveq	#0,d1
0001D73A 3238 FE20                  		move.w	(v_rings).w,d1	; load number of rings
0001D73E 6100 0000                  		bsr.w	Hud_Rings
0001D742                            
0001D742                            	@objcounter:
0001D742 203C 5EC0 0003             		hudVRAM	$DEC0		; set VRAM address
0001D748 7200                       		moveq	#0,d1
0001D74A 1238 F62C                  		move.b	(v_spritecount).w,d1 ; load "number of objects" counter
0001D74E 6100 0000                  		bsr.w	Hud_Secs
0001D752 4A38 FE1C                  		tst.b	(f_lifecount).w ; does the lives counter need updating?
0001D756 6700                       		beq.s	@chkbonus	; if not, branch
0001D758 4238 FE1C                  		clr.b	(f_lifecount).w
0001D75C 6100 0000                  		bsr.w	Hud_Lives
0001D760                            
0001D760                            	@chkbonus:
0001D760 4A38 F7D6                  		tst.b	(f_endactbonus).w ; does the ring/time bonus counter need updating?
0001D764 6700                       		beq.s	@finish		; if not, branch
0001D766 4238 F7D6                  		clr.b	(f_endactbonus).w
0001D774 7200                       		moveq	#0,d1
0001D776 3238 F7D2                  		move.w	(v_timebonus).w,d1 ; load time bonus
0001D77A 6100 0000                  		bsr.w	Hud_TimeRingBonus
0001D77E 7200                       		moveq	#0,d1
0001D780 3238 F7D4                  		move.w	(v_ringbonus).w,d1 ; load ring bonus
0001D784 6100 0000                  		bsr.w	Hud_TimeRingBonus
0001D788                            
0001D788                            	@finish:
0001D788 4E75                       		rts	
0001D78A                            ; End of function HUD_Update
0001D78A                            
0001D78A                            ; ---------------------------------------------------------------------------
0001D78A                            ; Subroutine to	load "0" on the	HUD
0001D78A                            ; ---------------------------------------------------------------------------
0001D78A                            
0001D78A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001D78A                            
0001D78A                            
0001D78A                            Hud_LoadZero:
0001D794 45FA 0000                  		lea	Hud_TilesZero(pc),a2
0001D798 343C 0002                  		move.w	#2,d2
0001D79C 6000                       		bra.s	loc_1C83E
0001D79E                            ; End of function Hud_LoadZero
0001D79E                            
0001D79E                            ; ---------------------------------------------------------------------------
0001D79E                            ; Subroutine to	load uncompressed HUD patterns ("E", "0", colon)
0001D79E                            ; ---------------------------------------------------------------------------
0001D79E                            
0001D79E                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001D79E                            
0001D79E                            
0001D79E                            Hud_Base:
0001D79E 4DF9 00C0 0000             		lea	($C00000).l,a6
0001D7A4 6100 0000                  		bsr.w	Hud_Lives
0001D7B2 45FA 0000                  		lea	Hud_TilesBase(pc),a2
0001D7B6 343C 000E                  		move.w	#$E,d2
0001D7BA                            
0001D7BA                            loc_1C83E:
0001D7BA 43FA 0000                  		lea	Art_Hud(pc),a1
0001D7BE                            
0001D7BE                            loc_1C842:
0001D7BE 323C 000F                  		move.w	#$F,d1
0001D7C2 101A                       		move.b	(a2)+,d0
0001D7C4 6B00                       		bmi.s	loc_1C85E
0001D7C6 4880                       		ext.w	d0
0001D7C8 EB48                       		lsl.w	#5,d0
0001D7CA 47F1 0000                  		lea	(a1,d0.w),a3
0001D7CE                            
0001D7CE                            loc_1C852:
0001D7CE 2C9B                       		move.l	(a3)+,(a6)
0001D7D0 51C9 FFFC                  		dbf	d1,loc_1C852
0001D7D4                            
0001D7D4                            loc_1C858:
0001D7D4 51CA FFE8                  		dbf	d2,loc_1C842
0001D7D8                            
0001D7D8 4E75                       		rts	
0001D7DA                            ; ===========================================================================
0001D7DA                            
0001D7DA                            loc_1C85E:
0001D7DA 2CBC 0000 0000             		move.l	#0,(a6)
0001D7E0 51C9 FFF8                  		dbf	d1,loc_1C85E
0001D7E4                            
0001D7E4 60EE                       		bra.s	loc_1C858
0001D7E6                            ; End of function Hud_Base
0001D7E6                            
0001D7E6                            ; ===========================================================================
0001D7E6 16FF FFFF FFFF FF00 0014+  Hud_TilesBase:	dc.b $16, $FF, $FF, $FF, $FF, $FF, $FF,	0, 0, $14, 0, 0
0001D7F2 FFFF 0000                  Hud_TilesZero:	dc.b $FF, $FF, 0, 0
0001D7F6                            ; ---------------------------------------------------------------------------
0001D7F6                            ; Subroutine to	load debug mode	numbers	patterns
0001D7F6                            ; ---------------------------------------------------------------------------
0001D7F6                            
0001D7F6                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001D7F6                            
0001D7F6                            
0001D7F6                            HudDb_XY:
0001D800 3238 F700                  		move.w	(v_screenposx).w,d1 ; load camera x-position
0001D804 4841                       		swap	d1
0001D806 3238 D008                  		move.w	(v_player+obX).w,d1 ; load Sonic's x-position
0001D80A 6100                       		bsr.s	HudDb_XY2
0001D80C 3238 F704                  		move.w	(v_screenposy).w,d1 ; load camera y-position
0001D810 4841                       		swap	d1
0001D812 3238 D00C                  		move.w	(v_player+obY).w,d1 ; load Sonic's y-position
0001D816                            ; End of function HudDb_XY
0001D816                            
0001D816                            
0001D816                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001D816                            
0001D816                            
0001D816                            HudDb_XY2:
0001D816 7C07                       		moveq	#7,d6
0001D818 43F9 0000 03DE             		lea	(Art_Text).l,a1
0001D81E                            
0001D81E                            HudDb_XYLoop:
0001D81E E959                       		rol.w	#4,d1
0001D820 3401                       		move.w	d1,d2
0001D822 0242 000F                  		andi.w	#$F,d2
0001D826 0C42 000A                  		cmpi.w	#$A,d2
0001D82A 6500                       		bcs.s	loc_1C8B2
0001D82C 5E42                       		addq.w	#7,d2
0001D82E                            
0001D82E                            loc_1C8B2:
0001D82E EB4A                       		lsl.w	#5,d2
0001D830 47F1 2000                  		lea	(a1,d2.w),a3
0001D834 2C9B                       		move.l	(a3)+,(a6)
0001D836 2C9B                       		move.l	(a3)+,(a6)
0001D838 2C9B                       		move.l	(a3)+,(a6)
0001D83A 2C9B                       		move.l	(a3)+,(a6)
0001D83C 2C9B                       		move.l	(a3)+,(a6)
0001D83E 2C9B                       		move.l	(a3)+,(a6)
0001D840 2C9B                       		move.l	(a3)+,(a6)
0001D842 2C9B                       		move.l	(a3)+,(a6)
0001D844 4841                       		swap	d1
0001D846 51CE FFD6                  		dbf	d6,HudDb_XYLoop	; repeat 7 more	times
0001D84A                            
0001D84A 4E75                       		rts	
0001D84C                            ; End of function HudDb_XY2
0001D84C                            
0001D84C                            ; ---------------------------------------------------------------------------
0001D84C                            ; Subroutine to	load rings numbers patterns
0001D84C                            ; ---------------------------------------------------------------------------
0001D84C                            
0001D84C                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001D84C                            
0001D84C                            
0001D84C                            Hud_Rings:
0001D84C 45F9 0000 0000             		lea	(Hud_100).l,a2
0001D852 7C02                       		moveq	#2,d6
0001D854 6000                       		bra.s	Hud_LoadArt
0001D856                            ; End of function Hud_Rings
0001D856                            
0001D856                            ; ---------------------------------------------------------------------------
0001D856                            ; Subroutine to	load score numbers patterns
0001D856                            ; ---------------------------------------------------------------------------
0001D856                            
0001D856                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001D856                            
0001D856                            
0001D856                            Hud_Score:
0001D856 45F9 0000 0000             		lea	(Hud_100000).l,a2
0001D85C 7C05                       		moveq	#5,d6
0001D85E                            
0001D85E                            Hud_LoadArt:
0001D85E 7800                       		moveq	#0,d4
0001D860 43FA 0000                  		lea	Art_Hud(pc),a1
0001D864                            
0001D864                            Hud_ScoreLoop:
0001D864 7400                       		moveq	#0,d2
0001D866 261A                       		move.l	(a2)+,d3
0001D868                            
0001D868                            loc_1C8EC:
0001D868 9283                       		sub.l	d3,d1
0001D86A 6500                       		bcs.s	loc_1C8F4
0001D86C 5242                       		addq.w	#1,d2
0001D86E 60F8                       		bra.s	loc_1C8EC
0001D870                            ; ===========================================================================
0001D870                            
0001D870                            loc_1C8F4:
0001D870 D283                       		add.l	d3,d1
0001D872 4A42                       		tst.w	d2
0001D874 6700                       		beq.s	loc_1C8FE
0001D876 383C 0001                  		move.w	#1,d4
0001D87A                            
0001D87A                            loc_1C8FE:
0001D87A 4A44                       		tst.w	d4
0001D87C 6700                       		beq.s	loc_1C92C
0001D87E ED4A                       		lsl.w	#6,d2
0001D880 2D40 0004                  		move.l	d0,4(a6)
0001D884 47F1 2000                  		lea	(a1,d2.w),a3
0001D888 2C9B                       		move.l	(a3)+,(a6)
0001D88A 2C9B                       		move.l	(a3)+,(a6)
0001D88C 2C9B                       		move.l	(a3)+,(a6)
0001D88E 2C9B                       		move.l	(a3)+,(a6)
0001D890 2C9B                       		move.l	(a3)+,(a6)
0001D892 2C9B                       		move.l	(a3)+,(a6)
0001D894 2C9B                       		move.l	(a3)+,(a6)
0001D896 2C9B                       		move.l	(a3)+,(a6)
0001D898 2C9B                       		move.l	(a3)+,(a6)
0001D89A 2C9B                       		move.l	(a3)+,(a6)
0001D89C 2C9B                       		move.l	(a3)+,(a6)
0001D89E 2C9B                       		move.l	(a3)+,(a6)
0001D8A0 2C9B                       		move.l	(a3)+,(a6)
0001D8A2 2C9B                       		move.l	(a3)+,(a6)
0001D8A4 2C9B                       		move.l	(a3)+,(a6)
0001D8A6 2C9B                       		move.l	(a3)+,(a6)
0001D8A8                            
0001D8A8                            loc_1C92C:
0001D8A8 0680 0040 0000             		addi.l	#$400000,d0
0001D8AE 51CE FFB4                  		dbf	d6,Hud_ScoreLoop
0001D8B2                            
0001D8B2 4E75                       		rts	
0001D8B4                            
0001D8B4                            ; End of function Hud_Score
0001D8B4                            ; End of function Hud_Score
0001D8B4                            
0001D8B4                            ; ---------------------------------------------------------------------------
0001D8B4                            ; Subroutine to	load countdown numbers on the continue screen
0001D8B4                            ; ---------------------------------------------------------------------------
0001D8B4                            
0001D8B4                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001D8B4                            
0001D8B4                            
0001D8B4                            ContScrCounter:
0001D8BE 4DF9 00C0 0000             		lea	(vdp_data_port).l,a6
0001D8C4 45F9 0000 0000             		lea	(Hud_10).l,a2
0001D8CA 7C01                       		moveq	#1,d6
0001D8CC 7800                       		moveq	#0,d4
0001D8CE 43FA 0000                  		lea	Art_Hud(pc),a1 ; load numbers patterns
0001D8D2                            
0001D8D2                            ContScr_Loop:
0001D8D2 7400                       		moveq	#0,d2
0001D8D4 261A                       		move.l	(a2)+,d3
0001D8D6                            
0001D8D6                            loc_1C95A:
0001D8D6 9283                       		sub.l	d3,d1
0001D8D8 6500                       		blo.s	loc_1C962
0001D8DA 5242                       		addq.w	#1,d2
0001D8DC 60F8                       		bra.s	loc_1C95A
0001D8DE                            ; ===========================================================================
0001D8DE                            
0001D8DE                            loc_1C962:
0001D8DE D283                       		add.l	d3,d1
0001D8E0 ED4A                       		lsl.w	#6,d2
0001D8E2 47F1 2000                  		lea	(a1,d2.w),a3
0001D8E6 2C9B                       		move.l	(a3)+,(a6)
0001D8E8 2C9B                       		move.l	(a3)+,(a6)
0001D8EA 2C9B                       		move.l	(a3)+,(a6)
0001D8EC 2C9B                       		move.l	(a3)+,(a6)
0001D8EE 2C9B                       		move.l	(a3)+,(a6)
0001D8F0 2C9B                       		move.l	(a3)+,(a6)
0001D8F2 2C9B                       		move.l	(a3)+,(a6)
0001D8F4 2C9B                       		move.l	(a3)+,(a6)
0001D8F6 2C9B                       		move.l	(a3)+,(a6)
0001D8F8 2C9B                       		move.l	(a3)+,(a6)
0001D8FA 2C9B                       		move.l	(a3)+,(a6)
0001D8FC 2C9B                       		move.l	(a3)+,(a6)
0001D8FE 2C9B                       		move.l	(a3)+,(a6)
0001D900 2C9B                       		move.l	(a3)+,(a6)
0001D902 2C9B                       		move.l	(a3)+,(a6)
0001D904 2C9B                       		move.l	(a3)+,(a6)
0001D906 51CE FFCA                  		dbf	d6,ContScr_Loop	; repeat 1 more	time
0001D90A                            
0001D90A 4E75                       		rts	
0001D90C                            ; End of function ContScrCounter
0001D90C                            
0001D90C                            ; ===========================================================================
0001D90C                            
0001D90C                            		include	"_inc\HUD (part 2).asm"
0001D90C                            ; ---------------------------------------------------------------------------
0001D90C                            ; HUD counter sizes
0001D90C                            ; ---------------------------------------------------------------------------
0001D90C 0001 86A0                  Hud_100000:	dc.l 100000
0001D910 0000 2710                  Hud_10000:	dc.l 10000
0001D914 0000 03E8                  Hud_1000:	dc.l 1000
0001D918 0000 0064                  Hud_100:	dc.l 100
0001D91C 0000 000A                  Hud_10:		dc.l 10
0001D920 0000 0001                  Hud_1:		dc.l 1
0001D924                            
0001D924                            ; ---------------------------------------------------------------------------
0001D924                            ; Subroutine to	load time numbers patterns
0001D924                            ; ---------------------------------------------------------------------------
0001D924                            
0001D924                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001D924                            
0001D924                            
0001D924                            Hud_Mins:
0001D924 45F9 0001 D920             		lea	(Hud_1).l,a2
0001D92A 7C00                       		moveq	#0,d6
0001D92C 6000                       		bra.s	loc_1C9BA
0001D92E                            ; End of function Hud_Mins
0001D92E                            
0001D92E                            
0001D92E                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001D92E                            
0001D92E                            
0001D92E                            Hud_Secs:
0001D92E 45F9 0001 D91C             		lea	(Hud_10).l,a2
0001D934 7C01                       		moveq	#1,d6
0001D936                            
0001D936                            loc_1C9BA:
0001D936 7800                       		moveq	#0,d4
0001D938 43FA 0000                  		lea	Art_Hud(pc),a1
0001D93C                            
0001D93C                            Hud_TimeLoop:
0001D93C 7400                       		moveq	#0,d2
0001D93E 261A                       		move.l	(a2)+,d3
0001D940                            
0001D940                            loc_1C9C4:
0001D940 9283                       		sub.l	d3,d1
0001D942 6500                       		bcs.s	loc_1C9CC
0001D944 5242                       		addq.w	#1,d2
0001D946 60F8                       		bra.s	loc_1C9C4
0001D948                            ; ===========================================================================
0001D948                            
0001D948                            loc_1C9CC:
0001D948 D283                       		add.l	d3,d1
0001D94A 4A42                       		tst.w	d2
0001D94C 6700                       		beq.s	loc_1C9D6
0001D94E 383C 0001                  		move.w	#1,d4
0001D952                            
0001D952                            loc_1C9D6:
0001D952 ED4A                       		lsl.w	#6,d2
0001D954 2D40 0004                  		move.l	d0,4(a6)
0001D958 47F1 2000                  		lea	(a1,d2.w),a3
0001D95C 2C9B                       		move.l	(a3)+,(a6)
0001D95E 2C9B                       		move.l	(a3)+,(a6)
0001D960 2C9B                       		move.l	(a3)+,(a6)
0001D962 2C9B                       		move.l	(a3)+,(a6)
0001D964 2C9B                       		move.l	(a3)+,(a6)
0001D966 2C9B                       		move.l	(a3)+,(a6)
0001D968 2C9B                       		move.l	(a3)+,(a6)
0001D96A 2C9B                       		move.l	(a3)+,(a6)
0001D96C 2C9B                       		move.l	(a3)+,(a6)
0001D96E 2C9B                       		move.l	(a3)+,(a6)
0001D970 2C9B                       		move.l	(a3)+,(a6)
0001D972 2C9B                       		move.l	(a3)+,(a6)
0001D974 2C9B                       		move.l	(a3)+,(a6)
0001D976 2C9B                       		move.l	(a3)+,(a6)
0001D978 2C9B                       		move.l	(a3)+,(a6)
0001D97A 2C9B                       		move.l	(a3)+,(a6)
0001D97C 0680 0040 0000             		addi.l	#$400000,d0
0001D982 51CE FFB8                  		dbf	d6,Hud_TimeLoop
0001D986                            
0001D986 4E75                       		rts	
0001D988                            ; End of function Hud_Secs
0001D988                            
0001D988                            ; ---------------------------------------------------------------------------
0001D988                            ; Subroutine to	load time/ring bonus numbers patterns
0001D988                            ; ---------------------------------------------------------------------------
0001D988                            
0001D988                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001D988                            
0001D988                            
0001D988                            Hud_TimeRingBonus:
0001D988 45F9 0001 D914             		lea	(Hud_1000).l,a2
0001D98E 7C03                       		moveq	#3,d6
0001D990 7800                       		moveq	#0,d4
0001D992 43FA 0000                  		lea	Art_Hud(pc),a1
0001D996                            
0001D996                            Hud_BonusLoop:
0001D996 7400                       		moveq	#0,d2
0001D998 261A                       		move.l	(a2)+,d3
0001D99A                            
0001D99A                            loc_1CA1E:
0001D99A 9283                       		sub.l	d3,d1
0001D99C 6500                       		bcs.s	loc_1CA26
0001D99E 5242                       		addq.w	#1,d2
0001D9A0 60F8                       		bra.s	loc_1CA1E
0001D9A2                            ; ===========================================================================
0001D9A2                            
0001D9A2                            loc_1CA26:
0001D9A2 D283                       		add.l	d3,d1
0001D9A4 4A42                       		tst.w	d2
0001D9A6 6700                       		beq.s	loc_1CA30
0001D9A8 383C 0001                  		move.w	#1,d4
0001D9AC                            
0001D9AC                            loc_1CA30:
0001D9AC 4A44                       		tst.w	d4
0001D9AE 6700                       		beq.s	Hud_ClrBonus
0001D9B0 ED4A                       		lsl.w	#6,d2
0001D9B2 47F1 2000                  		lea	(a1,d2.w),a3
0001D9B6 2C9B                       		move.l	(a3)+,(a6)
0001D9B8 2C9B                       		move.l	(a3)+,(a6)
0001D9BA 2C9B                       		move.l	(a3)+,(a6)
0001D9BC 2C9B                       		move.l	(a3)+,(a6)
0001D9BE 2C9B                       		move.l	(a3)+,(a6)
0001D9C0 2C9B                       		move.l	(a3)+,(a6)
0001D9C2 2C9B                       		move.l	(a3)+,(a6)
0001D9C4 2C9B                       		move.l	(a3)+,(a6)
0001D9C6 2C9B                       		move.l	(a3)+,(a6)
0001D9C8 2C9B                       		move.l	(a3)+,(a6)
0001D9CA 2C9B                       		move.l	(a3)+,(a6)
0001D9CC 2C9B                       		move.l	(a3)+,(a6)
0001D9CE 2C9B                       		move.l	(a3)+,(a6)
0001D9D0 2C9B                       		move.l	(a3)+,(a6)
0001D9D2 2C9B                       		move.l	(a3)+,(a6)
0001D9D4 2C9B                       		move.l	(a3)+,(a6)
0001D9D6                            
0001D9D6                            loc_1CA5A:
0001D9D6 51CE FFBE                  		dbf	d6,Hud_BonusLoop ; repeat 3 more times
0001D9DA                            
0001D9DA 4E75                       		rts	
0001D9DC                            ; ===========================================================================
0001D9DC                            
0001D9DC                            Hud_ClrBonus:
0001D9DC 7A0F                       		moveq	#$F,d5
0001D9DE                            
0001D9DE                            Hud_ClrBonusLoop:
0001D9DE 2CBC 0000 0000             		move.l	#0,(a6)
0001D9E4 51CD FFF8                  		dbf	d5,Hud_ClrBonusLoop
0001D9E8                            
0001D9E8 60EC                       		bra.s	loc_1CA5A
0001D9EA                            ; End of function Hud_TimeRingBonus
0001D9EA                            
0001D9EA                            ; ---------------------------------------------------------------------------
0001D9EA                            ; Subroutine to	load uncompressed lives	counter	patterns
0001D9EA                            ; ---------------------------------------------------------------------------
0001D9EA                            
0001D9EA                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001D9EA                            
0001D9EA                            
0001D9EA                            Hud_Lives:
0001D9EA 203C 7BA0 0003             		hudVRAM	$FBA0		; set VRAM address
0001D9F0 7200                       		moveq	#0,d1
0001D9F2 1238 FE12                  		move.b	(v_lives).w,d1	; load number of lives
0001D9F6 45F9 0001 D91C             		lea	(Hud_10).l,a2
0001D9FC 7C01                       		moveq	#1,d6
0001D9FE 7800                       		moveq	#0,d4
0001DA00 43FA 0000                  		lea	Art_LivesNums(pc),a1
0001DA04                            
0001DA04                            Hud_LivesLoop:
0001DA04 2D40 0004                  		move.l	d0,4(a6)
0001DA08 7400                       		moveq	#0,d2
0001DA0A 261A                       		move.l	(a2)+,d3
0001DA0C                            
0001DA0C                            loc_1CA90:
0001DA0C 9283                       		sub.l	d3,d1
0001DA0E 6500                       		bcs.s	loc_1CA98
0001DA10 5242                       		addq.w	#1,d2
0001DA12 60F8                       		bra.s	loc_1CA90
0001DA14                            ; ===========================================================================
0001DA14                            
0001DA14                            loc_1CA98:
0001DA14 D283                       		add.l	d3,d1
0001DA16 4A42                       		tst.w	d2
0001DA18 6700                       		beq.s	loc_1CAA2
0001DA1A 383C 0001                  		move.w	#1,d4
0001DA1E                            
0001DA1E                            loc_1CAA2:
0001DA1E 4A44                       		tst.w	d4
0001DA20 6700                       		beq.s	Hud_ClrLives
0001DA22                            
0001DA22                            loc_1CAA6:
0001DA22 EB4A                       		lsl.w	#5,d2
0001DA24 47F1 2000                  		lea	(a1,d2.w),a3
0001DA28 2C9B                       		move.l	(a3)+,(a6)
0001DA2A 2C9B                       		move.l	(a3)+,(a6)
0001DA2C 2C9B                       		move.l	(a3)+,(a6)
0001DA2E 2C9B                       		move.l	(a3)+,(a6)
0001DA30 2C9B                       		move.l	(a3)+,(a6)
0001DA32 2C9B                       		move.l	(a3)+,(a6)
0001DA34 2C9B                       		move.l	(a3)+,(a6)
0001DA36 2C9B                       		move.l	(a3)+,(a6)
0001DA38                            
0001DA38                            loc_1CABC:
0001DA38 0680 0040 0000             		addi.l	#$400000,d0
0001DA3E 51CE FFC4                  		dbf	d6,Hud_LivesLoop ; repeat 1 more time
0001DA42                            
0001DA42 4E75                       		rts	
0001DA44                            ; ===========================================================================
0001DA44                            
0001DA44                            Hud_ClrLives:
0001DA44 4A46                       		tst.w	d6
0001DA46 67DA                       		beq.s	loc_1CAA6
0001DA48 7A07                       		moveq	#7,d5
0001DA4A                            
0001DA4A                            Hud_ClrLivesLoop:
0001DA4A 2CBC 0000 0000             		move.l	#0,(a6)
0001DA50 51CD FFF8                  		dbf	d5,Hud_ClrLivesLoop
0001DA54 60E2                       		bra.s	loc_1CABC
0001DA56                            ; End of function Hud_Lives
0001DA56                            ; End of function Hud_Lives
0001DA56                            
0001DA56                            Art_Hud:	incbin	"artunc\HUD Numbers.bin" ; 8x16 pixel numbers on HUD
0001DD56                            		even
0001DD56                            Art_LivesNums:	incbin	"artunc\Lives Counter Numbers.bin" ; 8x8 pixel numbers on lives counter
0001DE96                            		even
0001DE96                            
0001DE96                            		include	"_incObj\DebugMode.asm"
0001DE96                            ; ---------------------------------------------------------------------------
0001DE96                            ; When debug mode is currently in use
0001DE96                            ; ---------------------------------------------------------------------------
0001DE96                            
0001DE96                            DebugMode:
0001DE96 7000                       		moveq	#0,d0
0001DE98 1038 FE08                  		move.b	(v_debuguse).w,d0
0001DE9C 323B 0000                  		move.w	Debug_Index(pc,d0.w),d1
0001DEA0 4EFB 1000                  		jmp	Debug_Index(pc,d1.w)
0001DEA4                            ; ===========================================================================
0001DEA4 0000                       Debug_Index:	dc.w Debug_Main-Debug_Index
0001DEA6 0000                       		dc.w Debug_Action-Debug_Index
0001DEA8                            ; ===========================================================================
0001DEA8                            
0001DEA8                            Debug_Main:	; Routine 0
0001DEA8 5438 FE08                  		addq.b	#2,(v_debuguse).w
0001DEAC 31F8 F72C FEF0             		move.w	(v_limittop2).w,(v_limittopdb).w ; buffer level x-boundary
0001DEB2 31F8 F726 FEF2             		move.w	(v_limitbtm1).w,(v_limitbtmdb).w ; buffer level y-boundary
0001DEB8 31FC 0000 F72C             		move.w	#0,(v_limittop2).w
0001DEBE 31FC 0720 F726             		move.w	#$720,(v_limitbtm1).w
0001DEC4 0278 07FF D00C             		andi.w	#$7FF,(v_player+obY).w
0001DECA 0278 07FF F704             		andi.w	#$7FF,(v_screenposy).w
0001DED0 0278 03FF F70C             		andi.w	#$3FF,(v_bgscreenposy).w
0001DED6 117C 0000 001A             		move.b	#0,obFrame(a0)
0001DEDC 117C 0000 001C             		move.b	#id_Walk,obAnim(a0)
0001DEE2 0C38 0000 F600             		cmpi.b	#id_Special,(v_gamemode).w ; is game mode $10 (special stage)?
0001DEE8 6600                       		bne.s	@islevel	; if not, branch
0001DEEA                            
0001DEEA 31FC 0000 F782             		move.w	#0,(v_ssrotate).w ; stop special stage rotating
0001DEF0 31FC 0000 F780             		move.w	#0,(v_ssangle).w ; make	special	stage "upright"
0001DEF6 7006                       		moveq	#6,d0		; use 6th debug	item list
0001DEF8 6000                       		bra.s	@selectlist
0001DEFA                            ; ===========================================================================
0001DEFA                            
0001DEFA                            @islevel:
0001DEFA 7000                       		moveq	#0,d0
0001DEFC 1038 FE10                  		move.b	(v_zone).w,d0
0001DF00                            
0001DF00                            @selectlist:
0001DF00 45F9 0000 0000             		lea	(DebugList).l,a2
0001DF06 D040                       		add.w	d0,d0
0001DF08 D4F2 0000                  		adda.w	(a2,d0.w),a2
0001DF0C 3C1A                       		move.w	(a2)+,d6
0001DF0E BC38 FE06                  		cmp.b	(v_debugitem).w,d6 ; have you gone past the last item?
0001DF12 6200                       		bhi.s	@noreset	; if not, branch
0001DF14 11FC 0000 FE06             		move.b	#0,(v_debugitem).w ; back to start of list
0001DF1A                            
0001DF1A                            	@noreset:
0001DF1A 6100 0000                  		bsr.w	Debug_ShowItem
0001DF1E 11FC 000C FE0A             		move.b	#12,(v_debugxspeed).w
0001DF24 11FC 0001 FE0B             		move.b	#1,(v_debugyspeed).w
0001DF2A                            
0001DF2A                            Debug_Action:	; Routine 2
0001DF2A 7006                       		moveq	#6,d0
0001DF2C 0C38 0000 F600             		cmpi.b	#id_Special,(v_gamemode).w
0001DF32 6700                       		beq.s	@isntlevel
0001DF34                            
0001DF34 7000                       		moveq	#0,d0
0001DF36 1038 FE10                  		move.b	(v_zone).w,d0
0001DF3A                            
0001DF3A                            	@isntlevel:
0001DF3A 45F9 0000 0000             		lea	(DebugList).l,a2
0001DF40 D040                       		add.w	d0,d0
0001DF42 D4F2 0000                  		adda.w	(a2,d0.w),a2
0001DF46 3C1A                       		move.w	(a2)+,d6
0001DF48 6100 0000                  		bsr.w	Debug_Control
0001DF4C 4EF9 0000 E428             		jmp	(DisplaySprite).l
0001DF52                            
0001DF52                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001DF52                            
0001DF52                            
0001DF52                            Debug_Control:
0001DF52 7800                       		moveq	#0,d4
0001DF54 323C 0001                  		move.w	#1,d1
0001DF58 1838 F605                  		move.b	(v_jpadpress1).w,d4
0001DF5C 0244 000F                  		andi.w	#btnDir,d4	; is up/down/left/right	pressed?
0001DF60 6600                       		bne.s	@dirpressed	; if yes, branch
0001DF62                            
0001DF62 1038 F604                  		move.b	(v_jpadhold1).w,d0
0001DF66 0240 000F                  		andi.w	#btnDir,d0	; is up/down/left/right	held?
0001DF6A 6600                       		bne.s	@dirheld	; if yes, branch
0001DF6C                            
0001DF6C 11FC 000C FE0A             		move.b	#12,(v_debugxspeed).w
0001DF72 11FC 000F FE0B             		move.b	#15,(v_debugyspeed).w
0001DF78 6000 0000                  		bra.w	Debug_ChgItem
0001DF7C                            ; ===========================================================================
0001DF7C                            
0001DF7C                            @dirheld:
0001DF7C 5338 FE0A                  		subq.b	#1,(v_debugxspeed).w
0001DF80 6600                       		bne.s	loc_1D01C
0001DF82 11FC 0001 FE0A             		move.b	#1,(v_debugxspeed).w
0001DF88 5238 FE0B                  		addq.b	#1,(v_debugyspeed).w
0001DF8C 6600                       		bne.s	@dirpressed
0001DF8E 11FC 00FF FE0B             		move.b	#-1,(v_debugyspeed).w
0001DF94                            
0001DF94                            @dirpressed:
0001DF94 1838 F604                  		move.b	(v_jpadhold1).w,d4
0001DF98                            
0001DF98                            loc_1D01C:
0001DF98 7200                       		moveq	#0,d1
0001DF9A 1238 FE0B                  		move.b	(v_debugyspeed).w,d1
0001DF9E 5241                       		addq.w	#1,d1
0001DFA0 4841                       		swap	d1
0001DFA2 E881                       		asr.l	#4,d1
0001DFA4 2428 000C                  		move.l	obY(a0),d2
0001DFA8 2628 0008                  		move.l	obX(a0),d3
0001DFAC 0804 0000                  		btst	#bitUp,d4	; is up	being pressed?
0001DFB0 6700                       		beq.s	loc_1D03C	; if not, branch
0001DFB2 9481                       		sub.l	d1,d2
0001DFB4 6400                       		bcc.s	loc_1D03C
0001DFB6 7400                       		moveq	#0,d2
0001DFB8                            
0001DFB8                            loc_1D03C:
0001DFB8 0804 0001                  		btst	#bitDn,d4	; is down being	pressed?
0001DFBC 6700                       		beq.s	loc_1D052	; if not, branch
0001DFBE D481                       		add.l	d1,d2
0001DFC0 0C82 07FF 0000             		cmpi.l	#$7FF0000,d2
0001DFC6 6500                       		bcs.s	loc_1D052
0001DFC8 243C 07FF 0000             		move.l	#$7FF0000,d2
0001DFCE                            
0001DFCE                            loc_1D052:
0001DFCE 0804 0002                  		btst	#bitL,d4
0001DFD2 6700                       		beq.s	loc_1D05E
0001DFD4 9681                       		sub.l	d1,d3
0001DFD6 6400                       		bcc.s	loc_1D05E
0001DFD8 7600                       		moveq	#0,d3
0001DFDA                            
0001DFDA                            loc_1D05E:
0001DFDA 0804 0003                  		btst	#bitR,d4
0001DFDE 6700                       		beq.s	loc_1D066
0001DFE0 D681                       		add.l	d1,d3
0001DFE2                            
0001DFE2                            loc_1D066:
0001DFE2 2142 000C                  		move.l	d2,obY(a0)
0001DFE6 2143 0008                  		move.l	d3,obX(a0)
0001DFEA                            
0001DFEA                            Debug_ChgItem:
0001DFEA 0838 0006 F604             		btst	#bitA,(v_jpadhold1).w ; is button A pressed?
0001DFF0 6700                       		beq.s	@createitem	; if not, branch
0001DFF2 0838 0005 F605             		btst	#bitC,(v_jpadpress1).w ; is button C pressed?
0001DFF8 6700                       		beq.s	@nextitem	; if not, branch
0001DFFA 5338 FE06                  		subq.b	#1,(v_debugitem).w ; go back 1 item
0001DFFE 6400                       		bcc.s	@display
0001E000 DD38 FE06                  		add.b	d6,(v_debugitem).w
0001E004 6000                       		bra.s	@display
0001E006                            ; ===========================================================================
0001E006                            
0001E006                            @nextitem:
0001E006 0838 0006 F605             		btst	#bitA,(v_jpadpress1).w ; is button A pressed?
0001E00C 6700                       		beq.s	@createitem	; if not, branch
0001E00E 5238 FE06                  		addq.b	#1,(v_debugitem).w ; go forwards 1 item
0001E012 BC38 FE06                  		cmp.b	(v_debugitem).w,d6
0001E016 6200                       		bhi.s	@display
0001E018 11FC 0000 FE06             		move.b	#0,(v_debugitem).w ; loop back to first item
0001E01E                            
0001E01E                            	@display:
0001E01E 6000 0000                  		bra.w	Debug_ShowItem
0001E022                            ; ===========================================================================
0001E022                            
0001E022                            @createitem:
0001E022 0838 0005 F605             		btst	#bitC,(v_jpadpress1).w ; is button C pressed?
0001E028 6700                       		beq.s	@backtonormal	; if not, branch
0001E02A 4EB9 0000 E8B0             		jsr	(FindFreeObj).l
0001E030 6600                       		bne.s	@backtonormal
0001E032 3368 0008 0008             		move.w	obX(a0),obX(a1)
0001E038 3368 000C 000C             		move.w	obY(a0),obY(a1)
0001E03E 1368 0004 0000             		move.b	4(a0),0(a1)	; create object
0001E044 1368 0001 0001             		move.b	obRender(a0),obRender(a1)
0001E04A 1368 0001 0022             		move.b	obRender(a0),obStatus(a1)
0001E050 0229 007F 0022             		andi.b	#$7F,obStatus(a1)
0001E056 7000                       		moveq	#0,d0
0001E058 1038 FE06                  		move.b	(v_debugitem).w,d0
0001E05C E748                       		lsl.w	#3,d0
0001E05E 1372 0004 0028             		move.b	4(a2,d0.w),obSubtype(a1)
0001E064 4E75                       		rts	
0001E066                            ; ===========================================================================
0001E066                            
0001E066                            @backtonormal:
0001E066 0838 0004 F605             		btst	#bitB,(v_jpadpress1).w ; is button B pressed?
0001E06C 6700                       		beq.s	@stayindebug	; if not, branch
0001E06E 7000                       		moveq	#0,d0
0001E070 31C0 FE08                  		move.w	d0,(v_debuguse).w ; deactivate debug mode
0001E074 21FC 0000 0000 D004        		move.l	#Map_Sonic,(v_player+obMap).w
0001E07C 31FC 0780 D002             		move.w	#$780,(v_player+obGfx).w
0001E082 11C0 D01C                  		move.b	d0,(v_player+obAnim).w
0001E086 3140 000A                  		move.w	d0,obX+2(a0)
0001E08A 3140 000E                  		move.w	d0,obY+2(a0)
0001E08E 31F8 FEF0 F72C             		move.w	(v_limittopdb).w,(v_limittop2).w ; restore level boundaries
0001E094 31F8 FEF2 F726             		move.w	(v_limitbtmdb).w,(v_limitbtm1).w
0001E09A 0C38 0000 F600             		cmpi.b	#id_Special,(v_gamemode).w ; are you in the special stage?
0001E0A0 6600                       		bne.s	@stayindebug	; if not, branch
0001E0A2                            
0001E0A2 4278 F780                  		clr.w	(v_ssangle).w
0001E0A6 31FC 0040 F782             		move.w	#$40,(v_ssrotate).w ; set new level rotation speed
0001E0AC 21FC 0000 0000 D004        		move.l	#Map_Sonic,(v_player+obMap).w
0001E0B4 31FC 0780 D002             		move.w	#$780,(v_player+obGfx).w
0001E0BA 11FC 0002 D01C             		move.b	#id_Roll,(v_player+obAnim).w
0001E0C0 08F8 0002 D022             		bset	#2,(v_player+obStatus).w
0001E0C6 08F8 0001 D022             		bset	#1,(v_player+obStatus).w
0001E0CC                            
0001E0CC                            	@stayindebug:
0001E0CC 4E75                       		rts	
0001E0CE                            ; End of function Debug_Control
0001E0CE                            
0001E0CE                            
0001E0CE                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0001E0CE                            
0001E0CE                            
0001E0CE                            Debug_ShowItem:
0001E0CE 7000                       		moveq	#0,d0
0001E0D0 1038 FE06                  		move.b	(v_debugitem).w,d0
0001E0D4 E748                       		lsl.w	#3,d0
0001E0D6 2172 0000 0004             		move.l	(a2,d0.w),obMap(a0) ; load mappings for item
0001E0DC 3172 0006 0002             		move.w	6(a2,d0.w),obGfx(a0) ; load VRAM setting for item
0001E0E2 1172 0005 001A             		move.b	5(a2,d0.w),obFrame(a0) ; load frame number for item
0001E0E8 4E75                       		rts	
0001E0EA                            ; End of function Debug_ShowItem
0001E0EA                            ; End of function Debug_ShowItem
0001E0EA                            		include	"_inc\DebugList.asm"
0001E0EA                            ; ---------------------------------------------------------------------------
0001E0EA                            ; Debug	mode item lists
0001E0EA                            ; ---------------------------------------------------------------------------
0001E0EA                            DebugList:
0001E0EA 0000                       	dc.w @GHZ-DebugList
0001E0EC 0000                       	dc.w @LZ-DebugList
0001E0EE 0000                       	dc.w @MZ-DebugList
0001E0F0 0000                       	dc.w @SLZ-DebugList
0001E0F2 0000                       	dc.w @SYZ-DebugList
0001E0F4 0000                       	dc.w @SBZ-DebugList
0001E0F6 0000                       	dc.w @Ending-DebugList
0001E0F8 0000                       	dc.w @Ending-DebugList
0001E0FA 0000                       	dc.w @Ending-DebugList
0001E0FC                            
0001E0FC                            dbug:	macro map,object,subtype,frame,vram
0001E0FC                            	dc.l map+(object<<24)
0001E0FC                            	dc.b subtype,frame
0001E0FC                            	dc.w vram
0001E0FC                            	endm
0001E0FC                            
0001E0FC                            @GHZ:
0001E0FC 0000                       	dc.w (@GHZend-@GHZ-2)/8
0001E0FE                            
0001E0FE                            ;		mappings	object		subtype	frame	VRAM setting
0001E0FE 2500 A982 0000 27B2        	dbug 	Map_Ring,	id_Rings,	0,	0,	$27B2
0001E106 2600 B058 0000 0680        	dbug	Map_Monitor,	id_Monitor,	0,	0,	$680
0001E10E 1F00 A036 0000 0400        	dbug	Map_Crab,	id_Crabmeat,	0,	0,	$400
0001E116 2200 A31C 0000 0444        	dbug	Map_Buzz,	id_BuzzBomber,	0,	0,	$444
0001E11E 2B00 B73E 0000 047B        	dbug	Map_Chop,	id_Chopper,	0,	0,	$47B
0001E126 3600 DDDE 0000 051B        	dbug	Map_Spike,	id_Spikes,	0,	0,	$51B
0001E12E 1800 8776 0000 4000        	dbug	Map_Plat_GHZ,	id_BasicPlatform, 0,	0,	$4000
0001E136 3B00 DF2C 0000 63D0        	dbug	Map_PRock,	id_PurpleRock,	0,	0,	$63D0
0001E13E 4001 0562 0000 04F0        	dbug	Map_Moto,	id_MotoBug,	0,	0,	$4F0
0001E146 4100 EB3E 0000 0523        	dbug	Map_Spring,	id_Springs,	0,	0,	$523
0001E14E 4200 ED66 0000 249B        	dbug	Map_Newt,	id_Newtron,	0,	0,	$249B
0001E156 4400 F03C 0000 434C        	dbug	Map_Edge,	id_EdgeWalls,	0,	0,	$434C
0001E15E 1900 89DC 0000 43AA        	dbug	Map_GBall,	id_Obj19,	0,	0,	$43AA
0001E166 7901 8082 0100 07A0        	dbug	Map_Lamp,	id_Lamppost,	1,	0,	$7A0
0001E16E 4B00 AA02 0000 2400        	dbug	Map_GRing,	id_GiantRing,	0,	0,	$2400
0001E176 7D01 81D2 0101 84B6        	dbug	Map_Bonus,	id_HiddenBonus,	1,	1,	$84B6
0001E17E                            	@GHZend:
0001E17E                            
0001E17E                            @LZ:
0001E17E 0000                       	dc.w (@LZend-@LZ-2)/8
0001E180                            
0001E180                            ;		mappings	object		subtype	frame	VRAM setting
0001E180 2500 A982 0000 27B2        	dbug	Map_Ring,	id_Rings,	0,	0,	$27B2
0001E188 2600 B058 0000 0680        	dbug	Map_Monitor,	id_Monitor,	0,	0,	$680
0001E190 4100 EB3E 0000 0523        	dbug	Map_Spring,	id_Springs,	0,	0,	$523
0001E198 2C00 B7E4 0800 2486        	dbug	Map_Jaws,	id_Jaws,	8,	0,	$2486
0001E1A0 2D00 BB90 0002 84A6        	dbug	Map_Burro,	id_Burrobot,	0,	2,	$84A6
0001E1A8 1601 2DE0 0000 03CC        	dbug	Map_Harp,	id_Harpoon,	0,	0,	$3CC
0001E1B0 1601 2DE0 0203 03CC        	dbug	Map_Harp,	id_Harpoon,	2,	3,	$3CC
0001E1B8 3300 D04A 0000 43DE        	dbug	Map_Push,	id_PushBlock,	0,	0,	$43DE
0001E1C0 3200 CC08 0000 0513        	dbug	Map_But,	id_Button,	0,	0,	$513
0001E1C8 3600 DDDE 0000 051B        	dbug	Map_Spike,	id_Spikes,	0,	0,	$51B
0001E1D0 5201 0EA4 0400 43BC        	dbug	Map_MBlockLZ,	id_MovingBlock,	4,	0,	$43BC
0001E1D8 6101 3008 0100 43E6        	dbug	Map_LBlock,	id_LabyrinthBlock, 1,	0,	$43E6
0001E1E0 6101 3008 1301 43E6        	dbug	Map_LBlock,	id_LabyrinthBlock, $13,	1,	$43E6
0001E1E8 6101 3008 0500 43E6        	dbug	Map_LBlock,	id_LabyrinthBlock, 5,	0,	$43E6
0001E1F0 6201 315E 0000 443E        	dbug	Map_Gar,	id_Gargoyle,	0,	0,	$443E
0001E1F8 6101 3008 2702 43E6        	dbug	Map_LBlock,	id_LabyrinthBlock, $27,	2,	$43E6
0001E200 6101 3008 3003 43E6        	dbug	Map_LBlock,	id_LabyrinthBlock, $30,	3,	$43E6
0001E208 6301 34C2 7F00 03F6        	dbug	Map_LConv,	id_LabyrinthConvey, $7F, 0,	$3F6
0001E210 6001 2D2A 0000 0467        	dbug	Map_Orb,	id_Orbinaut,	0,	0,	$467
0001E218 6401 37FC 8413 8348        	dbug	Map_Bub,	id_Bubble,	$84,	$13,	$8348
0001E220 6501 3984 0202 C259        	dbug	Map_WFall,	id_Waterfall,	2,	2,	$C259
0001E228 6501 3984 0909 C259        	dbug	Map_WFall,	id_Waterfall,	9,	9,	$C259
0001E230 0B01 2150 0000 43DE        	dbug	Map_Pole,	id_Pole,	0,	0,	$43DE
0001E238 0C01 2220 0200 4328        	dbug	Map_Flap,	id_FlapDoor,	2,	0,	$4328
0001E240 7901 8082 0100 07A0        	dbug	Map_Lamp,	id_Lamppost,	1,	0,	$7A0
0001E248                            	@LZend:
0001E248                            
0001E248                            @MZ:
0001E248 0000                       	dc.w (@MZend-@MZ-2)/8
0001E24A                            
0001E24A                            ;		mappings	object		subtype	frame	VRAM setting
0001E24A 2500 A982 0000 27B2        	dbug	Map_Ring,	id_Rings,	0,	0,	$27B2
0001E252 2600 B058 0000 0680        	dbug	Map_Monitor,	id_Monitor,	0,	0,	$680
0001E25A 2200 A31C 0000 0444        	dbug	Map_Buzz,	id_BuzzBomber,	0,	0,	$444
0001E262 3600 DDDE 0000 051B        	dbug	Map_Spike,	id_Spikes,	0,	0,	$51B
0001E26A 4100 EB3E 0000 0523        	dbug	Map_Spring,	id_Springs,	0,	0,	$523
0001E272 1300 C0D2 0000 0345        	dbug	Map_Fire,	id_LavaMaker,	0,	0,	$345
0001E27A 4600 F6F0 0000 4000        	dbug	Map_Brick,	id_MarbleBrick,	0,	0,	$4000
0001E282 4C01 000C 0000 63A8        	dbug	Map_Geyser,	id_GeyserMaker,	0,	0,	$63A8
0001E28A 4E01 02F0 0000 63A8        	dbug	Map_LWall,	id_LavaWall,	0,	0,	$63A8
0001E292 3300 D04A 0000 42B8        	dbug	Map_Push,	id_PushBlock,	0,	0,	$42B8
0001E29A 5001 06F0 0000 247B        	dbug	Map_Yad,	id_Yadrin,	0,	0,	$247B
0001E2A2 5101 0BD8 0000 42B8        	dbug	Map_Smab,	id_SmashBlock,	0,	0,	$42B8
0001E2AA 5201 0E4E 0000 02B8        	dbug	Map_MBlock,	id_MovingBlock,	0,	0,	$2B8
0001E2B2 5300 8F78 0000 62B8        	dbug	Map_CFlo,	id_CollapseFloor, 0,	0,	$62B8
0001E2BA 5400 FFD2 0000 8680        	dbug	Map_LTag,	id_LavaTag,	0,	0,	$8680
0001E2C2 5501 1042 0000 04B8        	dbug	Map_Bas,	id_Basaran,	0,	0,	$4B8
0001E2CA 7801 7CFE 0000 24FF        	dbug	Map_Cat,	id_Caterkiller,	0,	0,	$24FF
0001E2D2 7901 8082 0100 07A0        	dbug	Map_Lamp,	id_Lamppost,	1,	0,	$7A0
0001E2DA                            	@MZend:
0001E2DA                            
0001E2DA                            @SLZ:
0001E2DA 0000                       	dc.w (@SLZend-@SLZ-2)/8
0001E2DC                            
0001E2DC                            ;		mappings	object		subtype	frame	VRAM setting
0001E2DC 2500 A982 0000 27B2        	dbug	Map_Ring,	id_Rings,	0,	0,	$27B2
0001E2E4 2600 B058 0000 0680        	dbug	Map_Monitor,	id_Monitor,	0,	0,	$680
0001E2EC 5901 1B4C 0000 4000        	dbug	Map_Elev,	id_Elevator,	0,	0,	$4000
0001E2F4 5300 8F78 0002 44E0        	dbug	Map_CFlo,	id_CollapseFloor, 0,	2,	$44E0
0001E2FC 1800 87D4 0000 4000        	dbug	Map_Plat_SLZ,	id_BasicPlatform, 0,	0,	$4000
0001E304 5A01 1C86 0000 4000        	dbug	Map_Circ,	id_CirclingPlatform, 0,	0,	$4000
0001E30C 5B01 1E40 0000 4000        	dbug	Map_Stair,	id_Staircase,	0,	0,	$4000
0001E314 5D01 243E 0000 43A0        	dbug	Map_Fan,	id_Fan,		0,	0,	$43A0
0001E31C 5E01 27EA 0000 0374        	dbug	Map_Seesaw,	id_Seesaw,	0,	0,	$374
0001E324 4100 EB3E 0000 0523        	dbug	Map_Spring,	id_Springs,	0,	0,	$523
0001E32C 1300 C0D2 0000 0480        	dbug	Map_Fire,	id_LavaMaker,	0,	0,	$480
0001E334 1C00 9088 0000 44D8        	dbug	Map_Scen,	id_Scenery,	0,	0,	$44D8
0001E33C 5F01 2A6E 0000 0400        	dbug	Map_Bomb,	id_Bomb,	0,	0,	$400
0001E344 6001 2D2A 0000 2429        	dbug	Map_Orb,	id_Orbinaut,	0,	0,	$2429
0001E34C 7901 8082 0100 07A0        	dbug	Map_Lamp,	id_Lamppost,	1,	0,	$7A0
0001E354                            	@SLZend:
0001E354                            
0001E354                            @SYZ:
0001E354 0000                       	dc.w (@SYZend-@SYZ-2)/8
0001E356                            
0001E356                            ;		mappings	object		subtype	frame	VRAM setting
0001E356 2500 A982 0000 27B2        	dbug	Map_Ring,	id_Rings,	0,	0,	$27B2
0001E35E 2600 B058 0000 0680        	dbug	Map_Monitor,	id_Monitor,	0,	0,	$680
0001E366 3600 DDDE 0000 051B        	dbug	Map_Spike,	id_Spikes,	0,	0,	$51B
0001E36E 4100 EB3E 0000 0523        	dbug	Map_Spring,	id_Springs,	0,	0,	$523
0001E376 4300 EF8E 0000 04B8        	dbug	Map_Roll,	id_Roller,	0,	0,	$4B8
0001E37E 1200 F76E 0000 0000        	dbug	Map_Light,	id_SpinningLight, 0,	0,	0
0001E386 4700 F8EC 0000 0380        	dbug	Map_Bump,	id_Bumper,	0,	0,	$380
0001E38E 1F00 A036 0000 0400        	dbug	Map_Crab,	id_Crabmeat,	0,	0,	$400
0001E396 2200 A31C 0000 0444        	dbug	Map_Buzz,	id_BuzzBomber,	0,	0,	$444
0001E39E 5001 06F0 0000 247B        	dbug	Map_Yad,	id_Yadrin,	0,	0,	$247B
0001E3A6 1800 87C2 0000 4000        	dbug	Map_Plat_SYZ,	id_BasicPlatform, 0,	0,	$4000
0001E3AE 5601 1504 0000 4000        	dbug	Map_FBlock,	id_FloatingBlock, 0,	0,	$4000
0001E3B6 3200 CC08 0000 0513        	dbug	Map_But,	id_Button,	0,	0,	$513
0001E3BE 7801 7CFE 0000 24FF        	dbug	Map_Cat,	id_Caterkiller,	0,	0,	$24FF
0001E3C6 7901 8082 0100 07A0        	dbug	Map_Lamp,	id_Lamppost,	1,	0,	$7A0
0001E3CE                            	@SYZend:
0001E3CE                            
0001E3CE                            @SBZ:
0001E3CE 0000                       	dc.w (@SBZend-@SBZ-2)/8
0001E3D0                            
0001E3D0                            ;		mappings	object		subtype	frame	VRAM setting
0001E3D0 2500 A982 0000 27B2        	dbug	Map_Ring,	id_Rings,	0,	0,	$27B2
0001E3D8 2600 B058 0000 0680        	dbug	Map_Monitor,	id_Monitor,	0,	0,	$680
0001E3E0 5F01 2A6E 0000 0400        	dbug	Map_Bomb,	id_Bomb,	0,	0,	$400
0001E3E8 6001 2D2A 0000 0429        	dbug	Map_Orb,	id_Orbinaut,	0,	0,	$429
0001E3F0 7801 7CFE 0000 22B0        	dbug	Map_Cat,	id_Caterkiller,	0,	0,	$22B0
0001E3F8 1501 18A4 0702 4391        	dbug	Map_BBall,	id_SwingingPlatform, 7,	2,	$4391
0001E400 6701 65E0 E000 C344        	dbug	Map_Disc,	id_RunningDisc,	$E0,	0,	$C344
0001E408 5201 0E4E 2802 22C0        	dbug	Map_MBlock,	id_MovingBlock,	$28,	2,	$22C0
0001E410 3200 CC08 0000 0513        	dbug	Map_But,	id_Button,	0,	0,	$513
0001E418 6901 683A 0300 4492        	dbug	Map_Trap,	id_SpinPlatform, 3,	0,	$4492
0001E420 6901 6894 8300 04DF        	dbug	Map_Spin,	id_SpinPlatform, $83,	0,	$4DF
0001E428 6A01 6AF2 0200 43B5        	dbug	Map_Saw,	id_Saws,	2,	0,	$43B5
0001E430 5300 8F78 0000 43F5        	dbug	Map_CFlo,	id_CollapseFloor, 0,	0,	$43F5
0001E438 5201 0E4E 3903 4460        	dbug	Map_MBlock,	id_MovingBlock,	$39,	3,	$4460
0001E440 6B01 6EC2 0000 22C0        	dbug	Map_Stomp,	id_ScrapStomp,	0,	0,	$22C0
0001E448 2A00 921E 0000 42E8        	dbug	Map_ADoor,	id_AutoDoor,	0,	0,	$42E8
0001E450 6B01 6EC2 1301 22C0        	dbug	Map_Stomp,	id_ScrapStomp,	$13,	1,	$22C0
0001E458 6A01 6AF2 0100 43B5        	dbug	Map_Saw,	id_Saws,	1,	0,	$43B5
0001E460 6B01 6EC2 2401 22C0        	dbug	Map_Stomp,	id_ScrapStomp,	$24,	1,	$22C0
0001E468 6A01 6AF2 0402 43B5        	dbug	Map_Saw,	id_Saws,	4,	2,	$43B5
0001E470 6B01 6EC2 3401 22C0        	dbug	Map_Stomp,	id_ScrapStomp,	$34,	1,	$22C0
0001E478 6C01 7084 0000 44C3        	dbug	Map_VanP,	id_VanishPlatform, 0,	0,	$44C3
0001E480 6D00 F3E0 6400 83D9        	dbug	Map_Flame,	id_Flamethrower, $64,	0,	$83D9
0001E488 6D00 F3E0 640B 83D9        	dbug	Map_Flame,	id_Flamethrower, $64,	$B,	$83D9
0001E490 6E01 713A 0400 047E        	dbug	Map_Elec,	id_Electro,	4,	0,	$47E
0001E498 7001 7582 0000 42F0        	dbug	Map_Gird,	id_Girder,	0,	0,	$42F0
0001E4A0 7101 22E4 1100 8680        	dbug	Map_Invis,	id_Invisibarrier, $11,	0,	$8680
0001E4A8 1E00 96C8 0400 2302        	dbug	Map_Hog,	id_BallHog,	4,	0,	$2302
0001E4B0 7901 8082 0100 07A0        	dbug	Map_Lamp,	id_Lamppost,	1,	0,	$7A0
0001E4B8                            	@SBZend:
0001E4B8                            
0001E4B8                            @Ending:
0001E4B8 0000                       	dc.w (@Endingend-@Ending-2)/8
0001E4BA                            
0001E4BA                            ;		mappings	object		subtype	frame	VRAM setting
0001E4BA 2500 A982 0000 27B2        	dbug	Map_Ring,	id_Rings,	0,	0,	$27B2
0001E4C2 4700 F8EC 0000 0380        	dbug	Map_Bump,	id_Bumper,	0,	0,	$380
0001E4CA 2800 9D64 0A00 05A0        	dbug	Map_Animal2,	id_Animals,	$A,	0,	$5A0
0001E4D2 2800 9D64 0B00 05A0        	dbug	Map_Animal2,	id_Animals,	$B,	0,	$5A0
0001E4DA 2800 9D64 0C00 05A0        	dbug	Map_Animal2,	id_Animals,	$C,	0,	$5A0
0001E4E2 2800 9D4C 0D00 0553        	dbug	Map_Animal1,	id_Animals,	$D,	0,	$553
0001E4EA 2800 9D4C 0E00 0553        	dbug	Map_Animal1,	id_Animals,	$E,	0,	$553
0001E4F2 2800 9D4C 0F00 0573        	dbug	Map_Animal1,	id_Animals,	$F,	0,	$573
0001E4FA 2800 9D4C 1000 0573        	dbug	Map_Animal1,	id_Animals,	$10,	0,	$573
0001E502 2800 9D64 1100 0585        	dbug	Map_Animal2,	id_Animals,	$11,	0,	$585
0001E50A 2800 9D7C 1200 0593        	dbug	Map_Animal3,	id_Animals,	$12,	0,	$593
0001E512 2800 9D64 1300 0565        	dbug	Map_Animal2,	id_Animals,	$13,	0,	$565
0001E51A 2800 9D7C 1400 05B3        	dbug	Map_Animal3,	id_Animals,	$14,	0,	$5B3
0001E522                            	@Endingend:
0001E522                            
0001E522                            	even
0001E522                            	even
0001E522                            		include	"_inc\LevelHeaders.asm"
0001E522                            ; ---------------------------------------------------------------------------
0001E522                            ; Level Headers
0001E522                            ; ---------------------------------------------------------------------------
0001E522                            
0001E522                            LevelHeaders:
0001E522                            
0001E522                            lhead:	macro plc1,lvlgfx,plc2,sixteen,twofivesix,music,pal
0001E522                            	dc.l (plc1<<24)+lvlgfx
0001E522                            	dc.l (plc2<<24)+sixteen
0001E522                            	dc.l twofivesix
0001E522                            	dc.b 0, music, pal, pal
0001E522                            	endm
0001E522                            
0001E522                            ; 1st PLC, level gfx (unused), 2nd PLC, 16x16 data, 256x256 data,
0001E522                            ; music (unused), palette (unused), palette
0001E522                            
0001E522                            ;		1st PLC				2nd PLC				256x256 data			palette
0001E522                            ;				level gfx*			16x16 data			music*
0001E522                            
0001E522 0000 0000 0000 0000 0000+  	lhead	plcid_GHZ,	Nem_GHZ,	plcid_GHZ2,	Blk16_GHZ,	Blk256_GHZ,	bgm_GHZ,	palid_GHZ	; Green Hill
0001E532 0000 0000 0000 0000 0000+  	lhead	plcid_LZ,	Nem_LZ,		plcid_LZ2,	Blk16_LZ,	Blk256_LZ,	bgm_LZ,		palid_LZ	; Labyrinth
0001E542 0000 0000 0000 0000 0000+  	lhead	plcid_MZ,	Nem_MZ,		plcid_MZ2,	Blk16_MZ,	Blk256_MZ,	bgm_MZ,		palid_MZ	; Marble
0001E552 0000 0000 0000 0000 0000+  	lhead	plcid_SLZ,	Nem_SLZ,	plcid_SLZ2,	Blk16_SLZ,	Blk256_SLZ,	bgm_SLZ,	palid_SLZ	; Star Light
0001E562 0000 0000 0000 0000 0000+  	lhead	plcid_SYZ,	Nem_SYZ,	plcid_SYZ2,	Blk16_SYZ,	Blk256_SYZ,	bgm_SYZ,	palid_SYZ	; Spring Yard
0001E572 0000 0000 0000 0000 0000+  	lhead	plcid_SBZ,	Nem_SBZ,	plcid_SBZ2,	Blk16_SBZ,	Blk256_SBZ,	bgm_SBZ,	palid_SBZ2	; Scrap Brain
0001E582 0000 0000 0000 0000 0000+  	lhead	plcid_GHZ,		Nem_GHZ,	plcid_GHZ2,		Blk16_GHZ,	Blk256_GHZ,	bgm_GHZ,	palid_GHZ	; Ending
0001E592 0000 0000 0000 0000 0000+  	lhead	plcid_IMZ,		Nem_GHZ,	plcid_IMZ2,		Blk16_IMZ,	Blk256_IMZ,	bgm_SBZ,	palid_IMZ	; Ice Mountain
0001E5A2 0000 0000 0000 0000 0000+  	lhead	plcid_CSZ,	Nem_CSZ,	plcid_CSZ2,	Blk16_CSZ,	Blk256_CSZ,	bgm_SBZ,	palid_CSZ	; Cosmic Space
0001E5B2                            	even
0001E5B2                            
0001E5B2                            ;	* music and level gfx are actually set elsewhere, so these values are useless
0001E5B2                            ;	* music and level gfx are actually set elsewhere, so these values are useless
0001E5B2                            		include	"_inc\Pattern Load Cues.asm"
0001E5B2                            ; ---------------------------------------------------------------------------
0001E5B2                            ; Pattern load cues
0001E5B2                            ; ---------------------------------------------------------------------------
0001E5B2                            ArtLoadCues:
0001E5B2                            
0001E5B2 0000                       ptr_PLC_Main:		dc.w PLC_Main-ArtLoadCues
0001E5B4 0000                       ptr_PLC_Main2:		dc.w PLC_Main2-ArtLoadCues
0001E5B6 0000                       ptr_PLC_Explode:	dc.w PLC_Explode-ArtLoadCues
0001E5B8 0000                       ptr_PLC_GameOver:	dc.w PLC_GameOver-ArtLoadCues
0001E5BA                            PLC_Levels:
0001E5BA 0000                       ptr_PLC_GHZ:		dc.w PLC_GHZ-ArtLoadCues
0001E5BC 0000                       ptr_PLC_GHZ2:		dc.w PLC_GHZ2-ArtLoadCues
0001E5BE 0000                       ptr_PLC_LZ:		dc.w PLC_LZ-ArtLoadCues
0001E5C0 0000                       ptr_PLC_LZ2:		dc.w PLC_LZ2-ArtLoadCues
0001E5C2 0000                       ptr_PLC_MZ:		dc.w PLC_MZ-ArtLoadCues
0001E5C4 0000                       ptr_PLC_MZ2:		dc.w PLC_MZ2-ArtLoadCues
0001E5C6 0000                       ptr_PLC_IMZ:		dc.w PLC_IMZ-ArtLoadCues
0001E5C8 0000                       ptr_PLC_IMZ2:		dc.w PLC_IMZ2-ArtLoadCues
0001E5CA 0000                       ptr_PLC_SLZ:		dc.w PLC_SLZ-ArtLoadCues
0001E5CC 0000                       ptr_PLC_SLZ2:		dc.w PLC_SLZ2-ArtLoadCues
0001E5CE 0000                       ptr_PLC_SYZ:		dc.w PLC_SYZ-ArtLoadCues
0001E5D0 0000                       ptr_PLC_SYZ2:		dc.w PLC_SYZ2-ArtLoadCues
0001E5D2 0000                       ptr_PLC_SBZ:		dc.w PLC_SBZ-ArtLoadCues
0001E5D4 0000                       ptr_PLC_SBZ2:		dc.w PLC_SBZ2-ArtLoadCues
0001E5D6 0000                       ptr_PLC_CSZ:		dc.w PLC_CSZ-ArtLoadCues
0001E5D8 0000                       ptr_PLC_CSZ2:		dc.w PLC_CSZ2-ArtLoadCues
0001E5DA 0000                       ptr_PLC_TitleCard:	dc.w PLC_TitleCard-ArtLoadCues
0001E5DC 0000                       ptr_PLC_Boss:		dc.w PLC_Boss-ArtLoadCues
0001E5DE 0000                       ptr_PLC_Signpost:	dc.w PLC_Signpost-ArtLoadCues
0001E5E0 0000                       ptr_PLC_Warp:		dc.w PLC_Warp-ArtLoadCues
0001E5E2 0000                       ptr_PLC_SpecialStage:	dc.w PLC_SpecialStage-ArtLoadCues
0001E5E4                            PLC_Animals:
0001E5E4 0000                       ptr_PLC_GHZAnimals:	dc.w PLC_GHZAnimals-ArtLoadCues
0001E5E6 0000                       ptr_PLC_LZAnimals:	dc.w PLC_LZAnimals-ArtLoadCues
0001E5E8 0000                       ptr_PLC_MZAnimals:	dc.w PLC_MZAnimals-ArtLoadCues
0001E5EA 0000                       ptr_PLC_SLZAnimals:	dc.w PLC_SLZAnimals-ArtLoadCues
0001E5EC 0000                       ptr_PLC_SYZAnimals:	dc.w PLC_SYZAnimals-ArtLoadCues
0001E5EE 0000                       ptr_PLC_SBZAnimals:	dc.w PLC_SBZAnimals-ArtLoadCues
0001E5F0 0000                       ptr_PLC_SSResult:	dc.w PLC_SSResult-ArtLoadCues
0001E5F2 0000                       ptr_PLC_Ending:		dc.w PLC_Ending-ArtLoadCues
0001E5F4 0000                       ptr_PLC_TryAgain:	dc.w PLC_TryAgain-ArtLoadCues
0001E5F6 0000                       ptr_PLC_EggmanSBZ2:	dc.w PLC_EggmanSBZ2-ArtLoadCues
0001E5F8 0000                       ptr_PLC_FZBoss:		dc.w PLC_FZBoss-ArtLoadCues
0001E5FA                            
0001E5FA                            plcm:	macro gfx,vram
0001E5FA                            	dc.l gfx
0001E5FA                            	dc.w vram
0001E5FA                            	endm
0001E5FA                            
0001E5FA                            ; ---------------------------------------------------------------------------
0001E5FA                            ; Pattern load cues - standard block 1
0001E5FA                            ; ---------------------------------------------------------------------------
0001E5FA 0000                       PLC_Main:	dc.w ((PLC_Mainend-PLC_Main-2)/6)-1
0001E5FC 0000 0000 F400             		plcm	Nem_Lamp, $F400		; lamppost
0001E602 0000 0000 D940             		plcm	Nem_Hud, $D940		; HUD
0001E608 0000 0000 FA80             		plcm	Nem_Lives, $FA80	; lives	counter
0001E60E 0000 0000 F640             		plcm	Nem_Ring, $F640 	; rings
0001E614 0000 0000 F2E0             		plcm	Nem_Points, $F2E0	; points from enemy
0001E61A 0000 0000 D800             		plcm	Nem_Key, $D800 	; key
0001E620                            	PLC_Mainend:
0001E620                            ; ---------------------------------------------------------------------------
0001E620                            ; Pattern load cues - standard block 2
0001E620                            ; ---------------------------------------------------------------------------
0001E620 0000                       PLC_Main2:	dc.w ((PLC_Main2end-PLC_Main2-2)/6)-1
0001E622 0000 0000 D000             		plcm	Nem_Monitors, $D000	; monitors
0001E628                            	;	plcm	Nem_Shield, $A820	; shield
0001E628                            	;	plcm	Nem_Stars, $AB80	; invincibility	stars
0001E628 0000 0000 A820             		plcm	Nem_Warp, $A820	; shield
0001E62E                            	PLC_Main2end:
0001E62E                            ; ---------------------------------------------------------------------------
0001E62E                            ; Pattern load cues - explosion
0001E62E                            ; ---------------------------------------------------------------------------
0001E62E 0000                       PLC_Explode:	dc.w ((PLC_Explodeend-PLC_Explode-2)/6)-1
0001E630 0000 0000 B400             		plcm	Nem_Explode, $B400	; explosion
0001E636                            	PLC_Explodeend:
0001E636                            ; ---------------------------------------------------------------------------
0001E636                            ; Pattern load cues - game/time	over
0001E636                            ; ---------------------------------------------------------------------------
0001E636 0000                       PLC_GameOver:	dc.w ((PLC_GameOverend-PLC_GameOver-2)/6)-1
0001E638 0000 0000 ABC0             		plcm	Nem_GameOver, $ABC0	; game/time over
0001E63E                            	PLC_GameOverend:
0001E63E                            ; ---------------------------------------------------------------------------
0001E63E                            ; Pattern load cues - Green Hill
0001E63E                            ; ---------------------------------------------------------------------------
0001E63E 0000                       PLC_GHZ:	dc.w ((PLC_GHZ2-PLC_GHZ-2)/6)-1
0001E640 0000 0000 0000             		plcm	Nem_GHZ, 0		; GHZ main patterns
0001E646 0000 0000 6000             		plcm	Nem_Welcome, $6000	; purple rock
0001E64C 0000 0000 6B00             		plcm	Nem_Stalk, $6B00	; flower stalk
0001E652 0000 0000 7A00             		plcm	Nem_PplRock, $7A00	; purple rock
0001E658 0000 0000 8000             		plcm	Nem_BallHog, $8000	; ballhog enemy
0001E65E 0000 0000 8380             		plcm	Nem_UnkExplode, $8380	; cannonball enemy
0001E664 0000 0000 8880             		plcm	Nem_Buzz, $8880		; buzz bomber enemy
0001E66A 0000 0000 8F60             		plcm	Nem_Chopper, $8F60	; chopper enemy
0001E670 0000 0000 94C0             		plcm	Nem_Imp, $94C0	; imp enemy
0001E676 0000 0000 A360             		plcm	Nem_Spikes, $A360	; spikes
0001E67C 0000 0000 A460             		plcm	Nem_HSpring, $A460	; horizontal spring
0001E682 0000 0000 A660             		plcm	Nem_VSpring, $A660	; vertical spring
0001E688                            
0001E688 0000                       PLC_GHZ2:	dc.w ((PLC_GHZ2end-PLC_GHZ2-2)/6)-1
0001E68A 0000 0000 7000             		plcm	Nem_Swing, $7000	; swinging platform
0001E690 0000 0000 71C0             		plcm	Nem_Bridge, $71C0	; bridge
0001E696 0000 0000 7300             		plcm	Nem_SpikePole, $7300	; spiked pole
0001E69C 0000 0000 7540             		plcm	Nem_Ball, $7540		; giant	ball
0001E6A2 0000 0000 A1E0             		plcm	Nem_GhzWall1, $A1E0	; breakable wall
0001E6A8 0000 0000 6980             		plcm	Nem_GhzWall2, $6980	; normal wall
0001E6AE                            	PLC_GHZ2end:
0001E6AE                            ; ---------------------------------------------------------------------------
0001E6AE                            ; Pattern load cues - Labyrinth
0001E6AE                            ; ---------------------------------------------------------------------------
0001E6AE 0000                       PLC_LZ:		dc.w ((PLC_LZ2-PLC_LZ-2)/6)-1
0001E6B0 0000 0000 0000             		plcm	Nem_LZ,0		; LZ main patterns
0001E6B6 0000 0000 3C00             		plcm	Nem_LzBlock1, $3C00	; block
0001E6BC 0000 0000 3E00             		plcm	Nem_LzBlock2, $3E00	; blocks
0001E6C2 0000 0000 4B20             		plcm	Nem_Splash, $4B20	; waterfalls and splash
0001E6C8 0000 0000 6000             		plcm	Nem_Water, $6000	; water	surface
0001E6CE 0000 0000 6200             		plcm	Nem_LzSpikeBall, $6200	; spiked ball
0001E6D4 0000 0000 6500             		plcm	Nem_FlapDoor, $6500	; flapping door
0001E6DA 0000 0000 6900             		plcm	Nem_Bubbles, $6900	; bubbles and numbers
0001E6E0 0000 0000 7780             		plcm	Nem_LzBlock3, $7780	; block
0001E6E6 0000 0000 7880             		plcm	Nem_LzDoor1, $7880	; vertical door
0001E6EC 0000 0000 7980             		plcm	Nem_Harpoon, $7980	; harpoon
0001E6F2 0000 0000 94C0             		plcm	Nem_Burrobot, $94C0	; burrobot enemy
0001E6F8                            
0001E6F8 0000                       PLC_LZ2:	dc.w ((PLC_LZ2end-PLC_LZ2-2)/6)-1
0001E6FA 0000 0000 7BC0             		plcm	Nem_LzPole, $7BC0	; pole that breaks
0001E700 0000 0000 7CC0             		plcm	Nem_LzDoor2, $7CC0	; large	horizontal door
0001E706 0000 0000 7EC0             		plcm	Nem_LzWheel, $7EC0	; wheel
0001E70C 0000 0000 5D20             		plcm	Nem_Gargoyle, $5D20	; gargoyle head
0001E712 0000 0000 8800             		plcm	Nem_LzSonic, $8800	; Sonic	holding	his breath
0001E718 0000 0000 89E0             		plcm	Nem_LzPlatfm, $89E0	; rising platform
0001E71E 0000 0000 8CE0             		plcm	Nem_Orbinaut, $8CE0	; orbinaut enemy
0001E724 0000 0000 90C0             		plcm	Nem_Jaws, $90C0		; jaws enemy
0001E72A 0000 0000 A1E0             		plcm	Nem_LzSwitch, $A1E0	; switch
0001E730 0000 0000 A000             		plcm	Nem_Cork, $A000		; cork block
0001E736 0000 0000 A360             		plcm	Nem_Spikes, $A360	; spikes
0001E73C 0000 0000 A460             		plcm	Nem_HSpring, $A460	; horizontal spring
0001E742 0000 0000 A660             		plcm	Nem_VSpring, $A660	; vertical spring
0001E748                            	PLC_LZ2end:
0001E748                            ; ---------------------------------------------------------------------------
0001E748                            ; Pattern load cues - Marble
0001E748                            ; ---------------------------------------------------------------------------
0001E748 0000                       PLC_MZ:		dc.w ((PLC_MZ2-PLC_MZ-2)/6)-1
0001E74A 0000 0000 0000             		plcm	Nem_MZ,0		; MZ main patterns
0001E750 0000 0000 6000             		plcm	Nem_MzMetal, $6000	; metal	blocks
0001E756 0000 0000 68A0             		plcm	Nem_MzFire, $68A0	; fireballs
0001E75C 0000 0000 7000             		plcm	Nem_Swing, $7000	; swinging platform
0001E762 0000 0000 71C0             		plcm	Nem_MzGlass, $71C0	; green	glassy block
0001E768 0000 0000 7500             		plcm	Nem_Lava, $7500		; lava
0001E76E 0000 0000 8880             		plcm	Nem_Buzz, $8880		; buzz bomber enemy
0001E774 0000 0000 8F60             		plcm	Nem_Yadrin, $8F60	; yadrin enemy
0001E77A 0000 0000 9700             		plcm	Nem_Basaran, $9700	; basaran enemy
0001E780 0000 0000 9FE0             		plcm	Nem_Cater, $9FE0	; caterkiller enemy
0001E786                            
0001E786 0000                       PLC_MZ2:	dc.w ((PLC_MZ2end-PLC_MZ2-2)/6)-1
0001E788 0000 0000 A260             		plcm	Nem_MzSwitch, $A260	; switch
0001E78E 0000 0000 A360             		plcm	Nem_Spikes, $A360	; spikes
0001E794 0000 0000 A460             		plcm	Nem_HSpring, $A460	; horizontal spring
0001E79A 0000 0000 A660             		plcm	Nem_VSpring, $A660	; vertical spring
0001E7A0 0000 0000 5700             		plcm	Nem_MzBlock, $5700	; green	stone block
0001E7A6                            	PLC_MZ2end:
0001E7A6                            ; ---------------------------------------------------------------------------
0001E7A6                            ; Pattern load cues - Ice Mountain
0001E7A6                            ; ---------------------------------------------------------------------------
0001E7A6 0000                       PLC_IMZ:	dc.w ((PLC_IMZ2-PLC_IMZ-2)/6)-1
0001E7A8 0000 0000 0000             		plcm	Nem_IMZ, 0		; GHZ main patterns
0001E7AE 0000 0000 A360             		plcm	Nem_Spikes, $A360	; spikes
0001E7B4 0000 0000 A460             		plcm	Nem_HSpring, $A460	; horizontal spring
0001E7BA 0000 0000 A660             		plcm	Nem_VSpring, $A660	; vertical spring
0001E7C0                            
0001E7C0 0000                       PLC_IMZ2:	dc.w ((PLC_IMZ2end-PLC_IMZ2-2)/6)-1
0001E7C2 0000 0000 5700             		plcm	Nem_ImzCube, $5700	; green	stone block
0001E7C8                            	PLC_IMZ2end:
0001E7C8                            ; ---------------------------------------------------------------------------
0001E7C8                            ; Pattern load cues - Star Light
0001E7C8                            ; ---------------------------------------------------------------------------
0001E7C8 0000                       PLC_SLZ:	dc.w ((PLC_SLZ2-PLC_SLZ-2)/6)-1
0001E7CA 0000 0000 0000             		plcm	Nem_SLZ,0		; SLZ main patterns
0001E7D0 0000 0000 8000             		plcm	Nem_Bomb, $8000		; bomb enemy
0001E7D6 0000 0000 8520             		plcm	Nem_Orbinaut, $8520	; orbinaut enemy
0001E7DC 0000 0000 9000             		plcm	Nem_MzFire, $9000	; fireballs
0001E7E2 0000 0000 9C00             		plcm	Nem_SlzBlock, $9C00	; block
0001E7E8 0000 0000 A260             		plcm	Nem_SlzWall, $A260	; breakable wall
0001E7EE 0000 0000 A360             		plcm	Nem_Spikes, $A360	; spikes
0001E7F4 0000 0000 A460             		plcm	Nem_HSpring, $A460	; horizontal spring
0001E7FA 0000 0000 A660             		plcm	Nem_VSpring, $A660	; vertical spring
0001E800                            
0001E800 0000                       PLC_SLZ2:	dc.w ((PLC_SLZ2end-PLC_SLZ2-2)/6)-1
0001E802 0000 0000 6E80             		plcm	Nem_Seesaw, $6E80	; seesaw
0001E808 0000 0000 7400             		plcm	Nem_Fan, $7400		; fan
0001E80E                            	;	plcm	Nem_Pylon, $7980	; foreground pylon
0001E80E 0000 0000 7B80             		plcm	Nem_SlzSwing, $7B80	; swinging platform
0001E814 0000 0000 9B00             		plcm	Nem_SlzCannon, $9B00	; fireball launcher
0001E81A 0000 0000 9E00             		plcm	Nem_SlzSpike, $9E00	; spikeball
0001E820                            	PLC_SLZ2end:
0001E820                            ; ---------------------------------------------------------------------------
0001E820                            ; Pattern load cues - Spring Yard
0001E820                            ; ---------------------------------------------------------------------------
0001E820 0000                       PLC_SYZ:	dc.w ((PLC_SYZ2-PLC_SYZ-2)/6)-1
0001E822 0000 0000 0000             		plcm	Nem_SYZ,0		; SYZ main patterns
0001E828 0000 0000 8000             		plcm	Nem_Crabmeat, $8000	; crabmeat enemy
0001E82E 0000 0000 8880             		plcm	Nem_Buzz, $8880		; buzz bomber enemy
0001E834 0000 0000 8F60             		plcm	Nem_Yadrin, $8F60	; yadrin enemy
0001E83A 0000 0000 9700             		plcm	Nem_Roller, $9700	; roller enemy
0001E840                            
0001E840 0000                       PLC_SYZ2:	dc.w ((PLC_SYZ2end-PLC_SYZ2-2)/6)-1
0001E842 0000 0000 7000             		plcm	Nem_Bumper, $7000	; bumper
0001E848 0000 0000 72C0             		plcm	Nem_SyzSpike1, $72C0	; large	spikeball
0001E84E 0000 0000 7740             		plcm	Nem_SyzSpike2, $7740	; small	spikeball
0001E854 0000 0000 9E00             		plcm	Nem_Motobug, $9E00	; motobug enemy
0001E85A 0000 0000 A1E0             		plcm	Nem_LzSwitch, $A1E0	; switch
0001E860 0000 0000 A360             		plcm	Nem_Spikes, $A360	; spikes
0001E866 0000 0000 A460             		plcm	Nem_HSpring, $A460	; horizontal spring
0001E86C 0000 0000 A660             		plcm	Nem_VSpring, $A660	; vertical spring
0001E872                            	PLC_SYZ2end:
0001E872                            ; ---------------------------------------------------------------------------
0001E872                            ; Pattern load cues - Scrap Brain
0001E872                            ; ---------------------------------------------------------------------------
0001E872 0000                       PLC_SBZ:	dc.w ((PLC_SBZ2-PLC_SBZ-2)/6)-1
0001E874 0000 0000 0000             		plcm	Nem_SBZ,0		; SBZ main patterns
0001E87A 0000 0000 5800             		plcm	Nem_Stomper, $5800	; moving platform and stomper
0001E880 0000 0000 5D00             		plcm	Nem_SbzDoor1, $5D00	; door
0001E886 0000 0000 5E00             		plcm	Nem_Girder, $5E00	; girder
0001E88C 0000 0000 6040             		plcm	Nem_BallHog, $6040	; ball hog enemy
0001E892 0000 0000 6880             		plcm	Nem_SbzWheel1, $6880	; spot on large	wheel
0001E898 0000 0000 6900             		plcm	Nem_SbzWheel2, $6900	; wheel	that grabs Sonic
0001E89E 0000 0000 7220             		plcm	Nem_SyzSpike1, $7220	; large	spikeball
0001E8A4 0000 0000 76A0             		plcm	Nem_Cutter, $76A0	; pizza	cutter
0001E8AA 0000 0000 7B20             		plcm	Nem_FlamePipe, $7B20	; flaming pipe
0001E8B0 0000 0000 7EA0             		plcm	Nem_SbzFloor, $7EA0	; collapsing floor
0001E8B6 0000 0000 9860             		plcm	Nem_SbzBlock, $9860	; vanishing block
0001E8BC                            
0001E8BC 0000                       PLC_SBZ2:	dc.w ((PLC_SBZ2end-PLC_SBZ2-2)/6)-1
0001E8BE 0000 0000 5600             		plcm	Nem_Cater, $5600	; caterkiller enemy
0001E8C4 0000 0000 8000             		plcm	Nem_Bomb, $8000		; bomb enemy
0001E8CA 0000 0000 8520             		plcm	Nem_Orbinaut, $8520	; orbinaut enemy
0001E8D0 0000 0000 8C00             		plcm	Nem_SlideFloor, $8C00	; floor	that slides away
0001E8D6 0000 0000 8DE0             		plcm	Nem_SbzDoor2, $8DE0	; horizontal door
0001E8DC 0000 0000 8FC0             		plcm	Nem_Electric, $8FC0	; electric orb
0001E8E2 0000 0000 9240             		plcm	Nem_TrapDoor, $9240	; trapdoor
0001E8E8 0000 0000 7F20             		plcm	Nem_SbzFloor, $7F20	; collapsing floor
0001E8EE 0000 0000 9BE0             		plcm	Nem_SpinPform, $9BE0	; small	spinning platform
0001E8F4 0000 0000 A1E0             		plcm	Nem_LzSwitch, $A1E0	; switch
0001E8FA 0000 0000 A360             		plcm	Nem_Spikes, $A360	; spikes
0001E900 0000 0000 A460             		plcm	Nem_HSpring, $A460	; horizontal spring
0001E906 0000 0000 A660             		plcm	Nem_VSpring, $A660	; vertical spring
0001E90C 0000 0000 94C0             		plcm	Nem_Burrobot, $94C0	; burrobot enemy
0001E912                            	PLC_SBZ2end:
0001E912                            ; ---------------------------------------------------------------------------
0001E912                            ; Pattern load cues - Scrap Brain
0001E912                            ; ---------------------------------------------------------------------------
0001E912 0000                       PLC_CSZ:	dc.w ((PLC_csz2-PLC_csz-2)/6)-1
0001E914 0000 0000 0000             		plcm	Nem_CSZ,0		; SBZ main patterns
0001E91A                            	;	plcm	Nem_Stomper, $5800	; moving platform and stomper
0001E91A                            	;	plcm	Nem_SbzDoor1, $5D00	; door
0001E91A                            	;	plcm	Nem_Girder, $5E00	; girder
0001E91A                            	;	plcm	Nem_BallHog, $6040	; ball hog enemy
0001E91A                            	;	plcm	Nem_SbzWheel1, $6880	; spot on large	wheel
0001E91A                            	;	plcm	Nem_SbzWheel2, $6900	; wheel	that grabs Sonic
0001E91A                            	;	plcm	Nem_SyzSpike1, $7220	; large	spikeball
0001E91A                            	;	plcm	Nem_Cutter, $76A0	; pizza	cutter
0001E91A                            	;	plcm	Nem_FlamePipe, $7B20	; flaming pipe
0001E91A                            	;	plcm	Nem_SbzFloor, $7EA0	; collapsing floor
0001E91A                            	;	plcm	Nem_SbzBlock, $9860	; vanishing block
0001E91A                            
0001E91A 0000                       PLC_CSZ2:	dc.w ((PLC_CSZ2end-PLC_CSZ2-2)/6)-1
0001E91C                            	;	plcm	Nem_Cater, $5600	; caterkiller enemy
0001E91C                            	;	plcm	Nem_Bomb, $8000		; bomb enemy
0001E91C                            	;	plcm	Nem_Orbinaut, $8520	; orbinaut enemy
0001E91C                            	;	plcm	Nem_SlideFloor, $8C00	; floor	that slides away
0001E91C                            	;	plcm	Nem_SbzDoor2, $8DE0	; horizontal door
0001E91C                            	;	plcm	Nem_Electric, $8FC0	; electric orb
0001E91C                            	;	plcm	Nem_TrapDoor, $9240	; trapdoor
0001E91C                            	;	plcm	Nem_SbzFloor, $7F20	; collapsing floor
0001E91C                            	;	plcm	Nem_SpinPform, $9BE0	; small	spinning platform
0001E91C                            	;	plcm	Nem_LzSwitch, $A1E0	; switch
0001E91C                            	;	plcm	Nem_Spikes, $A360	; spikes
0001E91C                            	;	plcm	Nem_HSpring, $A460	; horizontal spring
0001E91C                            	;	plcm	Nem_VSpring, $A660	; vertical spring
0001E91C                            	;	plcm	Nem_Burrobot, $94C0	; burrobot enemy
0001E91C                            	PLC_CSZ2end:
0001E91C                            ; ---------------------------------------------------------------------------
0001E91C                            ; Pattern load cues - title card
0001E91C                            ; ---------------------------------------------------------------------------
0001E91C 0000                       PLC_TitleCard:	dc.w ((PLC_TitleCardend-PLC_TitleCard-2)/6)-1
0001E91E 0000 0000 AF40             		plcm	Nem_TitleCard, $AF40
0001E924                            	PLC_TitleCardend:
0001E924                            ; ---------------------------------------------------------------------------
0001E924                            ; Pattern load cues - act 3 boss
0001E924                            ; ---------------------------------------------------------------------------
0001E924 0000                       PLC_Boss:	dc.w ((PLC_Bossend-PLC_Boss-2)/6)-1
0001E926 0000 0000 8000             		plcm	Nem_Eggman, $8000	; Eggman main patterns
0001E92C 0000 0000 8D80             		plcm	Nem_Weapons, $8D80	; Eggman's weapons
0001E932 0000 0000 93A0             		plcm	Nem_Prison, $93A0	; prison capsule
0001E938 0000 0000 A300             		plcm	Nem_Bomb, $A300		; bomb enemy ((gets overwritten)
0001E93E 0000 0000 A300             		plcm	Nem_SlzSpike, $A300	; spikeball ((SLZ boss)
0001E944 0000 0000 A540             		plcm	Nem_Exhaust, $A540	; exhaust flame
0001E94A                            	PLC_Bossend:
0001E94A                            ; ---------------------------------------------------------------------------
0001E94A                            ; Pattern load cues - act 1/2 signpost
0001E94A                            ; ---------------------------------------------------------------------------
0001E94A 0000                       PLC_Signpost:	dc.w ((PLC_Signpostend-PLC_Signpost-2)/6)-1
0001E94C 0000 0000 D000             		plcm	Nem_SignPost, $D000	; signpost
0001E952 0000 0000 96C0             		plcm	Nem_Bonus, $96C0	; hidden bonus points
0001E958 0000 0000 8C40             		plcm	Nem_BigFlash, $8C40	; giant	ring flash effect
0001E95E                            	PLC_Signpostend:
0001E95E                            ; ---------------------------------------------------------------------------
0001E95E                            ; Pattern load cues - beta special stage warp effect
0001E95E                            ; ---------------------------------------------------------------------------
0001E95E                            PLC_Warp:
0001E95E 0000                       		dc.w ((PLC_Warpend-PLC_Warp-2)/6)-1
0001E960 0000 0000 A820             		plcm	Nem_Warp, $A820
0001E966                            	PLC_Warpend:
0001E966                            ; ---------------------------------------------------------------------------
0001E966                            ; Pattern load cues - special stage
0001E966                            ; ---------------------------------------------------------------------------
0001E966 0000                       PLC_SpecialStage:	dc.w ((PLC_SpeStageend-PLC_SpecialStage-2)/6)-1
0001E968 0000 0000 0000             		plcm	Nem_SSBgCloud, 0	; bubble and cloud background
0001E96E 0000 0000 0A20             		plcm	Nem_SSBgFish, $A20	; bird and fish	background
0001E974 0000 0000 2840             		plcm	Nem_SSWalls, $2840	; walls
0001E97A 0000 0000 4760             		plcm	Nem_Bumper, $4760	; bumper
0001E980 0000 0000 4A20             		plcm	Nem_SSGOAL, $4A20	; GOAL block
0001E986 0000 0000 4C60             		plcm	Nem_SSUpDown, $4C60	; UP and DOWN blocks
0001E98C 0000 0000 5E00             		plcm	Nem_SSRBlock, $5E00	; R block
0001E992 0000 0000 6E00             		plcm	Nem_SS1UpBlock, $6E00	; 1UP block
0001E998 0000 0000 7E00             		plcm	Nem_SSEmStars, $7E00	; emerald collection stars
0001E99E 0000 0000 8E00             		plcm	Nem_SSRedWhite, $8E00	; red and white	block
0001E9A4 0000 0000 9E00             		plcm	Nem_SSGhost, $9E00	; ghost	block
0001E9AA 0000 0000 AE00             		plcm	Nem_SSWBlock, $AE00	; W block
0001E9B0 0000 0000 BE00             		plcm	Nem_SSGlass, $BE00	; glass	block
0001E9B6 0000 0000 EE00             		plcm	Nem_SSEmerald, $EE00	; emeralds
0001E9BC 0000 0000 F2E0             		plcm	Nem_SSZone1, $F2E0	; ZONE 1 block
0001E9C2 0000 0000 F400             		plcm	Nem_SSZone2, $F400	; ZONE 2 block
0001E9C8 0000 0000 F520             		plcm	Nem_SSZone3, $F520	; ZONE 3 block
0001E9CE                            	PLC_SpeStageend:
0001E9CE 0000 0000 F2E0             		plcm	Nem_SSZone4, $F2E0	; ZONE 4 block
0001E9D4 0000 0000 F400             		plcm	Nem_SSZone5, $F400	; ZONE 5 block
0001E9DA 0000 0000 F520             		plcm	Nem_SSZone6, $F520	; ZONE 6 block
0001E9E0                            ; ---------------------------------------------------------------------------
0001E9E0                            ; Pattern load cues - GHZ animals
0001E9E0                            ; ---------------------------------------------------------------------------
0001E9E0 0000                       PLC_GHZAnimals:	dc.w ((PLC_GHZAnimalsend-PLC_GHZAnimals-2)/6)-1
0001E9E2 0000 0000 B000             		plcm	Nem_Rabbit, $B000	; rabbit
0001E9E8 0000 0000 B240             		plcm	Nem_Flicky, $B240	; flicky
0001E9EE                            	PLC_GHZAnimalsend:
0001E9EE                            ; ---------------------------------------------------------------------------
0001E9EE                            ; Pattern load cues - LZ animals
0001E9EE                            ; ---------------------------------------------------------------------------
0001E9EE 0000                       PLC_LZAnimals:	dc.w ((PLC_LZAnimalsend-PLC_LZAnimals-2)/6)-1
0001E9F0 0000 0000 B000             		plcm	Nem_BlackBird, $B000	; blackbird
0001E9F6 0000 0000 B240             		plcm	Nem_Seal, $B240		; seal
0001E9FC                            	PLC_LZAnimalsend:
0001E9FC                            ; ---------------------------------------------------------------------------
0001E9FC                            ; Pattern load cues - MZ animals
0001E9FC                            ; ---------------------------------------------------------------------------
0001E9FC 0000                       PLC_MZAnimals:	dc.w ((PLC_MZAnimalsend-PLC_MZAnimals-2)/6)-1
0001E9FE 0000 0000 B000             		plcm	Nem_Squirrel, $B000	; squirrel
0001EA04 0000 0000 B240             		plcm	Nem_Seal, $B240		; seal
0001EA0A                            	PLC_MZAnimalsend:
0001EA0A                            ; ---------------------------------------------------------------------------
0001EA0A                            ; Pattern load cues - SLZ animals
0001EA0A                            ; ---------------------------------------------------------------------------
0001EA0A 0000                       PLC_SLZAnimals:	dc.w ((PLC_SLZAnimalsend-PLC_SLZAnimals-2)/6)-1
0001EA0C 0000 0000 B000             		plcm	Nem_Pig, $B000		; pig
0001EA12 0000 0000 B240             		plcm	Nem_Flicky, $B240	; flicky
0001EA18                            	PLC_SLZAnimalsend:
0001EA18                            ; ---------------------------------------------------------------------------
0001EA18                            ; Pattern load cues - SYZ animals
0001EA18                            ; ---------------------------------------------------------------------------
0001EA18 0000                       PLC_SYZAnimals:	dc.w ((PLC_SYZAnimalsend-PLC_SYZAnimals-2)/6)-1
0001EA1A 0000 0000 B000             		plcm	Nem_Pig, $B000		; pig
0001EA20 0000 0000 B240             		plcm	Nem_Chicken, $B240	; chicken
0001EA26                            	PLC_SYZAnimalsend:
0001EA26                            ; ---------------------------------------------------------------------------
0001EA26                            ; Pattern load cues - SBZ animals
0001EA26                            ; ---------------------------------------------------------------------------
0001EA26 0000                       PLC_SBZAnimals:	dc.w ((PLC_SBZAnimalsend-PLC_SBZAnimals-2)/6)-1
0001EA28 0000 0000 B000             		plcm	Nem_Rabbit, $B000		; rabbit
0001EA2E 0000 0000 B240             		plcm	Nem_Chicken, $B240	; chicken
0001EA34                            	PLC_SBZAnimalsend:
0001EA34                            ; ---------------------------------------------------------------------------
0001EA34                            ; Pattern load cues - special stage results screen
0001EA34                            ; ---------------------------------------------------------------------------
0001EA34 0000                       PLC_SSResult:dc.w ((PLC_SpeStResultend-PLC_SSResult-2)/6)-1
0001EA36 0000 0000 A820             		plcm	Nem_ResultEm, $A820	; emeralds
0001EA3C 0000 0000 AA20             		plcm	Nem_MiniSonic, $AA20	; mini Sonic
0001EA42                            	PLC_SpeStResultend:
0001EA42                            ; ---------------------------------------------------------------------------
0001EA42                            ; Pattern load cues - ending sequence
0001EA42                            ; ---------------------------------------------------------------------------
0001EA42 0000                       PLC_Ending:	dc.w ((PLC_Endingend-PLC_Ending-2)/6)-1
0001EA44                            	PLC_Endingend:
0001EA44 0000 0000 0000             		plcm	Nem_GHZ,0		; GHZ main patterns
0001EA4A 0000 0000 6B00             		plcm	Nem_Stalk, $6B00	; flower stalk
0001EA50 0000 0000 7400             		plcm	Nem_EndFlower, $7400	; flowers
0001EA56 0000 0000 78A0             		plcm	Nem_EndEm, $78A0	; emeralds
0001EA5C 0000 0000 7C20             		plcm	Nem_EndSonic, $7C20	; Sonic
0001EA62 0000 0000 A480             		plcm	Nem_EndEggman, $A480	; Eggman's death ((unused)
0001EA68 0000 0000 AA60             		plcm	Nem_Rabbit, $AA60	; rabbit
0001EA6E 0000 0000 ACA0             		plcm	Nem_Chicken, $ACA0	; chicken
0001EA74 0000 0000 AE60             		plcm	Nem_BlackBird, $AE60	; blackbird
0001EA7A 0000 0000 B0A0             		plcm	Nem_Seal, $B0A0		; seal
0001EA80 0000 0000 B260             		plcm	Nem_Pig, $B260		; pig
0001EA86 0000 0000 B4A0             		plcm	Nem_Flicky, $B4A0	; flicky
0001EA8C 0000 0000 B660             		plcm	Nem_Squirrel, $B660	; squirrel
0001EA92 0000 0000 B8A0             		plcm	Nem_EndStH, $B8A0	; "SONIC THE HEDGEHOG"
0001EA98                            	;PLC_Endingend:
0001EA98                            ; ---------------------------------------------------------------------------
0001EA98                            ; Pattern load cues - "TRY AGAIN" and "END" screens
0001EA98                            ; ---------------------------------------------------------------------------
0001EA98 0000                       PLC_TryAgain:	dc.w ((PLC_TryAgainend-PLC_TryAgain-2)/6)-1
0001EA9A 0000 0000 78A0             		plcm	Nem_EndEm, $78A0	; emeralds
0001EAA0 0000 0000 7C20             		plcm	Nem_TryAgain, $7C20	; Eggman
0001EAA6 0000 0000 B400             		plcm	Nem_CreditText, $B400	; credits alphabet
0001EAAC                            	PLC_TryAgainend:
0001EAAC                            ; ---------------------------------------------------------------------------
0001EAAC                            ; Pattern load cues - Eggman on SBZ 2
0001EAAC                            ; ---------------------------------------------------------------------------
0001EAAC 0000                       PLC_EggmanSBZ2:	dc.w ((PLC_EggmanSBZ2end-PLC_EggmanSBZ2-2)/6)-1
0001EAAE 0000 0000 A300             		plcm	Nem_SbzBlock, $A300	; block
0001EAB4 0000 0000 8000             		plcm	Nem_Sbz2Eggman, $8000	; Eggman
0001EABA 0000 0000 9400             		plcm	Nem_LzSwitch, $9400	; switch
0001EAC0                            	PLC_EggmanSBZ2end:
0001EAC0                            ; ---------------------------------------------------------------------------
0001EAC0                            ; Pattern load cues - final boss
0001EAC0                            ; ---------------------------------------------------------------------------
0001EAC0 0000                       PLC_FZBoss:	dc.w ((PLC_FZBossend-PLC_FZBoss-2)/6)-1
0001EAC2 0000 0000 7400             		plcm	Nem_FzEggman, $7400	; Eggman after boss
0001EAC8 0000 0000 6000             		plcm	Nem_FzBoss, $6000	; FZ boss
0001EACE 0000 0000 8000             		plcm	Nem_Eggman, $8000	; Eggman main patterns
0001EAD4 0000 0000 8E00             		plcm	Nem_Sbz2Eggman, $8E00	; Eggman without ship
0001EADA 0000 0000 A540             		plcm	Nem_Exhaust, $A540	; exhaust flame
0001EAE0                            	PLC_FZBossend:
0001EAE0                            		even
0001EAE0                            
0001EAE0                            ; ---------------------------------------------------------------------------
0001EAE0                            ; Pattern load cue IDs
0001EAE0                            ; ---------------------------------------------------------------------------
0001EAE0 =00000000                  plcid_Main:		equ (ptr_PLC_Main-ArtLoadCues)/2	; 0
0001EAE0 =00000001                  plcid_Main2:		equ (ptr_PLC_Main2-ArtLoadCues)/2	; 1
0001EAE0 =00000002                  plcid_Explode:		equ (ptr_PLC_Explode-ArtLoadCues)/2	; 2
0001EAE0 =00000003                  plcid_GameOver:		equ (ptr_PLC_GameOver-ArtLoadCues)/2	; 3
0001EAE0 =00000004                  plcid_GHZ:		equ (ptr_PLC_GHZ-ArtLoadCues)/2		; 4
0001EAE0 =00000005                  plcid_GHZ2:		equ (ptr_PLC_GHZ2-ArtLoadCues)/2	; 5
0001EAE0 =00000006                  plcid_LZ:		equ (ptr_PLC_LZ-ArtLoadCues)/2		; 6
0001EAE0 =00000007                  plcid_LZ2:		equ (ptr_PLC_LZ2-ArtLoadCues)/2		; 7
0001EAE0 =00000008                  plcid_MZ:		equ (ptr_PLC_MZ-ArtLoadCues)/2		; 8
0001EAE0 =00000009                  plcid_MZ2:		equ (ptr_PLC_MZ2-ArtLoadCues)/2		; 9
0001EAE0 =0000000A                  plcid_IMZ:		equ (ptr_PLC_IMZ-ArtLoadCues)/2		; 8
0001EAE0 =0000000B                  plcid_IMZ2:		equ (ptr_PLC_IMZ2-ArtLoadCues)/2		; 9
0001EAE0 =0000000C                  plcid_SLZ:		equ (ptr_PLC_SLZ-ArtLoadCues)/2		; $A
0001EAE0 =0000000D                  plcid_SLZ2:		equ (ptr_PLC_SLZ2-ArtLoadCues)/2	; $B
0001EAE0 =0000000E                  plcid_SYZ:		equ (ptr_PLC_SYZ-ArtLoadCues)/2		; $C
0001EAE0 =0000000F                  plcid_SYZ2:		equ (ptr_PLC_SYZ2-ArtLoadCues)/2	; $D
0001EAE0 =00000010                  plcid_SBZ:		equ (ptr_PLC_SBZ-ArtLoadCues)/2		; $E
0001EAE0 =00000011                  plcid_SBZ2:		equ (ptr_PLC_SBZ2-ArtLoadCues)/2	; $F
0001EAE0 =00000012                  plcid_CSZ:		equ (ptr_PLC_CSZ-ArtLoadCues)/2	; $F
0001EAE0 =00000013                  plcid_CSZ2:		equ (ptr_PLC_CSZ2-ArtLoadCues)/2	; $F
0001EAE0 =00000014                  plcid_TitleCard:	equ (ptr_PLC_TitleCard-ArtLoadCues)/2	; $10
0001EAE0 =00000015                  plcid_Boss:		equ (ptr_PLC_Boss-ArtLoadCues)/2	; $11
0001EAE0 =00000016                  plcid_Signpost:		equ (ptr_PLC_Signpost-ArtLoadCues)/2	; $12
0001EAE0 =00000017                  plcid_Warp:		equ (ptr_PLC_Warp-ArtLoadCues)/2	; $13
0001EAE0 =00000018                  plcid_SpecialStage:	equ (ptr_PLC_SpecialStage-ArtLoadCues)/2 ; $14
0001EAE0 =00000019                  plcid_GHZAnimals:	equ (ptr_PLC_GHZAnimals-ArtLoadCues)/2	; $15
0001EAE0 =0000001A                  plcid_LZAnimals:	equ (ptr_PLC_LZAnimals-ArtLoadCues)/2	; $16
0001EAE0 =0000001B                  plcid_MZAnimals:	equ (ptr_PLC_MZAnimals-ArtLoadCues)/2	; $17
0001EAE0 =0000001C                  plcid_SLZAnimals:	equ (ptr_PLC_SLZAnimals-ArtLoadCues)/2	; $18
0001EAE0 =0000001D                  plcid_SYZAnimals:	equ (ptr_PLC_SYZAnimals-ArtLoadCues)/2	; $19
0001EAE0 =0000001E                  plcid_SBZAnimals:	equ (ptr_PLC_SBZAnimals-ArtLoadCues)/2	; $1A
0001EAE0 =0000001F                  plcid_SSResult:		equ (ptr_PLC_SSResult-ArtLoadCues)/2	; $1B
0001EAE0 =00000020                  plcid_Ending:		equ (ptr_PLC_Ending-ArtLoadCues)/2	; $1C
0001EAE0 =00000021                  plcid_TryAgain:		equ (ptr_PLC_TryAgain-ArtLoadCues)/2	; $1D
0001EAE0 =00000022                  plcid_EggmanSBZ2:	equ (ptr_PLC_EggmanSBZ2-ArtLoadCues)/2	; $1E
0001EAE0 =00000023                  plcid_FZBoss:		equ (ptr_PLC_FZBoss-ArtLoadCues)/2	; $1F
0001EAE0 =00000023                  plcid_FZBoss:		equ (ptr_PLC_FZBoss-ArtLoadCues)/2	; $1F
0001EAE0                            
0001EC00                            Nem_SegaLogo:	incbin	"artnem\Sega Logo 2.bin"	; large Sega logo
0001F5B0                            		even
0001F5B0                            Eni_SegaLogo:	incbin	"tilemaps\Sega Logo 2.bin" ; large Sega logo (mappings)
0001F656                            		even
0001F656                            Nem_OtherSegaLogo:	incbin	"artnem\Sega Logo.bin"	; large Sega logo
00020384                            		even
00020384                            Eni_OtherSegaLogo:	incbin	"tilemaps\Sega Logo.bin" ; large Sega logo (mappings)
000203FA                            		even
000203FA                            	MAPS_RAD:	incbin	"tilemaps\Radnex Affiliate.bin"
0002050E                            			even
0002050E                            	ART_RAD:	incbin	"artnem\Radnex Affiliate.bin"
00020B34                            			even
00020B34                            	PAL_RAD:	incbin	"palette\Radnex Affiliate.bin"
00020BB4                            			even
00020BB4                            	MAPS_CRED:	incbin	"tilemaps\Credits.bin"
00020DC4                            			even
00020DC4                            	ART_CRED:	incbin	"artnem\Credits.bin"
000219BA                            			even
000219BA                            	PAL_CRED:	incbin	"palette\Credits.bin"
00021A3A                            			even
00021A3A                            Nem_TitleBlank:	incbin	"artnem\Title Screen Blank Top VRAM.bin" ; title screen foreground (mappings)
00021B7C                            		even
00021B7C                            Eni_Title:	incbin	"tilemaps\Title Screen.bin" ; title screen foreground (mappings)
00021CD4                            		even
00021CD4                            Nem_TitleFg:	incbin	"artnem\Title Screen Foreground.bin"
000231A6                            		even
000231A6                            Nem_TitleSonic:	incbin	"artnem\Title Screen Sonic.bin"
00024B1C 00                         		even
00024B1C                            Nem_TitleTM:	incbin	"artnem\Title Screen TM.bin"
00024B50                            		even
00024B50                            Eni_JapNames:	incbin	"tilemaps\Hidden Japanese Credits.bin" ; Japanese credits (mappings)
00024C0E                            		even
00024C0E                            Nem_JapNames:	incbin	"artnem\Hidden Japanese Credits.bin"
000250B6                            		even
000250B6                            
000250B6                            Map_Sonic:	include	"_maps\Sonic.asm"
000250B6                            ; ================================================================================
000250B6                            ; Sprite Mappings - generated by Flex 2 Thu May 20 2021 16:24:17 GMT-0400 (Eastern Daylight Time)
000250B6                            ; ================================================================================
000250B6                            
000250B6                            DATAHBTH26Y3SET:
000250B6 0000 0000                  	dc.w $0, DATAHBTH26Y3SET_1-DATAHBTH26Y3SET
000250BA 0000 0000                  	dc.w DATAHBTH26Y3SET_2-DATAHBTH26Y3SET, DATAHBTH26Y3SET_3-DATAHBTH26Y3SET
000250BE 0000 0000                  	dc.w DATAHBTH26Y3SET_4-DATAHBTH26Y3SET, DATAHBTH26Y3SET_5-DATAHBTH26Y3SET
000250C2 0000 0000                  	dc.w DATAHBTH26Y3SET_6-DATAHBTH26Y3SET, DATAHBTH26Y3SET_7-DATAHBTH26Y3SET
000250C6 0000 0000                  	dc.w DATAHBTH26Y3SET_8-DATAHBTH26Y3SET, DATAHBTH26Y3SET_9-DATAHBTH26Y3SET
000250CA 0000 0000                  	dc.w DATAHBTH26Y3SET_A-DATAHBTH26Y3SET, DATAHBTH26Y3SET_B-DATAHBTH26Y3SET
000250CE 0000 0000                  	dc.w DATAHBTH26Y3SET_C-DATAHBTH26Y3SET, DATAHBTH26Y3SET_D-DATAHBTH26Y3SET
000250D2 0000 0000                  	dc.w DATAHBTH26Y3SET_E-DATAHBTH26Y3SET, DATAHBTH26Y3SET_F-DATAHBTH26Y3SET
000250D6 0000 0000                  	dc.w DATAHBTH26Y3SET_10-DATAHBTH26Y3SET, DATAHBTH26Y3SET_11-DATAHBTH26Y3SET
000250DA 0000 0000                  	dc.w DATAHBTH26Y3SET_12-DATAHBTH26Y3SET, DATAHBTH26Y3SET_13-DATAHBTH26Y3SET
000250DE 0000 0000                  	dc.w DATAHBTH26Y3SET_14-DATAHBTH26Y3SET, DATAHBTH26Y3SET_15-DATAHBTH26Y3SET
000250E2 0000 0000                  	dc.w DATAHBTH26Y3SET_16-DATAHBTH26Y3SET, DATAHBTH26Y3SET_17-DATAHBTH26Y3SET
000250E6 0000 0000                  	dc.w DATAHBTH26Y3SET_18-DATAHBTH26Y3SET, DATAHBTH26Y3SET_19-DATAHBTH26Y3SET
000250EA 0000 0000                  	dc.w DATAHBTH26Y3SET_1A-DATAHBTH26Y3SET, DATAHBTH26Y3SET_1B-DATAHBTH26Y3SET
000250EE 0000 0000                  	dc.w DATAHBTH26Y3SET_1C-DATAHBTH26Y3SET, DATAHBTH26Y3SET_1D-DATAHBTH26Y3SET
000250F2 0000 0000                  	dc.w DATAHBTH26Y3SET_1E-DATAHBTH26Y3SET, DATAHBTH26Y3SET_1F-DATAHBTH26Y3SET
000250F6 0000 0000                  	dc.w DATAHBTH26Y3SET_20-DATAHBTH26Y3SET, DATAHBTH26Y3SET_21-DATAHBTH26Y3SET
000250FA 0000 0000                  	dc.w DATAHBTH26Y3SET_22-DATAHBTH26Y3SET, DATAHBTH26Y3SET_23-DATAHBTH26Y3SET
000250FE 0000 0000                  	dc.w DATAHBTH26Y3SET_24-DATAHBTH26Y3SET, DATAHBTH26Y3SET_25-DATAHBTH26Y3SET
00025102 0000 0000                  	dc.w DATAHBTH26Y3SET_26-DATAHBTH26Y3SET, DATAHBTH26Y3SET_27-DATAHBTH26Y3SET
00025106 0000 0000                  	dc.w DATAHBTH26Y3SET_28-DATAHBTH26Y3SET, DATAHBTH26Y3SET_29-DATAHBTH26Y3SET
0002510A 0000 0000                  	dc.w DATAHBTH26Y3SET_2A-DATAHBTH26Y3SET, DATAHBTH26Y3SET_2B-DATAHBTH26Y3SET
0002510E 0000 0000                  	dc.w DATAHBTH26Y3SET_2C-DATAHBTH26Y3SET, DATAHBTH26Y3SET_2D-DATAHBTH26Y3SET
00025112 0000 0000                  	dc.w DATAHBTH26Y3SET_2E-DATAHBTH26Y3SET, DATAHBTH26Y3SET_2F-DATAHBTH26Y3SET
00025116 0000 0000                  	dc.w DATAHBTH26Y3SET_30-DATAHBTH26Y3SET, DATAHBTH26Y3SET_31-DATAHBTH26Y3SET
0002511A 0000 0000                  	dc.w DATAHBTH26Y3SET_32-DATAHBTH26Y3SET, DATAHBTH26Y3SET_33-DATAHBTH26Y3SET
0002511E 0000 0000                  	dc.w DATAHBTH26Y3SET_34-DATAHBTH26Y3SET, DATAHBTH26Y3SET_35-DATAHBTH26Y3SET
00025122 0000 0000                  	dc.w DATAHBTH26Y3SET_36-DATAHBTH26Y3SET, DATAHBTH26Y3SET_37-DATAHBTH26Y3SET
00025126 0000 0000                  	dc.w DATAHBTH26Y3SET_38-DATAHBTH26Y3SET, DATAHBTH26Y3SET_39-DATAHBTH26Y3SET
0002512A 0000 0000                  	dc.w DATAHBTH26Y3SET_3A-DATAHBTH26Y3SET, DATAHBTH26Y3SET_3B-DATAHBTH26Y3SET
0002512E 0000 0000                  	dc.w DATAHBTH26Y3SET_3C-DATAHBTH26Y3SET, DATAHBTH26Y3SET_3D-DATAHBTH26Y3SET
00025132 0000 0000                  	dc.w DATAHBTH26Y3SET_3E-DATAHBTH26Y3SET, DATAHBTH26Y3SET_3F-DATAHBTH26Y3SET
00025136 0000 0000                  	dc.w DATAHBTH26Y3SET_40-DATAHBTH26Y3SET, DATAHBTH26Y3SET_41-DATAHBTH26Y3SET
0002513A 0000 0000                  	dc.w DATAHBTH26Y3SET_42-DATAHBTH26Y3SET, DATAHBTH26Y3SET_43-DATAHBTH26Y3SET
0002513E 0000 0000                  	dc.w DATAHBTH26Y3SET_44-DATAHBTH26Y3SET, DATAHBTH26Y3SET_45-DATAHBTH26Y3SET
00025142 0000 0000                  	dc.w DATAHBTH26Y3SET_46-DATAHBTH26Y3SET, DATAHBTH26Y3SET_47-DATAHBTH26Y3SET
00025146 0000 0000                  	dc.w DATAHBTH26Y3SET_48-DATAHBTH26Y3SET, DATAHBTH26Y3SET_49-DATAHBTH26Y3SET
0002514A 0000 0000                  	dc.w DATAHBTH26Y3SET_4A-DATAHBTH26Y3SET, DATAHBTH26Y3SET_4B-DATAHBTH26Y3SET
0002514E 0000 0000                  	dc.w DATAHBTH26Y3SET_4C-DATAHBTH26Y3SET, DATAHBTH26Y3SET_4D-DATAHBTH26Y3SET
00025152 0000 0000                  	dc.w DATAHBTH26Y3SET_4E-DATAHBTH26Y3SET, DATAHBTH26Y3SET_4F-DATAHBTH26Y3SET
00025156 0000 0000                  	dc.w DATAHBTH26Y3SET_50-DATAHBTH26Y3SET, DATAHBTH26Y3SET_51-DATAHBTH26Y3SET
0002515A 0000 0000                  	dc.w DATAHBTH26Y3SET_52-DATAHBTH26Y3SET, DATAHBTH26Y3SET_53-DATAHBTH26Y3SET
0002515E 0000 0000                  	dc.w DATAHBTH26Y3SET_54-DATAHBTH26Y3SET, DATAHBTH26Y3SET_55-DATAHBTH26Y3SET
00025162 06                         DATAHBTH26Y3SET_1: dc.b $6
00025163 EC08 0000 F0               	dc.b $EC, $8, $0, $0, $F0
00025168 F40D 0003 F0               	dc.b $F4, $D, $0, $3, $F0
0002516D 0408 000B F0               	dc.b $4, $8, $0, $B, $F0
00025172 0C08 000E F8               	dc.b $C, $8, $0, $E, $F8
00025177 0C00 0011 F0               	dc.b $C, $0, $0, $11, $F0
0002517C 0400 0012 08               	dc.b $4, $0, $0, $12, $8
00025181 04                         DATAHBTH26Y3SET_2: dc.b $4
00025182 EB0D 0000 EB               	dc.b $EB, $D, $0, $0, $EB
00025187 FB09 0008 EB               	dc.b $FB, $9, $0, $8, $EB
0002518C FB06 000E 03               	dc.b $FB, $6, $0, $E, $3
00025191 0B04 0014 EB               	dc.b $B, $4, $0, $14, $EB
00025196 02                         DATAHBTH26Y3SET_3: dc.b $2
00025197 EC0D 0000 EB               	dc.b $EC, $D, $0, $0, $EB
0002519C FC0E 0008 F3               	dc.b $FC, $E, $0, $8, $F3
000251A1 02                         DATAHBTH26Y3SET_4: dc.b $2
000251A2 FD0A 0000 F4               	dc.b $FD, $A, $0, $0, $F4
000251A7 ED09 0009 F4               	dc.b $ED, $9, $0, $9, $F4
000251AC 04                         DATAHBTH26Y3SET_5: dc.b $4
000251AD FB09 0000 EC               	dc.b $FB, $9, $0, $0, $EC
000251B2 FB06 0006 04               	dc.b $FB, $6, $0, $6, $4
000251B7 0B04 000C EC               	dc.b $B, $4, $0, $C, $EC
000251BC EB09 000E F4               	dc.b $EB, $9, $0, $E, $F4
000251C1 02                         DATAHBTH26Y3SET_6: dc.b $2
000251C2 FC0E 0000 EC               	dc.b $FC, $E, $0, $0, $EC
000251C7 EC09 000C F4               	dc.b $EC, $9, $0, $C, $F4
000251CC 03                         DATAHBTH26Y3SET_7: dc.b $3
000251CD ED0D 0000 EB               	dc.b $ED, $D, $0, $0, $EB
000251D2 FD0C 0008 F3               	dc.b $FD, $C, $0, $8, $F3
000251D7 0509 000C F3               	dc.b $5, $9, $0, $C, $F3
000251DC 05                         DATAHBTH26Y3SET_8: dc.b $5
000251DD ED09 0000 ED               	dc.b $ED, $9, $0, $0, $ED
000251E2 ED06 0006 05               	dc.b $ED, $6, $0, $6, $5
000251E7 FD08 000C ED               	dc.b $FD, $8, $0, $C, $ED
000251EC 0509 000F F5               	dc.b $5, $9, $0, $F, $F5
000251F1 1500 0015 FD               	dc.b $15, $0, $0, $15, $FD
000251F6 06                         DATAHBTH26Y3SET_9: dc.b $6
000251F7 EC09 0000 EC               	dc.b $EC, $9, $0, $0, $EC
000251FC EC01 0006 04               	dc.b $EC, $1, $0, $6, $4
00025201 FC0C 0008 EC               	dc.b $FC, $C, $0, $8, $EC
00025206 0409 000C F4               	dc.b $4, $9, $0, $C, $F4
0002520B FC05 0012 0C               	dc.b $FC, $5, $0, $12, $C
00025210 F400 0016 14               	dc.b $F4, $0, $0, $16, $14
00025215 04                         DATAHBTH26Y3SET_A: dc.b $4
00025216 ED09 0000 ED               	dc.b $ED, $9, $0, $0, $ED
0002521B ED01 0006 05               	dc.b $ED, $1, $0, $6, $5
00025220 FD0D 0008 F5               	dc.b $FD, $D, $0, $8, $F5
00025225 0D08 0010 FD               	dc.b $D, $8, $0, $10, $FD
0002522A 05                         DATAHBTH26Y3SET_B: dc.b $5
0002522B EB09 0000 EB               	dc.b $EB, $9, $0, $0, $EB
00025230 EB05 0006 03               	dc.b $EB, $5, $0, $6, $3
00025235 FB0D 000A F3               	dc.b $FB, $D, $0, $A, $F3
0002523A 0B08 0012 F3               	dc.b $B, $8, $0, $12, $F3
0002523F 1304 0015 FB               	dc.b $13, $4, $0, $15, $FB
00025244 04                         DATAHBTH26Y3SET_C: dc.b $4
00025245 EC09 0000 EC               	dc.b $EC, $9, $0, $0, $EC
0002524A EC01 0006 04               	dc.b $EC, $1, $0, $6, $4
0002524F FC0D 0008 F4               	dc.b $FC, $D, $0, $8, $F4
00025254 0C08 0010 FC               	dc.b $C, $8, $0, $10, $FC
00025259 05                         DATAHBTH26Y3SET_D: dc.b $5
0002525A ED09 0000 ED               	dc.b $ED, $9, $0, $0, $ED
0002525F ED01 0006 05               	dc.b $ED, $1, $0, $6, $5
00025264 FD00 0008 ED               	dc.b $FD, $0, $0, $8, $ED
00025269 FD0D 0009 F5               	dc.b $FD, $D, $0, $9, $F5
0002526E 0D08 0011 FD               	dc.b $D, $8, $0, $11, $FD
00025273 04                         DATAHBTH26Y3SET_E: dc.b $4
00025274 F407 0000 EB               	dc.b $F4, $7, $0, $0, $EB
00025279 EC09 0008 FB               	dc.b $EC, $9, $0, $8, $FB
0002527E FC04 000E FB               	dc.b $FC, $4, $0, $E, $FB
00025283 0409 0010 FB               	dc.b $4, $9, $0, $10, $FB
00025288 02                         DATAHBTH26Y3SET_F: dc.b $2
00025289 F407 0000 EC               	dc.b $F4, $7, $0, $0, $EC
0002528E EC0B 0008 FC               	dc.b $EC, $B, $0, $8, $FC
00025293 02                         DATAHBTH26Y3SET_10: dc.b $2
00025294 F406 0000 ED               	dc.b $F4, $6, $0, $0, $ED
00025299 F40A 0006 FD               	dc.b $F4, $A, $0, $6, $FD
0002529E 04                         DATAHBTH26Y3SET_11: dc.b $4
0002529F F406 0000 EB               	dc.b $F4, $6, $0, $0, $EB
000252A4 FC04 0006 FB               	dc.b $FC, $4, $0, $6, $FB
000252A9 EC09 0008 FB               	dc.b $EC, $9, $0, $8, $FB
000252AE 0409 000E FB               	dc.b $4, $9, $0, $E, $FB
000252B3 02                         DATAHBTH26Y3SET_12: dc.b $2
000252B4 F406 0000 EC               	dc.b $F4, $6, $0, $0, $EC
000252B9 F40B 0006 FC               	dc.b $F4, $B, $0, $6, $FC
000252BE 03                         DATAHBTH26Y3SET_13: dc.b $3
000252BF F407 0000 ED               	dc.b $F4, $7, $0, $0, $ED
000252C4 F40A 0008 FD               	dc.b $F4, $A, $0, $8, $FD
000252C9 EC00 0011 FD               	dc.b $EC, $0, $0, $11, $FD
000252CE 06                         DATAHBTH26Y3SET_14: dc.b $6
000252CF FD06 0000 EB               	dc.b $FD, $6, $0, $0, $EB
000252D4 0D00 0006 FB               	dc.b $D, $0, $0, $6, $FB
000252D9 F50A 0007 FB               	dc.b $F5, $A, $0, $7, $FB
000252DE FD00 0010 13               	dc.b $FD, $0, $0, $10, $13
000252E3 F504 0011 EB               	dc.b $F5, $4, $0, $11, $EB
000252E8 ED04 0013 F3               	dc.b $ED, $4, $0, $13, $F3
000252ED 06                         DATAHBTH26Y3SET_15: dc.b $6
000252EE FC06 0000 EC               	dc.b $FC, $6, $0, $0, $EC
000252F3 0C00 0006 FC               	dc.b $C, $0, $0, $6, $FC
000252F8 F40A 0007 FC               	dc.b $F4, $A, $0, $7, $FC
000252FD F404 0010 EC               	dc.b $F4, $4, $0, $10, $EC
00025302 EC04 0012 FC               	dc.b $EC, $4, $0, $12, $FC
00025307 E408 0014 F4               	dc.b $E4, $8, $0, $14, $F4
0002530C 04                         DATAHBTH26Y3SET_16: dc.b $4
0002530D FB06 0000 ED               	dc.b $FB, $6, $0, $0, $ED
00025312 0304 0006 FD               	dc.b $3, $4, $0, $6, $FD
00025317 EB0A 0008 FD               	dc.b $EB, $A, $0, $8, $FD
0002531C F304 0011 ED               	dc.b $F3, $4, $0, $11, $ED
00025321 05                         DATAHBTH26Y3SET_17: dc.b $5
00025322 FD06 0000 EB               	dc.b $FD, $6, $0, $0, $EB
00025327 0508 0006 FB               	dc.b $5, $8, $0, $6, $FB
0002532C F50D 0009 FB               	dc.b $F5, $D, $0, $9, $FB
00025331 F504 0011 EB               	dc.b $F5, $4, $0, $11, $EB
00025336 ED08 0013 F3               	dc.b $ED, $8, $0, $13, $F3
0002533B 04                         DATAHBTH26Y3SET_18: dc.b $4
0002533C EC0A 0000 FC               	dc.b $EC, $A, $0, $0, $FC
00025341 0404 0009 FC               	dc.b $4, $4, $0, $9, $FC
00025346 FC06 000B EC               	dc.b $FC, $6, $0, $B, $EC
0002534B F404 0011 EC               	dc.b $F4, $4, $0, $11, $EC
00025350 05                         DATAHBTH26Y3SET_19: dc.b $5
00025351 EE0A 0000 00               	dc.b $EE, $A, $0, $0, $0
00025356 0604 0009 00               	dc.b $6, $4, $0, $9, $0
0002535B 0E00 000B 00               	dc.b $E, $0, $0, $B, $0
00025360 FE06 000C F0               	dc.b $FE, $6, $0, $C, $F0
00025365 F604 0012 F0               	dc.b $F6, $4, $0, $12, $F0
0002536A 03                         DATAHBTH26Y3SET_1A: dc.b $3
0002536B EE09 0000 F4               	dc.b $EE, $9, $0, $0, $F4
00025370 FE0E 0006 EC               	dc.b $FE, $E, $0, $6, $EC
00025375 F800 0012 0C               	dc.b $F8, $0, $0, $12, $C
0002537A 03                         DATAHBTH26Y3SET_1B: dc.b $3
0002537B EE09 0000 F4               	dc.b $EE, $9, $0, $0, $F4
00025380 FE0E 0006 EC               	dc.b $FE, $E, $0, $6, $EC
00025385 F800 0012 0C               	dc.b $F8, $0, $0, $12, $C
0002538A 03                         DATAHBTH26Y3SET_1C: dc.b $3
0002538B EE09 0000 F4               	dc.b $EE, $9, $0, $0, $F4
00025390 FE0E 0006 EC               	dc.b $FE, $E, $0, $6, $EC
00025395 F800 0012 0C               	dc.b $F8, $0, $0, $12, $C
0002539A 03                         DATAHBTH26Y3SET_1D: dc.b $3
0002539B EE09 0000 F4               	dc.b $EE, $9, $0, $0, $F4
000253A0 FE0E 0006 EC               	dc.b $FE, $E, $0, $6, $EC
000253A5 F800 0012 0C               	dc.b $F8, $0, $0, $12, $C
000253AA 04                         DATAHBTH26Y3SET_1E: dc.b $4
000253AB EE09 0000 EE               	dc.b $EE, $9, $0, $0, $EE
000253B0 EE01 0006 06               	dc.b $EE, $1, $0, $6, $6
000253B5 FE00 0008 EE               	dc.b $FE, $0, $0, $8, $EE
000253BA FE0E 0009 F6               	dc.b $FE, $E, $0, $9, $F6
000253BF 03                         DATAHBTH26Y3SET_1F: dc.b $3
000253C0 EE09 0000 EE               	dc.b $EE, $9, $0, $0, $EE
000253C5 EE01 0006 06               	dc.b $EE, $1, $0, $6, $6
000253CA FE0E 0008 F6               	dc.b $FE, $E, $0, $8, $F6
000253CF 04                         DATAHBTH26Y3SET_20: dc.b $4
000253D0 EE09 0000 EE               	dc.b $EE, $9, $0, $0, $EE
000253D5 EE01 0006 06               	dc.b $EE, $1, $0, $6, $6
000253DA FE00 0008 EE               	dc.b $FE, $0, $0, $8, $EE
000253DF FE0E 0009 F6               	dc.b $FE, $E, $0, $9, $F6
000253E4 03                         DATAHBTH26Y3SET_21: dc.b $3
000253E5 EE09 0000 EE               	dc.b $EE, $9, $0, $0, $EE
000253EA EE01 0006 06               	dc.b $EE, $1, $0, $6, $6
000253EF FE0E 0008 F6               	dc.b $FE, $E, $0, $8, $F6
000253F4 02                         DATAHBTH26Y3SET_22: dc.b $2
000253F5 F406 0000 EF               	dc.b $F4, $6, $0, $0, $EF
000253FA F40B 0006 FF               	dc.b $F4, $B, $0, $6, $FF
000253FF 02                         DATAHBTH26Y3SET_23: dc.b $2
00025400 F406 0000 EF               	dc.b $F4, $6, $0, $0, $EF
00025405 F40B 0006 FF               	dc.b $F4, $B, $0, $6, $FF
0002540A 02                         DATAHBTH26Y3SET_24: dc.b $2
0002540B F406 0000 EF               	dc.b $F4, $6, $0, $0, $EF
00025410 F40B 0006 FF               	dc.b $F4, $B, $0, $6, $FF
00025415 02                         DATAHBTH26Y3SET_25: dc.b $2
00025416 F406 0000 EF               	dc.b $F4, $6, $0, $0, $EF
0002541B F40B 0006 FF               	dc.b $F4, $B, $0, $6, $FF
00025420 03                         DATAHBTH26Y3SET_26: dc.b $3
00025421 F207 0000 EE               	dc.b $F2, $7, $0, $0, $EE
00025426 0A00 0008 FE               	dc.b $A, $0, $0, $8, $FE
0002542B EA0B 0009 FE               	dc.b $EA, $B, $0, $9, $FE
00025430 02                         DATAHBTH26Y3SET_27: dc.b $2
00025431 F207 0000 EE               	dc.b $F2, $7, $0, $0, $EE
00025436 EA0B 0008 FE               	dc.b $EA, $B, $0, $8, $FE
0002543B 03                         DATAHBTH26Y3SET_28: dc.b $3
0002543C F207 0000 EE               	dc.b $F2, $7, $0, $0, $EE
00025441 0A00 0008 FE               	dc.b $A, $0, $0, $8, $FE
00025446 EA0B 0009 FE               	dc.b $EA, $B, $0, $9, $FE
0002544B 02                         DATAHBTH26Y3SET_29: dc.b $2
0002544C F207 0000 EE               	dc.b $F2, $7, $0, $0, $EE
00025451 EA0B 0008 FE               	dc.b $EA, $B, $0, $8, $FE
00025456 01                         DATAHBTH26Y3SET_2A: dc.b $1
00025457 F00F 0000 F0               	dc.b $F0, $F, $0, $0, $F0
0002545C 01                         DATAHBTH26Y3SET_2B: dc.b $1
0002545D F00F 0000 F0               	dc.b $F0, $F, $0, $0, $F0
00025462 01                         DATAHBTH26Y3SET_2C: dc.b $1
00025463 F00F 0000 F0               	dc.b $F0, $F, $0, $0, $F0
00025468 01                         DATAHBTH26Y3SET_2D: dc.b $1
00025469 F00F 0000 F0               	dc.b $F0, $F, $0, $0, $F0
0002546E 01                         DATAHBTH26Y3SET_2E: dc.b $1
0002546F F00F 0000 F0               	dc.b $F0, $F, $0, $0, $F0
00025474 07                         DATAHBTH26Y3SET_2F: dc.b $7
00025475 E80D 0000 EC               	dc.b $E8, $D, $0, $0, $EC
0002547A E801 0008 0C               	dc.b $E8, $1, $0, $8, $C
0002547F F809 000A F4               	dc.b $F8, $9, $0, $A, $F4
00025484 1000 0010 F4               	dc.b $10, $0, $0, $10, $F4
00025489 0808 0011 F4               	dc.b $8, $8, $0, $11, $F4
0002548E 1000 0014 FC               	dc.b $10, $0, $0, $14, $FC
00025493 1000 0015 04               	dc.b $10, $0, $0, $15, $4
00025498 07                         DATAHBTH26Y3SET_30: dc.b $7
00025499 E80D 0000 EC               	dc.b $E8, $D, $0, $0, $EC
0002549E E801 0008 0C               	dc.b $E8, $1, $0, $8, $C
000254A3 F809 000A F4               	dc.b $F8, $9, $0, $A, $F4
000254A8 1000 0010 F4               	dc.b $10, $0, $0, $10, $F4
000254AD 0808 0011 F4               	dc.b $8, $8, $0, $11, $F4
000254B2 1000 0014 FC               	dc.b $10, $0, $0, $14, $FC
000254B7 1000 0015 04               	dc.b $10, $0, $0, $15, $4
000254BC 04                         DATAHBTH26Y3SET_31: dc.b $4
000254BD EF0E 0000 EC               	dc.b $EF, $E, $0, $0, $EC
000254C2 F701 000C 0C               	dc.b $F7, $1, $0, $C, $C
000254C7 070C 000E F4               	dc.b $7, $C, $0, $E, $F4
000254CC EF00 0012 0C               	dc.b $EF, $0, $0, $12, $C
000254D1 04                         DATAHBTH26Y3SET_32: dc.b $4
000254D2 EB09 0800 F4               	dc.b $EB, $9, $8, $0, $F4
000254D7 FB09 0806 FC               	dc.b $FB, $9, $8, $6, $FC
000254DC FB06 080C EC               	dc.b $FB, $6, $8, $C, $EC
000254E1 0B04 0812 04               	dc.b $B, $4, $8, $12, $4
000254E6 02                         DATAHBTH26Y3SET_33: dc.b $2
000254E7 EF0F 0000 F0               	dc.b $EF, $F, $0, $0, $F0
000254EC 0F0C 0010 F0               	dc.b $F, $C, $0, $10, $F0
000254F1 02                         DATAHBTH26Y3SET_34: dc.b $2
000254F2 EF0B 0000 F4               	dc.b $EF, $B, $0, $0, $F4
000254F7 0F08 000C F4               	dc.b $F, $8, $0, $C, $F4
000254FC 05                         DATAHBTH26Y3SET_35: dc.b $5
000254FD 000C 0000 EC               	dc.b $0, $C, $0, $0, $EC
00025502 0805 0004 F4               	dc.b $8, $5, $0, $4, $F4
00025507 0800 0008 04               	dc.b $8, $0, $0, $8, $4
0002550C E80A 0009 F4               	dc.b $E8, $A, $0, $9, $F4
00025511 F001 0012 0C               	dc.b $F0, $1, $0, $12, $C
00025516 05                         DATAHBTH26Y3SET_36: dc.b $5
00025517 E80A 0000 F4               	dc.b $E8, $A, $0, $0, $F4
0002551C E801 0009 0C               	dc.b $E8, $1, $0, $9, $C
00025521 000C 000B EC               	dc.b $0, $C, $0, $B, $EC
00025526 0805 000F F4               	dc.b $8, $5, $0, $F, $F4
0002552B 0800 0013 04               	dc.b $8, $0, $0, $13, $4
00025530 03                         DATAHBTH26Y3SET_37: dc.b $3
00025531 E80B 0000 F4               	dc.b $E8, $B, $0, $0, $F4
00025536 0808 000C F4               	dc.b $8, $8, $0, $C, $F4
0002553B 1004 000F F4               	dc.b $10, $4, $0, $F, $F4
00025540 03                         DATAHBTH26Y3SET_38: dc.b $3
00025541 0808 0000 F4               	dc.b $8, $8, $0, $0, $F4
00025546 1004 0003 F4               	dc.b $10, $4, $0, $3, $F4
0002554B E80B 0005 F4               	dc.b $E8, $B, $0, $5, $F4
00025550 02                         DATAHBTH26Y3SET_39: dc.b $2
00025551 E80B 0000 F4               	dc.b $E8, $B, $0, $0, $F4
00025556 0808 000C F4               	dc.b $8, $8, $0, $C, $F4
0002555B 02                         DATAHBTH26Y3SET_3A: dc.b $2
0002555C E80F 0000 F4               	dc.b $E8, $F, $0, $0, $F4
00025561 0808 0010 F4               	dc.b $8, $8, $0, $10, $F4
00025566 01                         DATAHBTH26Y3SET_3B: dc.b $1
00025567 F30F 0000 F3               	dc.b $F3, $F, $0, $0, $F3
0002556C 01                         DATAHBTH26Y3SET_3C: dc.b $1
0002556D F30F 0000 F3               	dc.b $F3, $F, $0, $0, $F3
00025572 03                         DATAHBTH26Y3SET_3D: dc.b $3
00025573 FC0D 0000 F2               	dc.b $FC, $D, $0, $0, $F2
00025578 EC09 0008 F2               	dc.b $EC, $9, $0, $8, $F2
0002557D 0C04 000E 02               	dc.b $C, $4, $0, $E, $2
00025582 03                         DATAHBTH26Y3SET_3E: dc.b $3
00025583 F40D 0000 FC               	dc.b $F4, $D, $0, $0, $FC
00025588 FC05 0008 EC               	dc.b $FC, $5, $0, $8, $EC
0002558D 0408 000C FC               	dc.b $4, $8, $0, $C, $FC
00025592 02                         DATAHBTH26Y3SET_3F: dc.b $2
00025593 F40A 0000 E8               	dc.b $F4, $A, $0, $0, $E8
00025598 F40A 0800 00               	dc.b $F4, $A, $8, $0, $0
0002559D 03                         DATAHBTH26Y3SET_40: dc.b $3
0002559E F40D 0800 EC               	dc.b $F4, $D, $8, $0, $EC
000255A3 FC05 0808 0C               	dc.b $FC, $5, $8, $8, $C
000255A8 0408 080C F4               	dc.b $4, $8, $8, $C, $F4
000255AD 03                         DATAHBTH26Y3SET_41: dc.b $3
000255AE F40D 0000 EC               	dc.b $F4, $D, $0, $0, $EC
000255B3 FC00 0008 0C               	dc.b $FC, $0, $0, $8, $C
000255B8 040C 0009 F4               	dc.b $4, $C, $0, $9, $F4
000255BD 03                         DATAHBTH26Y3SET_42: dc.b $3
000255BE F40D 0800 F4               	dc.b $F4, $D, $8, $0, $F4
000255C3 FC00 0808 EC               	dc.b $FC, $0, $8, $8, $EC
000255C8 040C 0809 EC               	dc.b $4, $C, $8, $9, $EC
000255CD 08                         DATAHBTH26Y3SET_43: dc.b $8
000255CE E801 0000 0C               	dc.b $E8, $1, $0, $0, $C
000255D3 1000 0002 F4               	dc.b $10, $0, $0, $2, $F4
000255D8 0808 0003 F4               	dc.b $8, $8, $0, $3, $F4
000255DD 1000 0006 FC               	dc.b $10, $0, $0, $6, $FC
000255E2 FC00 0007 0C               	dc.b $FC, $0, $0, $7, $C
000255E7 0800 0008 0C               	dc.b $8, $0, $0, $8, $C
000255EC E809 0009 F4               	dc.b $E8, $9, $0, $9, $F4
000255F1 F80D 000F EC               	dc.b $F8, $D, $0, $F, $EC
000255F6 07                         DATAHBTH26Y3SET_44: dc.b $7
000255F7 E80D 0000 EC               	dc.b $E8, $D, $0, $0, $EC
000255FC E801 0008 0C               	dc.b $E8, $1, $0, $8, $C
00025601 F809 000A F4               	dc.b $F8, $9, $0, $A, $F4
00025606 0808 0010 F4               	dc.b $8, $8, $0, $10, $F4
0002560B 1000 0013 FC               	dc.b $10, $0, $0, $13, $FC
00025610 1004 0014 EC               	dc.b $10, $4, $0, $14, $EC
00025615 0800 0016 0C               	dc.b $8, $0, $0, $16, $C
0002561A 04                         DATAHBTH26Y3SET_45: dc.b $4
0002561B FB09 0000 EC               	dc.b $FB, $9, $0, $0, $EC
00025620 FB06 0006 04               	dc.b $FB, $6, $0, $6, $4
00025625 0B04 000C EC               	dc.b $B, $4, $0, $C, $EC
0002562A EB09 000E F4               	dc.b $EB, $9, $0, $E, $F4
0002562F 08                         DATAHBTH26Y3SET_46: dc.b $8
00025630 FD05 0013 F1               	dc.b $FD, $5, $0, $13, $F1
00025635 0D08 0000 F8               	dc.b $D, $8, $0, $0, $F8
0002563A 0D00 0003 F0               	dc.b $D, $0, $0, $3, $F0
0002563F F50D 0004 F0               	dc.b $F5, $D, $0, $4, $F0
00025644 ED08 000C F0               	dc.b $ED, $8, $0, $C, $F0
00025649 0500 000F 00               	dc.b $5, $0, $0, $F, $0
0002564E 0500 0010 08               	dc.b $5, $0, $0, $10, $8
00025653 0504 0011 F0               	dc.b $5, $4, $0, $11, $F0
00025658 08                         DATAHBTH26Y3SET_47: dc.b $8
00025659 FD05 0000 F1               	dc.b $FD, $5, $0, $0, $F1
0002565E 0D08 0004 F8               	dc.b $D, $8, $0, $4, $F8
00025663 0D00 0007 F0               	dc.b $D, $0, $0, $7, $F0
00025668 ED08 0008 F0               	dc.b $ED, $8, $0, $8, $F0
0002566D 0500 000B 00               	dc.b $5, $0, $0, $B, $0
00025672 0500 000C 08               	dc.b $5, $0, $0, $C, $8
00025677 0504 000D F0               	dc.b $5, $4, $0, $D, $F0
0002567C F509 000F F0               	dc.b $F5, $9, $0, $F, $F0
00025681 06                         DATAHBTH26Y3SET_48: dc.b $6
00025682 FD05 0000 F1               	dc.b $FD, $5, $0, $0, $F1
00025687 0D08 0004 F8               	dc.b $D, $8, $0, $4, $F8
0002568C 0D00 0007 F0               	dc.b $D, $0, $0, $7, $F0
00025691 0508 0008 F0               	dc.b $5, $8, $0, $8, $F0
00025696 F509 000B F0               	dc.b $F5, $9, $0, $B, $F0
0002569B ED08 0011 F0               	dc.b $ED, $8, $0, $11, $F0
000256A0 06                         DATAHBTH26Y3SET_49: dc.b $6
000256A1 FD05 0000 F1               	dc.b $FD, $5, $0, $0, $F1
000256A6 0D00 0004 F0               	dc.b $D, $0, $0, $4, $F0
000256AB 0D08 0005 F8               	dc.b $D, $8, $0, $5, $F8
000256B0 0508 0008 F0               	dc.b $5, $8, $0, $8, $F0
000256B5 F509 000B F0               	dc.b $F5, $9, $0, $B, $F0
000256BA ED08 0011 F0               	dc.b $ED, $8, $0, $11, $F0
000256BF 03                         DATAHBTH26Y3SET_4A: dc.b $3
000256C0 EC0B 0000 EC               	dc.b $EC, $B, $0, $0, $EC
000256C5 F403 000C 04               	dc.b $F4, $3, $0, $C, $4
000256CA 0C04 0010 F4               	dc.b $C, $4, $0, $10, $F4
000256CF 03                         DATAHBTH26Y3SET_4B: dc.b $3
000256D0 EC0B 0000 EC               	dc.b $EC, $B, $0, $0, $EC
000256D5 F403 000C 04               	dc.b $F4, $3, $0, $C, $4
000256DA 0C04 0010 F4               	dc.b $C, $4, $0, $10, $F4
000256DF 02                         DATAHBTH26Y3SET_4C: dc.b $2
000256E0 EC0B 0000 F4               	dc.b $EC, $B, $0, $0, $F4
000256E5 0C08 000C F4               	dc.b $C, $8, $0, $C, $F4
000256EA 02                         DATAHBTH26Y3SET_4D: dc.b $2
000256EB ED0A 0000 F3               	dc.b $ED, $A, $0, $0, $F3
000256F0 050D 0009 EB               	dc.b $5, $D, $0, $9, $EB
000256F5 03                         DATAHBTH26Y3SET_4E: dc.b $3
000256F6 EC0A 0000 F3               	dc.b $EC, $A, $0, $0, $F3
000256FB 0408 0009 F3               	dc.b $4, $8, $0, $9, $F3
00025700 0C04 000C F3               	dc.b $C, $4, $0, $C, $F3
00025705 02                         DATAHBTH26Y3SET_4F: dc.b $2
00025706 ED0A 0000 F3               	dc.b $ED, $A, $0, $0, $F3
0002570B 050D 0009 EB               	dc.b $5, $D, $0, $9, $EB
00025710 03                         DATAHBTH26Y3SET_50: dc.b $3
00025711 EC0A 0000 F3               	dc.b $EC, $A, $0, $0, $F3
00025716 0408 0009 F3               	dc.b $4, $8, $0, $9, $F3
0002571B 0C04 000C F3               	dc.b $C, $4, $0, $C, $F3
00025720 07                         DATAHBTH26Y3SET_51: dc.b $7
00025721 0C08 0000 F8               	dc.b $C, $8, $0, $0, $F8
00025726 0C00 0003 F0               	dc.b $C, $0, $0, $3, $F0
0002572B F40D 0004 F0               	dc.b $F4, $D, $0, $4, $F0
00025730 0404 000C F0               	dc.b $4, $4, $0, $C, $F0
00025735 0404 000E 00               	dc.b $4, $4, $0, $E, $0
0002573A EC02 0010 E8               	dc.b $EC, $2, $0, $10, $E8
0002573F EC04 0013 F0               	dc.b $EC, $4, $0, $13, $F0
00025744 04                         DATAHBTH26Y3SET_52: dc.b $4
00025745 0C08 0000 F1               	dc.b $C, $8, $0, $0, $F1
0002574A FC0D 0003 F1               	dc.b $FC, $D, $0, $3, $F1
0002574F F404 000B F9               	dc.b $F4, $4, $0, $B, $F9
00025754 0400 000D E9               	dc.b $4, $0, $0, $D, $E9
00025759 06                         DATAHBTH26Y3SET_53: dc.b $6
0002575A EE09 0000 F4               	dc.b $EE, $9, $0, $0, $F4
0002575F FE0C 0006 F4               	dc.b $FE, $C, $0, $6, $F4
00025764 FE00 000A EC               	dc.b $FE, $0, $0, $A, $EC
00025769 F600 000B 0C               	dc.b $F6, $0, $0, $B, $C
0002576E 0608 000C FC               	dc.b $6, $8, $0, $C, $FC
00025773 0E04 000F 04               	dc.b $E, $4, $0, $F, $4
00025778 03                         DATAHBTH26Y3SET_54: dc.b $3
00025779 ED0B 0000 EB               	dc.b $ED, $B, $0, $0, $EB
0002577E ED03 000C 03               	dc.b $ED, $3, $0, $C, $3
00025783 0D0C 0010 EB               	dc.b $D, $C, $0, $10, $EB
00025788 03                         DATAHBTH26Y3SET_55: dc.b $3
00025789 ED0B 0000 EB               	dc.b $ED, $B, $0, $0, $EB
0002578E ED03 000C 03               	dc.b $ED, $3, $0, $C, $3
00025793 0D0C 0010 EB               	dc.b $D, $C, $0, $10, $EB
00025798                            	even
00025798                            	even
00025798                            SonicDynPLC:	include	"_maps\Sonic - Dynamic Gfx Script.asm"
00025798                            ; ================================================================================
00025798                            ; Sprite DPLCs - generated by Flex 2 Thu May 20 2021 16:24:17 GMT-0400 (Eastern Daylight Time)
00025798                            ; ================================================================================
00025798                            
00025798                            DATA8GSFE46KOC:
00025798 0000 0000                  	dc.w DATA8GSFE46KOC_0-DATA8GSFE46KOC, DATA8GSFE46KOC_1-DATA8GSFE46KOC
0002579C 0000 0000                  	dc.w DATA8GSFE46KOC_2-DATA8GSFE46KOC, DATA8GSFE46KOC_3-DATA8GSFE46KOC
000257A0 0000 0000                  	dc.w DATA8GSFE46KOC_4-DATA8GSFE46KOC, DATA8GSFE46KOC_5-DATA8GSFE46KOC
000257A4 0000 0000                  	dc.w DATA8GSFE46KOC_6-DATA8GSFE46KOC, DATA8GSFE46KOC_7-DATA8GSFE46KOC
000257A8 0000 0000                  	dc.w DATA8GSFE46KOC_8-DATA8GSFE46KOC, DATA8GSFE46KOC_9-DATA8GSFE46KOC
000257AC 0000 0000                  	dc.w DATA8GSFE46KOC_A-DATA8GSFE46KOC, DATA8GSFE46KOC_B-DATA8GSFE46KOC
000257B0 0000 0000                  	dc.w DATA8GSFE46KOC_C-DATA8GSFE46KOC, DATA8GSFE46KOC_D-DATA8GSFE46KOC
000257B4 0000 0000                  	dc.w DATA8GSFE46KOC_E-DATA8GSFE46KOC, DATA8GSFE46KOC_F-DATA8GSFE46KOC
000257B8 0000 0000                  	dc.w DATA8GSFE46KOC_10-DATA8GSFE46KOC, DATA8GSFE46KOC_11-DATA8GSFE46KOC
000257BC 0000 0000                  	dc.w DATA8GSFE46KOC_12-DATA8GSFE46KOC, DATA8GSFE46KOC_13-DATA8GSFE46KOC
000257C0 0000 0000                  	dc.w DATA8GSFE46KOC_14-DATA8GSFE46KOC, DATA8GSFE46KOC_15-DATA8GSFE46KOC
000257C4 0000 0000                  	dc.w DATA8GSFE46KOC_16-DATA8GSFE46KOC, DATA8GSFE46KOC_17-DATA8GSFE46KOC
000257C8 0000 0000                  	dc.w DATA8GSFE46KOC_18-DATA8GSFE46KOC, DATA8GSFE46KOC_19-DATA8GSFE46KOC
000257CC 0000 0000                  	dc.w DATA8GSFE46KOC_1A-DATA8GSFE46KOC, DATA8GSFE46KOC_1B-DATA8GSFE46KOC
000257D0 0000 0000                  	dc.w DATA8GSFE46KOC_1C-DATA8GSFE46KOC, DATA8GSFE46KOC_1D-DATA8GSFE46KOC
000257D4 0000 0000                  	dc.w DATA8GSFE46KOC_1E-DATA8GSFE46KOC, DATA8GSFE46KOC_1F-DATA8GSFE46KOC
000257D8 0000 0000                  	dc.w DATA8GSFE46KOC_20-DATA8GSFE46KOC, DATA8GSFE46KOC_21-DATA8GSFE46KOC
000257DC 0000 0000                  	dc.w DATA8GSFE46KOC_22-DATA8GSFE46KOC, DATA8GSFE46KOC_23-DATA8GSFE46KOC
000257E0 0000 0000                  	dc.w DATA8GSFE46KOC_24-DATA8GSFE46KOC, DATA8GSFE46KOC_25-DATA8GSFE46KOC
000257E4 0000 0000                  	dc.w DATA8GSFE46KOC_26-DATA8GSFE46KOC, DATA8GSFE46KOC_27-DATA8GSFE46KOC
000257E8 0000 0000                  	dc.w DATA8GSFE46KOC_28-DATA8GSFE46KOC, DATA8GSFE46KOC_29-DATA8GSFE46KOC
000257EC 0000 0000                  	dc.w DATA8GSFE46KOC_2A-DATA8GSFE46KOC, DATA8GSFE46KOC_2B-DATA8GSFE46KOC
000257F0 0000 0000                  	dc.w DATA8GSFE46KOC_2C-DATA8GSFE46KOC, DATA8GSFE46KOC_2D-DATA8GSFE46KOC
000257F4 0000 0000                  	dc.w DATA8GSFE46KOC_2E-DATA8GSFE46KOC, DATA8GSFE46KOC_2F-DATA8GSFE46KOC
000257F8 0000 0000                  	dc.w DATA8GSFE46KOC_30-DATA8GSFE46KOC, DATA8GSFE46KOC_31-DATA8GSFE46KOC
000257FC 0000 0000                  	dc.w DATA8GSFE46KOC_32-DATA8GSFE46KOC, DATA8GSFE46KOC_33-DATA8GSFE46KOC
00025800 0000 0000                  	dc.w DATA8GSFE46KOC_34-DATA8GSFE46KOC, DATA8GSFE46KOC_35-DATA8GSFE46KOC
00025804 0000 0000                  	dc.w DATA8GSFE46KOC_36-DATA8GSFE46KOC, DATA8GSFE46KOC_37-DATA8GSFE46KOC
00025808 0000 0000                  	dc.w DATA8GSFE46KOC_38-DATA8GSFE46KOC, DATA8GSFE46KOC_39-DATA8GSFE46KOC
0002580C 0000 0000                  	dc.w DATA8GSFE46KOC_3A-DATA8GSFE46KOC, DATA8GSFE46KOC_3B-DATA8GSFE46KOC
00025810 0000 0000                  	dc.w DATA8GSFE46KOC_3C-DATA8GSFE46KOC, DATA8GSFE46KOC_3D-DATA8GSFE46KOC
00025814 0000 0000                  	dc.w DATA8GSFE46KOC_3E-DATA8GSFE46KOC, DATA8GSFE46KOC_3F-DATA8GSFE46KOC
00025818 0000 0000                  	dc.w DATA8GSFE46KOC_40-DATA8GSFE46KOC, DATA8GSFE46KOC_41-DATA8GSFE46KOC
0002581C 0000 0000                  	dc.w DATA8GSFE46KOC_42-DATA8GSFE46KOC, DATA8GSFE46KOC_43-DATA8GSFE46KOC
00025820 0000 0000                  	dc.w DATA8GSFE46KOC_44-DATA8GSFE46KOC, DATA8GSFE46KOC_45-DATA8GSFE46KOC
00025824 0000 0000                  	dc.w DATA8GSFE46KOC_46-DATA8GSFE46KOC, DATA8GSFE46KOC_47-DATA8GSFE46KOC
00025828 0000 0000                  	dc.w DATA8GSFE46KOC_48-DATA8GSFE46KOC, DATA8GSFE46KOC_49-DATA8GSFE46KOC
0002582C 0000 0000                  	dc.w DATA8GSFE46KOC_4A-DATA8GSFE46KOC, DATA8GSFE46KOC_4B-DATA8GSFE46KOC
00025830 0000 0000                  	dc.w DATA8GSFE46KOC_4C-DATA8GSFE46KOC, DATA8GSFE46KOC_4D-DATA8GSFE46KOC
00025834 0000 0000                  	dc.w DATA8GSFE46KOC_4E-DATA8GSFE46KOC, DATA8GSFE46KOC_4F-DATA8GSFE46KOC
00025838 0000 0000                  	dc.w DATA8GSFE46KOC_50-DATA8GSFE46KOC, DATA8GSFE46KOC_51-DATA8GSFE46KOC
0002583C 0000 0000                  	dc.w DATA8GSFE46KOC_52-DATA8GSFE46KOC, DATA8GSFE46KOC_53-DATA8GSFE46KOC
00025840 0000 0000                  	dc.w DATA8GSFE46KOC_54-DATA8GSFE46KOC, DATA8GSFE46KOC_55-DATA8GSFE46KOC
00025844 00                         DATA8GSFE46KOC_0: dc.b $0
00025845 02                         DATA8GSFE46KOC_1: dc.b $2
00025846 F000                       	dc.b $F0, $0
00025848 2010                       	dc.b $20, $10
0002584A 02                         DATA8GSFE46KOC_2: dc.b $2
0002584B F013                       	dc.b $F0, $13
0002584D 5023                       	dc.b $50, $23
0002584F 02                         DATA8GSFE46KOC_3: dc.b $2
00025850 7013                       	dc.b $70, $13
00025852 B029                       	dc.b $B0, $29
00025854 02                         DATA8GSFE46KOC_4: dc.b $2
00025855 803B                       	dc.b $80, $3B
00025857 5239                       	dc.b $52, $39
00025859 02                         DATA8GSFE46KOC_5: dc.b $2
0002585A D22B                       	dc.b $D2, $2B
0002585C 5239                       	dc.b $52, $39
0002585E 02                         DATA8GSFE46KOC_6: dc.b $2
0002585F B052                       	dc.b $B0, $52
00025861 5239                       	dc.b $52, $39
00025863 03                         DATA8GSFE46KOC_7: dc.b $3
00025864 7013                       	dc.b $70, $13
00025866 305E                       	dc.b $30, $5E
00025868 5062                       	dc.b $50, $62
0002586A 02                         DATA8GSFE46KOC_8: dc.b $2
0002586B F2C3                       	dc.b $F2, $C3
0002586D 52D3                       	dc.b $52, $D3
0002586F 02                         DATA8GSFE46KOC_9: dc.b $2
00025870 F2D9                       	dc.b $F2, $D9
00025872 62E9                       	dc.b $62, $E9
00025874 02                         DATA8GSFE46KOC_A: dc.b $2
00025875 F2F0                       	dc.b $F2, $F0
00025877 2300                       	dc.b $23, $0
00025879 02                         DATA8GSFE46KOC_B: dc.b $2
0002587A F303                       	dc.b $F3, $3
0002587C 6313                       	dc.b $63, $13
0002587E 02                         DATA8GSFE46KOC_C: dc.b $2
0002587F F31A                       	dc.b $F3, $1A
00025881 232A                       	dc.b $23, $2A
00025883 02                         DATA8GSFE46KOC_D: dc.b $2
00025884 F32D                       	dc.b $F3, $2D
00025886 333D                       	dc.b $33, $3D
00025888 02                         DATA8GSFE46KOC_E: dc.b $2
00025889 F34F                       	dc.b $F3, $4F
0002588B 535F                       	dc.b $53, $5F
0002588D 02                         DATA8GSFE46KOC_F: dc.b $2
0002588E F365                       	dc.b $F3, $65
00025890 3375                       	dc.b $33, $75
00025892 01                         DATA8GSFE46KOC_10: dc.b $1
00025893 E379                       	dc.b $E3, $79
00025895 02                         DATA8GSFE46KOC_11: dc.b $2
00025896 F388                       	dc.b $F3, $88
00025898 3398                       	dc.b $33, $98
0002589A 02                         DATA8GSFE46KOC_12: dc.b $2
0002589B F39C                       	dc.b $F3, $9C
0002589D 13AC                       	dc.b $13, $AC
0002589F 02                         DATA8GSFE46KOC_13: dc.b $2
000258A0 F3AE                       	dc.b $F3, $AE
000258A2 13BE                       	dc.b $13, $BE
000258A4 02                         DATA8GSFE46KOC_14: dc.b $2
000258A5 F3C0                       	dc.b $F3, $C0
000258A7 43D0                       	dc.b $43, $D0
000258A9 02                         DATA8GSFE46KOC_15: dc.b $2
000258AA F3D5                       	dc.b $F3, $D5
000258AC 63E5                       	dc.b $63, $E5
000258AE 02                         DATA8GSFE46KOC_16: dc.b $2
000258AF F3EC                       	dc.b $F3, $EC
000258B1 23FC                       	dc.b $23, $FC
000258B3 02                         DATA8GSFE46KOC_17: dc.b $2
000258B4 F3FF                       	dc.b $F3, $FF
000258B6 540F                       	dc.b $54, $F
000258B8 02                         DATA8GSFE46KOC_18: dc.b $2
000258B9 F415                       	dc.b $F4, $15
000258BB 2425                       	dc.b $24, $25
000258BD 02                         DATA8GSFE46KOC_19: dc.b $2
000258BE F428                       	dc.b $F4, $28
000258C0 3438                       	dc.b $34, $38
000258C2 03                         DATA8GSFE46KOC_1A: dc.b $3
000258C3 F068                       	dc.b $F0, $68
000258C5 1078                       	dc.b $10, $78
000258C7 014D                       	dc.b $1, $4D
000258C9 03                         DATA8GSFE46KOC_1B: dc.b $3
000258CA 5035                       	dc.b $50, $35
000258CC B07A                       	dc.b $B0, $7A
000258CE 014D                       	dc.b $1, $4D
000258D0 03                         DATA8GSFE46KOC_1C: dc.b $3
000258D1 5068                       	dc.b $50, $68
000258D3 B086                       	dc.b $B0, $86
000258D5 014D                       	dc.b $1, $4D
000258D7 03                         DATA8GSFE46KOC_1D: dc.b $3
000258D8 5035                       	dc.b $50, $35
000258DA B092                       	dc.b $B0, $92
000258DC 014D                       	dc.b $1, $4D
000258DE 02                         DATA8GSFE46KOC_1E: dc.b $2
000258DF F43C                       	dc.b $F4, $3C
000258E1 444C                       	dc.b $44, $4C
000258E3 02                         DATA8GSFE46KOC_1F: dc.b $2
000258E4 F451                       	dc.b $F4, $51
000258E6 3461                       	dc.b $34, $61
000258E8 02                         DATA8GSFE46KOC_20: dc.b $2
000258E9 F465                       	dc.b $F4, $65
000258EB 4475                       	dc.b $44, $75
000258ED 02                         DATA8GSFE46KOC_21: dc.b $2
000258EE F47A                       	dc.b $F4, $7A
000258F0 348A                       	dc.b $34, $8A
000258F2 02                         DATA8GSFE46KOC_22: dc.b $2
000258F3 F48E                       	dc.b $F4, $8E
000258F5 149E                       	dc.b $14, $9E
000258F7 02                         DATA8GSFE46KOC_23: dc.b $2
000258F8 F4A0                       	dc.b $F4, $A0
000258FA 14B0                       	dc.b $14, $B0
000258FC 02                         DATA8GSFE46KOC_24: dc.b $2
000258FD F4B2                       	dc.b $F4, $B2
000258FF 14C2                       	dc.b $14, $C2
00025901 02                         DATA8GSFE46KOC_25: dc.b $2
00025902 F4C4                       	dc.b $F4, $C4
00025904 14D4                       	dc.b $14, $D4
00025906 02                         DATA8GSFE46KOC_26: dc.b $2
00025907 F4EA                       	dc.b $F4, $EA
00025909 44FA                       	dc.b $44, $FA
0002590B 02                         DATA8GSFE46KOC_27: dc.b $2
0002590C F4D6                       	dc.b $F4, $D6
0002590E 34E6                       	dc.b $34, $E6
00025910 02                         DATA8GSFE46KOC_28: dc.b $2
00025911 F4FF                       	dc.b $F4, $FF
00025913 450F                       	dc.b $45, $F
00025915 02                         DATA8GSFE46KOC_29: dc.b $2
00025916 F514                       	dc.b $F5, $14
00025918 3524                       	dc.b $35, $24
0002591A 01                         DATA8GSFE46KOC_2A: dc.b $1
0002591B F09E                       	dc.b $F0, $9E
0002591D 01                         DATA8GSFE46KOC_2B: dc.b $1
0002591E F10D                       	dc.b $F1, $D
00025920 01                         DATA8GSFE46KOC_2C: dc.b $1
00025921 F11D                       	dc.b $F1, $1D
00025923 01                         DATA8GSFE46KOC_2D: dc.b $1
00025924 F12D                       	dc.b $F1, $2D
00025926 01                         DATA8GSFE46KOC_2E: dc.b $1
00025927 F13D                       	dc.b $F1, $3D
00025929 05                         DATA8GSFE46KOC_2F: dc.b $5
0002592A 71F2                       	dc.b $71, $F2
0002592C 11FA                       	dc.b $11, $FA
0002592E 51FC                       	dc.b $51, $FC
00025930 0202                       	dc.b $2, $2
00025932 4203                       	dc.b $42, $3
00025934 05                         DATA8GSFE46KOC_30: dc.b $5
00025935 7542                       	dc.b $75, $42
00025937 154A                       	dc.b $15, $4A
00025939 554C                       	dc.b $55, $4C
0002593B 0552                       	dc.b $5, $52
0002593D 4553                       	dc.b $45, $53
0002593F 03                         DATA8GSFE46KOC_31: dc.b $3
00025940 F0C4                       	dc.b $F0, $C4
00025942 10D4                       	dc.b $10, $D4
00025944 014E                       	dc.b $1, $4E
00025946 04                         DATA8GSFE46KOC_32: dc.b $4
00025947 50D6                       	dc.b $50, $D6
00025949 50DC                       	dc.b $50, $DC
0002594B 50E2                       	dc.b $50, $E2
0002594D 10E8                       	dc.b $10, $E8
0002594F 02                         DATA8GSFE46KOC_33: dc.b $2
00025950 F0EA                       	dc.b $F0, $EA
00025952 30FA                       	dc.b $30, $FA
00025954 01                         DATA8GSFE46KOC_34: dc.b $1
00025955 E0FE                       	dc.b $E0, $FE
00025957 02                         DATA8GSFE46KOC_35: dc.b $2
00025958 F15A                       	dc.b $F1, $5A
0002595A 316A                       	dc.b $31, $6A
0002595C 02                         DATA8GSFE46KOC_36: dc.b $2
0002595D F14F                       	dc.b $F1, $4F
0002595F 315F                       	dc.b $31, $5F
00025961 02                         DATA8GSFE46KOC_37: dc.b $2
00025962 F16E                       	dc.b $F1, $6E
00025964 017E                       	dc.b $1, $7E
00025966 02                         DATA8GSFE46KOC_38: dc.b $2
00025967 F17A                       	dc.b $F1, $7A
00025969 018A                       	dc.b $1, $8A
0002596B 01                         DATA8GSFE46KOC_39: dc.b $1
0002596C E1AE                       	dc.b $E1, $AE
0002596E 02                         DATA8GSFE46KOC_3A: dc.b $2
0002596F F18B                       	dc.b $F1, $8B
00025971 219B                       	dc.b $21, $9B
00025973 01                         DATA8GSFE46KOC_3B: dc.b $1
00025974 F21B                       	dc.b $F2, $1B
00025976 01                         DATA8GSFE46KOC_3C: dc.b $1
00025977 F19E                       	dc.b $F1, $9E
00025979 02                         DATA8GSFE46KOC_3D: dc.b $2
0002597A D1BD                       	dc.b $D1, $BD
0002597C 11CB                       	dc.b $11, $CB
0002597E 01                         DATA8GSFE46KOC_3E: dc.b $1
0002597F E1CD                       	dc.b $E1, $CD
00025981 01                         DATA8GSFE46KOC_3F: dc.b $1
00025982 81DC                       	dc.b $81, $DC
00025984 01                         DATA8GSFE46KOC_40: dc.b $1
00025985 E1CD                       	dc.b $E1, $CD
00025987 01                         DATA8GSFE46KOC_41: dc.b $1
00025988 C1E5                       	dc.b $C1, $E5
0002598A 01                         DATA8GSFE46KOC_42: dc.b $1
0002598B C1E5                       	dc.b $C1, $E5
0002598D 05                         DATA8GSFE46KOC_43: dc.b $5
0002598E 10AE                       	dc.b $10, $AE
00025990 00B5                       	dc.b $0, $B5
00025992 30B0                       	dc.b $30, $B0
00025994 1208                       	dc.b $12, $8
00025996 D0B6                       	dc.b $D0, $B6
00025998 03                         DATA8GSFE46KOC_44: dc.b $3
00025999 F20A                       	dc.b $F2, $A
0002599B 50B0                       	dc.b $50, $B0
0002599D 021A                       	dc.b $2, $1A
0002599F 02                         DATA8GSFE46KOC_45: dc.b $2
000259A0 D044                       	dc.b $D0, $44
000259A2 50D6                       	dc.b $50, $D6
000259A4 06                         DATA8GSFE46KOC_46: dc.b $6
000259A5 300E                       	dc.b $30, $E
000259A7 A23F                       	dc.b $A2, $3F
000259A9 000D                       	dc.b $0, $D
000259AB 0012                       	dc.b $0, $12
000259AD 124A                       	dc.b $12, $4A
000259AF 3250                       	dc.b $32, $50
000259B1 07                         DATA8GSFE46KOC_47: dc.b $7
000259B2 3250                       	dc.b $32, $50
000259B4 300E                       	dc.b $30, $E
000259B6 2247                       	dc.b $22, $47
000259B8 000D                       	dc.b $0, $D
000259BA 0012                       	dc.b $0, $12
000259BC 124A                       	dc.b $12, $4A
000259BE 5254                       	dc.b $52, $54
000259C0 05                         DATA8GSFE46KOC_48: dc.b $5
000259C1 3250                       	dc.b $32, $50
000259C3 300E                       	dc.b $30, $E
000259C5 224A                       	dc.b $22, $4A
000259C7 552B                       	dc.b $55, $2B
000259C9 2528                       	dc.b $25, $28
000259CB 06                         DATA8GSFE46KOC_49: dc.b $6
000259CC 3250                       	dc.b $32, $50
000259CE 0011                       	dc.b $0, $11
000259D0 224D                       	dc.b $22, $4D
000259D2 224A                       	dc.b $22, $4A
000259D4 552B                       	dc.b $55, $2B
000259D6 2528                       	dc.b $25, $28
000259D8 02                         DATA8GSFE46KOC_4A: dc.b $2
000259D9 F25A                       	dc.b $F2, $5A
000259DB 126A                       	dc.b $12, $6A
000259DD 02                         DATA8GSFE46KOC_4B: dc.b $2
000259DE F26C                       	dc.b $F2, $6C
000259E0 126A                       	dc.b $12, $6A
000259E2 01                         DATA8GSFE46KOC_4C: dc.b $1
000259E3 E27C                       	dc.b $E2, $7C
000259E5 02                         DATA8GSFE46KOC_4D: dc.b $2
000259E6 F28B                       	dc.b $F2, $8B
000259E8 029B                       	dc.b $2, $9B
000259EA 01                         DATA8GSFE46KOC_4E: dc.b $1
000259EB D29C                       	dc.b $D2, $9C
000259ED 02                         DATA8GSFE46KOC_4F: dc.b $2
000259EE 828B                       	dc.b $82, $8B
000259F0 72AA                       	dc.b $72, $AA
000259F2 02                         DATA8GSFE46KOC_50: dc.b $2
000259F3 B29C                       	dc.b $B2, $9C
000259F5 12B2                       	dc.b $12, $B2
000259F7 05                         DATA8GSFE46KOC_51: dc.b $5
000259F8 300E                       	dc.b $30, $E
000259FA 72B4                       	dc.b $72, $B4
000259FC 100B                       	dc.b $10, $B
000259FE 42BE                       	dc.b $42, $BE
00025A00 12BC                       	dc.b $12, $BC
00025A02 01                         DATA8GSFE46KOC_52: dc.b $1
00025A03 D341                       	dc.b $D3, $41
00025A05 02                         DATA8GSFE46KOC_53: dc.b $2
00025A06 F531                       	dc.b $F5, $31
00025A08 0541                       	dc.b $5, $41
00025A0A 02                         DATA8GSFE46KOC_54: dc.b $2
00025A0B F558                       	dc.b $F5, $58
00025A0D 3568                       	dc.b $35, $68
00025A0F 02                         DATA8GSFE46KOC_55: dc.b $2
00025A10 F56C                       	dc.b $F5, $6C
00025A12 357C                       	dc.b $35, $7C
00025A14                            	even
00025A14                            	even
00025A14                            
00025A14                            ; ---------------------------------------------------------------------------
00025A14                            ; Uncompressed graphics	- Sonic
00025A14                            ; ---------------------------------------------------------------------------
00025A14                            Art_Sonic:	incbin	"artunc\Sonic.bin"	; Sonic
00030A34                            		even
00030A34                            ; ---------------------------------------------------------------------------
00030A34                            ; Compressed graphics - various
00030A34                            ; ---------------------------------------------------------------------------
00030A34                            Nem_Smoke:	incbin	"artnem\Unused - Smoke.bin"
00030B38                            		even
00030B38                            Nem_SyzSparkle:	incbin	"artnem\Unused - SYZ Sparkles.bin"
00030B72                            		even
00030B72                            Nem_Shield:	incbin	"artnem\Shield.bin"
00030D08                            		even
00030D08                            Nem_Stars:	incbin	"artnem\Invincibility Stars.bin"
00030E50                            		even
00030E50                            Nem_LzSonic:	incbin	"artnem\Unused - LZ Sonic.bin" ; Sonic holding his breath
00030F5A                            		even
00030F5A                            Nem_UnkFire:	incbin	"artnem\Unused - Fireball.bin" ; unused fireball
00030FAC                            		even
00030FAC                            Nem_Warp:	incbin	"artnem\Unused - SStage Flash.bin" ; entry to special stage flash
000311EA                            		even
000311EA                            Nem_Goggle:	incbin	"artnem\Unused - Goggles.bin" ; unused goggles
00031370                            		even
00031370                            
00031370                            Map_SSWalls:	include	"_maps\SS Walls.asm"
00031370                            ; ---------------------------------------------------------------------------
00031370                            ; Sprite mappings - walls of the special stage
00031370                            ; ---------------------------------------------------------------------------
00031370                            Map_SSWalls_internal:
00031370 0000                       		dc.w byte_2C584-Map_SSWalls_internal
00031372 0000                       		dc.w byte_2C58A-Map_SSWalls_internal
00031374 0000                       		dc.w byte_2C590-Map_SSWalls_internal
00031376 0000                       		dc.w byte_2C596-Map_SSWalls_internal
00031378 0000                       		dc.w byte_2C59C-Map_SSWalls_internal
0003137A 0000                       		dc.w byte_2C5A2-Map_SSWalls_internal
0003137C 0000                       		dc.w byte_2C5A8-Map_SSWalls_internal
0003137E 0000                       		dc.w byte_2C5AE-Map_SSWalls_internal
00031380 0000                       		dc.w byte_2C5B4-Map_SSWalls_internal
00031382 0000                       		dc.w byte_2C5BA-Map_SSWalls_internal
00031384 0000                       		dc.w byte_2C5C0-Map_SSWalls_internal
00031386 0000                       		dc.w byte_2C5C6-Map_SSWalls_internal
00031388 0000                       		dc.w byte_2C5CC-Map_SSWalls_internal
0003138A 0000                       		dc.w byte_2C5D2-Map_SSWalls_internal
0003138C 0000                       		dc.w byte_2C5D8-Map_SSWalls_internal
0003138E 0000                       		dc.w byte_2C5DE-Map_SSWalls_internal
00031390 01                         byte_2C584:	dc.b 1
00031391 F40A 0000 F4               		dc.b $F4, $A, 0, 0, $F4
00031396 01                         byte_2C58A:	dc.b 1
00031397 F00F 0009 F0               		dc.b $F0, $F, 0, 9, $F0
0003139C 01                         byte_2C590:	dc.b 1
0003139D F00F 0019 F0               		dc.b $F0, $F, 0, $19, $F0
000313A2 01                         byte_2C596:	dc.b 1
000313A3 F00F 0029 F0               		dc.b $F0, $F, 0, $29, $F0
000313A8 01                         byte_2C59C:	dc.b 1
000313A9 F00F 0039 F0               		dc.b $F0, $F, 0, $39, $F0
000313AE 01                         byte_2C5A2:	dc.b 1
000313AF F00F 0049 F0               		dc.b $F0, $F, 0, $49, $F0
000313B4 01                         byte_2C5A8:	dc.b 1
000313B5 F00F 0059 F0               		dc.b $F0, $F, 0, $59, $F0
000313BA 01                         byte_2C5AE:	dc.b 1
000313BB F00F 0069 F0               		dc.b $F0, $F, 0, $69, $F0
000313C0 01                         byte_2C5B4:	dc.b 1
000313C1 F00F 0079 F0               		dc.b $F0, $F, 0, $79, $F0
000313C6 01                         byte_2C5BA:	dc.b 1
000313C7 F00F 0089 F0               		dc.b $F0, $F, 0, $89, $F0
000313CC 01                         byte_2C5C0:	dc.b 1
000313CD F00F 0099 F0               		dc.b $F0, $F, 0, $99, $F0
000313D2 01                         byte_2C5C6:	dc.b 1
000313D3 F00F 00A9 F0               		dc.b $F0, $F, 0, $A9, $F0
000313D8 01                         byte_2C5CC:	dc.b 1
000313D9 F00F 00B9 F0               		dc.b $F0, $F, 0, $B9, $F0
000313DE 01                         byte_2C5D2:	dc.b 1
000313DF F00F 00C9 F0               		dc.b $F0, $F, 0, $C9, $F0
000313E4 01                         byte_2C5D8:	dc.b 1
000313E5 F00F 00D9 F0               		dc.b $F0, $F, 0, $D9, $F0
000313EA 01                         byte_2C5DE:	dc.b 1
000313EB F00F 00E9 F0               		dc.b $F0, $F, 0, $E9, $F0
000313F0                            		even
000313F0                            		even
000313F0                            
000313F0                            ; ---------------------------------------------------------------------------
000313F0                            ; Compressed graphics - special stage
000313F0                            ; ---------------------------------------------------------------------------
000313F0                            Nem_SSWalls:	incbin	"artnem\Special Walls.bin" ; special stage walls
00031D28                            		even
00031D28                            Eni_SSBg1:	incbin	"tilemaps\SS Background 1.bin" ; special stage background (mappings)
00031E5C                            		even
00031E5C                            Nem_SSBgFish:	incbin	"artnem\Special Birds & Fish.bin" ; special stage birds and fish background
00032AEC                            		even
00032AEC                            Eni_SSBg2:	incbin	"tilemaps\SS Background 2.bin" ; special stage background (mappings)
00032DEC                            		even
00032DEC                            Nem_SSBgCloud:	incbin	"artnem\Special Clouds.bin" ; special stage clouds background
000332E0                            		even
000332E0                            Nem_SSGOAL:	incbin	"artnem\Special GOAL.bin" ; special stage GOAL block
000333C4                            		even
000333C4                            Nem_SSRBlock:	incbin	"artnem\Special R.bin"	; special stage R block
00033494                            		even
00033494                            Nem_SS1UpBlock:	incbin	"artnem\Special 1UP.bin" ; special stage 1UP block
0003358A                            		even
0003358A                            Nem_SSEmStars:	incbin	"artnem\Special Emerald Twinkle.bin" ; special stage stars from a collected emerald
000335E8                            		even
000335E8                            Nem_SSRedWhite:	incbin	"artnem\Special Red-White.bin" ; special stage red/white block
0003367A                            		even
0003367A                            Nem_SSZone1:	incbin	"artnem\Special ZONE1.bin" ; special stage ZONE1 block
0003373C                            		even
0003373C                            Nem_SSZone2:	incbin	"artnem\Special ZONE2.bin" ; ZONE2 block
0003380A                            		even
0003380A                            Nem_SSZone3:	incbin	"artnem\Special ZONE3.bin" ; ZONE3 block
000338D6                            		even
000338D6                            Nem_SSZone4:	incbin	"artnem\Special ZONE4.bin" ; ZONE4 block
0003399E                            		even
0003399E                            Nem_SSZone5:	incbin	"artnem\Special ZONE5.bin" ; ZONE5 block
00033A68                            		even
00033A68                            Nem_SSZone6:	incbin	"artnem\Special ZONE6.bin" ; ZONE6 block
00033B38                            		even
00033B38                            Nem_SSUpDown:	incbin	"artnem\Special UP-DOWN.bin" ; special stage UP/DOWN block
00033D2C                            		even
00033D2C                            Nem_SSEmerald:	incbin	"artnem\Special Emeralds.bin" ; special stage chaos emeralds
00033E94                            		even
00033E94                            Nem_SSGhost:	incbin	"artnem\Special Ghost.bin" ; special stage ghost block
00033F44                            		even
00033F44                            Nem_SSWBlock:	incbin	"artnem\Special W.bin"	; special stage W block
0003401E                            		even
0003401E                            Nem_SSGlass:	incbin	"artnem\Special Glass.bin" ; special stage destroyable glass block
000340A2                            		even
000340A2                            Nem_ResultEm:	incbin	"artnem\Special Result Emeralds.bin" ; chaos emeralds on special stage results screen
00034220                            		even
00034220                            ; ---------------------------------------------------------------------------
00034220                            ; Compressed graphics - GHZ stuff
00034220                            ; ---------------------------------------------------------------------------
00034220                            Nem_Stalk:	incbin	"artnem\GHZ Flower Stalk.bin"
0003426A                            		even
0003426A                            Nem_Swing:	incbin	"artnem\GHZ Swinging Platform.bin"
00034384                            		even
00034384                            Nem_Bridge:	incbin	"artnem\GHZ Bridge.bin"
00034470                            		even
00034470                            Nem_GhzUnkBlock:incbin	"artnem\Unused - GHZ Block.bin"
000344B8                            		even
000344B8                            Nem_Ball:	incbin	"artnem\GHZ Giant Ball.bin"
00034656                            		even
00034656                            Nem_Spikes:	incbin	"artnem\Spikes.bin"
000346D2                            		even
000346D2                            Nem_GhzLog:	incbin	"artnem\Unused - GHZ Log.bin"
000348E6                            		even
000348E6                            Nem_SpikePole:	incbin	"artnem\GHZ Spiked Log.bin"
00034A12                            		even
00034A12                            Nem_PplRock:	incbin	"artnem\GHZ Purple Rock.bin"
00034B36                            		even
00034B36                            Nem_GhzWall1:	incbin	"artnem\GHZ Breakable Wall.bin"
00034BD4                            		even
00034BD4                            Nem_GhzWall2:	incbin	"artnem\GHZ Edge Wall.bin"
00034C34                            		even
00034C34                            ; ---------------------------------------------------------------------------
00034C34                            ; Compressed graphics - LZ stuff
00034C34                            ; ---------------------------------------------------------------------------
00034C34                            Nem_Water:	incbin	"artnem\LZ Water Surface.bin"
00034D58                            		even
00034D58                            Nem_Splash:	incbin	"artnem\LZ Water & Splashes.bin"
0003554C                            		even
0003554C                            Nem_LzSpikeBall:incbin	"artnem\LZ Spiked Ball & Chain.bin"
000356CC                            		even
000356CC                            Nem_FlapDoor:	incbin	"artnem\LZ Flapping Door.bin"
00035836                            		even
00035836                            Nem_Bubbles:	incbin	"artnem\LZ Bubbles & Countdown.bin"
00035D3E                            		even
00035D3E                            Nem_LzBlock3:	incbin	"artnem\LZ 32x16 Block.bin"
00035DF4                            		even
00035DF4                            Nem_LzDoor1:	incbin	"artnem\LZ Vertical Door.bin"
00035E96                            		even
00035E96                            Nem_Harpoon:	incbin	"artnem\LZ Harpoon.bin"
00035FF2                            		even
00035FF2                            Nem_LzPole:	incbin	"artnem\LZ Breakable Pole.bin"
00036056                            		even
00036056                            Nem_LzDoor2:	incbin	"artnem\LZ Horizontal Door.bin"
000361A8                            		even
000361A8                            Nem_LzWheel:	incbin	"artnem\LZ Wheel.bin"
0003668A                            		even
0003668A                            Nem_Gargoyle:	incbin	"artnem\LZ Gargoyle & Fireball.bin"
000367FA                            		even
000367FA                            Nem_LzBlock2:	incbin	"artnem\LZ Blocks.bin"
00036AB2                            		even
00036AB2                            Nem_LzPlatfm:	incbin	"artnem\LZ Rising Platform.bin"
00036BEA                            		even
00036BEA                            Nem_Cork:	incbin	"artnem\LZ Cork.bin"
00036D14                            		even
00036D14                            Nem_LzBlock1:	incbin	"artnem\LZ 32x32 Block.bin"
00036E24                            		even
00036E24                            ; ---------------------------------------------------------------------------
00036E24                            ; Compressed graphics - MZ stuff
00036E24                            ; ---------------------------------------------------------------------------
00036E24                            Nem_MzMetal:	incbin	"artnem\MZ Metal Blocks.bin"
000370B2                            		even
000370B2                            Nem_MzSwitch:	incbin	"artnem\MZ Switch.bin"
00037170                            		even
00037170                            Nem_MzGlass:	incbin	"artnem\MZ Green Glass Block.bin"
00037228                            		even
00037228                            Nem_UnkGrass:	incbin	"artnem\Unused - Grass.bin"
0003727C                            		even
0003727C                            Nem_MzFire:	incbin	"artnem\Fireballs.bin"
0003755A                            		even
0003755A                            Nem_Lava:	incbin	"artnem\MZ Lava.bin"
00037E70                            		even
00037E70                            Nem_MzBlock:	incbin	"artnem\MZ Green Pushable Block.bin"
00037FD4                            		even
00037FD4                            Nem_ImzCube:	incbin	"artnem\IMZ Ice Cube.bin"
0003816E                            		even
0003816E                            Nem_MzUnkBlock:	incbin	"artnem\Unused - MZ Background.bin"
000381F6                            		even
000381F6                            ; ---------------------------------------------------------------------------
000381F6                            ; Compressed graphics - SLZ stuff
000381F6                            ; ---------------------------------------------------------------------------
000381F6                            Nem_Seesaw:	incbin	"artnem\SLZ Seesaw.bin"
00038432                            		even
00038432                            Nem_SlzSpike:	incbin	"artnem\SLZ Little Spikeball.bin"
00038578                            		even
00038578                            Nem_Fan:	incbin	"artnem\SLZ Fan.bin"
000388D8                            		even
000388D8                            Nem_SlzWall:	incbin	"artnem\SLZ Breakable Wall.bin"
0003893A                            		even
0003893A                            Nem_Pylon:	incbin	"artnem\SLZ Pylon.bin"
00038A1C                            		even
00038A1C                            Nem_SlzSwing:	incbin	"artnem\SLZ Swinging Platform.bin"
00038BFE                            		even
00038BFE                            Nem_SlzBlock:	incbin	"artnem\SLZ 32x32 Block.bin"
00038D0A                            		even
00038D0A                            Nem_SlzCannon:	incbin	"artnem\SLZ Cannon.bin"
00038DAE                            		even
00038DAE                            ; ---------------------------------------------------------------------------
00038DAE                            ; Compressed graphics - SYZ stuff
00038DAE                            ; ---------------------------------------------------------------------------
00038DAE                            Nem_Bumper:	incbin	"artnem\SYZ Bumper.bin"
00038F18                            		even
00038F18                            Nem_SyzSpike2:	incbin	"artnem\SYZ Small Spikeball.bin"
00038F7A                            		even
00038F7A                            Nem_LzSwitch:	incbin	"artnem\Switch.bin"
0003905C                            		even
0003905C                            Nem_SyzSpike1:	incbin	"artnem\SYZ Large Spikeball.bin"
000392EA                            		even
000392EA                            ; ---------------------------------------------------------------------------
000392EA                            ; Compressed graphics - SBZ stuff
000392EA                            ; ---------------------------------------------------------------------------
000392EA                            Nem_SbzWheel1:	incbin	"artnem\SBZ Running Disc.bin"
0003933E                            		even
0003933E                            Nem_SbzWheel2:	incbin	"artnem\SBZ Junction Wheel.bin"
000395DA                            		even
000395DA                            Nem_Cutter:	incbin	"artnem\SBZ Pizza Cutter.bin"
000397DE                            		even
000397DE                            Nem_Stomper:	incbin	"artnem\SBZ Stomper.bin"
0003997C                            		even
0003997C                            Nem_SpinPform:	incbin	"artnem\SBZ Spinning Platform.bin"
00039CAC                            		even
00039CAC                            Nem_TrapDoor:	incbin	"artnem\SBZ Trapdoor.bin"
00039E8A                            		even
00039E8A                            Nem_SbzFloor:	incbin	"artnem\SBZ Collapsing Floor.bin"
00039EE2                            		even
00039EE2                            Nem_Electric:	incbin	"artnem\SBZ Electrocuter.bin"
0003A062                            		even
0003A062                            Nem_SbzBlock:	incbin	"artnem\SBZ Vanishing Block.bin"
0003A160                            		even
0003A160                            Nem_FlamePipe:	incbin	"artnem\SBZ Flaming Pipe.bin"
0003A2EC                            		even
0003A2EC                            Nem_SbzDoor1:	incbin	"artnem\SBZ Small Vertical Door.bin"
0003A33C                            		even
0003A33C                            Nem_SlideFloor:	incbin	"artnem\SBZ Sliding Floor Trap.bin"
0003A394                            		even
0003A394                            Nem_SbzDoor2:	incbin	"artnem\SBZ Large Horizontal Door.bin"
0003A490                            		even
0003A490                            Nem_Girder:	incbin	"artnem\SBZ Crushing Girder.bin"
0003A5A6                            		even
0003A5A6                            ; ---------------------------------------------------------------------------
0003A5A6                            ; Compressed graphics - enemies
0003A5A6                            ; ---------------------------------------------------------------------------
0003A5A6                            Nem_BallHog:	incbin	"artnem\Enemy Ball Hog.bin"
0003A7C0                            		even
0003A7C0                            Nem_Crabmeat:	incbin	"artnem\Enemy Crabmeat.bin"
0003ACAE                            		even
0003ACAE                            Nem_Buzz:	incbin	"artnem\Enemy Buzz Bomber.bin"
0003B04A                            		even
0003B04A                            Nem_UnkExplode:	incbin	"artnem\Unused - Explosion.bin"
0003B232                            		even
0003B232                            Nem_Burrobot:	incbin	"artnem\Enemy Burrobot.bin"
0003B91C                            		even
0003B91C                            Nem_Imp:	incbin	"artnem\Enemy Imp.bin"
0003BE1C                            		even
0003BE1C                            Nem_Chopper:	incbin	"artnem\Enemy Chopper.bin"
0003C084                            		even
0003C084                            Nem_Jaws:	incbin	"artnem\Enemy Jaws.bin"
0003C30E                            		even
0003C30E                            Nem_Roller:	incbin	"artnem\Enemy Roller.bin"
0003C832                            		even
0003C832                            Nem_Motobug:	incbin	"artnem\Enemy Motobug.bin"
0003CAAC                            		even
0003CAAC                            Nem_Newtron:	incbin	"artnem\Enemy Newtron.bin"
0003D0CA                            		even
0003D0CA                            Nem_Yadrin:	incbin	"artnem\Enemy Yadrin.bin"
0003D4B2                            		even
0003D4B2                            Nem_Basaran:	incbin	"artnem\Enemy Basaran.bin"
0003D7AE                            		even
0003D7AE                            Nem_Splats:	incbin	"artnem\Enemy Splats.bin"
0003D9F6                            		even
0003D9F6                            Nem_Bomb:	incbin	"artnem\Enemy Bomb.bin"
0003DC8E                            		even
0003DC8E                            Nem_Orbinaut:	incbin	"artnem\Enemy Orbinaut.bin"
0003DE6C                            		even
0003DE6C                            Nem_Cater:	incbin	"artnem\Enemy Caterkiller.bin"
0003DFFA                            		even
0003DFFA                            ; ---------------------------------------------------------------------------
0003DFFA                            ; Compressed graphics - various
0003DFFA                            ; ---------------------------------------------------------------------------
0003DFFA                            Nem_TitleCard:	incbin	"artnem\Title Cards.bin"
0003E638                            		even
0003E638                            Nem_Hud:	incbin	"artnem\HUD.bin"	; HUD (rings, time, score)
0003E71E                            		even
0003E71E                            Nem_Lives:	incbin	"artnem\HUD - Life Counter Icon.bin"
0003E7A8                            		even
0003E7A8                            Nem_Ring:	incbin	"artnem\Rings.bin"
0003E898                            		even
0003E898                            Nem_Key:	incbin	"artnem\Key.bin"
0003E8DC                            		even
0003E8DC                            Nem_Monitors:	incbin	"artnem\Monitors.bin"
0003ED66                            		even
0003ED66                            Nem_Explode:	incbin	"artnem\Explosion.bin"
0003F3CC                            		even
0003F3CC                            Nem_Points:	incbin	"artnem\Points.bin"	; points from destroyed enemy or object
0003F47C                            		even
0003F47C                            Nem_GameOver:	incbin	"artnem\Game Over.bin"	; game over / time over
0003F604                            		even
0003F604                            Nem_HSpring:	incbin	"artnem\Spring Horizontal.bin"
0003F706                            		even
0003F706                            Nem_VSpring:	incbin	"artnem\Spring Vertical.bin"
0003F7E2                            		even
0003F7E2                            Nem_SignPost:	incbin	"artnem\Signpost.bin"	; end of level signpost
0003FC44                            		even
0003FC44                            Nem_Lamp:	incbin	"artnem\Lamppost.bin"
0003FCFE                            		even
0003FCFE                            Nem_BigFlash:	incbin	"artnem\Giant Ring Flash.bin"
0003FE72                            		even
0003FE72                            Nem_Bonus:	incbin	"artnem\Hidden Bonuses.bin" ; hidden bonuses at end of a level
00040174                            		even
00040174                            Nem_Welcome:	incbin	"artnem\GHZ Sign.bin"
000406F8                            Map_Welcome:	include	"_maps\GHZ Sign.asm"
000406F8                            ; ================================================================================
000406F8                            ; Sprite Mappings - generated by Flex 2 Fri Dec 25 2020 23:48:45 GMT-0500 (Eastern Standard Time)
000406F8                            ; ================================================================================
000406F8                            
000406F8                            DATA34QFW1I4ZJ9:
000406F8 0000                       	dc.w DATA34QFW1I4ZJ9_0-DATA34QFW1I4ZJ9
000406FA 09                         DATA34QFW1I4ZJ9_0: dc.b $9
000406FB E007 0000 E8               	dc.b $E0, $7, $0, $0, $E8
00040700 E80B 0008 D0               	dc.b $E8, $B, $0, $8, $D0
00040705 E80F 0014 F8               	dc.b $E8, $F, $0, $14, $F8
0004070A 0007 0024 E8               	dc.b $0, $7, $0, $24, $E8
0004070F 000B 002C 18               	dc.b $0, $B, $0, $2C, $18
00040714 080A 0038 D0               	dc.b $8, $A, $0, $38, $D0
00040719 080E 0041 F8               	dc.b $8, $E, $0, $41, $F8
0004071E D90B 404D 18               	dc.b $D9, $B, $40, $4D, $18
00040723 F908 4059 18               	dc.b $F9, $8, $40, $59, $18
00040728                            	even
00040728                            	even
00040728                            ; ---------------------------------------------------------------------------
00040728                            ; Compressed graphics - continue screen
00040728                            ; ---------------------------------------------------------------------------
00040728                            Nem_ContSonic:	incbin	"artnem\Continue Screen Sonic.bin"
000409D8                            		even
000409D8                            Nem_MiniSonic:	incbin	"artnem\Continue Screen Stuff.bin"
00040C12                            		even
00040C12                            ; ---------------------------------------------------------------------------
00040C12                            ; Compressed graphics - animals
00040C12                            ; ---------------------------------------------------------------------------
00040C12                            Nem_Rabbit:	incbin	"artnem\Animal Rabbit.bin"
00040D6A                            		even
00040D6A                            Nem_Chicken:	incbin	"artnem\Animal Chicken.bin"
00040EC6                            		even
00040EC6                            Nem_BlackBird:	incbin	"artnem\Animal Blackbird.bin"
00041042                            		even
00041042                            Nem_Seal:	incbin	"artnem\Animal Seal.bin"
0004115E                            		even
0004115E                            Nem_Pig:	incbin	"artnem\Animal Pig.bin"
00041294                            		even
00041294                            Nem_Flicky:	incbin	"artnem\Animal Flicky.bin"
000413CE                            		even
000413CE                            Nem_Squirrel:	incbin	"artnem\Animal Squirrel.bin"
0004152A                            		even
0004152A                            ; ---------------------------------------------------------------------------
0004152A                            ; Compressed graphics - primary patterns and block mappings
0004152A                            ; ---------------------------------------------------------------------------
0004152A                            Blk16_GHZ:	incbin	"map16\GHZ.bin"
00041DA6                            		even
00041DA6                            Nem_GHZ:	incbin	"artnem\8x8 - GHZ.nem"	; GHZ primary patterns
000441EA                            		even
000441EA                            Blk256_GHZ:	incbin	"map256\GHZ.bin"
00046476                            		even
00046476                            		incbin	"map16\LZ.bin"
0004674C                            		even
0004674C                            Nem_LZ:		incbin	"artnem\8x8 - LZ.bin"	; LZ primary patterns
000479A0                            		even
000479A0                            Blk256_LZ:	incbin	"map256\LZ.bin"
00049722                            		even
00049722                            Blk16_MZ:	incbin	"map16\MZ.bin"
00049E7E                            		even
00049E7E                            		incbin	"artnem\8x8 - MZ.bin"	; MZ primary patterns
0004C604                            		even
0004C604                            		incbin	"map256\MZ.bin"
0004DDFC                            		even
0004DDFC                            Blk16_IMZ:	incbin	"map16\IMZ.bin"
0004DFFE                            		even
0004DFFE                            		incbin	"artnem\8x8 - IMZ.bin"	; IMZ primary patterns
0004F26E                            		even
0004F26E                            		incbin	"map256\IMZ.bin"
0004F894                            		even
0004F894                            Blk16_SLZ:	incbin	"map16\SLZ.bin"
0004FEA8                            		even
0004FEA8                            		incbin	"artnem\8x8 - SLZ.bin"	; SLZ primary patterns
00053428                            		even
00053428                            Blk256_SLZ:	incbin	"map256\SLZ.bin"
00055B9C                            		even
00055B9C                            Blk16_SYZ:	incbin	"map16\SYZ.bin"
00056398                            		even
00056398                            		incbin	"artnem\8x8 - SYZ.bin"	; SYZ primary patterns
00059786                            		even
00059786                            Blk256_SYZ:	incbin	"map256\SYZ.bin"
0005BCD6                            		even
0005BCD6                            Blk16_SBZ:	incbin	"map16\SBZ.bin"
0005C622                            		even
0005C622                            		incbin	"artnem\8x8 - SBZ.bin"	; SBZ primary patterns
0005E4AA                            		even
0005E4AA                            		incbin	"map256\SBZ.bin"
000606AA                            		even
000606AA                            Blk16_CSZ:	incbin	"map16\CSZ.bin"
000607F4                            		even
000607F4                            		incbin	"artnem\8x8 - CSZ.bin"	; CSZ primary patterns
0006138A                            		even
0006138A                            		incbin	"map256\CSZ.bin"
00061514                            		even
00061514                            ; ---------------------------------------------------------------------------
00061514                            ; Compressed graphics - bosses and ending sequence
00061514                            ; ---------------------------------------------------------------------------
00061514                            Nem_Eggman:	incbin	"artnem\Boss - Main.bin"
00061D78                            		even
00061D78                            Nem_Weapons:	incbin	"artnem\Boss - Weapons.bin"
00062062                            		even
00062062                            Nem_Prison:	incbin	"artnem\Prison Capsule.bin"
000628E6                            		even
000628E6                            Nem_Sbz2Eggman:	incbin	"artnem\Boss - Eggman in SBZ2 & FZ.bin"
00063112                            		even
00063112                            Nem_FzBoss:	incbin	"artnem\Boss - Final Zone.bin"
0006387A                            		even
0006387A                            Nem_FzEggman:	incbin	"artnem\Boss - Eggman after FZ Fight.bin"
00063DFA                            		even
00063DFA                            Nem_Exhaust:	incbin	"artnem\Boss - Exhaust Flame.bin"
00063F1A                            		even
00063F1A                            Nem_EndEm:	incbin	"artnem\Ending - Emeralds.bin"
00064118                            		even
00064118                            Nem_EndSonic:	incbin	"artnem\Ending - Sonic.bin"
000652F6                            		even
000652F6                            Nem_TryAgain:	incbin	"artnem\Ending - Try Again.bin"
00065C3A                            		even
00065C3A                            		incbin	"artnem\Unused - Eggman Ending.bin"
00066010                            		even
00066010                            Kos_EndFlowers:	incbin	"artkos\Flowers at Ending.bin" ; ending sequence animated flowers
000665A0                            		even
000665A0                            Nem_EndFlower:	incbin	"artnem\Ending - Flowers.bin"
00066828                            		even
00066828                            Nem_CreditText:	incbin	"artnem\Ending - Credits.bin"
00066E26                            		even
00066E26                            Nem_EndStH:	incbin	"artnem\Ending - StH Logo.bin"
000670AE                            		even
000670AE                            
000670AE                            		dcb.b $104,$FF			; why?
000671B2                            ; ---------------------------------------------------------------------------
000671B2                            ; Collision data
000671B2                            ; ---------------------------------------------------------------------------
000671B2                            AngleMap:	incbin	"collide\Angle Map.bin"
000672B2                            		even
000672B2                            CollArray1:	incbin	"collide\Collision Array (Normal).bin"
000682B2                            		even
000682B2                            CollArray2:	incbin	"collide\Collision Array (Rotated).bin"
000692B2                            		even
000692B2                            Col_GHZ:	incbin	"collide\GHZ.bin"	; GHZ index
0006943C                            		even
0006943C                            Col_LZ:		incbin	"collide\LZ.bin"	; LZ index
00069504                            		even
00069504                            Col_MZ:		incbin	"collide\MZ.bin"	; MZ index
00069694                            		even
00069694                            Col_SLZ:	incbin	"collide\SLZ.bin"	; SLZ index
00069888                            		even
00069888                            Col_SYZ:	incbin	"collide\SYZ.bin"	; SYZ index
00069A7C                            		even
00069A7C                            Col_SBZ:	incbin	"collide\SBZ.bin"	; SBZ index
00069C34 00                         		even
00069C34                            Col_IMZ:	incbin	"collide\IMZ.bin"	; IMZ index
00069C9E 00                         		even
00069C9E                            Col_CSZ:	incbin	"collide\CSZ.bin"	; CSZ index
00069CE6 00                         		even
00069CE6                            ; ---------------------------------------------------------------------------
00069CE6                            ; Special Stage layouts
00069CE6                            ; ---------------------------------------------------------------------------
00069CE6                            SS_1:		incbin	"sslayout\1.bin"
00069EE2                            		even
00069EE2                            SS_2:		incbin	"sslayout\2.bin"
0006A2F4                            		even
0006A2F4                            SS_3:		incbin	"sslayout\3.bin"
0006A650                            		even
0006A650                            SS_4:		incbin	"sslayout\4.bin"
0006AB2A                            		even
0006AB2A                            SS_5:		incbin	"sslayout\5.bin"
0006AFFC                            		even
0006AFFC                            SS_6:		incbin	"sslayout\6.bin"
0006B30C                            		even
0006B30C                            ; ---------------------------------------------------------------------------
0006B30C                            ; Animated uncompressed graphics
0006B30C                            ; ---------------------------------------------------------------------------
0006B30C                            Art_GhzWater:	incbin	"artunc\GHZ Waterfall.bin"
0006B50C                            		even
0006B50C                            Art_GhzFlower1:	incbin	"artunc\GHZ Flower Large.bin"
0006B90C                            		even
0006B90C                            Art_GhzFlower2:	incbin	"artunc\GHZ Flower Small.bin"
0006BD8C                            		even
0006BD8C                            Art_MzLava1:	incbin	"artunc\MZ Lava Surface.bin"
0006C08C                            		even
0006C08C                            Art_MzLava2:	incbin	"artunc\MZ Lava.bin"
0006C68C                            		even
0006C68C                            Art_MzTorch:	incbin	"artunc\MZ Background Torch.bin"
0006C98C                            		even
0006C98C                            Art_SbzSmoke:	incbin	"artunc\SBZ Background Smoke.bin"
0006D40C                            		even
0006D40C                            
0006D40C                            ; ---------------------------------------------------------------------------
0006D40C                            ; Level	layout index
0006D40C                            ; ---------------------------------------------------------------------------
0006D40C                            Level_Index:
0006D40C                            		; GHZ
0006D40C 0000 0000 0000             		dc.w Level_GHZ1-Level_Index, Level_GHZbg-Level_Index, byte_68D70-Level_Index
0006D412 0000 0000 0000             		dc.w Level_GHZ2-Level_Index, Level_GHZbg-Level_Index, byte_68E3C-Level_Index
0006D418 0000 0000 0000             		dc.w Level_GHZ3-Level_Index, Level_GHZbg-Level_Index, byte_68F84-Level_Index
0006D41E 0000 0000 0000             		dc.w byte_68F88-Level_Index, byte_68F88-Level_Index, byte_68F88-Level_Index
0006D424                            		; LZ
0006D424 0000 0000 0000             		dc.w Level_LZ1-Level_Index, Level_LZbg-Level_Index, byte_69190-Level_Index
0006D42A 0000 0000 0000             		dc.w Level_LZ2-Level_Index, Level_LZbg-Level_Index, byte_6922E-Level_Index
0006D430 0000 0000 0000             		dc.w Level_LZ3-Level_Index, Level_LZbg-Level_Index, byte_6934C-Level_Index
0006D436 0000 0000 0000             		dc.w Level_SBZ3-Level_Index, Level_LZbg-Level_Index, byte_6940A-Level_Index
0006D43C                            		; MZ
0006D43C 0000 0000 0000             		dc.w Level_MZ1-Level_Index, Level_MZ1bg-Level_Index, Level_MZ1-Level_Index
0006D442 0000 0000 0000             		dc.w Level_MZ2-Level_Index, Level_MZ2bg-Level_Index, byte_6965C-Level_Index
0006D448 0000 0000 0000             		dc.w Level_MZ3-Level_Index, Level_MZ3bg-Level_Index, byte_697E6-Level_Index
0006D44E 0000 0000 0000             		dc.w byte_697EA-Level_Index, byte_697EA-Level_Index, byte_697EA-Level_Index
0006D454                            		; SLZ
0006D454 0000 0000 0000             		dc.w Level_SLZ1-Level_Index, Level_SLZbg-Level_Index, byte_69B84-Level_Index
0006D45A 0000 0000 0000             		dc.w Level_SLZ2-Level_Index, Level_SLZbg-Level_Index, byte_69B84-Level_Index
0006D460 0000 0000 0000             		dc.w Level_SLZ3-Level_Index, Level_SLZbg-Level_Index, byte_69B84-Level_Index
0006D466 0000 0000 0000             		dc.w byte_69B84-Level_Index, byte_69B84-Level_Index, byte_69B84-Level_Index
0006D46C                            		; SYZ
0006D46C 0000 0000 0000             		dc.w Level_SYZ1-Level_Index, Level_SYZbg-Level_Index, byte_69C7E-Level_Index
0006D472 0000 0000 0000             		dc.w Level_SYZ2-Level_Index, Level_SYZbg-Level_Index, byte_69D86-Level_Index
0006D478 0000 0000 0000             		dc.w Level_SYZ3-Level_Index, Level_SYZbg-Level_Index, byte_69EE4-Level_Index
0006D47E 0000 0000 0000             		dc.w byte_69EE8-Level_Index, byte_69EE8-Level_Index, byte_69EE8-Level_Index
0006D484                            		; SBZ
0006D484 0000 0000 0000             		dc.w Level_SBZ1-Level_Index, Level_SBZ1bg-Level_Index, Level_SBZ1bg-Level_Index
0006D48A 0000 0000 0000             		dc.w Level_SBZ2-Level_Index, Level_SBZ2bg-Level_Index, Level_SBZ2bg-Level_Index
0006D490 0000 0000 0000             		dc.w Level_SBZ2-Level_Index, Level_SBZ2bg-Level_Index, byte_6A2F8-Level_Index
0006D496 0000 0000 0000             		dc.w byte_6A2FC-Level_Index, byte_6A2FC-Level_Index, byte_6A2FC-Level_Index
0006D49C                            		; Ending
0006D49C 0000 0000 0000             		dc.w Level_End-Level_Index, Level_GHZbg-Level_Index, byte_6A320-Level_Index
0006D4A2 0000 0000 0000             		dc.w Level_End-Level_Index, Level_GHZbg-Level_Index, byte_6A320-Level_Index
0006D4A8 0000 0000 0000             		dc.w byte_6A320-Level_Index, byte_6A320-Level_Index, byte_6A320-Level_Index
0006D4AE 0000 0000 0000             		dc.w byte_6A320-Level_Index, byte_6A320-Level_Index, byte_6A320-Level_Index
0006D4B4                            		; IMZ
0006D4B4 0000 0000 0000             		dc.w Level_IMZ1-Level_Index, Level_IMZbg-Level_Index, byte_6A2FC-Level_Index
0006D4BA 0000 0000 0000             		dc.w Level_SBZ2-Level_Index, Level_SBZ2bg-Level_Index, Level_SBZ2bg-Level_Index
0006D4C0 0000 0000 0000             		dc.w Level_SBZ2-Level_Index, Level_SBZ2bg-Level_Index, byte_6A2F8-Level_Index
0006D4C6 0000 0000 0000             		dc.w byte_6A2FC-Level_Index, byte_6A2FC-Level_Index, byte_6A2FC-Level_Index
0006D4CC                            		; CSZ
0006D4CC 0000 0000 0000             		dc.w Level_CSZ1-Level_Index, Level_CSZbg-Level_Index, byte_6A2FC-Level_Index
0006D4D2 0000 0000 0000             		dc.w Level_SBZ2-Level_Index, Level_SBZ2bg-Level_Index, Level_SBZ2bg-Level_Index
0006D4D8 0000 0000 0000             		dc.w Level_SBZ2-Level_Index, Level_SBZ2bg-Level_Index, byte_6A2F8-Level_Index
0006D4DE 0000 0000 0000             		dc.w byte_6A2FC-Level_Index, byte_6A2FC-Level_Index, byte_6A2FC-Level_Index
0006D4E4                            		
0006D4E4                            
0006D4E4                            Level_GHZ1:	incbin	"levels\ghz1.bin"
0006D5D6                            		even
0006D5D6 0000 0000                  byte_68D70:	dc.b 0,	0, 0, 0
0006D5DA                            Level_GHZ2:	incbin	"levels\ghz2.bin"
0006D6A8                            		even
0006D6A8 0000 0000                  byte_68E3C:	dc.b 0,	0, 0, 0
0006D6AC                            Level_GHZ3:	incbin	"levels\ghz3.bin"
0006D7CE                            		even
0006D7CE                            Level_GHZbg:	incbin	"levels\ghzbg.bin"
0006D7F0                            		even
0006D7F0 0000 0000                  byte_68F84:	dc.b 0,	0, 0, 0
0006D7F4 0000 0000                  byte_68F88:	dc.b 0,	0, 0, 0
0006D7F8                            
0006D7F8                            Level_LZ1:	incbin	"levels\lz1.bin"
0006D8FA                            		even
0006D8FA                            Level_LZbg:	incbin	"levels\lzbg.bin"
0006D9FC                            		even
0006D9FC 0000 0000                  byte_69190:	dc.b 0,	0, 0, 0
0006DA00                            Level_LZ2:	incbin	"levels\lz2.bin"
0006DA9A                            		even
0006DA9A 0000 0000                  byte_6922E:	dc.b 0,	0, 0, 0
0006DA9E                            Level_LZ3:	incbin	"levels\lz3.bin"
0006DBB8                            		even
0006DBB8 0000 0000                  byte_6934C:	dc.b 0,	0, 0, 0
0006DBBC                            Level_SBZ3:	incbin	"levels\sbz3.bin"
0006DC76                            		even
0006DC76 0000 0000                  byte_6940A:	dc.b 0,	0, 0, 0
0006DC7A                            
0006DC7A                            Level_MZ1:	incbin	"levels\mz1.bin"
0006DD12                            		even
0006DD12                            Level_MZ1bg:	incbin	"levels\mz1bg.bin"
0006DDD4                            		even
0006DDD4                            Level_MZ2:	incbin	"levels\mz2.bin"
0006DEA8                            		even
0006DEA8                            Level_MZ2bg:	incbin	"levels\mz2bg.bin"
0006DF6A                            		even
0006DF6A 0000 0000                  byte_6965C:	dc.b 0,	0, 0, 0
0006DF6E                            Level_MZ3:	incbin	"levels\mz3.bin"
0006E050                            		even
0006E050                            Level_MZ3bg:	incbin	"levels\mz3bg.bin"
0006E132                            		even
0006E132 0000 0000                  byte_697E6:	dc.b 0,	0, 0, 0
0006E136 0000 0000                  byte_697EA:	dc.b 0,	0, 0, 0
0006E13A                            
0006E13A                            Level_IMZ1:	incbin	"levels\imz1.bin"
0006E188 00                         		even
0006E188                            Level_IMZbg:	incbin	"levels\imzbg.bin"
0006E1D6 00                         		even
0006E1D6                            Level_SLZ1:	incbin	"levels\slz1.bin"
0006E318                            		even
0006E318                            Level_SLZbg:	incbin	"levels\slzbg.bin"
0006E392                            		even
0006E392                            Level_SLZ2:	incbin	"levels\slz2.bin"
0006E4D4                            		even
0006E4D4                            Level_SLZ3:	incbin	"levels\slz3.bin"
0006E5D6                            		even
0006E5D6 0000 0000                  byte_69B84:	dc.b 0,	0, 0, 0
0006E5DA                            
0006E5DA                            Level_SYZ1:	incbin	"levels\syz1.bin"
0006E696 00                         		even
0006E696                            		incbin	"levels\syzbg.bin"
0006E6D0                            		even
0006E6D0 0000 0000                  byte_69C7E:	dc.b 0,	0, 0, 0
0006E6D4                            Level_SYZ2:	incbin	"levels\syz2.bin"
0006E7D8                            		even
0006E7D8 0000 0000                  byte_69D86:	dc.b 0,	0, 0, 0
0006E7DC                            Level_SYZ3:	incbin	"levels\syz3.bin"
0006E936 00                         		even
0006E936 0000 0000                  byte_69EE4:	dc.b 0,	0, 0, 0
0006E93A 0000 0000                  byte_69EE8:	dc.b 0,	0, 0, 0
0006E93E                            
0006E93E                            Level_SBZ1:	incbin	"levels\sbz1.bin"
0006EB40                            		even
0006EB40                            Level_SBZ1bg:	incbin	"levels\sbz1bg.bin"
0006EB4C                            		even
0006EB4C                            Level_SBZ2:	incbin	"levels\sbz2.bin"
0006ED4E                            		even
0006ED4E                            Level_SBZ2bg:	incbin	"levels\sbz2bg.bin"
0006EEB8                            		even
0006EEB8 0000 0000                  byte_6A2F8:	dc.b 0,	0, 0, 0
0006EEBC 0000 0000                  byte_6A2FC:	dc.b 0,	0, 0, 0
0006EEC0                            Level_End:	incbin	"levels\ending.bin"
0006EF0E 00                         		even
0006EF0E 0000 0000                  byte_6A320:	dc.b 0,	0, 0, 0
0006EF12                            Level_CSZ1:	incbin	"levels\csz1.bin"
0006EF60 00                         		even
0006EF60                            Level_CSZbg:	incbin	"levels\cszbg.bin"
0006EF66                            		even
0006EF66                            
0006EF66                            Art_BigRing:	incbin	"artunc\Giant Ring.bin"
0006FBA6                            		even
0006FBA6                            
0006FC00                            
0006FC00                            ; ---------------------------------------------------------------------------
0006FC00                            ; Sprite locations index
0006FC00                            ; ---------------------------------------------------------------------------
0006FC00                            ObjPos_Index:
0006FC00                            		; GHZ
0006FC00 0000 0000                  		dc.w ObjPos_GHZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC04 0000 0000                  		dc.w ObjPos_GHZ2-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC08 0000 0000                  		dc.w ObjPos_GHZ3-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC0C 0000 0000                  		dc.w ObjPos_GHZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC10                            		; LZ
0006FC10 0000 0000                  		dc.w ObjPos_LZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC14 0000 0000                  		dc.w ObjPos_LZ2-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC18 0000 0000                  		dc.w ObjPos_LZ3-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC1C 0000 0000                  		dc.w ObjPos_SBZ3-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC20                            		; MZ
0006FC20 0000 0000                  		dc.w ObjPos_MZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC24 0000 0000                  		dc.w ObjPos_MZ2-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC28 0000 0000                  		dc.w ObjPos_MZ3-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC2C 0000 0000                  		dc.w ObjPos_MZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC30                            		; SLZ
0006FC30 0000 0000                  		dc.w ObjPos_SLZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC34 0000 0000                  		dc.w ObjPos_SLZ2-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC38 0000 0000                  		dc.w ObjPos_SLZ3-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC3C 0000 0000                  		dc.w ObjPos_SLZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC40                            		; SYZ
0006FC40 0000 0000                  		dc.w ObjPos_SYZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC44 0000 0000                  		dc.w ObjPos_SYZ2-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC48 0000 0000                  		dc.w ObjPos_SYZ3-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC4C 0000 0000                  		dc.w ObjPos_SYZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC50                            		; SBZ
0006FC50 0000 0000                  		dc.w ObjPos_SBZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC54 0000 0000                  		dc.w ObjPos_SBZ2-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC58 0000 0000                  		dc.w ObjPos_FZ-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC5C 0000 0000                  		dc.w ObjPos_SBZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC60                            		; Ending
0006FC60 0000 0000                  		dc.w ObjPos_End-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC64 0000 0000                  		dc.w ObjPos_End-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC68 0000 0000                  		dc.w ObjPos_End-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC6C 0000 0000                  		dc.w ObjPos_End-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC70                            		
0006FC70 0000 0000                  		dc.w ObjPos_IMZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC74 0000 0000                  		dc.w ObjPos_SBZ2-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC78 0000 0000                  		dc.w ObjPos_FZ-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC7C 0000 0000                  		dc.w ObjPos_SBZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC80                            		
0006FC80 0000 0000                  		dc.w ObjPos_SBZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC84 0000 0000                  		dc.w ObjPos_SBZ2-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC88 0000 0000                  		dc.w ObjPos_FZ-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC8C 0000 0000                  		dc.w ObjPos_SBZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
0006FC90                            		; --- Put extra object data here. ---
0006FC90                            ObjPosLZPlatform_Index:
0006FC90 0000 0000                  		dc.w ObjPos_LZ1pf1-ObjPos_Index, ObjPos_LZ1pf2-ObjPos_Index
0006FC94 0000 0000                  		dc.w ObjPos_LZ2pf1-ObjPos_Index, ObjPos_LZ2pf2-ObjPos_Index
0006FC98 0000 0000                  		dc.w ObjPos_LZ3pf1-ObjPos_Index, ObjPos_LZ3pf2-ObjPos_Index
0006FC9C 0000 0000                  		dc.w ObjPos_LZ1pf1-ObjPos_Index, ObjPos_LZ1pf2-ObjPos_Index
0006FCA0                            ObjPosSBZPlatform_Index:
0006FCA0 0000 0000                  		dc.w ObjPos_SBZ1pf1-ObjPos_Index, ObjPos_SBZ1pf2-ObjPos_Index
0006FCA4 0000 0000                  		dc.w ObjPos_SBZ1pf3-ObjPos_Index, ObjPos_SBZ1pf4-ObjPos_Index
0006FCA8 0000 0000                  		dc.w ObjPos_SBZ1pf5-ObjPos_Index, ObjPos_SBZ1pf6-ObjPos_Index
0006FCAC 0000 0000                  		dc.w ObjPos_SBZ1pf1-ObjPos_Index, ObjPos_SBZ1pf2-ObjPos_Index
0006FCB0 FFFF 0000 0000             		dc.b $FF, $FF, 0, 0, 0,	0
0006FCB6                            ObjPos_GHZ1:	incbin	"objpos\ghz1.bin"
0006FF56                            		even
0006FF56                            ObjPos_GHZ2:	incbin	"objpos\ghz2.bin"
000702CE                            		even
000702CE                            		incbin	"objpos\ghz3.bin"
000708F2                            		even
000708F2                            ObjPos_LZ1:	
000708F2                            		incbin	"objpos\lz1 (JP1).bin"
00070CEE                            		even
00070CEE                            ObjPos_LZ2:	incbin	"objpos\lz2.bin"
00071030                            		even
00071030                            		incbin	"objpos\lz3.bin"
00071612                            		even
00071612                            ObjPos_SBZ3:	incbin	"objpos\sbz3.bin"
00071AAA                            		even
00071AAA                            ObjPos_LZ1pf1:	incbin	"objpos\lz1pf1.bin"
00071ADC                            		even
00071ADC                            ObjPos_LZ1pf2:	incbin	"objpos\lz1pf2.bin"
00071B0E                            		even
00071B0E                            ObjPos_LZ2pf1:	incbin	"objpos\lz2pf1.bin"
00071B40                            		even
00071B40                            ObjPos_LZ2pf2:	incbin	"objpos\lz2pf2.bin"
00071B72                            		even
00071B72                            ObjPos_LZ3pf1:	incbin	"objpos\lz3pf1.bin"
00071BBC                            		even
00071BBC                            ObjPos_LZ3pf2:	incbin	"objpos\lz3pf2.bin"
00071BFA                            		even
00071BFA                            		incbin	"objpos\mz1.bin"
00071F42                            		even
00071F42                            ObjPos_MZ2:	incbin	"objpos\mz2.bin"
00072536                            		even
00072536                            ObjPos_MZ3:	incbin	"objpos\mz3.bin"
00072B84                            		even
00072B84                            ObjPos_SLZ1:	incbin	"objpos\slz1.bin"
00072DE2                            		even
00072DE2                            ObjPos_SLZ2:	incbin	"objpos\slz2.bin"
00072EA2                            		even
00072EA2                            ObjPos_SLZ3:	incbin	"objpos\slz3.bin"
00072F32                            		even
00072F32                            ObjPos_SYZ1:	incbin	"objpos\syz1.bin"
00073232                            		even
00073232                            ObjPos_SYZ2:	incbin	"objpos\syz2.bin"
0007379C                            		even
0007379C                            		incbin	"objpos\syz3.bin"
00073DA2                            		even
00073DA2                            		incbin	"objpos\sbz1.bin"
00074102                            		even
00074102                            ObjPos_SBZ2:	incbin	"objpos\sbz2.bin"
00074264                            		even
00074264                            ObjPos_FZ:	incbin	"objpos\fz.bin"
0007427C                            		even
0007427C                            ObjPos_SBZ1pf1:	incbin	"objpos\sbz1pf1.bin"
000742AE                            		even
000742AE                            ObjPos_SBZ1pf2:	incbin	"objpos\sbz1pf2.bin"
000742E0                            		even
000742E0                            ObjPos_SBZ1pf3:	incbin	"objpos\sbz1pf3.bin"
00074312                            		even
00074312                            ObjPos_SBZ1pf4:	incbin	"objpos\sbz1pf4.bin"
00074344                            		even
00074344                            ObjPos_SBZ1pf5:	incbin	"objpos\sbz1pf5.bin"
00074376                            		even
00074376                            ObjPos_SBZ1pf6:	incbin	"objpos\sbz1pf6.bin"
000743AE                            		even
000743AE                            ObjPos_End:	incbin	"objpos\ending.bin"
0007450A                            		even
0007450A                            ObjPos_IMZ1:	incbin	"objpos\imz1.bin"
00074606                            		even
00074606 FFFF 0000 0000             ObjPos_Null:	dc.b $FF, $FF, 0, 0, 0,	0
0007460C                            
0007460C                            		dcb.b $62A,$FF
00074C36                            		;dcb.b ($10000-(*%$10000))-(EndOfRom-SoundDriver),$FF
00074C36                                include   "TitleLock.asm"
00074C36                            TitleLock:
00074C36                            
00074C36 4E75                       	rts
00074C36 4E75                       	rts
00074C38                            	include "ErrorHandler.asm"
00074C38                            
00074C38                            ; ===============================================================
00074C38                            ; ---------------------------------------------------------------
00074C38                            ; Error handling and debugging modules
00074C38                            ; 2016-2017, Vladikcomper
00074C38                            ; ---------------------------------------------------------------
00074C38                            ; Error handler functions and calls
00074C38                            ; ---------------------------------------------------------------
00074C38                            
00074C38                            ; ---------------------------------------------------------------
00074C38                            ; Error handler control flags
00074C38                            ; ---------------------------------------------------------------
00074C38                            
00074C38                            ; Screen appearence flags
00074C38 =00000001                  _eh_address_error	equ	$01		; use for address and bus errors only (tells error handler to display additional "Address" field)
00074C38 =00000002                  _eh_show_sr_usp		equ	$02		; displays SR and USP registers content on error screen
00074C38                            
00074C38                            ; Advanced execution flags
00074C38                            ; WARNING! For experts only, DO NOT USES them unless you know what you're doing
00074C38 =00000020                  _eh_return			equ	$20
00074C38 =00000040                  _eh_enter_console	equ	$40
00074C38 =00000080                  _eh_align_offset	equ	$80
00074C38                            
00074C38                            ; ---------------------------------------------------------------
00074C38                            ; Errors vector table
00074C38                            ; ---------------------------------------------------------------
00074C38                            
00074C38                            ; Default screen configuration
00074C38 =00000000                  _eh_default			equ	0 ;_eh_show_sr_usp
00074C38                            
00074C38                            ; ---------------------------------------------------------------
00074C38                            
00074C38                            BusError:
00074C38 4EB9 0000 0000 4255 5320+  	__ErrorMessage "BUS ERROR", _eh_default|_eh_address_error
00074C4A                            
00074C4A                            AddressError:
00074C4A 4EB9 0000 0000 4144 4452+  	__ErrorMessage "ADDRESS ERROR", _eh_default|_eh_address_error
00074C60                            
00074C60                            IllegalInstr:
00074C60 4EB9 0000 0000 494C 4C45+  	__ErrorMessage "ILLEGAL INSTRUCTION", _eh_default
00074C7C                            
00074C7C                            ZeroDivide:
00074C7C 4EB9 0000 0000 5A45 524F+  	__ErrorMessage "ZERO DIVIDE", _eh_default
00074C90                            
00074C90                            ChkInstr:
00074C90 4EB9 0000 0000 4348 4B20+  	__ErrorMessage "CHK INSTRUCTION", _eh_default
00074CA8                            
00074CA8                            TrapvInstr:
00074CA8 4EB9 0000 0000 5452 4150+  	__ErrorMessage "TRAPV INSTRUCTION", _eh_default
00074CC2                            
00074CC2                            PrivilegeViol:
00074CC2 4EB9 0000 0000 5052 4956+  	__ErrorMessage "PRIVILEGE VIOLATION", _eh_default
00074CDE                            
00074CDE                            Trace:
00074CDE 4EB9 0000 0000 5452 4143+  	__ErrorMessage "TRACE", _eh_default
00074CEC                            
00074CEC                            Line1010Emu:
00074CEC 4EB9 0000 0000 4C49 4E45+  	__ErrorMessage "LINE 1010 EMULATOR", _eh_default
00074D06                            
00074D06                            Line1111Emu:
00074D06 4EB9 0000 0000 4C49 4E45+  	__ErrorMessage "LINE 1111 EMULATOR", _eh_default
00074D20                            
00074D20                            ErrorExcept:
00074D20 4EB9 0000 0000 4552 524F+  	__ErrorMessage "ERROR EXCEPTION", _eh_default
00074D38                            	
00074D38                            WrongComb:
00074D38                            ;	__ErrorMessage "%<pal2>You didn't enter the right code.                                            %<pal3>Please refer to the pinned message in the test DM for the right combination.                                      %<pal0>If you're not apart of the tester     group, %<pal1>good luck%<pal0>.", _eh_default
00074D38                            
00074D38                            
00074D38                            
00074D38                            ; ---------------------------------------------------------------
00074D38                            ; Import error handler global functions
00074D38                            ; ---------------------------------------------------------------
00074D38                            
00074D38                            ErrorHandler.__global__error_initconsole equ ErrorHandler+$146
00074D38                            ErrorHandler.__global__errorhandler_setupvdp equ ErrorHandler+$234
00074D38                            ErrorHandler.__global__console_loadpalette equ ErrorHandler+$A1C
00074D38                            ErrorHandler.__global__console_setposasxy_stack equ ErrorHandler+$A58
00074D38                            ErrorHandler.__global__console_setposasxy equ ErrorHandler+$A5E
00074D38                            ErrorHandler.__global__console_getposasxy equ ErrorHandler+$A8A
00074D38                            ErrorHandler.__global__console_startnewline equ ErrorHandler+$AAC
00074D38                            ErrorHandler.__global__console_setbasepattern equ ErrorHandler+$AD4
00074D38                            ErrorHandler.__global__console_setwidth equ ErrorHandler+$AE8
00074D38                            ErrorHandler.__global__console_writeline_withpattern equ ErrorHandler+$AFE
00074D38                            ErrorHandler.__global__console_writeline equ ErrorHandler+$B00
00074D38                            ErrorHandler.__global__console_write equ ErrorHandler+$B04
00074D38                            ErrorHandler.__global__console_writeline_formatted equ ErrorHandler+$BB0
00074D38                            ErrorHandler.__global__console_write_formatted equ ErrorHandler+$BB4
00074D38                            
00074D38                            
00074D38                            ; ---------------------------------------------------------------
00074D38                            ; Error handler external functions (compiled only when used)
00074D38                            ; ---------------------------------------------------------------
00074D38                            
00074D38                            
00074D38                            
00074D38                            
00074D38                            
00074D38                            ; ---------------------------------------------------------------
00074D38                            ; Include error handler binary module
00074D38                            ; ---------------------------------------------------------------
00074D38                            
00074D38                            ErrorHandler:
00074D38                            	incbin	ErrorHandler.bin
00076D38                            
00076D38                            ; ---------------------------------------------------------------
00076D38                            ; WARNING!
00076D38                            ;	DO NOT put any data from now on! DO NOT use ROM padding!
00076D38                            ;	Symbol data should be appended here after ROM is compiled
00076D38                            ;	by ConvSym utility, otherwise debugger modules won't be able
00076D38                            ;	to resolve symbol names.
00076D38                            ; ---------------------------------------------------------------
00076D38                            ; ---------------------------------------------------------------
00076D38                            SoundDriver:	include "s1.sounddriver.asm"
00076D38                            ; ---------------------------------------------------------------------------
00076D38                            ; Modified (early?) SMPS 68k Type 1b
00076D38                            ; ---------------------------------------------------------------------------
00076D38                            ; Go_SoundTypes:
00076D38 0000 0000                  Go_SoundPriorities:	dc.l SoundPriorities
00076D3C                            ; Go_SoundD0:
00076D3C 0000 0000                  Go_SpecSoundIndex:	dc.l SpecSoundIndex
00076D40 0000 0000                  Go_MusicIndex:		dc.l MusicIndex
00076D44 0000 0000                  Go_SoundIndex:		dc.l SoundIndex
00076D48                            ; off_719A0:
00076D48 0000 0000                  Go_SpeedUpIndex:	dc.l SpeedUpIndex
00076D4C 0000 0000                  Go_PSGIndex:		dc.l PSG_Index
00076D50                            ; ---------------------------------------------------------------------------
00076D50                            ; PSG instruments used in music
00076D50                            ; ---------------------------------------------------------------------------
00076D50                            PSG_Index:
00076D50 0000 0000 0000 0000 0000+  		dc.l PSG1, PSG2, PSG3
00076D5C 0000 0000 0000 0000 0000+  		dc.l PSG4, PSG5, PSG6
00076D68 0000 0000 0000 0000 0000+  		dc.l PSG7, PSG8, PSG9
00076D74                            PSG1:		incbin	"sound/psg/psg1.bin"
00076D8B                            PSG2:		incbin	"sound/psg/psg2.bin"
00076D92                            PSG3:		incbin	"sound/psg/psg3.bin"
00076DA3                            PSG4:		incbin	"sound/psg/psg4.bin"
00076DAE                            PSG6:		incbin	"sound/psg/psg6.bin"
00076DBD                            PSG5:		incbin	"sound/psg/psg5.bin"
00076DE7                            PSG7:		incbin	"sound/psg/psg7.bin"
00076E03                            PSG8:		incbin	"sound/psg/psg8.bin"
00076E2B                            PSG9:		incbin	"sound/psg/psg9.bin"
00076E3C                            ; ---------------------------------------------------------------------------
00076E3C                            ; New tempos for songs during speed shoes
00076E3C                            ; ---------------------------------------------------------------------------
00076E3C                            ; DANGER! several songs will use the first few bytes of MusicIndex as their main
00076E3C                            ; tempos while speed shoes are active. If you don't want that, you should add
00076E3C                            ; their "correct" sped-up main tempos to the list.
00076E3C                            ; byte_71A94:
00076E3C                            SpeedUpIndex:
00076E3C 12                         		dc.b $12		; GHZ
00076E3D 72                         		dc.b $72	; LZ
00076E3E 73                         		dc.b $73	; MZ
00076E3F 26                         		dc.b $26	; SLZ
00076E40 15                         		dc.b $15	; SYZ
00076E41 08                         		dc.b 8		; SBZ
00076E42 FF                         		dc.b $FF	; Invincibility
00076E43 05                         		dc.b 5		; Extra Life
00076E44                            		;dc.b ?		; Special Stage
00076E44                            		;dc.b ?		; Title Screen
00076E44                            		;dc.b ?		; Ending
00076E44                            		;dc.b ?		; Boss
00076E44                            		;dc.b ?		; FZ
00076E44                            		;dc.b ?		; Sonic Got Through
00076E44                            		;dc.b ?		; Game Over
00076E44                            		;dc.b ?		; Continue Screen
00076E44                            		;dc.b ?		; Credits
00076E44                            		;dc.b ?		; Drowning
00076E44                            		;dc.b ?		; Get Emerald
00076E44                            
00076E44                            ; ---------------------------------------------------------------------------
00076E44                            ; Music	Pointers
00076E44                            ; ---------------------------------------------------------------------------
00076E44                            MusicIndex:
00076E44 0000 0000                  ptr_mus81:	dc.l Music81
00076E48 0000 0000                  ptr_mus82:	dc.l Music82
00076E4C 0000 0000                  ptr_mus83:	dc.l Music83
00076E50 0000 0000                  ptr_mus84:	dc.l Music84
00076E54 0000 0000                  ptr_mus85:	dc.l Music85
00076E58 0000 0000                  ptr_mus86:	dc.l Music86
00076E5C 0000 0000                  ptr_mus87:	dc.l Music87
00076E60 0000 0000                  ptr_mus88:	dc.l Music88
00076E64 0000 0000                  ptr_mus89:	dc.l Music89
00076E68 0000 0000                  ptr_mus8A:	dc.l Music8A
00076E6C 0000 0000                  ptr_mus8B:	dc.l Music8B
00076E70 0000 0000                  ptr_mus8C:	dc.l Music8C
00076E74 0000 0000                  ptr_mus8D:	dc.l Music8D
00076E78 0000 0000                  ptr_mus8E:	dc.l Music8E
00076E7C 0000 0000                  ptr_mus8F:	dc.l Music8F
00076E80 0000 0000                  ptr_mus90:	dc.l Music90
00076E84 0000 0000                  ptr_mus91:	dc.l Music91
00076E88 0000 0000                  ptr_mus92:	dc.l Music92
00076E8C 0000 0000                  ptr_mus93:	dc.l Music93
00076E90 0000 0000                  ptr_mus94:	dc.l Music94
00076E94 0000 0000                  ptr_mus95:	dc.l Music95
00076E98 0000 0000                  ptr_mus96:	dc.l Music96
00076E9C                            ptr_musend
00076E9C                            ; ---------------------------------------------------------------------------
00076E9C                            ; Priority of sound. New music or SFX must have a priority higher than or equal
00076E9C                            ; to what is stored in v_sndprio or it won't play. If bit 7 of new priority is
00076E9C                            ; set ($80 and up), the new music or SFX will not set its priority -- meaning
00076E9C                            ; any music or SFX can override it (as long as it can override whatever was
00076E9C                            ; playing before). Usually, SFX will only override SFX, special SFX ($D0-$DF)
00076E9C                            ; will only override special SFX and music will only override music.
00076E9C                            ; ---------------------------------------------------------------------------
00076E9C                            ; SoundTypes:
00076E9C                            SoundPriorities:
00076E9C 9090 9090 9090 9090 9090+  		dc.b     $90,$90,$90,$90,$90,$90,$90,$90,$90,$90,$90,$90,$90,$90,$90	; $81
00076EAB 9090 9090 9090 9090 9090+  		dc.b $90,$90,$90,$90,$90,$90,$90,$90,$90,$90,$90,$90,$90,$90,$90,$90	; $90
00076EBB 8070 7070 7070 7070 7070+  		dc.b $80,$70,$70,$70,$70,$70,$70,$70,$70,$70,$68,$70,$70,$70,$60,$70	; $A0
00076ECB 7060 7060 9070 7070 7070+  		dc.b $70,$60,$70,$60,$90,$70,$70,$70,$70,$70,$70,$70,$70,$70,$70,$7F	; $B0
00076EDB 6070 7070 7070 7070 7070+  		dc.b $60,$70,$70,$70,$70,$70,$70,$70,$70,$70,$70,$70,$70,$70,$90,$70	; $C0
00076EEB 8080 8080 8080 8080 8080+  		dc.b $80,$80,$80,$80,$80,$80,$80,$80,$80,$80,$80,$80,$80,$80,$80,$80	; $D0
00076EFB 9090 9090 90               		dc.b $90,$90,$90,$90,$90                                            	; $E0
00076F00                            
00076F00                            ; ---------------------------------------------------------------------------
00076F00                            ; Subroutine to update music more than once per frame
00076F00                            ; (Called by horizontal & vert. interrupts)
00076F00                            ; ---------------------------------------------------------------------------
00076F00                            
00076F00                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00076F00                            
00076F00                            ; sub_71B4C:
00076F00                            UpdateMusic:
00076F00 33FC 0100 00A1 1100        		stopZ80
00076F08 4E71                       		nop	
00076F0A 4E71                       		nop	
00076F0C 4E71                       		nop	
00076F0E                            ; loc_71B5A:
00076F0E                            @updateloop:
00076F0E 0839 0000 00A1 1100        		btst	#0,(z80_bus_request).l		; Is the z80 busy?
00076F16 66F6                       		bne.s	@updateloop			; If so, wait
00076F18                            
00076F18 0839 0007 00A0 1FFD        		btst	#7,(z80_dac_status).l		; Is DAC accepting new samples?
00076F20 6700                       		beq.s	@driverinput			; Branch if yes
00076F22 33FC 0000 00A1 1100        		startZ80
00076F2A 4E71                       		nop	
00076F2C 4E71                       		nop	
00076F2E 4E71                       		nop	
00076F30 4E71                       		nop	
00076F32 4E71                       		nop	
00076F34 60CA                       		bra.s	UpdateMusic
00076F36                            ; ===========================================================================
00076F36                            ; loc_71B82:
00076F36                            @driverinput:
00076F36 4DF9 00FF F000             		lea	(v_snddriver_ram&$FFFFFF).l,a6
00076F3C 422E 000E                  		clr.b	f_voice_selector(a6)
00076F40 4A2E 0003                  		tst.b	f_pausemusic(a6)		; is music paused?
00076F44 6600 0000                  		bne.w	PauseMusic			; if yes, branch
00076F48 532E 0001                  		subq.b	#1,v_main_tempo_timeout(a6)	; Has main tempo timer expired?
00076F4C 6600                       		bne.s	@skipdelay
00076F4E 4EBA 0000                  		jsr	TempoWait(pc)
00076F52                            ; loc_71B9E:
00076F52                            @skipdelay:
00076F52 102E 0004                  		move.b	v_fadeout_counter(a6),d0
00076F56 6700                       		beq.s	@skipfadeout
00076F58 4EBA 0000                  		jsr	DoFadeOut(pc)
00076F5C                            ; loc_71BA8:
00076F5C                            @skipfadeout:
00076F5C 4A2E 0024                  		tst.b	f_fadein_flag(a6)
00076F60 6700                       		beq.s	@skipfadein
00076F62 4EBA 0000                  		jsr	DoFadeIn(pc)
00076F66                            ; loc_71BB2:
00076F66                            @skipfadein:
00076F66                            		; DANGER! The following line only checks v_soundqueue0 and v_soundqueue1, breaking v_soundqueue2.
00076F66 4A6E 000A                  		tst.w	v_soundqueue0(a6)	; is a music or sound queued for played?
00076F6A 6700                       		beq.s	@nosndinput		; if not, branch
00076F6C 4EBA 0000                  		jsr	CycleSoundQueue(pc)
00076F70                            ; loc_71BBC:
00076F70                            @nosndinput:
00076F70 0C2E 0080 0009             		cmpi.b	#$80,v_sound_id(a6)	; is song queue set for silence (empty)?
00076F76 6700                       		beq.s	@nonewsound		; If yes, branch
00076F78 4EBA 0000                  		jsr	PlaySoundID(pc)
00076F7C                            ; loc_71BC8:
00076F7C                            @nonewsound:
00076F7C 4BEE 0040                  		lea	v_music_dac_track(a6),a5
00076F80 4A15                       		tst.b	(a5)			; Is DAC track playing? (TrackPlaybackControl)
00076F82 6A00                       		bpl.s	@dacdone		; Branch if not
00076F84 4EBA 0000                  		jsr	DACUpdateTrack(pc)
00076F88                            ; loc_71BD4:
00076F88                            @dacdone:
00076F88 422E 0008                  		clr.b	f_updating_dac(a6)
00076F8C 7E05                       		moveq	#((v_music_fm_tracks_end-v_music_fm_tracks)/TrackSz)-1,d7	; 6 FM tracks
00076F8E                            ; loc_71BDA:
00076F8E                            @bgmfmloop:
00076F8E DAFC 0030                  		adda.w	#TrackSz,a5
00076F92 4A15                       		tst.b	(a5)			; Is track playing? (TrackPlaybackControl)
00076F94 6A00                       		bpl.s	@bgmfmnext		; Branch if not
00076F96 4EBA 0000                  		jsr	FMUpdateTrack(pc)
00076F9A                            ; loc_71BE6:
00076F9A                            @bgmfmnext:
00076F9A 51CF FFF2                  		dbf	d7,@bgmfmloop
00076F9E                            
00076F9E 7E02                       		moveq	#((v_music_psg_tracks_end-v_music_psg_tracks)/TrackSz)-1,d7 ; 3 PSG tracks
00076FA0                            ; loc_71BEC:
00076FA0                            @bgmpsgloop:
00076FA0 DAFC 0030                  		adda.w	#TrackSz,a5
00076FA4 4A15                       		tst.b	(a5)			; Is track playing? (TrackPlaybackControl)
00076FA6 6A00                       		bpl.s	@bgmpsgnext		; Branch if not
00076FA8 4EBA 0000                  		jsr	PSGUpdateTrack(pc)
00076FAC                            ; loc_71BF8:
00076FAC                            @bgmpsgnext:
00076FAC 51CF FFF2                  		dbf	d7,@bgmpsgloop
00076FB0                            
00076FB0 1D7C 0080 000E             		move.b	#$80,f_voice_selector(a6)			; Now at SFX tracks
00076FB6 7E02                       		moveq	#((v_sfx_fm_tracks_end-v_sfx_fm_tracks)/TrackSz)-1,d7	; 3 FM tracks (SFX)
00076FB8                            ; loc_71C04:
00076FB8                            @sfxfmloop:
00076FB8 DAFC 0030                  		adda.w	#TrackSz,a5
00076FBC 4A15                       		tst.b	(a5)			; Is track playing? (TrackPlaybackControl)
00076FBE 6A00                       		bpl.s	@sfxfmnext		; Branch if not
00076FC0 4EBA 0000                  		jsr	FMUpdateTrack(pc)
00076FC4                            ; loc_71C10:
00076FC4                            @sfxfmnext:
00076FC4 51CF FFF2                  		dbf	d7,@sfxfmloop
00076FC8                            
00076FC8 7E02                       		moveq	#((v_sfx_psg_tracks_end-v_sfx_psg_tracks)/TrackSz)-1,d7 ; 3 PSG tracks (SFX)
00076FCA                            ; loc_71C16:
00076FCA                            @sfxpsgloop:
00076FCA DAFC 0030                  		adda.w	#TrackSz,a5
00076FCE 4A15                       		tst.b	(a5)			; Is track playing? (TrackPlaybackControl)
00076FD0 6A00                       		bpl.s	@sfxpsgnext		; Branch of not
00076FD2 4EBA 0000                  		jsr	PSGUpdateTrack(pc)
00076FD6                            ; loc_71C22:
00076FD6                            @sfxpsgnext:
00076FD6 51CF FFF2                  		dbf	d7,@sfxpsgloop
00076FDA                            		
00076FDA 1D7C 0040 000E             		move.b	#$40,f_voice_selector(a6) ; Now at special SFX tracks
00076FE0 DAFC 0030                  		adda.w	#TrackSz,a5
00076FE4 4A15                       		tst.b	(a5)			; Is track playing? (TrackPlaybackControl)
00076FE6 6A00                       		bpl.s	@specfmdone		; Branch if not
00076FE8 4EBA 0000                  		jsr	FMUpdateTrack(pc)
00076FEC                            ; loc_71C38:
00076FEC                            @specfmdone:
00076FEC DAFC 0030                  		adda.w	#TrackSz,a5
00076FF0 4A15                       		tst.b	(a5)			; Is track playing (TrackPlaybackControl)
00076FF2 6A00                       		bpl.s	DoStartZ80		; Branch if not
00076FF4 4EBA 0000                  		jsr	PSGUpdateTrack(pc)
00076FF8                            ; loc_71C44:
00076FF8                            DoStartZ80:
00076FF8 33FC 0000 00A1 1100        		startZ80
00077000 4E75                       		rts	
00077002                            ; End of function UpdateMusic
00077002                            
00077002                            
00077002                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00077002                            
00077002                            ; sub_71C4E: UpdateDAC:
00077002                            DACUpdateTrack:
00077002 532D 000E                  		subq.b	#1,TrackDurationTimeout(a5)	; Has DAC sample timeout expired?
00077006 6600                       		bne.s	@locret				; Return if not
00077008 1D7C 0080 0008             		move.b	#$80,f_updating_dac(a6)		; Set flag to indicate this is the DAC
0007700E                            ;DACDoNext:
0007700E 286D 0004                  		movea.l	TrackDataPointer(a5),a4	; DAC track data pointer
00077012                            ; loc_71C5E:
00077012                            @sampleloop:
00077012 7A00                       		moveq	#0,d5
00077014 1A1C                       		move.b	(a4)+,d5	; Get next SMPS unit
00077016 0C05 00E0                  		cmpi.b	#$E0,d5		; Is it a coord. flag?
0007701A 6500                       		blo.s	@notcoord	; Branch if not
0007701C 4EBA 0000                  		jsr	CoordFlag(pc)
00077020 60F0                       		bra.s	@sampleloop
00077022                            ; ===========================================================================
00077022                            ; loc_71C6E:
00077022                            @notcoord:
00077022 4A05                       		tst.b	d5			; Is it a sample?
00077024 6A00                       		bpl.s	@gotduration		; Branch if not (duration)
00077026 1B45 0010                  		move.b	d5,TrackSavedDAC(a5)	; Store new sample
0007702A 1A1C                       		move.b	(a4)+,d5		; Get another byte
0007702C 6A00                       		bpl.s	@gotduration		; Branch if it is a duration
0007702E 534C                       		subq.w	#1,a4			; Put byte back
00077030 1B6D 000F 000E             		move.b	TrackSavedDuration(a5),TrackDurationTimeout(a5) ; Use last duration
00077036 6000                       		bra.s	@gotsampleduration
00077038                            ; ===========================================================================
00077038                            ; loc_71C84:
00077038                            @gotduration:
00077038 4EBA 0000                  		jsr	SetDuration(pc)
0007703C                            ; loc_71C88:
0007703C                            @gotsampleduration:
0007703C 2B4C 0004                  		move.l	a4,TrackDataPointer(a5) ; Save pointer
00077040 0815 0002                  		btst	#2,(a5)			; Is track being overridden? (TrackPlaybackControl)
00077044 6600                       		bne.s	@locret			; Return if yes
00077046 7000                       		moveq	#0,d0
00077048 102D 0010                  		move.b	TrackSavedDAC(a5),d0	; Get sample
0007704C 0C00 0080                  		cmpi.b	#$80,d0			; Is it a rest?
00077050 6700                       		beq.s	@locret			; Return if yes
00077052 0800 0003                  		btst	#3,d0			; Is bit 3 set (samples between $88-$8F)?
00077056 6600                       		bne.s	@timpani		; Various timpani
00077058 13C0 00A0 1FFF             		move.b	d0,(z80_dac_sample).l
0007705E                            ; locret_71CAA:
0007705E                            @locret:
0007705E 4E75                       		rts	
00077060                            ; ===========================================================================
00077060                            ; loc_71CAC:
00077060                            @timpani:
00077060 0400 0088                  		subi.b	#$88,d0		; Convert into an index
00077064 103B 0000                  		move.b	DAC_sample_rate(pc,d0.w),d0
00077068                            		; Warning: this affects the raw pitch of sample $83, meaning it will
00077068                            		; use this value from then on.
00077068 13C0 00A0 00EA             		move.b	d0,(z80_dac3_pitch).l
0007706E 13FC 0083 00A0 1FFF        		move.b	#$83,(z80_dac_sample).l	; Use timpani
00077076 4E75                       		rts	
00077078                            ; End of function DACUpdateTrack
00077078                            
00077078                            ; ===========================================================================
00077078                            ; Note: this only defines rates for samples $88-$8D, meaning $8E-$8F are invalid.
00077078                            ; Also, $8C-$8D are so slow you may want to skip them.
00077078                            ; byte_71CC4:
00077078 1215 1C1D FFFF             DAC_sample_rate: dc.b $12, $15, $1C, $1D, $FF, $FF
0007707E                            
0007707E                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0007707E                            
0007707E                            ; sub_71CCA:
0007707E                            FMUpdateTrack:
0007707E 532D 000E                  		subq.b	#1,TrackDurationTimeout(a5) ; Update duration timeout
00077082 6600                       		bne.s	@notegoing		; Branch if it hasn't expired
00077084 0895 0004                  		bclr	#4,(a5)			; Clear 'do not attack next note' bit (TrackPlaybackControl)
00077088 4EBA 0000                  		jsr	FMDoNext(pc)
0007708C 4EBA 0000                  		jsr	FMPrepareNote(pc)
00077090 6000 0000                  		bra.w	FMNoteOn
00077094                            ; ===========================================================================
00077094                            ; loc_71CE0:
00077094                            @notegoing:
00077094 4EBA 0000                  		jsr	NoteTimeoutUpdate(pc)
00077098 4EBA 0000                  		jsr	DoModulation(pc)
0007709C 6000 0000                  		bra.w	FMUpdateFreq
000770A0                            ; End of function FMUpdateTrack
000770A0                            
000770A0                            
000770A0                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000770A0                            
000770A0                            ; sub_71CEC:
000770A0                            FMDoNext:
000770A0 286D 0004                  		movea.l	TrackDataPointer(a5),a4 ; Track data pointer
000770A4 0895 0001                  		bclr	#1,(a5)			; Clear 'track at rest' bit (TrackPlaybackControl)
000770A8                            ; loc_71CF4:
000770A8                            @noteloop:
000770A8 7A00                       		moveq	#0,d5
000770AA 1A1C                       		move.b	(a4)+,d5	; Get byte from track
000770AC 0C05 00E0                  		cmpi.b	#$E0,d5		; Is this a coord. flag?
000770B0 6500                       		blo.s	@gotnote	; Branch if not
000770B2 4EBA 0000                  		jsr	CoordFlag(pc)
000770B6 60F0                       		bra.s	@noteloop
000770B8                            ; ===========================================================================
000770B8                            ; loc_71D04:
000770B8                            @gotnote:
000770B8 4EBA 0000                  		jsr	FMNoteOff(pc)
000770BC 4A05                       		tst.b	d5		; Is this a note?
000770BE 6A00                       		bpl.s	@gotduration	; Branch if not
000770C0 4EBA 0000                  		jsr	FMSetFreq(pc)
000770C4 1A1C                       		move.b	(a4)+,d5	; Get another byte
000770C6 6A00                       		bpl.s	@gotduration	; Branch if it is a duration
000770C8 534C                       		subq.w	#1,a4		; Otherwise, put it back
000770CA 6000 0000                  		bra.w	FinishTrackUpdate
000770CE                            ; ===========================================================================
000770CE                            ; loc_71D1A:
000770CE                            @gotduration:
000770CE 4EBA 0000                  		jsr	SetDuration(pc)
000770D2 6000 0000                  		bra.w	FinishTrackUpdate
000770D6                            ; End of function FMDoNext
000770D6                            
000770D6                            
000770D6                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000770D6                            
000770D6                            ; sub_71D22:
000770D6                            FMSetFreq:
000770D6 0405 0080                  		subi.b	#$80,d5			; Make it a zero-based index
000770DA 6700                       		beq.s	TrackSetRest
000770DC DA2D 0008                  		add.b	TrackTranspose(a5),d5	; Add track transposition
000770E0 0245 007F                  		andi.w	#$7F,d5			; Clear high byte and sign bit
000770E4 E34D                       		lsl.w	#1,d5
000770E6 41FA 0000                  		lea	FMFrequencies(pc),a0
000770EA 3C30 5000                  		move.w	(a0,d5.w),d6
000770EE 3B46 0010                  		move.w	d6,TrackFreq(a5)	; Store new frequency
000770F2 4E75                       		rts	
000770F4                            ; End of function FMSetFreq
000770F4                            
000770F4                            
000770F4                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000770F4                            
000770F4                            ; sub_71D40:
000770F4                            SetDuration:
000770F4 1005                       		move.b	d5,d0
000770F6 122D 0002                  		move.b	TrackTempoDivider(a5),d1	; Get dividing timing
000770FA                            ; loc_71D46:
000770FA                            @multloop:
000770FA 5301                       		subq.b	#1,d1
000770FC 6700                       		beq.s	@donemult
000770FE D005                       		add.b	d5,d0
00077100 60F8                       		bra.s	@multloop
00077102                            ; ===========================================================================
00077102                            ; loc_71D4E:
00077102                            @donemult:
00077102 1B40 000F                  		move.b	d0,TrackSavedDuration(a5)	; Save duration
00077106 1B40 000E                  		move.b	d0,TrackDurationTimeout(a5)	; Save duration timeout
0007710A 4E75                       		rts	
0007710C                            ; End of function SetDuration
0007710C                            
0007710C                            ; ===========================================================================
0007710C                            ; loc_71D58:
0007710C                            TrackSetRest:
0007710C 08D5 0001                  		bset	#1,(a5)		; Set 'track at rest' bit (TrackPlaybackControl)
00077110 426D 0010                  		clr.w	TrackFreq(a5)	; Clear frequency
00077114                            
00077114                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00077114                            
00077114                            ; sub_71D60:
00077114                            FinishTrackUpdate:
00077114 2B4C 0004                  		move.l	a4,TrackDataPointer(a5)	; Store new track position
00077118 1B6D 000F 000E             		move.b	TrackSavedDuration(a5),TrackDurationTimeout(a5)	; Reset note timeout
0007711E 0815 0004                  		btst	#4,(a5)				; Is track set to not attack note? (TrackPlaybackControl)
00077122 6600                       		bne.s	@locret				; If so, branch
00077124 1B6D 0013 0012             		move.b	TrackNoteTimeoutMaster(a5),TrackNoteTimeout(a5)	; Reset note fill timeout
0007712A 422D 000C                  		clr.b	TrackVolEnvIndex(a5)		; Reset PSG volume envelope index (even on FM tracks...)
0007712E 0815 0003                  		btst	#3,(a5)				; Is modulation on? (TrackPlaybackControl)
00077132 6700                       		beq.s	@locret				; If not, return (TrackPlaybackControl)
00077134 206D 0014                  		movea.l	TrackModulationPtr(a5),a0	; Modulation data pointer
00077138 1B58 0018                  		move.b	(a0)+,TrackModulationWait(a5)	; Reset wait
0007713C 1B58 0019                  		move.b	(a0)+,TrackModulationSpeed(a5)	; Reset speed
00077140 1B58 001A                  		move.b	(a0)+,TrackModulationDelta(a5)	; Reset delta
00077144 1018                       		move.b	(a0)+,d0			; Get steps
00077146 E208                       		lsr.b	#1,d0				; Halve them
00077148 1B40 001B                  		move.b	d0,TrackModulationSteps(a5)	; Then store
0007714C 426D 001C                  		clr.w	TrackModulationVal(a5)		; Reset frequency change
00077150                            ; locret_71D9C:
00077150                            @locret:
00077150 4E75                       		rts	
00077152                            ; End of function FinishTrackUpdate
00077152                            
00077152                            
00077152                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00077152                            
00077152                            ; sub_71D9E: NoteFillUpdate
00077152                            NoteTimeoutUpdate:
00077152 4A2D 0012                  		tst.b	TrackNoteTimeout(a5)	; Is note fill on?
00077156 6700                       		beq.s	@locret
00077158 532D 0012                  		subq.b	#1,TrackNoteTimeout(a5)	; Update note fill timeout
0007715C 6600                       		bne.s	@locret				; Return if it hasn't expired
0007715E 08D5 0001                  		bset	#1,(a5)				; Put track at rest (TrackPlaybackControl)
00077162 4A2D 0001                  		tst.b	TrackVoiceControl(a5)		; Is this a psg track?
00077166 6B00 0000                  		bmi.w	@psgnoteoff			; If yes, branch
0007716A 4EBA 0000                  		jsr	FMNoteOff(pc)
0007716E 584F                       		addq.w	#4,sp				; Do not return to caller
00077170 4E75                       		rts	
00077172                            ; ===========================================================================
00077172                            ; loc_71DBE:
00077172                            @psgnoteoff:
00077172 4EBA 0000                  		jsr	PSGNoteOff(pc)
00077176 584F                       		addq.w	#4,sp		; Do not return to caller
00077178                            ; locret_71DC4:
00077178                            @locret:
00077178 4E75                       		rts	
0007717A                            ; End of function NoteTimeoutUpdate
0007717A                            
0007717A                            
0007717A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0007717A                            
0007717A                            ; sub_71DC6:
0007717A                            DoModulation:
0007717A 584F                       		addq.w	#4,sp				; Do not return to caller (but see below)
0007717C 0815 0003                  		btst	#3,(a5)				; Is modulation active? (TrackPlaybackControl)
00077180 6700                       		beq.s	@locret				; Return if not
00077182 4A2D 0018                  		tst.b	TrackModulationWait(a5)	; Has modulation wait expired?
00077186 6700                       		beq.s	@waitdone			; If yes, branch
00077188 532D 0018                  		subq.b	#1,TrackModulationWait(a5)	; Update wait timeout
0007718C 4E75                       		rts	
0007718E                            ; ===========================================================================
0007718E                            ; loc_71DDA:
0007718E                            @waitdone:
0007718E 532D 0019                  		subq.b	#1,TrackModulationSpeed(a5)	; Update speed
00077192 6700                       		beq.s	@updatemodulation		; If it expired, want to update modulation
00077194 4E75                       		rts	
00077196                            ; ===========================================================================
00077196                            ; loc_71DE2:
00077196                            @updatemodulation:
00077196 206D 0014                  		movea.l	TrackModulationPtr(a5),a0	; Get modulation data
0007719A 1B68 0001 0019             		move.b	1(a0),TrackModulationSpeed(a5)	; Restore modulation speed
000771A0 4A2D 001B                  		tst.b	TrackModulationSteps(a5)	; Check number of steps
000771A4 6600                       		bne.s	@calcfreq			; If nonzero, branch
000771A6 1B68 0003 001B             		move.b	3(a0),TrackModulationSteps(a5)	; Restore from modulation data
000771AC 442D 001A                  		neg.b	TrackModulationDelta(a5)	; Negate modulation delta
000771B0 4E75                       		rts	
000771B2                            ; ===========================================================================
000771B2                            ; loc_71DFE:
000771B2                            @calcfreq:
000771B2 532D 001B                  		subq.b	#1,TrackModulationSteps(a5)	; Update modulation steps
000771B6 1C2D 001A                  		move.b	TrackModulationDelta(a5),d6	; Get modulation delta
000771BA 4886                       		ext.w	d6
000771BC DC6D 001C                  		add.w	TrackModulationVal(a5),d6	; Add cumulative modulation change
000771C0 3B46 001C                  		move.w	d6,TrackModulationVal(a5)	; Store it
000771C4 DC6D 0010                  		add.w	TrackFreq(a5),d6		; Add note frequency to it
000771C8 594F                       		subq.w	#4,sp		; In this case, we want to return to caller after all
000771CA                            ; locret_71E16:
000771CA                            @locret:
000771CA 4E75                       		rts	
000771CC                            ; End of function DoModulation
000771CC                            
000771CC                            
000771CC                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000771CC                            
000771CC                            ; sub_71E18:
000771CC                            FMPrepareNote:
000771CC 0815 0001                  		btst	#1,(a5)			; Is track resting? (TrackPlaybackControl)
000771D0 6600                       		bne.s	locret_71E48		; Return if so
000771D2 3C2D 0010                  		move.w	TrackFreq(a5),d6	; Get current note frequency
000771D6 6700                       		beq.s	FMSetRest		; Branch if zero
000771D8                            ; loc_71E24:
000771D8                            FMUpdateFreq:
000771D8 102D 001E                  		move.b	TrackDetune(a5),d0 	; Get detune value
000771DC 4880                       		ext.w	d0
000771DE DC40                       		add.w	d0,d6			; Add note frequency
000771E0 0815 0002                  		btst	#2,(a5)			; Is track being overridden? (TrackPlaybackControl)
000771E4 6600                       		bne.s	locret_71E48		; Return if so
000771E6 3206                       		move.w	d6,d1
000771E8 E049                       		lsr.w	#8,d1
000771EA 103C 00A4                  		move.b	#$A4,d0			; Register for upper 6 bits of frequency
000771EE 4EBA 0000                  		jsr	WriteFMIorII(pc)
000771F2 1206                       		move.b	d6,d1
000771F4 103C 00A0                  		move.b	#$A0,d0			; Register for lower 8 bits of frequency
000771F8 4EBA 0000                  		jsr	WriteFMIorII(pc)	; (It would be better if this were a jmp)
000771FC                            ; locret_71E48:
000771FC                            locret_71E48:
000771FC 4E75                       		rts	
000771FE                            ; ===========================================================================
000771FE                            ; loc_71E4A:
000771FE                            FMSetRest:
000771FE 08D5 0001                  		bset	#1,(a5)		; Set 'track at rest' bit (TrackPlaybackControl)
00077202 4E75                       		rts	
00077204                            ; End of function FMPrepareNote
00077204                            
00077204                            ; ===========================================================================
00077204                            ; loc_71E50:
00077204                            PauseMusic:
00077204 6B00                       		bmi.s	@unpausemusic		; Branch if music is being unpaused
00077206 0C2E 0002 0003             		cmpi.b	#2,f_pausemusic(a6)
0007720C 6700 0000                  		beq.w	@unpausedallfm
00077210 1D7C 0002 0003             		move.b	#2,f_pausemusic(a6)
00077216 7602                       		moveq	#2,d3
00077218 103C 00B4                  		move.b	#$B4,d0		; Command to set AMS/FMS/panning
0007721C 7200                       		moveq	#0,d1		; No panning, AMS or FMS
0007721E                            ; loc_71E6A:
0007721E                            @killpanloop:
0007721E 4EBA 0000                  		jsr	WriteFMI(pc)
00077222 4EBA 0000                  		jsr	WriteFMII(pc)
00077226 5200                       		addq.b	#1,d0
00077228 51CB FFF4                  		dbf	d3,@killpanloop
0007722C                            
0007722C 7602                       		moveq	#2,d3
0007722E 7028                       		moveq	#$28,d0		; Key on/off register
00077230                            ; loc_71E7C:
00077230                            @noteoffloop:
00077230 1203                       		move.b	d3,d1		; FM1, FM2, FM3
00077232 4EBA 0000                  		jsr	WriteFMI(pc)
00077236 5801                       		addq.b	#4,d1		; FM4, FM5, FM6
00077238 4EBA 0000                  		jsr	WriteFMI(pc)
0007723C 51CB FFF2                  		dbf	d3,@noteoffloop
00077240                            
00077240 4EBA 0000                  		jsr	PSGSilenceAll(pc)
00077244 6000 FDB2                  		bra.w	DoStartZ80
00077248                            ; ===========================================================================
00077248                            ; loc_71E94:
00077248                            @unpausemusic:
00077248 422E 0003                  		clr.b	f_pausemusic(a6)
0007724C 7630                       		moveq	#TrackSz,d3
0007724E 4BEE 0040                  		lea	v_music_fmdac_tracks(a6),a5
00077252 7806                       		moveq	#((v_music_fmdac_tracks_end-v_music_fmdac_tracks)/TrackSz)-1,d4	; 6 FM + 1 DAC tracks
00077254                            ; loc_71EA0:
00077254                            @bgmfmloop:
00077254 0815 0007                  		btst	#7,(a5)			; Is track playing? (TrackPlaybackControl)
00077258 6700                       		beq.s	@bgmfmnext		; Branch if not
0007725A 0815 0002                  		btst	#2,(a5)			; Is track being overridden? (TrackPlaybackControl)
0007725E 6600                       		bne.s	@bgmfmnext		; Branch if yes
00077260 103C 00B4                  		move.b	#$B4,d0			; Command to set AMS/FMS/panning
00077264 122D 000A                  		move.b	TrackAMSFMSPan(a5),d1	; Get value from track RAM
00077268 4EBA 0000                  		jsr	WriteFMIorII(pc)
0007726C                            ; loc_71EB8:
0007726C                            @bgmfmnext:
0007726C DAC3                       		adda.w	d3,a5
0007726E 51CC FFE4                  		dbf	d4,@bgmfmloop
00077272                            
00077272 4BEE 0220                  		lea	v_sfx_fm_tracks(a6),a5
00077276 7802                       		moveq	#((v_sfx_fm_tracks_end-v_sfx_fm_tracks)/TrackSz)-1,d4	; 3 FM tracks (SFX)
00077278                            ; loc_71EC4:
00077278                            @sfxfmloop:
00077278 0815 0007                  		btst	#7,(a5)			; Is track playing? (TrackPlaybackControl)
0007727C 6700                       		beq.s	@sfxfmnext		; Branch if not
0007727E 0815 0002                  		btst	#2,(a5)			; Is track being overridden? (TrackPlaybackControl)
00077282 6600                       		bne.s	@sfxfmnext		; Branch if yes
00077284 103C 00B4                  		move.b	#$B4,d0			; Command to set AMS/FMS/panning
00077288 122D 000A                  		move.b	TrackAMSFMSPan(a5),d1	; Get value from track RAM
0007728C 4EBA 0000                  		jsr	WriteFMIorII(pc)
00077290                            ; loc_71EDC:
00077290                            @sfxfmnext:
00077290 DAC3                       		adda.w	d3,a5
00077292 51CC FFE4                  		dbf	d4,@sfxfmloop
00077296                            
00077296 4BEE 0340                  		lea	v_spcsfx_track_ram(a6),a5
0007729A 0815 0007                  		btst	#7,(a5)			; Is track playing? (TrackPlaybackControl)
0007729E 6700                       		beq.s	@unpausedallfm		; Branch if not
000772A0 0815 0002                  		btst	#2,(a5)			; Is track being overridden? (TrackPlaybackControl)
000772A4 6600                       		bne.s	@unpausedallfm		; Branch if yes
000772A6 103C 00B4                  		move.b	#$B4,d0			; Command to set AMS/FMS/panning
000772AA 122D 000A                  		move.b	TrackAMSFMSPan(a5),d1	; Get value from track RAM
000772AE 4EBA 0000                  		jsr	WriteFMIorII(pc)
000772B2                            ; loc_71EFE:
000772B2                            @unpausedallfm:
000772B2 6000 FD44                  		bra.w	DoStartZ80
000772B6                            
000772B6                            ; ---------------------------------------------------------------------------
000772B6                            ; Subroutine to	play a sound or	music track
000772B6                            ; ---------------------------------------------------------------------------
000772B6                            
000772B6                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000772B6                            
000772B6                            ; Sound_Play:
000772B6                            CycleSoundQueue:
000772B6 2079 0007 6D38             		movea.l	(Go_SoundPriorities).l,a0
000772BC 43EE 000A                  		lea	v_soundqueue0(a6),a1	; load music track number
000772C0 162E 0000                  		move.b	v_sndprio(a6),d3	; Get priority of currently playing SFX
000772C4 7802                       		moveq	#2,d4			; Number of queues-1 (v_soundqueue0, v_soundqueue1, v_soundqueue2)
000772C6                            ; loc_71F12:
000772C6                            @inputloop:
000772C6 1011                       		move.b	(a1),d0			; move track number to d0
000772C8 1200                       		move.b	d0,d1
000772CA 4219                       		clr.b	(a1)+			; Clear entry
000772CC 0400 0081                  		subi.b	#bgm__First,d0		; Make it into 0-based index
000772D0 6500                       		blo.s	@nextinput		; If negative (i.e., it was $80 or lower), branch
000772D2 0C2E 0080 0009             		cmpi.b	#$80,v_sound_id(a6)	; Is v_sound_id a $80 (silence/empty)?
000772D8 6700                       		beq.s	@havesound		; If yes, branch
000772DA 1D41 000A                  		move.b	d1,v_soundqueue0(a6)	; Put sound into v_soundqueue0
000772DE 6000                       		bra.s	@nextinput
000772E0                            ; ===========================================================================
000772E0                            ; loc_71F2C:
000772E0                            @havesound:
000772E0 0240 007F                  		andi.w	#$7F,d0			; Clear high byte and sign bit
000772E4 1430 0000                  		move.b	(a0,d0.w),d2		; Get sound type
000772E8 B403                       		cmp.b	d3,d2			; Is it a lower priority sound?
000772EA 6500                       		blo.s	@nextinput		; Branch if yes
000772EC 1602                       		move.b	d2,d3			; Store new priority
000772EE 1D41 0009                  		move.b	d1,v_sound_id(a6)	; Queue sound for play
000772F2                            ; loc_71F3E:
000772F2                            @nextinput:
000772F2 51CC FFD2                  		dbf	d4,@inputloop
000772F6                            
000772F6 4A03                       		tst.b	d3			; We don't want to change sound priority if it is negative
000772F8 6B00                       		bmi.s	@locret
000772FA 1D43 0000                  		move.b	d3,v_sndprio(a6)	; Set new sound priority
000772FE                            ; locret_71F4A:
000772FE                            @locret:
000772FE 4E75                       		rts	
00077300                            ; End of function CycleSoundQueue
00077300                            
00077300                            
00077300                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00077300                            
00077300                            ; Sound_ChkValue:
00077300                            PlaySoundID:
00077300 7E00                       		moveq	#0,d7
00077302 1E2E 0009                  		move.b	v_sound_id(a6),d7
00077306 6700 0000                  		beq.w	StopAllSound
0007730A 6A00                       		bpl.s	@locret			; If >= 0, return (not a valid sound, bgm or command)
0007730C 1D7C 0080 0009             		move.b	#$80,v_sound_id(a6)	; reset	music flag
00077312                            		; DANGER! Music ends at $93, yet this checks until $9F; attempting to
00077312                            		; play sounds $94-$9F will cause a crash! Remove the '+$C' to fix this.
00077312                            		; See LevSel_NoCheat for more.
00077312 0C07 0000                  		cmpi.b	#bgm__Last,d7	; Is this music ($81-$9F)?
00077316 6300 0000                  		bls.w	Sound_PlayBGM		; Branch if yes
0007731A 0C07 00A0                  		cmpi.b	#sfx__First,d7		; Is this after music but before sfx? (redundant check)
0007731E 6500 0000                  		blo.w	@locret			; Return if yes
00077322 0C07 0000                  		cmpi.b	#sfx__Last,d7		; Is this sfx ($A0-$CF)?
00077326 6300 0000                  		bls.w	Sound_PlaySFX		; Branch if yes
0007732A 0C07 00D0                  		cmpi.b	#spec__First,d7		; Is this after sfx but before special sfx? (redundant check)
0007732E 6500 0000                  		blo.w	@locret			; Return if yes
00077332                            		; DANGER! Special SFXes end at $D0, yet this checks until $DF; attempting to
00077332                            		; play sounds $D1-$DF will cause a crash! Remove the '+$10' and change the 'blo' to a 'bls'
00077332                            		; and uncomment the two lines below to fix this.
00077332 0C07 0000                  		cmpi.b	#spec__Last+$10,d7	; Is this special sfx ($D0-$DF)?
00077336 6500 0000                  		blo.w	Sound_PlaySpecial	; Branch if yes
0007733A                            		;cmpi.b	#flg__First,d7		; Is this after special sfx but before $E0?
0007733A                            		;blo.w	@locret			; Return if yes
0007733A 0C07 0000                  		cmpi.b	#flg__Last,d7		; Is this $E0-$E4?
0007733E 6300                       		bls.s	Sound_E0toE4		; Branch if yes
00077340                            ; locret_71F8C:
00077340                            @locret:
00077340 4E75                       		rts	
00077342                            ; ===========================================================================
00077342                            
00077342                            Sound_E0toE4:
00077342 0407 00E0                  		subi.b	#flg__First,d7
00077346 E54F                       		lsl.w	#2,d7
00077348 4EFB 7000                  		jmp	Sound_ExIndex(pc,d7.w)
0007734C                            ; ===========================================================================
0007734C                            
0007734C                            Sound_ExIndex:
0007734C 6000 0000                  ptr_flgE0:	bra.w	FadeOutMusic		; $E0
00077350 6000 0000                  ptr_flgE1:	bra.w	PlaySegaSound		; $E1
00077354 6000 0000                  ptr_flgE2:	bra.w	SpeedUpMusic		; $E2
00077358 6000 0000                  ptr_flgE3:	bra.w	SlowDownMusic		; $E3
0007735C 6000 0000                  ptr_flgE4:	bra.w	StopAllSound		; $E4
00077360                            ptr_flgend
00077360                            ; ===========================================================================
00077360                            ; ---------------------------------------------------------------------------
00077360                            ; Play "Say-gaa" PCM sound
00077360                            ; ---------------------------------------------------------------------------
00077360                            ; Sound_E1: PlaySega:
00077360                            PlaySegaSound:
00077360 13FC 0088 00A0 1FFF        		move.b	#$88,(z80_dac_sample).l	; Queue Sega PCM
00077368 33FC 0000 00A1 1100        		startZ80
00077370 323C 0011                  		move.w	#$11,d1
00077374                            ; loc_71FC0:
00077374                            @busyloop_outer:
00077374 303C FFFF                  		move.w	#-1,d0
00077378                            ; loc_71FC4:
00077378                            @busyloop:
00077378 4E71                       		nop	
0007737A 51C8 FFFC                  		dbf	d0,@busyloop
0007737E                            
0007737E 51C9 FFF4                  		dbf	d1,@busyloop_outer
00077382                            
00077382 584F                       		addq.w	#4,sp	; Tamper return value so we don't return to caller
00077384 4E75                       		rts	
00077386                            ; ===========================================================================
00077386                            ; ---------------------------------------------------------------------------
00077386                            ; Play music track $81-$9F
00077386                            ; ---------------------------------------------------------------------------
00077386                            ; Sound_81to9F:
00077386                            Sound_PlayBGM:
00077386 0C07 0088                  		cmpi.b	#$88,d7
0007738A 6600                       		bne.s	@bgmnot1up
0007738C 4A2E 0027                  		tst.b	$27(a6)
00077390 6600 0000                  		bne.w	@locdblret
00077394 4BEE 0040                  		lea	$40(a6),a5
00077398 7009                       		moveq	#9,d0
0007739A                            
0007739A                            @noint:
0007739A 0895 0002                  		bclr	#2,(a5)
0007739E DAFC 0030                  		adda.w	#$30,a5
000773A2 51C8 FFF6                  		dbf	d0,@noint
000773A6 4BEE 0220                  		lea	$220(a6),a5
000773AA 7005                       		moveq	#5,d0
000773AC                            
000773AC                            @loop0:
000773AC 0895 0007                  		bclr	#7,(a5)					; does this disable sfx?
000773B0 DAFC 0030                  		adda.w	#$30,a5
000773B4 51C8 FFF6                  		dbf	d0,@loop0
000773B8 204E                       		movea.l	a6,a0
000773BA 43EE 03A0                  		lea	$3A0(a6),a1
000773BE 303C 0087                  		move.w	#$87,d0
000773C2                            
000773C2                            @memcopy:
000773C2 22D8                       		move.l	(a0)+,(a1)+
000773C4 51C8 FFFC                  		dbf	d0,@memcopy
000773C8 1D7C 0080 0027             		move.b	#$80,$27(a6)
000773CE 422E 0000                  		clr.b	0(a6)
000773D2 6000                       		bra.s	@bgm_loadMusic
000773D4                            ; ===========================================================================
000773D4                            ; loc_72024:
000773D4                            @bgmnot1up:
000773D4 422E 0027                  		clr.b	f_1up_playing(a6)
000773D8 422E 0026                  		clr.b	v_fadein_counter(a6)
000773DC                            ; loc_7202C:
000773DC                            @bgm_loadMusic:
000773DC 4EBA 0000                  		jsr	InitMusicPlayback(pc)
000773E0 2879 0007 6D48             		movea.l	(Go_SpeedUpIndex).l,a4
000773E6 0407 0081                  		subi.b	#$81,d7
000773EA 1D74 7000 0029             		move.b	(a4,d7.w),$29(a6)
000773F0 2879 0007 6D40             		movea.l	(Go_MusicIndex).l,a4
000773F6 E54F                       		lsl.w	#2,d7
000773F8 2874 7000                  		movea.l	(a4,d7.w),a4
000773FC 7000                       		moveq	#0,d0
000773FE 3014                       		move.w	(a4),d0
00077400 D08C                       		add.l	a4,d0
00077402 2D40 0018                  		move.l	d0,$18(a6)
00077406 102C 0005                  		move.b	5(a4),d0
0007740A 1D40 0028                  		move.b	d0,$28(a6)
0007740E 4A2E 002A                  		tst.b	$2A(a6)
00077412 6700                       		beq.s	@nospeedshoes
00077414 102E 0029                  		move.b	$29(a6),d0
00077418                            ; loc_72068:
00077418                            @nospeedshoes:
00077418 1D40 0002                  		move.b	d0,v_main_tempo(a6)
0007741C 1D40 0001                  		move.b	d0,v_main_tempo_timeout(a6)
00077420 7200                       		moveq	#0,d1
00077422 264C                       		movea.l	a4,a3
00077424 5C4C                       		addq.w	#6,a4			; Point past header
00077426 7E00                       		moveq	#0,d7
00077428 1E2B 0002                  		move.b	2(a3),d7		; load number of FM+DAC tracks
0007742C 6700 0000                  		beq.w	@bgm_fmdone		; branch if zero
00077430 5307                       		subq.b	#1,d7
00077432 123C 00C0                  		move.b	#$C0,d1			; Default AMS+FMS+Panning
00077436 182B 0004                  		move.b	4(a3),d4		; load tempo dividing timing
0007743A 7C30                       		moveq	#TrackSz,d6
0007743C 1A3C 0001                  		move.b	#1,d5			; Note duration for first "note"
00077440 43EE 0040                  		lea	v_music_fmdac_tracks(a6),a1
00077444 45FA 0000                  		lea	FMDACInitBytes(pc),a2
00077448                            ; loc_72098:
00077448                            @bmg_fmloadloop:
00077448 08D1 0007                  		bset	#7,(a1)				; Initial playback control: set 'track playing' bit (TrackPlaybackControl)
0007744C 135A 0001                  		move.b	(a2)+,TrackVoiceControl(a1)	; Voice control bits
00077450 1344 0002                  		move.b	d4,TrackTempoDivider(a1)
00077454 1346 000D                  		move.b	d6,TrackStackPointer(a1)	; set "gosub" (coord flag F8h) stack init value
00077458 1341 000A                  		move.b	d1,TrackAMSFMSPan(a1)		; Set AMS/FMS/Panning
0007745C 1345 000E                  		move.b	d5,TrackDurationTimeout(a1)	; Set duration of first "note"
00077460 7000                       		moveq	#0,d0
00077462 301C                       		move.w	(a4)+,d0			; load DAC/FM pointer
00077464 D08B                       		add.l	a3,d0				; Relative pointer
00077466 2340 0004                  		move.l	d0,TrackDataPointer(a1)	; Store track pointer
0007746A 335C 0008                  		move.w	(a4)+,TrackTranspose(a1)	; load FM channel modifier
0007746E D2C6                       		adda.w	d6,a1
00077470 51CF FFD6                  		dbf	d7,@bmg_fmloadloop
00077474                            		
00077474 0C2B 0007 0002             		cmpi.b	#7,2(a3)	; Are 7 FM tracks defined?
0007747A 6600                       		bne.s	@silencefm6
0007747C 702B                       		moveq	#$2B,d0		; DAC enable/disable register
0007747E 7200                       		moveq	#0,d1		; Disable DAC
00077480 4EBA 0000                  		jsr	WriteFMI(pc)
00077484 6000 0000                  		bra.w	@bgm_fmdone
00077488                            ; ===========================================================================
00077488                            ; loc_720D8:
00077488                            @silencefm6:
00077488 7028                       		moveq	#$28,d0		; Key on/off register
0007748A 7206                       		moveq	#6,d1		; Note off on all operators of channel 6
0007748C 4EBA 0000                  		jsr	WriteFMI(pc)
00077490 103C 0042                  		move.b	#$42,d0		; TL for operator 1 of FM6
00077494 727F                       		moveq	#$7F,d1		; Total silence
00077496 4EBA 0000                  		jsr	WriteFMII(pc)
0007749A 103C 004A                  		move.b	#$4A,d0		; TL for operator 3 of FM6
0007749E 727F                       		moveq	#$7F,d1		; Total silence
000774A0 4EBA 0000                  		jsr	WriteFMII(pc)
000774A4 103C 0046                  		move.b	#$46,d0		; TL for operator 2 of FM6
000774A8 727F                       		moveq	#$7F,d1		; Total silence
000774AA 4EBA 0000                  		jsr	WriteFMII(pc)
000774AE 103C 004E                  		move.b	#$4E,d0		; TL for operator 4 of FM6
000774B2 727F                       		moveq	#$7F,d1		; Total silence
000774B4 4EBA 0000                  		jsr	WriteFMII(pc)
000774B8 103C 00B6                  		move.b	#$B6,d0		; AMS/FMS/panning of FM6
000774BC 123C 00C0                  		move.b	#$C0,d1		; Stereo
000774C0 4EBA 0000                  		jsr	WriteFMII(pc)
000774C4                            ; loc_72114:
000774C4                            @bgm_fmdone:
000774C4 7E00                       		moveq	#0,d7
000774C6 1E2B 0003                  		move.b	3(a3),d7	; Load number of PSG tracks
000774CA 6700                       		beq.s	@bgm_psgdone	; branch if zero
000774CC 5307                       		subq.b	#1,d7
000774CE 43EE 0190                  		lea	v_music_psg_tracks(a6),a1
000774D2 45FA 0000                  		lea	PSGInitBytes(pc),a2
000774D6                            ; loc_72126:
000774D6                            @bgm_psgloadloop:
000774D6 08D1 0007                  		bset	#7,(a1)				; Initial playback control: set 'track playing' bit (TrackPlaybackControl)
000774DA 135A 0001                  		move.b	(a2)+,TrackVoiceControl(a1)	; Voice control bits
000774DE 1344 0002                  		move.b	d4,TrackTempoDivider(a1)
000774E2 1346 000D                  		move.b	d6,TrackStackPointer(a1)	; set "gosub" (coord flag F8h) stack init value
000774E6 1345 000E                  		move.b	d5,TrackDurationTimeout(a1)	; Set duration of first "note"
000774EA 7000                       		moveq	#0,d0
000774EC 301C                       		move.w	(a4)+,d0			; load PSG channel pointer
000774EE D08B                       		add.l	a3,d0				; Relative pointer
000774F0 2340 0004                  		move.l	d0,TrackDataPointer(a1)	; Store track pointer
000774F4 335C 0008                  		move.w	(a4)+,TrackTranspose(a1)	; load PSG modifier
000774F8 101C                       		move.b	(a4)+,d0			; load redundant byte
000774FA 135C 000B                  		move.b	(a4)+,TrackVoiceIndex(a1)	; Initial PSG tone
000774FE D2C6                       		adda.w	d6,a1
00077500 51CF FFD4                  		dbf	d7,@bgm_psgloadloop
00077504                            ; loc_72154:
00077504                            @bgm_psgdone:
00077504 43EE 0220                  		lea	v_sfx_track_ram(a6),a1
00077508 7E05                       		moveq	#((v_sfx_track_ram_end-v_sfx_track_ram)/TrackSz)-1,d7	; 6 SFX tracks
0007750A                            ; loc_7215A:
0007750A                            @sfxstoploop:
0007750A 4A11                       		tst.b	(a1)		; Is SFX playing? (TrackPlaybackControl)
0007750C 6A00 0000                  		bpl.w	@sfxnext	; Branch if not
00077510 7000                       		moveq	#0,d0
00077512 1029 0001                  		move.b	TrackVoiceControl(a1),d0 ; Get voice control bits
00077516 6B00                       		bmi.s	@sfxpsgchannel		; Branch if this is a PSG channel
00077518 5500                       		subq.b	#2,d0			; SFX can't have FM1 or FM2
0007751A E508                       		lsl.b	#2,d0			; Convert to index
0007751C 6000                       		bra.s	@gotchannelindex
0007751E                            ; ===========================================================================
0007751E                            ; loc_7216E:
0007751E                            @sfxpsgchannel:
0007751E E608                       		lsr.b	#3,d0		; Convert to index
00077520                            ; loc_72170:
00077520                            @gotchannelindex:
00077520 41FA 0000                  		lea	SFX_BGMChannelRAM(pc),a0
00077524 2070 0000                  		movea.l	(a0,d0.w),a0
00077528 08D0 0002                  		bset	#2,(a0)		; Set 'SFX is overriding' bit (TrackPlaybackControl)
0007752C                            ; loc_7217C:
0007752C                            @sfxnext:
0007752C D2C6                       		adda.w	d6,a1
0007752E 51CF FFDA                  		dbf	d7,@sfxstoploop
00077532                            
00077532 4A6E 0340                  		tst.w	v_spcsfx_fm4_track+TrackPlaybackControl(a6)	; Is special SFX being played?
00077536 6A00                       		bpl.s	@checkspecialpsg				; Branch if not
00077538 08EE 0002 0100             		bset	#2,v_music_fm4_track+TrackPlaybackControl(a6)	; Set 'SFX is overriding' bit
0007753E                            ; loc_7218E:
0007753E                            @checkspecialpsg:
0007753E 4A6E 0370                  		tst.w	v_spcsfx_psg3_track+TrackPlaybackControl(a6)	; Is special SFX being played?
00077542 6A00                       		bpl.s	@sendfmnoteoff					; Branch if not
00077544 08EE 0002 01F0             		bset	#2,v_music_psg3_track+TrackPlaybackControl(a6)	; Set 'SFX is overriding' bit
0007754A                            ; loc_7219A:
0007754A                            @sendfmnoteoff:
0007754A 4BEE 0070                  		lea	v_music_fm_tracks(a6),a5
0007754E 7805                       		moveq	#((v_music_fm_tracks_end-v_music_fm_tracks)/TrackSz)-1,d4	; 6 FM tracks
00077550                            ; loc_721A0:
00077550                            @fmnoteoffloop:
00077550 4EBA 0000                  		jsr	FMNoteOff(pc)
00077554 DAC6                       		adda.w	d6,a5
00077556 51CC FFF8                  		dbf	d4,@fmnoteoffloop		; run all FM tracks
0007755A 7802                       		moveq	#((v_music_psg_tracks_end-v_music_psg_tracks)/TrackSz)-1,d4 ; 3 PSG tracks
0007755C                            ; loc_721AC:
0007755C                            @psgnoteoffloop:
0007755C 4EBA 0000                  		jsr	PSGNoteOff(pc)
00077560 DAC6                       		adda.w	d6,a5
00077562 51CC FFF8                  		dbf	d4,@psgnoteoffloop		; run all PSG tracks
00077566                            ; loc_721B6:
00077566                            @locdblret:
00077566 584F                       		addq.w	#4,sp	; Tamper with return value to not return to caller
00077568 4E75                       		rts	
0007756A                            ; ===========================================================================
0007756A                            ; byte_721BA:
0007756A 0600 0102 0405 06          FMDACInitBytes:	dc.b 6,	0, 1, 2, 4, 5, 6	; first byte is for DAC; then notice the 0, 1, 2 then 4, 5, 6; this is the gap between parts I and II for YM2612 port writes
00077572 00                         		even
00077572                            ; byte_721C2:
00077572 80A0 C0                    PSGInitBytes:	dc.b $80, $A0, $C0	; Specifically, these configure writes to the PSG port for each channel
00077576 00                         		even
00077576                            ; ===========================================================================
00077576                            ; ---------------------------------------------------------------------------
00077576                            ; Play normal sound effect
00077576                            ; ---------------------------------------------------------------------------
00077576                            ; Sound_A0toCF:
00077576                            Sound_PlaySFX:
00077576 4A2E 0027                  		tst.b	f_1up_playing(a6)	; Is 1-up playing?
0007757A 6600 0000                  		bne.w	@clear_sndprio		; Exit is it is
0007757E 4A2E 0004                  		tst.b	v_fadeout_counter(a6)	; Is music being faded out?
00077582 6600 0000                  		bne.w	@clear_sndprio		; Exit if it is
00077586 4A2E 0024                  		tst.b	f_fadein_flag(a6)	; Is music being faded in?
0007758A 6600 0000                  		bne.w	@clear_sndprio		; Exit if it is
0007758E 0C07 0000                  		cmpi.b	#sfx_Ring,d7		; is ring sound	effect played?
00077592 6600                       		bne.s	@sfx_notRing		; if not, branch
00077594 4A2E 002B                  		tst.b	v_ring_speaker(a6)	; Is the ring sound playing on right speaker?
00077598 6600                       		bne.s	@gotringspeaker		; Branch if not
0007759A 1E3C 0000                  		move.b	#sfx_RingLeft,d7	; play ring sound in left speaker
0007759E                            ; loc_721EE:
0007759E                            @gotringspeaker:
0007759E 086E 0000 002B             		bchg	#0,v_ring_speaker(a6)	; change speaker
000775A4                            ; Sound_notB5:
000775A4                            @sfx_notRing:
000775A4 0C07 0000                  		cmpi.b	#sfx_Push,d7		; is "pushing" sound played?
000775A8 6600                       		bne.s	@sfx_notPush		; if not, branch
000775AA 4A2E 002C                  		tst.b	f_push_playing(a6)	; Is pushing sound already playing?
000775AE 6600 0000                  		bne.w	@locret			; Return if not
000775B2 1D7C 0080 002C             		move.b	#$80,f_push_playing(a6)	; Mark it as playing
000775B8                            ; Sound_notA7:
000775B8                            @sfx_notPush:
000775B8 2079 0007 6D44             		movea.l	(Go_SoundIndex).l,a0
000775BE 0407 00A0                  		subi.b	#sfx__First,d7		; Make it 0-based
000775C2 E54F                       		lsl.w	#2,d7			; Convert sfx ID into index
000775C4 2670 7000                  		movea.l	(a0,d7.w),a3		; SFX data pointer
000775C8 224B                       		movea.l	a3,a1
000775CA 7200                       		moveq	#0,d1
000775CC 3219                       		move.w	(a1)+,d1		; Voice pointer
000775CE D28B                       		add.l	a3,d1			; Relative pointer
000775D0 1A19                       		move.b	(a1)+,d5		; Dividing timing
000775D2                            		; DANGER! there is a missing 'moveq	#0,d7' here, without which SFXes whose
000775D2                            		; index entry is above $3F will cause a crash. This is actually the same way that
000775D2                            		; this bug is fixed in Ristar's driver.
000775D2 1E19                       		move.b	(a1)+,d7	; Number of tracks (FM + PSG)
000775D4 5307                       		subq.b	#1,d7
000775D6 7C30                       		moveq	#TrackSz,d6
000775D8                            ; loc_72228:
000775D8                            @sfx_loadloop:
000775D8 7600                       		moveq	#0,d3
000775DA 1629 0001                  		move.b	1(a1),d3	; Channel assignment bits
000775DE 1803                       		move.b	d3,d4
000775E0 6B00                       		bmi.s	@sfxinitpsg	; Branch if PSG
000775E2 5543                       		subq.w	#2,d3		; SFX can only have FM3, FM4 or FM5
000775E4 E54B                       		lsl.w	#2,d3
000775E6 4BFA 0000                  		lea	SFX_BGMChannelRAM(pc),a5
000775EA 2A75 3000                  		movea.l	(a5,d3.w),a5
000775EE 08D5 0002                  		bset	#2,(a5)		; Mark music track as being overridden (TrackPlaybackControl)
000775F2 6000                       		bra.s	@sfxoverridedone
000775F4                            ; ===========================================================================
000775F4                            ; loc_72244:
000775F4                            @sfxinitpsg:
000775F4 E64B                       		lsr.w	#3,d3
000775F6 4BFA 0000                  		lea	SFX_BGMChannelRAM(pc),a5
000775FA 2A75 3000                  		movea.l	(a5,d3.w),a5
000775FE 08D5 0002                  		bset	#2,(a5)			; Mark music track as being overridden (TrackPlaybackControl)
00077602 0C04 00C0                  		cmpi.b	#$C0,d4			; Is this PSG 3?
00077606 6600                       		bne.s	@sfxoverridedone	; Branch if not
00077608 1004                       		move.b	d4,d0
0007760A 0000 001F                  		ori.b	#$1F,d0			; Command to silence PSG 3
0007760E 13C0 00C0 0011             		move.b	d0,(psg_input).l
00077614 0840 0005                  		bchg	#5,d0			; Command to silence noise channel
00077618 13C0 00C0 0011             		move.b	d0,(psg_input).l
0007761E                            ; loc_7226E:
0007761E                            @sfxoverridedone:
0007761E 2A7B 3000                  		movea.l	SFX_SFXChannelRAM(pc,d3.w),a5
00077622 244D                       		movea.l	a5,a2
00077624 700B                       		moveq	#(TrackSz/4)-1,d0	; $30 bytes
00077626                            ; loc_72276:
00077626                            @clearsfxtrackram:
00077626 429A                       		clr.l	(a2)+
00077628 51C8 FFFC                  		dbf	d0,@clearsfxtrackram
0007762C                            
0007762C 3A99                       		move.w	(a1)+,(a5)			; Initial playback control bits (TrackPlaybackControl)
0007762E 1B45 0002                  		move.b	d5,TrackTempoDivider(a5)	; Initial voice control bits
00077632 7000                       		moveq	#0,d0
00077634 3019                       		move.w	(a1)+,d0			; Track data pointer
00077636 D08B                       		add.l	a3,d0				; Relative pointer
00077638 2B40 0004                  		move.l	d0,TrackDataPointer(a5)	; Store track pointer
0007763C 3B59 0008                  		move.w	(a1)+,TrackTranspose(a5)	; load FM/PSG channel modifier
00077640 1B7C 0001 000E             		move.b	#1,TrackDurationTimeout(a5)	; Set duration of first "note"
00077646 1B46 000D                  		move.b	d6,TrackStackPointer(a5)	; set "gosub" (coord flag F8h) stack init value
0007764A 4A04                       		tst.b	d4				; Is this a PSG channel?
0007764C 6B00                       		bmi.s	@sfxpsginitdone			; Branch if yes
0007764E 1B7C 00C0 000A             		move.b	#$C0,TrackAMSFMSPan(a5)	; AMS/FMS/Panning
00077654 2B41 0020                  		move.l	d1,TrackVoicePtr(a5)		; Voice pointer
00077658                            ; loc_722A8:
00077658                            @sfxpsginitdone:
00077658 51CF FF7E                  		dbf	d7,@sfx_loadloop
0007765C                            
0007765C 4A2E 0250                  		tst.b	v_sfx_fm4_track+TrackPlaybackControl(a6)	; Is special SFX being played?
00077660 6A00                       		bpl.s	@doneoverride					; Branch if not
00077662 08EE 0002 0340             		bset	#2,v_spcsfx_fm4_track+TrackPlaybackControl(a6)	; Set 'SFX is overriding' bit
00077668                            ; loc_722B8:
00077668                            @doneoverride:
00077668 4A2E 0310                  		tst.b	v_sfx_psg3_track+TrackPlaybackControl(a6)	; Is SFX being played?
0007766C 6A00                       		bpl.s	@locret						; Branch if not
0007766E 08EE 0002 0370             		bset	#2,v_spcsfx_psg3_track+TrackPlaybackControl(a6)	; Set 'SFX is overriding' bit
00077674                            ; locret_722C4:
00077674                            @locret:
00077674 4E75                       		rts	
00077676                            ; ===========================================================================
00077676                            ; loc_722C6:
00077676                            @clear_sndprio:
00077676 422E 0000                  		clr.b	v_sndprio(a6)	; Clear priority
0007767A 4E75                       		rts	
0007767C                            ; ===========================================================================
0007767C                            ; ---------------------------------------------------------------------------
0007767C                            ; RAM addresses for FM and PSG channel variables used by the SFX
0007767C                            ; ---------------------------------------------------------------------------
0007767C                            ; dword_722CC: BGMChannelRAM:
0007767C                            SFX_BGMChannelRAM:
0007767C 00FF F0D0                  		dc.l (v_snddriver_ram+v_music_fm3_track)&$FFFFFF
00077680 0000 0000                  		dc.l 0
00077684 00FF F100                  		dc.l (v_snddriver_ram+v_music_fm4_track)&$FFFFFF
00077688 00FF F130                  		dc.l (v_snddriver_ram+v_music_fm5_track)&$FFFFFF
0007768C 00FF F190                  		dc.l (v_snddriver_ram+v_music_psg1_track)&$FFFFFF
00077690 00FF F1C0                  		dc.l (v_snddriver_ram+v_music_psg2_track)&$FFFFFF
00077694 00FF F1F0                  		dc.l (v_snddriver_ram+v_music_psg3_track)&$FFFFFF	; Plain PSG3
00077698 00FF F1F0                  		dc.l (v_snddriver_ram+v_music_psg3_track)&$FFFFFF	; Noise
0007769C                            ; dword_722EC: SFXChannelRAM:
0007769C                            SFX_SFXChannelRAM:
0007769C 00FF F220                  		dc.l (v_snddriver_ram+v_sfx_fm3_track)&$FFFFFF
000776A0 0000 0000                  		dc.l 0
000776A4 00FF F250                  		dc.l (v_snddriver_ram+v_sfx_fm4_track)&$FFFFFF
000776A8 00FF F280                  		dc.l (v_snddriver_ram+v_sfx_fm5_track)&$FFFFFF
000776AC 00FF F2B0                  		dc.l (v_snddriver_ram+v_sfx_psg1_track)&$FFFFFF
000776B0 00FF F2E0                  		dc.l (v_snddriver_ram+v_sfx_psg2_track)&$FFFFFF
000776B4 00FF F310                  		dc.l (v_snddriver_ram+v_sfx_psg3_track)&$FFFFFF	; Plain PSG3
000776B8 00FF F310                  		dc.l (v_snddriver_ram+v_sfx_psg3_track)&$FFFFFF	; Noise
000776BC                            ; ===========================================================================
000776BC                            ; ---------------------------------------------------------------------------
000776BC                            ; Play GHZ waterfall sound
000776BC                            ; ---------------------------------------------------------------------------
000776BC                            ; Sound_D0toDF:
000776BC                            Sound_PlaySpecial:
000776BC 4A2E 0027                  		tst.b	f_1up_playing(a6)	; Is 1-up playing?
000776C0 6600 0000                  		bne.w	@locret			; Return if so
000776C4 4A2E 0004                  		tst.b	v_fadeout_counter(a6)	; Is music being faded out?
000776C8 6600 0000                  		bne.w	@locret			; Exit if it is
000776CC 4A2E 0024                  		tst.b	f_fadein_flag(a6)	; Is music being faded in?
000776D0 6600 0000                  		bne.w	@locret			; Exit if it is
000776D4 2079 0007 6D3C             		movea.l	(Go_SpecSoundIndex).l,a0
000776DA 0407 00D0                  		subi.b	#spec__First,d7		; Make it 0-based
000776DE E54F                       		lsl.w	#2,d7
000776E0 2670 7000                  		movea.l	(a0,d7.w),a3
000776E4 224B                       		movea.l	a3,a1
000776E6 7000                       		moveq	#0,d0
000776E8 3019                       		move.w	(a1)+,d0			; Voice pointer
000776EA D08B                       		add.l	a3,d0				; Relative pointer
000776EC 2D40 0020                  		move.l	d0,v_special_voice_ptr(a6)	; Store voice pointer
000776F0 1A19                       		move.b	(a1)+,d5			; Dividing timing
000776F2                            		; DANGER! there is a missing 'moveq	#0,d7' here, without which special SFXes whose
000776F2                            		; index entry is above $3F will cause a crash. This instance was not fixed in Ristar's driver.
000776F2 1E19                       		move.b	(a1)+,d7			; Number of tracks (FM + PSG)
000776F4 5307                       		subq.b	#1,d7
000776F6 7C30                       		moveq	#TrackSz,d6
000776F8                            ; loc_72348:
000776F8                            @sfxloadloop:
000776F8 1829 0001                  		move.b	1(a1),d4					; Voice control bits
000776FC 6B00                       		bmi.s	@sfxoverridepsg					; Branch if PSG
000776FE 08EE 0002 0100             		bset	#2,v_music_fm4_track+TrackPlaybackControl(a6)	; Set 'SFX is overriding' bit
00077704 4BEE 0340                  		lea	v_spcsfx_fm4_track(a6),a5
00077708 6000                       		bra.s	@sfxinitpsg
0007770A                            ; ===========================================================================
0007770A                            ; loc_7235A:
0007770A                            @sfxoverridepsg:
0007770A 08EE 0002 01F0             		bset	#2,v_music_psg3_track+TrackPlaybackControl(a6)	; Set 'SFX is overriding' bit
00077710 4BEE 0370                  		lea	v_spcsfx_psg3_track(a6),a5
00077714                            ; loc_72364:
00077714                            @sfxinitpsg:
00077714 244D                       		movea.l	a5,a2
00077716 700B                       		moveq	#(TrackSz/4)-1,d0	; $30 bytes
00077718                            ; loc_72368:
00077718                            @clearsfxtrackram:
00077718 429A                       		clr.l	(a2)+
0007771A 51C8 FFFC                  		dbf	d0,@clearsfxtrackram
0007771E                            
0007771E 3A99                       		move.w	(a1)+,(a5)			; Initial playback control bits & voice control bits (TrackPlaybackControl)
00077720 1B45 0002                  		move.b	d5,TrackTempoDivider(a5)
00077724 7000                       		moveq	#0,d0
00077726 3019                       		move.w	(a1)+,d0			; Track data pointer
00077728 D08B                       		add.l	a3,d0				; Relative pointer
0007772A 2B40 0004                  		move.l	d0,TrackDataPointer(a5)	; Store track pointer
0007772E 3B59 0008                  		move.w	(a1)+,TrackTranspose(a5)	; load FM/PSG channel modifier
00077732 1B7C 0001 000E             		move.b	#1,TrackDurationTimeout(a5)	; Set duration of first "note"
00077738 1B46 000D                  		move.b	d6,TrackStackPointer(a5)	; set "gosub" (coord flag F8h) stack init value
0007773C 4A04                       		tst.b	d4				; Is this a PSG channel?
0007773E 6B00                       		bmi.s	@sfxpsginitdone			; Branch if yes
00077740 1B7C 00C0 000A             		move.b	#$C0,TrackAMSFMSPan(a5)	; AMS/FMS/Panning
00077746                            ; loc_72396:
00077746                            @sfxpsginitdone:
00077746 51CF FFB0                  		dbf	d7,@sfxloadloop
0007774A                            
0007774A 4A2E 0250                  		tst.b	v_sfx_fm4_track+TrackPlaybackControl(a6)	; Is track playing?
0007774E 6A00                       		bpl.s	@doneoverride					; Branch if not
00077750 08EE 0002 0340             		bset	#2,v_spcsfx_fm4_track+TrackPlaybackControl(a6)	; Set 'SFX is overriding' bit
00077756                            ; loc_723A6:
00077756                            @doneoverride:
00077756 4A2E 0310                  		tst.b	v_sfx_psg3_track+TrackPlaybackControl(a6)	; Is track playing?
0007775A 6A00                       		bpl.s	@locret						; Branch if not
0007775C 08EE 0002 0370             		bset	#2,v_spcsfx_psg3_track+TrackPlaybackControl(a6)	; Set 'SFX is overriding' bit
00077762 0004 001F                  		ori.b	#$1F,d4						; Command to silence channel
00077766 13C4 00C0 0011             		move.b	d4,(psg_input).l
0007776C 0844 0005                  		bchg	#5,d4			; Command to silence noise channel
00077770 13C4 00C0 0011             		move.b	d4,(psg_input).l
00077776                            ; locret_723C6:
00077776                            @locret:
00077776 4E75                       		rts	
00077778                            ; End of function PlaySoundID
00077778                            
00077778                            ; ===========================================================================
00077778                            ; ---------------------------------------------------------------------------
00077778                            ; Unused RAM addresses for FM and PSG channel variables used by the Special SFX
00077778                            ; ---------------------------------------------------------------------------
00077778                            ; The first block would have been used for overriding the music tracks
00077778                            ; as they have a lower priority, just as they are in Sound_PlaySFX
00077778                            ; The third block would be used to set up the Special SFX
00077778                            ; The second block, however, is for the SFX tracks, which have a higher priority
00077778                            ; and would be checked for if they're currently playing
00077778                            ; If they are, then the third block would be used again, this time to mark
00077778                            ; the new tracks as 'currently playing'
00077778                            
00077778                            ; These were actually used in Moonwalker's driver (and other SMPS 68k Type 1a drivers)
00077778                            
00077778                            ; BGMFM4PSG3RAM:
00077778                            ;SpecSFX_BGMChannelRAM:
00077778 00FF F100                  		dc.l (v_snddriver_ram+v_music_fm4_track)&$FFFFFF
0007777C 00FF F1F0                  		dc.l (v_snddriver_ram+v_music_psg3_track)&$FFFFFF
00077780                            ; SFXFM4PSG3RAM:
00077780                            ;SpecSFX_SFXChannelRAM:
00077780 00FF F250                  		dc.l (v_snddriver_ram+v_sfx_fm4_track)&$FFFFFF
00077784 00FF F310                  		dc.l (v_snddriver_ram+v_sfx_psg3_track)&$FFFFFF
00077788                            ; SpecialSFXFM4PSG3RAM:
00077788                            ;SpecSFX_SpecSFXChannelRAM:
00077788 00FF F340                  		dc.l (v_snddriver_ram+v_spcsfx_fm4_track)&$FFFFFF
0007778C 00FF F370                  		dc.l (v_snddriver_ram+v_spcsfx_psg3_track)&$FFFFFF
00077790                            
00077790                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00077790                            
00077790                            ; Snd_FadeOut1: Snd_FadeOutSFX: FadeOutSFX:
00077790                            StopSFX:
00077790 422E 0000                  		clr.b	v_sndprio(a6)		; Clear priority
00077794 4BEE 0220                  		lea	v_sfx_track_ram(a6),a5
00077798 7E05                       		moveq	#((v_sfx_track_ram_end-v_sfx_track_ram)/TrackSz)-1,d7	; 3 FM + 3 PSG tracks (SFX)
0007779A                            ; loc_723EA:
0007779A                            @trackloop:
0007779A 4A15                       		tst.b	(a5)		; Is track playing? (TrackPlaybackControl)
0007779C 6A00 0000                  		bpl.w	@nexttrack	; Branch if not
000777A0 0895 0007                  		bclr	#7,(a5)		; Stop track (TrackPlaybackControl)
000777A4 7600                       		moveq	#0,d3
000777A6 162D 0001                  		move.b	TrackVoiceControl(a5),d3	; Get voice control bits
000777AA 6B00                       		bmi.s	@trackpsg			; Branch if PSG
000777AC 4EBA 0000                  		jsr	FMNoteOff(pc)
000777B0 0C03 0004                  		cmpi.b	#4,d3						; Is this FM4?
000777B4 6600                       		bne.s	@getfmpointer					; Branch if not
000777B6 4A2E 0340                  		tst.b	v_spcsfx_fm4_track+TrackPlaybackControl(a6)	; Is special SFX playing?
000777BA 6A00                       		bpl.s	@getfmpointer					; Branch if not
000777BC                            		; DANGER! there is a missing 'movea.l	a5,a3' here, without which the
000777BC                            		; code is broken. It is dangerous to do a fade out when a GHZ waterfall
000777BC                            		; is playing its sound!
000777BC 264D                       		movea.l	a5,a3
000777BE 4BEE 0340                  		lea	v_spcsfx_fm4_track(a6),a5
000777C2 226E 0020                  		movea.l	v_special_voice_ptr(a6),a1	; Get special voice pointer
000777C6 6000                       		bra.s	@gotfmpointer
000777C8                            ; ===========================================================================
000777C8                            ; loc_72416:
000777C8                            @getfmpointer:
000777C8 5503                       		subq.b	#2,d3		; SFX only has FM3 and up
000777CA E50B                       		lsl.b	#2,d3
000777CC 41FA FEAE                  		lea	SFX_BGMChannelRAM(pc),a0
000777D0 264D                       		movea.l	a5,a3
000777D2 2A70 3000                  		movea.l	(a0,d3.w),a5
000777D6 226E 0018                  		movea.l	v_voice_ptr(a6),a1	; Get music voice pointer
000777DA                            ; loc_72428:
000777DA                            @gotfmpointer:
000777DA 0895 0002                  		bclr	#2,(a5)			; Clear 'SFX is overriding' bit (TrackPlaybackControl)
000777DE 08D5 0001                  		bset	#1,(a5)			; Set 'track at rest' bit (TrackPlaybackControl)
000777E2 102D 000B                  		move.b	TrackVoiceIndex(a5),d0	; Current voice
000777E6 4EBA 0000                  		jsr	SetVoice(pc)
000777EA 2A4B                       		movea.l	a3,a5
000777EC 6000                       		bra.s	@nexttrack
000777EE                            ; ===========================================================================
000777EE                            ; loc_7243C:
000777EE                            @trackpsg:
000777EE 4EBA 0000                  		jsr	PSGNoteOff(pc)
000777F2 41EE 0370                  		lea	v_spcsfx_psg3_track(a6),a0
000777F6 0C03 00E0                  		cmpi.b	#$E0,d3			; Is this a noise channel:
000777FA 6700                       		beq.s	@gotpsgpointer		; Branch if yes
000777FC 0C03 00C0                  		cmpi.b	#$C0,d3			; Is this PSG 3?
00077800 6700                       		beq.s	@gotpsgpointer		; Branch if yes
00077802 E60B                       		lsr.b	#3,d3
00077804 41FA FE76                  		lea	SFX_BGMChannelRAM(pc),a0
00077808 2070 3000                  		movea.l	(a0,d3.w),a0
0007780C                            ; loc_7245A:
0007780C                            @gotpsgpointer:
0007780C 0890 0002                  		bclr	#2,(a0)				; Clear 'SFX is overriding' bit (TrackPlaybackControl)
00077810 08D0 0001                  		bset	#1,(a0)				; Set 'track at rest' bit (TrackPlaybackControl)
00077814 0C28 00E0 0001             		cmpi.b	#$E0,TrackVoiceControl(a0)	; Is this a noise channel?
0007781A 6600                       		bne.s	@nexttrack			; Branch if not
0007781C 13E8 001F 00C0 0011        		move.b	TrackPSGNoise(a0),(psg_input).l ; Set noise type
00077824                            ; loc_72472:
00077824                            @nexttrack:
00077824 DAFC 0030                  		adda.w	#TrackSz,a5
00077828 51CF FF70                  		dbf	d7,@trackloop
0007782C                            
0007782C 4E75                       		rts	
0007782E                            ; End of function StopSFX
0007782E                            
0007782E                            
0007782E                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0007782E                            
0007782E                            ; Snd_FadeOut2: FadeOutSFX2: FadeOutSpecialSFX:
0007782E                            StopSpecialSFX:
0007782E 4BEE 0340                  		lea	v_spcsfx_fm4_track(a6),a5
00077832 4A15                       		tst.b	(a5)			; Is track playing? (TrackPlaybackControl)
00077834 6A00                       		bpl.s	@fadedfm		; Branch if not
00077836 0895 0007                  		bclr	#7,(a5)			; Stop track (TrackPlaybackControl)
0007783A 0815 0002                  		btst	#2,(a5)			; Is SFX overriding? (TrackPlaybackControl)
0007783E 6600                       		bne.s	@fadedfm		; Branch if not
00077840 4EBA 0000                  		jsr	SendFMNoteOff(pc)
00077844 4BEE 0100                  		lea	v_music_fm4_track(a6),a5
00077848 0895 0002                  		bclr	#2,(a5)			; Clear 'SFX is overriding' bit (TrackPlaybackControl)
0007784C 08D5 0001                  		bset	#1,(a5)			; Set 'track at rest' bit (TrackPlaybackControl)
00077850 4A15                       		tst.b	(a5)			; Is track playing? (TrackPlaybackControl)
00077852 6A00                       		bpl.s	@fadedfm		; Branch if not
00077854 226E 0018                  		movea.l	v_voice_ptr(a6),a1	; Voice pointer
00077858 102D 000B                  		move.b	TrackVoiceIndex(a5),d0	; Current voice
0007785C 4EBA 0000                  		jsr	SetVoice(pc)
00077860                            ; loc_724AE:
00077860                            @fadedfm:
00077860 4BEE 0370                  		lea	v_spcsfx_psg3_track(a6),a5
00077864 4A15                       		tst.b	(a5)			; Is track playing? (TrackPlaybackControl)
00077866 6A00                       		bpl.s	@fadedpsg		; Branch if not
00077868 0895 0007                  		bclr	#7,(a5)			; Stop track (TrackPlaybackControl)
0007786C 0815 0002                  		btst	#2,(a5)			; Is SFX overriding? (TrackPlaybackControl)
00077870 6600                       		bne.s	@fadedpsg		; Return if not
00077872 4EBA 0000                  		jsr	SendPSGNoteOff(pc)
00077876 4BEE 01F0                  		lea	v_music_psg3_track(a6),a5
0007787A 0895 0002                  		bclr	#2,(a5)			; Clear 'SFX is overriding' bit (TrackPlaybackControl)
0007787E 08D5 0001                  		bset	#1,(a5)			; Set 'track at rest' bit (TrackPlaybackControl)
00077882 4A15                       		tst.b	(a5)			; Is track playing? (TrackPlaybackControl)
00077884 6A00                       		bpl.s	@fadedpsg		; Return if not
00077886 0C2D 00E0 0001             		cmpi.b	#$E0,TrackVoiceControl(a5)	; Is this a noise channel?
0007788C 6600                       		bne.s	@fadedpsg			; Return if not
0007788E 13ED 001F 00C0 0011        		move.b	TrackPSGNoise(a5),(psg_input).l ; Set noise type
00077896                            ; locret_724E4:
00077896                            @fadedpsg:
00077896 4E75                       		rts	
00077898                            ; End of function StopSpecialSFX
00077898                            
00077898                            ; ===========================================================================
00077898                            ; ---------------------------------------------------------------------------
00077898                            ; Fade out music
00077898                            ; ---------------------------------------------------------------------------
00077898                            ; Sound_E0:
00077898                            FadeOutMusic:
00077898 4EBA FEF6                  		jsr	StopSFX(pc)
0007789C 4EBA FF90                  		jsr	StopSpecialSFX(pc)
000778A0 1D7C 0003 0006             		move.b	#3,6(a6)
000778A6 1D7C 0028 0004             		move.b	#$28,4(a6)
000778AC 422E 0040                  		clr.b	$40(a6)
000778B0 422E 002A                  		clr.b	$2A(a6)
000778B4 4E75                       		rts
000778B6                            ; ---------------------------------------------------------------------------
000778B6                            
000778B6                            DoFadeOut:
000778B6 102E 0006                  		move.b	6(a6),d0
000778BA 6700                       		beq.s	@dotick
000778BC 532E 0006                  		subq.b	#1,6(a6)
000778C0 4E75                       		rts
000778C2                            ; ---------------------------------------------------------------------------
000778C2                            
000778C2                            @dotick:
000778C2 532E 0004                  		subq.b	#1,4(a6)
000778C6 6700 0000                  		beq.w	StopAllSound
000778CA 1D7C 0003 0006             		move.b	#3,6(a6)
000778D0 4BEE 0070                  		lea	$70(a6),a5
000778D4 7E05                       		moveq	#5,d7
000778D6                            
000778D6                            @loopfm:
000778D6 4A15                       		tst.b	(a5)
000778D8 6A00                       		bpl.s	@nofm
000778DA 522D 0009                  		addq.b	#1,9(a5)
000778DE 6A00                       		bpl.s	@updatefm
000778E0 0895 0007                  		bclr	#7,(a5)
000778E4 6000                       		bra.s	@nofm
000778E6                            ; ---------------------------------------------------------------------------
000778E6                            
000778E6                            @updatefm:
000778E6 4EBA 0000                  		jsr	SendVoiceTL(pc)
000778EA                            
000778EA                            @nofm:
000778EA DAFC 0030                  		adda.w	#$30,a5
000778EE 51CF FFE6                  		dbf	d7,@loopfm
000778F2 7E02                       		moveq	#2,d7
000778F4                            
000778F4                            @looppsg:
000778F4 4A15                       		tst.b	(a5)
000778F6 6A00                       		bpl.s	@nopsg
000778F8 522D 0009                  		addq.b	#1,9(a5)
000778FC 0C2D 0010 0009             		cmpi.b	#$10,9(a5)
00077902 6500                       		bcs.s	@updatpsg
00077904 0895 0007                  		bclr	#7,(a5)
00077908 6000                       		bra.s	@nopsg
0007790A                            ; ---------------------------------------------------------------------------
0007790A                            
0007790A                            @updatpsg:
0007790A 1C2D 0009                  		move.b	9(a5),d6
0007790E 4EBA 0000                  		jsr	SetPSGVolume(pc)
00077912                            
00077912                            @nopsg:
00077912 DAFC 0030                  		adda.w	#$30,a5
00077916 51CF FFDC                  		dbf	d7,@looppsg
0007791A 4E75                       		rts
0007791C                            ; End of function DoFadeOut
0007791C                            
0007791C                            
0007791C                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0007791C                            
0007791C                            ; sub_7256A:
0007791C                            FMSilenceAll:
0007791C 7602                       		moveq	#2,d3		; 3 FM channels for each YM2612 parts
0007791E 7028                       		moveq	#$28,d0		; FM key on/off register
00077920                            ; loc_7256E:
00077920                            @noteoffloop:
00077920 1203                       		move.b	d3,d1
00077922 4EBA 0000                  		jsr	WriteFMI(pc)
00077926 5801                       		addq.b	#4,d1		; Move to YM2612 part 1
00077928 4EBA 0000                  		jsr	WriteFMI(pc)
0007792C 51CB FFF2                  		dbf	d3,@noteoffloop
00077930                            
00077930 7040                       		moveq	#$40,d0		; Set TL on FM channels...
00077932 727F                       		moveq	#$7F,d1		; ... to total attenuation...
00077934 7802                       		moveq	#2,d4		; ... for all 3 channels...
00077936                            ; loc_72584:
00077936                            @channelloop:
00077936 7603                       		moveq	#3,d3		; ... for all operators on each channel...
00077938                            ; loc_72586:
00077938                            @channeltlloop:
00077938 4EBA 0000                  		jsr	WriteFMI(pc)	; ... for part 0...
0007793C 4EBA 0000                  		jsr	WriteFMII(pc)	; ... and part 1.
00077940 5840                       		addq.w	#4,d0		; Next TL operator
00077942 51CB FFF4                  		dbf	d3,@channeltlloop
00077946                            
00077946 0400 000F                  		subi.b	#$F,d0		; Move to TL operator 1 of next channel
0007794A 51CC FFEA                  		dbf	d4,@channelloop
0007794E                            
0007794E 4E75                       		rts	
00077950                            ; End of function FMSilenceAll
00077950                            
00077950                            ; ===========================================================================
00077950                            ; ---------------------------------------------------------------------------
00077950                            ; Stop music
00077950                            ; ---------------------------------------------------------------------------
00077950                            ; Sound_E4: StopSoundAndMusic:
00077950                            StopAllSound:
00077950                            	;	moveq	#$2B,d0		; Enable/disable DAC
00077950 123C 0080                  		move.b	#$80,d1		; Enable DAC
00077954 4EBA 0000                  		jsr	WriteFMI(pc)
00077958 7027                       		moveq	#$27,d0		; Timers, FM3/FM6 mode
0007795A 7200                       		moveq	#0,d1		; FM3/FM6 normal mode, disable timers
0007795C 4EBA 0000                  		jsr	WriteFMI(pc)
00077960 204E                       		movea.l	a6,a0
00077962                            		; DANGER! This should be clearing all variables and track data, but misses the last $10 bytes of v_spcsfx_psg3_track.
00077962                            		; Remove the '-$10' to fix this.
00077962 303C 00E3                  		move.w	#((v_spcsfx_track_ram_end-v_startofvariables-$10)/4)-1,d0	; Clear $390 bytes: all variables and most track data
00077966                            ; loc_725B6:
00077966                            @clearramloop:
00077966 4298                       		clr.l	(a0)+
00077968 51C8 FFFC                  		dbf	d0,@clearramloop
0007796C                            
0007796C 1D7C 0080 0009             		move.b	#$80,v_sound_id(a6)	; set music to $80 (silence)
00077972 4EBA FFA8                  		jsr	FMSilenceAll(pc)
00077976 6000 0000                  		bra.w	PSGSilenceAll
0007797A                            
0007797A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
0007797A                            
0007797A                            ; sub_725CA:
0007797A                            InitMusicPlayback:
0007797A 204E                       		movea.l	a6,a0
0007797C                            		; Save several values
0007797C 122E 0000                  		move.b	v_sndprio(a6),d1
00077980 142E 0027                  		move.b	f_1up_playing(a6),d2
00077984 162E 002A                  		move.b	f_speedup(a6),d3
00077988 182E 0026                  		move.b	v_fadein_counter(a6),d4
0007798C                            		; DANGER! Only v_soundqueue0 and v_soundqueue1 are backed up, once again breaking v_soundqueue2
0007798C 3A2E 000A                  		move.w	v_soundqueue0(a6),d5
00077990 303C 0087                  		move.w	#((v_music_track_ram_end-v_startofvariables)/4)-1,d0	; Clear $220 bytes: all variables and music track data
00077994                            ; loc_725E4:
00077994                            @clearramloop:
00077994 4298                       		clr.l	(a0)+
00077996 51C8 FFFC                  		dbf	d0,@clearramloop
0007799A                            
0007799A                            		; Restore the values saved above
0007799A 1D41 0000                  		move.b	d1,v_sndprio(a6)
0007799E 1D42 0027                  		move.b	d2,f_1up_playing(a6)
000779A2 1D43 002A                  		move.b	d3,f_speedup(a6)
000779A6 1D44 0026                  		move.b	d4,v_fadein_counter(a6)
000779AA 3D45 000A                  		move.w	d5,v_soundqueue0(a6)
000779AE 1D7C 0080 0009             		move.b	#$80,v_sound_id(a6)	; set music to $80 (silence)
000779B4                            		; DANGER! This silences ALL channels, even the ones being used
000779B4                            		; by SFX, and not music! @sendfmnoteoff does this already, and
000779B4                            		; doesn't affect SFX channels, either.
000779B4                            		; This should be replaced with an 'rts'.
000779B4 4EBA FF66                  		jsr	FMSilenceAll(pc)
000779B8 6000 0000                  		bra.w	PSGSilenceAll
000779BC                            		; DANGER! InitMusicPlayback, and Sound_PlayBGM for that matter,
000779BC                            		; don't do a very good job of setting up the music tracks.
000779BC                            		; Tracks that aren't defined in a music file's header don't have
000779BC                            		; their channels defined, meaning @sendfmnoteoff won't silence
000779BC                            		; hardware properly. In combination with removing the above
000779BC                            		; calls to FMSilenceAll/PSGSilenceAll, this will cause hanging
000779BC                            		; notes.
000779BC                            		; To fix this, I suggest using this code, instead of an 'rts':
000779BC                            		;lea	v_music_track_ram+TrackVoiceControl(a6),a1
000779BC                            		;lea	FMDACInitBytes(pc),a2
000779BC                            		;moveq	#((v_music_fmdac_tracks_end-v_music_fmdac_tracks)/TrackSz)-1,d1		; 7 DAC/FM tracks
000779BC                            		;bsr.s	@writeloop
000779BC                            		;lea	PSGInitBytes(pc),a2
000779BC                            		;moveq	#((v_music_psg_tracks_end-v_music_psg_tracks)/TrackSz)-1,d1	; 3 PSG tracks
000779BC                            
000779BC                            ;@writeloop:
000779BC                            		;move.b	(a2)+,(a1)		; Write track's channel byte
000779BC                            		;lea	TrackSz(a1),a1		; Next track
000779BC                            		;dbf	d1,@writeloop		; Loop for all DAC/FM/PSG tracks
000779BC                            
000779BC                            		;rts
000779BC                            	
000779BC                            ; End of function InitMusicPlayback
000779BC                            
000779BC                            
000779BC                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
000779BC                            
000779BC                            ; sub_7260C:
000779BC                            TempoWait:
000779BC 1D6E 0002 0001             		move.b	v_main_tempo(a6),v_main_tempo_timeout(a6)	; Reset main tempo timeout
000779C2 41EE 004E                  		lea	v_music_track_ram+TrackDurationTimeout(a6),a0	; note timeout
000779C6 7030                       		moveq	#TrackSz,d0
000779C8 7209                       		moveq	#((v_music_track_ram_end-v_music_track_ram)/TrackSz)-1,d1		; 1 DAC + 6 FM + 3 PSG tracks
000779CA                            ; loc_7261A:
000779CA                            @tempoloop:
000779CA 5210                       		addq.b	#1,(a0)	; Delay note by 1 frame
000779CC D0C0                       		adda.w	d0,a0	; Advance to next track
000779CE 51C9 FFFA                  		dbf	d1,@tempoloop
000779D2                            
000779D2 4E75                       		rts	
000779D4                            ; End of function TempoWait
000779D4                            
000779D4                            ; ===========================================================================
000779D4                            ; ---------------------------------------------------------------------------
000779D4                            ; Speed	up music
000779D4                            ; ---------------------------------------------------------------------------
000779D4                            ; Sound_E2:
000779D4                            SpeedUpMusic:
000779D4 4A2E 0027                  		tst.b	f_1up_playing(a6)
000779D8 6600                       		bne.s	@speedup_1up
000779DA 1D6E 0029 0002             		move.b	v_speeduptempo(a6),v_main_tempo(a6)
000779E0 1D6E 0029 0001             		move.b	v_speeduptempo(a6),v_main_tempo_timeout(a6)
000779E6 1D7C 0080 002A             		move.b	#$80,f_speedup(a6)
000779EC 4E75                       		rts	
000779EE                            ; ===========================================================================
000779EE                            ; loc_7263E:
000779EE                            @speedup_1up:
000779EE 1D6E 03C9 03A2             		move.b	v_1up_ram_copy+v_speeduptempo(a6),v_1up_ram_copy+v_main_tempo(a6)
000779F4 1D6E 03C9 03A1             		move.b	v_1up_ram_copy+v_speeduptempo(a6),v_1up_ram_copy+v_main_tempo_timeout(a6)
000779FA 1D7C 0080 03CA             		move.b	#$80,v_1up_ram_copy+f_speedup(a6)
00077A00 4E75                       		rts	
00077A02                            ; ===========================================================================
00077A02                            ; ---------------------------------------------------------------------------
00077A02                            ; Change music back to normal speed
00077A02                            ; ---------------------------------------------------------------------------
00077A02                            ; Sound_E3:
00077A02                            SlowDownMusic:
00077A02 4A2E 0027                  		tst.b	f_1up_playing(a6)
00077A06 6600                       		bne.s	@slowdown_1up
00077A08 1D6E 0028 0002             		move.b	v_tempo_mod(a6),v_main_tempo(a6)
00077A0E 1D6E 0028 0001             		move.b	v_tempo_mod(a6),v_main_tempo_timeout(a6)
00077A14 422E 002A                  		clr.b	f_speedup(a6)
00077A18 4E75                       		rts	
00077A1A                            ; ===========================================================================
00077A1A                            ; loc_7266A:
00077A1A                            @slowdown_1up:
00077A1A 1D6E 03C8 03A2             		move.b	v_1up_ram_copy+v_tempo_mod(a6),v_1up_ram_copy+v_main_tempo(a6)
00077A20 1D6E 03C8 03A1             		move.b	v_1up_ram_copy+v_tempo_mod(a6),v_1up_ram_copy+v_main_tempo_timeout(a6)
00077A26 422E 03CA                  		clr.b	v_1up_ram_copy+f_speedup(a6)
00077A2A 4E75                       		rts	
00077A2C                            
00077A2C                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00077A2C                            
00077A2C                            ; sub_7267C:
00077A2C                            DoFadeIn:
00077A2C 4A2E 0025                  		tst.b	v_fadein_delay(a6)	; Has fadein delay expired?
00077A30 6700                       		beq.s	@continuefade		; Branch if yes
00077A32 532E 0025                  		subq.b	#1,v_fadein_delay(a6)
00077A36 4E75                       		rts	
00077A38                            ; ===========================================================================
00077A38                            ; loc_72688:
00077A38                            @continuefade:
00077A38 4A2E 0026                  		tst.b	v_fadein_counter(a6)	; Is fade done?
00077A3C 6700                       		beq.s	@fadedone		; Branch if yes
00077A3E 532E 0026                  		subq.b	#1,v_fadein_counter(a6)	; Update fade counter
00077A42 1D7C 0002 0025             		move.b	#2,v_fadein_delay(a6)	; Reset fade delay
00077A48 4BEE 0070                  		lea	v_music_fm_tracks(a6),a5
00077A4C 7E05                       		moveq	#((v_music_fm_tracks_end-v_music_fm_tracks)/TrackSz)-1,d7	; 6 FM tracks
00077A4E                            ; loc_7269E:
00077A4E                            @fmloop:
00077A4E 4A15                       		tst.b	(a5)			; Is track playing? (TrackPlaybackControl)
00077A50 6A00                       		bpl.s	@nextfm			; Branch if not
00077A52 532D 0009                  		subq.b	#1,TrackVolume(a5)	; Reduce volume attenuation
00077A56 4EBA 0000                  		jsr	SendVoiceTL(pc)
00077A5A                            ; loc_726AA:
00077A5A                            @nextfm:
00077A5A DAFC 0030                  		adda.w	#TrackSz,a5
00077A5E 51CF FFEE                  		dbf	d7,@fmloop
00077A62 7E02                       		moveq	#((v_music_psg_tracks_end-v_music_psg_tracks)/TrackSz)-1,d7		; 3 PSG tracks
00077A64                            ; loc_726B4:
00077A64                            @psgloop:
00077A64 4A15                       		tst.b	(a5)			; Is track playing? (TrackPlaybackControl)
00077A66 6A00                       		bpl.s	@nextpsg		; Branch if not
00077A68 532D 0009                  		subq.b	#1,TrackVolume(a5)	; Reduce volume attenuation
00077A6C 1C2D 0009                  		move.b	TrackVolume(a5),d6	; Get value
00077A70 0C06 0010                  		cmpi.b	#$10,d6			; Is it is < $10?
00077A74 6500                       		blo.s	@sendpsgvol		; Branch if yes
00077A76 7C0F                       		moveq	#$F,d6			; Limit to $F (maximum attenuation)
00077A78                            ; loc_726C8:
00077A78                            @sendpsgvol:
00077A78 4EBA 0000                  		jsr	SetPSGVolume(pc)
00077A7C                            ; loc_726CC:
00077A7C                            @nextpsg:
00077A7C DAFC 0030                  		adda.w	#TrackSz,a5
00077A80 51CF FFE2                  		dbf	d7,@psgloop
00077A84 4E75                       		rts	
00077A86                            ; ===========================================================================
00077A86                            ; loc_726D6:
00077A86                            @fadedone:
00077A86 08AE 0002 0040             		bclr	#2,v_music_dac_track+TrackPlaybackControl(a6)	; Clear 'SFX overriding' bit
00077A8C 422E 0024                  		clr.b	f_fadein_flag(a6)				; Stop fadein
00077A90 4E75                       		rts	
00077A92                            ; End of function DoFadeIn
00077A92                            
00077A92                            ; ===========================================================================
00077A92                            ; loc_726E2:
00077A92                            FMNoteOn:
00077A92 0815 0001                  		btst	#1,(a5)		; Is track resting? (TrackPlaybackControl)
00077A96 6600                       		bne.s	@locret		; Return if so
00077A98 0815 0002                  		btst	#2,(a5)		; Is track being overridden? (TrackPlaybackControl)
00077A9C 6600                       		bne.s	@locret		; Return if so
00077A9E 7028                       		moveq	#$28,d0		; Note on/off register
00077AA0 122D 0001                  		move.b	TrackVoiceControl(a5),d1 ; Get channel bits
00077AA4 0001 00F0                  		ori.b	#$F0,d1		; Note on on all operators
00077AA8 6000 0000                  		bra.w	WriteFMI
00077AAC                            ; ===========================================================================
00077AAC                            ; locret_726FC:
00077AAC                            @locret:
00077AAC 4E75                       		rts	
00077AAE                            
00077AAE                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00077AAE                            
00077AAE                            ; sub_726FE:
00077AAE                            FMNoteOff:
00077AAE 0815 0004                  		btst	#4,(a5)		; Is 'do not attack next note' set? (TrackPlaybackControl)
00077AB2 6600                       		bne.s	locret_72714	; Return if yes
00077AB4 0815 0002                  		btst	#2,(a5)		; Is SFX overriding? (TrackPlaybackControl)
00077AB8 6600                       		bne.s	locret_72714	; Return if yes
00077ABA                            ; loc_7270A:
00077ABA                            SendFMNoteOff:
00077ABA 7028                       		moveq	#$28,d0		; Note on/off register
00077ABC 122D 0001                  		move.b	TrackVoiceControl(a5),d1 ; Note off to this channel
00077AC0 6000 0000                  		bra.w	WriteFMI
00077AC4                            ; ===========================================================================
00077AC4                            
00077AC4                            locret_72714:
00077AC4 4E75                       		rts	
00077AC6                            ; End of function FMNoteOff
00077AC6                            
00077AC6                            ; ===========================================================================
00077AC6                            ; loc_72716:
00077AC6                            WriteFMIorIIMain:
00077AC6 0815 0002                  		btst	#2,(a5)		; Is track being overriden by sfx? (TrackPlaybackControl)
00077ACA 6600                       		bne.s	@locret		; Return if yes
00077ACC 6000 0000                  		bra.w	WriteFMIorII
00077AD0                            ; ===========================================================================
00077AD0                            ; locret_72720:
00077AD0                            @locret:
00077AD0 4E75                       		rts	
00077AD2                            
00077AD2                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00077AD2                            
00077AD2                            ; sub_72722:
00077AD2                            WriteFMIorII:
00077AD2 082D 0002 0001             		btst	#2,TrackVoiceControl(a5)	; Is this bound for part I or II?
00077AD8 6600                       		bne.s	WriteFMIIPart			; Branch if for part II
00077ADA D02D 0001                  		add.b	TrackVoiceControl(a5),d0	; Add in voice control bits
00077ADE                            ; End of function WriteFMIorII
00077ADE                            
00077ADE                            
00077ADE                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00077ADE                            
00077ADE                            ; The reason I think this is an *early* SMPS 68k Type 1b
00077ADE                            ; is because this subroutine is the one from Type 1a:
00077ADE                            ; other Type 1b drivers have a newer, optimised version.
00077ADE                            ; The driver itself is Type 1b, with this odd exception.
00077ADE                            
00077ADE                            ; sub_7272E:
00077ADE                            WriteFMI:
00077ADE 1439 00A0 4000             		move.b	(ym2612_a0).l,d2
00077AE4 0802 0007                  		btst	#7,d2		; Is FM busy?
00077AE8 66F4                       		bne.s	WriteFMI	; Loop if so
00077AEA 13C0 00A0 4000             		move.b	d0,(ym2612_a0).l
00077AF0 4E71                       		nop	
00077AF2 4E71                       		nop	
00077AF4 4E71                       		nop	
00077AF6                            ; loc_72746:
00077AF6                            @waitloop:
00077AF6 1439 00A0 4000             		move.b	(ym2612_a0).l,d2
00077AFC 0802 0007                  		btst	#7,d2		; Is FM busy?
00077B00 66F4                       		bne.s	@waitloop	; Loop if so
00077B02                            
00077B02 13C1 00A0 4001             		move.b	d1,(ym2612_d0).l
00077B08 4E75                       		rts	
00077B0A                            ; End of function WriteFMI
00077B0A                            
00077B0A                            ; ===========================================================================
00077B0A                            ; loc_7275A:
00077B0A                            WriteFMIIPart:
00077B0A 142D 0001                  		move.b	TrackVoiceControl(a5),d2 ; Get voice control bits
00077B0E 0882 0002                  		bclr	#2,d2			; Clear chip toggle
00077B12 D002                       		add.b	d2,d0			; Add in to destination register
00077B14                            
00077B14                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00077B14                            
00077B14                            ; sub_72764:
00077B14                            WriteFMII:
00077B14 1439 00A0 4000             		move.b	(ym2612_a0).l,d2
00077B1A 0802 0007                  		btst	#7,d2		; Is FM busy?
00077B1E 66F4                       		bne.s	WriteFMII	; Loop if so
00077B20 13C0 00A0 4002             		move.b	d0,(ym2612_a1).l
00077B26 4E71                       		nop	
00077B28 4E71                       		nop	
00077B2A 4E71                       		nop	
00077B2C                            ; loc_7277C:
00077B2C                            @waitloop:
00077B2C 1439 00A0 4000             		move.b	(ym2612_a0).l,d2
00077B32 0802 0007                  		btst	#7,d2		; Is FM busy?
00077B36 66F4                       		bne.s	@waitloop	; Loop if so
00077B38                            
00077B38 13C1 00A0 4003             		move.b	d1,(ym2612_d1).l
00077B3E 4E75                       		rts	
00077B40                            ; End of function WriteFMII
00077B40                            
00077B40                            ; ===========================================================================
00077B40                            ; ---------------------------------------------------------------------------
00077B40                            ; FM Note Values: b-0 to a#8
00077B40                            ; ---------------------------------------------------------------------------
00077B40                            ; word_72790: FM_Notes:
00077B40                            FMFrequencies:
00077B40 025E 0284 02AB 02D3 02FE+  	dc.w $025E,$0284,$02AB,$02D3,$02FE,$032D,$035C,$038F,$03C5,$03FF,$043C,$047C
00077B58 0A5E 0A84 0AAB 0AD3 0AFE+  	dc.w $0A5E,$0A84,$0AAB,$0AD3,$0AFE,$0B2D,$0B5C,$0B8F,$0BC5,$0BFF,$0C3C,$0C7C
00077B70 125E 1284 12AB 12D3 12FE+  	dc.w $125E,$1284,$12AB,$12D3,$12FE,$132D,$135C,$138F,$13C5,$13FF,$143C,$147C
00077B88 1A5E 1A84 1AAB 1AD3 1AFE+  	dc.w $1A5E,$1A84,$1AAB,$1AD3,$1AFE,$1B2D,$1B5C,$1B8F,$1BC5,$1BFF,$1C3C,$1C7C
00077BA0 225E 2284 22AB 22D3 22FE+  	dc.w $225E,$2284,$22AB,$22D3,$22FE,$232D,$235C,$238F,$23C5,$23FF,$243C,$247C
00077BB8 2A5E 2A84 2AAB 2AD3 2AFE+  	dc.w $2A5E,$2A84,$2AAB,$2AD3,$2AFE,$2B2D,$2B5C,$2B8F,$2BC5,$2BFF,$2C3C,$2C7C
00077BD0 325E 3284 32AB 32D3 32FE+  	dc.w $325E,$3284,$32AB,$32D3,$32FE,$332D,$335C,$338F,$33C5,$33FF,$343C,$347C
00077BE8 3A5E 3A84 3AAB 3AD3 3AFE+  	dc.w $3A5E,$3A84,$3AAB,$3AD3,$3AFE,$3B2D,$3B5C,$3B8F,$3BC5,$3BFF,$3C3C,$3C7C
00077C00                            
00077C00                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00077C00                            
00077C00                            ; sub_72850:
00077C00                            PSGUpdateTrack:
00077C00 532D 000E                  		subq.b	#1,TrackDurationTimeout(a5)	; Update note timeout
00077C04 6600                       		bne.s	@notegoing
00077C06 0895 0004                  		bclr	#4,(a5)				; Clear 'do not attack note' bit (TrackPlaybackControl)
00077C0A 4EBA 0000                  		jsr	PSGDoNext(pc)
00077C0E 4EBA 0000                  		jsr	PSGDoNoteOn(pc)
00077C12 6000 0000                  		bra.w	PSGDoVolFX
00077C16                            ; ===========================================================================
00077C16                            ; loc_72866:
00077C16                            @notegoing:
00077C16 4EBA F53A                  		jsr	NoteTimeoutUpdate(pc)
00077C1A 4EBA 0000                  		jsr	PSGUpdateVolFX(pc)
00077C1E 4EBA F55A                  		jsr	DoModulation(pc)
00077C22 4EBA 0000                  		jsr	PSGUpdateFreq(pc)	; It would be better if this were a jmp and the rts was removed
00077C26 4E75                       		rts
00077C28                            ; End of function PSGUpdateTrack
00077C28                            
00077C28                            
00077C28                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00077C28                            
00077C28                            ; sub_72878:
00077C28                            PSGDoNext:
00077C28 0895 0001                  		bclr	#1,(a5)				; Clear 'track at rest' bit (TrackPlaybackControl)
00077C2C 286D 0004                  		movea.l	TrackDataPointer(a5),a4	; Get track data pointer
00077C30                            ; loc_72880:
00077C30                            @noteloop:
00077C30 7A00                       		moveq	#0,d5
00077C32 1A1C                       		move.b	(a4)+,d5	; Get byte from track
00077C34 0C05 00E0                  		cmpi.b	#$E0,d5		; Is it a coord. flag?
00077C38 6500                       		blo.s	@gotnote	; Branch if not
00077C3A 4EBA 0000                  		jsr	CoordFlag(pc)
00077C3E 60F0                       		bra.s	@noteloop
00077C40                            ; ===========================================================================
00077C40                            ; loc_72890:
00077C40                            @gotnote:
00077C40 4A05                       		tst.b	d5		; Is it a note?
00077C42 6A00                       		bpl.s	@gotduration	; Branch if not
00077C44 4EBA 0000                  		jsr	PSGSetFreq(pc)
00077C48 1A1C                       		move.b	(a4)+,d5	; Get another byte
00077C4A 4A05                       		tst.b	d5		; Is it a duration?
00077C4C 6A00                       		bpl.s	@gotduration	; Branch if yes
00077C4E 534C                       		subq.w	#1,a4		; Put byte back
00077C50 6000 F4C2                  		bra.w	FinishTrackUpdate
00077C54                            ; ===========================================================================
00077C54                            ; loc_728A4:
00077C54                            @gotduration:
00077C54 4EBA F49E                  		jsr	SetDuration(pc)
00077C58 6000 F4BA                  		bra.w	FinishTrackUpdate
00077C5C                            ; End of function PSGDoNext
00077C5C                            
00077C5C                            
00077C5C                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00077C5C                            
00077C5C                            ; sub_728AC:
00077C5C                            PSGSetFreq:
00077C5C 0405 0081                  		subi.b	#$81,d5		; Convert to 0-based index
00077C60 6500                       		blo.s	@restpsg	; If $80, put track at rest
00077C62 DA2D 0008                  		add.b	TrackTranspose(a5),d5 ; Add in channel transposition
00077C66 0245 007F                  		andi.w	#$7F,d5		; Clear high byte and sign bit
00077C6A E34D                       		lsl.w	#1,d5
00077C6C 41FA 0000                  		lea	PSGFrequencies(pc),a0
00077C70 3B70 5000 0010             		move.w	(a0,d5.w),TrackFreq(a5)	; Set new frequency
00077C76 6000 F49C                  		bra.w	FinishTrackUpdate
00077C7A                            ; ===========================================================================
00077C7A                            ; loc_728CA:
00077C7A                            @restpsg:
00077C7A 08D5 0001                  		bset	#1,(a5)			; Set 'track at rest' bit (TrackPlaybackControl)
00077C7E 3B7C FFFF 0010             		move.w	#-1,TrackFreq(a5)	; Invalidate note frequency
00077C84 4EBA F48E                  		jsr	FinishTrackUpdate(pc)
00077C88 6000 0000                  		bra.w	PSGNoteOff
00077C8C                            ; End of function PSGSetFreq
00077C8C                            
00077C8C                            
00077C8C                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00077C8C                            
00077C8C                            ; sub_728DC:
00077C8C                            PSGDoNoteOn:
00077C8C 3C2D 0010                  		move.w	TrackFreq(a5),d6	; Get note frequency
00077C90 6B00                       		bmi.s	PSGSetRest		; If invalid, branch
00077C92                            ; End of function PSGDoNoteOn
00077C92                            
00077C92                            
00077C92                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00077C92                            
00077C92                            ; sub_728E2:
00077C92                            PSGUpdateFreq:
00077C92 102D 001E                  		move.b	TrackDetune(a5),d0	; Get detune value
00077C96 4880                       		ext.w	d0
00077C98 DC40                       		add.w	d0,d6		; Add to frequency
00077C9A 0815 0002                  		btst	#2,(a5)		; Is track being overridden? (TrackPlaybackControl)
00077C9E 6600                       		bne.s	@locret		; Return if yes
00077CA0 0815 0001                  		btst	#1,(a5)		; Is track at rest? (TrackPlaybackControl)
00077CA4 6600                       		bne.s	@locret		; Return if yes
00077CA6 102D 0001                  		move.b	TrackVoiceControl(a5),d0 ; Get channel bits
00077CAA 0C00 00E0                  		cmpi.b	#$E0,d0		; Is it a noise channel?
00077CAE 6600                       		bne.s	@notnoise	; Branch if not
00077CB0 103C 00C0                  		move.b	#$C0,d0		; Use PSG 3 channel bits
00077CB4                            ; loc_72904:
00077CB4                            @notnoise:
00077CB4 3206                       		move.w	d6,d1
00077CB6 0201 000F                  		andi.b	#$F,d1		; Low nibble of frequency
00077CBA 8001                       		or.b	d1,d0		; Latch tone data to channel
00077CBC E84E                       		lsr.w	#4,d6		; Get upper 6 bits of frequency
00077CBE 0206 003F                  		andi.b	#$3F,d6		; Send to latched channel
00077CC2 13C0 00C0 0011             		move.b	d0,(psg_input).l
00077CC8 13C6 00C0 0011             		move.b	d6,(psg_input).l
00077CCE                            ; locret_7291E:
00077CCE                            @locret:
00077CCE 4E75                       		rts	
00077CD0                            ; End of function PSGUpdateFreq
00077CD0                            
00077CD0                            ; ===========================================================================
00077CD0                            ; loc_72920:
00077CD0                            PSGSetRest:
00077CD0 08D5 0001                  		bset	#1,(a5)	; Set 'track at rest' bit (TrackPlaybackControl)
00077CD4 4E75                       		rts	
00077CD6                            
00077CD6                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00077CD6                            
00077CD6                            ; sub_72926:
00077CD6                            PSGUpdateVolFX:
00077CD6 4A2D 000B                  		tst.b	TrackVoiceIndex(a5)	; Test PSG tone
00077CDA 6700 0000                  		beq.w	locret_7298A		; Return if it is zero
00077CDE                            ; loc_7292E:
00077CDE                            PSGDoVolFX:	; This can actually be made a bit more efficient, see the comments for more
00077CDE 1C2D 0009                  		move.b	TrackVolume(a5),d6	; Get volume
00077CE2 7000                       		moveq	#0,d0
00077CE4 102D 000B                  		move.b	TrackVoiceIndex(a5),d0	; Get PSG tone
00077CE8 6700                       		beq.s	SetPSGVolume
00077CEA 2079 0007 6D4C             		movea.l	(Go_PSGIndex).l,a0
00077CF0 5340                       		subq.w	#1,d0
00077CF2 E548                       		lsl.w	#2,d0
00077CF4 2070 0000                  		movea.l	(a0,d0.w),a0
00077CF8 102D 000C                  		move.b	TrackVolEnvIndex(a5),d0	; Get volume envelope index		; move.b	TrackVolEnvIndex(a5),d0
00077CFC 1030 0000                  		move.b	(a0,d0.w),d0			; Volume envelope value			; addq.b	#1,TrackVolEnvIndex(a5)
00077D00 522D 000C                  		addq.b	#1,TrackVolEnvIndex(a5)	; Increment volume envelope index	; move.b	(a0,d0.w),d0
00077D04 0800 0007                  		btst	#7,d0				; Is volume envelope value negative?	; <-- makes this line redundant
00077D08 6700                       		beq.s	@gotflutter			; Branch if not				; but you gotta make this one a bpl
00077D0A 0C00 0080                  		cmpi.b	#$80,d0				; Is it the terminator?			; Since this is the only check, you can take the optimisation a step further:
00077D0E 6700                       		beq.s	VolEnvHold			; If so, branch				; Change the previous beq (bpl) to a bmi and make it branch to VolEnvHold to make these last two lines redundant
00077D10                            ; loc_72960:
00077D10                            @gotflutter:
00077D10 DC40                       		add.w	d0,d6		; Add volume envelope value to volume
00077D12 0C06 0010                  		cmpi.b	#$10,d6		; Is volume $10 or higher?
00077D16 6500                       		blo.s	SetPSGVolume	; Branch if not
00077D18 7C0F                       		moveq	#$F,d6		; Limit to silence and fall through
00077D1A                            ; End of function PSGUpdateVolFX
00077D1A                            
00077D1A                            
00077D1A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00077D1A                            
00077D1A                            ; sub_7296A:
00077D1A                            SetPSGVolume:
00077D1A 0815 0001                  		btst	#1,(a5)		; Is track at rest? (TrackPlaybackControl)
00077D1E 6600                       		bne.s	locret_7298A	; Return if so
00077D20 0815 0002                  		btst	#2,(a5)		; Is SFX overriding? (TrackPlaybackControl)
00077D24 6600                       		bne.s	locret_7298A	; Return if so
00077D26 0815 0004                  		btst	#4,(a5)		; Is track set to not attack next note? (TrackPlaybackControl)
00077D2A 6600                       		bne.s	PSGCheckNoteTimeout ; Branch if yes
00077D2C                            ; loc_7297C:
00077D2C                            PSGSendVolume:
00077D2C 8C2D 0001                  		or.b	TrackVoiceControl(a5),d6 ; Add in track selector bits
00077D30 0606 0010                  		addi.b	#$10,d6			; Mark it as a volume command
00077D34 13C6 00C0 0011             		move.b	d6,(psg_input).l
00077D3A                            
00077D3A                            locret_7298A:
00077D3A 4E75                       		rts	
00077D3C                            ; ===========================================================================
00077D3C                            ; loc_7298C: PSGCheckNoteFill:
00077D3C                            PSGCheckNoteTimeout:
00077D3C 4A2D 0013                  		tst.b	TrackNoteTimeoutMaster(a5)	; Is note timeout on?
00077D40 67EA                       		beq.s	PSGSendVolume			; Branch if not
00077D42 4A2D 0012                  		tst.b	TrackNoteTimeout(a5)		; Has note timeout expired?
00077D46 66E4                       		bne.s	PSGSendVolume			; Branch if not
00077D48 4E75                       		rts	
00077D4A                            ; End of function SetPSGVolume
00077D4A                            
00077D4A                            ; ===========================================================================
00077D4A                            ; loc_7299A: FlutterDone:
00077D4A                            VolEnvHold:
00077D4A 532D 000C                  		subq.b	#1,TrackVolEnvIndex(a5)	; Decrement volume envelope index
00077D4E 4E75                       		rts	
00077D50                            
00077D50                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00077D50                            
00077D50                            ; sub_729A0:
00077D50                            PSGNoteOff:
00077D50 0815 0002                  		btst	#2,(a5)		; Is SFX overriding? (TrackPlaybackControl)
00077D54 6600                       		bne.s	locret_729B4	; Return if so
00077D56                            ; loc_729A6:
00077D56                            SendPSGNoteOff:
00077D56 102D 0001                  		move.b	TrackVoiceControl(a5),d0	; PSG channel to change
00077D5A 0000 001F                  		ori.b	#$1F,d0				; Maximum volume attenuation
00077D5E 13C0 00C0 0011             		move.b	d0,(psg_input).l
00077D64                            		; DANGER! If InitMusicPlayback doesn't silence all channels, there's the
00077D64                            		; risk of music accidentally playing noise because it can't detect if
00077D64                            		; the PSG4/noise channel needs muting on track initialisation.
00077D64                            		; S&K's driver fixes it by doing this:
00077D64                            		;cmpi.b	#$DF,d0				; Are stopping PSG3?
00077D64                            		;bne.s	locret_729B4
00077D64                            		;move.b	#$FF,(psg_input).l		; If so, stop noise channel while we're at it
00077D64                            
00077D64                            locret_729B4:
00077D64 4E75                       		rts	
00077D66                            ; End of function PSGNoteOff
00077D66                            
00077D66                            
00077D66                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00077D66                            
00077D66                            ; sub_729B6:
00077D66                            PSGSilenceAll:
00077D66 41F9 00C0 0011             		lea	(psg_input).l,a0
00077D6C 10BC 009F                  		move.b	#$9F,(a0)	; Silence PSG 1
00077D70 10BC 00BF                  		move.b	#$BF,(a0)	; Silence PSG 2
00077D74 10BC 00DF                  		move.b	#$DF,(a0)	; Silence PSG 3
00077D78 10BC 00FF                  		move.b	#$FF,(a0)	; Silence noise channel
00077D7C 4E75                       		rts	
00077D7E                            ; End of function PSGSilenceAll
00077D7E                            
00077D7E                            ; ===========================================================================
00077D7E                            ; word_729CE:
00077D7E                            PSGFrequencies:
00077D7E 0356 0326 02F9 02CE 02A5+  		dc.w $356, $326, $2F9, $2CE, $2A5, $280, $25C, $23A
00077D8E 021A 01FB 01DF 01C4 01AB+  		dc.w $21A, $1FB, $1DF, $1C4, $1AB, $193, $17D, $167
00077D9E 0153 0140 012E 011D 010D+  		dc.w $153, $140, $12E, $11D, $10D,  $FE,  $EF,  $E2
00077DAE 00D6 00C9 00BE 00B4 00A9+  		dc.w  $D6,  $C9,  $BE,  $B4,  $A9,  $A0,  $97,  $8F
00077DBE 0087 007F 0078 0071 006B+  		dc.w  $87,  $7F,  $78,  $71,  $6B,  $65,  $5F,  $5A
00077DCE 0055 0050 004B 0047 0043+  		dc.w  $55,  $50,  $4B,  $47,  $43,  $40,  $3C,  $39
00077DDE 0036 0033 0030 002D 002B+  		dc.w  $36,  $33,  $30,  $2D,  $2B,  $28,  $26,  $24
00077DEE 0022 0020 001F 001D 001B+  		dc.w  $22,  $20,  $1F,  $1D,  $1B,  $1A,  $18,  $17
00077DFE 0016 0015 0013 0012 0011+  		dc.w  $16,  $15,  $13,  $12,  $11,    0
00077E0A                            
00077E0A                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00077E0A                            
00077E0A                            ; sub_72A5A:
00077E0A                            CoordFlag:
00077E0A 0445 00E0                  		subi.w	#$E0,d5
00077E0E E54D                       		lsl.w	#2,d5
00077E10 4EFB 5000                  		jmp	coordflagLookup(pc,d5.w)
00077E14                            ; End of function CoordFlag
00077E14                            
00077E14                            ; ===========================================================================
00077E14                            ; loc_72A64:
00077E14                            coordflagLookup:
00077E14 6000 0000                  		bra.w	cfPanningAMSFMS		; $E0
00077E18                            ; ===========================================================================
00077E18 6000 0000                  		bra.w	cfDetune		; $E1
00077E1C                            ; ===========================================================================
00077E1C 6000 0000                  		bra.w	cfSetCommunication	; $E2
00077E20                            ; ===========================================================================
00077E20 6000 0000                  		bra.w	cfJumpReturn		; $E3
00077E24                            ; ===========================================================================
00077E24 6000 0000                  		bra.w	cfFadeInToPrevious	; $E4
00077E28                            ; ===========================================================================
00077E28 6000 0000                  		bra.w	cfSetTempoDivider	; $E5
00077E2C                            ; ===========================================================================
00077E2C 6000 0000                  		bra.w	cfChangeFMVolume	; $E6
00077E30                            ; ===========================================================================
00077E30 6000 0000                  		bra.w	cfHoldNote		; $E7
00077E34                            ; ===========================================================================
00077E34 6000 0000                  		bra.w	cfNoteTimeout		; $E8
00077E38                            ; ===========================================================================
00077E38 6000 0000                  		bra.w	cfChangeTransposition	; $E9
00077E3C                            ; ===========================================================================
00077E3C 6000 0000                  		bra.w	cfSetTempo		; $EA
00077E40                            ; ===========================================================================
00077E40 6000 0000                  		bra.w	cfSetTempoDividerAll	; $EB
00077E44                            ; ===========================================================================
00077E44 6000 0000                  		bra.w	cfChangePSGVolume	; $EC
00077E48                            ; ===========================================================================
00077E48 6000 0000                  		bra.w	cfClearPush		; $ED
00077E4C                            ; ===========================================================================
00077E4C 6000 0000                  		bra.w	cfStopSpecialFM4	; $EE
00077E50                            ; ===========================================================================
00077E50 6000 0000                  		bra.w	cfSetVoice		; $EF
00077E54                            ; ===========================================================================
00077E54 6000 0000                  		bra.w	cfModulation		; $F0
00077E58                            ; ===========================================================================
00077E58 6000 0000                  		bra.w	cfEnableModulation	; $F1
00077E5C                            ; ===========================================================================
00077E5C 6000 0000                  		bra.w	cfStopTrack		; $F2
00077E60                            ; ===========================================================================
00077E60 6000 0000                  		bra.w	cfSetPSGNoise		; $F3
00077E64                            ; ===========================================================================
00077E64 6000 0000                  		bra.w	cfDisableModulation	; $F4
00077E68                            ; ===========================================================================
00077E68 6000 0000                  		bra.w	cfSetPSGTone		; $F5
00077E6C                            ; ===========================================================================
00077E6C 6000 0000                  		bra.w	cfJumpTo		; $F6
00077E70                            ; ===========================================================================
00077E70 6000 0000                  		bra.w	cfRepeatAtPos		; $F7
00077E74                            ; ===========================================================================
00077E74 6000 0000                  		bra.w	cfJumpToGosub		; $F8
00077E78                            ; ===========================================================================
00077E78 6000 0000                  		bra.w	cfOpF9			; $F9
00077E7C                            ; ===========================================================================
00077E7C                            ; loc_72ACC:
00077E7C                            cfPanningAMSFMS:
00077E7C 121C                       		move.b	(a4)+,d1		; New AMS/FMS/panning value
00077E7E 4A2D 0001                  		tst.b	TrackVoiceControl(a5)	; Is this a PSG track?
00077E82 6B00                       		bmi.s	locret_72AEA		; Return if yes
00077E84 102D 000A                  		move.b	TrackAMSFMSPan(a5),d0	; Get current AMS/FMS/panning
00077E88 0200 0037                  		andi.b	#$37,d0			; Retain bits 0-2, 3-4 if set
00077E8C 8200                       		or.b	d0,d1			; Mask in new value
00077E8E 1B41 000A                  		move.b	d1,TrackAMSFMSPan(a5)	; Store value
00077E92 103C 00B4                  		move.b	#$B4,d0			; Command to set AMS/FMS/panning
00077E96 6000 FC2E                  		bra.w	WriteFMIorIIMain
00077E9A                            ; ===========================================================================
00077E9A                            
00077E9A                            locret_72AEA:
00077E9A 4E75                       		rts	
00077E9C                            ; ===========================================================================
00077E9C                            ; loc_72AEC: cfAlterNotes:
00077E9C                            cfDetune:
00077E9C 1B5C 001E                  		move.b	(a4)+,TrackDetune(a5)	; Set detune value
00077EA0 4E75                       		rts	
00077EA2                            ; ===========================================================================
00077EA2                            ; loc_72AF2: cfUnknown1:
00077EA2                            cfSetCommunication:
00077EA2 1D5C 0007                  		move.b	(a4)+,v_communication_byte(a6)	; Set otherwise unused communication byte to parameter
00077EA6 4E75                       		rts	
00077EA8                            ; ===========================================================================
00077EA8                            ; loc_72AF8:
00077EA8                            cfJumpReturn:
00077EA8 7000                       		moveq	#0,d0
00077EAA 102D 000D                  		move.b	TrackStackPointer(a5),d0 ; Track stack pointer
00077EAE 2875 0000                  		movea.l	(a5,d0.w),a4		; Set track return address
00077EB2 2BBC 0000 0000 0000        		move.l	#0,(a5,d0.w)		; Set 'popped' value to zero
00077EBA 544C                       		addq.w	#2,a4			; Skip jump target address from gosub flag
00077EBC 5800                       		addq.b	#4,d0			; Actually 'pop' value
00077EBE 1B40 000D                  		move.b	d0,TrackStackPointer(a5) ; Set new stack pointer
00077EC2 4E75                       		rts	
00077EC4                            ; ===========================================================================
00077EC4                            ; loc_72B14:
00077EC4                            cfFadeInToPrevious:
00077EC4 204E                       		movea.l	a6,a0
00077EC6 43EE 03A0                  		lea	v_1up_ram_copy(a6),a1
00077ECA 303C 0087                  		move.w	#((v_music_track_ram_end-v_startofvariables)/4)-1,d0	; $220 bytes to restore: all variables and music track data
00077ECE                            ; loc_72B1E:
00077ECE                            @restoreramloop:
00077ECE 20D9                       		move.l	(a1)+,(a0)+
00077ED0 51C8 FFFC                  		dbf	d0,@restoreramloop
00077ED4                            
00077ED4 08EE 0002 0040             		bset	#2,v_music_dac_track+TrackPlaybackControl(a6)	; Set 'SFX overriding' bit
00077EDA 264D                       		movea.l	a5,a3
00077EDC 1C3C 0028                  		move.b	#$28,d6
00077EE0 9C2E 0026                  		sub.b	v_fadein_counter(a6),d6			; If fade already in progress, this adjusts track volume accordingly
00077EE4 7E05                       		moveq	#((v_music_fm_tracks_end-v_music_fm_tracks)/TrackSz)-1,d7	; 6 FM tracks
00077EE6 4BEE 0070                  		lea	v_music_fm_tracks(a6),a5
00077EEA                            ; loc_72B3A:
00077EEA                            @fmloop:
00077EEA 0815 0007                  		btst	#7,(a5)		; Is track playing? (TrackPlaybackControl)
00077EEE 6700                       		beq.s	@nextfm		; Branch if not
00077EF0 08D5 0001                  		bset	#1,(a5)		; Set 'track at rest' bit (TrackPlaybackControl)
00077EF4 DD2D 0009                  		add.b	d6,TrackVolume(a5) ; Apply current volume fade-in
00077EF8 0815 0002                  		btst	#2,(a5)		; Is SFX overriding? (TrackPlaybackControl)
00077EFC 6600                       		bne.s	@nextfm		; Branch if yes
00077EFE 7000                       		moveq	#0,d0
00077F00 102D 000B                  		move.b	TrackVoiceIndex(a5),d0	; Get voice
00077F04 226E 0018                  		movea.l	v_voice_ptr(a6),a1	; Voice pointer
00077F08 4EBA 0000                  		jsr	SetVoice(pc)
00077F0C                            ; loc_72B5C:
00077F0C                            @nextfm:
00077F0C DAFC 0030                  		adda.w	#TrackSz,a5
00077F10 51CF FFD8                  		dbf	d7,@fmloop
00077F14                            
00077F14 7E02                       		moveq	#((v_music_psg_tracks_end-v_music_psg_tracks)/TrackSz)-1,d7	; 3 PSG tracks
00077F16                            ; loc_72B66:
00077F16                            @psgloop:
00077F16 0815 0007                  		btst	#7,(a5)		; Is track playing? (TrackPlaybackControl)
00077F1A 6700                       		beq.s	@nextpsg	; Branch if not
00077F1C 08D5 0001                  		bset	#1,(a5)		; Set 'track at rest' bit (TrackPlaybackControl)
00077F20 4EBA FE2E                  		jsr	PSGNoteOff(pc)
00077F24 DD2D 0009                  		add.b	d6,TrackVolume(a5)	; Apply current volume fade-in
00077F28                            ; loc_72B78:
00077F28                            @nextpsg:
00077F28 DAFC 0030                  		adda.w	#TrackSz,a5
00077F2C 51CF FFE8                  		dbf	d7,@psgloop
00077F30                            		
00077F30 2A4B                       		movea.l	a3,a5
00077F32 1D7C 0080 0024             		move.b	#$80,f_fadein_flag(a6)		; Trigger fade-in
00077F38 1D7C 0028 0026             		move.b	#$28,v_fadein_counter(a6)	; Fade-in delay
00077F3E 422E 0027                  		clr.b	f_1up_playing(a6)
00077F42 33FC 0000 00A1 1100        		startZ80
00077F4A 504F                       		addq.w	#8,sp		; Tamper return value so we don't return to caller
00077F4C 4E75                       		rts	
00077F4E                            ; ===========================================================================
00077F4E                            ; loc_72B9E:
00077F4E                            cfSetTempoDivider:
00077F4E 1B5C 0002                  		move.b	(a4)+,TrackTempoDivider(a5)	; Set tempo divider on current track
00077F52 4E75                       		rts	
00077F54                            ; ===========================================================================
00077F54                            ; loc_72BA4: cfSetVolume:
00077F54                            cfChangeFMVolume:
00077F54 101C                       		move.b	(a4)+,d0		; Get parameter
00077F56 D12D 0009                  		add.b	d0,TrackVolume(a5)	; Add to current volume
00077F5A 6000 0000                  		bra.w	SendVoiceTL
00077F5E                            ; ===========================================================================
00077F5E                            ; loc_72BAE: cfPreventAttack:
00077F5E                            cfHoldNote:
00077F5E 08D5 0004                  		bset	#4,(a5)		; Set 'do not attack next note' bit (TrackPlaybackControl)
00077F62 4E75                       		rts	
00077F64                            ; ===========================================================================
00077F64                            ; loc_72BB4: cfNoteFill
00077F64                            cfNoteTimeout:
00077F64 1B54 0012                  		move.b	(a4),TrackNoteTimeout(a5)		; Note fill timeout
00077F68 1B5C 0013                  		move.b	(a4)+,TrackNoteTimeoutMaster(a5)	; Note fill master
00077F6C 4E75                       		rts	
00077F6E                            ; ===========================================================================
00077F6E                            ; loc_72BBE: cfAddKey:
00077F6E                            cfChangeTransposition:
00077F6E 101C                       		move.b	(a4)+,d0		; Get parameter
00077F70 D12D 0008                  		add.b	d0,TrackTranspose(a5)	; Add to transpose value
00077F74 4E75                       		rts	
00077F76                            ; ===========================================================================
00077F76                            ; loc_72BC6:
00077F76                            cfSetTempo:
00077F76 1D54 0002                  		move.b	(a4),v_main_tempo(a6)		; Set main tempo
00077F7A 1D5C 0001                  		move.b	(a4)+,v_main_tempo_timeout(a6)	; And reset timeout (!)
00077F7E 4E75                       		rts	
00077F80                            ; ===========================================================================
00077F80                            ; loc_72BD0: cfSetTempoMod:
00077F80                            cfSetTempoDividerAll:
00077F80 41EE 0040                  		lea	v_music_track_ram(a6),a0
00077F84 101C                       		move.b	(a4)+,d0			; Get new tempo divider
00077F86 7230                       		moveq	#TrackSz,d1
00077F88 7409                       		moveq	#((v_music_track_ram_end-v_music_track_ram)/TrackSz)-1,d2	; 1 DAC + 6 FM + 3 PSG tracks
00077F8A                            ; loc_72BDA:
00077F8A                            @trackloop:
00077F8A 1140 0002                  		move.b	d0,TrackTempoDivider(a0)	; Set track's tempo divider
00077F8E D0C1                       		adda.w	d1,a0
00077F90 51CA FFF8                  		dbf	d2,@trackloop
00077F94                            
00077F94 4E75                       		rts	
00077F96                            ; ===========================================================================
00077F96                            ; loc_72BE6: cfChangeVolume:
00077F96                            cfChangePSGVolume:
00077F96 101C                       		move.b	(a4)+,d0		; Get volume change
00077F98 D12D 0009                  		add.b	d0,TrackVolume(a5)	; Apply it
00077F9C 4E75                       		rts	
00077F9E                            ; ===========================================================================
00077F9E                            ; loc_72BEE:
00077F9E                            cfClearPush:
00077F9E 422E 002C                  		clr.b	f_push_playing(a6)	; Allow push sound to be played once more
00077FA2 4E75                       		rts	
00077FA4                            ; ===========================================================================
00077FA4                            ; loc_72BF4:
00077FA4                            cfStopSpecialFM4:
00077FA4 0895 0007                  		bclr	#7,(a5)		; Stop track (TrackPlaybackControl)
00077FA8 0895 0004                  		bclr	#4,(a5)		; Clear 'do not attack next note' bit (TrackPlaybackControl)
00077FAC 4EBA FB00                  		jsr	FMNoteOff(pc)
00077FB0 4A2E 0250                  		tst.b	v_sfx_fm4_track+TrackPlaybackControl(a6)	; Is SFX using FM4?
00077FB4 6B00                       		bmi.s	@locexit					; Branch if yes
00077FB6 264D                       		movea.l	a5,a3
00077FB8 4BEE 0100                  		lea	v_music_fm4_track(a6),a5
00077FBC 226E 0018                  		movea.l	v_voice_ptr(a6),a1	; Voice pointer
00077FC0 0895 0002                  		bclr	#2,(a5)			; Clear 'SFX is overriding' bit (TrackPlaybackControl)
00077FC4 08D5 0001                  		bset	#1,(a5)			; Set 'track at rest' bit (TrackPlaybackControl)
00077FC8 102D 000B                  		move.b	TrackVoiceIndex(a5),d0	; Current voice
00077FCC 4EBA 0000                  		jsr	SetVoice(pc)
00077FD0 2A4B                       		movea.l	a3,a5
00077FD2                            ; loc_72C22:
00077FD2                            @locexit:
00077FD2 504F                       		addq.w	#8,sp		; Tamper with return value so we don't return to caller
00077FD4 4E75                       		rts	
00077FD6                            ; ===========================================================================
00077FD6                            ; loc_72C26:
00077FD6                            cfSetVoice:
00077FD6 7000                       		moveq	#0,d0
00077FD8 101C                       		move.b	(a4)+,d0		; Get new voice
00077FDA 1B40 000B                  		move.b	d0,TrackVoiceIndex(a5)	; Store it
00077FDE 0815 0002                  		btst	#2,(a5)			; Is SFX overriding this track? (TrackPlaybackControl)
00077FE2 6600 0000                  		bne.w	locret_72CAA		; Return if yes
00077FE6 226E 0018                  		movea.l	v_voice_ptr(a6),a1	; Music voice pointer
00077FEA 4A2E 000E                  		tst.b	f_voice_selector(a6)	; Are we updating a music track?
00077FEE 6700                       		beq.s	SetVoice		; If yes, branch
00077FF0 226D 0020                  		movea.l	TrackVoicePtr(a5),a1	; SFX track voice pointer
00077FF4 4A2E 000E                  		tst.b	f_voice_selector(a6)	; Are we updating a SFX track?
00077FF8 6B00                       		bmi.s	SetVoice		; If yes, branch
00077FFA 226E 0020                  		movea.l	v_special_voice_ptr(a6),a1 ; Special SFX voice pointer
00077FFE                            
00077FFE                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00077FFE                            
00077FFE                            ; sub_72C4E:
00077FFE                            SetVoice:
00077FFE 5340                       		subq.w	#1,d0
00078000 6B00                       		bmi.s	@havevoiceptr
00078002 323C 0019                  		move.w	#25,d1
00078006                            ; loc_72C56:
00078006                            @voicemultiply:
00078006 D2C1                       		adda.w	d1,a1
00078008 51C8 FFFC                  		dbf	d0,@voicemultiply
0007800C                            ; loc_72C5C:
0007800C                            @havevoiceptr:
0007800C 1219                       		move.b	(a1)+,d1		; feedback/algorithm
0007800E 1B41 001F                  		move.b	d1,TrackFeedbackAlgo(a5) ; Save it to track RAM
00078012 1801                       		move.b	d1,d4
00078014 103C 00B0                  		move.b	#$B0,d0			; Command to write feedback/algorithm
00078018 4EBA FAB8                  		jsr	WriteFMIorII(pc)
0007801C 45FA 0000                  		lea	FMInstrumentOperatorTable(pc),a2
00078020 7600                       		moveq	#(FMInstrumentOperatorTable_End-FMInstrumentOperatorTable)-1,d3		; Don't want to send TL yet
00078022                            ; loc_72C72:
00078022                            @sendvoiceloop:
00078022 101A                       		move.b	(a2)+,d0
00078024 1219                       		move.b	(a1)+,d1
00078026 4EBA FAAA                  		jsr	WriteFMIorII(pc)
0007802A 51CB FFF6                  		dbf	d3,@sendvoiceloop
0007802E                            
0007802E 7A03                       		moveq	#3,d5
00078030 0244 0007                  		andi.w	#7,d4			; Get algorithm
00078034 183B 4000                  		move.b	FMSlotMask(pc,d4.w),d4	; Get slot mask for algorithm
00078038 162D 0009                  		move.b	TrackVolume(a5),d3	; Track volume attenuation
0007803C                            ; loc_72C8C:
0007803C                            @sendtlloop:
0007803C 101A                       		move.b	(a2)+,d0
0007803E 1219                       		move.b	(a1)+,d1
00078040 E20C                       		lsr.b	#1,d4		; Is bit set for this operator in the mask?
00078042 6400                       		bcc.s	@sendtl		; Branch if not
00078044 D203                       		add.b	d3,d1		; Include additional attenuation
00078046                            ; loc_72C96:
00078046                            @sendtl:
00078046 4EBA FA8A                  		jsr	WriteFMIorII(pc)
0007804A 51CD FFF0                  		dbf	d5,@sendtlloop
0007804E                            		
0007804E 103C 00B4                  		move.b	#$B4,d0			; Register for AMS/FMS/Panning
00078052 122D 000A                  		move.b	TrackAMSFMSPan(a5),d1	; Value to send
00078056 4EBA FA7A                  		jsr	WriteFMIorII(pc) 	; (It would be better if this were a jmp)
0007805A                            
0007805A                            locret_72CAA:
0007805A 4E75                       		rts	
0007805C                            ; End of function SetVoice
0007805C                            
0007805C                            ; ===========================================================================
0007805C                            ; byte_72CAC:
0007805C 0808 0808 0A0E 0E0F        FMSlotMask:	dc.b 8,	8, 8, 8, $A, $E, $E, $F
00078064                            
00078064                            ; ||||||||||||||| S U B	R O U T	I N E |||||||||||||||||||||||||||||||||||||||
00078064                            
00078064                            ; sub_72CB4:
00078064                            SendVoiceTL:
00078064 0815 0002                  		btst	#2,(a5)		; Is SFX overriding? (TrackPlaybackControl)
00078068 6600                       		bne.s	@locret		; Return if so
0007806A 7000                       		moveq	#0,d0
0007806C 102D 000B                  		move.b	TrackVoiceIndex(a5),d0	; Current voice
00078070 226E 0018                  		movea.l	v_voice_ptr(a6),a1	; Voice pointer
00078074 4A2E 000E                  		tst.b	f_voice_selector(a6)
00078078 6700                       		beq.s	@gotvoiceptr
0007807A                            		; DANGER! This uploads the wrong voice! It should have been a5 instead
0007807A                            		; of a6!
0007807A 226E 0020                  		movea.l	TrackVoicePtr(a6),a1
0007807E 4A2E 000E                  		tst.b	f_voice_selector(a6)
00078082 6B00                       		bmi.s	@gotvoiceptr
00078084 226E 0020                  		movea.l	v_special_voice_ptr(a6),a1
00078088                            ; loc_72CD8:
00078088                            @gotvoiceptr:
00078088 5340                       		subq.w	#1,d0
0007808A 6B00                       		bmi.s	@gotvoice
0007808C 323C 0019                  		move.w	#25,d1
00078090                            ; loc_72CE0:
00078090                            @voicemultiply:
00078090 D2C1                       		adda.w	d1,a1
00078092 51C8 FFFC                  		dbf	d0,@voicemultiply
00078096                            ; loc_72CE6:
00078096                            @gotvoice:
00078096 D2FC 0015                  		adda.w	#21,a1				; Want TL
0007809A 45FA 0000                  		lea	FMInstrumentTLTable(pc),a2
0007809E 102D 001F                  		move.b	TrackFeedbackAlgo(a5),d0	; Get feedback/algorithm
000780A2 0240 0007                  		andi.w	#7,d0				; Want only algorithm
000780A6 183B 00B4                  		move.b	FMSlotMask(pc,d0.w),d4		; Get slot mask
000780AA 162D 0009                  		move.b	TrackVolume(a5),d3		; Get track volume attenuation
000780AE 6B00                       		bmi.s	@locret				; If negative, stop
000780B0 7A00                       		moveq	#(FMInstrumentTLTable_End-FMInstrumentTLTable)-1,d5
000780B2                            ; loc_72D02:
000780B2                            @sendtlloop:
000780B2 101A                       		move.b	(a2)+,d0
000780B4 1219                       		move.b	(a1)+,d1
000780B6 E20C                       		lsr.b	#1,d4		; Is bit set for this operator in the mask?
000780B8 6400                       		bcc.s	@senttl		; Branch if not
000780BA D203                       		add.b	d3,d1		; Include additional attenuation
000780BC 6500                       		blo.s	@senttl		; Branch on overflow
000780BE 4EBA FA12                  		jsr	WriteFMIorII(pc)
000780C2                            ; loc_72D12:
000780C2                            @senttl:
000780C2 51CD FFEE                  		dbf	d5,@sendtlloop
000780C6                            ; locret_72D16:
000780C6                            @locret:
000780C6 4E75                       		rts	
000780C8                            ; End of function SendVoiceTL
000780C8                            
000780C8                            ; ===========================================================================
000780C8                            ; byte_72D18:
000780C8                            FMInstrumentOperatorTable:
000780C8 30                         		dc.b  $30		; Detune/multiple operator 1
000780C9 38                         		dc.b  $38		; Detune/multiple operator 3
000780CA 34                         		dc.b  $34		; Detune/multiple operator 2
000780CB 3C                         		dc.b  $3C		; Detune/multiple operator 4
000780CC 50                         		dc.b  $50		; Rate scalling/attack rate operator 1
000780CD 58                         		dc.b  $58		; Rate scalling/attack rate operator 3
000780CE 54                         		dc.b  $54		; Rate scalling/attack rate operator 2
000780CF 5C                         		dc.b  $5C		; Rate scalling/attack rate operator 4
000780D0 60                         		dc.b  $60		; Amplitude modulation/first decay rate operator 1
000780D1 68                         		dc.b  $68		; Amplitude modulation/first decay rate operator 3
000780D2 64                         		dc.b  $64		; Amplitude modulation/first decay rate operator 2
000780D3 6C                         		dc.b  $6C		; Amplitude modulation/first decay rate operator 4
000780D4 70                         		dc.b  $70		; Secondary decay rate operator 1
000780D5 78                         		dc.b  $78		; Secondary decay rate operator 3
000780D6 74                         		dc.b  $74		; Secondary decay rate operator 2
000780D7 7C                         		dc.b  $7C		; Secondary decay rate operator 4
000780D8 80                         		dc.b  $80		; Secondary amplitude/release rate operator 1
000780D9 88                         		dc.b  $88		; Secondary amplitude/release rate operator 3
000780DA 84                         		dc.b  $84		; Secondary amplitude/release rate operator 2
000780DB 8C                         		dc.b  $8C		; Secondary amplitude/release rate operator 4
000780DC                            FMInstrumentOperatorTable_End
000780DC                            ; byte_72D2C:
000780DC                            FMInstrumentTLTable:
000780DC 40                         		dc.b  $40		; Total level operator 1
000780DD 48                         		dc.b  $48		; Total level operator 3
000780DE 44                         		dc.b  $44		; Total level operator 2
000780DF 4C                         		dc.b  $4C		; Total level operator 4
000780E0                            FMInstrumentTLTable_End
000780E0                            ; ===========================================================================
000780E0                            ; loc_72D30:
000780E0                            cfModulation:
000780E0 08D5 0003                  		bset	#3,(a5)				; Turn on modulation (TrackPlaybackControl)
000780E4 2B4C 0014                  		move.l	a4,TrackModulationPtr(a5)	; Save pointer to modulation data
000780E8 1B5C 0018                  		move.b	(a4)+,TrackModulationWait(a5)	; Modulation delay
000780EC 1B5C 0019                  		move.b	(a4)+,TrackModulationSpeed(a5)	; Modulation speed
000780F0 1B5C 001A                  		move.b	(a4)+,TrackModulationDelta(a5)	; Modulation delta
000780F4 101C                       		move.b	(a4)+,d0			; Modulation steps...
000780F6 E208                       		lsr.b	#1,d0				; ... divided by 2...
000780F8 1B40 001B                  		move.b	d0,TrackModulationSteps(a5)	; ... before being stored
000780FC 426D 001C                  		clr.w	TrackModulationVal(a5)		; Total accumulated modulation frequency change
00078100 4E75                       		rts	
00078102                            ; ===========================================================================
00078102                            ; loc_72D52:
00078102                            cfEnableModulation:
00078102 08D5 0003                  		bset	#3,(a5)		; Turn on modulation (TrackPlaybackControl)
00078106 4E75                       		rts	
00078108                            ; ===========================================================================
00078108                            ; loc_72D58:
00078108                            cfStopTrack:
00078108 0895 0007                  		bclr	#7,(a5)			; Stop track (TrackPlaybackControl)
0007810C 0895 0004                  		bclr	#4,(a5)			; Clear 'do not attack next note' bit (TrackPlaybackControl)
00078110 4A2D 0001                  		tst.b	TrackVoiceControl(a5)	; Is this a PSG track?
00078114 6B00                       		bmi.s	@stoppsg		; Branch if yes
00078116 4A2E 0008                  		tst.b	f_updating_dac(a6)	; Is this the DAC we are updating?
0007811A 6B00 0000                  		bmi.w	@locexit		; Exit if yes
0007811E 4EBA F98E                  		jsr	FMNoteOff(pc)
00078122 6000                       		bra.s	@stoppedchannel
00078124                            ; ===========================================================================
00078124                            ; loc_72D74:
00078124                            @stoppsg:
00078124 4EBA FC2A                  		jsr	PSGNoteOff(pc)
00078128                            ; loc_72D78:
00078128                            @stoppedchannel:
00078128 4A2E 000E                  		tst.b	f_voice_selector(a6)	; Are we updating SFX?
0007812C 6A00 0000                  		bpl.w	@locexit		; Exit if not
00078130 422E 0000                  		clr.b	v_sndprio(a6)		; Clear priority
00078134 7000                       		moveq	#0,d0
00078136 102D 0001                  		move.b	TrackVoiceControl(a5),d0 ; Get voice control bits
0007813A 6B00                       		bmi.s	@getpsgptr		; Branch if PSG
0007813C 41FA F53E                  		lea	SFX_BGMChannelRAM(pc),a0
00078140 264D                       		movea.l	a5,a3
00078142 0C00 0004                  		cmpi.b	#4,d0			; Is this FM4?
00078146 6600                       		bne.s	@getpointer		; Branch if not
00078148 4A2E 0340                  		tst.b	v_spcsfx_fm4_track+TrackPlaybackControl(a6)	; Is special SFX playing?
0007814C 6A00                       		bpl.s	@getpointer		; Branch if not
0007814E 4BEE 0340                  		lea	v_spcsfx_fm4_track(a6),a5
00078152 226E 0020                  		movea.l	v_special_voice_ptr(a6),a1	; Get voice pointer
00078156 6000                       		bra.s	@gotpointer
00078158                            ; ===========================================================================
00078158                            ; loc_72DA8:
00078158                            @getpointer:
00078158 5500                       		subq.b	#2,d0		; SFX can only use FM3 and up
0007815A E508                       		lsl.b	#2,d0
0007815C 2A70 0000                  		movea.l	(a0,d0.w),a5
00078160 4A15                       		tst.b	(a5)			; Is track playing? (TrackPlaybackControl)
00078162 6A00                       		bpl.s	@novoiceupd		; Branch if not
00078164 226E 0018                  		movea.l	v_voice_ptr(a6),a1	; Get voice pointer
00078168                            ; loc_72DB8:
00078168                            @gotpointer:
00078168 0895 0002                  		bclr	#2,(a5)			; Clear 'SFX overriding' bit (TrackPlaybackControl)
0007816C 08D5 0001                  		bset	#1,(a5)			; Set 'track at rest' bit (TrackPlaybackControl)
00078170 102D 000B                  		move.b	TrackVoiceIndex(a5),d0	; Current voice
00078174 4EBA FE88                  		jsr	SetVoice(pc)
00078178                            ; loc_72DC8:
00078178                            @novoiceupd:
00078178 2A4B                       		movea.l	a3,a5
0007817A 6000                       		bra.s	@locexit
0007817C                            ; ===========================================================================
0007817C                            ; loc_72DCC:
0007817C                            @getpsgptr:
0007817C 41EE 0370                  		lea	v_spcsfx_psg3_track(a6),a0
00078180 4A10                       		tst.b	(a0)		; Is track playing? (TrackPlaybackControl)
00078182 6A00                       		bpl.s	@getchannelptr	; Branch if not
00078184 0C00 00E0                  		cmpi.b	#$E0,d0		; Is it the noise channel?
00078188 6700                       		beq.s	@gotchannelptr	; Branch if yes
0007818A 0C00 00C0                  		cmpi.b	#$C0,d0		; Is it PSG 3?
0007818E 6700                       		beq.s	@gotchannelptr	; Branch if yes
00078190                            ; loc_72DE0:
00078190                            @getchannelptr:
00078190 41FA F4EA                  		lea	SFX_BGMChannelRAM(pc),a0
00078194 E608                       		lsr.b	#3,d0
00078196 2070 0000                  		movea.l	(a0,d0.w),a0
0007819A                            ; loc_72DEA:
0007819A                            @gotchannelptr:
0007819A 0890 0002                  		bclr	#2,(a0)				; Clear 'SFX overriding' bit (TrackPlaybackControl)
0007819E 08D0 0001                  		bset	#1,(a0)				; Set 'track at rest' bit (TrackPlaybackControl)
000781A2 0C28 00E0 0001             		cmpi.b	#$E0,TrackVoiceControl(a0)	; Is this a noise pointer?
000781A8 6600                       		bne.s	@locexit			; Branch if not
000781AA 13E8 001F 00C0 0011        		move.b	TrackPSGNoise(a0),(psg_input).l ; Set noise tone
000781B2                            ; loc_72E02:
000781B2                            @locexit:
000781B2 504F                       		addq.w	#8,sp		; Tamper with return value so we don't go back to caller
000781B4 4E75                       		rts	
000781B6                            ; ===========================================================================
000781B6                            ; loc_72E06:
000781B6                            cfSetPSGNoise:
000781B6 1B7C 00E0 0001             		move.b	#$E0,TrackVoiceControl(a5)	; Turn channel into noise channel
000781BC 1B5C 001F                  		move.b	(a4)+,TrackPSGNoise(a5)	; Save noise tone
000781C0 0815 0002                  		btst	#2,(a5)				; Is track being overridden? (TrackPlaybackControl)
000781C4 6600                       		bne.s	@locret				; Return if yes
000781C6 13EC FFFF 00C0 0011        		move.b	-1(a4),(psg_input).l		; Set tone
000781CE                            ; locret_72E1E:
000781CE                            @locret:
000781CE 4E75                       		rts	
000781D0                            ; ===========================================================================
000781D0                            ; loc_72E20:
000781D0                            cfDisableModulation:
000781D0 0895 0003                  		bclr	#3,(a5)		; Disable modulation (TrackPlaybackControl)
000781D4 4E75                       		rts	
000781D6                            ; ===========================================================================
000781D6                            ; loc_72E26:
000781D6                            cfSetPSGTone:
000781D6 1B5C 000B                  		move.b	(a4)+,TrackVoiceIndex(a5)	; Set current PSG tone
000781DA 4E75                       		rts	
000781DC                            ; ===========================================================================
000781DC                            ; loc_72E2C:
000781DC                            cfJumpTo:
000781DC 101C                       		move.b	(a4)+,d0	; High byte of offset
000781DE E148                       		lsl.w	#8,d0		; Shift it into place
000781E0 101C                       		move.b	(a4)+,d0	; Low byte of offset
000781E2 D8C0                       		adda.w	d0,a4		; Add to current position
000781E4 534C                       		subq.w	#1,a4		; Put back one byte
000781E6 4E75                       		rts	
000781E8                            ; ===========================================================================
000781E8                            ; loc_72E38:
000781E8                            cfRepeatAtPos:
000781E8 7000                       		moveq	#0,d0
000781EA 101C                       		move.b	(a4)+,d0			; Loop index
000781EC 121C                       		move.b	(a4)+,d1			; Repeat count
000781EE 4A35 0024                  		tst.b	TrackLoopCounters(a5,d0.w)	; Has this loop already started?
000781F2 6600                       		bne.s	@loopexists			; Branch if yes
000781F4 1B81 0024                  		move.b	d1,TrackLoopCounters(a5,d0.w)	; Initialize repeat count
000781F8                            ; loc_72E48:
000781F8                            @loopexists:
000781F8 5335 0024                  		subq.b	#1,TrackLoopCounters(a5,d0.w)	; Decrease loop's repeat count
000781FC 66DE                       		bne.s	cfJumpTo			; If nonzero, branch to target
000781FE 544C                       		addq.w	#2,a4				; Skip target address
00078200 4E75                       		rts	
00078202                            ; ===========================================================================
00078202                            ; loc_72E52:
00078202                            cfJumpToGosub:
00078202 7000                       		moveq	#0,d0
00078204 102D 000D                  		move.b	TrackStackPointer(a5),d0	; Current stack pointer
00078208 5900                       		subq.b	#4,d0				; Add space for another target
0007820A 2B8C 0000                  		move.l	a4,(a5,d0.w)			; Put in current address (*before* target for jump!)
0007820E 1B40 000D                  		move.b	d0,TrackStackPointer(a5)	; Store new stack pointer
00078212 60C8                       		bra.s	cfJumpTo
00078214                            ; ===========================================================================
00078214                            ; loc_72E64:
00078214                            cfOpF9:
00078214 103C 0088                  		move.b	#$88,d0		; D1L/RR of Operator 3
00078218 123C 000F                  		move.b	#$F,d1		; Loaded with fixed value (max RR, 1TL)
0007821C 4EBA F8C0                  		jsr	WriteFMI(pc)
00078220 103C 008C                  		move.b	#$8C,d0		; D1L/RR of Operator 4
00078224 123C 000F                  		move.b	#$F,d1		; Loaded with fixed value (max RR, 1TL)
00078228 6000 F8B4                  		bra.w	WriteFMI
0007822C                            ; ===========================================================================
0007822C                            
0007822C                            Kos_Z80:
0007822C                            		incbin	"sound\z80.bin", 0, $15
00078241 00                         		dc.b ((SegaPCM&$FF8000)/$8000)&1						; Least bit of bank ID (bit 15 of address)
00078242                            		incbin	"sound\z80.bin", $16, 6
00078248 00                         		dc.b ((SegaPCM&$FF8000)/$8000)>>1						; ... the remaining bits of bank ID (bits 16-23)
00078249                            		incbin	"sound\z80.bin", $1D, $93
000782DC 0000                       		dc.w ((SegaPCM&$FF)<<8)+((SegaPCM&$7F00)>>8)|$80				; Pointer to Sega PCM, relative to start of ROM bank (i.e., little_endian($8000 + SegaPCM&$7FFF)
000782DE                            		incbin	"sound\z80.bin", $B2, 1
000782DF 0000                       		dc.w (((SegaPCM_End-SegaPCM)&$FF)<<8)+(((SegaPCM_End-SegaPCM)&$FF00)>>8)	; ... the size of the Sega PCM (little endian)
000782E1                            		incbin	"sound\z80.bin", $B5, $16AB
0007998C                            		even
0007998C                            MusicLOCK:	incbin	"sound/music/Mus94 - Test Track.bin"
00079D9A 00                         		even
00079D9A                            Music81:	include	"sound/music/Mus81 - GHZ.asm"
00079D9A                            Mus81_GHZ_Header:
00079D9A =00000001                  smpsHeaderStartSong = 1
00079D9A 0000                       	smpsHeaderVoice     Mus81_GHZ_Voices
00079D9C 0603                       	smpsHeaderChan      $06, $03
00079D9E 0106                       	smpsHeaderTempo     $01, $06
00079DA0                            
00079DA4 0000 F40D                  	smpsHeaderFM        Mus81_GHZ_FM1,	$F4, $0D
00079DA8 0000 000B                  	smpsHeaderFM        Mus81_GHZ_FM2,	$00, $0B
00079DAC 0000 F414                  	smpsHeaderFM        Mus81_GHZ_FM3,	$F4, $14
00079DB0 0000 F416                  	smpsHeaderFM        Mus81_GHZ_FM5,	$F4, $16
00079DB4 0000 F408                  	smpsHeaderFM        Mus81_GHZ_FM4,	$F4, $08
00079DB8 0000 F50A 0003             	smpsHeaderPSG       Mus81_GHZ_PSG1,	$F5, $0A, $00, fTone_03
00079DBE 0000 F406 0007             	smpsHeaderPSG       Mus81_GHZ_PSG2,	$F4, $06, $00, fTone_07
00079DC4 0000 0003 0004             	smpsHeaderPSG       Mus81_GHZ_PSG3,	$00, $03, $00, fTone_04
00079DCA                            
00079DCA                            ; FM1 Data
00079DCA                            Mus81_GHZ_FM1:
00079DCC E040                       	smpsPan             panRight, $00
00079DCE F800 00                    	smpsCall            Mus81_GHZ_Call02
00079DD1 E0C0                       	smpsPan             panCenter, $00
00079DD3                            
00079DD3                            Mus81_GHZ_Loop0E:
00079DD3 E080                       	smpsPan             panLeft, $00
00079DD5 D904                       	dc.b	nE7, $04
00079DD7 E040                       	smpsPan             panRight, $00
00079DD9 D5                         	dc.b	nC7
00079DDA E601                       	smpsAlterVol        $01
00079DDC F700 0DFF F3               	smpsLoop            $00, $0D, Mus81_GHZ_Loop0E
00079DE1 D904 8014                  	dc.b	nE7, $04, nRst, $14
00079DE5 E6EB                       	smpsAlterVol        $EB
00079DE7 E0C0                       	smpsPan             panCenter, $00
00079DE9 8040 8080 8080 80          	dc.b	nRst, $40, nRst, nRst, nRst, nRst, nRst
00079DF0                            
00079DF0                            Mus81_GHZ_Jump04:
00079DF2 F00D 0107 04               	smpsModSet          $0D, $01, $07, $04
00079DF7 E9F4                       	smpsAlterPitch      $F4
00079DF9 8020                       	dc.b	nRst, $20
00079DFB F800 00                    	smpsCall            Mus81_GHZ_Call07
00079DFE C938                       	dc.b	nC6, $38
00079E00 F800 00                    	smpsCall            Mus81_GHZ_Call07
00079E03 C908 08CD                  	dc.b	nC6, $08, $08, nE6
00079E07 E90C                       	smpsAlterPitch      $0C
00079E0B E9F4                       	smpsAlterPitch      $F4
00079E0D CB34 E734 C908 CBCD 38E7+  	dc.b	nD6, $34, smpsNoAttack, $34, nC6, $08, nD6, nE6, $38, smpsNoAttack, $38, nC6
00079E19 08C9 CDCC 34E7 34C9 08CC+  	dc.b	$08, nC6, nE6, nEb6, $34, smpsNoAttack, $34, nC6, $08, nEb6, nD6, $1C
00079E25 E71C                       	dc.b	smpsNoAttack, $1C
00079E29 E9F4                       	smpsAlterPitch      $F4
00079E2B E60A                       	smpsAlterVol        $0A
00079E2D 8008 D90C 8004             	dc.b	nRst, $08, nE7, $0C, nRst, $04
00079E33 E80B                       	smpsNoteFill        $0B
00079E35 D908 DAD9 DC               	dc.b	nE7, $08, nF7, nE7, nG7
00079E3A E814                       	smpsNoteFill        $14
00079E3C D910                       	dc.b	nE7, $10
00079E3E E80B                       	smpsNoteFill        $0B
00079E40 D508                       	dc.b	nC7, $08
00079E42 E800                       	smpsNoteFill        $00
00079E44 E6F6                       	smpsAlterVol        $F6
00079E46 E918                       	smpsAlterPitch      $18
00079E48 F6FF A6                    	smpsJump            Mus81_GHZ_Jump04
00079E4B                            
00079E4B                            Mus81_GHZ_Call02:
00079E4B D204 CED2 CED4 D0D4 D0D5+  	dc.b	nA6, $04, nF6, nA6, nF6, nB6, nG6, nB6, nG6, nC7, nA6, nC7
00079E57 D2D7 D4D7 D4               	dc.b	nA6, nD7, nB6, nD7, nB6
00079E5C E3                         	smpsReturn
00079E5D                            
00079E5D                            Mus81_GHZ_Call07:
00079E5D D508 D210 D508 D410 D508+  	dc.b	nC7, $08, nA6, $10, nC7, $08, nB6, $10, nC7, $08, nB6, $10
00079E69 D030 D208 D9D7 10D5 08D4+  	dc.b	nG6, $30, nA6, $08, nE7, nD7, $10, nC7, $08, nB6, $10, nC7
00079E75 08D4 10D0 38D5 08D2 10D5+  	dc.b	$08, nB6, $10, nG6, $38, nC7, $08, nA6, $10, nC7, $08, nB6
00079E81 10D5 08D4 10D0 30D2 0808+  	dc.b	$10, nC7, $08, nB6, $10, nG6, $30, nA6, $08, $08, nF6, $10
00079E8D D208 D010 D208 D010        	dc.b	nA6, $08, nG6, $10, nA6, $08, nG6, $10
00079E95 E3                         	smpsReturn
00079E96                            
00079E96                            ; FM2 Data
00079E96                            Mus81_GHZ_FM2:
00079E98 E201                       	smpsNop             $01
00079E9A 8008 A2AE A2A3 AFA4 B0     	dc.b	nRst, $08, nA2, nA3, nA2, nBb2, nBb3, nB2, nB3
00079EA3 E804                       	smpsNoteFill        $04
00079EA7                            
00079EA7                            Mus81_GHZ_Loop0C:
00079EA7 A508                       	dc.b	nC3, $08
00079EA9 F700 18FF FA               	smpsLoop            $00, $18, Mus81_GHZ_Loop0C
00079EAE E800                       	smpsNoteFill        $00
00079EB0 A504 80A5 08A2 0480 A208+  	dc.b	nC3, $04, nRst, nC3, $08, nA2, $04, nRst, nA2, $08, nBb2, $04
00079EBC 80A3 08A4 0480 A408        	dc.b	nRst, nBb2, $08, nB2, $04, nRst, nB2, $08
00079EC4 E804                       	smpsNoteFill        $04
00079EC6                            
00079EC6                            Mus81_GHZ_Loop0D:
00079EC6 A508                       	dc.b	nC3, $08
00079EC8 F700 1DFF FA               	smpsLoop            $00, $1D, Mus81_GHZ_Loop0D
00079ECD E800                       	smpsNoteFill        $00
00079ECF A5A7 A9                    	dc.b	nC3, nD3, nE3
00079ED2                            
00079ED2                            Mus81_GHZ_Jump03:
00079ED4 F800 00                    	smpsCall            Mus81_GHZ_Call05
00079ED7 F800 00                    	smpsCall            Mus81_GHZ_Call06
00079EDA E800                       	smpsNoteFill        $00
00079EDC A5A7 A9                    	dc.b	nC3, nD3, nE3
00079EDF F800 00                    	smpsCall            Mus81_GHZ_Call05
00079EE2 F800 00                    	smpsCall            Mus81_GHZ_Call06
00079EE5 A5A5 A5                    	dc.b	nC3, nC3, nC3
00079EE8 E800                       	smpsNoteFill        $00
00079EEC A318 A2A0 9E9D 0880 9B80+  	dc.b	nBb2, $18, nA2, nG2, nF2, nE2, $08, nRst, nD2, nRst, nA2, $18
00079EF8 A4A5 A7A9 0880 AE80 AD18+  	dc.b	nB2, nC3, nD3, nE3, $08, nRst, nA3, nRst, nAb3, $18, nG3, nF3
00079F04 A8A7 0880 A580 A018 A7A0+  	dc.b	nEb3, nD3, $08, nRst, nC3, nRst, nG2, $18, nD3, nG2, nG3, $08
00079F10 9DA9 9EAA A0AC             	dc.b	nE2, nE3, nF2, nF3, nG2, nG3
00079F16 E804                       	smpsNoteFill        $04
00079F18 E201                       	smpsNop             $01
00079F1A F6FF B6                    	smpsJump            Mus81_GHZ_Jump03
00079F1D                            
00079F1D                            Mus81_GHZ_Call05:
00079F1D E804                       	smpsNoteFill        $04
00079F1F AA08 AAAA AAAA AAAA        	dc.b	nF3, $08, nF3, nF3, nF3, nF3, nF3, nF3
00079F27 E800                       	smpsNoteFill        $00
00079F29 AA                         	dc.b	nF3
00079F2A E804                       	smpsNoteFill        $04
00079F2C A9A9 A9A9 A9               	dc.b	nE3, nE3, nE3, nE3, nE3
00079F31 E800                       	smpsNoteFill        $00
00079F33 A5A7 A9                    	dc.b	nC3, nD3, nE3
00079F36 E804                       	smpsNoteFill        $04
00079F38 AAAA AAAA AAAA AA          	dc.b	nF3, nF3, nF3, nF3, nF3, nF3, nF3
00079F3F E800                       	smpsNoteFill        $00
00079F41 AA                         	dc.b	nF3
00079F42 E804                       	smpsNoteFill        $04
00079F44 A9A9 A9A9 A9               	dc.b	nE3, nE3, nE3, nE3, nE3
00079F49 E800                       	smpsNoteFill        $00
00079F4B A5A7 A9                    	dc.b	nC3, nD3, nE3
00079F4E E3                         	smpsReturn
00079F4F                            
00079F4F                            Mus81_GHZ_Call06:
00079F4F E804                       	smpsNoteFill        $04
00079F51 AAAA AAAA AAAA AA          	dc.b	nF3, nF3, nF3, nF3, nF3, nF3, nF3
00079F58 E800                       	smpsNoteFill        $00
00079F5A AA                         	dc.b	nF3
00079F5B E804                       	smpsNoteFill        $04
00079F5D A9A9 A9A9 A9A9 A9          	dc.b	nE3, nE3, nE3, nE3, nE3, nE3, nE3
00079F64 E800                       	smpsNoteFill        $00
00079F66 A9                         	dc.b	nE3
00079F67 E804                       	smpsNoteFill        $04
00079F69 A7A7 A7A7 A7A7 A7          	dc.b	nD3, nD3, nD3, nD3, nD3, nD3, nD3
00079F70 E800                       	smpsNoteFill        $00
00079F72 A7                         	dc.b	nD3
00079F73 E804                       	smpsNoteFill        $04
00079F75 A5A5 A5A5 A5               	dc.b	nC3, nC3, nC3, nC3, nC3
00079F7A E3                         	smpsReturn
00079F7B                            
00079F7B                            ; FM3 Data
00079F7B                            Mus81_GHZ_FM3:
00079F7D E080                       	smpsPan             panLeft, $00
00079F7F F8FE CA                    	smpsCall            Mus81_GHZ_Call02
00079F84 E0C0                       	smpsPan             panCenter, $00
00079F86 E9E8                       	smpsAlterPitch      $E8
00079F88 E6FE                       	smpsAlterVol        $FE
00079F8A 8001                       	dc.b	nRst, $01
00079F8C                            
00079F8C                            Mus81_GHZ_Loop0A:
00079F8C C901 E7C8 0F80 08C7 01E7+  	dc.b	nC6, $01, smpsNoAttack, nB5, $0F, nRst, $08, nBb5, $01, smpsNoAttack, nA5, $0F
00079F98 8008                       	dc.b	nRst, $08
00079F9A F700 02FF EE               	smpsLoop            $00, $02, Mus81_GHZ_Loop0A
00079F9F C901 E7C8 0780 08C7 01E7+  	dc.b	nC6, $01, smpsNoAttack, nB5, $07, nRst, $08, nBb5, $01, smpsNoAttack, nA5, $07
00079FAB 8008 CA01 E7C9 0F80 08C9+  	dc.b	nRst, $08, nCs6, $01, smpsNoAttack, nC6, $0F, nRst, $08, nC6, $01, smpsNoAttack
00079FB7 C80F 8008 C701 E7C6 10E7+  	dc.b	nB5, $0F, nRst, $08, nBb5, $01, smpsNoAttack, nA5, $10, smpsNoAttack, $3B, nRst
00079FC3 04                         	dc.b	$04
00079FC4                            
00079FC4                            Mus81_GHZ_Loop0B:
00079FC4 C701 E7C6 0F80 08C9 01E7+  	dc.b	nBb5, $01, smpsNoAttack, nA5, $0F, nRst, $08, nC6, $01, smpsNoAttack, nB5, $0F
00079FD0 8008 CA01 E7C9 0780 08     	dc.b	nRst, $08, nCs6, $01, smpsNoAttack, nC6, $07, nRst, $08
00079FD9 F700 02FF E7               	smpsLoop            $00, $02, Mus81_GHZ_Loop0B
00079FDE CA01 E7C9 0F80 08C9 01E7+  	dc.b	nCs6, $01, smpsNoAttack, nC6, $0F, nRst, $08, nC6, $01, smpsNoAttack, nB5, $28
00079FEA E73E                       	dc.b	smpsNoAttack, $3E
00079FEC E602                       	smpsAlterVol        $02
00079FEE E918                       	smpsAlterPitch      $18
00079FF0                            
00079FF0                            Mus81_GHZ_Jump02:
00079FF2 E9E8                       	smpsAlterPitch      $E8
00079FF4 F800 00                    	smpsCall            Mus81_GHZ_Call03
00079FF7 D2                         	dc.b	nA6
00079FF8 F800 00                    	smpsCall            Mus81_GHZ_Call03
00079FFB D9                         	dc.b	nE7
00079FFC F800 00                    	smpsCall            Mus81_GHZ_Call03
00079FFF D280 2480 D504 800C D210+  	dc.b	nA6, nRst, $24, nRst, nC7, $04, nRst, $0C, nA6, $10, nG6, $04
0007A00B 80D2 80D5 80               	dc.b	nRst, nA6, nRst, nC7, nRst
0007A010 F4                         	smpsModOff
0007A013 F800 00                    	smpsCall            Mus81_GHZ_Call04
0007A016 D004 D2D5 08D2             	dc.b	nG6, $04, nA6, nC7, $08, nA6
0007A01C F800 00                    	smpsCall            Mus81_GHZ_Call04
0007A01F D004 D2D5 08D9             	dc.b	nG6, $04, nA6, nC7, $08, nE7
0007A025 F800 00                    	smpsCall            Mus81_GHZ_Call04
0007A028 D004 D2D5 08D2             	dc.b	nG6, $04, nA6, nC7, $08, nA6
0007A02E E606                       	smpsAlterVol        $06
0007A030 BDBA 0480 1680             	dc.b	nC5, nA4, $04, nRst, $16, nRst
0007A036 E6FA                       	smpsAlterVol        $FA
0007A038 D908 80D5 80D2 D2D2 0480+  	dc.b	nE7, $08, nRst, nC7, nRst, nA6, nA6, nA6, $04, nRst, nC7, nRst
0007A044 D980                       	dc.b	nE7, nRst
0007A046 E918                       	smpsAlterPitch      $18
0007A04A E0C0                       	smpsPan             panCenter, $00
0007A04C E81E                       	smpsNoteFill        $1E
0007A04E E606                       	smpsAlterVol        $06
0007A050 C218 1818 1808 80C2 80C1+  	dc.b	nF5, $18, $18, $18, $18, $08, nRst, nF5, nRst, nE5, $18, $18
0007A05C 1818 0880 C180 C018 1818+  	dc.b	$18, $18, $08, nRst, nE5, nRst, nEb5, $18, $18, $18, $18, $08
0007A068 80C0 80C6 1818 1818 0880+  	dc.b	nRst, nEb5, nRst, nA5, $18, $18, $18, $18, $08, nRst, nA5, nRst
0007A074 E6FA                       	smpsAlterVol        $FA
0007A076 E800                       	smpsNoteFill        $00
0007A078 F6FF 76                    	smpsJump            Mus81_GHZ_Jump02
0007A07B                            
0007A07B                            Mus81_GHZ_Call03:
0007A07B 8034 80D0 04D2 D508        	dc.b	nRst, $34, nRst, nG6, $04, nA6, nC7, $08
0007A083 E3                         	smpsReturn
0007A084                            
0007A084                            Mus81_GHZ_Call04:
0007A084 E606                       	smpsAlterVol        $06
0007A086 C108 BD04 8012 80C1 08BD+  	dc.b	nE5, $08, nC5, $04, nRst, $12, nRst, nE5, $08, nC5, $04, nRst
0007A092 BF08 BC04 800E 80          	dc.b	nD5, $08, nB4, $04, nRst, $0E, nRst
0007A099 E6FA                       	smpsAlterVol        $FA
0007A09B E3                         	smpsReturn
0007A09C                            
0007A09C                            ; FM4 Data
0007A09C                            Mus81_GHZ_FM4:
0007A09E 8020 80                    	dc.b	nRst, $20, nRst
0007A0A1 E080                       	smpsPan             panLeft, $00
0007A0A3 E9E8                       	smpsAlterPitch      $E8
0007A0A5 E60A                       	smpsAlterVol        $0A
0007A0A7                            
0007A0A7                            Mus81_GHZ_Loop08:
0007A0A7 C501 E7C4 0F80 08C3 01E7+  	dc.b	nAb5, $01, smpsNoAttack, nG5, $0F, nRst, $08, nFs5, $01, smpsNoAttack, nF5, $0F
0007A0B3 8008                       	dc.b	nRst, $08
0007A0B5 F700 02FF EE               	smpsLoop            $00, $02, Mus81_GHZ_Loop08
0007A0BA C501 E7C4 0780 08C3 01E7+  	dc.b	nAb5, $01, smpsNoAttack, nG5, $07, nRst, $08, nFs5, $01, smpsNoAttack, nF5, $07
0007A0C6 8008 C701 E7C6 0F80 08C5+  	dc.b	nRst, $08, nBb5, $01, smpsNoAttack, nA5, $0F, nRst, $08, nAb5, $01, smpsNoAttack
0007A0D2 C40F 8008 C301 E7C2 10E7+  	dc.b	nG5, $0F, nRst, $08, nFs5, $01, smpsNoAttack, nF5, $10, smpsNoAttack, $3C, nRst
0007A0DE 04                         	dc.b	$04
0007A0DF                            
0007A0DF                            Mus81_GHZ_Loop09:
0007A0DF C301 E7C2 0F80 08C5 01E7+  	dc.b	nFs5, $01, smpsNoAttack, nF5, $0F, nRst, $08, nAb5, $01, smpsNoAttack, nG5, $0F
0007A0EB 8008 C701 E7C6 0780 08     	dc.b	nRst, $08, nBb5, $01, smpsNoAttack, nA5, $07, nRst, $08
0007A0F4 F700 02FF E7               	smpsLoop            $00, $02, Mus81_GHZ_Loop09
0007A0F9 C701 E7C6 0F80 08C5 01E7+  	dc.b	nBb5, $01, smpsNoAttack, nA5, $0F, nRst, $08, nAb5, $01, smpsNoAttack, nG5, $28
0007A105 E73F                       	dc.b	smpsNoAttack, $3F
0007A107 E6F6                       	smpsAlterVol        $F6
0007A109 E918                       	smpsAlterPitch      $18
0007A10B F4                         	smpsModOff
0007A10C                            
0007A10C                            Mus81_GHZ_Jump01:
0007A10E E9E8                       	smpsAlterPitch      $E8
0007A110 E618                       	smpsAlterVol        $18
0007A112 E080                       	smpsPan             panLeft, $00
0007A114 E6FD                       	smpsAlterVol        $FD
0007A116 F800 00                    	smpsCall            Mus81_GHZ_Call01
0007A119 BFBF C1C1 BDBD BABA B6B6+  	dc.b	nD5, nD5, nE5, nE5, nC5, nC5, nA4, nA4, nF4, nF4, nD5, nD5
0007A125 BCBC B8B8 BFBF             	dc.b	nB4, nB4, nG4, nG4, nD5, nD5
0007A12B F800 00                    	smpsCall            Mus81_GHZ_Call01
0007A12E B5B5 BDBD BABA B6B6 B3B3+  	dc.b	nE4, nE4, nC5, nC5, nA4, nA4, nF4, nF4, nD4, nD4, nB4, nB4
0007A13A E603                       	smpsAlterVol        $03
0007A13C E918                       	smpsAlterPitch      $18
0007A13E E9F4                       	smpsAlterPitch      $F4
0007A142 D010 D2D4                  	dc.b	nG6, $10, nA6, nB6
0007A146 E6F9                       	smpsAlterVol        $F9
0007A148 D528 E728 D710 D4D0 D528+  	dc.b	nC7, $28, smpsNoAttack, $28, nD7, $10, nB6, nG6, nC7, $28, smpsNoAttack, $28
0007A154 D410 D0D4 D528 E728 D710+  	dc.b	nB6, $10, nG6, nB6, nC7, $28, smpsNoAttack, $28, nD7, $10, nB6, nG6
0007A160 D540 E740                  	dc.b	nC7, $40, smpsNoAttack, $40
0007A164 E90C                       	smpsAlterPitch      $0C
0007A166 E607                       	smpsAlterVol        $07
0007A168 E6E8                       	smpsAlterVol        $E8
0007A16C E81E                       	smpsNoteFill        $1E
0007A16E E0C0                       	smpsPan             panCenter, $00
0007A170 E612                       	smpsAlterVol        $12
0007A172 BF18 1818 1808 80BF 80BD+  	dc.b	nD5, $18, $18, $18, $18, $08, nRst, nD5, nRst, nC5, $18, $18
0007A17E 1818 0880 BD80 BD18 1818+  	dc.b	$18, $18, $08, nRst, nC5, nRst, nC5, $18, $18, $18, $18, $08
0007A18A 80BD 80C2 1818 1818 0880+  	dc.b	nRst, nC5, nRst, nF5, $18, $18, $18, $18, $08, nRst, nF5, nRst
0007A196 E6EE                       	smpsAlterVol        $EE
0007A198 E800                       	smpsNoteFill        $00
0007A19A F6FF 70                    	smpsJump            Mus81_GHZ_Jump01
0007A19D                            
0007A19D                            Mus81_GHZ_Call01:
0007A19D C108 C1BD BDBA BAB6 B6BF+  	dc.b	nE5, $08, nE5, nC5, nC5, nA4, nA4, nF4, nF4, nD5, nD5, nB4
0007A1A9 BCB8 B8                    	dc.b	nB4, nG4, nG4
0007A1AC E3                         	smpsReturn
0007A1AD                            
0007A1AD                            ; FM5 Data
0007A1AD                            Mus81_GHZ_FM5:
0007A1AF 8020 80                    	dc.b	nRst, $20, nRst
0007A1B4 E040                       	smpsPan             panRight, $00
0007A1B6 E9E8                       	smpsAlterPitch      $E8
0007A1B8 E6F2                       	smpsAlterVol        $F2
0007A1BA                            
0007A1BA                            Mus81_GHZ_Loop02:
0007A1BA C201 E7C1 0F80 08C0 01E7+  	dc.b	nF5, $01, smpsNoAttack, nE5, $0F, nRst, $08, nEb5, $01, smpsNoAttack, nD5, $0F
0007A1C6 8008                       	dc.b	nRst, $08
0007A1C8 F700 02FF EE               	smpsLoop            $00, $02, Mus81_GHZ_Loop02
0007A1CD C201 E7C1 0780 08C0 01E7+  	dc.b	nF5, $01, smpsNoAttack, nE5, $07, nRst, $08, nEb5, $01, smpsNoAttack, nD5, $07
0007A1D9 8008 C301 E7C2 0F80 08C2+  	dc.b	nRst, $08, nFs5, $01, smpsNoAttack, nF5, $0F, nRst, $08, nF5, $01, smpsNoAttack
0007A1E5 C10F 8008 C001 E7BF 10E7+  	dc.b	nE5, $0F, nRst, $08, nEb5, $01, smpsNoAttack, nD5, $10, smpsNoAttack, $3C, nRst
0007A1F1 04                         	dc.b	$04
0007A1F2                            
0007A1F2                            Mus81_GHZ_Loop03:
0007A1F2 C001 E7BF 0F80 08C2 01E7+  	dc.b	nEb5, $01, smpsNoAttack, nD5, $0F, nRst, $08, nF5, $01, smpsNoAttack, nE5, $0F
0007A1FE 8008 C301 E7C2 0780 08     	dc.b	nRst, $08, nFs5, $01, smpsNoAttack, nF5, $07, nRst, $08
0007A207 F700 02FF E7               	smpsLoop            $00, $02, Mus81_GHZ_Loop03
0007A20C C301 E7C2 0F80 08C2 01E7+  	dc.b	nFs5, $01, smpsNoAttack, nF5, $0F, nRst, $08, nF5, $01, smpsNoAttack, nE5, $28
0007A218 E73F                       	dc.b	smpsNoAttack, $3F
0007A21A E918                       	smpsAlterPitch      $18
0007A21C E60E                       	smpsAlterVol        $0E
0007A21E                            
0007A21E                            Mus81_GHZ_Jump00:
0007A220 E9E8                       	smpsAlterPitch      $E8
0007A222 E040                       	smpsPan             panRight, $00
0007A224 E6FD                       	smpsAlterVol        $FD
0007A226 F800 00                    	smpsCall            Mus81_GHZ_Call00
0007A229 BFBF C1C1 BDBD BABA B6B6+  	dc.b	nD5, nD5, nE5, nE5, nC5, nC5, nA4, nA4, nF4, nF4, nD5, nD5
0007A235 BCBC B8B8 BFBF             	dc.b	nB4, nB4, nG4, nG4, nD5, nD5
0007A23B F800 00                    	smpsCall            Mus81_GHZ_Call00
0007A23E B5B5 BDBD BABA B6B6 B3B3+  	dc.b	nE4, nE4, nC5, nC5, nA4, nA4, nF4, nF4, nD4, nD4, nB4, nB4
0007A24A E918                       	smpsAlterPitch      $18
0007A24C E603                       	smpsAlterVol        $03
0007A24E E9F4                       	smpsAlterPitch      $F4
0007A252 E102                       	smpsAlterNote       $02
0007A254 D010 D2D4                  	dc.b	nG6, $10, nA6, nB6
0007A258 E6F9                       	smpsAlterVol        $F9
0007A25A D528 E728 D710 D4D0 D528+  	dc.b	nC7, $28, smpsNoAttack, $28, nD7, $10, nB6, nG6, nC7, $28, smpsNoAttack, $28
0007A266 D410 D0D4 D528 E728 D710+  	dc.b	nB6, $10, nG6, nB6, nC7, $28, smpsNoAttack, $28, nD7, $10, nB6, nG6
0007A272 D540 E740                  	dc.b	nC7, $40, smpsNoAttack, $40
0007A276 E90C                       	smpsAlterPitch      $0C
0007A278 E100                       	smpsAlterNote       $00
0007A27C E9F4                       	smpsAlterPitch      $F4
0007A27E E6FA                       	smpsAlterVol        $FA
0007A280                            
0007A280                            Mus81_GHZ_Loop04:
0007A280 D308 CED7 CED3 CED7 CE     	dc.b	nBb6, $08, nF6, nD7, nF6, nBb6, nF6, nD7, nF6
0007A289 F700 02FF F3               	smpsLoop            $00, $02, Mus81_GHZ_Loop04
0007A28E                            
0007A28E                            Mus81_GHZ_Loop05:
0007A28E D2CD D5CD D2CD D5CD        	dc.b	nA6, nE6, nC7, nE6, nA6, nE6, nC7, nE6
0007A296 F700 02FF F4               	smpsLoop            $00, $02, Mus81_GHZ_Loop05
0007A29B                            
0007A29B                            Mus81_GHZ_Loop06:
0007A29B D1CC D5CC D1CC D5CC        	dc.b	nAb6, nEb6, nC7, nEb6, nAb6, nEb6, nC7, nEb6
0007A2A3 F700 02FF F4               	smpsLoop            $00, $02, Mus81_GHZ_Loop06
0007A2A8                            
0007A2A8                            Mus81_GHZ_Loop07:
0007A2A8 D5D2 D9D2 D5D2 D9D2        	dc.b	nC7, nA6, nE7, nA6, nC7, nA6, nE7, nA6
0007A2B0 F700 02FF F4               	smpsLoop            $00, $02, Mus81_GHZ_Loop07
0007A2B5 E60D                       	smpsAlterVol        $0D
0007A2B7 E90C                       	smpsAlterPitch      $0C
0007A2B9 F6FF 63                    	smpsJump            Mus81_GHZ_Jump00
0007A2BC                            
0007A2BC                            Mus81_GHZ_Call00:
0007A2BC C108 C1BD BDBA BAB6 B6BF+  	dc.b	nE5, $08, nE5, nC5, nC5, nA4, nA4, nF4, nF4, nD5, nD5, nB4
0007A2C8 BCB8 B8                    	dc.b	nB4, nG4, nG4
0007A2CB E3                         	smpsReturn
0007A2CC EC7F                       	smpsPSGAlterVol     $7F
0007A2CE                            
0007A2CE                            ; PSG1 Data
0007A2CE                            Mus81_GHZ_PSG1:
0007A2CE F505                       	smpsPSGvoice        fTone_05
0007A2D0 F00E 0101 03               	smpsModSet          $0E, $01, $01, $03
0007A2D5 8040                       	dc.b	nRst, $40
0007A2D7 E810                       	smpsNoteFill        $10
0007A2D9 C118 BFC1 BFC1 0880 BF80+  	dc.b	nE5, $18, nD5, nE5, nD5, nE5, $08, nRst, nD5, nRst, nF5, $18
0007A2E5 C1                         	dc.b	nE5
0007A2E6 E800                       	smpsNoteFill        $00
0007A2E8 BF28 E728                  	dc.b	nD5, $28, smpsNoAttack, $28
0007A2EC E810                       	smpsNoteFill        $10
0007A2EE BF18 C1C2 10BF 18C1 C210+  	dc.b	nD5, $18, nE5, nF5, $10, nD5, $18, nE5, nF5, $10, $18
0007A2F9 E800                       	smpsNoteFill        $00
0007A2FB C134 E734                  	dc.b	nE5, $34, smpsNoAttack, $34
0007A2FF F4                         	smpsModOff
0007A300                            
0007A300                            Mus81_GHZ_Loop13:
0007A300 F501                       	smpsPSGvoice        fTone_01
0007A302                            
0007A302                            Mus81_GHZ_Loop12:
0007A302 8010 8004 8014 8008 8020+  	dc.b	nRst, $10, nRst, $04, nRst, $14, nRst, $08, nRst, $20, nRst, $04
0007A30E 8014 8008 8010             	dc.b	nRst, $14, nRst, $08, nRst, $10
0007A314 F701 03FF EA               	smpsLoop            $01, $03, Mus81_GHZ_Loop12
0007A319 8010 8004 8014 8008 8020+  	dc.b	nRst, $10, nRst, $04, nRst, $14, nRst, $08, nRst, $20, nRst, $04
0007A325 8014 8008 8010             	dc.b	nRst, $14, nRst, $08, nRst, $10
0007A32B F700 02FF D1               	smpsLoop            $00, $02, Mus81_GHZ_Loop13
0007A330 F505                       	smpsPSGvoice        fTone_05
0007A332 8018 8080 8080 0880 8080+  	dc.b	nRst, $18, nRst, nRst, nRst, nRst, $08, nRst, nRst, nRst, nRst, $18
0007A33E 8080 8080 0880 8080 8018+  	dc.b	nRst, nRst, nRst, nRst, $08, nRst, nRst, nRst, nRst, $18, nRst, nRst
0007A34A 8080 1080 0880 8008 8080+  	dc.b	nRst, nRst, $10, nRst, $08, nRst, nRst, $08, nRst, nRst, nRst, $10
0007A356 0880 8010                  	dc.b	$08, nRst, nRst, $10
0007A35A EC01                       	smpsPSGAlterVol     $01
0007A35C 8018 0880 8080             	dc.b	nRst, $18, $08, nRst, nRst, nRst
0007A362 ECFF                       	smpsPSGAlterVol     $FF
0007A364 F503                       	smpsPSGvoice        fTone_03
0007A366                            	
0007A366                            Mus81_GHZ_Loop132:
0007A366 F501                       	smpsPSGvoice        fTone_01
0007A368                            
0007A368                            Mus81_GHZ_Loop122:
0007A368 8010 C904 8014 C908 8020+  	dc.b	nRst, $10, nC6, $04, nRst, $14, nC6, $08, nRst, $20, nB5, $04
0007A374 8014 C808 8010             	dc.b	nRst, $14, nB5, $08, nRst, $10
0007A37A F701 03FF EA               	smpsLoop            $01, $03, Mus81_GHZ_Loop122
0007A37F 8010 C604 8014 C608 8020+  	dc.b	nRst, $10, nA5, $04, nRst, $14, nA5, $08, nRst, $20, nG5, $04
0007A38B 8014 C408 8010             	dc.b	nRst, $14, nG5, $08, nRst, $10
0007A391 F700 02FF D1               	smpsLoop            $00, $02, Mus81_GHZ_Loop132
0007A396 F505                       	smpsPSGvoice        fTone_05
0007A398 D318 D2D0 CECD 0880 CB80+  	dc.b	nBb6, $18, nA6, nG6, nF6, nE6, $08, nRst, nD6, nRst, nA5, $18
0007A3A4 C8C9 CBCD 0880 D280 D118+  	dc.b	nB5, nC6, nD6, nE6, $08, nRst, nA6, nRst, nAb6, $18, nG6, nF6
0007A3B0 CCCB 10C9 0880 8008 D0D2+  	dc.b	nEb6, nD6, $10, nC6, $08, nRst, nRst, $08, nG6, nA6, nG6, $10
0007A3BC 08D2 8010                  	dc.b	$08, nA6, nRst, $10
0007A3C0 EC01                       	smpsPSGAlterVol     $01
0007A3C2 C618 0880 C680             	dc.b	nA5, $18, $08, nRst, nA5, nRst
0007A3C8 ECFF                       	smpsPSGAlterVol     $FF
0007A3CA F503                       	smpsPSGvoice        fTone_03
0007A3CC F6FF 98                    	smpsJump            Mus81_GHZ_Loop132
0007A3CF                            
0007A3CF                            ; PSG2 Data
0007A3CF                            Mus81_GHZ_PSG2:
0007A3CF 8040                       	dc.b	nRst, $40
0007A3D1 ECFE                       	smpsPSGAlterVol     $FE
0007A3D3                            
0007A3D3                            Mus81_GHZ_Loop0F:
0007A3D3 E806                       	smpsNoteFill        $06
0007A3D5 D508 D4D2 D0D5 D4D2 D0     	dc.b	nC7, $08, nB6, nA6, nG6, nC7, nB6, nA6, nG6
0007A3DE F700 08FF F1               	smpsLoop            $00, $08, Mus81_GHZ_Loop0F
0007A3E3 E800                       	smpsNoteFill        $00
0007A3E5                            
0007A3E5                            Mus81_GHZ_Loop11:
0007A3E5 F501                       	smpsPSGvoice        fTone_01
0007A3E7                            
0007A3E7                            Mus81_GHZ_Loop10:
0007A3E7 8010 8004 8014 8008 8020+  	dc.b	nRst, $10, nRst, $04, nRst, $14, nRst, $08, nRst, $20, nRst, $04
0007A3F3 8014 8008 8010             	dc.b	nRst, $14, nRst, $08, nRst, $10
0007A3F9 F701 03FF EA               	smpsLoop            $01, $03, Mus81_GHZ_Loop10
0007A3FE 8010 8004 8014 8008 8020+  	dc.b	nRst, $10, nRst, $04, nRst, $14, nRst, $08, nRst, $20, nRst, $04
0007A40A 8014 8008 8010             	dc.b	nRst, $14, nRst, $08, nRst, $10
0007A410 F700 02FF D1               	smpsLoop            $00, $02, Mus81_GHZ_Loop11
0007A415 8034 E734 8008 8080 38E7+  	dc.b	nRst, $34, smpsNoAttack, $34, nRst, $08, nRst, nRst, $38, smpsNoAttack, $38, nRst
0007A421 0880 80CC 34E7 3480 08CC+  	dc.b	$08, nRst, nRst, nEb6, $34, smpsNoAttack, $34, nRst, $08, nEb6, nRst
0007A42C F505                       	smpsPSGvoice        fTone_05
0007A42E BD18 1818 1808 80BD 80     	dc.b	nC5, $18, $18, $18, $18, $08, nRst, nC5, nRst
0007A437 F503                       	smpsPSGvoice        fTone_03
0007A439                            	
0007A439                            Mus81_GHZ_Loop112:
0007A439 F501                       	smpsPSGvoice        fTone_01
0007A43B                            
0007A43B                            Mus81_GHZ_Loop102:
0007A43B 8010 CD04 8014 CD08 8020+  	dc.b	nRst, $10, nE6, $04, nRst, $14, nE6, $08, nRst, $20, nD6, $04
0007A447 8014 CB08 8010             	dc.b	nRst, $14, nD6, $08, nRst, $10
0007A44D F701 03FF EA               	smpsLoop            $01, $03, Mus81_GHZ_Loop102
0007A452 8010 C904 8014 C908 8020+  	dc.b	nRst, $10, nC6, $04, nRst, $14, nC6, $08, nRst, $20, nB5, $04
0007A45E 8014 C808 8010             	dc.b	nRst, $14, nB5, $08, nRst, $10
0007A464 F700 02FF D1               	smpsLoop            $00, $02, Mus81_GHZ_Loop112
0007A469 CB34 E734 C908 CBCD 38E7+  	dc.b	nD6, $34, smpsNoAttack, $34, nC6, $08, nD6, nE6, $38, smpsNoAttack, $38, nC6
0007A475 08C9 CDCC 34E7 34C9 08CC+  	dc.b	$08, nC6, nE6, nEb6, $34, smpsNoAttack, $34, nC6, $08, nEb6, nD6
0007A480 F505                       	smpsPSGvoice        fTone_05
0007A482 BD18 1818 1808 80BD 80     	dc.b	nC5, $18, $18, $18, $18, $08, nRst, nC5, nRst
0007A48B F503                       	smpsPSGvoice        fTone_03
0007A48D F6FF AA                    	smpsJump            Mus81_GHZ_Loop112
0007A490                            
0007A490                            ; PSG3 Data
0007A490                            Mus81_GHZ_PSG3:
0007A490 F3E7                       	smpsPSGform         $E7
0007A492 E806                       	smpsNoteFill        $06
0007A494 C610 1010                  	dc.b	nA5, $10, $10, $10
0007A498                            
0007A498                            Mus81_GHZ_Jump05:
0007A498 08                         	dc.b	$08
0007A499 F6FF FD                    	smpsJump            Mus81_GHZ_Jump05
0007A49C                            
0007A49C                            ; DAC Data
0007A49C                            Mus81_GHZ_DAC:
0007A49C 8008 8182 8181 8282 82     	dc.b	nRst, $08, dKick, dSnare, dKick, dKick, dSnare, dSnare, dSnare
0007A4A5                            
0007A4A5                            Mus81_GHZ_Loop00:
0007A4A5 8110 8208 8110 0882 10     	dc.b	dKick, $10, dSnare, $08, dKick, $10, $08, dSnare, $10
0007A4AE F700 07FF F3               	smpsLoop            $00, $07, Mus81_GHZ_Loop00
0007A4B3 8110 8208 8110 8208 0808   	dc.b	dKick, $10, dSnare, $08, dKick, $10, dSnare, $08, $08, $08
0007A4BD                            
0007A4BD                            Mus81_GHZ_Loop01:
0007A4BD 8110 8208 8110 0882 10     	dc.b	dKick, $10, dSnare, $08, dKick, $10, $08, dSnare, $10
0007A4C6 F700 07FF F3               	smpsLoop            $00, $07, Mus81_GHZ_Loop01
0007A4CB 8110 8208 8110 8208 0808   	dc.b	dKick, $10, dSnare, $08, dKick, $10, dSnare, $08, $08, $08
0007A4D5 F701 02FF E4               	smpsLoop            $01, $02, Mus81_GHZ_Loop01
0007A4DA F6FF E1                    	smpsJump            Mus81_GHZ_Loop01
0007A4DD                            
0007A4DD                            Mus81_GHZ_Voices:
0007A4DD                            ;	Voice $00
0007A4DD                            ;	$08
0007A4DD                            ;	$0A, $70, $30, $00, 	$1F, $1F, $5F, $5F, 	$12, $0E, $0A, $0A
0007A4DD                            ;	$00, $04, $04, $03, 	$2F, $2F, $2F, $2F, 	$24, $2D, $13, $80
0007A4DD                            	smpsVcAlgorithm     $00
0007A4DD                            	smpsVcFeedback      $01
0007A4DD                            	smpsVcUnusedBits    $00
0007A4DD                            	smpsVcDetune        $00, $03, $07, $00
0007A4DD                            	smpsVcCoarseFreq    $00, $00, $00, $0A
0007A4DD                            	smpsVcRateScale     $01, $01, $00, $00
0007A4DD                            	smpsVcAttackRate    $1F, $1F, $1F, $1F
0007A4DD                            	smpsVcAmpMod        $00, $00, $00, $00
0007A4DD                            	smpsVcDecayRate1    $0A, $0A, $0E, $12
0007A4DD                            	smpsVcDecayRate2    $03, $04, $04, $00
0007A4DD                            	smpsVcDecayLevel    $02, $02, $02, $02
0007A4DD                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007A4DD 080A 7030 001F 1F5F 5F12+  	smpsVcTotalLevel    $00, $13, $2D, $24
0007A4F6                            
0007A4F6                            ;	Voice $01
0007A4F6                            ;	$20
0007A4F6                            ;	$36, $35, $30, $31, 	$DF, $DF, $9F, $9F, 	$07, $06, $09, $06
0007A4F6                            ;	$07, $06, $06, $08, 	$20, $10, $10, $F8, 	$19, $37, $13, $80
0007A4F6                            	smpsVcAlgorithm     $00
0007A4F6                            	smpsVcFeedback      $04
0007A4F6                            	smpsVcUnusedBits    $00
0007A4F6                            	smpsVcDetune        $03, $03, $03, $03
0007A4F6                            	smpsVcCoarseFreq    $01, $00, $05, $06
0007A4F6                            	smpsVcRateScale     $02, $02, $03, $03
0007A4F6                            	smpsVcAttackRate    $1F, $1F, $1F, $1F
0007A4F6                            	smpsVcAmpMod        $00, $00, $00, $00
0007A4F6                            	smpsVcDecayRate1    $06, $09, $06, $07
0007A4F6                            	smpsVcDecayRate2    $08, $06, $06, $07
0007A4F6                            	smpsVcDecayLevel    $0F, $01, $01, $02
0007A4F6                            	smpsVcReleaseRate   $08, $00, $00, $00
0007A4F6 2036 3530 31DF DF9F 9F07+  	smpsVcTotalLevel    $00, $13, $37, $19
0007A50F                            
0007A50F                            ;	Voice $02
0007A50F                            ;	$36
0007A50F                            ;	$0F, $01, $01, $01, 	$1F, $1F, $1F, $1F, 	$12, $11, $0E, $00
0007A50F                            ;	$00, $0A, $07, $09, 	$FF, $0F, $1F, $0F, 	$18, $80, $80, $80
0007A50F                            	smpsVcAlgorithm     $06
0007A50F                            	smpsVcFeedback      $06
0007A50F                            	smpsVcUnusedBits    $00
0007A50F                            	smpsVcDetune        $00, $00, $00, $00
0007A50F                            	smpsVcCoarseFreq    $01, $01, $01, $0F
0007A50F                            	smpsVcRateScale     $00, $00, $00, $00
0007A50F                            	smpsVcAttackRate    $1F, $1F, $1F, $1F
0007A50F                            	smpsVcAmpMod        $00, $00, $00, $00
0007A50F                            	smpsVcDecayRate1    $00, $0E, $11, $12
0007A50F                            	smpsVcDecayRate2    $09, $07, $0A, $00
0007A50F                            	smpsVcDecayLevel    $00, $01, $00, $0F
0007A50F                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007A50F 360F 0101 011F 1F1F 1F12+  	smpsVcTotalLevel    $00, $00, $00, $18
0007A528                            
0007A528                            ;	Voice $03
0007A528                            ;	$3D
0007A528                            ;	$01, $02, $02, $02, 	$14, $0E, $8C, $0E, 	$08, $05, $02, $05
0007A528                            ;	$00, $0D, $0D, $0D, 	$1F, $1F, $1F, $1F, 	$1A, $80, $80, $80
0007A528                            	smpsVcAlgorithm     $05
0007A528                            	smpsVcFeedback      $07
0007A528                            	smpsVcUnusedBits    $00
0007A528                            	smpsVcDetune        $00, $00, $00, $00
0007A528                            	smpsVcCoarseFreq    $02, $02, $02, $01
0007A528                            	smpsVcRateScale     $00, $02, $00, $00
0007A528                            	smpsVcAttackRate    $0E, $0C, $0E, $14
0007A528                            	smpsVcAmpMod        $00, $00, $00, $00
0007A528                            	smpsVcDecayRate1    $05, $02, $05, $08
0007A528                            	smpsVcDecayRate2    $0D, $0D, $0D, $00
0007A528                            	smpsVcDecayLevel    $01, $01, $01, $01
0007A528                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007A528 3D01 0202 0214 0E8C 0E08+  	smpsVcTotalLevel    $00, $00, $00, $1A
0007A541                            
0007A541                            ;	Voice $04
0007A541                            ;	$2C
0007A541                            ;	$72, $78, $34, $34, 	$1F, $12, $1F, $12, 	$00, $0A, $00, $0A
0007A541                            ;	$00, $00, $00, $00, 	$0F, $1F, $0F, $1F, 	$16, $80, $17, $80
0007A541                            	smpsVcAlgorithm     $04
0007A541                            	smpsVcFeedback      $05
0007A541                            	smpsVcUnusedBits    $00
0007A541                            	smpsVcDetune        $03, $03, $07, $08
0007A541                            	smpsVcCoarseFreq    $04, $04, $08, $02
0007A541                            	smpsVcRateScale     $00, $00, $00, $00
0007A541                            	smpsVcAttackRate    $12, $1F, $12, $1F
0007A541                            	smpsVcAmpMod        $00, $00, $00, $00
0007A541                            	smpsVcDecayRate1    $0A, $00, $0A, $00
0007A541                            	smpsVcDecayRate2    $00, $00, $00, $00
0007A541                            	smpsVcDecayLevel    $01, $00, $01, $00
0007A541                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007A541 2C82 7834 341F 121F 1200+  	smpsVcTotalLevel    $00, $17, $00, $16
0007A55A                            
0007A55A                            ;	Voice $05
0007A55A                            ;	$2C
0007A55A                            ;	$74, $74, $34, $34, 	$1F, $12, $1F, $1F, 	$00, $00, $00, $00
0007A55A                            ;	$00, $01, $00, $01, 	$0F, $3F, $0F, $3F, 	$16, $80, $17, $80
0007A55A                            	smpsVcAlgorithm     $04
0007A55A                            	smpsVcFeedback      $05
0007A55A                            	smpsVcUnusedBits    $00
0007A55A                            	smpsVcDetune        $03, $03, $07, $07
0007A55A                            	smpsVcCoarseFreq    $04, $04, $04, $04
0007A55A                            	smpsVcRateScale     $00, $00, $00, $00
0007A55A                            	smpsVcAttackRate    $1F, $1F, $12, $1F
0007A55A                            	smpsVcAmpMod        $00, $00, $00, $00
0007A55A                            	smpsVcDecayRate1    $00, $00, $00, $00
0007A55A                            	smpsVcDecayRate2    $01, $00, $01, $00
0007A55A                            	smpsVcDecayLevel    $03, $00, $03, $00
0007A55A                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007A55A 2C74 7434 341F 121F 1F00+  	smpsVcTotalLevel    $00, $17, $00, $16
0007A573                            
0007A573                            ;	Voice $06
0007A573                            ;	$04
0007A573                            ;	$72, $42, $32, $32, 	$12, $12, $12, $12, 	$00, $08, $00, $08
0007A573                            ;	$00, $08, $00, $08, 	$0F, $1F, $0F, $1F, 	$23, $80, $23, $80
0007A573                            	smpsVcAlgorithm     $04
0007A573                            	smpsVcFeedback      $00
0007A573                            	smpsVcUnusedBits    $00
0007A573                            	smpsVcDetune        $03, $03, $04, $07
0007A573                            	smpsVcCoarseFreq    $02, $02, $02, $02
0007A573                            	smpsVcRateScale     $00, $00, $00, $00
0007A573                            	smpsVcAttackRate    $12, $12, $12, $12
0007A573                            	smpsVcAmpMod        $00, $00, $00, $00
0007A573                            	smpsVcDecayRate1    $08, $00, $08, $00
0007A573                            	smpsVcDecayRate2    $08, $00, $08, $00
0007A573                            	smpsVcDecayLevel    $01, $00, $01, $00
0007A573                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007A573 0472 4232 3212 1212 1200+  	smpsVcTotalLevel    $00, $23, $00, $23
0007A58C                            
0007A58C                            ;	Voice $07
0007A58C                            ;	$3D
0007A58C                            ;	$01, $02, $02, $02, 	$10, $50, $50, $50, 	$07, $08, $08, $08
0007A58C                            ;	$01, $00, $00, $00, 	$20, $17, $17, $17, 	$1C, $80, $80, $80
0007A58C                            	smpsVcAlgorithm     $05
0007A58C                            	smpsVcFeedback      $07
0007A58C                            	smpsVcUnusedBits    $00
0007A58C                            	smpsVcDetune        $00, $00, $00, $00
0007A58C                            	smpsVcCoarseFreq    $02, $02, $02, $01
0007A58C                            	smpsVcRateScale     $01, $01, $01, $00
0007A58C                            	smpsVcAttackRate    $10, $10, $10, $10
0007A58C                            	smpsVcAmpMod        $00, $00, $00, $00
0007A58C                            	smpsVcDecayRate1    $08, $08, $08, $07
0007A58C                            	smpsVcDecayRate2    $00, $00, $00, $01
0007A58C                            	smpsVcDecayLevel    $01, $01, $01, $02
0007A58C                            	smpsVcReleaseRate   $07, $07, $07, $00
0007A58C 3D01 0202 0210 5050 5007+  	smpsVcTotalLevel    $00, $00, $00, $1C
0007A5A5                            
0007A5A5                            ;	Voice $08
0007A5A5                            ;	$2C
0007A5A5                            ;	$74, $74, $34, $34, 	$1F, $12, $1F, $1F, 	$00, $07, $00, $07
0007A5A5                            ;	$00, $07, $00, $07, 	$00, $38, $00, $38, 	$16, $80, $17, $80
0007A5A5                            	smpsVcAlgorithm     $04
0007A5A5                            	smpsVcFeedback      $05
0007A5A5                            	smpsVcUnusedBits    $00
0007A5A5                            	smpsVcDetune        $03, $03, $07, $07
0007A5A5                            	smpsVcCoarseFreq    $04, $04, $04, $04
0007A5A5                            	smpsVcRateScale     $00, $00, $00, $00
0007A5A5                            	smpsVcAttackRate    $1F, $1F, $12, $1F
0007A5A5                            	smpsVcAmpMod        $00, $00, $00, $00
0007A5A5                            	smpsVcDecayRate1    $07, $00, $07, $00
0007A5A5                            	smpsVcDecayRate2    $07, $00, $07, $00
0007A5A5                            	smpsVcDecayLevel    $03, $00, $03, $00
0007A5A5                            	smpsVcReleaseRate   $08, $00, $08, $00
0007A5A5 2C74 7434 341F 121F 1F00+  	smpsVcTotalLevel    $00, $17, $00, $16
0007A5A5 2C74 7434 341F 121F 1F00+  	smpsVcTotalLevel    $00, $17, $00, $16
0007A5BE                            		even
0007A5BE                            Music82:	incbin	"sound/music/Mus82 - LZ.bin"
0007CD22                            		even
0007CD22                            Music83:	include	"sound/music/Mus83 - MZ.asm"
0007CD22                            Mus83_MZ_Header:
0007CD22 =00000001                  smpsHeaderStartSong = 1
0007CD22 0000                       	smpsHeaderVoice     Mus83_MZ_Voices
0007CD24 0603                       	smpsHeaderChan      $06, $03
0007CD26 0209                       	smpsHeaderTempo     $02, $09
0007CD28                            
0007CD2C 0000 E815                  	smpsHeaderFM        Mus83_MZ_FM1,	$E8, $15
0007CD30 0000 E80E                  	smpsHeaderFM        Mus83_MZ_FM2,	$E8, $0E
0007CD34 0000 E815                  	smpsHeaderFM        Mus83_MZ_FM3,	$E8, $15
0007CD38 0000 E817                  	smpsHeaderFM        Mus83_MZ_FM4,	$E8, $17
0007CD3C 0000 E817                  	smpsHeaderFM        Mus83_MZ_FM5,	$E8, $17
0007CD40 0000 D001 0008             	smpsHeaderPSG       Mus83_MZ_PSG1,	$D0, $01, $00, fTone_08
0007CD46 0000 D07F 0008             	smpsHeaderPSG       Mus83_MZ_PSG2,	$D0, $7F, $00, fTone_08
0007CD4C 0000 0B03 0009             	smpsHeaderPSG       Mus83_MZ_PSG3,	$0B, $03, $00, fTone_09
0007CD52                            
0007CD52                            ; FM3 Data
0007CD52                            Mus83_MZ_FM3:
0007CD52                            	;smpsAlterNote       $02
0007CD52                            
0007CD52                            ; FM1 Data
0007CD52                            Mus83_MZ_FM1:
0007CD54 8024 C606 C8C9 CD          	dc.b	nRst, $24,	nA5, $06, nB5, nC6, nE6
0007CD5B                            
0007CD5B                            Mus83_MZ_Jump04:
0007CD5B F800 00                    	smpsCall            Mus83_MZ_Call04
0007CD5E D209 8003 D206 D0D2 0980+  	dc.b	nA6, $09, nRst, $03, nA6, $06, nG6, nA6, $09, nRst, $03, nA6
0007CD6A 06D0 D209 8003 D206 D0D2+  	dc.b	$06, nG6, nA6, $09, nRst, $03, nA6, $06, nG6, nA6, $0C, nB6
0007CD76 CE12 CD35 8001 C606 C8C9+  	dc.b	nF6, $12, nE6, $35, nRst, $01,	nA5, $06, nB5, nC6, nE6
0007CD81 F800 00                    	smpsCall            Mus83_MZ_Call04
0007CD84 D224 D40C D124 D409 8003+  	dc.b	nA6, $24, nB6, $0C, nAb6, $24, nB6, $09, nRst, $03, nB6, $12
0007CD90 D24D 8001                  	dc.b	nA6, $4D, nRst, $01
0007CD94 F600 00                    	smpsJump            Mus83_MZ_Loop03
0007CD97                            	
0007CD97                            Mus83_MZ_Loop03:
0007CD97 D206 D503 D2D5 06D2 D4D0+  	dc.b	nA6, $06, nC7, $03, nA6, nC7, $06, nA6, nB6, nG6, nD6, nB6
0007CDA3 CED2 03CE D206 CED0 D2D4+  	dc.b	nF6, nA6, $03, nF6, nA6, $06, nF6, nG6, nA6, nB6, nG6
0007CDAE F700 02FF E5               	smpsLoop            $00, $02, Mus83_MZ_Loop03
0007CDB3 F6FF A6                    	smpsJump            Mus83_MZ_Jump04
0007CDB6                            	
0007CDB6                            Mus83_MZ_Call04:
0007CDB6 D409 8003 D406 D2          	dc.b	nB6, $09, nRst, $03, nB6, $06, nA6
0007CDBD D409 8003 D406 D2D4 0980+  	dc.b	nB6, $09, nRst, $03, nB6, $06, nA6, nB6, $09, nRst, $03, nB6
0007CDC9 06D2 D4D2 CDC9 D00C D206+  	dc.b	$06, nA6, nB6, nA6, nE6, nC6, nG6, $0C, nA6, $06, smpsNoAttack, nF6
0007CDD5 4D80 01                    	dc.b	$4D, nRst, $01
0007CDD8 E3                         	smpsReturn
0007CDD9                            
0007CDD9                            ; FM4 Data
0007CDD9                            Mus83_MZ_FM4:
0007CDDB E6F7                       	smpsAlterVol        $F7
0007CDDD 8006 C103 0306 80B5 1E     	dc.b	nRst, $06, nE5, $03, $03, $06, nRst, nE4, $1E
0007CDE8 E609                       	smpsAlterVol        $09
0007CDEA D406                       	dc.b	nB6, $06
0007CDEC                            
0007CDEC                            Mus83_MZ_Jump03:
0007CDEC F800 00                    	smpsCall            Mus83_MZ_Call03
0007CDEF D209 8003 D280 D406 80D2+  	dc.b	nA6, $09, nRst, $03, nA6, nRst, nB6, $06, nRst, nA6, $0C, nRst
0007CDFB 06D2 0980 03D2 80D4 0680+  	dc.b	$06, nA6, $09, nRst, $03, nA6, nRst, nB6, $06, nRst, nA6, $0C
0007CE07 8018 D003 800F D003 8039+  	dc.b	nRst, $18, nG6, $03, nRst, $0F, nG6, $03, nRst, $39, nB6, $06
0007CE13 F800 00                    	smpsCall            Mus83_MZ_Call03
0007CE16 CE09 8003 CE80 D206 80CE+  	dc.b	nF6, $09, nRst, $03, nF6, nRst, nA6, $06, nRst, nF6, $0C, nRst
0007CE22 06D1 0980 03D1 80D4 0680+  	dc.b	$06, nAb6, $09, nRst, $03, nAb6, nRst, nB6, $06, nRst, nAb6, $0C
0007CE2E 8018 D503 800F D503 8009+  	dc.b	nRst, $18, nC7, $03, nRst, $0F, nC7, $03, nRst, $09, nE7, $09
0007CE3A 8003 D980 D706 80D5 0380+  	dc.b	nRst, $03, nE7, nRst, nD7, $06, nRst, nC7, $03, nRst, nB6, $12
0007CE46 F800 00                    	smpsCall            Mus83_MZ_Call02
0007CE49 F6FF A1                    	smpsJump            Mus83_MZ_Jump03
0007CE4C                            
0007CE4C                            Mus83_MZ_Call03:
0007CE4C E703 80D4 80D5 0680 D40C+  	dc.b	smpsNoAttack, $03, nRst, nB6, nRst, nC7, $06, nRst, nB6, $0C, nRst, $06
0007CE58 D409 8003 D480 D506 80D4+  	dc.b	nB6, $09, nRst, $03, nB6, nRst, nC7, $06, nRst, nB6, $0C, nRst
0007CE64 18D5 0380 0FD5 0380 1BD5+  	dc.b	$18, nC7, $03, nRst, $0F, nC7, $03, nRst, $1B, nC7, $03, nRst
0007CE70 0FD5 0380 09               	dc.b	$0F, nC7, $03, nRst, $09
0007CE75 E3                         	smpsReturn
0007CE76                            
0007CE76                            ; FM5 Data
0007CE76                            Mus83_MZ_FM5:
0007CE78 E6FC                       	smpsAlterVol        $FC
0007CE7A E924                       	smpsAlterPitch      $24
0007CE7C 8006 B503 0306 80A9 1E     	dc.b	nRst, $06, nE4, $03, $03, $06, nRst, nE3, $1E
0007CE87 E9DC                       	smpsAlterPitch      $DC
0007CE89 E604                       	smpsAlterVol        $04
0007CE8B D006                       	dc.b	nG6, $06
0007CE8D                            
0007CE8D                            Mus83_MZ_Jump02:
0007CE8D F800 00                    	smpsCall            Mus83_MZ_Call01
0007CE90 CE09 8003 CE80 D006 80CE+  	dc.b	nF6, $09, nRst, $03, nF6, nRst, nG6, $06, nRst, nF6, $0C, nRst
0007CE9C 06CE 0980 03CE 80D0 0680+  	dc.b	$06, nF6, $09, nRst, $03, nF6, nRst, nG6, $06, nRst, nF6, $0C
0007CEA8 8018 CD03 800F CD03 8039+  	dc.b	nRst, $18, nE6, $03, nRst, $0F, nE6, $03, nRst, $39, nG6, $06
0007CEB4 F800 00                    	smpsCall            Mus83_MZ_Call01
0007CEB7 CB09 8003 CB80 CE06 80CB+  	dc.b	nD6, $09, nRst, $03, nD6, nRst, nF6, $06, nRst, nD6, $0C, nRst
0007CEC3 06CD 0980 03CD 80D1 0680+  	dc.b	$06, nE6, $09, nRst, $03, nE6, nRst, nAb6, $06, nRst, nE6, $0C
0007CECF 8018 D203 800F D203 8009+  	dc.b	nRst, $18, nA6, $03, nRst, $0F, nA6, $03, nRst, $09, nC7, $09
0007CEDB 8003 D580 D406 80D2 0380+  	dc.b	nRst, $03, nC7, nRst, nB6, $06, nRst, nA6, $03, nRst, nAb6, $12
0007CEE7 E103                       	smpsAlterNote       $03
0007CEE9 F800 00                    	smpsCall            Mus83_MZ_Call02
0007CEEC E100                       	smpsAlterNote       $00
0007CEEE F6FF 9D                    	smpsJump            Mus83_MZ_Jump02
0007CEF1                            
0007CEF1                            Mus83_MZ_Call01:
0007CEF1 E703 80D0 80D2 0680 D00C+  	dc.b	smpsNoAttack, $03, nRst, nG6, nRst, nA6, $06, nRst, nG6, $0C, nRst, $06
0007CEFD D009 8003 D080 D206 80D0+  	dc.b	nG6, $09, nRst, $03, nG6, nRst, nA6, $06, nRst, nG6, $0C, nRst
0007CF09 18D2 0380 0FD2 0380 1BD2+  	dc.b	$18, nA6, $03, nRst, $0F, nA6, $03, nRst, $1B, nA6, $03, nRst
0007CF15 0FD2 0380 09               	dc.b	$0F, nA6, $03, nRst, $09
0007CF1A E3                         	smpsReturn
0007CF1B                            
0007CF1B                            ; FM2 Data
0007CF1B                            Mus83_MZ_FM2:
0007CF1D 8006 B503 B5               	dc.b	nRst, $06, nE4, $03, nE4
0007CF22 E201                       	smpsNop             $01
0007CF24 B506 80A9 24               	dc.b	nE4, $06, nRst, nE3, $24
0007CF29                            
0007CF29                            Mus83_MZ_Jump01:
0007CF29 F800 00                    	smpsCall            Mus83_MZ_Call00
0007CF2C                            
0007CF2C                            Mus83_MZ_Loop00:
0007CF2C AC03 80AC 06B3 0380 B306+  	dc.b	nG3, $03, nRst, nG3, $06, nD4, $03, nRst, nD4, $06, nB3, $03
0007CF38 80B0 06B3 0380 B306        	dc.b	nRst, nB3, $06, nD4, $03, nRst, nD4, $06
0007CF40 F701 02FF E8               	smpsLoop            $01, $02, Mus83_MZ_Loop00
0007CF45 B103 80B1 06B8 0380 B806+  	dc.b	nC4, $03, nRst, nC4, $06, nG4, $03, nRst, nG4, $06, nE4, $03
0007CF51 80B5 06B8 0380 B806 B003+  	dc.b	nRst, nE4, $06, nG4, $03, nRst, nG4, $06, nB3, $03, nRst, nB3
0007CF5D 06B6 0380 B606 B503 80B5+  	dc.b	$06, nF4, $03, nRst, nF4, $06, nE4, $03, nRst, nE4, $06, nB3
0007CF69 0380 B006                  	dc.b	$03, nRst, nB3, $06
0007CF6D F800 00                    	smpsCall            Mus83_MZ_Call00
0007CF70 B003 80B0 06B6 0380 B606+  	dc.b	nB3, $03, nRst, nB3, $06, nF4, $03, nRst, nF4, $06, nD4, $03
0007CF7C 80B3 06B6 0380 B606 B503+  	dc.b	nRst, nD4, $06, nF4, $03, nRst, nF4, $06, nE4, $03, nRst, nE4
0007CF88 06BC 0380 BC06 B903 80B9+  	dc.b	$06, nB4, $03, nRst, nB4, $06, nAb4, $03, nRst, nAb4, $06, nB4
0007CF94 0380 BC06 AE03 80AE 06B5+  	dc.b	$03, nRst, nB4, $06, nA3, $03, nRst, nA3, $06, nE4, $03, nRst
0007CFA0 B506 B103 80B1 06B5 0380+  	dc.b	nE4, $06, nC4, $03, nRst, nC4, $06, nE4, $03, nRst, nE4, $06
0007CFAC AE03 80AE 06B5 0380 B506+  	dc.b	nA3, $03, nRst, nA3, $06, nE4, $03, nRst, nE4, $06, nD4, $03
0007CFB8 80B3 06B5 0380 B506        	dc.b	nRst, nD4, $06, nE4, $03, nRst, nE4, $06
0007CFC0                            
0007CFC0                            Mus83_MZ_Loop01:
0007CFC0 AE12 AE06 AC12 AC06 AA12+  	dc.b	nA3, $12, nA3, $06, nG3, $12, nG3, $06, nF3, $12, nF3, $06
0007CFCC AC12 AC06                  	dc.b	nG3, $12, nG3, $06
0007CFD0 F701 02FF EC               	smpsLoop            $01, $02, Mus83_MZ_Loop01
0007CFD5 E201                       	smpsNop             $01
0007CFD7 F6FF 50                    	smpsJump            Mus83_MZ_Jump01
0007CFDA                            
0007CFDA                            Mus83_MZ_Call00:
0007CFDA AE03 80AE 06B5 0380 B506+  	dc.b	nA3, $03, nRst, nA3, $06, nE4, $03, nRst, nE4, $06, nD4, $03
0007CFE6 80B3 06B5 0380 B506        	dc.b	nRst, nD4, $06, nE4, $03, nRst, nE4, $06
0007CFEE F700 02FF E8               	smpsLoop            $00, $02, Mus83_MZ_Call00
0007CFF3                            
0007CFF3                            Mus83_MZ_Loop05:
0007CFF3 B303 80B3 06BA 0380 BA06+  	dc.b	nD4, $03, nRst, nD4, $06, nA4, $03, nRst, nA4, $06, nF4, $03
0007CFFF 80B6 06BA 0380 BA06        	dc.b	nRst, nF4, $06, nA4, $03, nRst, nA4, $06
0007D007 F700 02FF E8               	smpsLoop            $00, $02, Mus83_MZ_Loop05
0007D00C E3                         	smpsReturn
0007D00D                            
0007D00D                            ; PSG1 Data
0007D00D                            Mus83_MZ_PSG1:
0007D00D 803C                       	dc.b	nRst, $3C
0007D00F                            
0007D00F                            Mus83_MZ_Jump06:
0007D00F 8060                       	dc.b	nRst, $60
0007D011 F800 00                    	smpsCall            Mus83_MZ_Call06
0007D014 802A DA0C DA06 D70C D406+  	dc.b	nRst, $2A, nF7, $0C, nF7, $06, nD7, $0C, nB6, $06, nAb6, $2A
0007D020 8048                       	dc.b	nRst, $48
0007D022 F800 00                    	smpsCall            Mus83_MZ_Call06
0007D025 8060                       	dc.b	nRst, $60
0007D027                            
0007D027                            Mus83_MZ_Loop03_PSG:
0007D027 8006 8003 8080 0680 8080+  	dc.b	nRst, $06, nRst, $03, nRst, nRst, $06, nRst, nRst, nRst, nRst, nRst
0007D033 8080 0380 8006 8080 8080+  	dc.b	nRst, nRst, $03, nRst, nRst, $06, nRst, nRst, nRst, nRst, nRst
0007D03E F700 02FF E5               	smpsLoop            $00, $02, Mus83_MZ_Loop03_PSG
0007D043 F6FF CA                    	smpsJump            Mus83_MZ_Jump06
0007D046                            
0007D046                            Mus83_MZ_Call06:
0007D046 8030 DA03 D7D2 CED7 D2CE+  	dc.b	nRst, $30, nF7, $03, nD7, nA6, nF6, nD7, nA6, nF6, nD6, nA6
0007D052 CECB C6CE CBC6 C227 803C   	dc.b	nF6, nD6, nA5, nF6, nD6, nA5, nF5, $27, nRst, $3C
0007D05C E3                         	smpsReturn
0007D05D                            
0007D05D                            ; PSG2 Data
0007D05D                            Mus83_MZ_PSG2:
0007D05D 8002                       	dc.b	nRst, $02
0007D05F E101                       	smpsAlterNote       $01
0007D061 F6FF AA                    	smpsJump            Mus83_MZ_PSG1
0007D064                            
0007D064                            ; PSG3 Data
0007D064                            Mus83_MZ_PSG3:
0007D064 F3E7                       	smpsPSGform         $E7
0007D066 ECFF                       	smpsPSGAlterVol     $FF
0007D068 8006 C103 0306 80B5 24     	dc.b	nRst, $06, nE5, $03, $03, $06, nRst, nE4, $24
0007D071 EC01                       	smpsPSGAlterVol     $01
0007D073                            
0007D073                            Mus83_MZ_Jump05:
0007D073 F800 00                    	smpsCall            Mus83_MZ_Call05
0007D076 ACAC B3B3 B0B0 B3B3 ACAC+  	dc.b	nG3, nG3, nD4, nD4, nB3, nB3, nD4, nD4, nG3, nG3, nD4, nD4
0007D082 B0B0 B3B3 B1B1 B8B8 B5B5+  	dc.b	nB3, nB3, nD4, nD4, nC4, nC4, nG4, nG4, nE4, nE4, nG4, nG4
0007D08E B0B0 B6B6 B5B5 B0B0        	dc.b	nB3, nB3, nF4, nF4, nE4, nE4, nB3, nB3
0007D096 F800 00                    	smpsCall            Mus83_MZ_Call05
0007D099 B0B0 B6B6 B3B3 B6B6 B5B5+  	dc.b	nB3, nB3, nF4, nF4, nD4, nD4, nF4, nF4, nE4, nE4, nB4, nB4
0007D0A5 B9B9 BCBC AEAE B5B5 B1B1+  	dc.b	nAb4, nAb4, nB4, nB4, nA3, nA3, nE4, nE4, nC4, nC4, nE4, nE4
0007D0B1 AEAE B5B5 B3B3 B5B5        	dc.b	nA3, nA3, nE4, nE4, nD4, nD4, nE4, nE4
0007D0B9 ECFF                       	smpsPSGAlterVol     $FF
0007D0BB                            
0007D0BB                            Mus83_MZ_Loop02:
0007D0BB BA12 BA06 B812 B806 B612+  	dc.b	nA4, $12, nA4, $06, nG4, $12, nG4, $06, nF4, $12, nF4, $06
0007D0C7 B812 B806                  	dc.b	nG4, $12, nG4, $06
0007D0CB F700 02FF EC               	smpsLoop            $00, $02, Mus83_MZ_Loop02
0007D0D0 EC01                       	smpsPSGAlterVol     $01
0007D0D2 F6FF 9F                    	smpsJump            Mus83_MZ_Jump05
0007D0D5                            
0007D0D5                            Mus83_MZ_Call05:
0007D0D5 AE06 AEB5 B5B3 B3B5 B5AE+  	dc.b	nA3, $06, nA3, nE4, nE4, nD4, nD4, nE4, nE4, nA3, nA3, nE4
0007D0E1 B5B3 B3B5 B5B3 B3BA BAB6+  	dc.b	nE4, nD4, nD4, nE4, nE4, nD4, nD4, nA4, nA4, nF4, nF4, nA4
0007D0ED BAB3 B3BA BAB6 B6BA BA     	dc.b	nA4, nD4, nD4, nA4, nA4, nF4, nF4, nA4, nA4
0007D0F6 E3                         	smpsReturn
0007D0F7                            
0007D0F7                            ; DAC Data
0007D0F7                            Mus83_MZ_DAC:
0007D0F7 8006 8203 030C 810C 0C0C   	dc.b	nRst, $06, dSnare, $03, $03, $0C, dKick, $0C, $0C, $0C
0007D101                            
0007D101                            Mus83_MZ_Jump00:
0007D101 810C                       	dc.b	dKick, $0C
0007D103 F6FF FC                    	smpsJump            Mus83_MZ_Jump00
0007D106                            
0007D106                            Mus83_MZ_Call02:
0007D106 E806                       	smpsNoteFill        $06
0007D108                            
0007D108                            Mus83_MZ_Loop04:
0007D108 8006 D9D5 D20C D706 D4D0+  	dc.b	nRst, $06, nE7, nC7, nA6, $0C, nD7, $06, nB6, nG6, nRst, nC7
0007D114 D2CE 0CD7 06D4 D0          	dc.b	nA6, nF6, $0C, nD7, $06, nB6, nG6
0007D11B F700 02FF E9               	smpsLoop            $00, $02, Mus83_MZ_Loop04
0007D120 E800                       	smpsNoteFill        $00
0007D122 E3                         	smpsReturn
0007D123                            
0007D123                            Mus83_MZ_Voices:
0007D123                            ;	Voice $00
0007D123                            ;	$22
0007D123                            ;	$0A, $13, $05, $11, 	$03, $12, $12, $11, 	$00, $13, $13, $00
0007D123                            ;	$03, $02, $02, $01, 	$1F, $1F, $0F, $0F, 	$1E, $18, $26, $81
0007D123                            	smpsVcAlgorithm     $02
0007D123                            	smpsVcFeedback      $04
0007D123                            	smpsVcUnusedBits    $00
0007D123                            	smpsVcDetune        $01, $00, $01, $00
0007D123                            	smpsVcCoarseFreq    $01, $05, $03, $0A
0007D123                            	smpsVcRateScale     $00, $00, $00, $00
0007D123                            	smpsVcAttackRate    $11, $12, $12, $03
0007D123                            	smpsVcAmpMod        $00, $00, $00, $00
0007D123                            	smpsVcDecayRate1    $00, $13, $13, $00
0007D123                            	smpsVcDecayRate2    $01, $02, $02, $03
0007D123                            	smpsVcDecayLevel    $00, $00, $01, $01
0007D123                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007D123 220A 1305 1103 1212 1100+  	smpsVcTotalLevel    $01, $26, $18, $1E
0007D13C                            
0007D13C                            ;	Voice $01
0007D13C                            ;	$3A
0007D13C                            ;	$61, $3C, $14, $31, 	$9C, $DB, $9C, $DA, 	$04, $09, $04, $03
0007D13C                            ;	$03, $01, $03, $00, 	$1F, $0F, $0F, $AF, 	$21, $47, $31, $80
0007D13C                            	smpsVcAlgorithm     $02
0007D13C                            	smpsVcFeedback      $07
0007D13C                            	smpsVcUnusedBits    $00
0007D13C                            	smpsVcDetune        $03, $01, $03, $06
0007D13C                            	smpsVcCoarseFreq    $01, $04, $0C, $01
0007D13C                            	smpsVcRateScale     $03, $02, $03, $02
0007D13C                            	smpsVcAttackRate    $1A, $1C, $1B, $1C
0007D13C                            	smpsVcAmpMod        $00, $00, $00, $00
0007D13C                            	smpsVcDecayRate1    $03, $04, $09, $04
0007D13C                            	smpsVcDecayRate2    $00, $03, $01, $03
0007D13C                            	smpsVcDecayLevel    $0A, $00, $00, $01
0007D13C                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007D13C 3A61 3C14 319C DB9C DA04+  	smpsVcTotalLevel    $00, $31, $47, $21
0007D155                            
0007D155                            ;	Voice $02
0007D155                            ;	$3A
0007D155                            ;	$01, $07, $01, $01, 	$8E, $8E, $8D, $53, 	$0E, $0E, $0E, $03
0007D155                            ;	$00, $00, $00, $00, 	$1F, $FF, $1F, $0F, 	$18, $28, $27, $80
0007D155                            	smpsVcAlgorithm     $02
0007D155                            	smpsVcFeedback      $07
0007D155                            	smpsVcUnusedBits    $00
0007D155                            	smpsVcDetune        $00, $00, $00, $00
0007D155                            	smpsVcCoarseFreq    $01, $01, $07, $01
0007D155                            	smpsVcRateScale     $01, $02, $02, $02
0007D155                            	smpsVcAttackRate    $13, $0D, $0E, $0E
0007D155                            	smpsVcAmpMod        $00, $00, $00, $00
0007D155                            	smpsVcDecayRate1    $03, $0E, $0E, $0E
0007D155                            	smpsVcDecayRate2    $00, $00, $00, $00
0007D155                            	smpsVcDecayLevel    $00, $01, $0F, $01
0007D155                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007D155 3A01 0701 018E 8E8D 530E+  	smpsVcTotalLevel    $00, $27, $28, $18
0007D16E                            
0007D16E                            ;	Voice $03
0007D16E                            ;	$23
0007D16E                            ;	$7C, $32, $00, $00, 	$5F, $58, $DC, $DF, 	$04, $0B, $04, $04
0007D16E                            ;	$06, $0C, $08, $08, 	$1F, $1F, $BF, $BF, 	$24, $26, $16, $80
0007D16E                            	smpsVcAlgorithm     $03
0007D16E                            	smpsVcFeedback      $04
0007D16E                            	smpsVcUnusedBits    $00
0007D16E                            	smpsVcDetune        $00, $00, $03, $07
0007D16E                            	smpsVcCoarseFreq    $00, $00, $02, $0C
0007D16E                            	smpsVcRateScale     $03, $03, $01, $01
0007D16E                            	smpsVcAttackRate    $1F, $1C, $18, $1F
0007D16E                            	smpsVcAmpMod        $00, $00, $00, $00
0007D16E                            	smpsVcDecayRate1    $04, $04, $0B, $04
0007D16E                            	smpsVcDecayRate2    $08, $08, $0C, $06
0007D16E                            	smpsVcDecayLevel    $0B, $0B, $01, $01
0007D16E                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007D16E 237C 3200 005F 58DC DF04+  	smpsVcTotalLevel    $00, $16, $26, $24
0007D187                            
0007D187                            ;	Voice $04
0007D187                            ;	$02
0007D187                            ;	$3C, $32, $55, $51, 	$1F, $98, $1F, $9F, 	$0F, $11, $0E, $11
0007D187                            ;	$0E, $05, $08, $05, 	$5F, $0F, $6F, $0F, 	$2D, $2D, $2F, $80
0007D187                            	smpsVcAlgorithm     $02
0007D187                            	smpsVcFeedback      $00
0007D187                            	smpsVcUnusedBits    $00
0007D187                            	smpsVcDetune        $05, $05, $03, $03
0007D187                            	smpsVcCoarseFreq    $01, $05, $02, $0C
0007D187                            	smpsVcRateScale     $02, $00, $02, $00
0007D187                            	smpsVcAttackRate    $1F, $1F, $18, $1F
0007D187                            	smpsVcAmpMod        $00, $00, $00, $00
0007D187                            	smpsVcDecayRate1    $11, $0E, $11, $0F
0007D187                            	smpsVcDecayRate2    $05, $08, $05, $0E
0007D187                            	smpsVcDecayLevel    $00, $06, $00, $05
0007D187                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007D187 023C 3255 511F 981F 9F0F+  	smpsVcTotalLevel    $00, $2F, $2D, $2D
0007D1A0                            	
0007D1A0                            	smpsVcAlgorithm     $05
0007D1A0                            	smpsVcFeedback      $04
0007D1A0                            	smpsVcUnusedBits    $00
0007D1A0                            	smpsVcDetune        $01, $00, $01, $00
0007D1A0                            	smpsVcCoarseFreq    $01, $05, $03, $0A
0007D1A0                            	smpsVcRateScale     $00, $00, $00, $00
0007D1A0                            	smpsVcAttackRate    $11, $12, $12, $03
0007D1A0                            	smpsVcAmpMod        $00, $00, $00, $00
0007D1A0                            	smpsVcDecayRate1    $00, $13, $13, $00
0007D1A0                            	smpsVcDecayRate2    $01, $02, $02, $03
0007D1A0                            	smpsVcDecayLevel    $00, $00, $01, $01
0007D1A0                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007D1A0 250A 1305 1103 1212 1100+  	smpsVcTotalLevel    $01, $26, $18, $1E
0007D1B9                            
0007D1B9                            
0007D1BA 00                         		even
0007D1BA                            Music84:	include	"sound/music/Mus84 - SLZ.asm"
0007D1BA                            Mus84_SLZ_Header:
0007D1BA =00000001                  smpsHeaderStartSong = 1
0007D1BA 0000                       	smpsHeaderVoice     Mus84_SLZ_Voices
0007D1BC 0603                       	smpsHeaderChan      $06, $03
0007D1BE 020C                       	smpsHeaderTempo     $02, $0C
0007D1C0                            
0007D1C4 0000 E800                  	smpsHeaderFM        Mus84_SLZ_FM1,	$E8, $00
0007D1C8 0000 E806                  	smpsHeaderFM        Mus84_SLZ_FM2,	$E8, $06
0007D1CC 0000 DC1A                  	smpsHeaderFM        Mus84_SLZ_FM3,	$DC, $1A
0007D1D0 0000 DC1A                  	smpsHeaderFM        Mus84_SLZ_FM4,	$DC, $1A
0007D1D4 0000 F420                  	smpsHeaderFM        Mus84_SLZ_FM5,	$F4, $20
0007D1D8 0000 7816 0005             	smpsHeaderPSG       Mus84_SLZ_PSG1,	$78, $16, $00, fTone_05
0007D1DE 0000 7816 0005             	smpsHeaderPSG       Mus84_SLZ_PSG2,	$78, $16, $00, fTone_05
0007D1E4 0000 0004 0004             	smpsHeaderPSG       Mus84_SLZ_PSG3,	$00, $04, $00, fTone_04
0007D1EA                            
0007D1EA                            ; FM1 Data
0007D1EA                            Mus84_SLZ_FM1:
0007D1EC 800C C4C6 D0               	dc.b	nRst, $0C, nG5, nA5, nG6
0007D1F1                            
0007D1F1                            Mus84_SLZ_Jump05:
0007D1F1 F800 00                    	smpsCall            Mus84_SLZ_Call00
0007D1F4 CD1E                       	dc.b	nE6, $1E
0007D1F6                            
0007D1F6                            Mus84_SLZ_Loop00:
0007D1F6 D906 D53C 801E             	dc.b	nE7, $06, nC7, $3C, nRst, $1E
0007D1FC F700 03FF F6               	smpsLoop            $00, $03, Mus84_SLZ_Loop00
0007D201 D906 D518 C40C C6D0        	dc.b	nE7, $06, nC7, $18, nG5, $0C, nA5, nG6
0007D209 F6FF E6                    	smpsJump            Mus84_SLZ_Jump05
0007D20C                            
0007D20C                            Mus84_SLZ_Call00:
0007D20C F800 00                    	smpsCall            Mus84_SLZ_Call0A
0007D20F CD1E CE06 CDCB 12C4 0CC6+  	dc.b	nE6, $1E, nF6, $06, nE6, nD6, $12, nG5, $0C, nA5, nG6
0007D21A F800 00                    	smpsCall            Mus84_SLZ_Call0A
0007D21D E3                         	smpsReturn
0007D21E                            
0007D21E                            Mus84_SLZ_Call0A:
0007D21E CD2A CD03 CED0 09D2 D306+  	dc.b	nE6, $2A, nE6, $03, nF6, nG6, $09, nA6, nBb6, $06, nA6, $0C
0007D22A D0CE 1ECE 06CD CE1E CB0C+  	dc.b	nG6, nF6, $1E, nF6, $06, nE6, nF6, $1E, nD6, $0C, nE6, nF6
0007D236 2ACB 03CD CE09 D0D1 06D0+  	dc.b	$2A, nD6, $03, nE6, nF6, $09, nG6, nAb6, $06, nG6, $0C, nF6
0007D242 E3                         	smpsReturn
0007D243                            
0007D243                            ; FM2 Data
0007D243                            Mus84_SLZ_FM2:
0007D245                            
0007D245 8030                       	dc.b	nRst, $30
0007D247                            
0007D247                            Mus84_SLZ_Jump04:
0007D247 F800 00                    	smpsCall            Mus84_SLZ_Call07
0007D24A 8006 B002 8001 B002 8001+  	dc.b	nRst, $06, nB3, $02, nRst, $01, nB3, $02, nRst, $01, nC4, $06
0007D256 8003 B180 06B1 1280 06B1+  	dc.b	nRst, $03, nC4, nRst, $06, nC4, $12, nRst, $06, nC4, $02, nRst
0007D262 01B1 0280 01B3 0680 03B3+  	dc.b	$01, nC4, $02, nRst, $01, nD4, $06, nRst, $03, nD4, nRst, $06
0007D26E AC12 B306 AC               	dc.b	nG3, $12, nD4, $06, nG3
0007D273 F800 00                    	smpsCall            Mus84_SLZ_Call07
0007D276 8006 B302 8001 B002 8001   	dc.b	nRst, $06, nD4, $02, nRst, $01, nB3, $02, nRst, $01
0007D280 F800 00                    	smpsCall            Mus84_SLZ_Call08
0007D283 B002 8001 B502 8001 B606+  	dc.b	nB3, $02, nRst, $01, nE4, $02, nRst, $01, nF4, $06, nRst, $03
0007D28F B680 06B6 1280 06B8 0280+  	dc.b	nF4, nRst, $06, nF4, $12, nRst, $06, nG4, $02, nRst, $01, nF4
0007D29B 0280 01                    	dc.b	$02, nRst, $01
0007D29E F800 00                    	smpsCall            Mus84_SLZ_Call08
0007D2A1 B502 8001 B602 8001 B806+  	dc.b	nE4, $02, nRst, $01, nF4, $02, nRst, $01, nG4, $06, nRst, nG3
0007D2AD 24                         	dc.b	$24
0007D2AE                            
0007D2AE F6FF 97                    	smpsJump            Mus84_SLZ_Jump04
0007D2B1                            
0007D2B1                            Mus84_SLZ_Call07:
0007D2B1 B106 8003 B180 06B1 1280+  	dc.b	nC4, $06, nRst, $03, nC4, nRst, $06, nC4, $12, nRst, $06, nC4
0007D2BD 0280 01B1 0280 01AF 0680+  	dc.b	$02, nRst, $01, nC4, $02, nRst, $01, nBb3, $06, nRst, $03, nBb3
0007D2C9 0380 06AE 1280 06AE 0280+  	dc.b	$03, nRst, $06, nA3, $12, nRst, $06, nA3, $02, nRst, $01, nA3
0007D2D5 0280 01                    	dc.b	$02, nRst, $01
0007D2D8                            
0007D2D8                            Mus84_SLZ_Loop01:
0007D2D8 B306 8003 B306 8003 B302+  	dc.b	nD4, $06, nRst, $03, nD4, $06, nRst, $03, nD4, $02, nRst, $01
0007D2E4 B302 8001                  	dc.b	nD4, $02, nRst, $01
0007D2E8 E9FF                       	smpsAlterPitch      $FF
0007D2EA F700 04FF EA               	smpsLoop            $00, $04, Mus84_SLZ_Loop01
0007D2EF E904                       	smpsAlterPitch      $04
0007D2F1 AC06 8003 AC80 06AC 1280+  	dc.b	nG3, $06, nRst, $03, nG3, nRst, $06, nG3, $12, nRst, $06, nG3
0007D2FD 0280 01AC 0280 01B0 0680+  	dc.b	$02, nRst, $01, nG3, $02, nRst, $01, nB3, $06, nRst, $03, nB3
0007D309 8006 B012                  	dc.b	nRst, $06, nB3, $12
0007D30D E3                         	smpsReturn
0007D30E                            
0007D30E                            Mus84_SLZ_Call08:
0007D30E B106 8003 B180 06B1 1280+  	dc.b	nC4, $06, nRst, $03, nC4, nRst, $06, nC4, $12, nRst, $06, nG3
0007D31A 0280 01B1 0280 01B3 0680+  	dc.b	$02, nRst, $01, nC4, $02, nRst, $01, nD4, $06, nRst, $03, nD4
0007D326 8006 B312 8006 AE02 8001+  	dc.b	nRst, $06, nD4, $12, nRst, $06, nA3, $02, nRst, $01, nD4, $02
0007D332 8001 B506 8003 B580 06B5+  	dc.b	nRst, $01, nE4, $06, nRst, $03, nE4, nRst, $06, nE4, $12, nRst
0007D33E 06                         	dc.b	$06
0007D33F E3                         	smpsReturn
0007D340                            
0007D340                            ; FM3 Data
0007D340                            Mus84_SLZ_FM3:
0007D342 E080                       	smpsPan             panLeft, $00
0007D344                            
0007D344                            ; PSG1 Data
0007D344                            Mus84_SLZ_PSG1:
0007D344 8030                       	dc.b	nRst, $30
0007D346                            
0007D346                            Mus84_SLZ_Jump03:
0007D346 F800 00                    	smpsCall            Mus84_SLZ_Call05
0007D349 D006 8003 D080 06D0 1280+  	dc.b	nG6, $06, nRst, $03, nG6, nRst, $06, nG6, $12, nRst, $06, nB6
0007D355 0980 03D4 80D2 0980 03D0+  	dc.b	$09, nRst, $03, nB6, nRst, nA6, $09, nRst, $03, nG6, nRst, nF6
0007D361 0C80 06                    	dc.b	$0C, nRst, $06
0007D364 F800 00                    	smpsCall            Mus84_SLZ_Call05
0007D367 F800 00                    	smpsCall            Mus84_SLZ_Call06
0007D36A E808                       	smpsNoteFill        $08
0007D36C 8006 D909 0909 D709 D506   	dc.b	nRst, $06, nE7, $09, $09, $09, nD7, $09, nC7, $06
0007D376 F800 00                    	smpsCall            Mus84_SLZ_Call06
0007D379 E800                       	smpsNoteFill        $00
0007D37B 800C D224                  	dc.b	nRst, $0C, nA6, $24
0007D37F F6FF C5                    	smpsJump            Mus84_SLZ_Jump03
0007D382                            
0007D382                            Mus84_SLZ_Call05:
0007D382 D006 8003 D080 06D0 1880+  	dc.b	nG6, $06, nRst, $03, nG6, nRst, $06, nG6, $18, nRst, $06, nF6
0007D38E 8003 CE80 06CD 1880 06D2+  	dc.b	nRst, $03, nF6, nRst, $06, nE6, $18, nRst, $06, nA6, nRst, $03
0007D39A D006 8003 CE80 D206 8003+  	dc.b	nG6, $06, nRst, $03, nF6, nRst, nA6, $06, nRst, $03, nG6, $06
0007D3A6 8003 CE80 D206 8003 D006+  	dc.b	nRst, $03, nF6, nRst, nA6, $06, nRst, $03, nG6, $06, nRst, $03
0007D3B2 CE18 8006 CE80 03CE 8006+  	dc.b	nF6, $18, nRst, $06, nF6, nRst, $03, nF6, nRst, $06, nF6, $18
0007D3BE 8006 D180 03D1 8006 D118+  	dc.b	nRst, $06, nAb6, nRst, $03, nAb6, nRst, $06, nAb6, $18, nRst, $06
0007D3CA E3                         	smpsReturn
0007D3CB                            
0007D3CB                            Mus84_SLZ_Call06:
0007D3CB E808                       	smpsNoteFill        $08
0007D3CD 8006 D409 0909 09          	dc.b	nRst, $06, nB6, $09, $09, $09, $09
0007D3D4 E805                       	smpsNoteFill        $05
0007D3D6 0303                       	dc.b	$03, $03
0007D3D8 E808                       	smpsNoteFill        $08
0007D3DA 8006 D509 0909 09          	dc.b	nRst, $06, nC7, $09, $09, $09, $09
0007D3E1 E805                       	smpsNoteFill        $05
0007D3E3 0303                       	dc.b	$03, $03
0007D3E5 E808                       	smpsNoteFill        $08
0007D3E7 8006 D709 0909 09          	dc.b	nRst, $06, nD7, $09, $09, $09, $09
0007D3EE E805                       	smpsNoteFill        $05
0007D3F0 0303                       	dc.b	$03, $03
0007D3F2 E3                         	smpsReturn
0007D3F3                            
0007D3F3                            ; FM4 Data
0007D3F3                            Mus84_SLZ_FM4:
0007D3F5 E040                       	smpsPan             panRight, $00
0007D3F7                            
0007D3F7                            ; PSG2 Data
0007D3F7                            Mus84_SLZ_PSG2:
0007D3F7 8030                       	dc.b	nRst, $30
0007D3F9                            
0007D3F9                            Mus84_SLZ_Jump02:
0007D3F9 F800 00                    	smpsCall            Mus84_SLZ_Call03
0007D3FC CD06 8003 CD80 06CD 1280+  	dc.b	nE6, $06, nRst, $03, nE6, nRst, $06, nE6, $12, nRst, $06, nG6
0007D408 0980 03D0 80CE 0980 03CD+  	dc.b	$09, nRst, $03, nG6, nRst, nF6, $09, nRst, $03, nE6, nRst, nD6
0007D414 0C80 06                    	dc.b	$0C, nRst, $06
0007D417 F800 00                    	smpsCall            Mus84_SLZ_Call03
0007D41A F800 00                    	smpsCall            Mus84_SLZ_Call04
0007D41D E808                       	smpsNoteFill        $08
0007D41F 8006 D509 0909 D409 D206   	dc.b	nRst, $06, nC7, $09, $09, $09, nB6, $09, nA6, $06
0007D429 E808                       	smpsNoteFill        $08
0007D42B F800 00                    	smpsCall            Mus84_SLZ_Call04
0007D42E E800                       	smpsNoteFill        $00
0007D430 800C CE24                  	dc.b	nRst, $0C, nF6, $24
0007D434 F6FF C3                    	smpsJump            Mus84_SLZ_Jump02
0007D437                            
0007D437                            Mus84_SLZ_Call03:
0007D437 CD06 8003 CD80 06CD 1880+  	dc.b	nE6, $06, nRst, $03, nE6, nRst, $06, nE6, $18, nRst, $06, nD6
0007D443 8003 CB80 06CA 1880 06CE+  	dc.b	nRst, $03, nD6, nRst, $06, nCs6, $18, nRst, $06, nF6, nRst, $03
0007D44F CD06 8003 CB80 CE06 8003+  	dc.b	nE6, $06, nRst, $03, nD6, nRst, nF6, $06, nRst, $03, nE6, $06
0007D45B 8003 CB80 CE06 8003 CD06+  	dc.b	nRst, $03, nD6, nRst, nF6, $06, nRst, $03, nE6, $06, nRst, $03
0007D467 CB18 8006 CB80 03CB 8006+  	dc.b	nD6, $18, nRst, $06, nD6, nRst, $03, nD6, nRst, $06, nD6, $18
0007D473 8006 CE80 03CE 8006 CE18+  	dc.b	nRst, $06, nF6, nRst, $03, nF6, nRst, $06, nF6, $18, nRst, $06
0007D47F E3                         	smpsReturn
0007D480                            
0007D480                            Mus84_SLZ_Call04:
0007D480 E808                       	smpsNoteFill        $08
0007D482 8006 D009 0909 09          	dc.b	nRst, $06, nG6, $09, $09, $09, $09
0007D489 E805                       	smpsNoteFill        $05
0007D48B 0303                       	dc.b	$03, $03
0007D48D E808                       	smpsNoteFill        $08
0007D48F 8006 D209 0909 09          	dc.b	nRst, $06, nA6, $09, $09, $09, $09
0007D496 E805                       	smpsNoteFill        $05
0007D498 0303                       	dc.b	$03, $03
0007D49A E808                       	smpsNoteFill        $08
0007D49C 8006 D409 0909 09          	dc.b	nRst, $06, nB6, $09, $09, $09, $09
0007D4A3 E805                       	smpsNoteFill        $05
0007D4A5 0303                       	dc.b	$03, $03
0007D4A7 E3                         	smpsReturn
0007D4A8                            
0007D4A8                            ; FM5 Data
0007D4A8                            Mus84_SLZ_FM5:
0007D4AA E102                       	smpsAlterNote       $02
0007D4AC 800C C4C6 D0               	dc.b	nRst, $0C, nG5, nA5, nG6
0007D4B1                            
0007D4B1                            Mus84_SLZ_Jump01:
0007D4B3 F8FD 57                    	smpsCall            Mus84_SLZ_Call00
0007D4B6 CD06                       	dc.b	nE6, $06
0007D4BA E6EC                       	smpsAlterVol        $EC
0007D4BC F800 00                    	smpsCall            Mus84_SLZ_Call01
0007D4BF E114                       	smpsAlterNote       $14
0007D4C1 C601 E7                    	dc.b	nA5, $01, smpsNoAttack
0007D4C4 E100                       	smpsAlterNote       $00
0007D4C6 C605                       	dc.b	nA5, $05
0007D4C8 F800 00                    	smpsCall            Mus84_SLZ_Call02
0007D4CB B4                         	dc.b	nEb4
0007D4CC E607                       	smpsAlterVol        $07
0007D4CE B4                         	dc.b	nEb4
0007D4D1 E6E8                       	smpsAlterVol        $E8
0007D4D3 E9CD                       	smpsAlterPitch      $CD
0007D4D5 8006                       	dc.b	nRst, $06
0007D4D7 E114                       	smpsAlterNote       $14
0007D4D9 CD01 E7                    	dc.b	nE6, $01, smpsNoAttack
0007D4DC E100                       	smpsAlterNote       $00
0007D4DE CD05 CE06 CDCE D080 C980+  	dc.b	nE6, $05, nF6, $06, nE6, nF6, nG6, nRst, nC6, nRst, $06
0007D4E9 F800 00                    	smpsCall            Mus84_SLZ_Call01
0007D4EC E805                       	smpsNoteFill        $05
0007D4EE C603 03                    	dc.b	nA5, $03, $03
0007D4F1 E800                       	smpsNoteFill        $00
0007D4F3 F800 00                    	smpsCall            Mus84_SLZ_Call02
0007D4F8 E6EF                       	smpsAlterVol        $EF
0007D4FA E9CD                       	smpsAlterPitch      $CD
0007D4FC CD03 CED0 0380 09          	dc.b	nE6, $03, nF6, nG6, $03, nRst, $09
0007D503 E1EC                       	smpsAlterNote       $EC
0007D505 D501 E7                    	dc.b	nC7, $01, smpsNoAttack
0007D508 E100                       	smpsAlterNote       $00
0007D50A F02C 0104 04               	smpsModSet          $2C, $01, $04, $04
0007D50F D523                       	dc.b	nC7, $23
0007D511 F4                         	smpsModOff
0007D512 E614                       	smpsAlterVol        $14
0007D514 F6FF 9B                    	smpsJump            Mus84_SLZ_Jump01
0007D517                            
0007D517                            Mus84_SLZ_Call01:
0007D517 F800 00                    	smpsCall            Mus84_SLZ_Call09
0007D51A B4                         	dc.b	nEb4
0007D51B E607                       	smpsAlterVol        $07
0007D51D B4                         	dc.b	nEb4
0007D520 E6E8                       	smpsAlterVol        $E8
0007D522 E9CD                       	smpsAlterPitch      $CD
0007D524 8006                       	dc.b	nRst, $06
0007D526 E114                       	smpsAlterNote       $14
0007D528 CD01 E7                    	dc.b	nE6, $01, smpsNoAttack
0007D52B E100                       	smpsAlterNote       $00
0007D52D 0580 06                    	dc.b	$05, nRst, $06
0007D530 E114                       	smpsAlterNote       $14
0007D532 C901 E7                    	dc.b	nC6, $01, smpsNoAttack
0007D535 E100                       	smpsAlterNote       $00
0007D537 0580 06                    	dc.b	$05, nRst, $06
0007D53A E3                         	smpsReturn
0007D53B                            
0007D53B                            Mus84_SLZ_Call02:
0007D53B C906 C680 06               	dc.b	nC6, $06, nA5, nRst, $06
0007D540                            
0007D540                            Mus84_SLZ_Call09:
0007D540 E114                       	smpsAlterNote       $14
0007D542 C401 E7                    	dc.b	nG5, $01, smpsNoAttack
0007D545 E100                       	smpsAlterNote       $00
0007D547 02C6 03                    	dc.b	$02, nA5, $03
0007D54A E805                       	smpsNoteFill        $05
0007D54C C903 C906 C603 C903        	dc.b	nC6, $03, nC6, $06, nA5, $03, nC6, $03
0007D554 E800                       	smpsNoteFill        $00
0007D556 C980                       	dc.b	nC6, nRst
0007D558 E6FC                       	smpsAlterVol        $FC
0007D55A E933                       	smpsAlterPitch      $33
0007D55E B403                       	dc.b	nEb4, $03
0007D560 E607                       	smpsAlterVol        $07
0007D562 B4                         	dc.b	nEb4
0007D563 E607                       	smpsAlterVol        $07
0007D565 B4                         	dc.b	nEb4
0007D566 E607                       	smpsAlterVol        $07
0007D568 E3                         	smpsReturn
0007D569                            Mus84_SLZ_Call10:
0007D569 F6FF FE                    	smpsJump			Mus84_SLZ_Call10
0007D56C                            Mus84_SLZ_Call11:	
0007D56C F6FF FE                    	smpsJump 			Mus84_SLZ_Call11
0007D56F                            ; PSG3 Data
0007D56F                            Mus84_SLZ_PSG3:
0007D56F F3E7                       	smpsPSGform         $E7
0007D571 E802                       	smpsNoteFill        $02
0007D573 8024                       	dc.b	nRst, $24
0007D575                            
0007D575                            Mus84_SLZ_Jump06:
0007D575 C603 03                    	dc.b	nA5, $03, $03
0007D578 EC02                       	smpsPSGAlterVol     $02
0007D57A F508                       	smpsPSGvoice        fTone_08
0007D57C E808                       	smpsNoteFill        $08
0007D57E 06                         	dc.b	$06
0007D57F F504                       	smpsPSGvoice        fTone_04
0007D581 E803                       	smpsNoteFill        $03
0007D583 ECFE                       	smpsPSGAlterVol     $FE
0007D585 F6FF EE                    	smpsJump            Mus84_SLZ_Jump06
0007D588                            
0007D588                            ; DAC Data
0007D588                            Mus84_SLZ_DAC:
0007D588 8030                       	dc.b	nRst, $30
0007D58A                            
0007D58A                            Mus84_SLZ_Jump00:
0007D58A 810C                       	dc.b	dKick, $0C
0007D58C F6FF FC                    	smpsJump            Mus84_SLZ_Jump00
0007D58F                            
0007D58F                            Mus84_SLZ_Voices:
0007D58F                            ;	Voice $00
0007D58F                            ;	$34
0007D58F                            ;	$33, $41, $7E, $74, 	$5B, $9F, $5F, $1F, 	$04, $07, $07, $08
0007D58F                            ;	$00, $00, $00, $00, 	$FF, $FF, $EF, $FF, 	$23, $90, $29, $97
0007D58F                            	smpsVcAlgorithm     $04
0007D58F                            	smpsVcFeedback      $06
0007D58F                            	smpsVcUnusedBits    $00
0007D58F                            	smpsVcDetune        $07, $07, $04, $03
0007D58F                            	smpsVcCoarseFreq    $04, $0E, $01, $03
0007D58F                            	smpsVcRateScale     $00, $01, $02, $01
0007D58F                            	smpsVcAttackRate    $1F, $1F, $1F, $1B
0007D58F                            	smpsVcAmpMod        $00, $00, $00, $00
0007D58F                            	smpsVcDecayRate1    $08, $07, $07, $04
0007D58F                            	smpsVcDecayRate2    $00, $00, $00, $00
0007D58F                            	smpsVcDecayLevel    $0F, $0E, $0F, $0F
0007D58F                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007D58F 3433 417E 745B 9F5F 1F04+  	smpsVcTotalLevel    $17, $29, $10, $23
0007D5A8                            
0007D5A8                            ;	Voice $01
0007D5A8                            ;	$3A
0007D5A8                            ;	$61, $3C, $14, $31, 	$9C, $DB, $9C, $DA, 	$04, $09, $04, $03
0007D5A8                            ;	$03, $01, $03, $00, 	$1F, $0F, $0F, $AF, 	$21, $47, $31, $80
0007D5A8                            	smpsVcAlgorithm     $02
0007D5A8                            	smpsVcFeedback      $07
0007D5A8                            	smpsVcUnusedBits    $00
0007D5A8                            	smpsVcDetune        $03, $01, $03, $06
0007D5A8                            	smpsVcCoarseFreq    $01, $04, $0C, $01
0007D5A8                            	smpsVcRateScale     $03, $02, $03, $02
0007D5A8                            	smpsVcAttackRate    $1A, $1C, $1B, $1C
0007D5A8                            	smpsVcAmpMod        $00, $00, $00, $00
0007D5A8                            	smpsVcDecayRate1    $03, $04, $09, $04
0007D5A8                            	smpsVcDecayRate2    $00, $03, $01, $03
0007D5A8                            	smpsVcDecayLevel    $0A, $00, $00, $01
0007D5A8                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007D5A8 3A61 3C14 319C DB9C DA04+  	smpsVcTotalLevel    $00, $31, $47, $21
0007D5C1                            
0007D5C1                            ;	Voice $02
0007D5C1                            ;	$04
0007D5C1                            ;	$72, $42, $32, $32, 	$1F, $1F, $1F, $1F, 	$00, $00, $00, $00
0007D5C1                            ;	$00, $00, $00, $00, 	$00, $07, $00, $07, 	$23, $80, $23, $80
0007D5C1                            	smpsVcAlgorithm     $04
0007D5C1                            	smpsVcFeedback      $00
0007D5C1                            	smpsVcUnusedBits    $00
0007D5C1                            	smpsVcDetune        $03, $03, $04, $07
0007D5C1                            	smpsVcCoarseFreq    $02, $02, $02, $02
0007D5C1                            	smpsVcRateScale     $00, $00, $00, $00
0007D5C1                            	smpsVcAttackRate    $1F, $1F, $1F, $1F
0007D5C1                            	smpsVcAmpMod        $00, $00, $00, $00
0007D5C1                            	smpsVcDecayRate1    $00, $00, $00, $00
0007D5C1                            	smpsVcDecayRate2    $00, $00, $00, $00
0007D5C1                            	smpsVcDecayLevel    $00, $00, $00, $00
0007D5C1                            	smpsVcReleaseRate   $07, $00, $07, $00
0007D5C1 0472 4232 321F 1F1F 1F00+  	smpsVcTotalLevel    $00, $23, $00, $23
0007D5DA                            
0007D5DA                            ;	Voice $03
0007D5DA                            ;	$3A
0007D5DA                            ;	$01, $07, $01, $01, 	$8E, $8E, $8D, $53, 	$0E, $0E, $0E, $03
0007D5DA                            ;	$00, $00, $00, $00, 	$1F, $FF, $1F, $0F, 	$18, $28, $27, $80
0007D5DA                            	smpsVcAlgorithm     $02
0007D5DA                            	smpsVcFeedback      $07
0007D5DA                            	smpsVcUnusedBits    $00
0007D5DA                            	smpsVcDetune        $00, $00, $00, $00
0007D5DA                            	smpsVcCoarseFreq    $02, $01, $07, $01
0007D5DA                            	smpsVcRateScale     $01, $02, $02, $02
0007D5DA                            	smpsVcAttackRate    $13, $0D, $0E, $0E
0007D5DA                            	smpsVcAmpMod        $00, $00, $00, $00
0007D5DA                            	smpsVcDecayRate1    $03, $0E, $0E, $0E
0007D5DA                            	smpsVcDecayRate2    $00, $00, $00, $00
0007D5DA                            	smpsVcDecayLevel    $00, $01, $0F, $01
0007D5DA                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007D5DA 3A01 0701 028E 8E8D 530E+  	smpsVcTotalLevel    $00, $27, $28, $18
0007D5F3                            
0007D5F3                            ;	Voice $04
0007D5F3                            ;	$3C
0007D5F3                            ;	$38, $74, $76, $33, 	$10, $10, $10, $10, 	$02, $07, $04, $07
0007D5F3                            ;	$03, $09, $03, $09, 	$2F, $2F, $2F, $2F, 	$1E, $80, $1E, $80
0007D5F3                            	smpsVcAlgorithm     $04
0007D5F3                            	smpsVcFeedback      $06
0007D5F3                            	smpsVcUnusedBits    $00
0007D5F3                            	smpsVcDetune        $07, $07, $04, $03
0007D5F3                            	smpsVcCoarseFreq    $04, $0E, $01, $03
0007D5F3                            	smpsVcRateScale     $00, $01, $02, $01
0007D5F3                            	smpsVcAttackRate    $1F, $1F, $1F, $1B
0007D5F3                            	smpsVcAmpMod        $00, $00, $00, $00
0007D5F3                            	smpsVcDecayRate1    $08, $07, $07, $04
0007D5F3                            	smpsVcDecayRate2    $00, $00, $00, $00
0007D5F3                            	smpsVcDecayLevel    $0F, $0E, $0F, $0F
0007D5F3                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007D5F3 3433 417E 745B 9F5F 1F04+  	smpsVcTotalLevel    $17, $29, $10, $23
0007D60C                            
0007D60C                            ;	Voice $05
0007D60C                            ;	$F4
0007D60C                            ;	$06, $04, $0F, $0E, 	$1F, $1F, $1F, $1F, 	$00, $00, $0B, $0B
0007D60C                            ;	$00, $00, $05, $08, 	$0F, $0F, $FF, $FF, 	$15, $85, $02, $8A
0007D60C                            	smpsVcAlgorithm     $04
0007D60C                            	smpsVcFeedback      $06
0007D60C                            	smpsVcUnusedBits    $03
0007D60C                            	smpsVcDetune        $00, $00, $00, $00
0007D60C                            	smpsVcCoarseFreq    $0E, $0F, $04, $06
0007D60C                            	smpsVcRateScale     $00, $00, $00, $00
0007D60C                            	smpsVcAttackRate    $1F, $1F, $1F, $1F
0007D60C                            	smpsVcAmpMod        $00, $00, $00, $00
0007D60C                            	smpsVcDecayRate1    $0B, $0B, $00, $00
0007D60C                            	smpsVcDecayRate2    $08, $05, $00, $00
0007D60C                            	smpsVcDecayLevel    $0F, $0F, $00, $00
0007D60C                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007D60C F406 040F 0E1F 1F1F 1F00+  	smpsVcTotalLevel    $0A, $02, $05, $15
0007D625                            
0007D625                            
0007D626 00                         		even
0007D626                            Music85:	incbin	"sound/music/Mus85 - SYZ.bin"
0007DA76                            		even
0007DA76                            Music86:	include	"sound/music/Mus86 - SBZ.asm"
0007DA76                            Mus86_SBZ_Header:
0007DA76 =00000001                  smpsHeaderStartSong = 1
0007DA76 0000                       	smpsHeaderVoice     Mus86_SBZ_Voices
0007DA78 0603                       	smpsHeaderChan      $06, $03
0007DA7A 0205                       	smpsHeaderTempo     $02, $05
0007DA7C                            
0007DA80 0000 F40D                  	smpsHeaderFM        Mus86_SBZ_FM1,	$F4, $0D
0007DA84 0000 F40D                  	smpsHeaderFM        Mus86_SBZ_FM2,	$F4, $0D
0007DA88 0000 F413                  	smpsHeaderFM        Mus86_SBZ_FM3,	$F4, $13
0007DA8C 0000 F414                  	smpsHeaderFM        Mus86_SBZ_PSG2,	$F4, $14
0007DA90 0000 F417                  	smpsHeaderFM        Mus86_SBZ_FM5,	$F4, $17
0007DA94 0000 D003 0000             	smpsHeaderPSG       Mus86_SBZ_PSG1,	$D0, $03, $00, $00
0007DA9A 0000 0D17 0000             	smpsHeaderPSG       Mus86_SBZ_FM4,	$0D, $17, $00, $00
0007DAA0 0000 0003 0004             	smpsHeaderPSG       Mus86_SBZ_PSG3,	$00, $03, $00, fTone_04
0007DAA6                            
0007DAA6                            ; FM1 Data
0007DAA6                            Mus86_SBZ_FM1:
0007DAA8 E608                       	smpsAlterVol        $08
0007DAAA 8024 CD03 CBC9 C8CE CDCB+  	dc.b	nRst, $24, nE6, $03, nD6, nC6, nB5, nF6, nE6, nD6, nC6, nG6
0007DAB6 CECD CBD2 D0CE CDD4 D2D0+  	dc.b	nF6, nE6, nD6, nA6, nG6, nF6, nE6, nB6, nA6, nG6, nF6
0007DAC1 E6F8                       	smpsAlterVol        $F8
0007DAC5                            
0007DAC5 F800 00                    	smpsCall            Mus86_SBZ_Call06
0007DACA                            ;	smpsAlterNote       $FE
0007DACA E040                       	smpsPan             panRight, $00
0007DACC E603                       	smpsAlterVol        $03
0007DACE                            
0007DACE F800 00                    	smpsCall            Mus86_SBZ_Call04
0007DAD1                            
0007DAD1 E6FD                       	smpsAlterVol        $FD
0007DAD3 E0C0                       	smpsPan             panCenter, $00
0007DAD5 E6FE                       	smpsAlterVol        $FE
0007DAD7                            ;	smpsAlterNote       $00
0007DAD9                            
0007DAD9                            Mus86_SBZ_Loop0F:
0007DAD9 F800 00                    	smpsCall            Mus86_SBZ_Call07
0007DADC F700 02FF F9               	smpsLoop            $00, $02, Mus86_SBZ_Loop0F
0007DAE1 E602                       	smpsAlterVol        $02
0007DAE3 F6FF C1                    	smpsJump            Mus86_SBZ_FM1
0007DAE6                            
0007DAE6                            ; FM2 Data
0007DAE6                            Mus86_SBZ_FM2:
0007DAE8 E6FD                       	smpsAlterVol        $FD
0007DAEA E201                       	smpsNop             $01
0007DAEC E806                       	smpsNoteFill        $06
0007DAEE AE03 B080 B180 B3B5        	dc.b	nA3, $03, nB3, nRst, nC4, nRst, nD4, nE4
0007DAF6 E800                       	smpsNoteFill        $00
0007DAF8 B809                       	dc.b	nG4, $09
0007DAFC                            
0007DAFC                            Mus86_SBZ_Loop07:
0007DAFC AC06 B8                    	dc.b	nG3, $06, nG4
0007DAFF F700 05FF F9               	smpsLoop            $00, $05, Mus86_SBZ_Loop07
0007DB04 AC                         	dc.b	nG3
0007DB05 E603                       	smpsAlterVol        $03
0007DB07 E806                       	smpsNoteFill        $06
0007DB09                            
0007DB09                            Mus86_SBZ_Loop0A:
0007DB09 F800 00                    	smpsCall            Mus86_SBZ_Call08
0007DB0C                            
0007DB0C                            Mus86_SBZ_Loop08:
0007DB0C B8B8 B3B3 B6B6 B3B3        	dc.b	nG4, nG4, nD4, nD4, nF4, nF4, nD4, nD4
0007DB14 F700 04FF F4               	smpsLoop            $00, $04, Mus86_SBZ_Loop08
0007DB19                            
0007DB19                            Mus86_SBZ_Loop09:
0007DB19 B6B6 B1B1 B4B4 B1B1        	dc.b	nF4, nF4, nC4, nC4, nEb4, nEb4, nC4, nC4
0007DB21 F700 04FF F4               	smpsLoop            $00, $04, Mus86_SBZ_Loop09
0007DB26 F800 00                    	smpsCall            Mus86_SBZ_Call08
0007DB29 F701 02FF DC               	smpsLoop            $01, $02, Mus86_SBZ_Loop0A
0007DB2E E080                       	smpsPan             panLeft, $00
0007DB30 F800 00                    	smpsCall            Mus86_SBZ_Call04
0007DB33 E0C0                       	smpsPan             panCenter, $00
0007DB35                            
0007DB35                            Mus86_SBZ_Loop0B:
0007DB35 B103 B1AC ACAE AEAC AC     	dc.b	nC4, $03, nC4, nG3, nG3, nA3, nA3, nG3, nG3
0007DB3E F700 02FF F3               	smpsLoop            $00, $02, Mus86_SBZ_Loop0B
0007DB43                            
0007DB43                            Mus86_SBZ_Loop0C:
0007DB43 B7B7 B2B2 B4B4 B2B2        	dc.b	nFs4, nFs4, nCs4, nCs4, nEb4, nEb4, nCs4, nCs4
0007DB4B F700 02FF F4               	smpsLoop            $00, $02, Mus86_SBZ_Loop0C
0007DB50                            
0007DB50                            Mus86_SBZ_Loop0D:
0007DB50 B6B6 B1B1 B3B3 B1B1        	dc.b	nF4, nF4, nC4, nC4, nD4, nD4, nC4, nC4
0007DB58 F700 02FF F4               	smpsLoop            $00, $02, Mus86_SBZ_Loop0D
0007DB5D                            
0007DB5D                            Mus86_SBZ_Loop0E:
0007DB5D B8B8 B3B3 B5B5 B3B3        	dc.b	nG4, nG4, nD4, nD4, nE4, nE4, nD4, nD4
0007DB65 F700 02FF F4               	smpsLoop            $00, $02, Mus86_SBZ_Loop0E
0007DB6A F701 04FF C7               	smpsLoop            $01, $04, Mus86_SBZ_Loop0B
0007DB6F E800                       	smpsNoteFill        $00
0007DB71 E201                       	smpsNop             $01
0007DB73 F6FF 71                    	smpsJump            Mus86_SBZ_FM2
0007DB76                            
0007DB76                            Mus86_SBZ_Call08:
0007DB76 BA03 BAB5 B5B8 B8B5 B5     	dc.b	nA4, $03, nA4, nE4, nE4, nG4, nG4, nE4, nE4
0007DB7F F700 04FF F3               	smpsLoop            $00, $04, Mus86_SBZ_Call08
0007DB84 E3                         	smpsReturn
0007DB85                            
0007DB85                            ; FM3 Data
0007DB85                            Mus86_SBZ_FM3:
0007DB87 E806                       	smpsNoteFill        $06
0007DB89 BA03 BC80 BD80 BFC1        	dc.b	nA4, $03, nB4, nRst, nC5, nRst, nD5, nE5
0007DB91 E800                       	smpsNoteFill        $00
0007DB93 C433 C418                  	dc.b	nG5, $33, nG5, $18
0007DB99 E103                       	smpsAlterNote       $03
0007DB9B E6FA                       	smpsAlterVol        $FA
0007DB9D F800 00                    	smpsCall            Mus86_SBZ_Call06
0007DBA2 E040                       	smpsPan             panRight, $00
0007DBA4 E806                       	smpsNoteFill        $06
0007DBA6 F800 00                    	smpsCall            Mus86_SBZ_Call04
0007DBA9 E0C0                       	smpsPan             panCenter, $00
0007DBAD E800                       	smpsNoteFill        $00
0007DBAF E6FE                       	smpsAlterVol        $FE
0007DBB1                            
0007DBB1                            Mus86_SBZ_Loop06:
0007DBB1 F800 00                    	smpsCall            Mus86_SBZ_Call07
0007DBB4 F700 02FF F9               	smpsLoop            $00, $02, Mus86_SBZ_Loop06
0007DBB9 E608                       	smpsAlterVol        $08
0007DBBB F6FF C8                    	smpsJump            Mus86_SBZ_FM3
0007DBBE                            
0007DBBE                            ; FM4 Data
0007DBBE                            Mus86_SBZ_FM4:
0007DBC0 E080                       	smpsPan             panLeft, $00
0007DBC2                            
0007DBC2 E806                       	smpsNoteFill        $06
0007DBC4 F800 00                    	smpsCall            Mus86_SBZ_Call03
0007DBC7 E104                       	smpsAlterNote       $04
0007DBC9 F800 00                    	smpsCall            Mus86_SBZ_Call01
0007DBCC E606                       	smpsAlterVol        $06
0007DBD0 E102                       	smpsAlterNote       $02
0007DBD2 E6ED                       	smpsAlterVol        $ED
0007DBD4                            
0007DBD4 F800 00                    	smpsCall            Mus86_SBZ_Call04
0007DBD7 E613                       	smpsAlterVol        $13
0007DBD9                            
0007DBD9 E6F3                       	smpsAlterVol        $F3
0007DBDD                            	
0007DBDD E6FA                       	smpsAlterVol        $FA
0007DBDF                            
0007DBDF                            Mus86_SBZ_Loop05:
0007DBDF                            	
0007DBDF F800 00                    	smpsCall            Mus86_SBZ_Call05
0007DBE2 800C C602                  	dc.b	nRst, $0C, nA5, $02
0007DBE6 E100                       	smpsAlterNote       $00
0007DBE8 E70A 8003 C680 80C6 8009   	dc.b	smpsNoAttack, $0A, nRst, $03, nA5, nRst, nRst, nA5, nRst, $09
0007DBF2 F800 00                    	smpsCall            Mus86_SBZ_Call05
0007DBF5 C602                       	dc.b	nA5, $02
0007DBF7 E100                       	smpsAlterNote       $00
0007DBF9 0A80 06                    	dc.b	$0A, nRst, $06
0007DBFC                            
0007DBFC E1E2                       	smpsAlterNote       $E2
0007DBFE C602 E7                    	dc.b	nA5, $02, smpsNoAttack
0007DC01 E100                       	smpsAlterNote       $00
0007DC03 1C                         	dc.b	$1C
0007DC04 F700 02FF D7               	smpsLoop            $00, $02, Mus86_SBZ_Loop05
0007DC09 E606                       	smpsAlterVol        $06
0007DC0B E601                       	smpsAlterVol        $01
0007DC0D F6FF AF                    	smpsJump            Mus86_SBZ_FM4
0007DC10                            
0007DC10                            Mus86_SBZ_Call03:
0007DC10 C103 C180 C180 C1C1        	dc.b	nE5, $03, nE5, nRst, nE5, nRst, nE5, nE5
0007DC18 E800                       	smpsNoteFill        $00
0007DC1A BF4B                       	dc.b	nD5, $4B
0007DC1C E3                         	smpsReturn
0007DC1D                            
0007DC1D                            Mus86_SBZ_Call01:
0007DC1F E606                       	smpsAlterVol        $06
0007DC21                            
0007DC21                            
0007DC21                            Mus86_SBZ_Call0A:
0007DC21 8060 8080 CD18 CFD0 D1     	dc.b	nRst, $60, nRst, nRst, nE6, $18, nFs6, nG6, nAb6
0007DC2A F700 02FF F3               	smpsLoop            $00, $02, Mus86_SBZ_Call0A
0007DC2F E3                         	smpsReturn
0007DC30                            
0007DC30                            Mus86_SBZ_Call05:
0007DC30 800C                       	dc.b	nRst, $0C
0007DC32 E1EC                       	smpsAlterNote       $EC
0007DC34 C402                       	dc.b	nG5, $02
0007DC36 E100                       	smpsAlterNote       $00
0007DC38 E706 8001 C403 8018 800C   	dc.b	smpsNoAttack, $06, nRst, $01, nG5, $03, nRst, $18, nRst, $0C
0007DC42 E1EC                       	smpsAlterNote       $EC
0007DC44 CA02                       	dc.b	nCs6, $02
0007DC46 E100                       	smpsAlterNote       $00
0007DC48 E706 8001 CA03 8018 800C   	dc.b	smpsNoAttack, $06, nRst, $01, nCs6, $03, nRst, $18, nRst, $0C
0007DC52 E1EC                       	smpsAlterNote       $EC
0007DC54 C902                       	dc.b	nC6, $02
0007DC56 E100                       	smpsAlterNote       $00
0007DC58 E706 8001 C903 8018        	dc.b	smpsNoAttack, $06, nRst, $01, nC6, $03, nRst, $18
0007DC60 E1EC                       	smpsAlterNote       $EC
0007DC62 E3                         	smpsReturn
0007DC63                            
0007DC63                            ; FM5 Data
0007DC63                            Mus86_SBZ_FM5:
0007DC65 E040                       	smpsPan             panRight, $00
0007DC67                            
0007DC67 E806                       	smpsNoteFill        $06
0007DC69 BD03 BD80 BD80 BDBD        	dc.b	nC5, $03, nC5, nRst, nC5, nRst, nC5, nC5
0007DC71 E800                       	smpsNoteFill        $00
0007DC73 BC4B                       	dc.b	nB4, $4B
0007DC75 F8FF A6                    	smpsCall            Mus86_SBZ_Call01
0007DC78 E606                       	smpsAlterVol        $06
0007DC7A                            
0007DC7A                            Mus86_SBZ_Loop03:
0007DC7A 8060                       	dc.b	nRst, $60
0007DC7C F700 01FF FA               	smpsLoop            $00, $01, Mus86_SBZ_Loop03
0007DC83 E6EB                       	smpsAlterVol        $EB
0007DC85                            
0007DC85                            	
0007DC85                            
0007DC85                            Mus86_SBZ_Loop04:
0007DC85 F800 00                    	smpsCall            Mus86_SBZ_Call02
0007DC88 CDCE D0                    	dc.b	nE6, nF6, nG6
0007DC8B F800 00                    	smpsCall            Mus86_SBZ_Call02
0007DC8E D0CE CD                    	dc.b	nG6, nF6, nE6
0007DC91 F700 02FF F0               	smpsLoop            $00, $02, Mus86_SBZ_Loop04
0007DC96 E609                       	smpsAlterVol        $09
0007DC98                            
0007DC98 F6FF C9                    	smpsJump            Mus86_SBZ_FM5
0007DC9B                            
0007DC9B                            Mus86_SBZ_Call02:
0007DC9B 8003 CDC9 0606 C4C9 09CD+  	dc.b	nRst, $03, nE6, nC6, $06, $06, nG5, nC6, $09, nE6, $09, nRst
0007DCA7 0680 03CE CA06 06C7 CA09+  	dc.b	$06, nRst, $03, nF6, nCs6, $06, $06, nBb5, nCs6, $09, nF6, $09
0007DCB3 8006 8003 CDC9 0606 C6C9+  	dc.b	nRst, $06, nRst, $03, nE6, nC6, $06, $06, nA5, nC6, $09, nE6
0007DCBF 0FCB 0C                    	dc.b	$0F, nD6, $0C
0007DCC2 E3                         	smpsReturn
0007DCC3                            
0007DCC3                            ; PSG1 Data
0007DCC3                            Mus86_SBZ_PSG1:
0007DCC3 EC01                       	smpsPSGAlterVol     $01
0007DCC5 F500                       	smpsPSGvoice        $00
0007DCC7 F8FF 47                    	smpsCall            Mus86_SBZ_Call03
0007DCCA F506                       	smpsPSGvoice        fTone_06
0007DCCC ECFF                       	smpsPSGAlterVol     $FF
0007DCCE F8FF 51                    	smpsCall            Mus86_SBZ_Call0A
0007DCD1 8060                       	dc.b	nRst, $60
0007DCD3 F500                       	smpsPSGvoice        $00
0007DCD5 ECFF                       	smpsPSGAlterVol     $FF
0007DCD7                            
0007DCD7                            Mus86_SBZ_Loop17:
0007DCD7 F800 00                    	smpsCall            Mus86_SBZ_Call0B
0007DCDA 800C C280 03C2 8080 C280+  	dc.b	nRst, $0C, nF5, nRst, $03, nF5, nRst, nRst, nF5, nRst, $09
0007DCE5 F800 00                    	smpsCall            Mus86_SBZ_Call0B
0007DCE8 C20C 8006 C21E             	dc.b	nF5, $0C, nRst, $06, nF5, $1E
0007DCEE F700 02FF E5               	smpsLoop            $00, $02, Mus86_SBZ_Loop17
0007DCF3 EC01                       	smpsPSGAlterVol     $01
0007DCF5 F6FF CC                    	smpsJump            Mus86_SBZ_PSG1
0007DCF8                            
0007DCF8                            Mus86_SBZ_Call0B:
0007DCF8 800C C107 8002 C103 8018+  	dc.b	nRst, $0C, nE5, $07, nRst, $02, nE5, $03, nRst, $18, nRst, $0C
0007DD04 C707 8002 C703 8018 800C+  	dc.b	nBb5, $07, nRst, $02, nBb5, $03, nRst, $18, nRst, $0C, nA5, $07
0007DD10 8002 C603 8018             	dc.b	nRst, $02, nA5, $03, nRst, $18
0007DD16 E3                         	smpsReturn
0007DD17                            
0007DD17                            ; PSG2 Data
0007DD17                            Mus86_SBZ_PSG2:
0007DD19                            ;	smpsPSGAlterVol     $01
0007DD19 BD03 BD80 BD80 BDBD        	dc.b	nC5, $03, nC5, nRst, nC5, nRst, nC5, nC5
0007DD21 E800                       	smpsNoteFill        $00
0007DD23 BC4B                       	dc.b	nB4, $4B
0007DD25                            ;	smpsPSGAlterVol     $FF
0007DD25                            
0007DD25                            Mus86_SBZ_Loop13:
0007DD25                            ;	smpsPSGvoice        fTone_05
0007DD25 E803                       	smpsNoteFill        $03
0007DD27 F800 00                    	smpsCall            Mus86_SBZ_Call09
0007DD2A                            
0007DD2A                            Mus86_SBZ_Loop11:
0007DD2A D0D0 D7D0 D5D0 D4D0        	dc.b	nG6, nG6, nD7, nG6, nC7, nG6, nB6, nG6
0007DD32 F700 04FF F4               	smpsLoop            $00, $04, Mus86_SBZ_Loop11
0007DD37                            
0007DD37                            Mus86_SBZ_Loop12:
0007DD37 D2D2 D8D2 D7D2 D5D2        	dc.b	nA6, nA6, nEb7, nA6, nD7, nA6, nC7, nA6
0007DD3F F700 04FF F4               	smpsLoop            $00, $04, Mus86_SBZ_Loop12
0007DD44 F800 00                    	smpsCall            Mus86_SBZ_Call09
0007DD47 F701 02FF DA               	smpsLoop            $01, $02, Mus86_SBZ_Loop13
0007DD4C 8060                       	dc.b	nRst, $60
0007DD4E                            ;	smpsPSGAlterVol     $01
0007DD4E                            
0007DD4E                            Mus86_SBZ_Loop14:
0007DD4E D503 D5DC D5DA D5D9 D5     	dc.b	nC7, $03, nC7, nG7, nC7, nF7, nC7, nE7, nC7
0007DD57 F700 02FF F3               	smpsLoop            $00, $02, Mus86_SBZ_Loop14
0007DD5C                            
0007DD5C                            Mus86_SBZ_Loop15:
0007DD5C D3D3 DAD3 D8D3 D6D3        	dc.b	nBb6, nBb6, nF7, nBb6, nEb7, nBb6, nCs7, nBb6
0007DD64 F700 02FF F4               	smpsLoop            $00, $02, Mus86_SBZ_Loop15
0007DD69                            
0007DD69                            Mus86_SBZ_Loop16:
0007DD69 D2D2 D9D2 D7D2 D5D2        	dc.b	nA6, nA6, nE7, nA6, nD7, nA6, nC7, nA6
0007DD71 F700 04FF F4               	smpsLoop            $00, $04, Mus86_SBZ_Loop16
0007DD76 F701 04FF D4               	smpsLoop            $01, $04, Mus86_SBZ_Loop14
0007DD7B                            ;	smpsPSGAlterVol     $FF
0007DD7B F6FF 9A                    	smpsJump            Mus86_SBZ_PSG2
0007DD7E                            
0007DD7E                            Mus86_SBZ_Call09:
0007DD7E D203 D2D9 D2D7 D2D5 D2     	dc.b	nA6, $03, nA6, nE7, nA6, nD7, nA6, nC7, nA6
0007DD87 F700 04FF F3               	smpsLoop            $00, $04, Mus86_SBZ_Call09
0007DD8C E3                         	smpsReturn
0007DD8D                            
0007DD8D                            ; PSG3 Data
0007DD8D                            Mus86_SBZ_PSG3:
0007DD8D F3E7                       	smpsPSGform         $E7
0007DD8F E803                       	smpsNoteFill        $03
0007DD91 C603 0680 C606 0F0C 0C0C+  	dc.b	nA5, $03, $06, nRst, nA5, $06, $0F, $0C, $0C, $0C, $18
0007DD9C                            
0007DD9C                            Mus86_SBZ_Loop10:
0007DD9C C603 03                    	dc.b	nA5, $03, $03
0007DD9F EC02                       	smpsPSGAlterVol     $02
0007DDA1 F508                       	smpsPSGvoice        fTone_08
0007DDA3 E808                       	smpsNoteFill        $08
0007DDA5 06                         	dc.b	$06
0007DDA6 F504                       	smpsPSGvoice        fTone_04
0007DDA8 E803                       	smpsNoteFill        $03
0007DDAA ECFE                       	smpsPSGAlterVol     $FE
0007DDAC F700 88FF EC               	smpsLoop            $00, $88, Mus86_SBZ_Loop10
0007DDB1 F6FF DA                    	smpsJump            Mus86_SBZ_PSG3
0007DDB4                            
0007DDB4                            ; DAC Data
0007DDB4                            Mus86_SBZ_DAC:
0007DDB4 8203 0606 0303 0F81 0C80+  	dc.b	dSnare, $03, $06, $06, $03, $03, $0F, dKick, $0C, nRst, $0C, dKick
0007DDC0 8106 8282 8203 03          	dc.b	dKick, $06, dSnare, dSnare, dSnare, $03, $03
0007DDC7                            
0007DDC7                            Mus86_SBZ_Loop00:
0007DDC7 810C 8281 8281 8201 8905+  	dc.b	dKick, $0C, dSnare, dKick, dSnare, dKick, dSnare, $01, dMidTimpani, $05, dHiTimpani, $06
0007DDD3 8101 8905 8806 8201 8905+  	dc.b	dKick, $01, dMidTimpani, $05, dHiTimpani, $06, dSnare, $01, dMidTimpani, $05, dHiTimpani, $06
0007DDDF F700 02FF E4               	smpsLoop            $00, $02, Mus86_SBZ_Loop00
0007DDE4 810C 8281 8281 8281 8206+  	dc.b	dKick, $0C, dSnare, dKick, dSnare, dKick, dSnare, dKick, dSnare, $06, dHiTimpani, $03
0007DDF0 8881 0C82 8182 8106 8882+  	dc.b	dHiTimpani, dKick, $0C, dSnare, dKick, dSnare, dKick, $06, dHiTimpani, dSnare, $01, dMidTimpani
0007DDFC 0588 0681 0189 0582 0188+  	dc.b	$05, dHiTimpani, $06, dKick, $01, dMidTimpani, $05, dSnare, $01, dHiTimpani, $05, dSnare
0007DE08 0189 0582 0303             	dc.b	$01, dMidTimpani, $05, dSnare, $03, $03
0007DE0E F701 02FF B5               	smpsLoop            $01, $02, Mus86_SBZ_Loop00
0007DE13                            
0007DE13                            Mus86_SBZ_Loop01:
0007DE13 8203 8281 8181 8182 8281+  	dc.b	dSnare, $03, dSnare, dKick, dKick, dKick, dKick, dSnare, dSnare, dKick, dKick, dKick
0007DE1F 8182 8282 82               	dc.b	dKick, dSnare, dSnare, dSnare, dSnare
0007DE24 F700 02FF EB               	smpsLoop            $00, $02, Mus86_SBZ_Loop01
0007DE29                            
0007DE29                            Mus86_SBZ_Loop02:
0007DE29 F800 00                    	smpsCall            Mus86_SBZ_Call00
0007DE2C 8802 8101 8905 8201 8805+  	dc.b	dHiTimpani, $02, dKick, $01, dMidTimpani, $05, dSnare, $01, dHiTimpani, $05, dMidTimpani, $06
0007DE38 F800 00                    	smpsCall            Mus86_SBZ_Call00
0007DE3B 8902 8201 8805 8201 8905+  	dc.b	dMidTimpani, $02, dSnare, $01, dHiTimpani, $05, dSnare, $01, dMidTimpani, $05, dSnare, $01
0007DE47 8802 8203                  	dc.b	dHiTimpani, $02, dSnare, $03
0007DE4B F701 02FF DA               	smpsLoop            $01, $02, Mus86_SBZ_Loop02
0007DE50 F6FF 62                    	smpsJump            Mus86_SBZ_DAC
0007DE53                            
0007DE53                            Mus86_SBZ_Call00:
0007DE53 810C 8209 8106 0381 0188+  	dc.b	dKick, $0C, dSnare, $09, dKick, $06, $03, dKick, $01, dHiTimpani, $02, dMidTimpani
0007DE5F 0382 0188 0B               	dc.b	$03, dSnare, $01, dHiTimpani, $0B
0007DE64 F700 03FF EB               	smpsLoop            $00, $03, Mus86_SBZ_Call00
0007DE69 810C 8209 8106 8201        	dc.b	dKick, $0C, dSnare, $09, dKick, $06, dSnare, $01
0007DE71 E3                         	smpsReturn
0007DE72                            
0007DE72                            Mus86_SBZ_Call06:
0007DE72 D21E D006 CED0 CD30 D01E+  	dc.b	nA6, $1E, nG6, $06, nF6, nG6, nE6, $30, nG6, $1E, nF6, $06
0007DE7E CDCE CB30 CE1E CC06 CBCC+  	dc.b	nE6, nF6, nD6, $30, nF6, $1E, nEb6, $06, nD6, nEb6, nC6, $18
0007DE8A CBCD 03CE CD5A             	dc.b	nD6, nE6, $03, nF6, nE6, $5A
0007DE90 F700 02FF DE               	smpsLoop            $00, $02, Mus86_SBZ_Call06
0007DE95 E3                         	smpsReturn
0007DE96                            
0007DE96                            Mus86_SBZ_Call07:
0007DE96 D01E CD06 C9D5 D30C D506+  	dc.b	nG6, $1E, nE6, $06, nC6, nC7, nBb6, $0C, nC7, $06, nBb6, $0C
0007DEA2 D006 D3D2 24CD 06CE D012+  	dc.b	nG6, $06, nBb6, nA6, $24, nE6, $06, nF6, nG6, $12, nA6, $06
0007DEAE D012 CD0C D01E CD06 C9D5+  	dc.b	nG6, $12, nE6, $0C, nG6, $1E, nE6, $06, nC6, nC7, nBb6, $0C
0007DEBA D506 D30C D006 D3D2 24CD+  	dc.b	nC7, $06, nBb6, $0C, nG6, $06, nBb6, nA6, $24, nE6, $06, nF6
0007DEC6 D030 8006                  	dc.b	nG6, $30, nRst, $06
0007DECA E3                         	smpsReturn
0007DECB                            
0007DECB                            Mus86_SBZ_Call04:
0007DECB F800 00                    	smpsCall            Mus86_SBZ_Call0C
0007DECE B8B8 09                    	dc.b	nG4, nG4, $09
0007DED1 F800 00                    	smpsCall            Mus86_SBZ_Call0C
0007DED4 800C                       	dc.b	nRst, $0C
0007DED6 E3                         	smpsReturn
0007DED7                            
0007DED7                            Mus86_SBZ_Call0C:
0007DED7 BA03 BAB9 B9B8 B8BA BAB9+  	dc.b	nA4, $03, nA4, nAb4, nAb4, nG4, nG4, nA4, nA4, nAb4, nAb4, nG4
0007DEE3 B8                         	dc.b	nG4
0007DEE4 E3                         	smpsReturn
0007DEE5                            
0007DEE5                            Mus86_SBZ_Voices:
0007DEE5                            ;	Voice $00
0007DEE5                            ;	$08
0007DEE5                            ;	$0A, $70, $30, $00, 	$1F, $1F, $5F, $5F, 	$12, $0E, $0A, $0A
0007DEE5                            ;	$00, $04, $04, $03, 	$2F, $2F, $2F, $2F, 	$24, $2D, $13, $80
0007DEE5                            	smpsVcAlgorithm     $00
0007DEE5                            	smpsVcFeedback      $01
0007DEE5                            	smpsVcUnusedBits    $00
0007DEE5                            	smpsVcDetune        $00, $03, $07, $00
0007DEE5                            	smpsVcCoarseFreq    $00, $00, $00, $0A
0007DEE5                            	smpsVcRateScale     $01, $01, $00, $00
0007DEE5                            	smpsVcAttackRate    $1F, $1F, $1F, $1F
0007DEE5                            	smpsVcAmpMod        $00, $00, $00, $00
0007DEE5                            	smpsVcDecayRate1    $0A, $0A, $0E, $12
0007DEE5                            	smpsVcDecayRate2    $03, $04, $04, $00
0007DEE5                            	smpsVcDecayLevel    $02, $02, $02, $02
0007DEE5                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007DEE5 080A 7030 001F 1F5F 5F12+  	smpsVcTotalLevel    $00, $13, $2D, $24
0007DEFE                            
0007DEFE                            ;	Voice $01
0007DEFE                            ;	$2C
0007DEFE                            ;	$74, $74, $34, $34, 	$1F, $12, $1F, $1F, 	$00, $04, $00, $04
0007DEFE                            ;	$00, $09, $00, $09, 	$00, $08, $00, $08, 	$16, $80, $17, $80
0007DEFE                            	smpsVcAlgorithm     $04
0007DEFE                            	smpsVcFeedback      $05
0007DEFE                            	smpsVcUnusedBits    $00
0007DEFE                            	smpsVcDetune        $03, $03, $07, $07
0007DEFE                            	smpsVcCoarseFreq    $04, $04, $04, $04
0007DEFE                            	smpsVcRateScale     $00, $00, $00, $00
0007DEFE                            	smpsVcAttackRate    $1F, $1F, $12, $1F
0007DEFE                            	smpsVcAmpMod        $00, $00, $00, $00
0007DEFE                            	smpsVcDecayRate1    $04, $00, $04, $00
0007DEFE                            	smpsVcDecayRate2    $09, $00, $09, $00
0007DEFE                            	smpsVcDecayLevel    $00, $00, $00, $00
0007DEFE                            	smpsVcReleaseRate   $08, $00, $08, $00
0007DEFE 2C74 7434 341F 121F 1F00+  	smpsVcTotalLevel    $00, $17, $00, $16
0007DF17                            
0007DF17                            ;	Voice $02
0007DF17                            ;	$3D
0007DF17                            ;	$01, $02, $02, $02, 	$14, $0E, $8C, $0E, 	$08, $05, $02, $05
0007DF17                            ;	$00, $08, $08, $08, 	$1F, $1F, $1F, $1F, 	$1A, $92, $A7, $80
0007DF17                            	smpsVcAlgorithm     $05
0007DF17                            	smpsVcFeedback      $07
0007DF17                            	smpsVcUnusedBits    $00
0007DF17                            	smpsVcDetune        $00, $00, $00, $00
0007DF17                            	smpsVcCoarseFreq    $02, $02, $02, $01
0007DF17                            	smpsVcRateScale     $00, $02, $00, $00
0007DF17                            	smpsVcAttackRate    $0E, $0C, $0E, $14
0007DF17                            	smpsVcAmpMod        $00, $00, $00, $00
0007DF17                            	smpsVcDecayRate1    $05, $02, $05, $08
0007DF17                            	smpsVcDecayRate2    $08, $08, $08, $00
0007DF17                            	smpsVcDecayLevel    $01, $01, $01, $01
0007DF17                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007DF17 3D01 0202 0214 0E8C 0E08+  	smpsVcTotalLevel    $00, $27, $12, $1A
0007DF30                            
0007DF30                            ;	Voice $03
0007DF30                            ;	$29
0007DF30                            ;	$36, $74, $71, $31, 	$04, $04, $05, $1D, 	$12, $0E, $1F, $1F
0007DF30                            ;	$04, $06, $03, $01, 	$5F, $6F, $0F, $0F, 	$27, $27, $2E, $80
0007DF30                            	smpsVcAlgorithm     $01
0007DF30                            	smpsVcFeedback      $05
0007DF30                            	smpsVcUnusedBits    $00
0007DF30                            	smpsVcDetune        $03, $07, $07, $03
0007DF30                            	smpsVcCoarseFreq    $01, $00, $04, $06
0007DF30                            	smpsVcRateScale     $00, $00, $00, $00
0007DF30                            	smpsVcAttackRate    $1D, $05, $04, $04
0007DF30                            	smpsVcAmpMod        $00, $00, $00, $00
0007DF30                            	smpsVcDecayRate1    $1F, $1F, $0E, $12
0007DF30                            	smpsVcDecayRate2    $01, $03, $06, $04
0007DF30                            	smpsVcDecayLevel    $00, $00, $06, $05
0007DF30                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007DF30 2936 7470 3104 0405 1D12+  	smpsVcTotalLevel    $00, $2E, $27, $27
0007DF49                            
0007DF49                            ;	Voice $04
0007DF49                            ;	$3D
0007DF49                            ;	$01, $01, $01, $01, 	$8E, $52, $14, $4C, 	$08, $08, $0E, $03
0007DF49                            ;	$00, $00, $00, $00, 	$1F, $1F, $1F, $1F, 	$1B, $80, $80, $9B
0007DF49                            	smpsVcAlgorithm     $05
0007DF49                            	smpsVcFeedback      $07
0007DF49                            	smpsVcUnusedBits    $00
0007DF49                            	smpsVcDetune        $00, $00, $00, $00
0007DF49                            	smpsVcCoarseFreq    $01, $01, $01, $01
0007DF49                            	smpsVcRateScale     $01, $00, $01, $02
0007DF49                            	smpsVcAttackRate    $0C, $14, $12, $0E
0007DF49                            	smpsVcAmpMod        $00, $00, $00, $00
0007DF49                            	smpsVcDecayRate1    $03, $0E, $08, $08
0007DF49                            	smpsVcDecayRate2    $00, $00, $00, $00
0007DF49                            	smpsVcDecayLevel    $01, $01, $01, $01
0007DF49                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007DF49 3D01 0101 018E 5214 4C08+  	smpsVcTotalLevel    $1B, $00, $00, $1B
0007DF62                            
0007DF62                            ;	Voice $05
0007DF62                            ;	$30
0007DF62                            ;	$30, $30, $30, $30, 	$9E, $D8, $DC, $DC, 	$0E, $0A, $04, $05
0007DF62                            ;	$08, $08, $08, $08, 	$BF, $BF, $BF, $BF, 	$14, $3C, $14, $80
0007DF62                            	smpsVcAlgorithm     $00
0007DF62                            	smpsVcFeedback      $06
0007DF62                            	smpsVcUnusedBits    $00
0007DF62                            	smpsVcDetune        $03, $03, $03, $03
0007DF62                            	smpsVcCoarseFreq    $00, $00, $00, $00
0007DF62                            	smpsVcRateScale     $03, $03, $03, $02
0007DF62                            	smpsVcAttackRate    $1C, $1C, $18, $1E
0007DF62                            	smpsVcAmpMod        $00, $00, $00, $00
0007DF62                            	smpsVcDecayRate1    $05, $04, $0A, $0E
0007DF62                            	smpsVcDecayRate2    $08, $08, $08, $08
0007DF62                            	smpsVcDecayLevel    $0B, $0B, $0B, $0B
0007DF62                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007DF62 3030 3030 309E D8DC DC0E+  	smpsVcTotalLevel    $00, $14, $3C, $14
0007DF7B                            
0007DF7B                            ;	Voice $06
0007DF7B                            ;	$3D
0007DF7B                            ;	$01, $02, $00, $01, 	$1F, $0E, $0E, $0E, 	$07, $1F, $1F, $1F
0007DF7B                            ;	$00, $00, $00, $00, 	$1F, $0F, $0F, $0F, 	$17, $8D, $8C, $8C
0007DF7B                            	smpsVcAlgorithm     $05
0007DF7B                            	smpsVcFeedback      $07
0007DF7B                            	smpsVcUnusedBits    $00
0007DF7B                            	smpsVcDetune        $00, $00, $00, $00
0007DF7B                            	smpsVcCoarseFreq    $01, $00, $02, $01
0007DF7B                            	smpsVcRateScale     $00, $00, $00, $00
0007DF7B                            	smpsVcAttackRate    $0E, $0E, $0E, $1F
0007DF7B                            	smpsVcAmpMod        $00, $00, $00, $00
0007DF7B                            	smpsVcDecayRate1    $1F, $1F, $1F, $07
0007DF7B                            	smpsVcDecayRate2    $00, $00, $00, $00
0007DF7B                            	smpsVcDecayLevel    $00, $00, $00, $01
0007DF7B                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007DF7B 3D01 0200 011F 0E0E 0E07+  	smpsVcTotalLevel    $0C, $0C, $0D, $17
0007DF94                            	
0007DF94                            	;v7
0007DF94                            	smpsVcAlgorithm     $00
0007DF94                            	smpsVcFeedback      $01
0007DF94                            	smpsVcUnusedBits    $00
0007DF94                            	smpsVcDetune        $00, $03, $07, $00
0007DF94                            	smpsVcCoarseFreq    $00, $00, $00, $0A
0007DF94                            	smpsVcRateScale     $01, $01, $00, $00
0007DF94                            	smpsVcAttackRate    $1F, $1F, $1F, $1F
0007DF94                            	smpsVcAmpMod        $00, $00, $00, $00
0007DF94                            	smpsVcDecayRate1    $0A, $0A, $0E, $12
0007DF94                            	smpsVcDecayRate2    $03, $04, $04, $00
0007DF94                            	smpsVcDecayLevel    $02, $02, $02, $02
0007DF94                            	smpsVcReleaseRate   $00, $00, $00, $00
0007DF94 080A 7030 001F 1F5F 5F12+  	smpsVcTotalLevel    $00, $13, $2D, $24
0007DFAD                            
0007DFAD                            
0007DFAE 00                         		even
0007DFAE                            Music87:	incbin	"sound/music/Mus87 - Invincibility.bin"
0007E174                            		even
0007E174                            Music88:	incbin	"sound/music/Mus88 - Extra Life.bin"
0007E262                            		even
0007E262                            Music89:	include	"sound/music/Mus89 - Special Stage.asm"
0007E262                            Mus89_Special_Stage_Header:
0007E262 =00000001                  smpsHeaderStartSong = 1
0007E262 0000                       	smpsHeaderVoice     Mus89_Special_Stage_Voices
0007E264 0703                       	smpsHeaderChan      $07, $03
0007E266 0208                       	smpsHeaderTempo     $02, $08
0007E268                            
0007E26C 0000 DC18                  	smpsHeaderFM        Mus89_Special_Stage_FM1,	$DC, $18
0007E270 0000 DC0C                  	smpsHeaderFM        Mus89_Special_Stage_FM2,	$DC, $0C
0007E274 0000 E818                  	smpsHeaderFM        Mus89_Special_Stage_FM3,	$E8, $18
0007E278 0000 E818                  	smpsHeaderFM        Mus89_Special_Stage_FM4,	$E8, $18
0007E27C 0000 E818                  	smpsHeaderFM        Mus89_Special_Stage_FM5,	$E8, $18
0007E280 0000 DC14                  	smpsHeaderFM        Mus89_Special_Stage_FM6,	$DC, $14
0007E284 0000 DC03 0004             	smpsHeaderPSG       Mus89_Special_Stage_PSG1,	$DC, $03, $00, fTone_04
0007E28A 0000 FD01 0008             	smpsHeaderPSG       Mus89_Special_Stage_PSG2,	$FD, $01, $00, fTone_08
0007E290 0000 DC04 0004             	smpsHeaderPSG       Mus89_Special_Stage_PSG3,	$DC, $04, $00, fTone_04
0007E296                            
0007E296                            ; FM1 Data
0007E296                            Mus89_Special_Stage_FM1:
0007E298                            
0007E298                            Mus89_Special_Stage_Loop05:
0007E298 C118 C20C C418 C10C 18BD+  	dc.b	nE5, $18, nF5, $0C, nG5, $18, nE5, $0C, $18, nC5, $0C, nE5
0007E2A4 18BD 0CC1 18C2 0CC4 18C1+  	dc.b	$18, nC5, $0C, nE5, $18, nF5, $0C, nG5, $18, nE5, $0C, nC5
0007E2B0 18BF 0CBD 24               	dc.b	$18, nD5, $0C, nC5, $24
0007E2B5 F700 02FF DF               	smpsLoop            $00, $02, Mus89_Special_Stage_Loop05
0007E2BA E703 8009 BF0C C1C2 C1C2+  	dc.b	smpsNoAttack, $03, nRst, $09, nD5, $0C, nE5, nF5, nE5, nF5, nG5, $18
0007E2C6 C10C BD24 800C BFC1 C2C1+  	dc.b	nE5, $0C, nC5, $24, nRst, $0C, nD5, nE5, nF5, nE5, nF5, nG5
0007E2D2 18C6 0CC4 2180 03          	dc.b	$18, nA5, $0C, nG5, $21, nRst, $03
0007E2D9 F6FF BD                    	smpsJump            Mus89_Special_Stage_Loop05
0007E2DC                            
0007E2DC                            ; FM2 Data
0007E2DC                            Mus89_Special_Stage_FM2:
0007E2DE E201                       	smpsNop             $01
0007E2E0                            
0007E2E0                            Mus89_Special_Stage_Loop04:
0007E2E0 C20C 8018 C10C 8018 BF0C+  	dc.b	nF5, $0C, nRst, $18, nE5, $0C, nRst, $18, nD5, $0C, nRst, $18
0007E2EC BD0C BFC1 C20C 8018 C10C+  	dc.b	nC5, $0C, nD5, nE5, nF5, $0C, nRst, $18, nE5, $0C, nRst, $18
0007E2F8 BF12 C106 BF0C BD24        	dc.b	nD5, $12, nE5, $06, nD5, $0C, nC5, $24
0007E300 F700 02FF DC               	smpsLoop            $00, $02, Mus89_Special_Stage_Loop04
0007E305 BB0C 8018 BB0C 8018 BD0C+  	dc.b	nBb4, $0C, nRst, $18, nBb4, $0C, nRst, $18, nC5, $0C, nRst, $18
0007E311 BD0C 8018 BB0C 8018 BB0C+  	dc.b	nC5, $0C, nRst, $18, nBb4, $0C, nRst, $18, nBb4, $0C, nRst, $18
0007E31D BF0C 8018 C424             	dc.b	nD5, $0C, nRst, $18, nG5, $24
0007E323 E201                       	smpsNop             $01
0007E325 F6FF B9                    	smpsJump            Mus89_Special_Stage_Loop04
0007E328                            
0007E328                            ; FM3 Data
0007E328                            Mus89_Special_Stage_FM3:
0007E32A F01A 0104 06               	smpsModSet          $1A, $01, $04, $06
0007E32F E0C0                       	smpsPan             panCenter, $00
0007E331                            
0007E331                            Mus89_Special_Stage_Loop03:
0007E331 F800 00                    	smpsCall            Mus89_Special_Stage_Call04
0007E334 80D5 0380 09D5 0CD4 D5D7   	dc.b	nRst, nC7, $03, nRst, $09, nC7, $0C, nB6, nC7, nD7
0007E33E F800 00                    	smpsCall            Mus89_Special_Stage_Call04
0007E341 D512 D706 D50C D424        	dc.b	nC7, $12, nD7, $06, nC7, $0C, nB6, $24
0007E349 F700 02FF E4               	smpsLoop            $00, $02, Mus89_Special_Stage_Loop03
0007E34E F800 00                    	smpsCall            Mus89_Special_Stage_Call05
0007E351 80D4 0380 09D4 0C80 D403+  	dc.b	nRst, nB6, $03, nRst, $09, nB6, $0C, nRst, nB6, $03, nRst, $09
0007E35D D40C                       	dc.b	nB6, $0C
0007E35F F800 00                    	smpsCall            Mus89_Special_Stage_Call05
0007E362 80D5 0380 09D5 0C24        	dc.b	nRst, nC7, $03, nRst, $09, nC7, $0C, $24
0007E36A F6FF C5                    	smpsJump            Mus89_Special_Stage_Loop03
0007E36D                            
0007E36D                            Mus89_Special_Stage_Call04:
0007E36D 800C D903 8009 D90C 80D7+  	dc.b	nRst, $0C, nE7, $03, nRst, $09, nE7, $0C, nRst, nD7, $03, nRst
0007E379 09D7 0C                    	dc.b	$09, nD7, $0C
0007E37C E3                         	smpsReturn
0007E37D                            
0007E37D                            Mus89_Special_Stage_Call05:
0007E37D 800C D203 8009 D20C 80D2+  	dc.b	nRst, $0C, nA6, $03, nRst, $09, nA6, $0C, nRst, nA6, $03, nRst
0007E389 09D2 0C                    	dc.b	$09, nA6, $0C
0007E38C E3                         	smpsReturn
0007E38D                            
0007E38D                            ; FM4 Data
0007E38D                            Mus89_Special_Stage_FM4:
0007E38F F01A 0104 06               	smpsModSet          $1A, $01, $04, $06
0007E394 E040                       	smpsPan             panRight, $00
0007E396                            
0007E396                            Mus89_Special_Stage_Loop02:
0007E396 F800 00                    	smpsCall            Mus89_Special_Stage_Call02
0007E399 80D2 0380 09D2 0CD0 D2D4   	dc.b	nRst, nA6, $03, nRst, $09, nA6, $0C, nG6, nA6, nB6
0007E3A3 F800 00                    	smpsCall            Mus89_Special_Stage_Call02
0007E3A6 D212 D406 D20C D024        	dc.b	nA6, $12, nB6, $06, nA6, $0C, nG6, $24
0007E3AE F700 02FF E4               	smpsLoop            $00, $02, Mus89_Special_Stage_Loop02
0007E3B3 F800 00                    	smpsCall            Mus89_Special_Stage_Call03
0007E3B6 80D0 0380 09D0 0C80 D003+  	dc.b	nRst, nG6, $03, nRst, $09, nG6, $0C, nRst, nG6, $03, nRst, $09
0007E3C2 D00C                       	dc.b	nG6, $0C
0007E3C4 F800 00                    	smpsCall            Mus89_Special_Stage_Call03
0007E3C7 80D2 0380 09D2 0C24        	dc.b	nRst, nA6, $03, nRst, $09, nA6, $0C, $24
0007E3CF F6FF C5                    	smpsJump            Mus89_Special_Stage_Loop02
0007E3D2                            
0007E3D2                            Mus89_Special_Stage_Call02:
0007E3D2 800C D503 8009 D50C 80D4+  	dc.b	nRst, $0C, nC7, $03, nRst, $09, nC7, $0C, nRst, nB6, $03, nRst
0007E3DE 09D4 0C                    	dc.b	$09, nB6, $0C
0007E3E1 E3                         	smpsReturn
0007E3E2                            
0007E3E2                            Mus89_Special_Stage_Call03:
0007E3E2 800C CE03 8009 CE0C 80CE+  	dc.b	nRst, $0C, nF6, $03, nRst, $09, nF6, $0C, nRst, nF6, $03, nRst
0007E3EE 09CE 0C                    	dc.b	$09, nF6, $0C
0007E3F1 E3                         	smpsReturn
0007E3F2                            
0007E3F2                            ; FM5 Data
0007E3F2                            Mus89_Special_Stage_FM5:
0007E3F4 F01A 0104 06               	smpsModSet          $1A, $01, $04, $06
0007E3F9 E080                       	smpsPan             panLeft, $00
0007E3FB                            
0007E3FB                            Mus89_Special_Stage_Loop01:
0007E3FB F800 00                    	smpsCall            Mus89_Special_Stage_Call00
0007E3FE 80CE 0380 09CE 0CCD CED0   	dc.b	nRst, nF6, $03, nRst, $09, nF6, $0C, nE6, nF6, nG6
0007E408 F800 00                    	smpsCall            Mus89_Special_Stage_Call00
0007E40B CE12 D006 CE0C CD24        	dc.b	nF6, $12, nG6, $06, nF6, $0C, nE6, $24
0007E413 F700 02FF E4               	smpsLoop            $00, $02, Mus89_Special_Stage_Loop01
0007E418 F800 00                    	smpsCall            Mus89_Special_Stage_Call01
0007E41B 80CD 0380 09CD 0C80 CD03+  	dc.b	nRst, nE6, $03, nRst, $09, nE6, $0C, nRst, nE6, $03, nRst, $09
0007E427 CD0C                       	dc.b	nE6, $0C
0007E429 F800 00                    	smpsCall            Mus89_Special_Stage_Call01
0007E42C 80CE 0380 09CE 0C24        	dc.b	nRst, nF6, $03, nRst, $09, nF6, $0C, $24
0007E434 F6FF C5                    	smpsJump            Mus89_Special_Stage_Loop01
0007E437                            
0007E437                            Mus89_Special_Stage_Call00:
0007E437 800C D203 8009 D20C 80D0+  	dc.b	nRst, $0C, nA6, $03, nRst, $09, nA6, $0C, nRst, nG6, $03, nRst
0007E443 09D0 0C                    	dc.b	$09, nG6, $0C
0007E446 E3                         	smpsReturn
0007E447                            
0007E447                            Mus89_Special_Stage_Call01:
0007E447 800C CB03 8009 CB0C 80CB+  	dc.b	nRst, $0C, nD6, $03, nRst, $09, nD6, $0C, nRst, nD6, $03, nRst
0007E453 09CB 0C                    	dc.b	$09, nD6, $0C
0007E456 E3                         	smpsReturn
0007E457                            
0007E457                            ; PSG1 Data
0007E457                            Mus89_Special_Stage_PSG1:
0007E457 E806                       	smpsNoteFill        $06
0007E459                            
0007E459                            Mus89_Special_Stage_Loop06:
0007E459 F800 00                    	smpsCall            Mus89_Special_Stage_Call06
0007E45C C906 06C6 0380 09C2 0380+  	dc.b	nC6, $06, $06, nA5, $03, nRst, $09, nF5, $03, nRst, $09, nB5
0007E468 0380 21                    	dc.b	$03, nRst, $21
0007E46B F800 00                    	smpsCall            Mus89_Special_Stage_Call06
0007E46E C903 8015 CB03 8009 C903+  	dc.b	nC6, $03, nRst, $15, nD6, $03, nRst, $09, nC6, $03, nRst, $21
0007E47A F700 02FF DB               	smpsLoop            $00, $02, Mus89_Special_Stage_Loop06
0007E47F F800 00                    	smpsCall            Mus89_Special_Stage_Call07
0007E482 D406 06D0 D0CD CDD4 D4D0+  	dc.b	nB6, $06, $06, nG6, nG6, nE6, nE6, nB6, nB6, nG6, nG6, nE6
0007E48E 0380 09                    	dc.b	$03, nRst, $09
0007E491 F800 00                    	smpsCall            Mus89_Special_Stage_Call07
0007E494 D506 06D2 D2CE CED0 0980+  	dc.b	nC7, $06, $06, nA6, nA6, nF6, nF6, nG6, $09, nRst, $1B
0007E49F F6FF B8                    	smpsJump            Mus89_Special_Stage_Loop06
0007E4A2                            
0007E4A2                            Mus89_Special_Stage_Call06:
0007E4A2 CD06 06C9 0380 09C6 0380+  	dc.b	nE6, $06, $06, nC6, $03, nRst, $09, nA5, $03, nRst, $09, nD6
0007E4AE 0606 C803 8009 C403 8009   	dc.b	$06, $06, nB5, $03, nRst, $09, nG5, $03, nRst, $09
0007E4B8 E3                         	smpsReturn
0007E4B9                            
0007E4B9                            Mus89_Special_Stage_Call07:
0007E4B9 D206 06CE CECB CBD2 D2CE+  	dc.b	nA6, $06, $06, nF6, nF6, nD6, nD6, nA6, nA6, nF6, nF6, nD6
0007E4C5 0380 09                    	dc.b	$03, nRst, $09
0007E4C8 E3                         	smpsReturn
0007E4C9                            
0007E4C9                            ; PSG2 Data
0007E4C9                            Mus89_Special_Stage_PSG2:
0007E4C9 800C BDBD 80BD BD80 BDBD+  	dc.b	nRst, $0C, nC5, nC5, nRst, nC5, nC5, nRst, nC5, nC5, nRst, nC5
0007E4D5 0606 0C80 BDBD 80BD BD80+  	dc.b	$06, $06, $0C, nRst, nC5, nC5, nRst, nC5, nC5, nRst, nC5, nC5
0007E4E1 BD24                       	dc.b	nC5, $24
0007E4E3 F6FF E4                    	smpsJump            Mus89_Special_Stage_PSG2
0007E4E6                            
0007E4E6                            ; DAC Data
0007E4E6                            Mus89_Special_Stage_DAC:
0007E4E6                            ; PSG3 Data
0007E4E6                            Mus89_Special_Stage_PSG3:
0007E4E6 F2                         	smpsStop
0007E4E7                            
0007E4E7                            ; FM6 Data
0007E4E7                            Mus89_Special_Stage_FM6:
0007E4E9 E102                       	smpsAlterNote       $02
0007E4EB                            
0007E4EB                            Mus89_Special_Stage_Loop00:
0007E4EB C118 C20C C418 C10C 18BD+  	dc.b	nE5, $18, nF5, $0C, nG5, $18, nE5, $0C, $18, nC5, $0C, nE5
0007E4F7 18BD 0CC1 18C2 0CC4 18C1+  	dc.b	$18, nC5, $0C, nE5, $18, nF5, $0C, nG5, $18, nE5, $0C, nC5
0007E503 18BF 0CBD 24               	dc.b	$18, nD5, $0C, nC5, $24
0007E508 F700 02FF DF               	smpsLoop            $00, $02, Mus89_Special_Stage_Loop00
0007E50D 800C BFC1 C2C1 C2C4 18C1+  	dc.b	nRst, $0C, nD5, nE5, nF5, nE5, nF5, nG5, $18, nE5, $0C, nC5
0007E519 2480 0CBF C1C2 C1C2 C418+  	dc.b	$24, nRst, $0C, nD5, nE5, nF5, nE5, nF5, nG5, $18, nA5, $0C
0007E525 C421 8003                  	dc.b	nG5, $21, nRst, $03
0007E529 F6FF C0                    	smpsJump            Mus89_Special_Stage_Loop00
0007E52C                            
0007E52C                            Mus89_Special_Stage_Voices:
0007E52C                            ;	Voice $00
0007E52C                            ;	$2C
0007E52C                            ;	$74, $74, $34, $34, 	$1F, $12, $1F, $1F, 	$00, $00, $00, $00
0007E52C                            ;	$00, $01, $00, $01, 	$00, $36, $00, $36, 	$16, $80, $17, $80
0007E52C                            	smpsVcAlgorithm     $04
0007E52C                            	smpsVcFeedback      $05
0007E52C                            	smpsVcUnusedBits    $00
0007E52C                            	smpsVcDetune        $03, $03, $07, $07
0007E52C                            	smpsVcCoarseFreq    $04, $04, $04, $04
0007E52C                            	smpsVcRateScale     $00, $00, $00, $00
0007E52C                            	smpsVcAttackRate    $1F, $1F, $12, $1F
0007E52C                            	smpsVcAmpMod        $00, $00, $00, $00
0007E52C                            	smpsVcDecayRate1    $00, $00, $00, $00
0007E52C                            	smpsVcDecayRate2    $01, $00, $01, $00
0007E52C                            	smpsVcDecayLevel    $03, $00, $03, $00
0007E52C                            	smpsVcReleaseRate   $06, $00, $06, $00
0007E52C 2C74 7434 341F 121F 1F00+  	smpsVcTotalLevel    $00, $17, $00, $16
0007E545                            
0007E545                            ;	Voice $01
0007E545                            ;	$2C
0007E545                            ;	$72, $78, $34, $34, 	$1F, $12, $1F, $12, 	$00, $0A, $00, $0A
0007E545                            ;	$00, $00, $00, $00, 	$00, $16, $00, $16, 	$16, $80, $17, $80
0007E545                            	smpsVcAlgorithm     $04
0007E545                            	smpsVcFeedback      $05
0007E545                            	smpsVcUnusedBits    $00
0007E545                            	smpsVcDetune        $03, $03, $07, $07
0007E545                            	smpsVcCoarseFreq    $04, $04, $08, $02
0007E545                            	smpsVcRateScale     $00, $00, $00, $00
0007E545                            	smpsVcAttackRate    $12, $1F, $12, $1F
0007E545                            	smpsVcAmpMod        $00, $00, $00, $00
0007E545                            	smpsVcDecayRate1    $0A, $00, $0A, $00
0007E545                            	smpsVcDecayRate2    $00, $00, $00, $00
0007E545                            	smpsVcDecayLevel    $01, $00, $01, $00
0007E545                            	smpsVcReleaseRate   $06, $00, $06, $00
0007E545 2C72 7834 341F 121F 1200+  	smpsVcTotalLevel    $00, $17, $00, $16
0007E55E                            
0007E55E                            ;	Voice $02
0007E55E                            ;	$30
0007E55E                            ;	$30, $30, $30, $30, 	$9E, $D8, $DC, $DC, 	$0E, $0A, $04, $05
0007E55E                            ;	$08, $08, $08, $08, 	$B0, $B0, $B0, $B5, 	$14, $3C, $14, $80
0007E55E                            	smpsVcAlgorithm     $00
0007E55E                            	smpsVcFeedback      $06
0007E55E                            	smpsVcUnusedBits    $00
0007E55E                            	smpsVcDetune        $03, $03, $03, $03
0007E55E                            	smpsVcCoarseFreq    $00, $00, $00, $00
0007E55E                            	smpsVcRateScale     $03, $03, $03, $02
0007E55E                            	smpsVcAttackRate    $1C, $1C, $18, $1E
0007E55E                            	smpsVcAmpMod        $00, $00, $00, $00
0007E55E                            	smpsVcDecayRate1    $05, $04, $0A, $0E
0007E55E                            	smpsVcDecayRate2    $08, $08, $08, $08
0007E55E                            	smpsVcDecayLevel    $0B, $0B, $0B, $0B
0007E55E                            	smpsVcReleaseRate   $05, $00, $00, $00
0007E55E 3030 3030 309E D8DC DC0E+  	smpsVcTotalLevel    $00, $14, $3C, $14
0007E577                            
0007E577                            ;	Voice $03
0007E577                            ;	$3D
0007E577                            ;	$01, $02, $00, $01, 	$1F, $10, $10, $10, 	$07, $1F, $1F, $1F
0007E577                            ;	$00, $00, $00, $00, 	$10, $07, $07, $07, 	$17, $80, $80, $80
0007E577                            	smpsVcAlgorithm     $05
0007E577                            	smpsVcFeedback      $07
0007E577                            	smpsVcUnusedBits    $00
0007E577                            	smpsVcDetune        $00, $00, $00, $00
0007E577                            	smpsVcCoarseFreq    $01, $00, $02, $01
0007E577                            	smpsVcRateScale     $00, $00, $00, $00
0007E577                            	smpsVcAttackRate    $10, $10, $10, $1F
0007E577                            	smpsVcAmpMod        $00, $00, $00, $00
0007E577                            	smpsVcDecayRate1    $1F, $1F, $1F, $07
0007E577                            	smpsVcDecayRate2    $00, $00, $00, $00
0007E577                            	smpsVcDecayLevel    $00, $00, $00, $01
0007E577                            	smpsVcReleaseRate   $07, $07, $07, $00
0007E577 3D01 0200 011F 1010 1007+  	smpsVcTotalLevel    $00, $00, $00, $17
0007E590                            
0007E590                            
0007E590                            		even
0007E590                            Music8A:	include	"sound/music/TOSTH.asm"
0007E590                            Mus8B_Ending_Header:
0007E590 =00000001                  smpsHeaderStartSong = 1
0007E590 0000                       	smpsHeaderVoice     Mus8B_Ending_Voices
0007E592 0603                       	smpsHeaderChan      $06, $03
0007E594 0105                       	smpsHeaderTempo     $01, $05
0007E596                            
0007E59A 0000 F40E                  	smpsHeaderFM        Mus8B_Ending_FM1,	$F4, $0E ;E
0007E59E 0000 F409                  	smpsHeaderFM        Mus8B_Ending_FM2,	$F4, $09 ;9
0007E5A2 0000 F40D                  	smpsHeaderFM        Mus8B_Ending_FM3,	$F4, $0D ;D
0007E5A6 0000 F40D                  	smpsHeaderFM        Mus8B_Ending_FM4,	$F4, $0D ;D
0007E5AA 0000 F417                  	smpsHeaderFM        Mus8B_Ending_FM5,	$F4, $17 ;17
0007E5AE 0000 D005 0005             	smpsHeaderPSG       Mus8B_Ending_PSG1,	$D0, $05, $00, fTone_05 ; 5
0007E5B4 0000 DC05 0005             	smpsHeaderPSG       Mus8B_Ending_PSG2,	$DC, $05, $00, fTone_05 ; 5
0007E5BA 0000 0003 0004             	smpsHeaderPSG       Mus8B_Ending_PSG3,	$00, $03, $00, fTone_04 ; 3
0007E5C0                            
0007E5C0                            ; FM1 Data
0007E5C0                            Mus8B_Ending_FM1:
0007E5C2 8030                       	dc.b	nRst, $30
0007E5C4 F800 00                    	smpsCall            Mus8B_Ending_Call00
0007E5C7 8060                       	dc.b	nRst, $60
0007E5C9 E6FB                       	smpsAlterVol        $FB
0007E5CB 800C 8006 8080 0C80 0680+  	dc.b	nRst, $0C, nRst, $06, nRst, nRst, $0C, nRst, $06, nRst, nRst, $18
0007E5D7 8018 80                    	dc.b	nRst, $18, nRst
0007E5DA 8048                       	dc.b	nRst, $48
0007E5DC                            ;	smpsAlterVol        $FB
0007E5DC 800C CD06 80D4 CD06 800C+  	dc.b	nRst, $0C, nE6, $06, nRst, nB6, nE6, $06, nRst, $0C, nE6, $06
0007E5E8 80D4 CD06 8018             	dc.b	nRst, nB6, nE6, $06, nRst, $18
0007E5EE E605                       	smpsAlterVol        $05
0007E5F0 800C AE80 AE80 24          	dc.b	nRst, $0C, nA3, nRst, nA3, nRst, $24
0007E5F7 E102                       	smpsAlterNote       $02
0007E5F9 E608                       	smpsAlterVol        $08
0007E5FB A26C                       	dc.b	nA2, $6C
0007E5FD F2                         	smpsStop
0007E5FE                            
0007E5FE                            Mus8B_Ending_Call00:
0007E5FE 800C CA15 8003 CA06 80CB+  	dc.b	nRst, $0C, nCs6, $15, nRst, $03, nCs6, $06, nRst, nD6, $0F, nRst
0007E60A 03C8 1880 06CA 80CA 80CA+  	dc.b	$03, nB5, $18, nRst, $06, nCs6, nRst, nCs6, nRst, nCs6, nRst, nA5
0007E616 80C4 0F80 03C8 1880 06     	dc.b	nRst, nG5, $0F, nRst, $03, nB5, $18, nRst, $06
0007E61F F700 02FF DB               	smpsLoop            $00, $02, Mus8B_Ending_Call00
0007E624 E3                         	smpsReturn
0007E625                            
0007E625                            ; FM2 Data
0007E625                            Mus8B_Ending_FM2:
0007E627 E201                       	smpsNop             $01
0007E629 8030                       	dc.b	nRst, $30
0007E62B                            
0007E62B                            Mus8B_Ending_Loop03:
0007E62B AE06 80AE 80A9 80A9 80AC+  	dc.b	nA3, $06, nRst, nA3, nRst, nE3, nRst, nE3, nRst, nG3, $12, nFs3
0007E637 0CAC 06AB 0CAE 0680 AE80+  	dc.b	$0C, nG3, $06, nFs3, $0C, nA3, $06, nRst, nA3, nRst, nE3, nRst
0007E643 A980 B312 B20C B306 B20C   	dc.b	nE3, nRst, nD4, $12, nCs4, $0C, nD4, $06, nCs4, $0C
0007E64D F700 02FF DA               	smpsLoop            $00, $02, Mus8B_Ending_Loop03
0007E652 AC06 80A9 80AA 80AB 80AC+  	dc.b	nG3, $06, nRst, nE3, nRst, nF3, nRst, nFs3, nRst, nG3, nG3, nE3
0007E65E 80AA 80AB 80AE 80A9 80     	dc.b	nRst, nF3, nRst, nFs3, nRst, nA3, nRst, nE3, nRst
0007E667 AC80 A980 AEAE A980 AE80+  	dc.b	nG3, nRst, nE3, nRst, nA3, nA3, nE3, nRst, nA3, nRst, nAb3, nRst
0007E673 AC06 80A9 80AA 80AB 80AC+  	dc.b	nG3, $06, nRst, nE3, nRst, nF3, nRst, nFs3, nRst, nG3, nG3, nE3
0007E67F 80AA 80AC 80A9 80A9 80AD+  	dc.b	nRst, nF3, nRst, nG3, nRst, nE3, nRst, nE3, nRst, nAb3, nRst, nAb3
0007E68B 80B0 80B0 80B3 80B3 8080+  	dc.b	nRst, nB3, nRst, nB3, nRst, nD4, nRst, nD4, nRst, nRst, $0C, nA2
0007E697 1280 06A2 12AD AE06 80     	dc.b	$12, nRst, $06, nA2, $12, nAb3, nA3, $06, nRst
0007E6A0 F700 01FF 87               	smpsLoop            $00, $01, Mus8B_Ending_Loop03
0007E6A5 E6FD                       	smpsAlterVol        $FD
0007E6A7 A26C                       	dc.b	nA2, $6C
0007E6A9 E201                       	smpsNop             $01
0007E6AB F2                         	smpsStop
0007E6AC                            
0007E6AC                            ; FM3 Data
0007E6AC                            Mus8B_Ending_FM3:
0007E6AE 8030                       	dc.b	nRst, $30
0007E6B0                            
0007E6B0                            Mus8B_Ending_Loop02:
0007E6B0 CD06 80CD 80CA 80CA 80CB+  	dc.b	nE6, $06, nRst, nE6, nRst, nCs6, nRst, nCs6, nRst, nD6, $12, nD6
0007E6BC 1ECD 0680 CD80 CA80 CA80+  	dc.b	$1E, nE6, $06, nRst, nE6, nRst, nCs6, nRst, nCs6, nRst, nG6, $12
0007E6C8 D01E                       	dc.b	nG6, $1E
0007E6CA F700 02FF E2               	smpsLoop            $00, $02, Mus8B_Ending_Loop02
0007E6CF 800C CB12 8006 CB80 CA12+  	dc.b	nRst, $0C, nD6, $12, nRst, $06, nD6, nRst, nCs6, $12, nD6, nCs6
0007E6DB 0C80 CD0C CFCD CF12 CD1E   	dc.b	$0C, nRst, nE6, $0C, nFs6, nE6, nFs6, $12, nE6, $1E
0007E6E5 800C CB12 8006 CB80 CA12+  	dc.b	nRst, $0C, nD6, $12, nRst, $06, nD6, nRst, nCs6, $12, nD6, nCs6
0007E6F1 0CC5 18C8 CBD1 800C CD80+  	dc.b	$0C, nAb5, $18, nB5, nD6, nAb6, nRst, $0C, nE6, nRst, nE6, $12
0007E6FD CCCD 0680                  	dc.b	nEb6, nE6, $06, nRst
0007E701 E6F8                       	smpsAlterVol        $F8
0007E705 E103                       	smpsAlterNote       $03
0007E707 A26C                       	dc.b	nA2, $6C
0007E709 F2                         	smpsStop
0007E70A                            
0007E70A                            ; FM4 Data
0007E70A                            Mus8B_Ending_FM4:
0007E70C 8030                       	dc.b	nRst, $30
0007E70E                            
0007E70E                            Mus8B_Ending_Loop01:
0007E70E CA06 80CA 80C6 80C6 80C8+  	dc.b	nCs6, $06, nRst, nCs6, nRst, nA5, nRst, nA5, nRst, nB5, $12, nB5
0007E71A 1ECA 0680 CA80 C680 C680+  	dc.b	$1E, nCs6, $06, nRst, nCs6, nRst, nA5, nRst, nA5, nRst, nD6, $12
0007E726 CB1E                       	dc.b	nD6, $1E
0007E728 F700 02FF E2               	smpsLoop            $00, $02, Mus8B_Ending_Loop01
0007E72D E103                       	smpsAlterNote       $03
0007E72F E608                       	smpsAlterVol        $08
0007E731 F800 00                    	smpsCall            Mus8B_Ending_Call01
0007E734 E6F0                       	smpsAlterVol        $F0
0007E738 F000 0106 04               	smpsModSet          $00, $01, $06, $04
0007E73D                            ;	dc.b	nA2, $6C
0007E73D F2                         	smpsStop
0007E73E                            
0007E73E                            Mus8B_Ending_Call01:
0007E740 800C D0D4 D7DB 0C80        	dc.b		nRst,	$0C,	nG6,	nB6,	nD7,	nFs7,	$0C,	nRst
0007E748 06DB 0CDC 06DB 0CD9        	dc.b		$06,	nFs7,	$0C,	nG7,	$06,	nFs7,	$0C,	nE7
0007E750 6080 0CD0 D4D7 DB0C        	dc.b		$60,	nRst,	$0C,	nG6,	nB6,	nD7,	nFs7,	$0C
0007E758 8006 DB0C DC06 DB0C        	dc.b		nRst,	$06,	nFs7,	$0C,	nG7,	$06,	nFs7,	$0C
0007E760 DD5D 8003 DE12 8006        	dc.b		nAb7,	$5D,	nRst,	$03,	nA7,	$12,	nRst,	$06
0007E768 DE12 8006 8006 DD12        	dc.b		nA7,	$12,	nRst,	$06,	nRst,	$06,	nAb7,	$12
0007E770 DE06 8009                  	dc.b		nA7,	$06,	nRst,	$09
0007E774 E3                         	smpsReturn
0007E775                            
0007E775                            ; FM5 Data
0007E775                            Mus8B_Ending_FM5:
0007E777 E103                       	smpsAlterNote       $03
0007E779 E6F7                       	smpsAlterVol        $F7
0007E77B 8030                       	dc.b	nRst, $30
0007E77D F8FE 7F                    	smpsCall            Mus8B_Ending_Call00
0007E780 E609                       	smpsAlterVol        $09
0007E782 F000 0106 04               	smpsModSet          $00, $01, $06, $04
0007E787 F8FF B5                    	smpsCall            Mus8B_Ending_Call01
0007E78A F2                         	smpsStop
0007E78B                            
0007E78B                            ; PSG1 Data
0007E78B                            Mus8B_Ending_PSG1:
0007E78B 806C 8080 8080 0CC8 1280+  	dc.b	nRst, $6C, nRst, nRst, nRst, nRst, $0C, nB5, $12, nRst, $06
0007E796 C880 C612 C8C6 0C80 CACB+  	dc.b	nB5, nRst, nA5, $12, nB5, nA5, $0C, nRst, nCs6, nD6, nCs6, nD6, $12
0007E7A3 CA1E 800C C812 8006        	dc.b	nCs6, $1E, nRst, $0C, nB5, $12, nRst, $06
0007E7AB C880 C612 C8C6 0CC1 18C5+  	dc.b	nB5, nRst, nA5, $12, nB5, nA5, $0C, nE5, $18, nAb5, nB5, nD6
0007E7B7 800C CA80 CA12 C9CA 06     	dc.b	nRst, $0C, nCs6, nRst, nCs6, $12, nC6, nCs6, $06
0007E7C0 F2                         	smpsStop
0007E7C1                            
0007E7C1                            ; PSG2 Data
0007E7C1                            Mus8B_Ending_PSG2:
0007E7C1 E101                       	smpsAlterNote       $01
0007E7C3 8058 8080 8080 8080 0C80   	dc.b	nRst, $58, nRst, nRst, nRst, nRst, nRst, nRst, $0C, nRst
0007E7CD 0680 800C 8006 8080 1880+  	dc.b	$06, nRst, nRst, $0C, nRst, $06, nRst, nRst, $18, nRst, $18, nRst
0007E7D9 8080 8080 0CCA 0680        	dc.b	nRst, nRst, nRst, nRst, $0C, nCs6, $06, nRst
0007E7E1 D4CD 800C CD06 80D4 CD80+  	dc.b	nB6, nE6, nRst, $0C, nE6, $06, nRst, nB6, nE6, nRst, $18
0007E7EC F2                         	smpsStop
0007E7ED                            	
0007E7ED                            ;	dc.b	nRst, $58, nRst, nRst, nRst, nRst, nRst, nRst, $0C, nE6
0007E7ED                            ;	dc.b	$06, nRst, nCs6, $0C, nD6, $06, nRst, nCs6, $18, nD6, $18, nRst
0007E7ED                            
0007E7ED                            ; PSG3 Data
0007E7ED                            Mus8B_Ending_PSG3:
0007E7ED F3E7                       	smpsPSGform         $E7
0007E7EF 8030                       	dc.b	nRst, $30
0007E7F1                            
0007E7F1                            Mus8B_Ending_Loop04:
0007E7F1 E803                       	smpsNoteFill        $03
0007E7F3 C60C                       	dc.b	nA5, $0C
0007E7F5 E80C                       	smpsNoteFill        $0C
0007E7F7 0C                         	dc.b	$0C
0007E7F8 E803                       	smpsNoteFill        $03
0007E7FA 0C                         	dc.b	$0C
0007E7FB E80C                       	smpsNoteFill        $0C
0007E7FD 0C                         	dc.b	$0C
0007E7FE F700 11FF EF               	smpsLoop            $00, $11, Mus8B_Ending_Loop04
0007E803 E803                       	smpsNoteFill        $03
0007E805 06                         	dc.b	$06
0007E806 E80E                       	smpsNoteFill        $0E
0007E808 12                         	dc.b	$12
0007E809 E803                       	smpsNoteFill        $03
0007E80B 0C                         	dc.b	$0C
0007E80C E80F                       	smpsNoteFill        $0F
0007E80E 0C                         	dc.b	$0C
0007E80F F2                         	smpsStop
0007E810                            
0007E810                            ; DAC Data
0007E810                            Mus8B_Ending_DAC:
0007E810 800C 8282 82               	dc.b	nRst, $0C, dSnare, dSnare, dSnare
0007E815                            
0007E815                            Mus8B_Ending_Loop00:
0007E815 810C 8281 8281 0C82 8182+  	dc.b	dKick, $0C, dSnare, dKick, dSnare, dKick, $0C, dSnare, dKick, dSnare, dKick, $0C
0007E821 8281 8281 0C82 8106 8002+  	dc.b	dSnare, dKick, dSnare, dKick, $0C, dSnare, dKick, $06, nRst, $02, dSnare, dSnare
0007E82D 8209 8203                  	dc.b	dSnare, $09, dSnare, $03
0007E831 F700 04FF E0               	smpsLoop            $00, $04, Mus8B_Ending_Loop00
0007E836 810C 8281 8281 0682 1282+  	dc.b	dKick, $0C, dSnare, dKick, dSnare, dKick, $06, dSnare, $12, dSnare, $0C, dKick
0007E842 F2                         	smpsStop
0007E843                            
0007E843                            Mus8B_Ending_Voices:
0007E843                            ;	Voice $00
0007E843                            ;	$3D
0007E843                            ;	$01, $02, $02, $02, 	$14, $0E, $8C, $0E, 	$08, $05, $02, $05
0007E843                            ;	$00, $00, $00, $00, 	$1F, $1F, $1F, $1F, 	$1A, $80, $80, $80
0007E843                            	smpsVcAlgorithm     $05
0007E843                            	smpsVcFeedback      $07
0007E843                            	smpsVcUnusedBits    $00
0007E843                            	smpsVcDetune        $00, $00, $00, $00
0007E843                            	smpsVcCoarseFreq    $02, $02, $02, $01
0007E843                            	smpsVcRateScale     $00, $02, $00, $00
0007E843                            	smpsVcAttackRate    $0E, $0C, $0E, $14
0007E843                            	smpsVcAmpMod        $00, $00, $00, $00
0007E843                            	smpsVcDecayRate1    $05, $02, $05, $08
0007E843                            	smpsVcDecayRate2    $00, $00, $00, $00
0007E843                            	smpsVcDecayLevel    $01, $01, $01, $01
0007E843                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007E843 3D01 0202 0214 0E8C 0E08+  	smpsVcTotalLevel    $00, $00, $00, $1A
0007E85C                            
0007E85C                            ;	Voice $01
0007E85C                            ;	$20
0007E85C                            ;	$36, $35, $30, $31, 	$DF, $DF, $9F, $9F, 	$07, $06, $09, $06
0007E85C                            ;	$07, $06, $06, $08, 	$2F, $1F, $1F, $FF, 	$19, $37, $13, $80
0007E85C                            	smpsVcAlgorithm     $00
0007E85C                            	smpsVcFeedback      $04
0007E85C                            	smpsVcUnusedBits    $00
0007E85C                            	smpsVcDetune        $03, $03, $03, $03
0007E85C                            	smpsVcCoarseFreq    $01, $00, $05, $06
0007E85C                            	smpsVcRateScale     $02, $02, $03, $03
0007E85C                            	smpsVcAttackRate    $1F, $1F, $1F, $1F
0007E85C                            	smpsVcAmpMod        $00, $00, $00, $00
0007E85C                            	smpsVcDecayRate1    $06, $09, $06, $07
0007E85C                            	smpsVcDecayRate2    $08, $06, $06, $07
0007E85C                            	smpsVcDecayLevel    $0F, $01, $01, $02
0007E85C                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007E85C 2036 3530 31DF DF9F 9F07+  	smpsVcTotalLevel    $00, $13, $37, $19
0007E875                            
0007E875                            ;	Voice $02
0007E875                            ;	$3A
0007E875                            ;	$01, $07, $01, $01, 	$8E, $8E, $8D, $53, 	$0E, $0E, $0E, $03
0007E875                            ;	$00, $00, $00, $00, 	$1F, $FF, $1F, $0F, 	$18, $28, $27, $80
0007E875                            	smpsVcAlgorithm     $02
0007E875                            	smpsVcFeedback      $07
0007E875                            	smpsVcUnusedBits    $00
0007E875                            	smpsVcDetune        $00, $00, $00, $00
0007E875                            	smpsVcCoarseFreq    $01, $01, $07, $01
0007E875                            	smpsVcRateScale     $01, $02, $02, $02
0007E875                            	smpsVcAttackRate    $13, $0D, $0E, $0E
0007E875                            	smpsVcAmpMod        $00, $00, $00, $00
0007E875                            	smpsVcDecayRate1    $03, $0E, $0E, $0E
0007E875                            	smpsVcDecayRate2    $00, $00, $00, $00
0007E875                            	smpsVcDecayLevel    $00, $01, $0F, $01
0007E875                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007E875 3A01 0701 018E 8E8D 530E+  	smpsVcTotalLevel    $00, $27, $28, $18
0007E88E                            
0007E88E                            ;	Voice $03
0007E88E                            ;	$3A
0007E88E                            ;	$51, $08, $51, $02, 	$1E, $1E, $1E, $10, 	$1F, $1F, $1F, $0F
0007E88E                            ;	$00, $00, $00, $02, 	$0F, $0F, $0F, $1F, 	$18, $24, $22, $81
0007E88E                            	smpsVcAlgorithm     $02
0007E88E                            	smpsVcFeedback      $07
0007E88E                            	smpsVcUnusedBits    $00
0007E88E                            	smpsVcDetune        $00, $05, $00, $05
0007E88E                            	smpsVcCoarseFreq    $02, $01, $08, $01
0007E88E                            	smpsVcRateScale     $00, $00, $00, $00
0007E88E                            	smpsVcAttackRate    $10, $1E, $1E, $1E
0007E88E                            	smpsVcAmpMod        $00, $00, $00, $00
0007E88E                            	smpsVcDecayRate1    $0F, $1F, $1F, $1F
0007E88E                            	smpsVcDecayRate2    $02, $00, $00, $00
0007E88E                            	smpsVcDecayLevel    $01, $00, $00, $00
0007E88E                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007E88E 3A51 0851 021E 1E1E 101F+  	smpsVcTotalLevel    $01, $22, $24, $18
0007E8A7                            
0007E8A7                            
0007E8A8 00                         		even
0007E8A8                            Music8B:	incbin	"sound/music/Mus8B - Ending.bin"
0007EC2A 00                         		even
0007EC2A                            Music8C:	incbin	"sound/music/Mus8C - Boss.bin"
0007F164                            		even
0007F164                            Music8D:	include	"sound/music/Mus8D - FZ.asm"
0007F164                            Mus8D_FZ_Header:
0007F164 =00000001                  smpsHeaderStartSong = 1
0007F164 0000                       	smpsHeaderVoice     Mus8D_FZ_Voices
0007F166 0603                       	smpsHeaderChan      $06, $03
0007F168 020C                       	smpsHeaderTempo     $02, $0C
0007F16A                            
0007F16E 0000 0012                  	smpsHeaderFM        Mus8D_FZ_FM1,	$00, $12
0007F172 0000 F40D                  	smpsHeaderFM        Mus8D_FZ_FM2,	$F4, $0D
0007F176 0000 F40A                  	smpsHeaderFM        Mus8D_FZ_FM3,	$F4, $0A
0007F17A 0000 F40F                  	smpsHeaderFM        Mus8D_FZ_FM4,	$F4, $0F
0007F17E 0000 0012                  	smpsHeaderFM        Mus8D_FZ_FM5,	$00, $12
0007F182 0000 D003 0005             	smpsHeaderPSG       Mus8D_FZ_PSG1,	$D0, $03, $00, fTone_05
0007F188 0000 DC06 0005             	smpsHeaderPSG       Mus8D_FZ_PSG2,	$DC, $06, $00, fTone_05
0007F18E 0000 DC00 0004             	smpsHeaderPSG       Mus8D_FZ_PSG3,	$DC, $00, $00, fTone_04
0007F194                            
0007F194                            ; FM5 Data
0007F194                            Mus8D_FZ_FM5:
0007F194 E103                       	smpsAlterNote       $03
0007F196 F600 00                    	smpsJump            Mus8D_FZ_Jump03
0007F199                            
0007F199                            ; FM1 Data
0007F199                            Mus8D_FZ_FM1:
0007F199 F01A 0106 04               	smpsModSet          $1A, $01, $06, $04
0007F19E                            
0007F19E                            Mus8D_FZ_Jump03:
0007F1A0 D403 80D1 80D1 80D4 D480+  	dc.b	nB6, $03, nRst, nAb6, nRst, nAb6, nRst, nB6, nB6, nRst, $18
0007F1AB                            
0007F1AB                            Mus8D_FZ_Jump02:
0007F1AB 800C C6C8 C9CB C9C8 C9CD+  	dc.b	nRst, $0C, nA5, nB5, nC6, nD6, nC6, nB5, nC6, nE6, $60
0007F1B6 800C C6C8 C9CB C9C8 C9C4+  	dc.b	nRst, $0C, nA5, nB5, nC6, nD6, nC6, nB5, nC6, nG5, $60
0007F1C1 800C C6C8 C9CB C9C8 C9CD+  	dc.b	nRst, $0C, nA5, nB5, nC6, nD6, nC6, nB5, nC6, nE6, $60, nRst
0007F1CD 0CC6 C8C9 CBC9 C8C9 CE30+  	dc.b	$0C, nA5, nB5, nC6, nD6, nC6, nB5, nC6, nF6, $30, nG6, $18
0007F1D9 D1C6 0CC6 C6C6 C8C8 C8C8   	dc.b	nAb6, nA5, $0C, nA5, nA5, nA5, nB5, nB5, nB5, nB5
0007F1E3 F6FF B9                    	smpsJump            Mus8D_FZ_Jump03
0007F1E6                            
0007F1E6                            ; FM2 Data
0007F1E6                            Mus8D_FZ_FM2:
0007F1E8 E201                       	smpsNop             $01
0007F1EA B503 80A9 80A9 80B5 B580+  	dc.b	nE4, $03, nRst, nE3, nRst, nE3, nRst, nE4, nE4, nRst, $12, nC4
0007F1F6 03B0                       	dc.b	$03, nB3
0007F1F8                            
0007F1F8                            Mus8D_FZ_Jump01:
0007F1F8 F800 00                    	smpsCall            Mus8D_FZ_Call01
0007F1FB B103 B0                    	dc.b	nC4, $03, nB3
0007F1FE F800 00                    	smpsCall            Mus8D_FZ_Call01
0007F201 B103 B0                    	dc.b	nC4, $03, nB3
0007F204 F800 00                    	smpsCall            Mus8D_FZ_Call01
0007F207 B103 B0                    	dc.b	nC4, $03, nB3
0007F20A F800 00                    	smpsCall            Mus8D_FZ_Call01
0007F20D AD06 AA0C AA09 AA03 AA06+  	dc.b	nAb3, $06, nF3, $0C, nF3, $09, nF3, $03, nF3, $06, nF3, $0C
0007F219 A506 ACAC 0CAC 06A9 A90C+  	dc.b	nC3, $06, nG3, nG3, $0C, nG3, $06, nE3, nE3, $0C, nC4, $03
0007F225 B0                         	dc.b	nB3
0007F226 E201                       	smpsNop             $01
0007F228 F6FF BC                    	smpsJump            Mus8D_FZ_FM2
0007F22B                            
0007F22B                            Mus8D_FZ_Call01:
0007F22B AE0C AE09 AE03 AE06 AE0C+  	dc.b	nA3, $0C, nA3, $09, nA3, $03, nA3, $06, nA3, $0C, nE3, $06
0007F237 AE03 A9AE 0CA9 06AE 0CAC+  	dc.b	nA3, $03, nE3, nA3, $0C, nE3, $06, nA3, $0C, nG3, nF3, nF3
0007F243 09AA 03AA 06AA 0CA5 06AC+  	dc.b	$09, nF3, $03, nF3, $06, nF3, $0C, nC3, $06, nG3, nG3, $0C
0007F24F AC06 ADAD 0C               	dc.b	nG3, $06, nAb3, nAb3, $0C
0007F254 E3                         	smpsReturn
0007F255                            
0007F255                            ; FM3 Data
0007F255                            Mus8D_FZ_FM3:
0007F257 D903 80CD 80CD 80D9 D903+  	dc.b	nE7, $03, nRst, nE6, nRst, nE6, nRst, nE7, nE7, $03, nRst, $18
0007F263                            
0007F263                            Mus8D_FZ_Jump00:
0007F263 F800 00                    	smpsCall            Mus8D_FZ_Call00
0007F266 D706 80D5 0380 D480 D112   	dc.b	nD7, $06, nRst, nC7, $03, nRst, nB6, nRst, nAb6, $12
0007F270 F800 00                    	smpsCall            Mus8D_FZ_Call00
0007F273 D706 80D5 0380 D480 D112   	dc.b	nD7, $06, nRst, nC7, $03, nRst, nB6, nRst, nAb6, $12
0007F27D F800 00                    	smpsCall            Mus8D_FZ_Call00
0007F280 D706 80D5 0380 D480 D112   	dc.b	nD7, $06, nRst, nC7, $03, nRst, nB6, nRst, nAb6, $12
0007F28A F800 00                    	smpsCall            Mus8D_FZ_Call00
0007F28D D706 80D5 0380 D480 D112+  	dc.b	nD7, $06, nRst, nC7, $03, nRst, nB6, nRst, nAb6, $12, nA5, $18
0007F299 C80C C9C8 18C9 0CCB        	dc.b	nB5, $0C, nC6, nB5, $18, nC6, $0C, nD6
0007F2A1 F6FF B2                    	smpsJump            Mus8D_FZ_FM3
0007F2A4                            
0007F2A4                            Mus8D_FZ_Call00:
0007F2A4 801E BA03 80BD 80C1 80C6+  	dc.b	nRst, $1E, nA4, $03, nRst, nC5, nRst, nE5, nRst, nA5, $03, nG5
0007F2B0 C630 D506 80D2 0380 CE80+  	dc.b	nA5, $30, nC7, $06, nRst, nA6, $03, nRst, nF6, nRst, nD6, $18
0007F2BC E3                         	smpsReturn
0007F2BD                            
0007F2BD                            ; FM4 Data
0007F2BD                            Mus8D_FZ_FM4:
0007F2BF E6FC                       	smpsAlterVol        $FC
0007F2C1 E103                       	smpsAlterNote       $03
0007F2C3 D903 80CD 80CD 80D9 D903+  	dc.b	nE7, $03, nRst, nE6, nRst, nE6, nRst, nE7, nE7, $03, nRst, $18
0007F2CF E604                       	smpsAlterVol        $04
0007F2D3                            
0007F2D3                            Mus8D_FZ_Loop01:
0007F2D3 BA06 B5BC B5BD B5BC B5BA+  	dc.b	nA4, $06, nE4, nB4, nE4, nC5, nE4, nB4, nE4, nA4, nE4, nB4
0007F2DF B5BD B5BC B5BA B5BC B5BD+  	dc.b	nE4, nC5, nE4, nB4, nE4, nA4, nE4, nB4, nE4, nC5, nE4, nA4
0007F2EB B5BC B5BF B5BD B5BC B5     	dc.b	nE4, nB4, nE4, nD5, nE4, nC5, nE4, nB4, nE4
0007F2F4 F700 04FF DB               	smpsLoop            $00, $04, Mus8D_FZ_Loop01
0007F2F9                            
0007F2F9                            Mus8D_FZ_Loop02:
0007F2F9 D503 D4D3 D2               	dc.b	nC7, $03, nB6, nBb6, nA6
0007F2FE F700 04FF F7               	smpsLoop            $00, $04, Mus8D_FZ_Loop02
0007F303                            
0007F303                            Mus8D_FZ_Loop03:
0007F303 D7D6 D5D4                  	dc.b	nD7, nCs7, nC7, nB6
0007F307 F700 04FF F8               	smpsLoop            $00, $04, Mus8D_FZ_Loop03
0007F30C F6FF AF                    	smpsJump            Mus8D_FZ_FM4
0007F30F                            
0007F30F                            ; PSG1 Data
0007F30F                            Mus8D_FZ_PSG1:
0007F30F                            ; PSG2 Data
0007F30F                            Mus8D_FZ_PSG2:
0007F30F                            ; PSG3 Data
0007F30F                            Mus8D_FZ_PSG3:
0007F30F F2                         	smpsStop
0007F310                            
0007F310                            ; DAC Data
0007F310                            Mus8D_FZ_DAC:
0007F310 8806 8A8A 8803 8809 8203+  	dc.b	dHiTimpani, $06, dLowTimpani, dLowTimpani, dHiTimpani, $03, dHiTimpani, $09, dSnare, $03, dSnare, $03
0007F31C 8203 8203 8A8A             	dc.b	dSnare, $03, dSnare, $03, dLowTimpani, dLowTimpani
0007F322                            
0007F322                            Mus8D_FZ_Loop00:
0007F322 820C 0903 0606 888A 8282+  	dc.b	dSnare, $0C, $09, $03, $06, $06, dHiTimpani, dLowTimpani, dSnare, dSnare, $0C, $06
0007F32E 0C0C 0C09 0306 0688 0388+  	dc.b	$0C, $0C, $0C, $09, $03, $06, $06, dHiTimpani, $03, dHiTimpani, dLowTimpani, $06
0007F33A 8206 0C06 060C 06          	dc.b	dSnare, $06, $0C, $06, $06, $0C, $06
0007F341 F700 04FF DD               	smpsLoop            $00, $04, Mus8D_FZ_Loop00
0007F346 0C09 0306 0C06 8806 8A88+  	dc.b	$0C, $09, $03, $06, $0C, $06, dHiTimpani, $06, dLowTimpani, dHiTimpani, dLowTimpani, dHiTimpani
0007F352 8A88 8A                    	dc.b	dLowTimpani, dHiTimpani, dLowTimpani
0007F355 F6FF B9                    	smpsJump            Mus8D_FZ_DAC
0007F358                            
0007F358                            Mus8D_FZ_Voices:
0007F358                            ;	Voice $00
0007F358                            ;	$3D
0007F358                            ;	$01, $02, $02, $02, 	$14, $0E, $8C, $0E, 	$08, $05, $02, $05
0007F358                            ;	$00, $00, $00, $00, 	$1F, $1F, $1F, $1F, 	$1A, $92, $A7, $80
0007F358                            	smpsVcAlgorithm     $05
0007F358                            	smpsVcFeedback      $07
0007F358                            	smpsVcUnusedBits    $00
0007F358                            	smpsVcDetune        $00, $00, $00, $00
0007F358                            	smpsVcCoarseFreq    $02, $02, $02, $01
0007F358                            	smpsVcRateScale     $00, $02, $00, $00
0007F358                            	smpsVcAttackRate    $0E, $0C, $0E, $14
0007F358                            	smpsVcAmpMod        $00, $00, $00, $00
0007F358                            	smpsVcDecayRate1    $05, $02, $05, $08
0007F358                            	smpsVcDecayRate2    $00, $00, $00, $00
0007F358                            	smpsVcDecayLevel    $01, $01, $01, $01
0007F358                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007F358 3D01 0202 0214 0E8C 0E08+  	smpsVcTotalLevel    $00, $27, $12, $1A
0007F371                            
0007F371                            ;	Voice $01
0007F371                            ;	$20
0007F371                            ;	$36, $35, $30, $31, 	$DF, $DF, $9F, $9F, 	$07, $06, $09, $06
0007F371                            ;	$07, $06, $06, $08, 	$2F, $1F, $1F, $FF, 	$19, $37, $13, $80
0007F371                            	smpsVcAlgorithm     $00
0007F371                            	smpsVcFeedback      $04
0007F371                            	smpsVcUnusedBits    $00
0007F371                            	smpsVcDetune        $03, $03, $03, $03
0007F371                            	smpsVcCoarseFreq    $01, $00, $05, $06
0007F371                            	smpsVcRateScale     $02, $02, $03, $03
0007F371                            	smpsVcAttackRate    $1F, $1F, $1F, $1F
0007F371                            	smpsVcAmpMod        $00, $00, $00, $00
0007F371                            	smpsVcDecayRate1    $06, $09, $06, $07
0007F371                            	smpsVcDecayRate2    $08, $06, $06, $07
0007F371                            	smpsVcDecayLevel    $0F, $01, $01, $02
0007F371                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007F371 2036 3530 31DF DF9F 9F07+  	smpsVcTotalLevel    $00, $13, $37, $19
0007F38A                            
0007F38A                            ;	Voice $02
0007F38A                            ;	$3A
0007F38A                            ;	$01, $07, $01, $01, 	$8E, $8E, $8D, $53, 	$0E, $0E, $0E, $03
0007F38A                            ;	$00, $00, $00, $00, 	$1F, $FF, $1F, $0F, 	$18, $28, $27, $80
0007F38A                            	smpsVcAlgorithm     $02
0007F38A                            	smpsVcFeedback      $07
0007F38A                            	smpsVcUnusedBits    $00
0007F38A                            	smpsVcDetune        $00, $00, $00, $00
0007F38A                            	smpsVcCoarseFreq    $01, $01, $07, $01
0007F38A                            	smpsVcRateScale     $01, $02, $02, $02
0007F38A                            	smpsVcAttackRate    $13, $0D, $0E, $0E
0007F38A                            	smpsVcAmpMod        $00, $00, $00, $00
0007F38A                            	smpsVcDecayRate1    $03, $0E, $0E, $0E
0007F38A                            	smpsVcDecayRate2    $00, $00, $00, $00
0007F38A                            	smpsVcDecayLevel    $00, $01, $0F, $01
0007F38A                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007F38A 3A01 0701 018E 8E8D 530E+  	smpsVcTotalLevel    $00, $27, $28, $18
0007F3A3                            
0007F3A3                            ;	Voice $03
0007F3A3                            ;	$3A
0007F3A3                            ;	$42, $43, $14, $71, 	$1F, $12, $1F, $1F, 	$04, $02, $04, $0A
0007F3A3                            ;	$01, $01, $02, $02, 	$1F, $1F, $1F, $1F, 	$1A, $16, $19, $80
0007F3A3                            	smpsVcAlgorithm     $02
0007F3A3                            	smpsVcFeedback      $07
0007F3A3                            	smpsVcUnusedBits    $00
0007F3A3                            	smpsVcDetune        $07, $01, $04, $04
0007F3A3                            	smpsVcCoarseFreq    $01, $04, $03, $02
0007F3A3                            	smpsVcRateScale     $00, $00, $00, $00
0007F3A3                            	smpsVcAttackRate    $1F, $1F, $12, $1F
0007F3A3                            	smpsVcAmpMod        $00, $00, $00, $00
0007F3A3                            	smpsVcDecayRate1    $0A, $04, $02, $04
0007F3A3                            	smpsVcDecayRate2    $02, $02, $01, $01
0007F3A3                            	smpsVcDecayLevel    $01, $01, $01, $01
0007F3A3                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007F3A3 3A42 4314 711F 121F 1F04+  	smpsVcTotalLevel    $00, $19, $16, $1A
0007F3BC                            
0007F3BC                            
0007F3BC                            		even
0007F3BC                            Music8E:	include	"sound/music/Mus8E - Sonic Got Through.asm"
0007F3BC                            Mus8E_Sonic_Got_Through_Header:
0007F3BC =00000001                  smpsHeaderStartSong = 1
0007F3BC 0000                       	smpsHeaderVoice     Mus8E_Sonic_Got_Through_Voices
0007F3BE 0603                       	smpsHeaderChan      $06, $03
0007F3C0 0203                       	smpsHeaderTempo     $02, $03
0007F3C2                            
0007F3C6 0000 F60A                  	smpsHeaderFM        Mus8E_Sonic_Got_Through_FM1,	$F6, $0A
0007F3CA 0000 DE0A                  	smpsHeaderFM        Mus8E_Sonic_Got_Through_FM2,	$DE, $0A
0007F3CE 0000 F615                  	smpsHeaderFM        Mus8E_Sonic_Got_Through_FM3,	$F6, $15
0007F3D2 0000 F615                  	smpsHeaderFM        Mus8E_Sonic_Got_Through_FM4,	$F6, $15
0007F3D6 0000 F614                  	smpsHeaderFM        Mus8E_Sonic_Got_Through_FM5,	$F6, $14
0007F3DA 0000 D205 0005             	smpsHeaderPSG       Mus8E_Sonic_Got_Through_PSG1,	$D2, $05, $00, fTone_05
0007F3E0 0000 DE07 0005             	smpsHeaderPSG       Mus8E_Sonic_Got_Through_PSG2,	$DE, $07, $00, fTone_05
0007F3E6 0000 DE00 0004             	smpsHeaderPSG       Mus8E_Sonic_Got_Through_PSG3,	$DE, $00, $00, fTone_04
0007F3EC                            
0007F3EC                            ; FM1 Data
0007F3EC                            Mus8E_Sonic_Got_Through_FM1:
0007F3EE                            
0007F3EE                            ; PSG1 Data
0007F3EE                            Mus8E_Sonic_Got_Through_PSG1:
0007F3EE 8006 B8BA BCBD BFC1 C2C4+  	dc.b	nRst, $06, nG4, nA4, nB4, nC5, nD5, nE5, nF5, nG5, nA5, $06, nB6
0007F3FB 02E7 D501 D403 D0          	dc.b	$02, smpsNoAttack, nC7, $01, nB6, $03, nG6
0007F402 F00C 0108 04               	smpsModSet          $0C, $01, $08, $04
0007F407 D233                       	dc.b	nA6, $33
0007F409 F2                         	smpsStop
0007F40A                            
0007F40A                            ; FM2 Data
0007F40A                            Mus8E_Sonic_Got_Through_FM2:
0007F40C E80B                       	smpsNoteFill        $0B
0007F40E E201                       	smpsNop             $01
0007F410 C403 C4B8 06B8 C403 C4B8+  	dc.b	nG5, $03, nG5, nG4, $06, nG4, nG5, $03, nG5, nG4, $06, nG4
0007F41C C403 C480 0680 0CB8 09     	dc.b	nG5, $03, nG5, nRst, $06, nRst, $0C, nG4, $09
0007F425 E800                       	smpsNoteFill        $00
0007F427 BA33                       	dc.b	nA4, $33
0007F429 E201                       	smpsNop             $01
0007F42B F2                         	smpsStop
0007F42C                            
0007F42C                            ; FM3 Data
0007F42C                            Mus8E_Sonic_Got_Through_FM3:
0007F42C E080                       	smpsPan             panLeft, $00
0007F430 E806                       	smpsNoteFill        $06
0007F432 C903 C980 0CC9 03C9 800C+  	dc.b	nC6, $03, nC6, nRst, $0C, nC6, $03, nC6, nRst, $0C, nC6, $03
0007F43E C980 12                    	dc.b	nC6, nRst, $12
0007F441 E800                       	smpsNoteFill        $00
0007F443 C909 CB33                  	dc.b	nC6, $09, nD6, $33
0007F447 F2                         	smpsStop
0007F448                            
0007F448                            ; FM4 Data
0007F448                            Mus8E_Sonic_Got_Through_FM4:
0007F448 E040                       	smpsPan             panRight, $00
0007F44C E806                       	smpsNoteFill        $06
0007F44E C603 C680 0CC6 03C6 800C+  	dc.b	nA5, $03, nA5, nRst, $0C, nA5, $03, nA5, nRst, $0C, nA5, $03
0007F45A C680 12                    	dc.b	nA5, nRst, $12
0007F45D E800                       	smpsNoteFill        $00
0007F45F C609 C833                  	dc.b	nA5, $09, nB5, $33
0007F463 F2                         	smpsStop
0007F464                            
0007F464                            ; FM5 Data
0007F464                            Mus8E_Sonic_Got_Through_FM5:
0007F466 F00D 0102 05               	smpsModSet          $0D, $01, $02, $05
0007F46B                            
0007F46B                            ; PSG2 Data
0007F46B                            Mus8E_Sonic_Got_Through_PSG2:
0007F46B C406 C9C8 C4C9 C8C4 C9C8+  	dc.b	nG5, $06, nC6, nB5, nG5, nC6, nB5, nG5, nC6, nB5, $0C, nC6
0007F477 09C8 33                    	dc.b	$09, nB5, $33
0007F47A                            
0007F47A                            ; PSG3 Data
0007F47A                            Mus8E_Sonic_Got_Through_PSG3:
0007F47A F2                         	smpsStop
0007F47B                            
0007F47B                            ; DAC Data
0007F47B                            Mus8E_Sonic_Got_Through_DAC:
0007F47B 8203 8281 0681 8203 8281+  	dc.b	dSnare, $03, dSnare, dKick, $06, dKick, dSnare, $03, dSnare, dKick, $06, dKick
0007F487 8203 8288 888B 8B03 8B8B+  	dc.b	dSnare, $03, dSnare, dHiTimpani, dHiTimpani, dVLowTimpani, dVLowTimpani, $03, dVLowTimpani, dVLowTimpani, dSnare, $09
0007F493 33                         	dc.b	$33
0007F494 F2                         	smpsStop
0007F495                            
0007F495                            Mus8E_Sonic_Got_Through_Voices:
0007F495                            ;	Voice $00
0007F495                            ;	$3D
0007F495                            ;	$01, $02, $00, $01, 	$1F, $0E, $0E, $0E, 	$07, $1F, $1F, $1F
0007F495                            ;	$00, $00, $00, $00, 	$1F, $0F, $0F, $0F, 	$17, $8D, $8C, $8C
0007F495                            	smpsVcAlgorithm     $05
0007F495                            	smpsVcFeedback      $07
0007F495                            	smpsVcUnusedBits    $00
0007F495                            	smpsVcDetune        $00, $00, $00, $00
0007F495                            	smpsVcCoarseFreq    $01, $00, $02, $01
0007F495                            	smpsVcRateScale     $00, $00, $00, $00
0007F495                            	smpsVcAttackRate    $0E, $0E, $0E, $1F
0007F495                            	smpsVcAmpMod        $00, $00, $00, $00
0007F495                            	smpsVcDecayRate1    $1F, $1F, $1F, $07
0007F495                            	smpsVcDecayRate2    $00, $00, $00, $00
0007F495                            	smpsVcDecayLevel    $00, $00, $00, $01
0007F495                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007F495 3D01 0200 011F 0E0E 0E07+  	smpsVcTotalLevel    $0C, $0C, $0D, $17
0007F4AE                            
0007F4AE                            ;	Voice $01
0007F4AE                            ;	$3A
0007F4AE                            ;	$61, $3C, $14, $31, 	$9C, $DB, $9C, $DA, 	$04, $09, $04, $03
0007F4AE                            ;	$03, $01, $03, $00, 	$1F, $0F, $0F, $0F, 	$21, $47, $31, $80
0007F4AE                            	smpsVcAlgorithm     $02
0007F4AE                            	smpsVcFeedback      $07
0007F4AE                            	smpsVcUnusedBits    $00
0007F4AE                            	smpsVcDetune        $03, $01, $03, $06
0007F4AE                            	smpsVcCoarseFreq    $01, $04, $0C, $01
0007F4AE                            	smpsVcRateScale     $03, $02, $03, $02
0007F4AE                            	smpsVcAttackRate    $1A, $1C, $1B, $1C
0007F4AE                            	smpsVcAmpMod        $00, $00, $00, $00
0007F4AE                            	smpsVcDecayRate1    $03, $04, $09, $04
0007F4AE                            	smpsVcDecayRate2    $00, $03, $01, $03
0007F4AE                            	smpsVcDecayLevel    $00, $00, $00, $01
0007F4AE                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007F4AE 3A61 3C14 319C DB9C DA04+  	smpsVcTotalLevel    $00, $31, $47, $21
0007F4C7                            
0007F4C7                            ;	Voice $02
0007F4C7                            ;	$3D
0007F4C7                            ;	$01, $01, $01, $01, 	$8E, $52, $14, $4C, 	$08, $08, $0E, $03
0007F4C7                            ;	$00, $00, $00, $00, 	$1F, $1F, $1F, $1F, 	$1B, $80, $80, $9B
0007F4C7                            	smpsVcAlgorithm     $05
0007F4C7                            	smpsVcFeedback      $07
0007F4C7                            	smpsVcUnusedBits    $00
0007F4C7                            	smpsVcDetune        $00, $00, $00, $00
0007F4C7                            	smpsVcCoarseFreq    $01, $01, $01, $01
0007F4C7                            	smpsVcRateScale     $01, $00, $01, $02
0007F4C7                            	smpsVcAttackRate    $0C, $14, $12, $0E
0007F4C7                            	smpsVcAmpMod        $00, $00, $00, $00
0007F4C7                            	smpsVcDecayRate1    $03, $0E, $08, $08
0007F4C7                            	smpsVcDecayRate2    $00, $00, $00, $00
0007F4C7                            	smpsVcDecayLevel    $01, $01, $01, $01
0007F4C7                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007F4C7 3D01 0101 018E 5214 4C08+  	smpsVcTotalLevel    $1B, $00, $00, $1B
0007F4E0                            
0007F4E0                            ;	Voice $03
0007F4E0                            ;	$3D
0007F4E0                            ;	$01, $01, $01, $01, 	$8E, $52, $14, $4C, 	$08, $08, $0E, $03
0007F4E0                            ;	$00, $00, $00, $00, 	$1F, $1F, $1F, $1F, 	$1B, $80, $80, $9B
0007F4E0                            	smpsVcAlgorithm     $05
0007F4E0                            	smpsVcFeedback      $07
0007F4E0                            	smpsVcUnusedBits    $00
0007F4E0                            	smpsVcDetune        $00, $00, $00, $00
0007F4E0                            	smpsVcCoarseFreq    $01, $01, $01, $01
0007F4E0                            	smpsVcRateScale     $01, $00, $01, $02
0007F4E0                            	smpsVcAttackRate    $0C, $14, $12, $0E
0007F4E0                            	smpsVcAmpMod        $00, $00, $00, $00
0007F4E0                            	smpsVcDecayRate1    $03, $0E, $08, $08
0007F4E0                            	smpsVcDecayRate2    $00, $00, $00, $00
0007F4E0                            	smpsVcDecayLevel    $01, $01, $01, $01
0007F4E0                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007F4E0 3D01 0101 018E 5214 4C08+  	smpsVcTotalLevel    $1B, $00, $00, $1B
0007F4F9                            
0007F4F9                            ;	Voice $04	
0007F4F9                            ;	$3D
0007F4F9                            ;	$01, $02, $02, $02,		$10, $50, $50, $50,  	$07, $08, $08, $08  
0007F4F9                            ;	$01, $00, $00, $00,		$2F, $1F, $1F, $1F,		$1C, $82, $82, $82  
0007F4F9                            	smpsVcAlgorithm     $05
0007F4F9                            	smpsVcFeedback      $07
0007F4F9                            	smpsVcUnusedBits    $00
0007F4F9                            	smpsVcDetune        $00, $00, $00, $00
0007F4F9                            	smpsVcCoarseFreq    $02, $02, $02, $01
0007F4F9                            	smpsVcRateScale     $01, $01, $01, $00
0007F4F9                            	smpsVcAttackRate    $00, $00, $00, $10
0007F4F9                            	smpsVcAmpMod        $00, $00, $00, $00
0007F4F9                            	smpsVcDecayRate1    $09, $09, $08, $07
0007F4F9                            	smpsVcDecayRate2    $00, $00, $00, $00
0007F4F9                            	smpsVcDecayLevel    $02, $01, $01, $01
0007F4F9                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
0007F4F9 3D01 0202 0210 4040 4007+  	smpsVcTotalLevel    $02, $02, $02, $1C
0007F4F9 3D01 0202 0210 4040 4007+  	smpsVcTotalLevel    $02, $02, $02, $1C
0007F512                            		even
0007F512                            Music8F:	incbin	"sound/music/Mus8F - Game Over.bin"
0007F714 00                         		even
0007F714                            Music90:	incbin	"sound/music/prelude.bin"
0007FCB4                            		even
0007FCB4                            Music91:	include	"sound/music/Mus91 - Credits.asm"
0007FCB4                            ; =============================================================================================
0007FCB4                            ; Project Name:		Credits
0007FCB4                            ; Created:		19th May 2021
0007FCB4                            ; ---------------------------------------------------------------------------------------------
0007FCB4                            ; ASM'd using S1SMPS2ASM version 1.1 by Marc Gordon (AKA Cinossu)
0007FCB4                            ; =============================================================================================
0007FCB4                            
0007FCB4                            Credits_Header:
0007FCB4                            ;	Voice Pointer	location
0007FCB4 0000                       	smpsHeaderVoice	Credits_Voices
0007FCB6                            ;	Channel Setup	FM	PSG
0007FCB6 0703                       	smpsHeaderChan	$07,	$03
0007FCB8                            ;	Tempo Setup	divider	modifier
0007FCB8 0100                       	smpsHeaderTempo	$01,	$00
0007FCBA                            
0007FCBA                            ;	DAC Pointer	location
0007FCBE                            ;	FM1 Pointer	location	pitch		volume
0007FCBE 0000 0100                  	smpsHeaderFM	Credits_FM1,	$01,	$00
0007FCC2                            ;	FM2 Pointer	location	pitch		volume
0007FCC2 0000 0100                  	smpsHeaderFM	Credits_FM2,	$01,	$00
0007FCC6                            ;	FM3 Pointer	location	pitch		volume
0007FCC6 0000 0100                  	smpsHeaderFM	Credits_FM6,	$01,	$00
0007FCCA                            ;	FM4 Pointer	location	pitch		volume
0007FCCA 0000 0100                  	smpsHeaderFM	Credits_FM4,	$01,	$00
0007FCCE                            ;	FM5 Pointer	location	pitch		volume
0007FCCE 0000 0100                  	smpsHeaderFM	Credits_FM5,	$01,	$00
0007FCD2                            ;	FM6 Pointer	location	pitch		volume
0007FCD2 0000 0100                  	smpsHeaderFM	Credits_FM6,	$01,	$00
0007FCD6                            ;	PSG1 Pointer	location	pitch		volume	instrument
0007FCD6 0000 0100 0005             	smpsHeaderPSG	Credits_PSG1,	$01,	$00,	$00, fTone_05
0007FCDC                            ;	PSG2 Pointer	location	pitch		volume	instrument
0007FCDC 0000 0100 0005             	smpsHeaderPSG	Credits_PSG2,	$01,	$00,	$00, fTone_05
0007FCE2                            ;	PSG3 Pointer	location	pitch		volume	instrument
0007FCE2 0000 0100 0004             	smpsHeaderPSG	Credits_PSG3,	$01,	$00,	$00, fTone_04
0007FCE8 0000 0000                  	dc.b		$00,	$00,	$00,	$00
0007FCEC                            
0007FCEC                            ; PSG1 Data
0007FCEC                            Credits_PSG1:
0007FCEC                            
0007FCEC                            ; PSG2 Data
0007FCEC                            Credits_PSG2:
0007FCEC                            
0007FCEC                            ; PSG3 Data
0007FCEC                            Credits_PSG3:
0007FCEC F2                         	smpsStop
0007FCED                            
0007FCED                            ; FM1 Data
0007FCED                            Credits_FM1:
0007FCED                            ;	SetFMVoice	#
0007FCEF                            ;	AlterVolume	value
0007FCEF E616                       	smpsAlterVol	$16
0007FCF1                            ;	Panning		direction	amsfms
0007FCF1 E0C0                       	smpsPan		panCentre,	$00
0007FCF3 AF6B                       	dc.b		nBb3,	$6B
0007FCF5                            ;	AlterNotes	value
0007FCF5 E10B                       	smpsAlterNote	$0B
0007FCF7 B269                       	dc.b		nCs4,	$69
0007FCF9                            ;	AlterNotes	value
0007FCF9 E100                       	smpsAlterNote	$00
0007FCFB B46A B6                    	dc.b		nEb4,	$6A,	nF4
0007FCFE                            ;	AlterNotes	value
0007FCFE E10A                       	smpsAlterNote	$0A
0007FD00 B7                         	dc.b		nFs4
0007FD01                            ;	AlterNotes	value
0007FD01 E109                       	smpsAlterNote	$09
0007FD03 B9                         	dc.b		nAb4
0007FD04                            ;	SetFMVoice	#
0007FD06                            ;	AlterVolume	value
0007FD06 E6FE                       	smpsAlterVol	$FE
0007FD08 B90B 8002                  	dc.b		nAb4,	$0B,	nRst,	$02
0007FD0C                            ;	AlterNotes	value
0007FD0C E10B                       	smpsAlterNote	$0B
0007FD0E C101                       	dc.b		nE5,	$01
0007FD10                            Credits_Jump01:
0007FD10 E7C1 0A80 03C1 0A80        	dc.b		smpsNoAttack,	nE5,	$0A,	nRst,	$03,	nE5,	$0A,	nRst
0007FD18 03C1 0B80 02BE 0B80        	dc.b		$03,	nE5,	$0B,	nRst,	$02,	nCs5,	$0B,	nRst
0007FD20 02                         	dc.b		$02
0007FD21                            ;	AlterNotes	value
0007FD21 E109                       	smpsAlterNote	$09
0007FD23 BF0B 8002                  	dc.b		nD5,	$0B,	nRst,	$02
0007FD27                            ;	AlterNotes	value
0007FD27 E10B                       	smpsAlterNote	$0B
0007FD29 C10B 8002                  	dc.b		nE5,	$0B,	nRst,	$02
0007FD2D                            ;	AlterNotes	value
0007FD2D E109                       	smpsAlterNote	$09
0007FD2F B919 8002 B916 8004        	dc.b		nAb4,	$19,	nRst,	$02,	nAb4,	$16,	nRst,	$04
0007FD37 B90B 8003                  	dc.b		nAb4,	$0B,	nRst,	$03
0007FD3B                            ;	AlterNotes	value
0007FD3B E10B                       	smpsAlterNote	$0B
0007FD3D BE15 8005 C116 8004        	dc.b		nCs5,	$15,	nRst,	$05,	nE5,	$16,	nRst,	$04
0007FD45                            ;	AlterNotes	value
0007FD45 E10A                       	smpsAlterNote	$0A
0007FD47 C30C 8002 C30B 8002        	dc.b		nFs5,	$0C,	nRst,	$02,	nFs5,	$0B,	nRst,	$02
0007FD4F C30B 8002 C30B 8003        	dc.b		nFs5,	$0B,	nRst,	$02,	nFs5,	$0B,	nRst,	$03
0007FD57                            ;	AlterNotes	value
0007FD57 E109                       	smpsAlterNote	$09
0007FD59 BF0B 8002                  	dc.b		nD5,	$0B,	nRst,	$02
0007FD5D                            ;	AlterNotes	value
0007FD5D E10B                       	smpsAlterNote	$0B
0007FD5F C10B 8002                  	dc.b		nE5,	$0B,	nRst,	$02
0007FD63                            ;	AlterNotes	value
0007FD63 E10A                       	smpsAlterNote	$0A
0007FD65 C30B 8002                  	dc.b		nFs5,	$0B,	nRst,	$02
0007FD69                            ;	AlterNotes	value
0007FD69 E109                       	smpsAlterNote	$09
0007FD6B C518 8003 C50B 8002        	dc.b		nAb5,	$18,	nRst,	$03,	nAb5,	$0B,	nRst,	$02
0007FD73                            ;	AlterNotes	value
0007FD73 E10A                       	smpsAlterNote	$0A
0007FD75 C316 8004                  	dc.b		nFs5,	$16,	nRst,	$04
0007FD79                            ;	AlterNotes	value
0007FD79 E10B                       	smpsAlterNote	$0B
0007FD7B C116 8005                  	dc.b		nE5,	$16,	nRst,	$05
0007FD7F                            ;	AlterNotes	value
0007FD7F E109                       	smpsAlterNote	$09
0007FD81 BF16 8004                  	dc.b		nD5,	$16,	nRst,	$04
0007FD85                            ;	AlterNotes	value
0007FD85 E10B                       	smpsAlterNote	$0B
0007FD87 C10B 8003 C10B 8002        	dc.b		nE5,	$0B,	nRst,	$03,	nE5,	$0B,	nRst,	$02
0007FD8F C10B 8002 C10B 8002        	dc.b		nE5,	$0B,	nRst,	$02,	nE5,	$0B,	nRst,	$02
0007FD97 BE0B 8002                  	dc.b		nCs5,	$0B,	nRst,	$02
0007FD9B                            ;	AlterNotes	value
0007FD9B E109                       	smpsAlterNote	$09
0007FD9D BF0B 8003                  	dc.b		nD5,	$0B,	nRst,	$03
0007FDA1                            ;	AlterNotes	value
0007FDA1 E10B                       	smpsAlterNote	$0B
0007FDA3 C10B 8002 BE18 8002        	dc.b		nE5,	$0B,	nRst,	$02,	nCs5,	$18,	nRst,	$02
0007FDAB BE16 8005 BE0A 8003        	dc.b		nCs5,	$16,	nRst,	$05,	nCs5,	$0A,	nRst,	$03
0007FDB3 C116 8004                  	dc.b		nE5,	$16,	nRst,	$04
0007FDB7                            ;	AlterNotes	value
0007FDB7 E109                       	smpsAlterNote	$09
0007FDB9 C516 8005                  	dc.b		nAb5,	$16,	nRst,	$05
0007FDBD                            ;	AlterNotes	value
0007FDBD E10A                       	smpsAlterNote	$0A
0007FDBF C30B 8002 C30B 8003        	dc.b		nFs5,	$0B,	nRst,	$02,	nFs5,	$0B,	nRst,	$03
0007FDC7 C30A 8003 C30B 8002        	dc.b		nFs5,	$0A,	nRst,	$03,	nFs5,	$0B,	nRst,	$02
0007FDCF                            ;	AlterNotes	value
0007FDCF E109                       	smpsAlterNote	$09
0007FDD1 BF11 BF12                  	dc.b		nD5,	$11,	nD5,	$12
0007FDD5                            ;	AlterNotes	value
0007FDD5 E10A                       	smpsAlterNote	$0A
0007FDD7 C3                         	dc.b		nFs5
0007FDD8                            ;	AlterNotes	value
0007FDD8 E109                       	smpsAlterNote	$09
0007FDDA C516 801F C512             	dc.b		nAb5,	$16,	nRst,	$1F,	nAb5,	$12
0007FDE0                            ;	AlterNotes	value
0007FDE0 E10A                       	smpsAlterNote	$0A
0007FDE2 C3                         	dc.b		nFs5
0007FDE3                            ;	AlterNotes	value
0007FDE3 E109                       	smpsAlterNote	$09
0007FDE5 C5                         	dc.b		nAb5
0007FDE6                            ;	AlterNotes	value
0007FDE6 E10D                       	smpsAlterNote	$0D
0007FDE8 C67F E754 807F 55          	dc.b		nA5,	$7F,	smpsNoAttack,	$54,	nRst,	$7F,	$55
0007FDEF                            ;	SetFMVoice	#
0007FDF1                            ;	AlterVolume	value
0007FDF1 E6F8                       	smpsAlterVol	$F8
0007FDF3 E780 1BBA 1580 05          	dc.b		smpsNoAttack,	nRst,	$1B,	nA4,	$15,	nRst,	$05
0007FDFA                            ;	AlterNotes	value
0007FDFA E109                       	smpsAlterNote	$09
0007FDFC B916 8004                  	dc.b		nAb4,	$16,	nRst,	$04
0007FE00                            ;	AlterNotes	value
0007FE00 E10D                       	smpsAlterNote	$0D
0007FE02 BA0B 8002                  	dc.b		nA4,	$0B,	nRst,	$02
0007FE06                            ;	AlterNotes	value
0007FE06 E100                       	smpsAlterNote	$00
0007FE08 BC24 8004                  	dc.b		nB4,	$24,	nRst,	$04
0007FE0C                            ;	AlterNotes	value
0007FE0C E10D                       	smpsAlterNote	$0D
0007FE0E BA16 8004                  	dc.b		nA4,	$16,	nRst,	$04
0007FE12                            ;	AlterNotes	value
0007FE12 E109                       	smpsAlterNote	$09
0007FE14 B90B 8003                  	dc.b		nAb4,	$0B,	nRst,	$03
0007FE18                            ;	AlterNotes	value
0007FE18 E10D                       	smpsAlterNote	$0D
0007FE1A BA16 8004                  	dc.b		nA4,	$16,	nRst,	$04
0007FE1E                            ;	AlterNotes	value
0007FE1E E10B                       	smpsAlterNote	$0B
0007FE20 BE37 800B                  	dc.b		nCs5,	$37,	nRst,	$0B
0007FE24                            ;	AlterNotes	value
0007FE24 E109                       	smpsAlterNote	$09
0007FE26 BF16 8005                  	dc.b		nD5,	$16,	nRst,	$05
0007FE2A                            ;	AlterNotes	value
0007FE2A E10B                       	smpsAlterNote	$0B
0007FE2C BE0B 8002 BE18 8002        	dc.b		nCs5,	$0B,	nRst,	$02,	nCs5,	$18,	nRst,	$02
0007FE34                            ;	AlterNotes	value
0007FE34 E100                       	smpsAlterNote	$00
0007FE36 BC5D 801A                  	dc.b		nB4,	$5D,	nRst,	$1A
0007FE3A                            ;	AlterNotes	value
0007FE3A E10D                       	smpsAlterNote	$0D
0007FE3C BA0B 8002 BA0B 8003        	dc.b		nA4,	$0B,	nRst,	$02,	nA4,	$0B,	nRst,	$03
0007FE44                            ;	AlterNotes	value
0007FE44 E109                       	smpsAlterNote	$09
0007FE46 B90B 8002 B90B 8002        	dc.b		nAb4,	$0B,	nRst,	$02,	nAb4,	$0B,	nRst,	$02
0007FE4E                            ;	AlterNotes	value
0007FE4E E10D                       	smpsAlterNote	$0D
0007FE50 BA0B 8003                  	dc.b		nA4,	$0B,	nRst,	$03
0007FE54                            ;	AlterNotes	value
0007FE54 E100                       	smpsAlterNote	$00
0007FE56 BC23 8004                  	dc.b		nB4,	$23,	nRst,	$04
0007FE5A                            ;	AlterNotes	value
0007FE5A E10D                       	smpsAlterNote	$0D
0007FE5C BA0B 8003 BA0B 8002        	dc.b		nA4,	$0B,	nRst,	$03,	nA4,	$0B,	nRst,	$02
0007FE64                            ;	AlterNotes	value
0007FE64 E109                       	smpsAlterNote	$09
0007FE66 B90B 8002                  	dc.b		nAb4,	$0B,	nRst,	$02
0007FE6A                            ;	AlterNotes	value
0007FE6A E10D                       	smpsAlterNote	$0D
0007FE6C BA16 8004                  	dc.b		nA4,	$16,	nRst,	$04
0007FE70                            ;	AlterNotes	value
0007FE70 E10A                       	smpsAlterNote	$0A
0007FE72 C324 8005 C315 8005        	dc.b		nFs5,	$24,	nRst,	$05,	nFs5,	$15,	nRst,	$05
0007FE7A C316 8004                  	dc.b		nFs5,	$16,	nRst,	$04
0007FE7E                            ;	AlterNotes	value
0007FE7E E10B                       	smpsAlterNote	$0B
0007FE80 C10B 8002 C137 8026        	dc.b		nE5,	$0B,	nRst,	$02,	nE5,	$37,	nRst,	$26
0007FE88                            ;	AlterNotes	value
0007FE88 E109                       	smpsAlterNote	$09
0007FE8A BF0B 8002 BF0B 8002        	dc.b		nD5,	$0B,	nRst,	$02,	nD5,	$0B,	nRst,	$02
0007FE92                            ;	AlterNotes	value
0007FE92 E10B                       	smpsAlterNote	$0B
0007FE94 BE17 8004                  	dc.b		nCs5,	$17,	nRst,	$04
0007FE98                            ;	AlterNotes	value
0007FE98 E109                       	smpsAlterNote	$09
0007FE9A BF0B 8002                  	dc.b		nD5,	$0B,	nRst,	$02
0007FE9E                            ;	AlterNotes	value
0007FE9E E10B                       	smpsAlterNote	$0B
0007FEA0 BE2C 8009 BE0B 8002        	dc.b		nCs5,	$2C,	nRst,	$09,	nCs5,	$0B,	nRst,	$02
0007FEA8 BE16 8005                  	dc.b		nCs5,	$16,	nRst,	$05
0007FEAC                            ;	AlterNotes	value
0007FEAC E109                       	smpsAlterNote	$09
0007FEAE BF16 8004                  	dc.b		nD5,	$16,	nRst,	$04
0007FEB2                            ;	AlterNotes	value
0007FEB2 E10B                       	smpsAlterNote	$0B
0007FEB4 BE16 8005                  	dc.b		nCs5,	$16,	nRst,	$05
0007FEB8                            ;	AlterNotes	value
0007FEB8 E100                       	smpsAlterNote	$00
0007FEBA BC16 8005 BC1E 8009        	dc.b		nB4,	$16,	nRst,	$05,	nB4,	$1E,	nRst,	$09
0007FEC2                            ;	AlterNotes	value
0007FEC2 E10D                       	smpsAlterNote	$0D
0007FEC4 BA0B 8002 BA16 8005        	dc.b		nA4,	$0B,	nRst,	$02,	nA4,	$16,	nRst,	$05
0007FECC                            ;	AlterNotes	value
0007FECC E109                       	smpsAlterNote	$09
0007FECE B90A 8003                  	dc.b		nAb4,	$0A,	nRst,	$03
0007FED2                            ;	AlterNotes	value
0007FED2 E10D                       	smpsAlterNote	$0D
0007FED4 BA37 8019                  	dc.b		nA4,	$37,	nRst,	$19
0007FED8                            ;	AlterNotes	value
0007FED8 E10A                       	smpsAlterNote	$0A
0007FEDA B715 8005                  	dc.b		nFs4,	$15,	nRst,	$05
0007FEDE                            ;	AlterNotes	value
0007FEDE E10D                       	smpsAlterNote	$0D
0007FEE0 BA0B 8002                  	dc.b		nA4,	$0B,	nRst,	$02
0007FEE4                            ;	AlterNotes	value
0007FEE4 E10B                       	smpsAlterNote	$0B
0007FEE6 BE16 8004                  	dc.b		nCs5,	$16,	nRst,	$04
0007FEEA                            ;	AlterNotes	value
0007FEEA E100                       	smpsAlterNote	$00
0007FEEC BC0B 8003 BC23 8004        	dc.b		nB4,	$0B,	nRst,	$03,	nB4,	$23,	nRst,	$04
0007FEF4 BC0B 8002                  	dc.b		nB4,	$0B,	nRst,	$02
0007FEF8                            ;	AlterNotes	value
0007FEF8 E10D                       	smpsAlterNote	$0D
0007FEFA BA0B 8003                  	dc.b		nA4,	$0B,	nRst,	$03
0007FEFE                            ;	AlterNotes	value
0007FEFE E109                       	smpsAlterNote	$09
0007FF00 B90A 8003 B916 8004        	dc.b		nAb4,	$0A,	nRst,	$03,	nAb4,	$16,	nRst,	$04
0007FF08 B90C 8002                  	dc.b		nAb4,	$0C,	nRst,	$02
0007FF0C                            ;	AlterNotes	value
0007FF0C E10A                       	smpsAlterNote	$0A
0007FF0E B716 8005                  	dc.b		nFs4,	$16,	nRst,	$05
0007FF12                            ;	AlterNotes	value
0007FF12 E109                       	smpsAlterNote	$09
0007FF14 B90B 8002                  	dc.b		nAb4,	$0B,	nRst,	$02
0007FF18                            ;	AlterNotes	value
0007FF18 E10D                       	smpsAlterNote	$0D
0007FF1A BA7F E722 8025             	dc.b		nA4,	$7F,	smpsNoAttack,	$22,	nRst,	$25
0007FF20                            ;	SetFMVoice	#
0007FF22 E780 01E7 BA15 8005        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nA4,	$15,	nRst,	$05
0007FF2A                            ;	AlterNotes	value
0007FF2A E10A                       	smpsAlterNote	$0A
0007FF2C C33F 8010                  	dc.b		nFs5,	$3F,	nRst,	$10
0007FF30                            ;	AlterNotes	value
0007FF30 E10D                       	smpsAlterNote	$0D
0007FF32 C616 8005                  	dc.b		nA5,	$16,	nRst,	$05
0007FF36                            ;	AlterNotes	value
0007FF36 E109                       	smpsAlterNote	$09
0007FF38 C516 8004 C516 8005        	dc.b		nAb5,	$16,	nRst,	$04,	nAb5,	$16,	nRst,	$05
0007FF40                            ;	AlterNotes	value
0007FF40 E10A                       	smpsAlterNote	$0A
0007FF42 C30B 8002                  	dc.b		nFs5,	$0B,	nRst,	$02
0007FF46                            ;	AlterNotes	value
0007FF46 E109                       	smpsAlterNote	$09
0007FF48 C516 8004 C50B 8003        	dc.b		nAb5,	$16,	nRst,	$04,	nAb5,	$0B,	nRst,	$03
0007FF50                            ;	AlterNotes	value
0007FF50 E10D                       	smpsAlterNote	$0D
0007FF52 C615 8005 C616 8004        	dc.b		nA5,	$15,	nRst,	$05,	nA5,	$16,	nRst,	$04
0007FF5A C60B 8003                  	dc.b		nA5,	$0B,	nRst,	$03
0007FF5E                            ;	AlterNotes	value
0007FF5E E109                       	smpsAlterNote	$09
0007FF60 C516 8004                  	dc.b		nAb5,	$16,	nRst,	$04
0007FF64                            ;	AlterNotes	value
0007FF64 E10A                       	smpsAlterNote	$0A
0007FF66 C30B 8003                  	dc.b		nFs5,	$0B,	nRst,	$03
0007FF6A                            ;	AlterNotes	value
0007FF6A E10B                       	smpsAlterNote	$0B
0007FF6C BE29 8019 BE0B 8002        	dc.b		nCs5,	$29,	nRst,	$19,	nCs5,	$0B,	nRst,	$02
0007FF74 BE0B 8002 BE0B 8002        	dc.b		nCs5,	$0B,	nRst,	$02,	nCs5,	$0B,	nRst,	$02
0007FF7C                            ;	AlterNotes	value
0007FF7C E100                       	smpsAlterNote	$00
0007FF7E BC16 802C                  	dc.b		nB4,	$16,	nRst,	$2C
0007FF82                            ;	AlterNotes	value
0007FF82 E10B                       	smpsAlterNote	$0B
0007FF84 BE0B 8002 BE0B 8002        	dc.b		nCs5,	$0B,	nRst,	$02,	nCs5,	$0B,	nRst,	$02
0007FF8C BE0B 8003                  	dc.b		nCs5,	$0B,	nRst,	$03
0007FF90                            ;	AlterNotes	value
0007FF90 E100                       	smpsAlterNote	$00
0007FF92 BC16 801E                  	dc.b		nB4,	$16,	nRst,	$1E
0007FF96                            ;	AlterNotes	value
0007FF96 E10D                       	smpsAlterNote	$0D
0007FF98 BA16 8005                  	dc.b		nA4,	$16,	nRst,	$05
0007FF9C                            ;	AlterNotes	value
0007FF9C E10A                       	smpsAlterNote	$0A
0007FF9E C30B 8002                  	dc.b		nFs5,	$0B,	nRst,	$02
0007FFA2                            ;	AlterNotes	value
0007FFA2 E10B                       	smpsAlterNote	$0B
0007FFA4 C10B 8002                  	dc.b		nE5,	$0B,	nRst,	$02
0007FFA8                            ;	AlterNotes	value
0007FFA8 E10A                       	smpsAlterNote	$0A
0007FFAA C30B 8002                  	dc.b		nFs5,	$0B,	nRst,	$02
0007FFAE                            ;	AlterNotes	value
0007FFAE E10B                       	smpsAlterNote	$0B
0007FFB0 C17F E747                  	dc.b		nE5,	$7F,	smpsNoAttack,	$47
0007FFB4                            ;	SetFMVoice	#
0007FFB6                            ;	AlterVolume	value
0007FFB6 E608                       	smpsAlterVol	$08
0007FFB8 8001 E7C1 0B80 02          	dc.b		nRst,	$01,	smpsNoAttack,	nE5,	$0B,	nRst,	$02
0007FFBF                            ;	Panning		direction	amsfms
0007FFBF E0C0                       	smpsPan		panCentre,	$00
0007FFC1                            ;	JumpTo		location
0007FFC1 F6FD 4D                    	smpsJump	Credits_Jump01
0007FFC4                            
0007FFC4                            ; FM2 Data
0007FFC4                            Credits_FM2:
0007FFC4                            ;	SetFMVoice	#
0007FFC6                            ;	AlterVolume	value
0007FFC6 E67F                       	smpsAlterVol	$7F
0007FFC8                            ;	Panning		direction	amsfms
0007FFC8 E0C0                       	smpsPan		panCentre,	$00
0007FFCA 8001                       	dc.b		nRst,	$01
0007FFCC                            ;	SetFMVoice	#
0007FFCE                            ;	AlterVolume	value
0007FFCE E697                       	smpsAlterVol	$97
0007FFD0                            ;	AlterNotes	value
0007FFD0 E10A                       	smpsAlterNote	$0A
0007FFD2 B76A                       	dc.b		nFs4,	$6A
0007FFD4                            ;	AlterNotes	value
0007FFD4 E100                       	smpsAlterNote	$00
0007FFD6 B669                       	dc.b		nF4,	$69
0007FFD8                            ;	AlterNotes	value
0007FFD8 E10A                       	smpsAlterNote	$0A
0007FFDA B76A                       	dc.b		nFs4,	$6A
0007FFDC                            ;	AlterNotes	value
0007FFDC E109                       	smpsAlterNote	$09
0007FFDE B9                         	dc.b		nAb4
0007FFDF                            ;	AlterNotes	value
0007FFDF E10D                       	smpsAlterNote	$0D
0007FFE1 BA                         	dc.b		nA4
0007FFE2                            ;	AlterNotes	value
0007FFE2 E100                       	smpsAlterNote	$00
0007FFE4 BC80 0D                    	dc.b		nB4,	nRst,	$0D
0007FFE7                            ;	SetFMVoice	#
0007FFE9                            ;	AlterVolume	value
0007FFE9 E6FE                       	smpsAlterVol	$FE
0007FFEB E780 01                    	dc.b		smpsNoAttack,	nRst,	$01
0007FFEE                            Credits_Jump02:
0007FFEE                            ;	SetFMVoice	#
0007FFF0                            ;	AlterVolume	value
0007FFF0 E60C                       	smpsAlterVol	$0C
0007FFF2                            ;	AlterNotes	value
0007FFF2 E10B                       	smpsAlterNote	$0B
0007FFF4 C10A 8003 C10A 8003        	dc.b		nE5,	$0A,	nRst,	$03,	nE5,	$0A,	nRst,	$03
0007FFFC C10B 8002 C10B 8002        	dc.b		nE5,	$0B,	nRst,	$02,	nE5,	$0B,	nRst,	$02
00080004 BE0B 8002                  	dc.b		nCs5,	$0B,	nRst,	$02
00080008                            ;	AlterNotes	value
00080008 E109                       	smpsAlterNote	$09
0008000A BF0B 8002                  	dc.b		nD5,	$0B,	nRst,	$02
0008000E                            ;	AlterNotes	value
0008000E E10B                       	smpsAlterNote	$0B
00080010 C10C 8002                  	dc.b		nE5,	$0C,	nRst,	$02
00080014                            ;	AlterNotes	value
00080014 E109                       	smpsAlterNote	$09
00080016 B918 8002 B910 E7          	dc.b		nAb4,	$18,	nRst,	$02,	nAb4,	$10,	smpsNoAttack
0008001D                            ;	AlterNotes	value
0008001D E100                       	smpsAlterNote	$00
0008001F B904 E7                    	dc.b		nAb4,	$04,	smpsNoAttack
00080022                            ;	AlterNotes	value
00080022 E109                       	smpsAlterNote	$09
00080024 B902 8005 E7B9 0A80        	dc.b		nAb4,	$02,	nRst,	$05,	smpsNoAttack,	nAb4,	$0A,	nRst
0008002C 03                         	dc.b		$03
0008002D                            ;	AlterNotes	value
0008002D E10B                       	smpsAlterNote	$0B
0008002F BE16 8004 C117 8004        	dc.b		nCs5,	$16,	nRst,	$04,	nE5,	$17,	nRst,	$04
00080037                            ;	AlterNotes	value
00080037 E10A                       	smpsAlterNote	$0A
00080039 C30B 8002 C30B 8002        	dc.b		nFs5,	$0B,	nRst,	$02,	nFs5,	$0B,	nRst,	$02
00080041 C30B 8003 C30B 8002        	dc.b		nFs5,	$0B,	nRst,	$03,	nFs5,	$0B,	nRst,	$02
00080049                            ;	AlterNotes	value
00080049 E109                       	smpsAlterNote	$09
0008004B BF0B 8002                  	dc.b		nD5,	$0B,	nRst,	$02
0008004F                            ;	AlterNotes	value
0008004F E10B                       	smpsAlterNote	$0B
00080051 C10B 8002                  	dc.b		nE5,	$0B,	nRst,	$02
00080055                            ;	AlterNotes	value
00080055 E10A                       	smpsAlterNote	$0A
00080057 C30B 8002                  	dc.b		nFs5,	$0B,	nRst,	$02
0008005B                            ;	AlterNotes	value
0008005B E109                       	smpsAlterNote	$09
0008005D C519 8002 C50B 8002        	dc.b		nAb5,	$19,	nRst,	$02,	nAb5,	$0B,	nRst,	$02
00080065                            ;	AlterNotes	value
00080065 E10A                       	smpsAlterNote	$0A
00080067 C316 8005                  	dc.b		nFs5,	$16,	nRst,	$05
0008006B                            ;	AlterNotes	value
0008006B E10B                       	smpsAlterNote	$0B
0008006D C116 8004                  	dc.b		nE5,	$16,	nRst,	$04
00080071                            ;	AlterNotes	value
00080071 E109                       	smpsAlterNote	$09
00080073 BF16 8005                  	dc.b		nD5,	$16,	nRst,	$05
00080077                            ;	AlterNotes	value
00080077 E10B                       	smpsAlterNote	$0B
00080079 C10B 8002 C10B 8002        	dc.b		nE5,	$0B,	nRst,	$02,	nE5,	$0B,	nRst,	$02
00080081 C10B 8002 C10B 8002        	dc.b		nE5,	$0B,	nRst,	$02,	nE5,	$0B,	nRst,	$02
00080089 BE0B 8003                  	dc.b		nCs5,	$0B,	nRst,	$03
0008008D                            ;	AlterNotes	value
0008008D E109                       	smpsAlterNote	$09
0008008F BF0B 8002                  	dc.b		nD5,	$0B,	nRst,	$02
00080093                            ;	AlterNotes	value
00080093 E10B                       	smpsAlterNote	$0B
00080095 C10B 8002 BE18 8002        	dc.b		nE5,	$0B,	nRst,	$02,	nCs5,	$18,	nRst,	$02
0008009D BE10 E7                    	dc.b		nCs5,	$10,	smpsNoAttack
000800A0                            ;	AlterNotes	value
000800A0 E100                       	smpsAlterNote	$00
000800A2 BE05 E7                    	dc.b		nCs5,	$05,	smpsNoAttack
000800A5                            ;	AlterNotes	value
000800A5 E10B                       	smpsAlterNote	$0B
000800A7 BE01 8005 E7BE 0B80        	dc.b		nCs5,	$01,	nRst,	$05,	smpsNoAttack,	nCs5,	$0B,	nRst
000800AF 02C1 1680 04               	dc.b		$02,	nE5,	$16,	nRst,	$04
000800B4                            ;	AlterNotes	value
000800B4 E109                       	smpsAlterNote	$09
000800B6 C517 8004                  	dc.b		nAb5,	$17,	nRst,	$04
000800BA                            ;	AlterNotes	value
000800BA E10A                       	smpsAlterNote	$0A
000800BC C30B 8003 C30A 8003        	dc.b		nFs5,	$0B,	nRst,	$03,	nFs5,	$0A,	nRst,	$03
000800C4 C30B 8002 C30B 8002        	dc.b		nFs5,	$0B,	nRst,	$02,	nFs5,	$0B,	nRst,	$02
000800CC                            ;	AlterNotes	value
000800CC E109                       	smpsAlterNote	$09
000800CE BF12 BF0A E7               	dc.b		nD5,	$12,	nD5,	$0A,	smpsNoAttack
000800D3                            ;	AlterNotes	value
000800D3 E10B                       	smpsAlterNote	$0B
000800D5 C106 E7                    	dc.b		nE5,	$06,	smpsNoAttack
000800D8                            ;	AlterNotes	value
000800D8 E100                       	smpsAlterNote	$00
000800DA C101                       	dc.b		nE5,	$01
000800DC                            ;	AlterNotes	value
000800DC E10A                       	smpsAlterNote	$0A
000800DE C310 E7                    	dc.b		nFs5,	$10,	smpsNoAttack
000800E1                            ;	AlterNotes	value
000800E1 E100                       	smpsAlterNote	$00
000800E3 C302                       	dc.b		nFs5,	$02
000800E5                            ;	AlterNotes	value
000800E5 E109                       	smpsAlterNote	$09
000800E7 C516 801F C511 E7          	dc.b		nAb5,	$16,	nRst,	$1F,	nAb5,	$11,	smpsNoAttack
000800EE                            ;	AlterNotes	value
000800EE E100                       	smpsAlterNote	$00
000800F0 C501                       	dc.b		nAb5,	$01
000800F2                            ;	AlterNotes	value
000800F2 E10A                       	smpsAlterNote	$0A
000800F4 C311 E7                    	dc.b		nFs5,	$11,	smpsNoAttack
000800F7                            ;	AlterNotes	value
000800F7 E100                       	smpsAlterNote	$00
000800F9 C301                       	dc.b		nFs5,	$01
000800FB                            ;	AlterNotes	value
000800FB E109                       	smpsAlterNote	$09
000800FD C510 E7                    	dc.b		nAb5,	$10,	smpsNoAttack
00080100                            ;	AlterNotes	value
00080100 E100                       	smpsAlterNote	$00
00080102 C502                       	dc.b		nAb5,	$02
00080104                            ;	AlterNotes	value
00080104 E10D                       	smpsAlterNote	$0D
00080106 C61B E7                    	dc.b		nA5,	$1B,	smpsNoAttack
00080109                            ;	AlterNotes	value
00080109 E100                       	smpsAlterNote	$00
0008010B C604 E7                    	dc.b		nA5,	$04,	smpsNoAttack
0008010E                            ;	AlterNotes	value
0008010E E10D                       	smpsAlterNote	$0D
00080110 C607 E7                    	dc.b		nA5,	$07,	smpsNoAttack
00080113                            ;	AlterNotes	value
00080113 E100                       	smpsAlterNote	$00
00080115 C609 E7                    	dc.b		nA5,	$09,	smpsNoAttack
00080118                            ;	AlterNotes	value
00080118 E10D                       	smpsAlterNote	$0D
0008011A C602 E7                    	dc.b		nA5,	$02,	smpsNoAttack
0008011D                            ;	AlterNotes	value
0008011D E100                       	smpsAlterNote	$00
0008011F C60F E7                    	dc.b		nA5,	$0F,	smpsNoAttack
00080122                            ;	AlterNotes	value
00080122 E10D                       	smpsAlterNote	$0D
00080124 C60A E7                    	dc.b		nA5,	$0A,	smpsNoAttack
00080127                            ;	AlterNotes	value
00080127 E100                       	smpsAlterNote	$00
00080129 C601 E7                    	dc.b		nA5,	$01,	smpsNoAttack
0008012C                            ;	AlterNotes	value
0008012C E10D                       	smpsAlterNote	$0D
0008012E C607 E7                    	dc.b		nA5,	$07,	smpsNoAttack
00080131                            ;	AlterNotes	value
00080131 E100                       	smpsAlterNote	$00
00080133 C604 E7                    	dc.b		nA5,	$04,	smpsNoAttack
00080136                            ;	AlterNotes	value
00080136 E10D                       	smpsAlterNote	$0D
00080138 C612 E7                    	dc.b		nA5,	$12,	smpsNoAttack
0008013B                            ;	AlterNotes	value
0008013B E100                       	smpsAlterNote	$00
0008013D C602 E7                    	dc.b		nA5,	$02,	smpsNoAttack
00080140                            ;	AlterNotes	value
00080140 E10D                       	smpsAlterNote	$0D
00080142 C61A E7                    	dc.b		nA5,	$1A,	smpsNoAttack
00080145                            ;	AlterNotes	value
00080145 E100                       	smpsAlterNote	$00
00080147 C605 E7                    	dc.b		nA5,	$05,	smpsNoAttack
0008014A                            ;	AlterNotes	value
0008014A E10D                       	smpsAlterNote	$0D
0008014C C607 E7                    	dc.b		nA5,	$07,	smpsNoAttack
0008014F                            ;	AlterNotes	value
0008014F E100                       	smpsAlterNote	$00
00080151 C608 E7                    	dc.b		nA5,	$08,	smpsNoAttack
00080154                            ;	AlterNotes	value
00080154 E10D                       	smpsAlterNote	$0D
00080156 C602 E7                    	dc.b		nA5,	$02,	smpsNoAttack
00080159                            ;	AlterNotes	value
00080159 E100                       	smpsAlterNote	$00
0008015B C610 E7                    	dc.b		nA5,	$10,	smpsNoAttack
0008015E                            ;	AlterNotes	value
0008015E E10D                       	smpsAlterNote	$0D
00080160 C60A E7                    	dc.b		nA5,	$0A,	smpsNoAttack
00080163                            ;	AlterNotes	value
00080163 E100                       	smpsAlterNote	$00
00080165 C601 E7                    	dc.b		nA5,	$01,	smpsNoAttack
00080168                            ;	AlterNotes	value
00080168 E10D                       	smpsAlterNote	$0D
0008016A C606 E7                    	dc.b		nA5,	$06,	smpsNoAttack
0008016D                            ;	AlterNotes	value
0008016D E100                       	smpsAlterNote	$00
0008016F C605 E7                    	dc.b		nA5,	$05,	smpsNoAttack
00080172                            ;	AlterNotes	value
00080172 E10D                       	smpsAlterNote	$0D
00080174 C611 E7                    	dc.b		nA5,	$11,	smpsNoAttack
00080177                            ;	AlterNotes	value
00080177 E100                       	smpsAlterNote	$00
00080179 C602 807F 55               	dc.b		nA5,	$02,	nRst,	$7F,	$55
0008017E                            ;	SetFMVoice	#
00080180                            ;	AlterVolume	value
00080180 E6F8                       	smpsAlterVol	$F8
00080182 E780 1B                    	dc.b		smpsNoAttack,	nRst,	$1B
00080185                            ;	AlterNotes	value
00080185 E10D                       	smpsAlterNote	$0D
00080187 BA10 E7                    	dc.b		nA4,	$10,	smpsNoAttack
0008018A                            ;	AlterNotes	value
0008018A E100                       	smpsAlterNote	$00
0008018C BA04 E7                    	dc.b		nA4,	$04,	smpsNoAttack
0008018F                            ;	AlterNotes	value
0008018F E10D                       	smpsAlterNote	$0D
00080191 BA02 8004                  	dc.b		nA4,	$02,	nRst,	$04
00080195                            ;	AlterNotes	value
00080195 E109                       	smpsAlterNote	$09
00080197 B916 8005                  	dc.b		nAb4,	$16,	nRst,	$05
0008019B                            ;	AlterNotes	value
0008019B E10D                       	smpsAlterNote	$0D
0008019D BA0A 8003                  	dc.b		nA4,	$0A,	nRst,	$03
000801A1                            ;	AlterNotes	value
000801A1 E100                       	smpsAlterNote	$00
000801A3 BC23 8004                  	dc.b		nB4,	$23,	nRst,	$04
000801A7                            ;	AlterNotes	value
000801A7 E10D                       	smpsAlterNote	$0D
000801A9 BA10 E7                    	dc.b		nA4,	$10,	smpsNoAttack
000801AC                            ;	AlterNotes	value
000801AC E100                       	smpsAlterNote	$00
000801AE BA05 E7                    	dc.b		nA4,	$05,	smpsNoAttack
000801B1                            ;	AlterNotes	value
000801B1 E10D                       	smpsAlterNote	$0D
000801B3 BA01 8005                  	dc.b		nA4,	$01,	nRst,	$05
000801B7                            ;	AlterNotes	value
000801B7 E109                       	smpsAlterNote	$09
000801B9 B90B 8002                  	dc.b		nAb4,	$0B,	nRst,	$02
000801BD                            ;	AlterNotes	value
000801BD E10D                       	smpsAlterNote	$0D
000801BF BA10 E7                    	dc.b		nA4,	$10,	smpsNoAttack
000801C2                            ;	AlterNotes	value
000801C2 E100                       	smpsAlterNote	$00
000801C4 BA04 E7                    	dc.b		nA4,	$04,	smpsNoAttack
000801C7                            ;	AlterNotes	value
000801C7 E10D                       	smpsAlterNote	$0D
000801C9 BA02 8004                  	dc.b		nA4,	$02,	nRst,	$04
000801CD                            ;	AlterNotes	value
000801CD E10B                       	smpsAlterNote	$0B
000801CF BE28 E7                    	dc.b		nCs5,	$28,	smpsNoAttack
000801D2                            ;	AlterNotes	value
000801D2 E100                       	smpsAlterNote	$00
000801D4 BE05 E7                    	dc.b		nCs5,	$05,	smpsNoAttack
000801D7                            ;	AlterNotes	value
000801D7 E10B                       	smpsAlterNote	$0B
000801D9 BE06 E7                    	dc.b		nCs5,	$06,	smpsNoAttack
000801DC                            ;	AlterNotes	value
000801DC E100                       	smpsAlterNote	$00
000801DE BE04 800B                  	dc.b		nCs5,	$04,	nRst,	$0B
000801E2                            ;	AlterNotes	value
000801E2 E109                       	smpsAlterNote	$09
000801E4 BF17 8004                  	dc.b		nD5,	$17,	nRst,	$04
000801E8                            ;	AlterNotes	value
000801E8 E10B                       	smpsAlterNote	$0B
000801EA BE0B 8002 BE18 8003        	dc.b		nCs5,	$0B,	nRst,	$02,	nCs5,	$18,	nRst,	$03
000801F2                            ;	AlterNotes	value
000801F2 E100                       	smpsAlterNote	$00
000801F4 BC1D E7BC 04E7 BC07        	dc.b		nB4,	$1D,	smpsNoAttack,	nB4,	$04,	smpsNoAttack,	nB4,	$07
000801FC E7BC 04E7 BC07 E7BC        	dc.b		smpsNoAttack,	nB4,	$04,	smpsNoAttack,	nB4,	$07,	smpsNoAttack,	nB4
00080204 09E7 BC02 E7BC 04E7        	dc.b		$09,	smpsNoAttack,	nB4,	$02,	smpsNoAttack,	nB4,	$04,	smpsNoAttack
0008020C BC07 E7BC 04E7 BC0A        	dc.b		nB4,	$07,	smpsNoAttack,	nB4,	$04,	smpsNoAttack,	nB4,	$0A
00080214 E7BC 01E7 BC04 801B        	dc.b		smpsNoAttack,	nB4,	$01,	smpsNoAttack,	nB4,	$04,	nRst,	$1B
0008021C                            ;	AlterNotes	value
0008021C E10D                       	smpsAlterNote	$0D
0008021E BA0A 8003 BA0B 8002        	dc.b		nA4,	$0A,	nRst,	$03,	nA4,	$0B,	nRst,	$02
00080226                            ;	AlterNotes	value
00080226 E109                       	smpsAlterNote	$09
00080228 B90B 8002 B90C 8002        	dc.b		nAb4,	$0B,	nRst,	$02,	nAb4,	$0C,	nRst,	$02
00080230                            ;	AlterNotes	value
00080230 E10D                       	smpsAlterNote	$0D
00080232 BA0B 8002                  	dc.b		nA4,	$0B,	nRst,	$02
00080236                            ;	AlterNotes	value
00080236 E100                       	smpsAlterNote	$00
00080238 BC23 8005                  	dc.b		nB4,	$23,	nRst,	$05
0008023C                            ;	AlterNotes	value
0008023C E10D                       	smpsAlterNote	$0D
0008023E BA0B 8002 BA0B 8002        	dc.b		nA4,	$0B,	nRst,	$02,	nA4,	$0B,	nRst,	$02
00080246                            ;	AlterNotes	value
00080246 E109                       	smpsAlterNote	$09
00080248 B90B 8002                  	dc.b		nAb4,	$0B,	nRst,	$02
0008024C                            ;	AlterNotes	value
0008024C E10D                       	smpsAlterNote	$0D
0008024E BA10 E7                    	dc.b		nA4,	$10,	smpsNoAttack
00080251                            ;	AlterNotes	value
00080251 E100                       	smpsAlterNote	$00
00080253 BA04 E7                    	dc.b		nA4,	$04,	smpsNoAttack
00080256                            ;	AlterNotes	value
00080256 E10D                       	smpsAlterNote	$0D
00080258 BA02 8005                  	dc.b		nA4,	$02,	nRst,	$05
0008025C                            ;	AlterNotes	value
0008025C E10A                       	smpsAlterNote	$0A
0008025E C323 8005 C310 E7          	dc.b		nFs5,	$23,	nRst,	$05,	nFs5,	$10,	smpsNoAttack
00080265                            ;	AlterNotes	value
00080265 E100                       	smpsAlterNote	$00
00080267 C304 E7                    	dc.b		nFs5,	$04,	smpsNoAttack
0008026A                            ;	AlterNotes	value
0008026A E10A                       	smpsAlterNote	$0A
0008026C C302 8004 E7C3 1680        	dc.b		nFs5,	$02,	nRst,	$04,	smpsNoAttack,	nFs5,	$16,	nRst
00080274 04                         	dc.b		$04
00080275                            ;	AlterNotes	value
00080275 E10B                       	smpsAlterNote	$0B
00080277 C10B 8003 C128 E7          	dc.b		nE5,	$0B,	nRst,	$03,	nE5,	$28,	smpsNoAttack
0008027E                            ;	AlterNotes	value
0008027E E100                       	smpsAlterNote	$00
00080280 C104 E7                    	dc.b		nE5,	$04,	smpsNoAttack
00080283                            ;	AlterNotes	value
00080283 E10B                       	smpsAlterNote	$0B
00080285 C107 E7                    	dc.b		nE5,	$07,	smpsNoAttack
00080288                            ;	AlterNotes	value
00080288 E100                       	smpsAlterNote	$00
0008028A C104 8025                  	dc.b		nE5,	$04,	nRst,	$25
0008028E                            ;	AlterNotes	value
0008028E E109                       	smpsAlterNote	$09
00080290 BF0B 8002 BF0C 8002        	dc.b		nD5,	$0B,	nRst,	$02,	nD5,	$0C,	nRst,	$02
00080298                            ;	AlterNotes	value
00080298 E10B                       	smpsAlterNote	$0B
0008029A BE16 8004                  	dc.b		nCs5,	$16,	nRst,	$04
0008029E                            ;	AlterNotes	value
0008029E E109                       	smpsAlterNote	$09
000802A0 BF0B 8003                  	dc.b		nD5,	$0B,	nRst,	$03
000802A4                            ;	AlterNotes	value
000802A4 E10B                       	smpsAlterNote	$0B
000802A6 BE2B 8009 BE0B 8002        	dc.b		nCs5,	$2B,	nRst,	$09,	nCs5,	$0B,	nRst,	$02
000802AE BE16 8005                  	dc.b		nCs5,	$16,	nRst,	$05
000802B2                            ;	AlterNotes	value
000802B2 E109                       	smpsAlterNote	$09
000802B4 BF13 E7                    	dc.b		nD5,	$13,	smpsNoAttack
000802B7                            ;	AlterNotes	value
000802B7 E100                       	smpsAlterNote	$00
000802B9 BF01 E7                    	dc.b		nD5,	$01,	smpsNoAttack
000802BC                            ;	AlterNotes	value
000802BC E109                       	smpsAlterNote	$09
000802BE BF02 8005                  	dc.b		nD5,	$02,	nRst,	$05
000802C2                            ;	AlterNotes	value
000802C2 E10B                       	smpsAlterNote	$0B
000802C4 BE16 8004                  	dc.b		nCs5,	$16,	nRst,	$04
000802C8                            ;	AlterNotes	value
000802C8 E100                       	smpsAlterNote	$00
000802CA BC13 E7BC 01E7 BC02        	dc.b		nB4,	$13,	smpsNoAttack,	nB4,	$01,	smpsNoAttack,	nB4,	$02
000802D2 8005 E7BC 1E80 09          	dc.b		nRst,	$05,	smpsNoAttack,	nB4,	$1E,	nRst,	$09
000802D9                            ;	AlterNotes	value
000802D9 E10D                       	smpsAlterNote	$0D
000802DB BA0B 8002 BA16 8005        	dc.b		nA4,	$0B,	nRst,	$02,	nA4,	$16,	nRst,	$05
000802E3                            ;	AlterNotes	value
000802E3 E109                       	smpsAlterNote	$09
000802E5 B90B 8002                  	dc.b		nAb4,	$0B,	nRst,	$02
000802E9                            ;	AlterNotes	value
000802E9 E10D                       	smpsAlterNote	$0D
000802EB BA33 E7                    	dc.b		nA4,	$33,	smpsNoAttack
000802EE                            ;	AlterNotes	value
000802EE E100                       	smpsAlterNote	$00
000802F0 BA04 8019                  	dc.b		nA4,	$04,	nRst,	$19
000802F4                            ;	AlterNotes	value
000802F4 E10A                       	smpsAlterNote	$0A
000802F6 B713 E7                    	dc.b		nFs4,	$13,	smpsNoAttack
000802F9                            ;	AlterNotes	value
000802F9 E100                       	smpsAlterNote	$00
000802FB B701 E7                    	dc.b		nFs4,	$01,	smpsNoAttack
000802FE                            ;	AlterNotes	value
000802FE E10A                       	smpsAlterNote	$0A
00080300 B702 8004                  	dc.b		nFs4,	$02,	nRst,	$04
00080304                            ;	AlterNotes	value
00080304 E10D                       	smpsAlterNote	$0D
00080306 BA0B 8002                  	dc.b		nA4,	$0B,	nRst,	$02
0008030A                            ;	AlterNotes	value
0008030A E10B                       	smpsAlterNote	$0B
0008030C BE16 8005                  	dc.b		nCs5,	$16,	nRst,	$05
00080310                            ;	AlterNotes	value
00080310 E100                       	smpsAlterNote	$00
00080312 BC0B 8002 BC23 8004        	dc.b		nB4,	$0B,	nRst,	$02,	nB4,	$23,	nRst,	$04
0008031A BC0B 8003                  	dc.b		nB4,	$0B,	nRst,	$03
0008031E                            ;	AlterNotes	value
0008031E E10D                       	smpsAlterNote	$0D
00080320 BA0B 8002                  	dc.b		nA4,	$0B,	nRst,	$02
00080324                            ;	AlterNotes	value
00080324 E109                       	smpsAlterNote	$09
00080326 B90B 8002 B914 E7          	dc.b		nAb4,	$0B,	nRst,	$02,	nAb4,	$14,	smpsNoAttack
0008032D                            ;	AlterNotes	value
0008032D E100                       	smpsAlterNote	$00
0008032F B901 E7                    	dc.b		nAb4,	$01,	smpsNoAttack
00080332                            ;	AlterNotes	value
00080332 E109                       	smpsAlterNote	$09
00080334 B901 8005 E7B9 0B80        	dc.b		nAb4,	$01,	nRst,	$05,	smpsNoAttack,	nAb4,	$0B,	nRst
0008033C 03                         	dc.b		$03
0008033D                            ;	AlterNotes	value
0008033D E10A                       	smpsAlterNote	$0A
0008033F B716 8004                  	dc.b		nFs4,	$16,	nRst,	$04
00080343                            ;	AlterNotes	value
00080343 E109                       	smpsAlterNote	$09
00080345 B90B 8002                  	dc.b		nAb4,	$0B,	nRst,	$02
00080349                            ;	AlterNotes	value
00080349 E10D                       	smpsAlterNote	$0D
0008034B BA33 E7                    	dc.b		nA4,	$33,	smpsNoAttack
0008034E                            ;	AlterNotes	value
0008034E E100                       	smpsAlterNote	$00
00080350 BA07 E7                    	dc.b		nA4,	$07,	smpsNoAttack
00080353                            ;	AlterNotes	value
00080353 E10D                       	smpsAlterNote	$0D
00080355 BA04 E7                    	dc.b		nA4,	$04,	smpsNoAttack
00080358                            ;	AlterNotes	value
00080358 E100                       	smpsAlterNote	$00
0008035A BA09 E7                    	dc.b		nA4,	$09,	smpsNoAttack
0008035D                            ;	AlterNotes	value
0008035D E10D                       	smpsAlterNote	$0D
0008035F BA02 E7                    	dc.b		nA4,	$02,	smpsNoAttack
00080362                            ;	AlterNotes	value
00080362 E100                       	smpsAlterNote	$00
00080364 BA05 E7                    	dc.b		nA4,	$05,	smpsNoAttack
00080367                            ;	AlterNotes	value
00080367 E10D                       	smpsAlterNote	$0D
00080369 BA0A E7                    	dc.b		nA4,	$0A,	smpsNoAttack
0008036C                            ;	AlterNotes	value
0008036C E100                       	smpsAlterNote	$00
0008036E BA01 E7                    	dc.b		nA4,	$01,	smpsNoAttack
00080371                            ;	AlterNotes	value
00080371 E10D                       	smpsAlterNote	$0D
00080373 BA0A E7                    	dc.b		nA4,	$0A,	smpsNoAttack
00080376                            ;	AlterNotes	value
00080376 E100                       	smpsAlterNote	$00
00080378 BA01 E7                    	dc.b		nA4,	$01,	smpsNoAttack
0008037B                            ;	AlterNotes	value
0008037B E10D                       	smpsAlterNote	$0D
0008037D BA12 E7                    	dc.b		nA4,	$12,	smpsNoAttack
00080380                            ;	AlterNotes	value
00080380 E100                       	smpsAlterNote	$00
00080382 BA01 E7                    	dc.b		nA4,	$01,	smpsNoAttack
00080385                            ;	AlterNotes	value
00080385 E10D                       	smpsAlterNote	$0D
00080387 BA26 E7                    	dc.b		nA4,	$26,	smpsNoAttack
0008038A                            ;	AlterNotes	value
0008038A E100                       	smpsAlterNote	$00
0008038C BA04 8026                  	dc.b		nA4,	$04,	nRst,	$26
00080390                            ;	SetFMVoice	#
00080392                            ;	AlterNotes	value
00080392 E10D                       	smpsAlterNote	$0D
00080394 BA13 E7                    	dc.b		nA4,	$13,	smpsNoAttack
00080397                            ;	AlterNotes	value
00080397 E100                       	smpsAlterNote	$00
00080399 BA01 E7                    	dc.b		nA4,	$01,	smpsNoAttack
0008039C                            ;	AlterNotes	value
0008039C E10D                       	smpsAlterNote	$0D
0008039E BA02 8004                  	dc.b		nA4,	$02,	nRst,	$04
000803A2                            ;	AlterNotes	value
000803A2 E10A                       	smpsAlterNote	$0A
000803A4 C313 E7                    	dc.b		nFs5,	$13,	smpsNoAttack
000803A7                            ;	AlterNotes	value
000803A7 E100                       	smpsAlterNote	$00
000803A9 C301 E7                    	dc.b		nFs5,	$01,	smpsNoAttack
000803AC                            ;	AlterNotes	value
000803AC E10A                       	smpsAlterNote	$0A
000803AE C312 E7                    	dc.b		nFs5,	$12,	smpsNoAttack
000803B1                            ;	AlterNotes	value
000803B1 E100                       	smpsAlterNote	$00
000803B3 C307 E7                    	dc.b		nFs5,	$07,	smpsNoAttack
000803B6                            ;	AlterNotes	value
000803B6 E10A                       	smpsAlterNote	$0A
000803B8 C304 E7                    	dc.b		nFs5,	$04,	smpsNoAttack
000803BB                            ;	AlterNotes	value
000803BB E100                       	smpsAlterNote	$00
000803BD C309 E7                    	dc.b		nFs5,	$09,	smpsNoAttack
000803C0                            ;	AlterNotes	value
000803C0 E10A                       	smpsAlterNote	$0A
000803C2 C302 E7                    	dc.b		nFs5,	$02,	smpsNoAttack
000803C5                            ;	AlterNotes	value
000803C5 E100                       	smpsAlterNote	$00
000803C7 C304 800F                  	dc.b		nFs5,	$04,	nRst,	$0F
000803CB                            ;	AlterNotes	value
000803CB E10D                       	smpsAlterNote	$0D
000803CD C614 E7                    	dc.b		nA5,	$14,	smpsNoAttack
000803D0                            ;	AlterNotes	value
000803D0 E100                       	smpsAlterNote	$00
000803D2 C601 E7                    	dc.b		nA5,	$01,	smpsNoAttack
000803D5                            ;	AlterNotes	value
000803D5 E10D                       	smpsAlterNote	$0D
000803D7 C602 8004                  	dc.b		nA5,	$02,	nRst,	$04
000803DB                            ;	AlterNotes	value
000803DB E109                       	smpsAlterNote	$09
000803DD C513 E7                    	dc.b		nAb5,	$13,	smpsNoAttack
000803E0                            ;	AlterNotes	value
000803E0 E100                       	smpsAlterNote	$00
000803E2 C501 E7                    	dc.b		nAb5,	$01,	smpsNoAttack
000803E5                            ;	AlterNotes	value
000803E5 E109                       	smpsAlterNote	$09
000803E7 C502 8005 E7C5 13E7        	dc.b		nAb5,	$02,	nRst,	$05,	smpsNoAttack,	nAb5,	$13,	smpsNoAttack
000803EF                            ;	AlterNotes	value
000803EF E100                       	smpsAlterNote	$00
000803F1 C501 E7                    	dc.b		nAb5,	$01,	smpsNoAttack
000803F4                            ;	AlterNotes	value
000803F4 E109                       	smpsAlterNote	$09
000803F6 C501 8005                  	dc.b		nAb5,	$01,	nRst,	$05
000803FA                            ;	AlterNotes	value
000803FA E10A                       	smpsAlterNote	$0A
000803FC C30B 8002                  	dc.b		nFs5,	$0B,	nRst,	$02
00080400                            ;	AlterNotes	value
00080400 E109                       	smpsAlterNote	$09
00080402 C513 E7                    	dc.b		nAb5,	$13,	smpsNoAttack
00080405                            ;	AlterNotes	value
00080405 E100                       	smpsAlterNote	$00
00080407 C501 E7                    	dc.b		nAb5,	$01,	smpsNoAttack
0008040A                            ;	AlterNotes	value
0008040A E109                       	smpsAlterNote	$09
0008040C C502 8005 E7C5 0B80        	dc.b		nAb5,	$02,	nRst,	$05,	smpsNoAttack,	nAb5,	$0B,	nRst
00080414 02                         	dc.b		$02
00080415                            ;	AlterNotes	value
00080415 E10D                       	smpsAlterNote	$0D
00080417 C613 E7                    	dc.b		nA5,	$13,	smpsNoAttack
0008041A                            ;	AlterNotes	value
0008041A E100                       	smpsAlterNote	$00
0008041C C601 E7                    	dc.b		nA5,	$01,	smpsNoAttack
0008041F                            ;	AlterNotes	value
0008041F E10D                       	smpsAlterNote	$0D
00080421 C602 8004 E7C6 13E7        	dc.b		nA5,	$02,	nRst,	$04,	smpsNoAttack,	nA5,	$13,	smpsNoAttack
00080429                            ;	AlterNotes	value
00080429 E100                       	smpsAlterNote	$00
0008042B C601 E7                    	dc.b		nA5,	$01,	smpsNoAttack
0008042E                            ;	AlterNotes	value
0008042E E10D                       	smpsAlterNote	$0D
00080430 C602 8005 E7C6 0B80        	dc.b		nA5,	$02,	nRst,	$05,	smpsNoAttack,	nA5,	$0B,	nRst
00080438 02                         	dc.b		$02
00080439                            ;	AlterNotes	value
00080439 E109                       	smpsAlterNote	$09
0008043B C513 E7                    	dc.b		nAb5,	$13,	smpsNoAttack
0008043E                            ;	AlterNotes	value
0008043E E100                       	smpsAlterNote	$00
00080440 C501 E7                    	dc.b		nAb5,	$01,	smpsNoAttack
00080443                            ;	AlterNotes	value
00080443 E109                       	smpsAlterNote	$09
00080445 C502 8005                  	dc.b		nAb5,	$02,	nRst,	$05
00080449                            ;	AlterNotes	value
00080449 E10A                       	smpsAlterNote	$0A
0008044B C30A 8003                  	dc.b		nFs5,	$0A,	nRst,	$03
0008044F                            ;	AlterNotes	value
0008044F E10B                       	smpsAlterNote	$0B
00080451 BE13 E7                    	dc.b		nCs5,	$13,	smpsNoAttack
00080454                            ;	AlterNotes	value
00080454 E100                       	smpsAlterNote	$00
00080456 BE01 E7                    	dc.b		nCs5,	$01,	smpsNoAttack
00080459                            ;	AlterNotes	value
00080459 E10B                       	smpsAlterNote	$0B
0008045B BE12 E7                    	dc.b		nCs5,	$12,	smpsNoAttack
0008045E                            ;	AlterNotes	value
0008045E E100                       	smpsAlterNote	$00
00080460 BE03 8019                  	dc.b		nCs5,	$03,	nRst,	$19
00080464                            ;	AlterNotes	value
00080464 E10B                       	smpsAlterNote	$0B
00080466 BE0B 8002 BE0B 8002        	dc.b		nCs5,	$0B,	nRst,	$02,	nCs5,	$0B,	nRst,	$02
0008046E BE0B 8002                  	dc.b		nCs5,	$0B,	nRst,	$02
00080472                            ;	AlterNotes	value
00080472 E100                       	smpsAlterNote	$00
00080474 BC16 802C                  	dc.b		nB4,	$16,	nRst,	$2C
00080478                            ;	AlterNotes	value
00080478 E10B                       	smpsAlterNote	$0B
0008047A BE0B 8002 BE0B 8003        	dc.b		nCs5,	$0B,	nRst,	$02,	nCs5,	$0B,	nRst,	$03
00080482 BE0B 8002                  	dc.b		nCs5,	$0B,	nRst,	$02
00080486                            ;	AlterNotes	value
00080486 E100                       	smpsAlterNote	$00
00080488 BC16 801F                  	dc.b		nB4,	$16,	nRst,	$1F
0008048C                            ;	AlterNotes	value
0008048C E10D                       	smpsAlterNote	$0D
0008048E BA0F E7                    	dc.b		nA4,	$0F,	smpsNoAttack
00080491                            ;	AlterNotes	value
00080491 E100                       	smpsAlterNote	$00
00080493 BA05 E7                    	dc.b		nA4,	$05,	smpsNoAttack
00080496                            ;	AlterNotes	value
00080496 E10D                       	smpsAlterNote	$0D
00080498 BA02 8004                  	dc.b		nA4,	$02,	nRst,	$04
0008049C                            ;	AlterNotes	value
0008049C E10A                       	smpsAlterNote	$0A
0008049E C30B 8002                  	dc.b		nFs5,	$0B,	nRst,	$02
000804A2                            ;	AlterNotes	value
000804A2 E10B                       	smpsAlterNote	$0B
000804A4 C10B 8002                  	dc.b		nE5,	$0B,	nRst,	$02
000804A8                            ;	AlterNotes	value
000804A8 E10A                       	smpsAlterNote	$0A
000804AA C30B 8003                  	dc.b		nFs5,	$0B,	nRst,	$03
000804AE                            ;	AlterNotes	value
000804AE E10B                       	smpsAlterNote	$0B
000804B0 C133 E7                    	dc.b		nE5,	$33,	smpsNoAttack
000804B3                            ;	AlterNotes	value
000804B3 E100                       	smpsAlterNote	$00
000804B5 C108 E7                    	dc.b		nE5,	$08,	smpsNoAttack
000804B8                            ;	AlterNotes	value
000804B8 E10B                       	smpsAlterNote	$0B
000804BA C103 E7                    	dc.b		nE5,	$03,	smpsNoAttack
000804BD                            ;	AlterNotes	value
000804BD E100                       	smpsAlterNote	$00
000804BF C10F E7                    	dc.b		nE5,	$0F,	smpsNoAttack
000804C2                            ;	AlterNotes	value
000804C2 E10B                       	smpsAlterNote	$0B
000804C4 C10A E7                    	dc.b		nE5,	$0A,	smpsNoAttack
000804C7                            ;	AlterNotes	value
000804C7 E100                       	smpsAlterNote	$00
000804C9 C101 E7                    	dc.b		nE5,	$01,	smpsNoAttack
000804CC                            ;	AlterNotes	value
000804CC E10B                       	smpsAlterNote	$0B
000804CE C11F E7                    	dc.b		nE5,	$1F,	smpsNoAttack
000804D1                            ;	AlterNotes	value
000804D1 E100                       	smpsAlterNote	$00
000804D3 C104 E7                    	dc.b		nE5,	$04,	smpsNoAttack
000804D6                            ;	AlterNotes	value
000804D6 E10B                       	smpsAlterNote	$0B
000804D8 C107 E7                    	dc.b		nE5,	$07,	smpsNoAttack
000804DB                            ;	AlterNotes	value
000804DB E100                       	smpsAlterNote	$00
000804DD C13E E7                    	dc.b		nE5,	$3E,	smpsNoAttack
000804E0                            ;	AlterNotes	value
000804E0 E10B                       	smpsAlterNote	$0B
000804E2 C104 E7                    	dc.b		nE5,	$04,	smpsNoAttack
000804E5                            ;	AlterNotes	value
000804E5 E100                       	smpsAlterNote	$00
000804E7 C102                       	dc.b		nE5,	$02
000804E9                            ;	SetFMVoice	#
000804EB                            ;	AlterVolume	value
000804EB E6FC                       	smpsAlterVol	$FC
000804ED                            ;	Panning		direction	amsfms
000804ED E0C0                       	smpsPan		panCentre,	$00
000804EF                            ;	AlterNotes	value
000804EF E100                       	smpsAlterNote	$00
000804F1                            ;	JumpTo		location
000804F1 F6FA FB                    	smpsJump	Credits_Jump02
000804F4                            
000804F4                            ; FM3 Data
000804F4                            Credits_FM3:
000804F4                            ;	SetFMVoice	#
000804F6                            ;	AlterVolume	value
000804F6 E60E                       	smpsAlterVol	$0E
000804F8                            ;	Panning		direction	amsfms
000804F8 E0C0                       	smpsPan		panCentre,	$00
000804FA 8001 E781 0780 1481        	dc.b		nRst,	$01,	smpsNoAttack,	nC0,	$07,	nRst,	$14,	nC0
00080502 0680 1481 0780 0681        	dc.b		$06,	nRst,	$14,	nC0,	$07,	nRst,	$06,	nC0
0008050A 0780 06E7 8001 E781        	dc.b		$07,	nRst,	$06,	smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0
00080512 0680 1481 0780 1381        	dc.b		$06,	nRst,	$14,	nC0,	$07,	nRst,	$13,	nC0
0008051A 0780 1481 0680 0781        	dc.b		$07,	nRst,	$14,	nC0,	$06,	nRst,	$07,	nC0
00080522 0680 0781 0680 14E7        	dc.b		$06,	nRst,	$07,	nC0,	$06,	nRst,	$14,	smpsNoAttack
0008052A 8001 E781 0680 1481        	dc.b		nRst,	$01,	smpsNoAttack,	nC0,	$06,	nRst,	$14,	nC0
00080532 0680 14E7 8001 E781        	dc.b		$06,	nRst,	$14,	smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0
0008053A 0680 0781 0680 0781        	dc.b		$06,	nRst,	$07,	nC0,	$06,	nRst,	$07,	nC0
00080542 8013 E780 01E7 8106        	dc.b		nRst,	$13,	smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0,	$06
0008054A 8014 8106 8014 E780        	dc.b		nRst,	$14,	nC0,	$06,	nRst,	$14,	smpsNoAttack,	nRst
00080552 01E7 8106 8006 E780        	dc.b		$01,	smpsNoAttack,	nC0,	$06,	nRst,	$06,	smpsNoAttack,	nRst
0008055A 01E7 8106 8007 8106        	dc.b		$01,	smpsNoAttack,	nC0,	$06,	nRst,	$07,	nC0,	$06
00080562 8014 E780 01E7 8106        	dc.b		nRst,	$14,	smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0,	$06
0008056A 8014 8107 8013 E780        	dc.b		nRst,	$14,	nC0,	$07,	nRst,	$13,	smpsNoAttack,	nRst
00080572 01E7 8106 8006 E780        	dc.b		$01,	smpsNoAttack,	nC0,	$06,	nRst,	$06,	smpsNoAttack,	nRst
0008057A 01E7 8106 8007 8106        	dc.b		$01,	smpsNoAttack,	nC0,	$06,	nRst,	$07,	nC0,	$06
00080582 8014 8107 8013 E780        	dc.b		nRst,	$14,	nC0,	$07,	nRst,	$13,	smpsNoAttack,	nRst
0008058A 01E7 8106 8007             	dc.b		$01,	smpsNoAttack,	nC0,	$06,	nRst,	$07
00080590                            ;	SetFMVoice	#
00080592                            ;	AlterVolume	value
00080592 E6FC                       	smpsAlterVol	$FC
00080594 8206 8001 E782 06          	dc.b		dSnare,	$06,	nRst,	$01,	smpsNoAttack,	dSnare,	$06
0008059B                            ;	SetFMVoice	#
0008059D                            ;	AlterVolume	value
0008059D E604                       	smpsAlterVol	$04
0008059F 8180 0781 8006             	dc.b		nC0,	nRst,	$07,	nC0,	nRst,	$06
000805A5                            ;	SetFMVoice	#
000805A7                            ;	AlterVolume	value
000805A7 E6FC                       	smpsAlterVol	$FC
000805A9 E780 01E7 8206 8207        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	dSnare,	$06,	dSnare,	$07
000805B1 8206 8207                  	dc.b		dSnare,	$06,	dSnare,	$07
000805B5                            ;	SetFMVoice	#
000805B7                            ;	AlterVolume	value
000805B7 E604                       	smpsAlterVol	$04
000805B9 8180 07                    	dc.b		nC0,	nRst,	$07
000805BC                            Credits_Jump03:
000805BC 800C                       	dc.b		nRst,	$0C
000805BE                            ;	SetFMVoice	#
000805C0 E780 01                    	dc.b		smpsNoAttack,	nRst,	$01
000805C3                            ;	SetFMVoice	#
000805C5 8106 8014 8107 8006        	dc.b		nC0,	$06,	nRst,	$14,	nC0,	$07,	nRst,	$06
000805CD 8107 8006 E780 01E7        	dc.b		nC0,	$07,	nRst,	$06,	smpsNoAttack,	nRst,	$01,	smpsNoAttack
000805D5 8106 8014 8106 8014        	dc.b		nC0,	$06,	nRst,	$14,	nC0,	$06,	nRst,	$14
000805DD 8107 8013                  	dc.b		nC0,	$07,	nRst,	$13
000805E1                            ;	SetFMVoice	#
000805E3 E780 01                    	dc.b		smpsNoAttack,	nRst,	$01
000805E6                            ;	SetFMVoice	#
000805E8 8106 8007 8106 8007        	dc.b		nC0,	$06,	nRst,	$07,	nC0,	$06,	nRst,	$07
000805F0 8106 8014 E780 01E7        	dc.b		nC0,	$06,	nRst,	$14,	smpsNoAttack,	nRst,	$01,	smpsNoAttack
000805F8 8106 8014 E780 01E7        	dc.b		nC0,	$06,	nRst,	$14,	smpsNoAttack,	nRst,	$01,	smpsNoAttack
00080600 8106 8014 8106 8007        	dc.b		nC0,	$06,	nRst,	$14,	nC0,	$06,	nRst,	$07
00080608 8106 8007 8180 13E7        	dc.b		nC0,	$06,	nRst,	$07,	nC0,	nRst,	$13,	smpsNoAttack
00080610 8001 E781 0680 1481        	dc.b		nRst,	$01,	smpsNoAttack,	nC0,	$06,	nRst,	$14,	nC0
00080618 0680 14E7 8001 E781        	dc.b		$06,	nRst,	$14,	smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0
00080620 0680 06                    	dc.b		$06,	nRst,	$06
00080623                            ;	SetFMVoice	#
00080625 E780 01                    	dc.b		smpsNoAttack,	nRst,	$01
00080628                            ;	SetFMVoice	#
0008062A 8106 8007 8180 13E7        	dc.b		nC0,	$06,	nRst,	$07,	nC0,	nRst,	$13,	smpsNoAttack
00080632 8001 E781 0680 1481        	dc.b		nRst,	$01,	smpsNoAttack,	nC0,	$06,	nRst,	$14,	nC0
0008063A 0780 13E7 8001 E781        	dc.b		$07,	nRst,	$13,	smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0
00080642 0680 06E7 8001 E781        	dc.b		$06,	nRst,	$06,	smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0
0008064A 0680 0781 0680 1481        	dc.b		$06,	nRst,	$07,	nC0,	$06,	nRst,	$14,	nC0
00080652 0780 13E7 8001 E781        	dc.b		$07,	nRst,	$13,	smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0
0008065A 0680 1481 0680 0781        	dc.b		$06,	nRst,	$14,	nC0,	$06,	nRst,	$07,	nC0
00080662 8006 E780 01E7 8106        	dc.b		nRst,	$06,	smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0,	$06
0008066A 8013                       	dc.b		nRst,	$13
0008066C                            ;	SetFMVoice	#
0008066E E780 01                    	dc.b		smpsNoAttack,	nRst,	$01
00080671                            ;	SetFMVoice	#
00080673 8107 8013 E780 01E7        	dc.b		nC0,	$07,	nRst,	$13,	smpsNoAttack,	nRst,	$01,	smpsNoAttack
0008067B 8106 8014 8106 8007        	dc.b		nC0,	$06,	nRst,	$14,	nC0,	$06,	nRst,	$07
00080683 8180 0681 0780 1481        	dc.b		nC0,	nRst,	$06,	nC0,	$07,	nRst,	$14,	nC0
0008068B 0680 14                    	dc.b		$06,	nRst,	$14
0008068E                            ;	SetFMVoice	#
00080690                            ;	AlterVolume	value
00080690 E6FC                       	smpsAlterVol	$FC
00080692 E780 01E7 8206 82E7        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	dSnare,	$06,	dSnare,	smpsNoAttack
0008069A 8201 E782 0880 04          	dc.b		dSnare,	$01,	smpsNoAttack,	dSnare,	$08,	nRst,	$04
000806A1                            ;	SetFMVoice	#
000806A3 E780 01                    	dc.b		smpsNoAttack,	nRst,	$01
000806A6                            ;	SetFMVoice	#
000806A8                            ;	AlterVolume	value
000806A8 E604                       	smpsAlterVol	$04
000806AA 8107 800B 8107 800B        	dc.b		nC0,	$07,	nRst,	$0B,	nC0,	$07,	nRst,	$0B
000806B2 8107 800B 8106 8014        	dc.b		nC0,	$07,	nRst,	$0B,	nC0,	$06,	nRst,	$14
000806BA E780 01E7 8106 8014        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0,	$06,	nRst,	$14
000806C2 8106 8007 8106 8007        	dc.b		nC0,	$06,	nRst,	$07,	nC0,	$06,	nRst,	$07
000806CA 8180 13E7 8001 E781        	dc.b		nC0,	nRst,	$13,	smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0
000806D2 0680 1481 0680 1481        	dc.b		$06,	nRst,	$14,	nC0,	$06,	nRst,	$14,	nC0
000806DA 0780 0681 0780 06          	dc.b		$07,	nRst,	$06,	nC0,	$07,	nRst,	$06
000806E1                            ;	SetFMVoice	#
000806E3 E780 01                    	dc.b		smpsNoAttack,	nRst,	$01
000806E6                            ;	SetFMVoice	#
000806E8 8106 8014 8106 8014        	dc.b		nC0,	$06,	nRst,	$14,	nC0,	$06,	nRst,	$14
000806F0 E780 01E7 8106 8014        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0,	$06,	nRst,	$14
000806F8 8107 8006 E780 01E7        	dc.b		nC0,	$07,	nRst,	$06,	smpsNoAttack,	nRst,	$01,	smpsNoAttack
00080700 8106 8007 8106 8014        	dc.b		nC0,	$06,	nRst,	$07,	nC0,	$06,	nRst,	$14
00080708 8107 8013 E780 01E7        	dc.b		nC0,	$07,	nRst,	$13,	smpsNoAttack,	nRst,	$01,	smpsNoAttack
00080710 8106 8014 8106 8007        	dc.b		nC0,	$06,	nRst,	$14,	nC0,	$06,	nRst,	$07
00080718 8181 0681 0781 06          	dc.b		nC0,	nC0,	$06,	nC0,	$07,	nC0,	$06
0008071F                            ;	SetFMVoice	#
00080721                            ;	AlterVolume	value
00080721 E6FC                       	smpsAlterVol	$FC
00080723 8209 8005                  	dc.b		dSnare,	$09,	nRst,	$05
00080727                            ;	SetFMVoice	#
00080729                            ;	AlterVolume	value
00080729 E602                       	smpsAlterVol	$02
0008072B E780 01E7 8206 8013        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	dSnare,	$06,	nRst,	$13
00080733                            ;	SetFMVoice	#
00080735 E780 01                    	dc.b		smpsNoAttack,	nRst,	$01
00080738                            ;	SetFMVoice	#
0008073A                            ;	AlterVolume	value
0008073A E602                       	smpsAlterVol	$02
0008073C 8106 802E E780 01E7        	dc.b		nC0,	$06,	nRst,	$2E,	smpsNoAttack,	nRst,	$01,	smpsNoAttack
00080744 8106 8006                  	dc.b		nC0,	$06,	nRst,	$06
00080748                            ;	SetFMVoice	#
0008074A                            ;	AlterVolume	value
0008074A E6FE                       	smpsAlterVol	$FE
0008074C E780 01E7 8206 8007        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	dSnare,	$06,	nRst,	$07
00080754 8206 8014                  	dc.b		dSnare,	$06,	nRst,	$14
00080758                            ;	SetFMVoice	#
0008075A                            ;	AlterVolume	value
0008075A E602                       	smpsAlterVol	$02
0008075C 8107 802E 8106 8014        	dc.b		nC0,	$07,	nRst,	$2E,	nC0,	$06,	nRst,	$14
00080764                            ;	SetFMVoice	#
00080766                            ;	AlterVolume	value
00080766 E6FE                       	smpsAlterVol	$FE
00080768 E780 01E7 8206 8014        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	dSnare,	$06,	nRst,	$14
00080770                            ;	SetFMVoice	#
00080772                            ;	AlterVolume	value
00080772 E602                       	smpsAlterVol	$02
00080774 8106 802E                  	dc.b		nC0,	$06,	nRst,	$2E
00080778                            ;	SetFMVoice	#
0008077A E780 01                    	dc.b		smpsNoAttack,	nRst,	$01
0008077D                            ;	SetFMVoice	#
0008077F 8107 8006                  	dc.b		nC0,	$07,	nRst,	$06
00080783                            ;	SetFMVoice	#
00080785                            ;	AlterVolume	value
00080785 E6FE                       	smpsAlterVol	$FE
00080787 8207 8006 E780 01E7        	dc.b		dSnare,	$07,	nRst,	$06,	smpsNoAttack,	nRst,	$01,	smpsNoAttack
0008078F 8206 8014                  	dc.b		dSnare,	$06,	nRst,	$14
00080793                            ;	SetFMVoice	#
00080795                            ;	AlterVolume	value
00080795 E602                       	smpsAlterVol	$02
00080797 8106 802E                  	dc.b		nC0,	$06,	nRst,	$2E
0008079B                            ;	SetFMVoice	#
0008079D E780 01                    	dc.b		smpsNoAttack,	nRst,	$01
000807A0                            ;	SetFMVoice	#
000807A2 8106 8014                  	dc.b		nC0,	$06,	nRst,	$14
000807A6                            ;	SetFMVoice	#
000807A8                            ;	AlterVolume	value
000807A8 E6FE                       	smpsAlterVol	$FE
000807AA 8206 8014                  	dc.b		dSnare,	$06,	nRst,	$14
000807AE                            ;	SetFMVoice	#
000807B0                            ;	AlterVolume	value
000807B0 E602                       	smpsAlterVol	$02
000807B2 E780 01E7 8106 802E        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0,	$06,	nRst,	$2E
000807BA E780 01E7 8106 8007        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0,	$06,	nRst,	$07
000807C2                            ;	SetFMVoice	#
000807C4                            ;	AlterVolume	value
000807C4 E6FE                       	smpsAlterVol	$FE
000807C6 8206 8007 8206 8014        	dc.b		dSnare,	$06,	nRst,	$07,	dSnare,	$06,	nRst,	$14
000807CE                            ;	SetFMVoice	#
000807D0                            ;	AlterVolume	value
000807D0 E602                       	smpsAlterVol	$02
000807D2 8107 802E E780 01E7        	dc.b		nC0,	$07,	nRst,	$2E,	smpsNoAttack,	nRst,	$01,	smpsNoAttack
000807DA 8106 8014                  	dc.b		nC0,	$06,	nRst,	$14
000807DE                            ;	SetFMVoice	#
000807E0                            ;	AlterVolume	value
000807E0 E6FE                       	smpsAlterVol	$FE
000807E2 8207 8013                  	dc.b		dSnare,	$07,	nRst,	$13
000807E6                            ;	SetFMVoice	#
000807E8                            ;	AlterVolume	value
000807E8 E602                       	smpsAlterVol	$02
000807EA E780 01E7 8106 802E        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0,	$06,	nRst,	$2E
000807F2 E780 01E7 8106 8006        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0,	$06,	nRst,	$06
000807FA                            ;	SetFMVoice	#
000807FC                            ;	AlterVolume	value
000807FC E6FE                       	smpsAlterVol	$FE
000807FE E780 01E7 8206 8007        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	dSnare,	$06,	nRst,	$07
00080806 8206 8014                  	dc.b		dSnare,	$06,	nRst,	$14
0008080A                            ;	SetFMVoice	#
0008080C                            ;	AlterVolume	value
0008080C E602                       	smpsAlterVol	$02
0008080E 8107 802E 8106 8014        	dc.b		nC0,	$07,	nRst,	$2E,	nC0,	$06,	nRst,	$14
00080816                            ;	SetFMVoice	#
00080818                            ;	AlterVolume	value
00080818 E6F5                       	smpsAlterVol	$F5
0008081A E780 01E7 8204 8009        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	dSnare,	$04,	nRst,	$09
00080822 8204 8009                  	dc.b		dSnare,	$04,	nRst,	$09
00080826                            ;	SetFMVoice	#
00080828                            ;	AlterVolume	value
00080828 E60B                       	smpsAlterVol	$0B
0008082A 8107 8006                  	dc.b		nC0,	$07,	nRst,	$06
0008082E                            ;	SetFMVoice	#
00080830                            ;	AlterVolume	value
00080830 E6F5                       	smpsAlterVol	$F5
00080832 E780 01E7 8104 8008        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0,	$04,	nRst,	$08
0008083A E780 01E7 8104 8009        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0,	$04,	nRst,	$09
00080842 8204 8009                  	dc.b		dSnare,	$04,	nRst,	$09
00080846                            ;	SetFMVoice	#
00080848                            ;	AlterVolume	value
00080848 E60B                       	smpsAlterVol	$0B
0008084A 8106 8007                  	dc.b		nC0,	$06,	nRst,	$07
0008084E                            ;	SetFMVoice	#
00080850                            ;	AlterVolume	value
00080850 E6F5                       	smpsAlterVol	$F5
00080852 8204 8009 E780 01E7        	dc.b		dSnare,	$04,	nRst,	$09,	smpsNoAttack,	nRst,	$01,	smpsNoAttack
0008085A 8204 8008 E780 01E7        	dc.b		dSnare,	$04,	nRst,	$08,	smpsNoAttack,	nRst,	$01,	smpsNoAttack
00080862 8204 8009                  	dc.b		dSnare,	$04,	nRst,	$09
00080866                            ;	SetFMVoice	#
00080868                            ;	AlterVolume	value
00080868 E60B                       	smpsAlterVol	$0B
0008086A 8106 8007                  	dc.b		nC0,	$06,	nRst,	$07
0008086E                            ;	SetFMVoice	#
00080870                            ;	AlterVolume	value
00080870 E6F5                       	smpsAlterVol	$F5
00080872 8204 8009 8204 8009        	dc.b		dSnare,	$04,	nRst,	$09,	dSnare,	$04,	nRst,	$09
0008087A E780 01E7 8204 8009        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	dSnare,	$04,	nRst,	$09
00080882                            ;	SetFMVoice	#
00080884                            ;	AlterVolume	value
00080884 E60B                       	smpsAlterVol	$0B
00080886 8107 8006                  	dc.b		nC0,	$07,	nRst,	$06
0008088A                            ;	SetFMVoice	#
0008088C                            ;	AlterVolume	value
0008088C E6F5                       	smpsAlterVol	$F5
0008088E 8205 8008 E780 01E7        	dc.b		dSnare,	$05,	nRst,	$08,	smpsNoAttack,	nRst,	$01,	smpsNoAttack
00080896 8204 8008                  	dc.b		dSnare,	$04,	nRst,	$08
0008089A                            ;	SetFMVoice	#
0008089C E780 01                    	dc.b		smpsNoAttack,	nRst,	$01
0008089F                            ;	SetFMVoice	#
000808A1 8204 8009                  	dc.b		dSnare,	$04,	nRst,	$09
000808A5                            ;	SetFMVoice	#
000808A7                            ;	AlterVolume	value
000808A7 E60B                       	smpsAlterVol	$0B
000808A9 8106 8007                  	dc.b		nC0,	$06,	nRst,	$07
000808AD                            ;	SetFMVoice	#
000808AF                            ;	AlterVolume	value
000808AF E6F5                       	smpsAlterVol	$F5
000808B1 8204 8009 8104 8009        	dc.b		dSnare,	$04,	nRst,	$09,	nC0,	$04,	nRst,	$09
000808B9 8205 8008                  	dc.b		dSnare,	$05,	nRst,	$08
000808BD                            ;	SetFMVoice	#
000808BF                            ;	AlterVolume	value
000808BF E60B                       	smpsAlterVol	$0B
000808C1 E780 01E7 8106 8007        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0,	$06,	nRst,	$07
000808C9                            ;	SetFMVoice	#
000808CB                            ;	AlterVolume	value
000808CB E6F5                       	smpsAlterVol	$F5
000808CD 8204 8009 8104 8009        	dc.b		dSnare,	$04,	nRst,	$09,	nC0,	$04,	nRst,	$09
000808D5 8204 8009                  	dc.b		dSnare,	$04,	nRst,	$09
000808D9                            ;	SetFMVoice	#
000808DB                            ;	AlterVolume	value
000808DB E60B                       	smpsAlterVol	$0B
000808DD E780 01E7 8106 8006        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0,	$06,	nRst,	$06
000808E5                            ;	SetFMVoice	#
000808E7                            ;	AlterVolume	value
000808E7 E6FE                       	smpsAlterVol	$FE
000808E9 E780 01                    	dc.b		smpsNoAttack,	nRst,	$01
000808EC                            ;	SetFMVoice	#
000808EE                            ;	AlterVolume	value
000808EE E6F7                       	smpsAlterVol	$F7
000808F0 8204 8009 8205 8008        	dc.b		dSnare,	$04,	nRst,	$09,	dSnare,	$05,	nRst,	$08
000808F8 E780 01E7 8204 8009        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	dSnare,	$04,	nRst,	$09
00080900                            ;	SetFMVoice	#
00080902                            ;	AlterVolume	value
00080902 E60B                       	smpsAlterVol	$0B
00080904 8106 8007                  	dc.b		nC0,	$06,	nRst,	$07
00080908                            ;	SetFMVoice	#
0008090A                            ;	AlterVolume	value
0008090A E6F5                       	smpsAlterVol	$F5
0008090C 8204 8009 E780 01E7        	dc.b		dSnare,	$04,	nRst,	$09,	smpsNoAttack,	nRst,	$01,	smpsNoAttack
00080914 8203 8009 8205 8008        	dc.b		dSnare,	$03,	nRst,	$09,	dSnare,	$05,	nRst,	$08
0008091C                            ;	SetFMVoice	#
0008091E                            ;	AlterVolume	value
0008091E E60B                       	smpsAlterVol	$0B
00080920 E780 01E7 8106 8006        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0,	$06,	nRst,	$06
00080928                            ;	SetFMVoice	#
0008092A                            ;	AlterVolume	value
0008092A E6FE                       	smpsAlterVol	$FE
0008092C E780 01                    	dc.b		smpsNoAttack,	nRst,	$01
0008092F                            ;	SetFMVoice	#
00080931                            ;	AlterVolume	value
00080931 E6F7                       	smpsAlterVol	$F7
00080933 8204 8009 8204 8009        	dc.b		dSnare,	$04,	nRst,	$09,	dSnare,	$04,	nRst,	$09
0008093B 8204 8009                  	dc.b		dSnare,	$04,	nRst,	$09
0008093F                            ;	SetFMVoice	#
00080941                            ;	AlterVolume	value
00080941 E60B                       	smpsAlterVol	$0B
00080943 8107 8006                  	dc.b		nC0,	$07,	nRst,	$06
00080947                            ;	SetFMVoice	#
00080949                            ;	AlterVolume	value
00080949 E6F5                       	smpsAlterVol	$F5
0008094B E780 01E7 8204 8009        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	dSnare,	$04,	nRst,	$09
00080953 8204 8009 8204 8009        	dc.b		dSnare,	$04,	nRst,	$09,	dSnare,	$04,	nRst,	$09
0008095B                            ;	SetFMVoice	#
0008095D                            ;	AlterVolume	value
0008095D E60B                       	smpsAlterVol	$0B
0008095F 8106 8007                  	dc.b		nC0,	$06,	nRst,	$07
00080963                            ;	SetFMVoice	#
00080965                            ;	AlterVolume	value
00080965 E6F5                       	smpsAlterVol	$F5
00080967 E780 01E7 8204 8009        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	dSnare,	$04,	nRst,	$09
0008096F 8205 8009 8204 8009        	dc.b		dSnare,	$05,	nRst,	$09,	dSnare,	$04,	nRst,	$09
00080977                            ;	SetFMVoice	#
00080979                            ;	AlterVolume	value
00080979 E60B                       	smpsAlterVol	$0B
0008097B 8106 8007                  	dc.b		nC0,	$06,	nRst,	$07
0008097F                            ;	SetFMVoice	#
00080981                            ;	AlterVolume	value
00080981 E6F5                       	smpsAlterVol	$F5
00080983 8204 8009 E780 01E7        	dc.b		dSnare,	$04,	nRst,	$09,	smpsNoAttack,	nRst,	$01,	smpsNoAttack
0008098B 8204 8008 E780 01E7        	dc.b		dSnare,	$04,	nRst,	$08,	smpsNoAttack,	nRst,	$01,	smpsNoAttack
00080993 8204 8009                  	dc.b		dSnare,	$04,	nRst,	$09
00080997                            ;	SetFMVoice	#
00080999                            ;	AlterVolume	value
00080999 E60B                       	smpsAlterVol	$0B
0008099B 8106 8007                  	dc.b		nC0,	$06,	nRst,	$07
0008099F                            ;	SetFMVoice	#
000809A1                            ;	AlterVolume	value
000809A1 E6F5                       	smpsAlterVol	$F5
000809A3 8204 8009 8204 8009        	dc.b		dSnare,	$04,	nRst,	$09,	dSnare,	$04,	nRst,	$09
000809AB 8204 8009                  	dc.b		dSnare,	$04,	nRst,	$09
000809AF                            ;	SetFMVoice	#
000809B1 E780 01                    	dc.b		smpsNoAttack,	nRst,	$01
000809B4                            ;	SetFMVoice	#
000809B6                            ;	AlterVolume	value
000809B6 E60B                       	smpsAlterVol	$0B
000809B8 8106 8007                  	dc.b		nC0,	$06,	nRst,	$07
000809BC                            ;	SetFMVoice	#
000809BE                            ;	AlterVolume	value
000809BE E6F5                       	smpsAlterVol	$F5
000809C0 8204 8009 E780 01E7        	dc.b		dSnare,	$04,	nRst,	$09,	smpsNoAttack,	nRst,	$01,	smpsNoAttack
000809C8 8204 8008 E780 01E7        	dc.b		dSnare,	$04,	nRst,	$08,	smpsNoAttack,	nRst,	$01,	smpsNoAttack
000809D0 8204 8009                  	dc.b		dSnare,	$04,	nRst,	$09
000809D4                            ;	SetFMVoice	#
000809D6                            ;	AlterVolume	value
000809D6 E60B                       	smpsAlterVol	$0B
000809D8 8106 8007                  	dc.b		nC0,	$06,	nRst,	$07
000809DC                            ;	SetFMVoice	#
000809DE                            ;	AlterVolume	value
000809DE E6F5                       	smpsAlterVol	$F5
000809E0 8204 8009 8104 8009        	dc.b		dSnare,	$04,	nRst,	$09,	nC0,	$04,	nRst,	$09
000809E8 8205 8008                  	dc.b		dSnare,	$05,	nRst,	$08
000809EC                            ;	SetFMVoice	#
000809EE                            ;	AlterVolume	value
000809EE E60B                       	smpsAlterVol	$0B
000809F0 E780 01E7 8106 8007        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0,	$06,	nRst,	$07
000809F8                            ;	SetFMVoice	#
000809FA                            ;	AlterVolume	value
000809FA E6F5                       	smpsAlterVol	$F5
000809FC 8204 8009 8204 8009        	dc.b		dSnare,	$04,	nRst,	$09,	dSnare,	$04,	nRst,	$09
00080A04 8204 8009 8205 8008        	dc.b		dSnare,	$04,	nRst,	$09,	dSnare,	$05,	nRst,	$08
00080A0C E780 01E7 8204 8009        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	dSnare,	$04,	nRst,	$09
00080A14 8204 8009 8204 8009        	dc.b		dSnare,	$04,	nRst,	$09,	dSnare,	$04,	nRst,	$09
00080A1C 8204 8009 E780 01E7        	dc.b		dSnare,	$04,	nRst,	$09,	smpsNoAttack,	nRst,	$01,	smpsNoAttack
00080A24 8204 8009 8204 8009        	dc.b		dSnare,	$04,	nRst,	$09,	dSnare,	$04,	nRst,	$09
00080A2C 8204 8009 E780 01E7        	dc.b		dSnare,	$04,	nRst,	$09,	smpsNoAttack,	nRst,	$01,	smpsNoAttack
00080A34 8204 8008 E780 01E7        	dc.b		dSnare,	$04,	nRst,	$08,	smpsNoAttack,	nRst,	$01,	smpsNoAttack
00080A3C 8204 8009 8204 8009        	dc.b		dSnare,	$04,	nRst,	$09,	dSnare,	$04,	nRst,	$09
00080A44 8204 8009                  	dc.b		dSnare,	$04,	nRst,	$09
00080A48                            ;	SetFMVoice	#
00080A4A                            ;	AlterVolume	value
00080A4A E60B                       	smpsAlterVol	$0B
00080A4C 8107 8006                  	dc.b		nC0,	$07,	nRst,	$06
00080A50                            ;	SetFMVoice	#
00080A52                            ;	AlterVolume	value
00080A52 E6F5                       	smpsAlterVol	$F5
00080A54 E780 01E7 8204 8008        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	dSnare,	$04,	nRst,	$08
00080A5C E780 01E7 8204 8009        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	dSnare,	$04,	nRst,	$09
00080A64 8204 8009 8204 8009        	dc.b		dSnare,	$04,	nRst,	$09,	dSnare,	$04,	nRst,	$09
00080A6C 8204 8009 E780 01E7        	dc.b		dSnare,	$04,	nRst,	$09,	smpsNoAttack,	nRst,	$01,	smpsNoAttack
00080A74 8204 8008                  	dc.b		dSnare,	$04,	nRst,	$08
00080A78                            ;	SetFMVoice	#
00080A7A E780 01                    	dc.b		smpsNoAttack,	nRst,	$01
00080A7D                            ;	SetFMVoice	#
00080A7F 8204 8009 8205 8008        	dc.b		dSnare,	$04,	nRst,	$09,	dSnare,	$05,	nRst,	$08
00080A87 E780 01E7 8204 8008        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	dSnare,	$04,	nRst,	$08
00080A8F                            ;	SetFMVoice	#
00080A91 E780 01                    	dc.b		smpsNoAttack,	nRst,	$01
00080A94                            ;	SetFMVoice	#
00080A96 8204 8009 8204 8009        	dc.b		dSnare,	$04,	nRst,	$09,	dSnare,	$04,	nRst,	$09
00080A9E 8204 8009 8204 8009        	dc.b		dSnare,	$04,	nRst,	$09,	dSnare,	$04,	nRst,	$09
00080AA6 8205 8008                  	dc.b		dSnare,	$05,	nRst,	$08
00080AAA                            ;	SetFMVoice	#
00080AAC E780 01                    	dc.b		smpsNoAttack,	nRst,	$01
00080AAF                            ;	SetFMVoice	#
00080AB1 8204 8009                  	dc.b		dSnare,	$04,	nRst,	$09
00080AB5                            ;	SetFMVoice	#
00080AB7                            ;	AlterVolume	value
00080AB7 E60B                       	smpsAlterVol	$0B
00080AB9 8106 8007                  	dc.b		nC0,	$06,	nRst,	$07
00080ABD                            ;	SetFMVoice	#
00080ABF                            ;	AlterVolume	value
00080ABF E6F5                       	smpsAlterVol	$F5
00080AC1 8204 8016                  	dc.b		dSnare,	$04,	nRst,	$16
00080AC5                            ;	SetFMVoice	#
00080AC7                            ;	AlterVolume	value
00080AC7 E60B                       	smpsAlterVol	$0B
00080AC9 E780 01E7 8106 8007        	dc.b		smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0,	$06,	nRst,	$07
00080AD1 8106 8007 8106 8007        	dc.b		nC0,	$06,	nRst,	$07,	nC0,	$06,	nRst,	$07
00080AD9 8106 803C 8106 8007        	dc.b		nC0,	$06,	nRst,	$3C,	nC0,	$06,	nRst,	$07
00080AE1 8180 06E7 8001 E781        	dc.b		nC0,	nRst,	$06,	smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0
00080AE9 0680 06E7 8001 E781        	dc.b		$06,	nRst,	$06,	smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0
00080AF1 0680 2EE7 8001 E781        	dc.b		$06,	nRst,	$2E,	smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0
00080AF9 0680 1481 0680 1481        	dc.b		$06,	nRst,	$14,	nC0,	$06,	nRst,	$14,	nC0
00080B01 0680 07E7 8001 E781        	dc.b		$06,	nRst,	$07,	smpsNoAttack,	nRst,	$01,	smpsNoAttack,	nC0
00080B09 0680 06                    	dc.b		$06,	nRst,	$06
00080B0C                            ;	SetFMVoice	#
00080B0E E780 01                    	dc.b		smpsNoAttack,	nRst,	$01
00080B11                            ;	SetFMVoice	#
00080B13 8106 80                    	dc.b		nC0,	$06,	nRst
00080B16                            ;	SetFMVoice	#
00080B18 E780 01                    	dc.b		smpsNoAttack,	nRst,	$01
00080B1B                            ;	SetFMVoice	#
00080B1D 8106 8007 8106 8007        	dc.b		nC0,	$06,	nRst,	$07,	nC0,	$06,	nRst,	$07
00080B25 8106 8007 8180 13E7        	dc.b		nC0,	$06,	nRst,	$07,	nC0,	nRst,	$13,	smpsNoAttack
00080B2D 8001 E781 0681 07          	dc.b		nRst,	$01,	smpsNoAttack,	nC0,	$06,	nC0,	$07
00080B34                            ;	SetFMVoice	#
00080B36                            ;	AlterVolume	value
00080B36 E6FC                       	smpsAlterVol	$FC
00080B38 8206 8107                  	dc.b		dSnare,	$06,	nC0,	$07
00080B3C                            ;	SetFMVoice	#
00080B3E                            ;	AlterVolume	value
00080B3E E604                       	smpsAlterVol	$04
00080B40 8181 06                    	dc.b		nC0,	nC0,	$06
00080B43                            ;	SetFMVoice	#
00080B45                            ;	AlterVolume	value
00080B45 E6FC                       	smpsAlterVol	$FC
00080B47 8207 8106                  	dc.b		dSnare,	$07,	nC0,	$06
00080B4B                            ;	SetFMVoice	#
00080B4D                            ;	AlterVolume	value
00080B4D E604                       	smpsAlterVol	$04
00080B4F E781 01E7 8106 8007        	dc.b		smpsNoAttack,	nC0,	$01,	smpsNoAttack,	nC0,	$06,	nRst,	$07
00080B57                            ;	Panning		direction	amsfms
00080B57 E0C0                       	smpsPan		panCentre,	$00
00080B59                            ;	JumpTo		location
00080B59 F6FA 61                    	smpsJump	Credits_Jump03
00080B5C                            
00080B5C                            ; FM4 Data
00080B5C                            Credits_FM4:
00080B5C                            ;	SetFMVoice	#
00080B5E                            ;	AlterVolume	value
00080B5E E67F                       	smpsAlterVol	$7F
00080B60                            ;	Panning		direction	amsfms
00080B60 E0C0                       	smpsPan		panCentre,	$00
00080B62 8001                       	dc.b		nRst,	$01
00080B64                            ;	SetFMVoice	#
00080B66                            ;	AlterVolume	value
00080B66 E691                       	smpsAlterVol	$91
00080B68                            ;	AlterNotes	value
00080B68 E10B                       	smpsAlterNote	$0B
00080B6A BE1B BE06 BE07             	dc.b		nCs5,	$1B,	nCs5,	$06,	nCs5,	$07
00080B70                            ;	AlterNotes	value
00080B70 E100                       	smpsAlterNote	$00
00080B72 BB06 BC07                  	dc.b		nBb4,	$06,	nB4,	$07
00080B76                            ;	AlterNotes	value
00080B76 E10B                       	smpsAlterNote	$0B
00080B78 BE4F                       	dc.b		nCs5,	$4F
00080B7A                            ;	AlterNotes	value
00080B7A E100                       	smpsAlterNote	$00
00080B7C C207 C206                  	dc.b		nF5,	$07,	nF5,	$06
00080B80                            ;	AlterNotes	value
00080B80 E10B                       	smpsAlterNote	$0B
00080B82 BE07                       	dc.b		nCs5,	$07
00080B84                            ;	AlterNotes	value
00080B84 E100                       	smpsAlterNote	$00
00080B86 C0C2 34                    	dc.b		nEb5,	nF5,	$34
00080B89                            ;	AlterNotes	value
00080B89 E10A                       	smpsAlterNote	$0A
00080B8B C335                       	dc.b		nFs5,	$35
00080B8D                            ;	AlterNotes	value
00080B8D E100                       	smpsAlterNote	$00
00080B8F BC1B                       	dc.b		nB4,	$1B
00080B91                            ;	AlterNotes	value
00080B91 E10A                       	smpsAlterNote	$0A
00080B93 C31A 8001 C31A             	dc.b		nFs5,	$1A,	nRst,	$01,	nFs5,	$1A
00080B99                            ;	AlterNotes	value
00080B99 E100                       	smpsAlterNote	$00
00080B9B C2C0 1B                    	dc.b		nF5,	nEb5,	$1B
00080B9E                            ;	AlterNotes	value
00080B9E E10B                       	smpsAlterNote	$0B
00080BA0 BE1A                       	dc.b		nCs5,	$1A
00080BA2                            ;	AlterNotes	value
00080BA2 E10A                       	smpsAlterNote	$0A
00080BA4 C31B                       	dc.b		nFs5,	$1B
00080BA6                            ;	AlterNotes	value
00080BA6 E109                       	smpsAlterNote	$09
00080BA8 BF1A                       	dc.b		nD5,	$1A
00080BAA                            ;	AlterNotes	value
00080BAA E10A                       	smpsAlterNote	$0A
00080BAC C31B                       	dc.b		nFs5,	$1B
00080BAE                            ;	AlterNotes	value
00080BAE E10D                       	smpsAlterNote	$0D
00080BB0 C61A                       	dc.b		nA5,	$1A
00080BB2                            ;	AlterNotes	value
00080BB2 E109                       	smpsAlterNote	$09
00080BB4 C580 01                    	dc.b		nAb5,	nRst,	$01
00080BB7                            ;	AlterNotes	value
00080BB7 E10B                       	smpsAlterNote	$0B
00080BB9 C11A C1                    	dc.b		nE5,	$1A,	nE5
00080BBC                            ;	AlterNotes	value
00080BBC E100                       	smpsAlterNote	$00
00080BBE C80A C804 C803 C8C8        	dc.b		nB5,	$0A,	nB5,	$04,	nB5,	$03,	nB5,	nB5
00080BC6 C804 C80E                  	dc.b		nB5,	$04,	nB5,	$0E
00080BCA                            Credits_Jump04:
00080BCA E7C8 5C                    	dc.b		smpsNoAttack,	nB5,	$5C
00080BCD                            ;	AlterNotes	value
00080BCD E109                       	smpsAlterNote	$09
00080BCF C569 8001                  	dc.b		nAb5,	$69,	nRst,	$01
00080BD3                            ;	AlterNotes	value
00080BD3 E10A                       	smpsAlterNote	$0A
00080BD5 C369                       	dc.b		nFs5,	$69
00080BD7                            ;	AlterNotes	value
00080BD7 E109                       	smpsAlterNote	$09
00080BD9 C51B                       	dc.b		nAb5,	$1B
00080BDB                            ;	AlterNotes	value
00080BDB E10A                       	smpsAlterNote	$0A
00080BDD C31A                       	dc.b		nFs5,	$1A
00080BDF                            ;	AlterNotes	value
00080BDF E109                       	smpsAlterNote	$09
00080BE1 C51B                       	dc.b		nAb5,	$1B
00080BE3                            ;	AlterNotes	value
00080BE3 E100                       	smpsAlterNote	$00
00080BE5 C8                         	dc.b		nB5
00080BE6                            ;	AlterNotes	value
00080BE6 E10D                       	smpsAlterNote	$0D
00080BE8 C669                       	dc.b		nA5,	$69
00080BEA                            ;	AlterNotes	value
00080BEA E109                       	smpsAlterNote	$09
00080BEC C56A                       	dc.b		nAb5,	$6A
00080BEE                            ;	AlterNotes	value
00080BEE E10A                       	smpsAlterNote	$0A
00080BF0 C335                       	dc.b		nFs5,	$35
00080BF2                            ;	AlterNotes	value
00080BF2 E109                       	smpsAlterNote	$09
00080BF4 BF11 BF12                  	dc.b		nD5,	$11,	nD5,	$12
00080BF8                            ;	AlterNotes	value
00080BF8 E10A                       	smpsAlterNote	$0A
00080BFA C3                         	dc.b		nFs5
00080BFB                            ;	AlterNotes	value
00080BFB E109                       	smpsAlterNote	$09
00080BFD C535 C512                  	dc.b		nAb5,	$35,	nAb5,	$12
00080C01                            ;	AlterNotes	value
00080C01 E10A                       	smpsAlterNote	$0A
00080C03 C3                         	dc.b		nFs5
00080C04                            ;	AlterNotes	value
00080C04 E109                       	smpsAlterNote	$09
00080C06 C5                         	dc.b		nAb5
00080C07                            ;	AlterNotes	value
00080C07 E10D                       	smpsAlterNote	$0D
00080C09 C66A                       	dc.b		nA5,	$6A
00080C0B                            ;	AlterNotes	value
00080C0B E10A                       	smpsAlterNote	$0A
00080C0D C369                       	dc.b		nFs5,	$69
00080C0F                            ;	AlterNotes	value
00080C0F E100                       	smpsAlterNote	$00
00080C11 C21A                       	dc.b		nF5,	$1A
00080C13                            ;	AlterNotes	value
00080C13 E10B                       	smpsAlterNote	$0B
00080C15 C11B                       	dc.b		nE5,	$1B
00080C17                            ;	AlterNotes	value
00080C17 E109                       	smpsAlterNote	$09
00080C19 BF                         	dc.b		nD5
00080C1A                            ;	AlterNotes	value
00080C1A E100                       	smpsAlterNote	$00
00080C1C BD1A BC35                  	dc.b		nC5,	$1A,	nB4,	$35
00080C20                            ;	AlterNotes	value
00080C20 E10B                       	smpsAlterNote	$0B
00080C22 C1                         	dc.b		nE5
00080C23                            ;	SetFMVoice	#
00080C25                            ;	AlterVolume	value
00080C25 E60A                       	smpsAlterVol	$0A
00080C27 B20E B20D 80B2 2180        	dc.b		nCs4,	$0E,	nCs4,	$0D,	nRst,	nCs4,	$21,	nRst
00080C2F 07B2 1380 07B2 0DB2        	dc.b		$07,	nCs4,	$13,	nRst,	$07,	nCs4,	$0D,	nCs4
00080C37 80B2 2180 07B2 1480        	dc.b		nRst,	nCs4,	$21,	nRst,	$07,	nCs4,	$14,	nRst
00080C3F 06                         	dc.b		$06
00080C40                            ;	AlterNotes	value
00080C40 E10A                       	smpsAlterNote	$0A
00080C42 B70D B70E 800D B721        	dc.b		nFs4,	$0D,	nFs4,	$0E,	nRst,	$0D,	nFs4,	$21
00080C4A 8007 B714 8006             	dc.b		nRst,	$07,	nFs4,	$14,	nRst,	$06
00080C50                            ;	AlterNotes	value
00080C50 E100                       	smpsAlterNote	$00
00080C52 BC0D BC0E 800D BC21        	dc.b		nB4,	$0D,	nB4,	$0E,	nRst,	$0D,	nB4,	$21
00080C5A 8007 BC13 8007             	dc.b		nRst,	$07,	nB4,	$13,	nRst,	$07
00080C60                            ;	AlterNotes	value
00080C60 E10B                       	smpsAlterNote	$0B
00080C62 B20D B280 0EB2 2080        	dc.b		nCs4,	$0D,	nCs4,	nRst,	$0E,	nCs4,	$20,	nRst
00080C6A 07B2 1480 07B2 0DB2        	dc.b		$07,	nCs4,	$14,	nRst,	$07,	nCs4,	$0D,	nCs4
00080C72 800E B220 8007 B214        	dc.b		nRst,	$0E,	nCs4,	$20,	nRst,	$07,	nCs4,	$14
00080C7A 8007                       	dc.b		nRst,	$07
00080C7C                            ;	AlterNotes	value
00080C7C E10A                       	smpsAlterNote	$0A
00080C7E B70D B70E 800D B721        	dc.b		nFs4,	$0D,	nFs4,	$0E,	nRst,	$0D,	nFs4,	$21
00080C86 8006 B714 8007             	dc.b		nRst,	$06,	nFs4,	$14,	nRst,	$07
00080C8C                            ;	AlterNotes	value
00080C8C E100                       	smpsAlterNote	$00
00080C8E BC0D BC80 BC21 8007        	dc.b		nB4,	$0D,	nB4,	nRst,	nB4,	$21,	nRst,	$07
00080C96 BC13 8008                  	dc.b		nB4,	$13,	nRst,	$08
00080C9A                            ;	AlterNotes	value
00080C9A E109                       	smpsAlterNote	$09
00080C9C B90D B9B9 8001 B920        	dc.b		nAb4,	$0D,	nAb4,	nAb4,	nRst,	$01,	nAb4,	$20
00080CA4 8007 B914 8006 B90D        	dc.b		nRst,	$07,	nAb4,	$14,	nRst,	$06,	nAb4,	$0D
00080CAC 8001 B90D B9B9 2180        	dc.b		nRst,	$01,	nAb4,	$0D,	nAb4,	nAb4,	$21,	nRst
00080CB4 07B9 1480 07               	dc.b		$07,	nAb4,	$14,	nRst,	$07
00080CB9                            ;	AlterNotes	value
00080CB9 E10D                       	smpsAlterNote	$0D
00080CBB BA0D BABA BA21 8007        	dc.b		nA4,	$0D,	nA4,	nA4,	nA4,	$21,	nRst,	$07
00080CC3 BA13 8007 BA0D BABA        	dc.b		nA4,	$13,	nRst,	$07,	nA4,	$0D,	nA4,	nA4
00080CCB 0EBA 2180 07BA 1380        	dc.b		$0E,	nA4,	$21,	nRst,	$07,	nA4,	$13,	nRst
00080CD3 07BA 0DBA BA0E BA20        	dc.b		$07,	nA4,	$0D,	nA4,	nA4,	$0E,	nA4,	$20
00080CDB 8007 BA14 8007             	dc.b		nRst,	$07,	nA4,	$14,	nRst,	$07
00080CE1                            ;	AlterNotes	value
00080CE1 E10B                       	smpsAlterNote	$0B
00080CE3 C10D C1C1 0EC1 2180        	dc.b		nE5,	$0D,	nE5,	nE5,	$0E,	nE5,	$21,	nRst
00080CEB 07C1 1380 07C1 0DC1        	dc.b		$07,	nE5,	$13,	nRst,	$07,	nE5,	$0D,	nE5
00080CF3 0EC1 0DC1 2180 07C1        	dc.b		$0E,	nE5,	$0D,	nE5,	$21,	nRst,	$07,	nE5
00080CFB 1480 06C1 0D80 01C1        	dc.b		$14,	nRst,	$06,	nE5,	$0D,	nRst,	$01,	nE5
00080D03 0DC1 C135 807F 7F7F        	dc.b		$0D,	nE5,	nE5,	$35,	nRst,	$7F,	$7F,	$7F
00080D0B 44                         	dc.b		$44
00080D0C                            ;	AlterNotes	value
00080D0C E10A                       	smpsAlterNote	$0A
00080D0E B707 80B7 0680 07B7        	dc.b		nFs4,	$07,	nRst,	nFs4,	$06,	nRst,	$07,	nFs4
00080D16 0680 07B7 0680 3CB7        	dc.b		$06,	nRst,	$07,	nFs4,	$06,	nRst,	$3C,	nFs4
00080D1E 0680 07B7 8006 B707        	dc.b		$06,	nRst,	$07,	nFs4,	nRst,	$06,	nFs4,	$07
00080D26 8006 B707 8014             	dc.b		nRst,	$06,	nFs4,	$07,	nRst,	$14
00080D2C                            ;	AlterNotes	value
00080D2C E10D                       	smpsAlterNote	$0D
00080D2E C60D                       	dc.b		nA5,	$0D
00080D30                            ;	AlterNotes	value
00080D30 E109                       	smpsAlterNote	$09
00080D32 C580 7F55                  	dc.b		nAb5,	nRst,	$7F,	$55
00080D36                            ;	SetFMVoice	#
00080D38                            ;	AlterVolume	value
00080D38 E6F6                       	smpsAlterVol	$F6
00080D3A C50D                       	dc.b		nAb5,	$0D
00080D3C                            ;	Panning		direction	amsfms
00080D3C E0C0                       	smpsPan		panCentre,	$00
00080D3E                            ;	AlterNotes	value
00080D3E E100                       	smpsAlterNote	$00
00080D40                            ;	JumpTo		location
00080D40 F6FE 88                    	smpsJump	Credits_Jump04
00080D43                            
00080D43                            ; FM5 Data
00080D43                            Credits_FM5:
00080D43                            ;	SetFMVoice	#
00080D45                            ;	AlterVolume	value
00080D45 E67F                       	smpsAlterVol	$7F
00080D47                            ;	Panning		direction	amsfms
00080D47 E0C0                       	smpsPan		panCentre,	$00
00080D49 8001                       	dc.b		nRst,	$01
00080D4B                            ;	SetFMVoice	#
00080D4D                            ;	AlterVolume	value
00080D4D E697                       	smpsAlterVol	$97
00080D4F                            ;	AlterNotes	value
00080D4F E10B                       	smpsAlterNote	$0B
00080D51 CA7F E701 801F             	dc.b		nCs6,	$7F,	smpsNoAttack,	$01,	nRst,	$1F
00080D57                            ;	AlterNotes	value
00080D57 E10A                       	smpsAlterNote	$0A
00080D59 C315 8005                  	dc.b		nFs5,	$15,	nRst,	$05
00080D5D                            ;	AlterNotes	value
00080D5D E100                       	smpsAlterNote	$00
00080D5F C716 8005 C029 800B        	dc.b		nBb5,	$16,	nRst,	$05,	nEb5,	$29,	nRst,	$0B
00080D67 BC2A 800C                  	dc.b		nB4,	$2A,	nRst,	$0C
00080D6B                            ;	AlterNotes	value
00080D6B E10B                       	smpsAlterNote	$0B
00080D6D BE29 800B                  	dc.b		nCs5,	$29,	nRst,	$0B
00080D71                            ;	AlterNotes	value
00080D71 E100                       	smpsAlterNote	$00
00080D73 C016 8005                  	dc.b		nEb5,	$16,	nRst,	$05
00080D77                            ;	AlterNotes	value
00080D77 E10B                       	smpsAlterNote	$0B
00080D79 BE16 8004                  	dc.b		nCs5,	$16,	nRst,	$04
00080D7D                            ;	AlterNotes	value
00080D7D E10A                       	smpsAlterNote	$0A
00080D7F C316 8005                  	dc.b		nFs5,	$16,	nRst,	$05
00080D83                            ;	AlterNotes	value
00080D83 E109                       	smpsAlterNote	$09
00080D85 BF16 8005                  	dc.b		nD5,	$16,	nRst,	$05
00080D89                            ;	AlterNotes	value
00080D89 E10A                       	smpsAlterNote	$0A
00080D8B C315 8005                  	dc.b		nFs5,	$15,	nRst,	$05
00080D8F                            ;	AlterNotes	value
00080D8F E10D                       	smpsAlterNote	$0D
00080D91 C616 8004                  	dc.b		nA5,	$16,	nRst,	$04
00080D95                            ;	AlterNotes	value
00080D95 E109                       	smpsAlterNote	$09
00080D97 C516 8005                  	dc.b		nAb5,	$16,	nRst,	$05
00080D9B                            ;	AlterNotes	value
00080D9B E10B                       	smpsAlterNote	$0B
00080D9D C115 8005 C116 8004        	dc.b		nE5,	$15,	nRst,	$05,	nE5,	$16,	nRst,	$04
00080DA5                            ;	AlterNotes	value
00080DA5 E100                       	smpsAlterNote	$00
00080DA7 C816 8005 C80E             	dc.b		nB5,	$16,	nRst,	$05,	nB5,	$0E
00080DAD                            Credits_Jump05:
00080DAD E7C8 4680 16               	dc.b		smpsNoAttack,	nB5,	$46,	nRst,	$16
00080DB2                            ;	AlterNotes	value
00080DB2 E109                       	smpsAlterNote	$09
00080DB4 C553 8017                  	dc.b		nAb5,	$53,	nRst,	$17
00080DB8                            ;	AlterNotes	value
00080DB8 E10A                       	smpsAlterNote	$0A
00080DBA C353 8016                  	dc.b		nFs5,	$53,	nRst,	$16
00080DBE                            ;	AlterNotes	value
00080DBE E109                       	smpsAlterNote	$09
00080DC0 C580 05                    	dc.b		nAb5,	nRst,	$05
00080DC3                            ;	AlterNotes	value
00080DC3 E10A                       	smpsAlterNote	$0A
00080DC5 C316 8004                  	dc.b		nFs5,	$16,	nRst,	$04
00080DC9                            ;	AlterNotes	value
00080DC9 E10B                       	smpsAlterNote	$0B
00080DCB C116 8005                  	dc.b		nE5,	$16,	nRst,	$05
00080DCF                            ;	AlterNotes	value
00080DCF E100                       	smpsAlterNote	$00
00080DD1 C816 8005                  	dc.b		nB5,	$16,	nRst,	$05
00080DD5                            ;	AlterNotes	value
00080DD5 E10D                       	smpsAlterNote	$0D
00080DD7 C653 8016                  	dc.b		nA5,	$53,	nRst,	$16
00080DDB                            ;	AlterNotes	value
00080DDB E109                       	smpsAlterNote	$09
00080DDD C554 8016                  	dc.b		nAb5,	$54,	nRst,	$16
00080DE1                            ;	AlterNotes	value
00080DE1 E10A                       	smpsAlterNote	$0A
00080DE3 C32A 800B                  	dc.b		nFs5,	$2A,	nRst,	$0B
00080DE7                            ;	AlterNotes	value
00080DE7 E109                       	smpsAlterNote	$09
00080DE9 BF11 BF12                  	dc.b		nD5,	$11,	nD5,	$12
00080DED                            ;	AlterNotes	value
00080DED E10A                       	smpsAlterNote	$0A
00080DEF C3                         	dc.b		nFs5
00080DF0                            ;	AlterNotes	value
00080DF0 E109                       	smpsAlterNote	$09
00080DF2 C529 800C C512             	dc.b		nAb5,	$29,	nRst,	$0C,	nAb5,	$12
00080DF8                            ;	AlterNotes	value
00080DF8 E10A                       	smpsAlterNote	$0A
00080DFA C3                         	dc.b		nFs5
00080DFB                            ;	AlterNotes	value
00080DFB E109                       	smpsAlterNote	$09
00080DFD C5                         	dc.b		nAb5
00080DFE                            ;	AlterNotes	value
00080DFE E10D                       	smpsAlterNote	$0D
00080E00 C653 8017                  	dc.b		nA5,	$53,	nRst,	$17
00080E04                            ;	AlterNotes	value
00080E04 E10A                       	smpsAlterNote	$0A
00080E06 C353 8016                  	dc.b		nFs5,	$53,	nRst,	$16
00080E0A                            ;	AlterNotes	value
00080E0A E100                       	smpsAlterNote	$00
00080E0C C280 04                    	dc.b		nF5,	nRst,	$04
00080E0F                            ;	AlterNotes	value
00080E0F E10B                       	smpsAlterNote	$0B
00080E11 C116 8005                  	dc.b		nE5,	$16,	nRst,	$05
00080E15                            ;	AlterNotes	value
00080E15 E109                       	smpsAlterNote	$09
00080E17 BF16 8005                  	dc.b		nD5,	$16,	nRst,	$05
00080E1B                            ;	AlterNotes	value
00080E1B E100                       	smpsAlterNote	$00
00080E1D BD16 8004 BC2A 800B        	dc.b		nC5,	$16,	nRst,	$04,	nB4,	$2A,	nRst,	$0B
00080E25                            ;	AlterNotes	value
00080E25 E10B                       	smpsAlterNote	$0B
00080E27 C12A 800B                  	dc.b		nE5,	$2A,	nRst,	$0B
00080E2B                            ;	SetFMVoice	#
00080E2D                            ;	AlterVolume	value
00080E2D E604                       	smpsAlterVol	$04
00080E2F B50E B50D 80B5 2180        	dc.b		nE4,	$0E,	nE4,	$0D,	nRst,	nE4,	$21,	nRst
00080E37 07B5 1380 07               	dc.b		$07,	nE4,	$13,	nRst,	$07
00080E3C                            ;	AlterNotes	value
00080E3C E10A                       	smpsAlterNote	$0A
00080E3E B70D B780 B721 8007        	dc.b		nFs4,	$0D,	nFs4,	nRst,	nFs4,	$21,	nRst,	$07
00080E46 B714 8006                  	dc.b		nFs4,	$14,	nRst,	$06
00080E4A                            ;	AlterNotes	value
00080E4A E100                       	smpsAlterNote	$00
00080E4C BC0D BC0E 800D BC21        	dc.b		nB4,	$0D,	nB4,	$0E,	nRst,	$0D,	nB4,	$21
00080E54 8007 BC14 8007             	dc.b		nRst,	$07,	nB4,	$14,	nRst,	$07
00080E5A                            ;	AlterNotes	value
00080E5A E10B                       	smpsAlterNote	$0B
00080E5C C10C 8001 C10D 80C1        	dc.b		nE5,	$0C,	nRst,	$01,	nE5,	$0D,	nRst,	nE5
00080E64 2180 07C1 1380 07B5        	dc.b		$21,	nRst,	$07,	nE5,	$13,	nRst,	$07,	nE4
00080E6C 0DB5 800E B520 8007        	dc.b		$0D,	nE4,	nRst,	$0E,	nE4,	$20,	nRst,	$07
00080E74 B514 8007                  	dc.b		nE4,	$14,	nRst,	$07
00080E78                            ;	AlterNotes	value
00080E78 E10A                       	smpsAlterNote	$0A
00080E7A B70D B780 0EB7 2080        	dc.b		nFs4,	$0D,	nFs4,	nRst,	$0E,	nFs4,	$20,	nRst
00080E82 07B7 1480 07               	dc.b		$07,	nFs4,	$14,	nRst,	$07
00080E87                            ;	AlterNotes	value
00080E87 E100                       	smpsAlterNote	$00
00080E89 BC0D BC0E 800D BC21        	dc.b		nB4,	$0D,	nB4,	$0E,	nRst,	$0D,	nB4,	$21
00080E91 8006 BC14 8007             	dc.b		nRst,	$06,	nB4,	$14,	nRst,	$07
00080E97                            ;	AlterNotes	value
00080E97 E10B                       	smpsAlterNote	$0B
00080E99 C10D C180 C121 8007        	dc.b		nE5,	$0D,	nE5,	nRst,	nE5,	$21,	nRst,	$07
00080EA1 C113 8008 BE0D BEBE        	dc.b		nE5,	$13,	nRst,	$08,	nCs5,	$0D,	nCs5,	nCs5
00080EA9 0EBE 2080 07BE 1480        	dc.b		$0E,	nCs5,	$20,	nRst,	$07,	nCs5,	$14,	nRst
00080EB1 06BE 0EBE 0DBE BE21        	dc.b		$06,	nCs5,	$0E,	nCs5,	$0D,	nCs5,	nCs5,	$21
00080EB9 8007 BE14 8007 BE0D        	dc.b		nRst,	$07,	nCs5,	$14,	nRst,	$07,	nCs5,	$0D
00080EC1 BEBE BE21 8007 BE13        	dc.b		nCs5,	nCs5,	nCs5,	$21,	nRst,	$07,	nCs5,	$13
00080EC9 8007 BE0D BEBE 0EBE        	dc.b		nRst,	$07,	nCs5,	$0D,	nCs5,	nCs5,	$0E,	nCs5
00080ED1 2180 07BE 1380 07          	dc.b		$21,	nRst,	$07,	nCs5,	$13,	nRst,	$07
00080ED8                            ;	AlterNotes	value
00080ED8 E109                       	smpsAlterNote	$09
00080EDA BF0D BFBF 0EBF 2080        	dc.b		nD5,	$0D,	nD5,	nD5,	$0E,	nD5,	$20,	nRst
00080EE2 07BF 1480 07C5 0DC5        	dc.b		$07,	nD5,	$14,	nRst,	$07,	nAb5,	$0D,	nAb5
00080EEA C50E C521 8007 C514        	dc.b		nAb5,	$0E,	nAb5,	$21,	nRst,	$07,	nAb5,	$14
00080EF2 8006                       	dc.b		nRst,	$06
00080EF4                            ;	AlterNotes	value
00080EF4 E10D                       	smpsAlterNote	$0D
00080EF6 C60D C60E C60D C621        	dc.b		nA5,	$0D,	nA5,	$0E,	nA5,	$0D,	nA5,	$21
00080EFE 8007 C614 8007 C60D        	dc.b		nRst,	$07,	nA5,	$14,	nRst,	$07,	nA5,	$0D
00080F06 C6C6 C635 800D             	dc.b		nA5,	nA5,	nA5,	$35,	nRst,	$0D
00080F0C                            ;	SetFMVoice	#
00080F0E                            ;	AlterVolume	value
00080F0E E6FC                       	smpsAlterVol	$FC
00080F10 E780 06                    	dc.b		smpsNoAttack,	nRst,	$06
00080F13                            ;	AlterNotes	value
00080F13 E109                       	smpsAlterNote	$09
00080F15 BF05 8002                  	dc.b		nD5,	$05,	nRst,	$02
00080F19                            ;	AlterNotes	value
00080F19 E10A                       	smpsAlterNote	$0A
00080F1B C304 8003                  	dc.b		nFs5,	$04,	nRst,	$03
00080F1F                            ;	AlterNotes	value
00080F1F E10D                       	smpsAlterNote	$0D
00080F21 C604 8002                  	dc.b		nA5,	$04,	nRst,	$02
00080F25                            ;	AlterNotes	value
00080F25 E109                       	smpsAlterNote	$09
00080F27 CB05 8002                  	dc.b		nD6,	$05,	nRst,	$02
00080F2B                            ;	AlterNotes	value
00080F2B E10D                       	smpsAlterNote	$0D
00080F2D C604 8002                  	dc.b		nA5,	$04,	nRst,	$02
00080F31                            ;	AlterNotes	value
00080F31 E10A                       	smpsAlterNote	$0A
00080F33 C305 8002                  	dc.b		nFs5,	$05,	nRst,	$02
00080F37                            ;	AlterNotes	value
00080F37 E109                       	smpsAlterNote	$09
00080F39 BF04 8009 BF05 8002        	dc.b		nD5,	$04,	nRst,	$09,	nD5,	$05,	nRst,	$02
00080F41                            ;	AlterNotes	value
00080F41 E10A                       	smpsAlterNote	$0A
00080F43 C304 8002                  	dc.b		nFs5,	$04,	nRst,	$02
00080F47                            ;	AlterNotes	value
00080F47 E10D                       	smpsAlterNote	$0D
00080F49 C605 8002                  	dc.b		nA5,	$05,	nRst,	$02
00080F4D                            ;	AlterNotes	value
00080F4D E109                       	smpsAlterNote	$09
00080F4F CB04 8003                  	dc.b		nD6,	$04,	nRst,	$03
00080F53                            ;	AlterNotes	value
00080F53 E10D                       	smpsAlterNote	$0D
00080F55 C604 8002                  	dc.b		nA5,	$04,	nRst,	$02
00080F59                            ;	AlterNotes	value
00080F59 E10A                       	smpsAlterNote	$0A
00080F5B C305 8002                  	dc.b		nFs5,	$05,	nRst,	$02
00080F5F                            ;	AlterNotes	value
00080F5F E109                       	smpsAlterNote	$09
00080F61 BF05 8009                  	dc.b		nD5,	$05,	nRst,	$09
00080F65                            ;	AlterNotes	value
00080F65 E10B                       	smpsAlterNote	$0B
00080F67 C104 8002                  	dc.b		nE5,	$04,	nRst,	$02
00080F6B                            ;	AlterNotes	value
00080F6B E109                       	smpsAlterNote	$09
00080F6D C504 8003                  	dc.b		nAb5,	$04,	nRst,	$03
00080F71                            ;	AlterNotes	value
00080F71 E100                       	smpsAlterNote	$00
00080F73 C804 8002                  	dc.b		nB5,	$04,	nRst,	$02
00080F77                            ;	AlterNotes	value
00080F77 E10B                       	smpsAlterNote	$0B
00080F79 CD05 8002                  	dc.b		nE6,	$05,	nRst,	$02
00080F7D                            ;	AlterNotes	value
00080F7D E100                       	smpsAlterNote	$00
00080F7F C804 8003                  	dc.b		nB5,	$04,	nRst,	$03
00080F83                            ;	AlterNotes	value
00080F83 E109                       	smpsAlterNote	$09
00080F85 C504 8002                  	dc.b		nAb5,	$04,	nRst,	$02
00080F89                            ;	AlterNotes	value
00080F89 E10B                       	smpsAlterNote	$0B
00080F8B C104 8009 C105 8002        	dc.b		nE5,	$04,	nRst,	$09,	nE5,	$05,	nRst,	$02
00080F93                            ;	AlterNotes	value
00080F93 E109                       	smpsAlterNote	$09
00080F95 C504 8002                  	dc.b		nAb5,	$04,	nRst,	$02
00080F99                            ;	AlterNotes	value
00080F99 E100                       	smpsAlterNote	$00
00080F9B C805 8002                  	dc.b		nB5,	$05,	nRst,	$02
00080F9F                            ;	AlterNotes	value
00080F9F E10B                       	smpsAlterNote	$0B
00080FA1 CD04 8003 CD04 8002        	dc.b		nE6,	$04,	nRst,	$03,	nE6,	$04,	nRst,	$02
00080FA9                            ;	AlterNotes	value
00080FA9 E109                       	smpsAlterNote	$09
00080FAB C505 8002                  	dc.b		nAb5,	$05,	nRst,	$02
00080FAF                            ;	AlterNotes	value
00080FAF E10B                       	smpsAlterNote	$0B
00080FB1 C104 8009                  	dc.b		nE5,	$04,	nRst,	$09
00080FB5                            ;	AlterNotes	value
00080FB5 E10D                       	smpsAlterNote	$0D
00080FB7 C605 8002                  	dc.b		nA5,	$05,	nRst,	$02
00080FBB                            ;	AlterNotes	value
00080FBB E10B                       	smpsAlterNote	$0B
00080FBD CA04 8002 CD05 8002        	dc.b		nCs6,	$04,	nRst,	$02,	nE6,	$05,	nRst,	$02
00080FC5                            ;	AlterNotes	value
00080FC5 E10D                       	smpsAlterNote	$0D
00080FC7 D204 8002                  	dc.b		nA6,	$04,	nRst,	$02
00080FCB                            ;	AlterNotes	value
00080FCB E10B                       	smpsAlterNote	$0B
00080FCD CD05 8002 CA04 8003        	dc.b		nE6,	$05,	nRst,	$02,	nCs6,	$04,	nRst,	$03
00080FD5                            ;	AlterNotes	value
00080FD5 E10D                       	smpsAlterNote	$0D
00080FD7 C604 8009 C604 8003        	dc.b		nA5,	$04,	nRst,	$09,	nA5,	$04,	nRst,	$03
00080FDF                            ;	AlterNotes	value
00080FDF E10B                       	smpsAlterNote	$0B
00080FE1 CA04 8003 CD04 8002        	dc.b		nCs6,	$04,	nRst,	$03,	nE6,	$04,	nRst,	$02
00080FE9                            ;	AlterNotes	value
00080FE9 E10D                       	smpsAlterNote	$0D
00080FEB D205 8002                  	dc.b		nA6,	$05,	nRst,	$02
00080FEF                            ;	AlterNotes	value
00080FEF E10B                       	smpsAlterNote	$0B
00080FF1 CD04 8003 CA04 8002        	dc.b		nE6,	$04,	nRst,	$03,	nCs6,	$04,	nRst,	$02
00080FF9                            ;	AlterNotes	value
00080FF9 E10D                       	smpsAlterNote	$0D
00080FFB C604 8009                  	dc.b		nA5,	$04,	nRst,	$09
00080FFF                            ;	AlterNotes	value
00080FFF E10B                       	smpsAlterNote	$0B
00081001 BE04 8003                  	dc.b		nCs5,	$04,	nRst,	$03
00081005                            ;	AlterNotes	value
00081005 E10A                       	smpsAlterNote	$0A
00081007 C304 8002                  	dc.b		nFs5,	$04,	nRst,	$02
0008100B                            ;	AlterNotes	value
0008100B E10D                       	smpsAlterNote	$0D
0008100D C605 8002                  	dc.b		nA5,	$05,	nRst,	$02
00081011                            ;	AlterNotes	value
00081011 E10B                       	smpsAlterNote	$0B
00081013 CA04 8003                  	dc.b		nCs6,	$04,	nRst,	$03
00081017                            ;	AlterNotes	value
00081017 E10D                       	smpsAlterNote	$0D
00081019 C604 8002                  	dc.b		nA5,	$04,	nRst,	$02
0008101D                            ;	AlterNotes	value
0008101D E10A                       	smpsAlterNote	$0A
0008101F C304 8003                  	dc.b		nFs5,	$04,	nRst,	$03
00081023                            ;	AlterNotes	value
00081023 E10B                       	smpsAlterNote	$0B
00081025 BE04 8009 BE04 8003        	dc.b		nCs5,	$04,	nRst,	$09,	nCs5,	$04,	nRst,	$03
0008102D                            ;	AlterNotes	value
0008102D E10A                       	smpsAlterNote	$0A
0008102F C304 8002                  	dc.b		nFs5,	$04,	nRst,	$02
00081033                            ;	AlterNotes	value
00081033 E10D                       	smpsAlterNote	$0D
00081035 C605 8002                  	dc.b		nA5,	$05,	nRst,	$02
00081039                            ;	AlterNotes	value
00081039 E10B                       	smpsAlterNote	$0B
0008103B CA04 8002 CA05 8002        	dc.b		nCs6,	$04,	nRst,	$02,	nCs6,	$05,	nRst,	$02
00081043                            ;	AlterNotes	value
00081043 E10A                       	smpsAlterNote	$0A
00081045 C304 8002                  	dc.b		nFs5,	$04,	nRst,	$02
00081049                            ;	AlterNotes	value
00081049 E10B                       	smpsAlterNote	$0B
0008104B BE05 8002                  	dc.b		nCs5,	$05,	nRst,	$02
0008104F                            ;	SetFMVoice	#
00081051                            ;	AlterVolume	value
00081051 E604                       	smpsAlterVol	$04
00081053 E780 0D                    	dc.b		smpsNoAttack,	nRst,	$0D
00081056                            ;	AlterNotes	value
00081056 E10D                       	smpsAlterNote	$0D
00081058 BA07 80BA 0680 07BA        	dc.b		nA4,	$07,	nRst,	nA4,	$06,	nRst,	$07,	nA4
00081060 0680 07BA 0680 3CBA        	dc.b		$06,	nRst,	$07,	nA4,	$06,	nRst,	$3C,	nA4
00081068 0680 07BA 8006 BA07        	dc.b		$06,	nRst,	$07,	nA4,	nRst,	$06,	nA4,	$07
00081070 8006 BA07 807F 7F04        	dc.b		nRst,	$06,	nA4,	$07,	nRst,	$7F,	$7F,	$04
00081078                            ;	SetFMVoice	#
0008107A                            ;	AlterVolume	value
0008107A E6FC                       	smpsAlterVol	$FC
0008107C BA0D                       	dc.b		nA4,	$0D
0008107E                            ;	Panning		direction	amsfms
0008107E E0C0                       	smpsPan		panCentre,	$00
00081080                            ;	AlterNotes	value
00081080 E100                       	smpsAlterNote	$00
00081082                            ;	JumpTo		location
00081082 F6FD 29                    	smpsJump	Credits_Jump05
00081085                            
00081085                            ; FM6 Data
00081085                            Credits_FM6:
00081085                            ;	SetFMVoice	#
00081087                            ;	AlterVolume	value
00081087 E67F                       	smpsAlterVol	$7F
00081089                            ;	Panning		direction	amsfms
00081089 E0C0                       	smpsPan		panCentre,	$00
0008108B 8001                       	dc.b		nRst,	$01
0008108D                            ;	SetFMVoice	#
0008108F                            ;	AlterVolume	value
0008108F E693                       	smpsAlterVol	$93
00081091                            ;	AlterNotes	value
00081091 E10A                       	smpsAlterNote	$0A
00081093 AB0B 8002 AB07 80AB        	dc.b		nFs3,	$0B,	nRst,	$02,	nFs3,	$07,	nRst,	nFs3
0008109B 0B80 02AB 0680 07AB        	dc.b		$0B,	nRst,	$02,	nFs3,	$06,	nRst,	$07,	nFs3
000810A3 0B80 02AB 0780 06AB        	dc.b		$0B,	nRst,	$02,	nFs3,	$07,	nRst,	$06,	nFs3
000810AB 0B80 03AB 0680 07          	dc.b		$0B,	nRst,	$03,	nFs3,	$06,	nRst,	$07
000810B2                            ;	AlterNotes	value
000810B2 E100                       	smpsAlterNote	$00
000810B4 AF0B 8002 AF07 8006        	dc.b		nBb3,	$0B,	nRst,	$02,	nBb3,	$07,	nRst,	$06
000810BC AF0B 8002 AF07 80AF        	dc.b		nBb3,	$0B,	nRst,	$02,	nBb3,	$07,	nRst,	nBb3
000810C4 0B80 02AF 0680 07AF        	dc.b		$0B,	nRst,	$02,	nBb3,	$06,	nRst,	$07,	nBb3
000810CC 0B80 02AF 0780 B00A        	dc.b		$0B,	nRst,	$02,	nBb3,	$07,	nRst,	nB3,	$0A
000810D4 8003 B006 8007 B00B        	dc.b		nRst,	$03,	nB3,	$06,	nRst,	$07,	nB3,	$0B
000810DC 8002 B006 8007 B00C        	dc.b		nRst,	$02,	nB3,	$06,	nRst,	$07,	nB3,	$0C
000810E4 8002 B006 8007 B00B        	dc.b		nRst,	$02,	nB3,	$06,	nRst,	$07,	nB3,	$0B
000810EC 8002 B007 80               	dc.b		nRst,	$02,	nB3,	$07,	nRst
000810F1                            ;	AlterNotes	value
000810F1 E10B                       	smpsAlterNote	$0B
000810F3 B20A 8003 B206 8007        	dc.b		nCs4,	$0A,	nRst,	$03,	nCs4,	$06,	nRst,	$07
000810FB B20B 8002 B207 8006        	dc.b		nCs4,	$0B,	nRst,	$02,	nCs4,	$07,	nRst,	$06
00081103 B20B 8002 B207 80B2        	dc.b		nCs4,	$0B,	nRst,	$02,	nCs4,	$07,	nRst,	nCs4
0008110B 0B80 02B2 0680 07          	dc.b		$0B,	nRst,	$02,	nCs4,	$06,	nRst,	$07
00081112                            ;	AlterNotes	value
00081112 E109                       	smpsAlterNote	$09
00081114 B30B 8003 B306 8007        	dc.b		nD4,	$0B,	nRst,	$03,	nD4,	$06,	nRst,	$07
0008111C B30B 8002 B307 80B3        	dc.b		nD4,	$0B,	nRst,	$02,	nD4,	$07,	nRst,	nD4
00081124 0A80 03B3 0680 07B3        	dc.b		$0A,	nRst,	$03,	nD4,	$06,	nRst,	$07,	nD4
0008112C 0B80 02B3 0680 07          	dc.b		$0B,	nRst,	$02,	nD4,	$06,	nRst,	$07
00081133                            ;	AlterNotes	value
00081133 E10B                       	smpsAlterNote	$0B
00081135 B50B 8002 B507 80B5        	dc.b		nE4,	$0B,	nRst,	$02,	nE4,	$07,	nRst,	nE4
0008113D 0A80 03B5 0680 07B5        	dc.b		$0A,	nRst,	$03,	nE4,	$06,	nRst,	$07,	nE4
00081145 0B80 02                    	dc.b		$0B,	nRst,	$02
00081148                            ;	AlterNotes	value
00081148 E100                       	smpsAlterNote	$00
0008114A B007 8006                  	dc.b		nB3,	$07,	nRst,	$06
0008114E                            ;	AlterNotes	value
0008114E E10B                       	smpsAlterNote	$0B
00081150 B20B 8003 B206 8007        	dc.b		nCs4,	$0B,	nRst,	$03,	nCs4,	$06,	nRst,	$07
00081158 B20B 8003                  	dc.b		nCs4,	$0B,	nRst,	$03
0008115C                            Credits_Jump06:
0008115C A90A 8003                  	dc.b		nE3,	$0A,	nRst,	$03
00081160                            ;	AlterNotes	value
00081160 E10D                       	smpsAlterNote	$0D
00081162 AE16 8011                  	dc.b		nA3,	$16,	nRst,	$11
00081166                            ;	AlterNotes	value
00081166 E10B                       	smpsAlterNote	$0B
00081168 A90B 8002                  	dc.b		nE3,	$0B,	nRst,	$02
0008116C                            ;	AlterNotes	value
0008116C E10A                       	smpsAlterNote	$0A
0008116E AB0B 8003                  	dc.b		nFs3,	$0B,	nRst,	$03
00081172                            ;	AlterNotes	value
00081172 E10B                       	smpsAlterNote	$0B
00081174 A906 8007 B20B 8002        	dc.b		nE3,	$06,	nRst,	$07,	nCs4,	$0B,	nRst,	$02
0008117C                            ;	AlterNotes	value
0008117C E109                       	smpsAlterNote	$09
0008117E AD06 8007                  	dc.b		nAb3,	$06,	nRst,	$07
00081182                            ;	AlterNotes	value
00081182 E100                       	smpsAlterNote	$00
00081184 B00B 8002                  	dc.b		nB3,	$0B,	nRst,	$02
00081188                            ;	AlterNotes	value
00081188 E10B                       	smpsAlterNote	$0B
0008118A B207 8014                  	dc.b		nCs4,	$07,	nRst,	$14
0008118E                            ;	AlterNotes	value
0008118E E109                       	smpsAlterNote	$09
00081190 AD0B 8002                  	dc.b		nAb3,	$0B,	nRst,	$02
00081194                            ;	AlterNotes	value
00081194 E100                       	smpsAlterNote	$00
00081196 B00B 8002                  	dc.b		nB3,	$0B,	nRst,	$02
0008119A                            ;	AlterNotes	value
0008119A E109                       	smpsAlterNote	$09
0008119C AD07 80B3 0B80 02          	dc.b		nAb3,	$07,	nRst,	nD4,	$0B,	nRst,	$02
000811A3                            ;	AlterNotes	value
000811A3 E10D                       	smpsAlterNote	$0D
000811A5 AE07 8006                  	dc.b		nA3,	$07,	nRst,	$06
000811A9                            ;	AlterNotes	value
000811A9 E100                       	smpsAlterNote	$00
000811AB B00B 8002                  	dc.b		nB3,	$0B,	nRst,	$02
000811AF                            ;	AlterNotes	value
000811AF E109                       	smpsAlterNote	$09
000811B1 B307 8014                  	dc.b		nD4,	$07,	nRst,	$14
000811B5                            ;	AlterNotes	value
000811B5 E10D                       	smpsAlterNote	$0D
000811B7 AE0B 8002                  	dc.b		nA3,	$0B,	nRst,	$02
000811BB                            ;	AlterNotes	value
000811BB E100                       	smpsAlterNote	$00
000811BD B00B 8002                  	dc.b		nB3,	$0B,	nRst,	$02
000811C1                            ;	AlterNotes	value
000811C1 E10D                       	smpsAlterNote	$0D
000811C3 AE07 8006                  	dc.b		nA3,	$07,	nRst,	$06
000811C7                            ;	AlterNotes	value
000811C7 E10B                       	smpsAlterNote	$0B
000811C9 B50B 8003                  	dc.b		nE4,	$0B,	nRst,	$03
000811CD                            ;	AlterNotes	value
000811CD E100                       	smpsAlterNote	$00
000811CF B006 8007                  	dc.b		nB3,	$06,	nRst,	$07
000811D3                            ;	AlterNotes	value
000811D3 E10B                       	smpsAlterNote	$0B
000811D5 B20B 8002 B506 8015        	dc.b		nCs4,	$0B,	nRst,	$02,	nE4,	$06,	nRst,	$15
000811DD                            ;	AlterNotes	value
000811DD E100                       	smpsAlterNote	$00
000811DF B00A 8003                  	dc.b		nB3,	$0A,	nRst,	$03
000811E3                            ;	AlterNotes	value
000811E3 E109                       	smpsAlterNote	$09
000811E5 B30B 8002                  	dc.b		nD4,	$0B,	nRst,	$02
000811E9                            ;	AlterNotes	value
000811E9 E100                       	smpsAlterNote	$00
000811EB B007 80                    	dc.b		nB3,	$07,	nRst
000811EE                            ;	AlterNotes	value
000811EE E10D                       	smpsAlterNote	$0D
000811F0 AE0A 8003                  	dc.b		nA3,	$0A,	nRst,	$03
000811F4                            ;	AlterNotes	value
000811F4 E10B                       	smpsAlterNote	$0B
000811F6 A90B 8002                  	dc.b		nE3,	$0B,	nRst,	$02
000811FA                            ;	AlterNotes	value
000811FA E10D                       	smpsAlterNote	$0D
000811FC AE16 8011                  	dc.b		nA3,	$16,	nRst,	$11
00081200                            ;	AlterNotes	value
00081200 E10B                       	smpsAlterNote	$0B
00081202 A90B 8003                  	dc.b		nE3,	$0B,	nRst,	$03
00081206                            ;	AlterNotes	value
00081206 E10A                       	smpsAlterNote	$0A
00081208 AB0B 8002                  	dc.b		nFs3,	$0B,	nRst,	$02
0008120C                            ;	AlterNotes	value
0008120C E10B                       	smpsAlterNote	$0B
0008120E A906 8007 B20B 8002        	dc.b		nE3,	$06,	nRst,	$07,	nCs4,	$0B,	nRst,	$02
00081216                            ;	AlterNotes	value
00081216 E109                       	smpsAlterNote	$09
00081218 AD07 80                    	dc.b		nAb3,	$07,	nRst
0008121B                            ;	AlterNotes	value
0008121B E100                       	smpsAlterNote	$00
0008121D B00A 8003                  	dc.b		nB3,	$0A,	nRst,	$03
00081221                            ;	AlterNotes	value
00081221 E10B                       	smpsAlterNote	$0B
00081223 B206 8014                  	dc.b		nCs4,	$06,	nRst,	$14
00081227                            ;	AlterNotes	value
00081227 E109                       	smpsAlterNote	$09
00081229 AD0B 8002                  	dc.b		nAb3,	$0B,	nRst,	$02
0008122D                            ;	AlterNotes	value
0008122D E100                       	smpsAlterNote	$00
0008122F B00B 8003                  	dc.b		nB3,	$0B,	nRst,	$03
00081233                            ;	AlterNotes	value
00081233 E109                       	smpsAlterNote	$09
00081235 AD06 8007                  	dc.b		nAb3,	$06,	nRst,	$07
00081239                            ;	AlterNotes	value
00081239 E100                       	smpsAlterNote	$00
0008123B B00B 8002                  	dc.b		nB3,	$0B,	nRst,	$02
0008123F                            ;	AlterNotes	value
0008123F E10A                       	smpsAlterNote	$0A
00081241 AB07 80                    	dc.b		nFs3,	$07,	nRst
00081244                            ;	AlterNotes	value
00081244 E10D                       	smpsAlterNote	$0D
00081246 AE0A 8003                  	dc.b		nA3,	$0A,	nRst,	$03
0008124A                            ;	AlterNotes	value
0008124A E100                       	smpsAlterNote	$00
0008124C B006 8014                  	dc.b		nB3,	$06,	nRst,	$14
00081250                            ;	AlterNotes	value
00081250 E10A                       	smpsAlterNote	$0A
00081252 AB0B 8002                  	dc.b		nFs3,	$0B,	nRst,	$02
00081256                            ;	AlterNotes	value
00081256 E10D                       	smpsAlterNote	$0D
00081258 AE0B 8002                  	dc.b		nA3,	$0B,	nRst,	$02
0008125C                            ;	AlterNotes	value
0008125C E10A                       	smpsAlterNote	$0A
0008125E AB07 80                    	dc.b		nFs3,	$07,	nRst
00081261                            ;	AlterNotes	value
00081261 E10B                       	smpsAlterNote	$0B
00081263 B50B 8002                  	dc.b		nE4,	$0B,	nRst,	$02
00081267                            ;	AlterNotes	value
00081267 E100                       	smpsAlterNote	$00
00081269 B006 8007                  	dc.b		nB3,	$06,	nRst,	$07
0008126D                            ;	AlterNotes	value
0008126D E10B                       	smpsAlterNote	$0B
0008126F B20B 8002 B207 80B5        	dc.b		nCs4,	$0B,	nRst,	$02,	nCs4,	$07,	nRst,	nE4
00081277 12B5 B5                    	dc.b		$12,	nE4,	nE4
0008127A                            ;	AlterNotes	value
0008127A E10D                       	smpsAlterNote	$0D
0008127C AE0B 8002 AE07 8006        	dc.b		nA3,	$0B,	nRst,	$02,	nA3,	$07,	nRst,	$06
00081284 AE0B 8003 AE06 8007        	dc.b		nA3,	$0B,	nRst,	$03,	nA3,	$06,	nRst,	$07
0008128C AE0B 8002 AE06 8007        	dc.b		nA3,	$0B,	nRst,	$02,	nA3,	$06,	nRst,	$07
00081294 AE0B 8002 AE07 80          	dc.b		nA3,	$0B,	nRst,	$02,	nA3,	$07,	nRst
0008129B                            ;	AlterNotes	value
0008129B E10A                       	smpsAlterNote	$0A
0008129D AB0A 8003 AB06 8007        	dc.b		nFs3,	$0A,	nRst,	$03,	nFs3,	$06,	nRst,	$07
000812A5 AB0B 8002 AB07 8006        	dc.b		nFs3,	$0B,	nRst,	$02,	nFs3,	$07,	nRst,	$06
000812AD AB0B 8002 AB07 80AB        	dc.b		nFs3,	$0B,	nRst,	$02,	nFs3,	$07,	nRst,	nFs3
000812B5 0B80 02AB 0680 07          	dc.b		$0B,	nRst,	$02,	nFs3,	$06,	nRst,	$07
000812BC                            ;	AlterNotes	value
000812BC E100                       	smpsAlterNote	$00
000812BE AA0B 8002 AA07 8006        	dc.b		nF3,	$0B,	nRst,	$02,	nF3,	$07,	nRst,	$06
000812C6 AA0B 8003 AA06 8007        	dc.b		nF3,	$0B,	nRst,	$03,	nF3,	$06,	nRst,	$07
000812CE AA0B 8003 AA06 8007        	dc.b		nF3,	$0B,	nRst,	$03,	nF3,	$06,	nRst,	$07
000812D6 AA0B 8002 AA06 8007        	dc.b		nF3,	$0B,	nRst,	$02,	nF3,	$06,	nRst,	$07
000812DE                            ;	AlterNotes	value
000812DE E10B                       	smpsAlterNote	$0B
000812E0 A90B 8002 A907 8006        	dc.b		nE3,	$0B,	nRst,	$02,	nE3,	$07,	nRst,	$06
000812E8 A90B 8003 A906 8007        	dc.b		nE3,	$0B,	nRst,	$03,	nE3,	$06,	nRst,	$07
000812F0 A90B 8002 A907 8006        	dc.b		nE3,	$0B,	nRst,	$02,	nE3,	$07,	nRst,	$06
000812F8 A90B 8002 A907 80          	dc.b		nE3,	$0B,	nRst,	$02,	nE3,	$07,	nRst
000812FF                            ;	AlterNotes	value
000812FF E10D                       	smpsAlterNote	$0D
00081301 AE16 8005 AE15 8005        	dc.b		nA3,	$16,	nRst,	$05,	nA3,	$15,	nRst,	$05
00081309 AE16 8005 AE0A 8003        	dc.b		nA3,	$16,	nRst,	$05,	nA3,	$0A,	nRst,	$03
00081311                            ;	AlterNotes	value
00081311 E10B                       	smpsAlterNote	$0B
00081313 A906 8007                  	dc.b		nE3,	$06,	nRst,	$07
00081317                            ;	AlterNotes	value
00081317 E10A                       	smpsAlterNote	$0A
00081319 AB16 8004 AB16 8004        	dc.b		nFs3,	$16,	nRst,	$04,	nFs3,	$16,	nRst,	$04
00081321 AB16 8005 AB0B 8002        	dc.b		nFs3,	$16,	nRst,	$05,	nFs3,	$0B,	nRst,	$02
00081329                            ;	AlterNotes	value
00081329 E10D                       	smpsAlterNote	$0D
0008132B AE07 8006                  	dc.b		nA3,	$07,	nRst,	$06
0008132F                            ;	AlterNotes	value
0008132F E100                       	smpsAlterNote	$00
00081331 B016 8005 B016 8004        	dc.b		nB3,	$16,	nRst,	$05,	nB3,	$16,	nRst,	$04
00081339 B016 8005 B00B 8002        	dc.b		nB3,	$16,	nRst,	$05,	nB3,	$0B,	nRst,	$02
00081341                            ;	AlterNotes	value
00081341 E10A                       	smpsAlterNote	$0A
00081343 AB07 80                    	dc.b		nFs3,	$07,	nRst
00081346                            ;	AlterNotes	value
00081346 E10B                       	smpsAlterNote	$0B
00081348 A915 8005 A916 8004        	dc.b		nE3,	$15,	nRst,	$05,	nE3,	$16,	nRst,	$04
00081350 A90B 8002                  	dc.b		nE3,	$0B,	nRst,	$02
00081354                            ;	AlterNotes	value
00081354 E109                       	smpsAlterNote	$09
00081356 AD07 80                    	dc.b		nAb3,	$07,	nRst
00081359                            ;	AlterNotes	value
00081359 E100                       	smpsAlterNote	$00
0008135B B00B 8002                  	dc.b		nB3,	$0B,	nRst,	$02
0008135F                            ;	AlterNotes	value
0008135F E10B                       	smpsAlterNote	$0B
00081361 A906 8007                  	dc.b		nE3,	$06,	nRst,	$07
00081365                            ;	AlterNotes	value
00081365 E10D                       	smpsAlterNote	$0D
00081367 AE16 8005 AE15 8005        	dc.b		nA3,	$16,	nRst,	$05,	nA3,	$15,	nRst,	$05
0008136F AE16 8004 AE0C 8002        	dc.b		nA3,	$16,	nRst,	$04,	nA3,	$0C,	nRst,	$02
00081377                            ;	AlterNotes	value
00081377 E10B                       	smpsAlterNote	$0B
00081379 A906 8007                  	dc.b		nE3,	$06,	nRst,	$07
0008137D                            ;	AlterNotes	value
0008137D E10A                       	smpsAlterNote	$0A
0008137F AB16 8004 AB16 8005        	dc.b		nFs3,	$16,	nRst,	$04,	nFs3,	$16,	nRst,	$05
00081387 AB16 8004 AB0B 8002        	dc.b		nFs3,	$16,	nRst,	$04,	nFs3,	$0B,	nRst,	$02
0008138F                            ;	AlterNotes	value
0008138F E10D                       	smpsAlterNote	$0D
00081391 AE07 80                    	dc.b		nA3,	$07,	nRst
00081394                            ;	AlterNotes	value
00081394 E100                       	smpsAlterNote	$00
00081396 B016 8005 B015 8005        	dc.b		nB3,	$16,	nRst,	$05,	nB3,	$15,	nRst,	$05
0008139E B016 8004 B00B 8002        	dc.b		nB3,	$16,	nRst,	$04,	nB3,	$0B,	nRst,	$02
000813A6                            ;	AlterNotes	value
000813A6 E10A                       	smpsAlterNote	$0A
000813A8 AB07 80                    	dc.b		nFs3,	$07,	nRst
000813AB                            ;	AlterNotes	value
000813AB E10B                       	smpsAlterNote	$0B
000813AD A916 8004 A916 8004        	dc.b		nE3,	$16,	nRst,	$04,	nE3,	$16,	nRst,	$04
000813B5 A90B 8003                  	dc.b		nE3,	$0B,	nRst,	$03
000813B9                            ;	AlterNotes	value
000813B9 E109                       	smpsAlterNote	$09
000813BB AD06 8007                  	dc.b		nAb3,	$06,	nRst,	$07
000813BF                            ;	AlterNotes	value
000813BF E100                       	smpsAlterNote	$00
000813C1 B00B 8002                  	dc.b		nB3,	$0B,	nRst,	$02
000813C5                            ;	AlterNotes	value
000813C5 E10B                       	smpsAlterNote	$0B
000813C7 A906 8008 B216 8004        	dc.b		nE3,	$06,	nRst,	$08,	nCs4,	$16,	nRst,	$04
000813CF B216 8005 B215 8005        	dc.b		nCs4,	$16,	nRst,	$05,	nCs4,	$15,	nRst,	$05
000813D7 B20B 8002                  	dc.b		nCs4,	$0B,	nRst,	$02
000813DB                            ;	AlterNotes	value
000813DB E109                       	smpsAlterNote	$09
000813DD AD07 8006                  	dc.b		nAb3,	$07,	nRst,	$06
000813E1                            ;	AlterNotes	value
000813E1 E10B                       	smpsAlterNote	$0B
000813E3 B216 8005 B216 8004        	dc.b		nCs4,	$16,	nRst,	$05,	nCs4,	$16,	nRst,	$04
000813EB B216 8005 B20B 8002        	dc.b		nCs4,	$16,	nRst,	$05,	nCs4,	$0B,	nRst,	$02
000813F3                            ;	AlterNotes	value
000813F3 E109                       	smpsAlterNote	$09
000813F5 AD07 80                    	dc.b		nAb3,	$07,	nRst
000813F8                            ;	AlterNotes	value
000813F8 E10A                       	smpsAlterNote	$0A
000813FA AB15 8005 AB16 8004        	dc.b		nFs3,	$15,	nRst,	$05,	nFs3,	$16,	nRst,	$04
00081402 AB16 8005 AB0A 8003        	dc.b		nFs3,	$16,	nRst,	$05,	nFs3,	$0A,	nRst,	$03
0008140A AB06 8007                  	dc.b		nFs3,	$06,	nRst,	$07
0008140E                            ;	AlterNotes	value
0008140E E10B                       	smpsAlterNote	$0B
00081410 A916 8004 A916 8005        	dc.b		nE3,	$16,	nRst,	$04,	nE3,	$16,	nRst,	$05
00081418 A916 8005 A90B 8002        	dc.b		nE3,	$16,	nRst,	$05,	nE3,	$0B,	nRst,	$02
00081420                            ;	AlterNotes	value
00081420 E10D                       	smpsAlterNote	$0D
00081422 AE06 8007                  	dc.b		nA3,	$06,	nRst,	$07
00081426                            ;	AlterNotes	value
00081426 E100                       	smpsAlterNote	$00
00081428 B016 8005 B015 8005        	dc.b		nB3,	$16,	nRst,	$05,	nB3,	$15,	nRst,	$05
00081430 B016 8004 B00B 8002        	dc.b		nB3,	$16,	nRst,	$04,	nB3,	$0B,	nRst,	$02
00081438                            ;	AlterNotes	value
00081438 E10A                       	smpsAlterNote	$0A
0008143A AB07 80                    	dc.b		nFs3,	$07,	nRst
0008143D                            ;	AlterNotes	value
0008143D E10B                       	smpsAlterNote	$0B
0008143F A915 8005 A916 8005        	dc.b		nE3,	$15,	nRst,	$05,	nE3,	$16,	nRst,	$05
00081447 A916 8005 A90B 8002        	dc.b		nE3,	$16,	nRst,	$05,	nE3,	$0B,	nRst,	$02
0008144F                            ;	AlterNotes	value
0008144F E100                       	smpsAlterNote	$00
00081451 A407 8006                  	dc.b		nB2,	$07,	nRst,	$06
00081455                            ;	AlterNotes	value
00081455 E10D                       	smpsAlterNote	$0D
00081457 A216 8005 A215 8005        	dc.b		nA2,	$16,	nRst,	$05,	nA2,	$15,	nRst,	$05
0008145F A216 8005 A20B 8002        	dc.b		nA2,	$16,	nRst,	$05,	nA2,	$0B,	nRst,	$02
00081467                            ;	AlterNotes	value
00081467 E10B                       	smpsAlterNote	$0B
00081469 9D07 80                    	dc.b		nE2,	$07,	nRst
0008146C                            ;	AlterNotes	value
0008146C E10D                       	smpsAlterNote	$0D
0008146E A215 8005 A216 8004        	dc.b		nA2,	$15,	nRst,	$05,	nA2,	$16,	nRst,	$04
00081476 A216 8005 A20A 8003        	dc.b		nA2,	$16,	nRst,	$05,	nA2,	$0A,	nRst,	$03
0008147E                            ;	AlterNotes	value
0008147E E10B                       	smpsAlterNote	$0B
00081480 9D06 8007                  	dc.b		nE2,	$06,	nRst,	$07
00081484                            ;	AlterNotes	value
00081484 E109                       	smpsAlterNote	$09
00081486 A716 8047                  	dc.b		nD3,	$16,	nRst,	$47
0008148A                            ;	AlterNotes	value
0008148A E10D                       	smpsAlterNote	$0D
0008148C A20B 8002                  	dc.b		nA2,	$0B,	nRst,	$02
00081490                            ;	AlterNotes	value
00081490 E10B                       	smpsAlterNote	$0B
00081492 A916 8012 A904 8002        	dc.b		nE3,	$16,	nRst,	$12,	nE3,	$04,	nRst,	$02
0008149A                            ;	AlterNotes	value
0008149A E10A                       	smpsAlterNote	$0A
0008149C AB04 8003                  	dc.b		nFs3,	$04,	nRst,	$03
000814A0                            ;	AlterNotes	value
000814A0 E10B                       	smpsAlterNote	$0B
000814A2 A90B 8002 A606 8007        	dc.b		nE3,	$0B,	nRst,	$02,	nCs3,	$06,	nRst,	$07
000814AA                            ;	AlterNotes	value
000814AA E100                       	smpsAlterNote	$00
000814AC A40B 8002                  	dc.b		nB2,	$0B,	nRst,	$02
000814B0                            ;	AlterNotes	value
000814B0 E10B                       	smpsAlterNote	$0B
000814B2 A907 80                    	dc.b		nE3,	$07,	nRst
000814B5                            ;	AlterNotes	value
000814B5 E10D                       	smpsAlterNote	$0D
000814B7 A215 8012 A237 800C        	dc.b		nA2,	$15,	nRst,	$12,	nA2,	$37,	nRst,	$0C
000814BF                            ;	AlterNotes	value
000814BF E10A                       	smpsAlterNote	$0A
000814C1 AB16 8011 AB0B 8010        	dc.b		nFs3,	$16,	nRst,	$11,	nFs3,	$0B,	nRst,	$10
000814C9 AB0B 8002                  	dc.b		nFs3,	$0B,	nRst,	$02
000814CD                            ;	AlterNotes	value
000814CD E10D                       	smpsAlterNote	$0D
000814CF AE0B 8002                  	dc.b		nA3,	$0B,	nRst,	$02
000814D3                            ;	AlterNotes	value
000814D3 E100                       	smpsAlterNote	$00
000814D5 AF06 8007 B016 802C        	dc.b		nBb3,	$06,	nRst,	$07,	nB3,	$16,	nRst,	$2C
000814DD                            ;	AlterNotes	value
000814DD E10A                       	smpsAlterNote	$0A
000814DF AB0B 8002                  	dc.b		nFs3,	$0B,	nRst,	$02
000814E3                            ;	AlterNotes	value
000814E3 E10D                       	smpsAlterNote	$0D
000814E5 AE0B 8003                  	dc.b		nA3,	$0B,	nRst,	$03
000814E9                            ;	AlterNotes	value
000814E9 E100                       	smpsAlterNote	$00
000814EB AF06 8007 B016 801F        	dc.b		nBb3,	$06,	nRst,	$07,	nB3,	$16,	nRst,	$1F
000814F3 B00A 8003                  	dc.b		nB3,	$0A,	nRst,	$03
000814F7                            ;	AlterNotes	value
000814F7 E10B                       	smpsAlterNote	$0B
000814F9 B206 8007                  	dc.b		nCs4,	$06,	nRst,	$07
000814FD                            ;	AlterNotes	value
000814FD E109                       	smpsAlterNote	$09
000814FF B30B 8002                  	dc.b		nD4,	$0B,	nRst,	$02
00081503                            ;	AlterNotes	value
00081503 E100                       	smpsAlterNote	$00
00081505 B407 8006                  	dc.b		nEb4,	$07,	nRst,	$06
00081509                            ;	AlterNotes	value
00081509 E10B                       	smpsAlterNote	$0B
0008150B B50B 8002                  	dc.b		nE4,	$0B,	nRst,	$02
0008150F                            ;	AlterNotes	value
0008150F E100                       	smpsAlterNote	$00
00081511 B007 80                    	dc.b		nB3,	$07,	nRst
00081514                            ;	AlterNotes	value
00081514 E10B                       	smpsAlterNote	$0B
00081516 B515 8005 B50B 8003        	dc.b		nE4,	$15,	nRst,	$05,	nE4,	$0B,	nRst,	$03
0008151E                            ;	AlterNotes	value
0008151E E100                       	smpsAlterNote	$00
00081520 B006 8007                  	dc.b		nB3,	$06,	nRst,	$07
00081524                            ;	AlterNotes	value
00081524 E10B                       	smpsAlterNote	$0B
00081526 B50A 8003                  	dc.b		nE4,	$0A,	nRst,	$03
0008152A                            ;	AlterNotes	value
0008152A E100                       	smpsAlterNote	$00
0008152C B006 8007                  	dc.b		nB3,	$06,	nRst,	$07
00081530                            ;	AlterNotes	value
00081530 E10B                       	smpsAlterNote	$0B
00081532 B50B 8002                  	dc.b		nE4,	$0B,	nRst,	$02
00081536                            ;	AlterNotes	value
00081536 E100                       	smpsAlterNote	$00
00081538 B006 8007                  	dc.b		nB3,	$06,	nRst,	$07
0008153C                            ;	AlterNotes	value
0008153C E10B                       	smpsAlterNote	$0B
0008153E B516 8005 B50A 8003        	dc.b		nE4,	$16,	nRst,	$05,	nE4,	$0A,	nRst,	$03
00081546 B506 8007 B50B 8002        	dc.b		nE4,	$06,	nRst,	$07,	nE4,	$0B,	nRst,	$02
0008154E B507 80B5 0B80 02          	dc.b		nE4,	$07,	nRst,	nE4,	$0B,	nRst,	$02
00081555                            ;	Panning		direction	amsfms
00081555 E0C0                       	smpsPan		panCentre,	$00
00081557                            ;	JumpTo		location
00081557 F6FC 03                    	smpsJump	Credits_Jump06
0008155A                            	
0008155A                            Credits_DAC:
0008155A 4E75                       		rts
0008155C                            
0008155C                            Credits_Voices:
0008155C                            ;	Voice 00
0008155C                            ;	$3A,$01,$24,$71,$03,$0C,$09,$0B,$0D,$0A,$13,$08,$03,$03,$00,$02,$08,$18,$1A,$1B,$1C,$16,$2D,$30,$00
0008155C                            ;				#
0008155C                            	smpsVcAlgorithm		$02
0008155C                            	smpsVcFeedback		$07
0008155C                            ;				op1	op2	op3	op4
0008155C                            	smpsVcDetune		$00,	$07,	$02,	$00
0008155C                            	smpsVcCoarseFreq	$03,	$01,	$04,	$01
0008155C                            	smpsVcRateScale		$00,	$00,	$00,	$00
0008155C                            	smpsVcAttackRate	$0D,	$0B,	$09,	$0C
0008155C                            	smpsVcAmpMod		$00,	$00,	$00,	$00
0008155C                            	smpsVcDecayRate1	$03,	$08,	$13,	$0A
0008155C                            	smpsVcDecayRate2	$08,	$02,	$00,	$03
0008155C                            	smpsVcDecayLevel	$01,	$01,	$01,	$01
0008155C                            	smpsVcReleaseRate	$0C,	$0B,	$0A,	$08
0008155C 3A01 2471 030C 090B 0D0A+  	smpsVcTotalLevel	$00,	$30,	$2D,	$16
00081575                            
00081575                            ;	Voice 01
00081575                            ;	$3A,$01,$24,$71,$03,$0C,$09,$0B,$0D,$0A,$13,$08,$03,$03,$00,$02,$08,$18,$1A,$1B,$1C,$7F,$7F,$7F,$00
00081575                            ;				#
00081575                            	smpsVcAlgorithm		$02
00081575                            	smpsVcFeedback		$07
00081575                            ;				op1	op2	op3	op4
00081575                            	smpsVcDetune		$00,	$07,	$02,	$00
00081575                            	smpsVcCoarseFreq	$03,	$01,	$04,	$01
00081575                            	smpsVcRateScale		$00,	$00,	$00,	$00
00081575                            	smpsVcAttackRate	$0D,	$0B,	$09,	$0C
00081575                            	smpsVcAmpMod		$00,	$00,	$00,	$00
00081575                            	smpsVcDecayRate1	$03,	$08,	$13,	$0A
00081575                            	smpsVcDecayRate2	$08,	$02,	$00,	$03
00081575                            	smpsVcDecayLevel	$01,	$01,	$01,	$01
00081575                            	smpsVcReleaseRate	$0C,	$0B,	$0A,	$08
00081575 3A01 2471 030C 090B 0D0A+  	smpsVcTotalLevel	$00,	$7F,	$7F,	$7F
0008158E                            
0008158E                            ;	Voice 02
0008158E                            ;	$3C,$0F,$00,$00,$00,$1F,$1A,$18,$1C,$17,$11,$1A,$0E,$00,$0F,$14,$10,$1F,$EC,$FF,$FF,$05,$00,$0C,$00
0008158E                            ;				#
0008158E                            	smpsVcAlgorithm		$04
0008158E                            	smpsVcFeedback		$07
0008158E                            ;				op1	op2	op3	op4
0008158E                            	smpsVcDetune		$00,	$00,	$00,	$00
0008158E                            	smpsVcCoarseFreq	$00,	$00,	$00,	$0F
0008158E                            	smpsVcRateScale		$00,	$00,	$00,	$00
0008158E                            	smpsVcAttackRate	$1C,	$18,	$1A,	$1F
0008158E                            	smpsVcAmpMod		$00,	$00,	$00,	$00
0008158E                            	smpsVcDecayRate1	$0E,	$1A,	$11,	$17
0008158E                            	smpsVcDecayRate2	$10,	$14,	$0F,	$00
0008158E                            	smpsVcDecayLevel	$0F,	$0F,	$0E,	$01
0008158E                            	smpsVcReleaseRate	$0F,	$0F,	$0C,	$0F
0008158E 3C0F 0000 001F 1A18 1C17+  	smpsVcTotalLevel	$00,	$0C,	$00,	$05
000815A7                            
000815A7                            ;	Voice 03
000815A7                            ;	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$FF,$FF,$FF,$FF,$7F,$7F,$7F,$00
000815A7                            ;				#
000815A7                            	smpsVcAlgorithm		$00
000815A7                            	smpsVcFeedback		$00
000815A7                            ;				op1	op2	op3	op4
000815A7                            	smpsVcDetune		$00,	$00,	$00,	$00
000815A7                            	smpsVcCoarseFreq	$00,	$00,	$00,	$00
000815A7                            	smpsVcRateScale		$00,	$00,	$00,	$00
000815A7                            	smpsVcAttackRate	$00,	$00,	$00,	$00
000815A7                            	smpsVcAmpMod		$00,	$00,	$00,	$00
000815A7                            	smpsVcDecayRate1	$00,	$00,	$00,	$00
000815A7                            	smpsVcDecayRate2	$00,	$00,	$00,	$00
000815A7                            	smpsVcDecayLevel	$0F,	$0F,	$0F,	$0F
000815A7                            	smpsVcReleaseRate	$0F,	$0F,	$0F,	$0F
000815A7 0000 0000 0000 0000 0000+  	smpsVcTotalLevel	$00,	$7F,	$7F,	$7F
000815C0                            
000815C0                            ;	Voice 04
000815C0                            ;	$3A,$11,$22,$70,$01,$18,$99,$56,$4B,$04,$0C,$01,$06,$02,$02,$02,$02,$14,$18,$18,$18,$1D,$32,$30,$00
000815C0                            ;				#
000815C0                            	smpsVcAlgorithm		$02
000815C0                            	smpsVcFeedback		$07
000815C0                            ;				op1	op2	op3	op4
000815C0                            	smpsVcDetune		$00,	$07,	$02,	$01
000815C0                            	smpsVcCoarseFreq	$01,	$00,	$02,	$01
000815C0                            	smpsVcRateScale		$01,	$01,	$02,	$00
000815C0                            	smpsVcAttackRate	$0B,	$16,	$19,	$18
000815C0                            	smpsVcAmpMod		$00,	$00,	$00,	$00
000815C0                            	smpsVcDecayRate1	$06,	$01,	$0C,	$04
000815C0                            	smpsVcDecayRate2	$02,	$02,	$02,	$02
000815C0                            	smpsVcDecayLevel	$01,	$01,	$01,	$01
000815C0                            	smpsVcReleaseRate	$08,	$08,	$08,	$04
000815C0 3A11 2270 0118 9956 4B04+  	smpsVcTotalLevel	$00,	$30,	$32,	$1D
000815D9                            
000815D9                            ;	Voice 05
000815D9                            ;	$24,$31,$31,$65,$61,$1F,$18,$1F,$1F,$13,$11,$0E,$11,$0E,$08,$0C,$08,$04,$16,$04,$16,$16,$00,$12,$00
000815D9                            ;				#
000815D9                            	smpsVcAlgorithm		$04
000815D9                            	smpsVcFeedback		$04
000815D9                            ;				op1	op2	op3	op4
000815D9                            	smpsVcDetune		$06,	$06,	$03,	$03
000815D9                            	smpsVcCoarseFreq	$01,	$05,	$01,	$01
000815D9                            	smpsVcRateScale		$00,	$00,	$00,	$00
000815D9                            	smpsVcAttackRate	$1F,	$1F,	$18,	$1F
000815D9                            	smpsVcAmpMod		$00,	$00,	$00,	$00
000815D9                            	smpsVcDecayRate1	$11,	$0E,	$11,	$13
000815D9                            	smpsVcDecayRate2	$08,	$0C,	$08,	$0E
000815D9                            	smpsVcDecayLevel	$01,	$00,	$01,	$00
000815D9                            	smpsVcReleaseRate	$06,	$04,	$06,	$04
000815D9 2431 3165 611F 181F 1F13+  	smpsVcTotalLevel	$00,	$12,	$00,	$16
000815F2                            
000815F2                            ;	Voice 06
000815F2                            ;	$38,$35,$30,$30,$31,$14,$9C,$1C,$9C,$11,$06,$04,$01,$0C,$0A,$03,$04,$B8,$B8,$3C,$2C,$20,$28,$1C,$00
000815F2                            ;				#
000815F2                            	smpsVcAlgorithm		$00
000815F2                            	smpsVcFeedback		$07
000815F2                            ;				op1	op2	op3	op4
000815F2                            	smpsVcDetune		$03,	$03,	$03,	$03
000815F2                            	smpsVcCoarseFreq	$01,	$00,	$00,	$05
000815F2                            	smpsVcRateScale		$02,	$00,	$02,	$00
000815F2                            	smpsVcAttackRate	$1C,	$1C,	$1C,	$14
000815F2                            	smpsVcAmpMod		$00,	$00,	$00,	$00
000815F2                            	smpsVcDecayRate1	$01,	$04,	$06,	$11
000815F2                            	smpsVcDecayRate2	$04,	$03,	$0A,	$0C
000815F2                            	smpsVcDecayLevel	$02,	$03,	$0B,	$0B
000815F2                            	smpsVcReleaseRate	$0C,	$0C,	$08,	$08
000815F2 3835 3030 3114 9C1C 9C11+  	smpsVcTotalLevel	$00,	$1C,	$28,	$20
0008160B                            
0008160B                            ;	Voice 07
0008160B                            ;	$3B,$08,$30,$31,$60,$1F,$1F,$15,$13,$1F,$1F,$1F,$16,$00,$00,$18,$0D,$00,$00,$00,$37,$00,$30,$05,$00
0008160B                            ;				#
0008160B                            	smpsVcAlgorithm		$03
0008160B                            	smpsVcFeedback		$07
0008160B                            ;				op1	op2	op3	op4
0008160B                            	smpsVcDetune		$06,	$03,	$03,	$00
0008160B                            	smpsVcCoarseFreq	$00,	$01,	$00,	$08
0008160B                            	smpsVcRateScale		$00,	$00,	$00,	$00
0008160B                            	smpsVcAttackRate	$13,	$15,	$1F,	$1F
0008160B                            	smpsVcAmpMod		$00,	$00,	$00,	$00
0008160B                            	smpsVcDecayRate1	$16,	$1F,	$1F,	$1F
0008160B                            	smpsVcDecayRate2	$0D,	$18,	$00,	$00
0008160B                            	smpsVcDecayLevel	$03,	$00,	$00,	$00
0008160B                            	smpsVcReleaseRate	$07,	$00,	$00,	$00
0008160B 3B08 3031 601F 1F15 131F+  	smpsVcTotalLevel	$00,	$05,	$30,	$00
00081624                            
00081624                            ;	Voice 08
00081624                            ;	$3C,$47,$62,$60,$31,$16,$8F,$98,$10,$08,$04,$04,$04,$04,$06,$00,$04,$16,$18,$14,$17,$22,$00,$12,$00
00081624                            ;				#
00081624                            	smpsVcAlgorithm		$04
00081624                            	smpsVcFeedback		$07
00081624                            ;				op1	op2	op3	op4
00081624                            	smpsVcDetune		$03,	$06,	$06,	$04
00081624                            	smpsVcCoarseFreq	$01,	$00,	$02,	$07
00081624                            	smpsVcRateScale		$00,	$02,	$02,	$00
00081624                            	smpsVcAttackRate	$10,	$18,	$0F,	$16
00081624                            	smpsVcAmpMod		$00,	$00,	$00,	$00
00081624                            	smpsVcDecayRate1	$04,	$04,	$04,	$08
00081624                            	smpsVcDecayRate2	$04,	$00,	$06,	$04
00081624                            	smpsVcDecayLevel	$01,	$01,	$01,	$01
00081624                            	smpsVcReleaseRate	$07,	$04,	$08,	$06
00081624 3C47 6260 3116 8F98 1008+  	smpsVcTotalLevel	$00,	$12,	$00,	$22
0008163D                            
0008163D                            ;	Voice 09
0008163D                            ;	$3C,$47,$62,$60,$31,$16,$8F,$98,$10,$08,$04,$04,$04,$04,$06,$00,$04,$16,$18,$14,$17,$22,$00,$30,$02
0008163D                            ;				#
0008163D                            	smpsVcAlgorithm		$04
0008163D                            	smpsVcFeedback		$07
0008163D                            ;				op1	op2	op3	op4
0008163D                            	smpsVcDetune		$03,	$06,	$06,	$04
0008163D                            	smpsVcCoarseFreq	$01,	$00,	$02,	$07
0008163D                            	smpsVcRateScale		$00,	$02,	$02,	$00
0008163D                            	smpsVcAttackRate	$10,	$18,	$0F,	$16
0008163D                            	smpsVcAmpMod		$00,	$00,	$00,	$00
0008163D                            	smpsVcDecayRate1	$04,	$04,	$04,	$08
0008163D                            	smpsVcDecayRate2	$04,	$00,	$06,	$04
0008163D                            	smpsVcDecayLevel	$01,	$01,	$01,	$01
0008163D                            	smpsVcReleaseRate	$07,	$04,	$08,	$06
0008163D 3C47 6260 3116 8F98 1008+  	smpsVcTotalLevel	$02,	$30,	$00,	$22
00081656                            
00081656                            ;	Voice 0A
00081656                            ;	$3C,$0F,$00,$00,$00,$1F,$1A,$18,$1C,$17,$11,$1A,$0E,$00,$0F,$14,$10,$FF,$FF,$FF,$FF,$05,$00,$0C,$00
00081656                            ;				#
00081656                            	smpsVcAlgorithm		$04
00081656                            	smpsVcFeedback		$07
00081656                            ;				op1	op2	op3	op4
00081656                            	smpsVcDetune		$00,	$00,	$00,	$00
00081656                            	smpsVcCoarseFreq	$00,	$00,	$00,	$0F
00081656                            	smpsVcRateScale		$00,	$00,	$00,	$00
00081656                            	smpsVcAttackRate	$1C,	$18,	$1A,	$1F
00081656                            	smpsVcAmpMod		$00,	$00,	$00,	$00
00081656                            	smpsVcDecayRate1	$0E,	$1A,	$11,	$17
00081656                            	smpsVcDecayRate2	$10,	$14,	$0F,	$00
00081656                            	smpsVcDecayLevel	$0F,	$0F,	$0F,	$0F
00081656                            	smpsVcReleaseRate	$0F,	$0F,	$0F,	$0F
00081656 3C0F 0000 001F 1A18 1C17+  	smpsVcTotalLevel	$00,	$0C,	$00,	$05
0008166F                            
0008166F                            ;	Voice 0B
0008166F                            ;	$3C,$0F,$00,$00,$00,$1F,$1A,$18,$1C,$17,$11,$1A,$0E,$00,$0F,$14,$10,$FF,$EC,$FF,$FF,$05,$00,$0C,$00
0008166F                            ;				#
0008166F                            	smpsVcAlgorithm		$04
0008166F                            	smpsVcFeedback		$07
0008166F                            ;				op1	op2	op3	op4
0008166F                            	smpsVcDetune		$00,	$00,	$00,	$00
0008166F                            	smpsVcCoarseFreq	$00,	$00,	$00,	$0F
0008166F                            	smpsVcRateScale		$00,	$00,	$00,	$00
0008166F                            	smpsVcAttackRate	$1C,	$18,	$1A,	$1F
0008166F                            	smpsVcAmpMod		$00,	$00,	$00,	$00
0008166F                            	smpsVcDecayRate1	$0E,	$1A,	$11,	$17
0008166F                            	smpsVcDecayRate2	$10,	$14,	$0F,	$00
0008166F                            	smpsVcDecayLevel	$0F,	$0F,	$0E,	$0F
0008166F                            	smpsVcReleaseRate	$0F,	$0F,	$0C,	$0F
0008166F 3C0F 0000 001F 1A18 1C17+  	smpsVcTotalLevel	$00,	$0C,	$00,	$05
00081688                            
00081688                            ;	Voice 0C
00081688                            ;	$3B,$08,$30,$31,$60,$1F,$1F,$15,$13,$1F,$1F,$1F,$16,$00,$00,$18,$0D,$FF,$FF,$FF,$37,$00,$30,$05,$00
00081688                            ;				#
00081688                            	smpsVcAlgorithm		$03
00081688                            	smpsVcFeedback		$07
00081688                            ;				op1	op2	op3	op4
00081688                            	smpsVcDetune		$06,	$03,	$03,	$00
00081688                            	smpsVcCoarseFreq	$00,	$01,	$00,	$08
00081688                            	smpsVcRateScale		$00,	$00,	$00,	$00
00081688                            	smpsVcAttackRate	$13,	$15,	$1F,	$1F
00081688                            	smpsVcAmpMod		$00,	$00,	$00,	$00
00081688                            	smpsVcDecayRate1	$16,	$1F,	$1F,	$1F
00081688                            	smpsVcDecayRate2	$0D,	$18,	$00,	$00
00081688                            	smpsVcDecayLevel	$03,	$0F,	$0F,	$0F
00081688                            	smpsVcReleaseRate	$07,	$0F,	$0F,	$0F
00081688 3B08 3031 601F 1F15 131F+  	smpsVcTotalLevel	$00,	$05,	$30,	$00
000816A1                            
000816A1                            ;	Voice 0D
000816A1                            ;	$3B,$73,$30,$10,$01,$1F,$18,$18,$12,$07,$1F,$07,$1F,$0A,$0A,$09,$0A,$17,$17,$19,$1F,$1E,$1A,$15,$00
000816A1                            ;				#
000816A1                            	smpsVcAlgorithm		$03
000816A1                            	smpsVcFeedback		$07
000816A1                            ;				op1	op2	op3	op4
000816A1                            	smpsVcDetune		$00,	$01,	$03,	$07
000816A1                            	smpsVcCoarseFreq	$01,	$00,	$00,	$03
000816A1                            	smpsVcRateScale		$00,	$00,	$00,	$00
000816A1                            	smpsVcAttackRate	$12,	$18,	$18,	$1F
000816A1                            	smpsVcAmpMod		$00,	$00,	$00,	$00
000816A1                            	smpsVcDecayRate1	$1F,	$07,	$1F,	$07
000816A1                            	smpsVcDecayRate2	$0A,	$09,	$0A,	$0A
000816A1                            	smpsVcDecayLevel	$01,	$01,	$01,	$01
000816A1                            	smpsVcReleaseRate	$0F,	$09,	$07,	$07
000816A1 3B73 3010 011F 1818 1207+  	smpsVcTotalLevel	$00,	$15,	$1A,	$1E
000816BA                            
000816BA                            ;	Voice 0E
000816BA                            ;	$3C,$01,$00,$00,$00,$1F,$9F,$9F,$1F,$15,$13,$1F,$11,$00,$00,$0E,$0D,$F5,$FF,$09,$F6,$0A,$04,$20,$00
000816BA                            ;				#
000816BA                            	smpsVcAlgorithm		$04
000816BA                            	smpsVcFeedback		$07
000816BA                            ;				op1	op2	op3	op4
000816BA                            	smpsVcDetune		$00,	$00,	$00,	$00
000816BA                            	smpsVcCoarseFreq	$00,	$00,	$00,	$01
000816BA                            	smpsVcRateScale		$00,	$02,	$02,	$00
000816BA                            	smpsVcAttackRate	$1F,	$1F,	$1F,	$1F
000816BA                            	smpsVcAmpMod		$00,	$00,	$00,	$00
000816BA                            	smpsVcDecayRate1	$11,	$1F,	$13,	$15
000816BA                            	smpsVcDecayRate2	$0D,	$0E,	$00,	$00
000816BA                            	smpsVcDecayLevel	$0F,	$00,	$0F,	$0F
000816BA                            	smpsVcReleaseRate	$06,	$09,	$0F,	$05
000816BA 3C01 0000 001F 9F9F 1F15+  	smpsVcTotalLevel	$00,	$20,	$04,	$0A
000816D3                            
000816D3                            ;	Voice 0F
000816D3                            ;	$24,$31,$31,$63,$61,$1F,$18,$1F,$1C,$13,$0C,$0E,$0C,$0E,$04,$0C,$06,$04,$18,$04,$18,$1C,$00,$2F,$00
000816D3                            ;				#
000816D3                            	smpsVcAlgorithm		$04
000816D3                            	smpsVcFeedback		$04
000816D3                            ;				op1	op2	op3	op4
000816D3                            	smpsVcDetune		$06,	$06,	$03,	$03
000816D3                            	smpsVcCoarseFreq	$01,	$03,	$01,	$01
000816D3                            	smpsVcRateScale		$00,	$00,	$00,	$00
000816D3                            	smpsVcAttackRate	$1C,	$1F,	$18,	$1F
000816D3                            	smpsVcAmpMod		$00,	$00,	$00,	$00
000816D3                            	smpsVcDecayRate1	$0C,	$0E,	$0C,	$13
000816D3                            	smpsVcDecayRate2	$06,	$0C,	$04,	$0E
000816D3                            	smpsVcDecayLevel	$01,	$00,	$01,	$00
000816D3                            	smpsVcReleaseRate	$08,	$04,	$08,	$04
000816D3 2431 3163 611F 181F 1C13+  	smpsVcTotalLevel	$00,	$2F,	$00,	$1C
000816EC                            
000816EC                            ;	Voice 10
000816EC                            ;	$3C,$0F,$00,$00,$00,$1F,$1A,$9F,$1F,$15,$13,$1F,$11,$00,$00,$0E,$0D,$FF,$FF,$FF,$FF,$0A,$04,$20,$00
000816EC                            ;				#
000816EC                            	smpsVcAlgorithm		$04
000816EC                            	smpsVcFeedback		$07
000816EC                            ;				op1	op2	op3	op4
000816EC                            	smpsVcDetune		$00,	$00,	$00,	$00
000816EC                            	smpsVcCoarseFreq	$00,	$00,	$00,	$0F
000816EC                            	smpsVcRateScale		$00,	$02,	$00,	$00
000816EC                            	smpsVcAttackRate	$1F,	$1F,	$1A,	$1F
000816EC                            	smpsVcAmpMod		$00,	$00,	$00,	$00
000816EC                            	smpsVcDecayRate1	$11,	$1F,	$13,	$15
000816EC                            	smpsVcDecayRate2	$0D,	$0E,	$00,	$00
000816EC                            	smpsVcDecayLevel	$0F,	$0F,	$0F,	$0F
000816EC                            	smpsVcReleaseRate	$0F,	$0F,	$0F,	$0F
000816EC 3C0F 0000 001F 1A9F 1F15+  	smpsVcTotalLevel	$00,	$20,	$04,	$0A
00081705                            
00081705                            ;	Voice 11
00081705                            ;	$3D,$00,$0F,$0F,$0F,$1F,$9F,$9F,$9F,$1F,$1F,$1F,$1F,$00,$0B,$0D,$0C,$0F,$4C,$4C,$4C,$00,$0B,$0B,$00
00081705                            ;				#
00081705                            	smpsVcAlgorithm		$05
00081705                            	smpsVcFeedback		$07
00081705                            ;				op1	op2	op3	op4
00081705                            	smpsVcDetune		$00,	$00,	$00,	$00
00081705                            	smpsVcCoarseFreq	$0F,	$0F,	$0F,	$00
00081705                            	smpsVcRateScale		$02,	$02,	$02,	$00
00081705                            	smpsVcAttackRate	$1F,	$1F,	$1F,	$1F
00081705                            	smpsVcAmpMod		$00,	$00,	$00,	$00
00081705                            	smpsVcDecayRate1	$1F,	$1F,	$1F,	$1F
00081705                            	smpsVcDecayRate2	$0C,	$0D,	$0B,	$00
00081705                            	smpsVcDecayLevel	$04,	$04,	$04,	$00
00081705                            	smpsVcReleaseRate	$0C,	$0C,	$0C,	$0F
00081705 3D00 0F0F 0F1F 9F9F 9F1F+  	smpsVcTotalLevel	$00,	$0B,	$0B,	$00
0008171E                            
0008171E                            ;	Voice 12
0008171E                            ;	$3D,$00,$0F,$0F,$0F,$1F,$9F,$9F,$9F,$1F,$1F,$1F,$1F,$00,$0B,$0D,$0C,$FF,$FF,$FF,$FF,$00,$0B,$0B,$00
0008171E                            ;				#
0008171E                            	smpsVcAlgorithm		$05
0008171E                            	smpsVcFeedback		$07
0008171E                            ;				op1	op2	op3	op4
0008171E                            	smpsVcDetune		$00,	$00,	$00,	$00
0008171E                            	smpsVcCoarseFreq	$0F,	$0F,	$0F,	$00
0008171E                            	smpsVcRateScale		$02,	$02,	$02,	$00
0008171E                            	smpsVcAttackRate	$1F,	$1F,	$1F,	$1F
0008171E                            	smpsVcAmpMod		$00,	$00,	$00,	$00
0008171E                            	smpsVcDecayRate1	$1F,	$1F,	$1F,	$1F
0008171E                            	smpsVcDecayRate2	$0C,	$0D,	$0B,	$00
0008171E                            	smpsVcDecayLevel	$0F,	$0F,	$0F,	$0F
0008171E                            	smpsVcReleaseRate	$0F,	$0F,	$0F,	$0F
0008171E 3D00 0F0F 0F1F 9F9F 9F1F+  	smpsVcTotalLevel	$00,	$0B,	$0B,	$00
00081737                            
00081737                            ;	Voice 13
00081737                            ;	$3D,$00,$0F,$0F,$0F,$1F,$1A,$18,$1C,$17,$11,$1A,$0E,$00,$0F,$14,$10,$FF,$FF,$FF,$FF,$05,$02,$00,$02
00081737                            ;				#
00081737                            	smpsVcAlgorithm		$05
00081737                            	smpsVcFeedback		$07
00081737                            ;				op1	op2	op3	op4
00081737                            	smpsVcDetune		$00,	$00,	$00,	$00
00081737                            	smpsVcCoarseFreq	$0F,	$0F,	$0F,	$00
00081737                            	smpsVcRateScale		$00,	$00,	$00,	$00
00081737                            	smpsVcAttackRate	$1C,	$18,	$1A,	$1F
00081737                            	smpsVcAmpMod		$00,	$00,	$00,	$00
00081737                            	smpsVcDecayRate1	$0E,	$1A,	$11,	$17
00081737                            	smpsVcDecayRate2	$10,	$14,	$0F,	$00
00081737                            	smpsVcDecayLevel	$0F,	$0F,	$0F,	$0F
00081737                            	smpsVcReleaseRate	$0F,	$0F,	$0F,	$0F
00081737 3D00 0F0F 0F1F 1A18 1C17+  	smpsVcTotalLevel	$02,	$00,	$02,	$05
00081750                            
00081750                            ;	Voice 14
00081750                            ;	$3D,$0F,$00,$00,$00,$1F,$1A,$18,$1C,$17,$11,$1A,$0E,$00,$0F,$14,$10,$FF,$FF,$FF,$FF,$05,$02,$00,$02
00081750                            ;				#
00081750                            	smpsVcAlgorithm		$05
00081750                            	smpsVcFeedback		$07
00081750                            ;				op1	op2	op3	op4
00081750                            	smpsVcDetune		$00,	$00,	$00,	$00
00081750                            	smpsVcCoarseFreq	$00,	$00,	$00,	$0F
00081750                            	smpsVcRateScale		$00,	$00,	$00,	$00
00081750                            	smpsVcAttackRate	$1C,	$18,	$1A,	$1F
00081750                            	smpsVcAmpMod		$00,	$00,	$00,	$00
00081750                            	smpsVcDecayRate1	$0E,	$1A,	$11,	$17
00081750                            	smpsVcDecayRate2	$10,	$14,	$0F,	$00
00081750                            	smpsVcDecayLevel	$0F,	$0F,	$0F,	$0F
00081750                            	smpsVcReleaseRate	$0F,	$0F,	$0F,	$0F
00081750 3D0F 0000 001F 1A18 1C17+  	smpsVcTotalLevel	$02,	$00,	$02,	$05
00081769                            
00081769                            ;	Voice 15
00081769                            ;	$3C,$0F,$00,$00,$00,$1F,$1A,$18,$1C,$17,$11,$1A,$0E,$00,$0F,$14,$0C,$FF,$FF,$FF,$FF,$00,$0B,$0E,$00
00081769                            ;				#
00081769                            	smpsVcAlgorithm		$04
00081769                            	smpsVcFeedback		$07
00081769                            ;				op1	op2	op3	op4
00081769                            	smpsVcDetune		$00,	$00,	$00,	$00
00081769                            	smpsVcCoarseFreq	$00,	$00,	$00,	$0F
00081769                            	smpsVcRateScale		$00,	$00,	$00,	$00
00081769                            	smpsVcAttackRate	$1C,	$18,	$1A,	$1F
00081769                            	smpsVcAmpMod		$00,	$00,	$00,	$00
00081769                            	smpsVcDecayRate1	$0E,	$1A,	$11,	$17
00081769                            	smpsVcDecayRate2	$0C,	$14,	$0F,	$00
00081769                            	smpsVcDecayLevel	$0F,	$0F,	$0F,	$0F
00081769                            	smpsVcReleaseRate	$0F,	$0F,	$0F,	$0F
00081769 3C0F 0000 001F 1A18 1C17+  	smpsVcTotalLevel	$00,	$0E,	$0B,	$00
00081782                            
00081782                            ;	Voice 16
00081782                            ;	$3B,$47,$63,$61,$31,$16,$8F,$98,$10,$08,$02,$04,$0C,$08,$06,$02,$05,$16,$14,$14,$16,$1C,$22,$32,$00
00081782                            ;				#
00081782                            	smpsVcAlgorithm		$03
00081782                            	smpsVcFeedback		$07
00081782                            ;				op1	op2	op3	op4
00081782                            	smpsVcDetune		$03,	$06,	$06,	$04
00081782                            	smpsVcCoarseFreq	$01,	$01,	$03,	$07
00081782                            	smpsVcRateScale		$00,	$02,	$02,	$00
00081782                            	smpsVcAttackRate	$10,	$18,	$0F,	$16
00081782                            	smpsVcAmpMod		$00,	$00,	$00,	$00
00081782                            	smpsVcDecayRate1	$0C,	$04,	$02,	$08
00081782                            	smpsVcDecayRate2	$05,	$02,	$06,	$08
00081782                            	smpsVcDecayLevel	$01,	$01,	$01,	$01
00081782                            	smpsVcReleaseRate	$06,	$04,	$04,	$06
00081782 3B47 6361 3116 8F98 1008+  	smpsVcTotalLevel	$00,	$32,	$22,	$1C
0008179B                            
0008179B                            ;	Voice 17
0008179B                            ;	$3D,$00,$0F,$0F,$0F,$1F,$9F,$9F,$9F,$1F,$1F,$1F,$1F,$00,$0B,$0D,$0C,$FF,$4C,$4C,$4C,$00,$0B,$0B,$00
0008179B                            ;				#
0008179B                            	smpsVcAlgorithm		$05
0008179B                            	smpsVcFeedback		$07
0008179B                            ;				op1	op2	op3	op4
0008179B                            	smpsVcDetune		$00,	$00,	$00,	$00
0008179B                            	smpsVcCoarseFreq	$0F,	$0F,	$0F,	$00
0008179B                            	smpsVcRateScale		$02,	$02,	$02,	$00
0008179B                            	smpsVcAttackRate	$1F,	$1F,	$1F,	$1F
0008179B                            	smpsVcAmpMod		$00,	$00,	$00,	$00
0008179B                            	smpsVcDecayRate1	$1F,	$1F,	$1F,	$1F
0008179B                            	smpsVcDecayRate2	$0C,	$0D,	$0B,	$00
0008179B                            	smpsVcDecayLevel	$04,	$04,	$04,	$0F
0008179B                            	smpsVcReleaseRate	$0C,	$0C,	$0C,	$0F
0008179B 3D00 0F0F 0F1F 9F9F 9F1F+  	smpsVcTotalLevel	$00,	$0B,	$0B,	$00
000817B4                            	even
000817B4                            	even
000817B4                            		even
000817B4                            Music92:	incbin	"sound/music/Mus92 - IMZ.bin"
00083720 00                         		even
00083720                            Music93:	incbin	"sound/music/Mus93 - CSZ.bin"
00083C02                            		even
00083C02                            Music94:	incbin	"sound/music/Mus95 - CWZ3.bin"
00084120                            		even
00084120                            Music95:	incbin	"sound/music/output.bin"
0008494C                            		even
0008494C                            Music96:	incbin	"sound/music/RadNex.bin"
00085800 00                         		even
00085800                            ; ---------------------------------------------------------------------------
00085800                            ; Sound	effect pointers
00085800                            ; ---------------------------------------------------------------------------
00085800                            SoundIndex:
00085800 0000 0000                  ptr_sndA0:	dc.l SoundA0
00085804 0000 0000                  ptr_sndA1:	dc.l SoundA1
00085808 0000 0000                  ptr_sndA2:	dc.l SoundA2
0008580C 0000 0000                  ptr_sndA3:	dc.l SoundA3
00085810 0000 0000                  ptr_sndA4:	dc.l SoundA4
00085814 0000 0000                  ptr_sndA5:	dc.l SoundA5
00085818 0000 0000                  ptr_sndA6:	dc.l SoundA6
0008581C 0000 0000                  ptr_sndA7:	dc.l SoundA7
00085820 0000 0000                  ptr_sndA8:	dc.l SoundA8
00085824 0000 0000                  ptr_sndA9:	dc.l SoundA9
00085828 0000 0000                  ptr_sndAA:	dc.l SoundAA
0008582C 0000 0000                  ptr_sndAB:	dc.l SoundAB
00085830 0000 0000                  ptr_sndAC:	dc.l SoundAC
00085834 0000 0000                  ptr_sndAD:	dc.l SoundAD
00085838 0000 0000                  ptr_sndAE:	dc.l SoundAE
0008583C 0000 0000                  ptr_sndAF:	dc.l SoundAF
00085840 0000 0000                  ptr_sndB0:	dc.l SoundB0
00085844 0000 0000                  ptr_sndB1:	dc.l SoundB1
00085848 0000 0000                  ptr_sndB2:	dc.l SoundB2
0008584C 0000 0000                  ptr_sndB3:	dc.l SoundB3
00085850 0000 0000                  ptr_sndB4:	dc.l SoundB4
00085854 0000 0000                  ptr_sndB5:	dc.l SoundB5
00085858 0000 0000                  ptr_sndB6:	dc.l SoundB6
0008585C 0000 0000                  ptr_sndB7:	dc.l SoundB7
00085860 0000 0000                  ptr_sndB8:	dc.l SoundB8
00085864 0000 0000                  ptr_sndB9:	dc.l SoundB9
00085868 0000 0000                  ptr_sndBA:	dc.l SoundBA
0008586C 0000 0000                  ptr_sndBB:	dc.l SoundBB
00085870 0000 0000                  ptr_sndBC:	dc.l SoundBC
00085874 0000 0000                  ptr_sndBD:	dc.l SoundBD
00085878 0000 0000                  ptr_sndBE:	dc.l SoundBE
0008587C 0000 0000                  ptr_sndBF:	dc.l SoundBF
00085880 0000 0000                  ptr_sndC0:	dc.l SoundC0
00085884 0000 0000                  ptr_sndC1:	dc.l SoundC1
00085888 0000 0000                  ptr_sndC2:	dc.l SoundC2
0008588C 0000 0000                  ptr_sndC3:	dc.l SoundC3
00085890 0000 0000                  ptr_sndC4:	dc.l SoundC4
00085894 0000 0000                  ptr_sndC5:	dc.l SoundC5
00085898 0000 0000                  ptr_sndC6:	dc.l SoundC6
0008589C 0000 0000                  ptr_sndC7:	dc.l SoundC7
000858A0 0000 0000                  ptr_sndC8:	dc.l SoundC8
000858A4 0000 0000                  ptr_sndC9:	dc.l SoundC9
000858A8 0000 0000                  ptr_sndCA:	dc.l SoundCA
000858AC 0000 0000                  ptr_sndCB:	dc.l SoundCB
000858B0 0000 0000                  ptr_sndCC:	dc.l SoundCC
000858B4 0000 0000                  ptr_sndCD:	dc.l SoundCD
000858B8 0000 0000                  ptr_sndCE:	dc.l SoundCE
000858BC 0000 0000                  ptr_sndCF:	dc.l SoundCF
000858C0                            ptr_sndend
000858C0                            ; ---------------------------------------------------------------------------
000858C0                            ; Special sound effect pointers
000858C0                            ; ---------------------------------------------------------------------------
000858C0                            SpecSoundIndex:
000858C0 0000 0000                  ptr_sndD0:	dc.l SoundD0
000858C4                            ;ptr_sndD1:	dc.l SoundD1
000858C4                            ptr_specend
000858C4                            SoundA0:	incbin	"sound/sfx/SndA0 - Jump.bin"
000858DA                            		even
000858DA                            SoundA1:	include	"sound/sfx/SndA1 - Lamppost.asm"
000858DA                            SndA1_Lamppost_Header:
000858DA =00000001                  smpsHeaderStartSong = 1
000858DA 0000                       	smpsHeaderVoice     SndA1_Lamppost_Voices
000858DC 01                         	smpsHeaderTempoSFX  $01
000858DD 01                         	smpsHeaderChanSFX   $01
000858DE                            
000858E4                            
000858E4                            ; FM5 Data
000858E4                            SndA1_Lamppost_FM5:
000858E6 BD06 BA16                  	dc.b	nC5, $06, nA4, $16
000858EA F2                         	smpsStop
000858EB                            
000858EB                            SndA1_Lamppost_Voices:
000858EB                            ;	Voice $00
000858EB                            ;	$3C
000858EB                            ;	$05, $01, $0A, $01, 	$56, $5C, $5C, $5C, 	$0E, $11, $11, $11
000858EB                            ;	$09, $0A, $06, $0A, 	$4F, $3F, $3F, $3F, 	$17, $80, $20, $80
000858EB                            	smpsVcAlgorithm     $04
000858EB                            	smpsVcFeedback      $07
000858EB                            	smpsVcUnusedBits    $00
000858EB                            	smpsVcDetune        $00, $00, $00, $00
000858EB                            	smpsVcCoarseFreq    $01, $0A, $01, $05
000858EB                            	smpsVcRateScale     $01, $01, $01, $01
000858EB                            	smpsVcAttackRate    $1C, $1C, $1C, $1C
000858EB                            	smpsVcAmpMod        $00, $00, $00, $00
000858EB                            	smpsVcDecayRate1    $11, $11, $11, $11
000858EB                            	smpsVcDecayRate2    $0A, $06, $0A, $06
000858EB                            	smpsVcDecayLevel    $03, $03, $03, $03
000858EB                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
000858EB 3C05 010A 015C 5C5C 5C11+  	smpsVcTotalLevel    $00, $20, $00, $17
00085904                            
00085904                            
00085904                            		even
00085904                            SoundA2:	incbin	"sound/sfx/SndA2.bin"
00085938 00                         		even
00085938                            SoundA3:	include	"sound/sfx/SndA3 - Death.asm"
00085938                            SndA3_Death_Header:
00085938 =00000001                  smpsHeaderStartSong = 1
00085938 0000                       	smpsHeaderVoice     SndA3_Death_Voices
0008593A 01                         	smpsHeaderTempoSFX  $01
0008593B 01                         	smpsHeaderChanSFX   $01
0008593C                            
00085942                            
00085942                            ; FM5 Data
00085942                            SndA3_Death_FM5:
00085944 B007 E7AD                  	dc.b	nB3, $07, smpsNoAttack, nAb3
00085948                            
00085948                            SndA3_Death_Loop00:
00085948 01                         	dc.b	$01
00085949 E601                       	smpsAlterVol        $01
0008594B F700 2FFF F9               	smpsLoop            $00, $2F, SndA3_Death_Loop00
00085950 F2                         	smpsStop
00085951                            
00085951                            SndA3_Death_Voices:
00085951                            ;	Voice $00
00085951                            ;	$30
00085951                            ;	$30, $30, $30, $30, 	$9E, $D8, $DC, $DC, 	$0E, $0A, $04, $05
00085951                            ;	$08, $08, $08, $08, 	$BF, $BF, $BF, $BF, 	$14, $3C, $14, $80
00085951                            	smpsVcAlgorithm     $00
00085951                            	smpsVcFeedback      $06
00085951                            	smpsVcUnusedBits    $00
00085951                            	smpsVcDetune        $03, $03, $03, $03
00085951                            	smpsVcCoarseFreq    $00, $00, $00, $00
00085951                            	smpsVcRateScale     $03, $03, $03, $02
00085951                            	smpsVcAttackRate    $1C, $1C, $18, $1E
00085951                            	smpsVcAmpMod        $00, $00, $00, $00
00085951                            	smpsVcDecayRate1    $05, $04, $0A, $0E
00085951                            	smpsVcDecayRate2    $08, $08, $08, $08
00085951                            	smpsVcDecayLevel    $0B, $0B, $0B, $0B
00085951                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
00085951 3030 3030 309E D8DC DC0E+  	smpsVcTotalLevel    $00, $14, $3C, $14
0008596A                            
0008596A                            
0008596A                            		even
0008596A                            SoundA4:	incbin	"sound/sfx/SndA4 - Skid.bin"
0008598E                            		even
0008598E                            SoundA5:	incbin	"sound/sfx/SndA5.bin"
000859CA 00                         		even
000859CA                            SoundA6:	incbin	"sound/sfx/SndA6 - Hit Spikes.bin"
000859FA                            		even
000859FA                            SoundA7:	incbin	"sound/sfx/SndA7 - Push Block.bin"
00085A2A                            		even
00085A2A                            SoundA8:	incbin	"sound/sfx/SndA8 - SS Goal.bin"
00085A4A                            		even
00085A4A                            SoundA9:	incbin	"sound/sfx/SndA9 - SS Item.bin"
00085A84                            		even
00085A84                            SoundAA:	incbin	"sound/sfx/SndAA - Splash.bin"
00085AC6                            		even
00085AC6                            SoundAB:	include	"sound/sfx/heart.asm"
00085AC6                            SndCE_Ring_Left_Speaker_Header:
00085AC6 =00000001                  smpsHeaderStartSong = 1
00085AC6 0000                       	smpsHeaderVoice     SndCE_Ring_Left_Speaker_Voices
00085AC8 01                         	smpsHeaderTempoSFX  $01
00085AC9 01                         	smpsHeaderChanSFX   $01
00085ACA                            
00085AD0                            
00085AD0                            ; FM4 Data
00085AD0                            SndCE_Ring_Left_Speaker_FM4:
00085AD2 BD04 C404 C91B             	dc.b	nC5, $04, nG5, $04, nC6, $1B
00085AD8 F2                         	smpsStop
00085AD9                            
00085AD9                            SndCE_Ring_Left_Speaker_Voices:
00085AD9                            ;	Voice $00
00085AD9                            ;	$04
00085AD9                            ;	$37, $72, $77, $49, 	$1F, $1F, $1F, $1F, 	$07, $0A, $07, $0D
00085AD9                            ;	$00, $0B, $00, $0B, 	$1F, $0F, $1F, $0F, 	$23, $80, $23, $80
00085AD9 0437 7277 021F 1F1F 1F07+  	dc.b	$04,$37,$72,$77,$02,$1F,$1F,$1F,$1F,$07,$0A,$07,$0D,$00,$00,$00,$00,$10,$07,$10,$07,$23,$00,$23,$00
00085AF2                            
00085AF2                            
00085AF2                            		even
00085AF2                            SoundAC:	incbin	"sound/sfx/SndAC - Hit Boss.bin"
00085B26                            		even
00085B26                            SoundAD:	incbin	"sound/sfx/SndAD - Get Bubble.bin"
00085B5C                            		even
00085B5C                            SoundAE:	incbin	"sound/sfx/SndAE - Fireball.bin"
00085BA6                            		even
00085BA6                            SoundAF:	incbin	"sound/sfx/SndAF - Shield.bin"
00085BD4                            		even
00085BD4                            SoundB0:	incbin	"sound/sfx/SndB0 - Saw.bin"
00085C06                            		even
00085C06                            SoundB1:	incbin	"sound/sfx/SndB1 - Electric.bin"
00085C32                            		even
00085C32                            SoundB2:	incbin	"sound/sfx/SndB2 - Drown Death.bin"
00085C82                            		even
00085C82                            SoundB3:	incbin	"sound/sfx/SndB3 - Flamethrower.bin"
00085CCC                            		even
00085CCC                            SoundB4:	incbin	"sound/sfx/SndB4 - Bumper.bin"
00085D28                            		even
00085D28                            SoundB5:	incbin	"sound/sfx/SndB5 - Ring.bin"
00085D56 00                         		even
00085D56                            SoundB6:	incbin	"sound/sfx/SndB6 - Spikes Move.bin"
00085D74                            		even
00085D74                            SoundB7:	incbin	"sound/sfx/SndB7 - Rumbling.bin"
00085DB0                            		even
00085DB0                            SoundB8:	incbin	"sound/sfx/Bomb.bin"
00085DDC                            		even
00085DDC                            SoundB9:	incbin	"sound/sfx/SndB9 - Collapse.bin"
00085E40                            		even
00085E40                            SoundBA:	incbin	"sound/sfx/SndBA - SS Glass.bin"
00085E68                            		even
00085E68                            SoundBB:	incbin	"sound/sfx/SndBB - Door.bin"
00085E94                            		even
00085E94                            SoundBC:	incbin	"sound/sfx/SndBC - Teleport.bin"
00085ED6                            		even
00085ED6                            SoundBD:	incbin	"sound/sfx/SndBD - ChainStomp.bin"
00085F2A                            		even
00085F2A                            SoundBE:	incbin	"sound/sfx/SndBE - Roll.bin"
00085F64                            		even
00085F64                            SoundBF:	incbin	"sound/sfx/SndBF - Get Continue.bin"
00085FD6                            		even
00085FD6                            SoundC0:	incbin	"sound/sfx/SndC0 - Basaran Flap.bin"
00086004                            		even
00086004                            SoundC1:	incbin	"sound/sfx/SndC1 - Break Item.bin"
00086032                            		even
00086032                            SoundC2:	incbin	"sound/sfx/SndC2 - Drown Warning.bin"
0008605C                            		even
0008605C                            SoundC3:	incbin	"sound/sfx/SndC3 - Giant Ring.bin"
000860D6                            		even
000860D6                            SoundC4:	incbin	"sound/sfx/SndC4 - Bomb.bin"
000860FE                            		even
000860FE                            SoundC5:	include	"sound/sfx/SndC5 - Cash Register.asm"
000860FE                            SndC5_Cash_Register_Header:
000860FE =00000001                  smpsHeaderStartSong = 1
000860FE 0000                       	smpsHeaderVoice     SndC5_Cash_Register_Voices
00086100 01                         	smpsHeaderTempoSFX  $01
00086101 03                         	smpsHeaderChanSFX   $03
00086102                            
00086114                            
00086114                            ; FM5 Data
00086114                            SndC5_Cash_Register_FM5:
00086116 8A08 8002 8A08             	dc.b	nA0, $08, nRst, $02, nA0, $08
0008611C F2                         	smpsStop
0008611D                            
0008611D                            ; FM4 Data
0008611D                            SndC5_Cash_Register_FM4:
0008611F 8012 C615                  	dc.b	nRst, $12, nA5, $15
00086123 F2                         	smpsStop
00086124                            
00086124                            ; PSG3 Data
00086124                            SndC5_Cash_Register_PSG3:
00086124 F502                       	smpsPSGvoice        fTone_02
00086126 F3E7                       	smpsPSGform         $E7
00086128 8002 C205 C404 C205 C404   	dc.b	nRst, $02, nF5, $05, nG5, $04, nF5, $05, nG5, $04
00086132 F2                         	smpsStop
00086133                            
00086133                            SndC5_Cash_Register_Voices:
00086133                            ;	Voice $00
00086133                            ;	$3B
00086133                            ;	$03, $02, $02, $06, 	$18, $1A, $1A, $96, 	$17, $0E, $0A, $10
00086133                            ;	$00, $00, $00, $00, 	$FF, $FF, $FF, $FF, 	$00, $28, $39, $80
00086133                            	smpsVcAlgorithm     $03
00086133                            	smpsVcFeedback      $07
00086133                            	smpsVcUnusedBits    $00
00086133                            	smpsVcDetune        $00, $00, $00, $00
00086133                            	smpsVcCoarseFreq    $06, $02, $02, $03
00086133                            	smpsVcRateScale     $02, $00, $00, $00
00086133                            	smpsVcAttackRate    $16, $1A, $1A, $18
00086133                            	smpsVcAmpMod        $00, $00, $00, $00
00086133                            	smpsVcDecayRate1    $10, $0A, $0E, $17
00086133                            	smpsVcDecayRate2    $00, $00, $00, $00
00086133                            	smpsVcDecayLevel    $0F, $0F, $0F, $0F
00086133                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
00086133 3B03 0202 0618 1A1A 9617+  	smpsVcTotalLevel    $00, $39, $28, $00
0008614C                            
0008614C                            ;	Voice $01
0008614C                            ;	$04
0008614C                            ;	$37, $72, $77, $49, 	$1F, $1F, $1F, $1F, 	$07, $0A, $07, $0D
0008614C                            ;	$00, $0B, $00, $0B, 	$1F, $0F, $1F, $0F, 	$23, $80, $23, $80
0008614C 0437 7277 021F 1F1F 1F07+  	dc.b	$04,$37,$72,$77,$02,$1F,$1F,$1F,$1F,$07,$0A,$07,$0D,$00,$00,$00,$00,$10,$07,$10,$07,$23,$00,$23,$00
00086165                            
00086165                            
00086166 00                         		even
00086166                            SoundC6:	incbin	"sound/sfx/SndC6 - Ring Loss.bin"
000861A8                            		even
000861A8                            SoundC7:	incbin	"sound/sfx/SndC7 - Chain Rising.bin"
000861D6                            		even
000861D6                            SoundC8:	incbin	"sound/sfx/SndC8 - Burning.bin"
000861E8                            		even
000861E8                            SoundC9:	incbin	"sound/sfx/SndC9 - Hidden Bonus.bin"
00086216                            		even
00086216                            SoundCA:	incbin	"sound/sfx/SndCA - Enter SS.bin"
00086244                            		even
00086244                            SoundCB:	incbin	"sound/sfx/SndCB - Wall Smash.bin"
00086290                            		even
00086290                            SoundCC:	include	"sound/sfx/SndCC - Spring.asm"
00086290                            SndCC_Spring_Header:
00086290 =00000001                  smpsHeaderStartSong = 1
00086290 0000                       	smpsHeaderVoice     SndCC_Spring_Voices
00086292 01                         	smpsHeaderTempoSFX  $01
00086293 01                         	smpsHeaderChanSFX   $01
00086294                            
0008629A                            
0008629A                            ; FM4 Data
0008629A                            SndCC_Spring_FM4:
0008629C 8001                       	dc.b	nRst, $01
0008629E F003 015D 0F               	smpsModSet          $03, $01, $5D, $0F
000862A3 B00C                       	dc.b	nB3, $0C
000862A5 F4                         	smpsModOff
000862A6                            
000862A6                            SndCC_Spring_Loop00:
000862A6 E7                         	dc.b	smpsNoAttack
000862A7 E602                       	smpsAlterVol        $02
000862A9 BD02                       	dc.b	nC5, $02
000862AB F700 19FF F7               	smpsLoop            $00, $19, SndCC_Spring_Loop00
000862B0 F2                         	smpsStop
000862B1                            
000862B1                            SndCC_Spring_Voices:
000862B1                            ;	Voice $00
000862B1                            ;	$20
000862B1                            ;	$36, $35, $30, $31, 	$DF, $DF, $9F, $9F, 	$07, $06, $09, $06
000862B1                            ;	$07, $06, $06, $08, 	$2F, $1F, $1F, $FF, 	$16, $30, $13, $80
000862B1                            	smpsVcAlgorithm     $00
000862B1                            	smpsVcFeedback      $04
000862B1                            	smpsVcUnusedBits    $00
000862B1                            	smpsVcDetune        $03, $03, $03, $03
000862B1                            	smpsVcCoarseFreq    $01, $00, $04, $05
000862B1                            	smpsVcRateScale     $02, $02, $03, $03
000862B1                            	smpsVcAttackRate    $1F, $1F, $1F, $1F
000862B1                            	smpsVcAmpMod        $00, $00, $00, $00
000862B1                            	smpsVcDecayRate1    $06, $09, $06, $07
000862B1                            	smpsVcDecayRate2    $08, $06, $06, $07
000862B1                            	smpsVcDecayLevel    $0F, $01, $01, $02
000862B1                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
000862B1 2035 3430 31DF DF9F 9F07+  	smpsVcTotalLevel    $00, $13, $30, $16
000862CA                            
000862CA                            
000862CA                            		even
000862CA                            SoundCD:	include	"sound/sfx/SndCD - Switch.asm"
000862CA                            SndCD_Switch_Header:
000862CA =00000001                  smpsHeaderStartSong = 1
000862CA 0000                       	smpsHeaderVoice     SndCD_Switch_Voices
000862CC 01                         	smpsHeaderTempoSFX  $01
000862CD 01                         	smpsHeaderChanSFX   $01
000862CE                            
000862D4                            
000862D4                            ; PSG3 Data
000862D4                            SndCD_Switch_PSG3:
000862D4 BC02                       	dc.b	nB4, $02
000862D6 F2                         	smpsStop
000862D7                            
000862D7                            ; Song seems to not use any FM voices
000862D7                            SndCD_Switch_Voices:
000862D7                            SndCD_Switch_Voices:
000862D8 00                         		even
000862D8                            SoundCE:	incbin	"sound/sfx/SndCE - Ring Left Speaker.bin"
00086306 00                         		even
00086306                            SoundCF:	include	"sound/sfx/SndCF - Signpost.asm"
00086306                            SndCF_Signpost_Header:
00086306 =00000003                  smpsHeaderStartSong = 3
00086306 0000                       	smpsHeaderVoice     SndCF_Signpost_Voices
00086308 01                         	smpsHeaderTempoSFX  $01
00086309 01                         	smpsHeaderChanSFX   $01
0008630A                            
00086316                            
00086316                            ; FM4 Data
00086316                            SndCF_Signpost_FM5:
00086316 8004                       	dc.b	nRst, $04
00086318                            
00086318                            ; FM6 Data
00086318                            SndCF_Signpost_FM6:
0008631A                            
0008631A                            SndCF_Signpost_Loop00:
0008631A B405                       	dc.b	nEb4, $05
0008631E F700 08FF F8               	smpsLoop            $00, $08, SndCF_Signpost_Loop00
00086323 F2                         	smpsStop
00086324                            
00086324                            SndCF_Signpost_Voices:
00086324                            ;	Voice $00
00086324                            ;	$F4
00086324                            ;	$06, $04, $0F, $0E, 	$1F, $1F, $1F, $1F, 	$00, $00, $0B, $0B
00086324                            ;	$00, $00, $05, $08, 	$0F, $0F, $FF, $FF, 	$0C, $85, $00, $80
00086324                            	smpsVcAlgorithm     $04
00086324                            	smpsVcFeedback      $06
00086324                            	smpsVcUnusedBits    $03
00086324                            	smpsVcDetune        $00, $00, $00, $00
00086324                            	smpsVcCoarseFreq    $0E, $0F, $04, $06
00086324                            	smpsVcRateScale     $00, $00, $00, $00
00086324                            	smpsVcAttackRate    $1F, $1F, $1F, $1F
00086324                            	smpsVcAmpMod        $00, $00, $00, $00
00086324                            	smpsVcDecayRate1    $0B, $0B, $00, $00
00086324                            	smpsVcDecayRate2    $08, $05, $00, $00
00086324                            	smpsVcDecayLevel    $0F, $0F, $00, $00
00086324                            	smpsVcReleaseRate   $0F, $0F, $0F, $0F
00086324 F406 040F 0E1F 1F1F 1F00+  	smpsVcTotalLevel    $80, $00, $85, $0C
00086324 F406 040F 0E1F 1F1F 1F00+  	smpsVcTotalLevel    $80, $00, $85, $0C
0008633E 00                         		even
0008633E                            SoundD0:	incbin	"sound/sfx/SndD0 - Waterfall.bin"
00086378                            		even
00086378                            ;SoundD1:	dc.b	0,	0
00086378                            ;		even
00086378                            
00086378                            		; Don't let Sega sample cross $8000-byte boundary
00086378                            		; (DAC driver doesn't switch banks automatically)
00088000                            SegaPCM:	;incbin	"sound/dac/sega.pcm"
00088000                            SegaPCM_End
00088000                            		even
00088000                            
00088000                            	;	if SegaPCM_End-SegaPCM>$8000
00088000                            	;		inform 3,"Sega sound must fit within $8000 bytes, but you have a $%h byte Sega sound.",SegaPCM_End-SegaPCM
00088000                            	;	endc
00088000                            	;	if SegaPCM_End-SegaPCM>Size_of_SegaPCM
00088000                            	;		inform 3,"Size_of_SegaPCM = $%h, but you have a $%h byte Sega sound.",Size_of_SegaPCM,SegaPCM_End-SegaPCM
00088000                            	;	endc
00088000                            
00088000                            
00088000                            
00088000                            ; end of 'ROM'
00088000                            		even
00088000                            	
00088000                            ;	incbin "stuffs\S2NA.7z"
00088000                            EndOfRom:
00088000                            
00088000                            
